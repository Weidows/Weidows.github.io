<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>🐳MM-Detection-Colab</title>
      <link href="/post/python/code/MM-Detection/"/>
      <url>/post/python/code/MM-Detection/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:11:24 * @FilePath: \Blog-private\scaffolds\post.md * @Description: * @!: *********************************************************************--><h2 id="序-3">序</h2><ul><li><p>Colab 平台对于 <code>轻量级/边缘计算</code> 比较方便, 尤其是对这种教程性质的 notebook, 分享和运行都开箱即用</p></li><li><p>但另一方面:</p><p><code>因</code>: 免费版的 Colab 所给的硬件资源不是很稳定, 用太久的话会分不到 GPU, 虽然给的 GPU 肯定是比自己的开发机强很多, 但是跑大型项目肯定带不动 (而且 Colab 单次运行最多持续 6h, 一段时间没动作的话会断连, 断开后再过一阵 runtime 会被重置)</p></li><li><p><code>果</code>: 可以用它来学习下怎么搭环境以及一些小测试</p><p>毕竟生产服务器申请不易 / 环境也不能乱动</p><p>受系统和网络限制, 在开发机搭环境并不理想</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="装环境-2">装环境</h2><blockquote><p>从安装到放弃到爬出坑 :( <br>跟着这几篇装的环境:<sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup><sup id='cite_ref-3'><a href="#cite_note-3">[3]</a></sup>, 有借鉴意义但是指导不明确 <br>个人先跟着官方出的视频教程和 openbayes 上的 notebook 试了试水, 很深 <sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup>; 最后找到一个源库 tutorial-fork 的 colab-notebook <sup id='cite_ref-4'><a href="#cite_note-4">[4]</a></sup> \</p></blockquote><p>预先装上 cuda, cudnn (colab自带)</p><p>依赖链: <code>cuda -&gt; pytorch -&gt; mmcv-full -&gt; mmdet</code></p><p>每一步依赖前面环境的版本, 即使后面能装上也可能不适配, 任何一步有问题都 can’t-run</p><p><img src="https://www.helloimg.com/images/2022/06/06/ZtZpOm.png" alt=""></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ====================可选, colab并不自带conda=====================</span></span><br><span class="line">!conda create -n openmmlab -y</span><br><span class="line">!conda activate openmmlab</span><br><span class="line">!conda init</span><br></pre></td></tr></table></figure><pre><code>/bin/bash: conda: command not found/bin/bash: conda: command not found/bin/bash: conda: command not found</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ================== 一键装好环境 =======================</span></span><br><span class="line"><span class="comment"># 如果这里有问题可以重启一下内核: 代码执行程序 -&gt; 重新启动代码执行程序</span></span><br><span class="line"></span><br><span class="line">!python -m pip install --upgrade pip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意对应机子配置: https://pytorch.org/</span></span><br><span class="line"><span class="comment"># install dependencies: (use cu111 because colab has CUDA 11.1)</span></span><br><span class="line">%pip install torch==<span class="number">1.9</span><span class="number">.0</span>+cu111 torchvision==<span class="number">0.10</span><span class="number">.0</span>+cu111 -f https://download.pytorch.org/whl/torch_stable.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># windows 平台不用装了, 一定会卡在这</span></span><br><span class="line"><span class="comment"># https://github.com/open-mmlab/mmcv/blob/master/README_zh-CN.md</span></span><br><span class="line">%pip install mmcv-full -f https://download.openmmlab.com/mmcv/dist/cu111/torch1<span class="number">.9</span><span class="number">.0</span>/index.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># 与pip/conda同级的专门给mm-lab用的包管理器, 报错率很高</span></span><br><span class="line">%pip install openmim</span><br><span class="line"></span><br><span class="line"><span class="comment"># 依赖 mmcv, 如果用mim装的话大概率有问题</span></span><br><span class="line">%pip install mmsegmentation</span><br><span class="line"></span><br><span class="line"><span class="comment"># 后面要用到源码库的 config, 可选用源库安装</span></span><br><span class="line">%pip install mmdet</span><br><span class="line"><span class="comment"># !rm -rf /content/mmdetection</span></span><br><span class="line">!git clone https://github.com/<span class="built_in">open</span>-mmlab/mmdetection.git</span><br><span class="line">%cd mmdetection</span><br><span class="line"><span class="comment"># %pip install -e .</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 后续当前路径为 /content/mmdetection</span></span><br></pre></td></tr></table></figure><pre><code>Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/Requirement already satisfied: pip in /usr/local/lib/python3.7/dist-packages (21.1.3)Collecting pip  Downloading pip-22.1.2-py3-none-any.whl (2.1 MB)[K     |████████████████████████████████| 2.1 MB 4.8 MB/s [?25hInstalling collected packages: pip  Attempting uninstall: pip    Found existing installation: pip 21.1.3    Uninstalling pip-21.1.3:      Successfully uninstalled pip-21.1.3Successfully installed pip-22.1.2Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/Looking in links: https://download.pytorch.org/whl/torch_stable.htmlCollecting torch==1.9.0+cu111  Downloading https://download.pytorch.org/whl/cu111/torch-1.9.0%2Bcu111-cp37-cp37m-linux_x86_64.whl (2041.3 MB)[2K     [91m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m[91m╸[0m [32m2.0/2.0 GB[0m [31m81.2 MB/s[0m eta [36m0:00:01[0mtcmalloc: large alloc 2041348096 bytes == 0x2a2a000 @  0x7fdbaca001e7 0x4a3940 0x4a39cc 0x592b76 0x4df71e 0x59afff 0x515655 0x549576 0x593fce 0x511e2c 0x549576 0x593fce 0x511e2c 0x549576 0x593fce 0x511e2c 0x549576 0x593fce 0x511e2c 0x549576 0x593fce 0x511e2c 0x593dd7 0x511e2c 0x549576 0x593fce 0x548ae9 0x5127f1 0x549576 0x593fce 0x511e2c[2K     [91m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m[91m╸[0m [32m2.0/2.0 GB[0m [31m88.6 MB/s[0m eta [36m0:00:01[0mtcmalloc: large alloc 2551685120 bytes == 0x7c4f2000 @  0x7fdbaca01615 0x592b76 0x4df71e 0x59afff 0x515655 0x549576 0x593fce 0x511e2c 0x549576 0x593fce 0x511e2c 0x549576 0x593fce 0x511e2c 0x549576 0x593fce 0x511e2c 0x549576 0x593fce 0x511e2c 0x593dd7 0x511e2c 0x549576 0x593fce 0x548ae9 0x5127f1 0x549576 0x593fce 0x511e2c 0x549576 0x593fcetcmalloc: large alloc 2041348096 bytes == 0x2a2a000 @  0x7fdbaca001e7 0x4a3940 0x5b438c 0x5b46f7 0x59afff 0x515655 0x549576 0x593fce 0x511e2c 0x549576 0x593fce 0x511e2c 0x549576 0x4bcb19 0x59c019 0x595ef6 0x5fbece 0x594b72 0x548cc1 0x51566f 0x593dd7 0x548ae9 0x51566f 0x549576 0x593fce 0x548ae9 0x51566f 0x549576 0x593fce 0x548ae9 0x5127f1[2K     [90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m [32m2.0/2.0 GB[0m [31m858.4 kB/s[0m eta [36m0:00:00[0m[?25hCollecting torchvision==0.10.0+cu111  Downloading https://download.pytorch.org/whl/cu111/torchvision-0.10.0%2Bcu111-cp37-cp37m-linux_x86_64.whl (23.2 MB)[2K     [90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m [32m23.2/23.2 MB[0m [31m38.2 MB/s[0m eta [36m0:00:00[0m[?25hRequirement already satisfied: typing-extensions in /usr/local/lib/python3.7/dist-packages (from torch==1.9.0+cu111) (4.2.0)Requirement already satisfied: pillow&gt;=5.3.0 in /usr/local/lib/python3.7/dist-packages (from torchvision==0.10.0+cu111) (7.1.2)Requirement already satisfied: numpy in /usr/local/lib/python3.7/dist-packages (from torchvision==0.10.0+cu111) (1.21.6)Installing collected packages: torch, torchvision  Attempting uninstall: torch    Found existing installation: torch 1.11.0+cu113    Uninstalling torch-1.11.0+cu113:      Successfully uninstalled torch-1.11.0+cu113  Attempting uninstall: torchvision    Found existing installation: torchvision 0.12.0+cu113    Uninstalling torchvision-0.12.0+cu113:      Successfully uninstalled torchvision-0.12.0+cu113[31mERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.torchtext 0.12.0 requires torch==1.11.0, but you have torch 1.9.0+cu111 which is incompatible.torchaudio 0.11.0+cu113 requires torch==1.11.0, but you have torch 1.9.0+cu111 which is incompatible.[0m[31m[0mSuccessfully installed torch-1.9.0+cu111 torchvision-0.10.0+cu111[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv[0m[33m[0mLooking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/Looking in links: https://download.openmmlab.com/mmcv/dist/cu111/torch1.9.0/index.htmlCollecting mmcv-full  Downloading https://download.openmmlab.com/mmcv/dist/cu111/torch1.9.0/mmcv_full-1.5.2-cp37-cp37m-manylinux1_x86_64.whl (45.6 MB)[2K     [90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m [32m45.6/45.6 MB[0m [31m7.8 MB/s[0m eta [36m0:00:00[0m[?25hCollecting addict  Downloading addict-2.4.0-py3-none-any.whl (3.8 kB)Requirement already satisfied: packaging in /usr/local/lib/python3.7/dist-packages (from mmcv-full) (21.3)Requirement already satisfied: numpy in /usr/local/lib/python3.7/dist-packages (from mmcv-full) (1.21.6)Collecting yapf  Downloading yapf-0.32.0-py2.py3-none-any.whl (190 kB)[2K     [90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m [32m190.2/190.2 kB[0m [31m6.0 MB/s[0m eta [36m0:00:00[0m[?25hRequirement already satisfied: pyyaml in /usr/local/lib/python3.7/dist-packages (from mmcv-full) (3.13)Requirement already satisfied: opencv-python&gt;=3 in /usr/local/lib/python3.7/dist-packages (from mmcv-full) (4.1.2.30)Requirement already satisfied: Pillow in /usr/local/lib/python3.7/dist-packages (from mmcv-full) (7.1.2)Requirement already satisfied: pyparsing!=3.0.5,&gt;=2.0.2 in /usr/local/lib/python3.7/dist-packages (from packaging-&gt;mmcv-full) (3.0.9)Installing collected packages: yapf, addict, mmcv-fullSuccessfully installed addict-2.4.0 mmcv-full-1.5.2 yapf-0.32.0[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv[0m[33m[0mLooking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/Collecting openmim  Downloading openmim-0.1.5.tar.gz (35 kB)  Preparing metadata (setup.py) ... [?25l[?25hdoneRequirement already satisfied: Click==7.1.2 in /usr/local/lib/python3.7/dist-packages (from openmim) (7.1.2)Collecting colorama  Downloading colorama-0.4.4-py2.py3-none-any.whl (16 kB)Requirement already satisfied: requests in /usr/local/lib/python3.7/dist-packages (from openmim) (2.23.0)Collecting model-index  Downloading model_index-0.1.11-py3-none-any.whl (34 kB)Requirement already satisfied: pandas in /usr/local/lib/python3.7/dist-packages (from openmim) (1.3.5)Requirement already satisfied: tabulate in /usr/local/lib/python3.7/dist-packages (from openmim) (0.8.9)Requirement already satisfied: markdown in /usr/local/lib/python3.7/dist-packages (from model-index-&gt;openmim) (3.3.7)Requirement already satisfied: pyyaml in /usr/local/lib/python3.7/dist-packages (from model-index-&gt;openmim) (3.13)Collecting ordered-set  Downloading ordered_set-4.1.0-py3-none-any.whl (7.6 kB)Requirement already satisfied: python-dateutil&gt;=2.7.3 in /usr/local/lib/python3.7/dist-packages (from pandas-&gt;openmim) (2.8.2)Requirement already satisfied: numpy&gt;=1.17.3 in /usr/local/lib/python3.7/dist-packages (from pandas-&gt;openmim) (1.21.6)Requirement already satisfied: pytz&gt;=2017.3 in /usr/local/lib/python3.7/dist-packages (from pandas-&gt;openmim) (2022.1)Requirement already satisfied: certifi&gt;=2017.4.17 in /usr/local/lib/python3.7/dist-packages (from requests-&gt;openmim) (2022.5.18.1)Requirement already satisfied: idna&lt;3,&gt;=2.5 in /usr/local/lib/python3.7/dist-packages (from requests-&gt;openmim) (2.10)Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,&lt;1.26,&gt;=1.21.1 in /usr/local/lib/python3.7/dist-packages (from requests-&gt;openmim) (1.24.3)Requirement already satisfied: chardet&lt;4,&gt;=3.0.2 in /usr/local/lib/python3.7/dist-packages (from requests-&gt;openmim) (3.0.4)Requirement already satisfied: six&gt;=1.5 in /usr/local/lib/python3.7/dist-packages (from python-dateutil&gt;=2.7.3-&gt;pandas-&gt;openmim) (1.15.0)Requirement already satisfied: importlib-metadata&gt;=4.4 in /usr/local/lib/python3.7/dist-packages (from markdown-&gt;model-index-&gt;openmim) (4.11.4)Requirement already satisfied: typing-extensions&gt;=3.6.4 in /usr/local/lib/python3.7/dist-packages (from importlib-metadata&gt;=4.4-&gt;markdown-&gt;model-index-&gt;openmim) (4.2.0)Requirement already satisfied: zipp&gt;=0.5 in /usr/local/lib/python3.7/dist-packages (from importlib-metadata&gt;=4.4-&gt;markdown-&gt;model-index-&gt;openmim) (3.8.0)Building wheels for collected packages: openmim  Building wheel for openmim (setup.py) ... [?25l[?25hdone  Created wheel for openmim: filename=openmim-0.1.5-py2.py3-none-any.whl size=42503 sha256=a20baa555947a826ad1fb5c6b5c7282eb538ed92cf4e3dfec2f7eb3044005554  Stored in directory: /root/.cache/pip/wheels/16/8b/e1/bdebbbc687aa50224a5ce46fe97a040a0c59f92b34bfc750b6Successfully built openmimInstalling collected packages: ordered-set, colorama, model-index, openmimSuccessfully installed colorama-0.4.4 model-index-0.1.11 openmim-0.1.5 ordered-set-4.1.0[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv[0m[33m[0mLooking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/Collecting mmsegmentation  Downloading mmsegmentation-0.25.0-py3-none-any.whl (804 kB)[2K     [90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m [32m805.0/805.0 kB[0m [31m14.6 MB/s[0m eta [36m0:00:00[0m[?25hRequirement already satisfied: prettytable in /usr/local/lib/python3.7/dist-packages (from mmsegmentation) (3.3.0)Requirement already satisfied: packaging in /usr/local/lib/python3.7/dist-packages (from mmsegmentation) (21.3)Requirement already satisfied: matplotlib in /usr/local/lib/python3.7/dist-packages (from mmsegmentation) (3.2.2)Requirement already satisfied: numpy in /usr/local/lib/python3.7/dist-packages (from mmsegmentation) (1.21.6)Collecting mmcls&gt;=0.20.1  Downloading mmcls-0.23.1-py2.py3-none-any.whl (577 kB)[2K     [90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m [32m577.3/577.3 kB[0m [31m53.2 MB/s[0m eta [36m0:00:00[0m[?25hRequirement already satisfied: kiwisolver&gt;=1.0.1 in /usr/local/lib/python3.7/dist-packages (from matplotlib-&gt;mmsegmentation) (1.4.2)Requirement already satisfied: cycler&gt;=0.10 in /usr/local/lib/python3.7/dist-packages (from matplotlib-&gt;mmsegmentation) (0.11.0)Requirement already satisfied: pyparsing!=2.0.4,!=2.1.2,!=2.1.6,&gt;=2.0.1 in /usr/local/lib/python3.7/dist-packages (from matplotlib-&gt;mmsegmentation) (3.0.9)Requirement already satisfied: python-dateutil&gt;=2.1 in /usr/local/lib/python3.7/dist-packages (from matplotlib-&gt;mmsegmentation) (2.8.2)Requirement already satisfied: wcwidth in /usr/local/lib/python3.7/dist-packages (from prettytable-&gt;mmsegmentation) (0.2.5)Requirement already satisfied: importlib-metadata in /usr/local/lib/python3.7/dist-packages (from prettytable-&gt;mmsegmentation) (4.11.4)Requirement already satisfied: typing-extensions in /usr/local/lib/python3.7/dist-packages (from kiwisolver&gt;=1.0.1-&gt;matplotlib-&gt;mmsegmentation) (4.2.0)Requirement already satisfied: six&gt;=1.5 in /usr/local/lib/python3.7/dist-packages (from python-dateutil&gt;=2.1-&gt;matplotlib-&gt;mmsegmentation) (1.15.0)Requirement already satisfied: zipp&gt;=0.5 in /usr/local/lib/python3.7/dist-packages (from importlib-metadata-&gt;prettytable-&gt;mmsegmentation) (3.8.0)Installing collected packages: mmcls, mmsegmentationSuccessfully installed mmcls-0.23.1 mmsegmentation-0.25.0[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv[0m[33m[0mLooking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/Collecting mmdet  Downloading mmdet-2.25.0-py3-none-any.whl (1.4 MB)[2K     [90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m [32m1.4/1.4 MB[0m [31m21.1 MB/s[0m eta [36m0:00:00[0m[?25hRequirement already satisfied: matplotlib in /usr/local/lib/python3.7/dist-packages (from mmdet) (3.2.2)Requirement already satisfied: pycocotools in /usr/local/lib/python3.7/dist-packages (from mmdet) (2.0.4)Requirement already satisfied: six in /usr/local/lib/python3.7/dist-packages (from mmdet) (1.15.0)Collecting terminaltables  Downloading terminaltables-3.1.10-py2.py3-none-any.whl (15 kB)Requirement already satisfied: numpy in /usr/local/lib/python3.7/dist-packages (from mmdet) (1.21.6)Requirement already satisfied: pyparsing!=2.0.4,!=2.1.2,!=2.1.6,&gt;=2.0.1 in /usr/local/lib/python3.7/dist-packages (from matplotlib-&gt;mmdet) (3.0.9)Requirement already satisfied: kiwisolver&gt;=1.0.1 in /usr/local/lib/python3.7/dist-packages (from matplotlib-&gt;mmdet) (1.4.2)Requirement already satisfied: python-dateutil&gt;=2.1 in /usr/local/lib/python3.7/dist-packages (from matplotlib-&gt;mmdet) (2.8.2)Requirement already satisfied: cycler&gt;=0.10 in /usr/local/lib/python3.7/dist-packages (from matplotlib-&gt;mmdet) (0.11.0)Requirement already satisfied: typing-extensions in /usr/local/lib/python3.7/dist-packages (from kiwisolver&gt;=1.0.1-&gt;matplotlib-&gt;mmdet) (4.2.0)Installing collected packages: terminaltables, mmdetSuccessfully installed mmdet-2.25.0 terminaltables-3.1.10[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv[0m[33m[0mCloning into 'mmdetection'...remote: Enumerating objects: 24927, done.[Kremote: Counting objects: 100% (11/11), done.[Kremote: Compressing objects: 100% (10/10), done.[Kremote: Total 24927 (delta 2), reused 8 (delta 1), pack-reused 24916[KReceiving objects: 100% (24927/24927), 37.75 MiB | 31.35 MiB/s, done.Resolving deltas: 100% (17469/17469), done./content/mmdetection</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 验证安装</span></span><br><span class="line">!nvcc -V</span><br><span class="line">!pip <span class="built_in">list</span> | grep mm</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> mmcv <span class="keyword">import</span> collect_env</span><br><span class="line">collect_env()</span><br></pre></td></tr></table></figure><pre><code>nvcc: NVIDIA (R) Cuda compiler driverCopyright (c) 2005-2020 NVIDIA CorporationBuilt on Mon_Oct_12_20:09:46_PDT_2020Cuda compilation tools, release 11.1, V11.1.105Build cuda_11.1.TC455_06.29190527_0community                     1.0.0b1googleapis-common-protos      1.56.2mmcls                         0.23.1mmcv-full                     1.5.2mmdet                         2.25.0mmsegmentation                0.25.0pyviz-comms                   2.2.0snowballstemmer               2.2.0torchsummary                  1.5.1&#123;'CUDA available': True, 'CUDA_HOME': '/usr/local/cuda', 'GCC': 'x86_64-linux-gnu-gcc (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0', 'GPU 0': 'Tesla T4', 'MMCV': '1.5.2', 'MMCV CUDA Compiler': '11.1', 'MMCV Compiler': 'GCC 7.3', 'NVCC': 'Cuda compilation tools, release 11.1, V11.1.105', 'OpenCV': '4.1.2', 'PyTorch': '1.9.0+cu111', 'PyTorch compiling details': 'PyTorch built with:\n  - GCC 7.3\n  - C++ Version: 201402\n  - Intel(R) Math Kernel Library Version 2020.0.0 Product Build 20191122 for Intel(R) 64 architecture applications\n  - Intel(R) MKL-DNN v2.1.2 (Git Hash 98be7e8afa711dc9b66c8ff3504129cb82013cdb)\n  - OpenMP 201511 (a.k.a. OpenMP 4.5)\n  - NNPACK is enabled\n  - CPU capability usage: AVX2\n  - CUDA Runtime 11.1\n  - NVCC architecture flags: -gencode;arch=compute_37,code=sm_37;-gencode;arch=compute_50,code=sm_50;-gencode;arch=compute_60,code=sm_60;-gencode;arch=compute_70,code=sm_70;-gencode;arch=compute_75,code=sm_75;-gencode;arch=compute_80,code=sm_80;-gencode;arch=compute_86,code=sm_86\n  - CuDNN 8.0.5\n  - Magma 2.5.2\n  - Build settings: BLAS_INFO=mkl, BUILD_TYPE=Release, CUDA_VERSION=11.1, CUDNN_VERSION=8.0.5, CXX_COMPILER=/opt/rh/devtoolset-7/root/usr/bin/c++, CXX_FLAGS= -Wno-deprecated -fvisibility-inlines-hidden -DUSE_PTHREADPOOL -fopenmp -DNDEBUG -DUSE_KINETO -DUSE_FBGEMM -DUSE_QNNPACK -DUSE_PYTORCH_QNNPACK -DUSE_XNNPACK -DSYMBOLICATE_MOBILE_DEBUG_HANDLE -O2 -fPIC -Wno-narrowing -Wall -Wextra -Werror=return-type -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-unused-local-typedefs -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-psabi -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -fdiagnostics-color=always -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -fno-math-errno -fno-trapping-math -Werror=format -Wno-stringop-overflow, LAPACK_INFO=mkl, PERF_WITH_AVX=1, PERF_WITH_AVX2=1, PERF_WITH_AVX512=1, TORCH_VERSION=1.9.0, USE_CUDA=ON, USE_CUDNN=ON, USE_EXCEPTION_PTR=1, USE_GFLAGS=OFF, USE_GLOG=OFF, USE_MKL=ON, USE_MKLDNN=ON, USE_MPI=OFF, USE_NCCL=ON, USE_NNPACK=ON, USE_OPENMP=ON, \n', 'Python': '3.7.13 (default, Apr 24 2022, 01:04:09) [GCC 7.5.0]', 'TorchVision': '0.10.0+cu111', 'sys.platform': 'linux'&#125;</code></pre><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="测试-5">测试</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mim 也可以用来search/download,不过 doc 在捉迷藏..不知道怎么用</span></span><br><span class="line"><span class="comment"># https://github.com/open-mmlab/mmdetection/tree/master/configs/mask_rcnn</span></span><br><span class="line"><span class="comment"># 跟教程一样的命令...失效了?</span></span><br><span class="line"><span class="comment"># !mim search mmdet --model &#x27;mask r-cnn&#x27;</span></span><br><span class="line"><span class="comment"># !mim download mmdet --config mask_rcnn_r50_fpn_2x_coco --dest ./_model</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载并分别测试下面两个 pre-trained model-checkpoints</span></span><br><span class="line">!mkdir checkpoints</span><br><span class="line">!wget -c https://download.openmmlab.com/mmdetection/v2<span class="number">.0</span>/mask_rcnn/mask_rcnn_r50_fpn_2x_coco/mask_rcnn_r50_fpn_2x_coco_bbox_mAP-<span class="number">0.392</span>__segm_mAP-<span class="number">0.354_20200505_003907</span>-3e542a40.pth \</span><br><span class="line">      -O checkpoints/mask_rcnn_r50_fpn_2x_coco_bbox_mAP-<span class="number">0.392</span>__segm_mAP-<span class="number">0.354_20200505_003907</span>-3e542a40.pth</span><br><span class="line">!wget -c https://download.openmmlab.com/mmdetection/v2<span class="number">.0</span>/faster_rcnn/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco_20210526_095054-1f77628b.pth \</span><br><span class="line">      -O checkpoints/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco_20210526_095054-1f77628b.pth</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>--2022-06-07 15:03:24--  https://download.openmmlab.com/mmdetection/v2.0/mask_rcnn/mask_rcnn_r50_fpn_2x_coco/mask_rcnn_r50_fpn_2x_coco_bbox_mAP-0.392__segm_mAP-0.354_20200505_003907-3e542a40.pthResolving download.openmmlab.com (download.openmmlab.com)... 47.252.96.28Connecting to download.openmmlab.com (download.openmmlab.com)|47.252.96.28|:443... connected.HTTP request sent, awaiting response... 200 OKLength: 177866862 (170M) [application/octet-stream]Saving to: ‘checkpoints/mask_rcnn_r50_fpn_2x_coco_bbox_mAP-0.392__segm_mAP-0.354_20200505_003907-3e542a40.pth’checkpoints/mask_rc 100%[===================&gt;] 169.63M  8.23MB/s    in 22s     2022-06-07 15:03:47 (7.65 MB/s) - ‘checkpoints/mask_rcnn_r50_fpn_2x_coco_bbox_mAP-0.392__segm_mAP-0.354_20200505_003907-3e542a40.pth’ saved [177866862/177866862]--2022-06-07 15:03:48--  https://download.openmmlab.com/mmdetection/v2.0/faster_rcnn/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco_20210526_095054-1f77628b.pthResolving download.openmmlab.com (download.openmmlab.com)... 47.252.96.28Connecting to download.openmmlab.com (download.openmmlab.com)|47.252.96.28|:443... connected.HTTP request sent, awaiting response... 200 OKLength: 167291982 (160M) [application/octet-stream]Saving to: ‘checkpoints/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco_20210526_095054-1f77628b.pth’checkpoints/faster_ 100%[===================&gt;] 159.54M  9.11MB/s    in 18s     2022-06-07 15:04:06 (9.04 MB/s) - ‘checkpoints/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco_20210526_095054-1f77628b.pth’ saved [167291982/167291982]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mmdet.apis <span class="keyword">import</span> init_detector, inference_detector, show_result_pyplot</span><br><span class="line"></span><br><span class="line">config = <span class="string">&#x27;configs/mask_rcnn/mask_rcnn_r50_fpn_2x_coco.py&#x27;</span></span><br><span class="line">checkpoint = <span class="string">&#x27;checkpoints/mask_rcnn_r50_fpn_2x_coco_bbox_mAP-0.392__segm_mAP-0.354_20200505_003907-3e542a40.pth&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 CPU 上需要设置 device=&#x27;cpu&#x27; ; GPU 上设置 device=&#x27;cuda:0&#x27;</span></span><br><span class="line"><span class="comment"># 使用 mmdetection 源库自带的 demo/demo.jpg</span></span><br><span class="line">model = init_detector(config, checkpoint, device=<span class="string">&#x27;cuda:0&#x27;</span>) </span><br><span class="line">result = inference_detector(model, <span class="string">&#x27;demo/demo.jpg&#x27;</span>)</span><br><span class="line"></span><br><span class="line">show_result_pyplot(model, <span class="string">&#x27;demo/demo.jpg&#x27;</span>, result)</span><br></pre></td></tr></table></figure><pre><code>load checkpoint from local path: checkpoints/mask_rcnn_r50_fpn_2x_coco_bbox_mAP-0.392__segm_mAP-0.354_20200505_003907-3e542a40.pth/content/mmdetection/mmdet/datasets/utils.py:70: UserWarning: &quot;ImageToTensor&quot; pipeline is replaced by &quot;DefaultFormatBundle&quot; for batch inference. It is recommended to manually replace it in the test data pipeline in your config file.  'data pipeline in your config file.', UserWarning)/usr/local/lib/python3.7/dist-packages/torch/nn/functional.py:718: UserWarning: Named tensors and all their associated APIs are an experimental feature and subject to change. Please do not use them for anything important until they are released as stable. (Triggered internally at  /pytorch/c10/core/TensorImpl.h:1156.)  return torch.max_pool2d(input, kernel_size, stride, padding, dilation, ceil_mode)</code></pre><p><img src="MM-Detection_files/MM-Detection_7_2.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mmcv</span><br><span class="line"><span class="keyword">from</span> mmcv.runner <span class="keyword">import</span> load_checkpoint</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> mmdet.apis <span class="keyword">import</span> inference_detector, show_result_pyplot</span><br><span class="line"><span class="keyword">from</span> mmdet.models <span class="keyword">import</span> build_detector</span><br><span class="line"></span><br><span class="line"><span class="comment"># Choose to use a config and initialize the detector</span></span><br><span class="line">config = <span class="string">&#x27;configs/faster_rcnn/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco.py&#x27;</span></span><br><span class="line"><span class="comment"># Setup a checkpoint file to load</span></span><br><span class="line">checkpoint = <span class="string">&#x27;checkpoints/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco_20210526_095054-1f77628b.pth&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the device to be used for evaluation</span></span><br><span class="line">device=<span class="string">&#x27;cuda:0&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Load the config</span></span><br><span class="line">config = mmcv.Config.fromfile(config)</span><br><span class="line"><span class="comment"># Set pretrained to be None since we do not need pretrained model here</span></span><br><span class="line">config.model.pretrained = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Initialize the detector</span></span><br><span class="line">model = build_detector(config.model)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load checkpoint</span></span><br><span class="line">checkpoint = load_checkpoint(model, checkpoint, map_location=device)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the classes of models for inference</span></span><br><span class="line">model.CLASSES = checkpoint[<span class="string">&#x27;meta&#x27;</span>][<span class="string">&#x27;CLASSES&#x27;</span>]</span><br><span class="line"><span class="comment"># We need to set the model&#x27;s cfg for inference</span></span><br><span class="line">model.cfg = config</span><br><span class="line"><span class="comment"># Convert the model to GPU</span></span><br><span class="line">model.to(device)</span><br><span class="line"><span class="comment"># Convert the model into evaluation mode</span></span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use the detector to do inference</span></span><br><span class="line">img = <span class="string">&#x27;demo/demo.jpg&#x27;</span></span><br><span class="line">result = inference_detector(model, img)</span><br><span class="line"><span class="comment"># Let&#x27;s plot the result</span></span><br><span class="line">show_result_pyplot(model, img, result, score_thr=<span class="number">0.3</span>)</span><br></pre></td></tr></table></figure><pre><code>load checkpoint from local path: checkpoints/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco_20210526_095054-1f77628b.pth/content/mmdetection/mmdet/datasets/utils.py:70: UserWarning: &quot;ImageToTensor&quot; pipeline is replaced by &quot;DefaultFormatBundle&quot; for batch inference. It is recommended to manually replace it in the test data pipeline in your config file.  'data pipeline in your config file.', UserWarning)/usr/local/lib/python3.7/dist-packages/torch/nn/functional.py:718: UserWarning: Named tensors and all their associated APIs are an experimental feature and subject to change. Please do not use them for anything important until they are released as stable. (Triggered internally at  /pytorch/c10/core/TensorImpl.h:1156.)  return torch.max_pool2d(input, kernel_size, stride, padding, dilation, ceil_mode)</code></pre><p><img src="MM-Detection_files/MM-Detection_8_2.png" alt="png"></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Custom-training">Custom-training</h2><ol><li><p>选择+下载预训练模型和数据集</p><p>参数解释: <code>mask_rcnn_r50_fpn_2x_coco</code></p><p>mask_rcnn 中不同的 backbone (主干网络)</p><p>r50: 50层ResNet</p><p>fpn: 特征金字塔</p><p>2x: learning rate schedule</p></li><li><p>定义数据集类 + config</p></li><li><p>调用 API 训练 + 评估</p></li><li><p>用训练好的模型推理测试</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pre-trained model 在上面下载好了, 这里只下载数据集</span></span><br><span class="line">!wget https://download.openmmlab.com/mmdetection/data/kitti_tiny.<span class="built_in">zip</span></span><br><span class="line">!unzip kitti_tiny.<span class="built_in">zip</span> &gt; /dev/null</span><br><span class="line"></span><br><span class="line"><span class="comment"># Let&#x27;s take a look at the dataset image</span></span><br><span class="line"><span class="keyword">import</span> mmcv</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = mmcv.imread(<span class="string">&#x27;kitti_tiny/training/image_2/000073.jpeg&#x27;</span>)</span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>, <span class="number">10</span>))</span><br><span class="line">plt.imshow(mmcv.bgr2rgb(img))</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><pre><code>--2022-06-07 15:40:35--  https://download.openmmlab.com/mmdetection/data/kitti_tiny.zipResolving download.openmmlab.com (download.openmmlab.com)... 47.252.96.28Connecting to download.openmmlab.com (download.openmmlab.com)|47.252.96.28|:443... connected.HTTP request sent, awaiting response... 200 OKLength: 6918271 (6.6M) [application/zip]Saving to: ‘kitti_tiny.zip’kitti_tiny.zip      100%[===================&gt;]   6.60M  8.72MB/s    in 0.8s    2022-06-07 15:40:37 (8.72 MB/s) - ‘kitti_tiny.zip’ saved [6918271/6918271]</code></pre><p><img src="MM-Detection_files/MM-Detection_10_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义数据集格式 &#x27;KittiTinyDataset&#x27; 并注册到 mmdet</span></span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"><span class="keyword">import</span> os.path <span class="keyword">as</span> osp</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mmcv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> mmdet.datasets.builder <span class="keyword">import</span> DATASETS</span><br><span class="line"><span class="keyword">from</span> mmdet.datasets.custom <span class="keyword">import</span> CustomDataset</span><br><span class="line"></span><br><span class="line"><span class="meta">@DATASETS.register_module()</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">KittiTinyDataset</span>(<span class="title class_ inherited__">CustomDataset</span>):</span><br><span class="line"></span><br><span class="line">    CLASSES = (<span class="string">&#x27;Car&#x27;</span>, <span class="string">&#x27;Pedestrian&#x27;</span>, <span class="string">&#x27;Cyclist&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_annotations</span>(<span class="params">self, ann_file</span>):</span><br><span class="line">        cat2label = &#123;k: i <span class="keyword">for</span> i, k <span class="keyword">in</span> <span class="built_in">enumerate</span>(self.CLASSES)&#125;</span><br><span class="line">        <span class="comment"># load image list from file</span></span><br><span class="line">        image_list = mmcv.list_from_file(self.ann_file)</span><br><span class="line">    </span><br><span class="line">        data_infos = []</span><br><span class="line">        <span class="comment"># convert annotations to middle format</span></span><br><span class="line">        <span class="keyword">for</span> image_id <span class="keyword">in</span> image_list:</span><br><span class="line">            filename = <span class="string">f&#x27;<span class="subst">&#123;self.img_prefix&#125;</span>/<span class="subst">&#123;image_id&#125;</span>.jpeg&#x27;</span></span><br><span class="line">            image = mmcv.imread(filename)</span><br><span class="line">            height, width = image.shape[:<span class="number">2</span>]</span><br><span class="line">    </span><br><span class="line">            data_info = <span class="built_in">dict</span>(filename=<span class="string">f&#x27;<span class="subst">&#123;image_id&#125;</span>.jpeg&#x27;</span>, width=width, height=height)</span><br><span class="line">    </span><br><span class="line">            <span class="comment"># load annotations</span></span><br><span class="line">            label_prefix = self.img_prefix.replace(<span class="string">&#x27;image_2&#x27;</span>, <span class="string">&#x27;label_2&#x27;</span>)</span><br><span class="line">            lines = mmcv.list_from_file(osp.join(label_prefix, <span class="string">f&#x27;<span class="subst">&#123;image_id&#125;</span>.txt&#x27;</span>))</span><br><span class="line">    </span><br><span class="line">            content = [line.strip().split(<span class="string">&#x27; &#x27;</span>) <span class="keyword">for</span> line <span class="keyword">in</span> lines]</span><br><span class="line">            bbox_names = [x[<span class="number">0</span>] <span class="keyword">for</span> x <span class="keyword">in</span> content]</span><br><span class="line">            bboxes = [[<span class="built_in">float</span>(info) <span class="keyword">for</span> info <span class="keyword">in</span> x[<span class="number">4</span>:<span class="number">8</span>]] <span class="keyword">for</span> x <span class="keyword">in</span> content]</span><br><span class="line">    </span><br><span class="line">            gt_bboxes = []</span><br><span class="line">            gt_labels = []</span><br><span class="line">            gt_bboxes_ignore = []</span><br><span class="line">            gt_labels_ignore = []</span><br><span class="line">    </span><br><span class="line">            <span class="comment"># filter &#x27;DontCare&#x27;</span></span><br><span class="line">            <span class="keyword">for</span> bbox_name, bbox <span class="keyword">in</span> <span class="built_in">zip</span>(bbox_names, bboxes):</span><br><span class="line">                <span class="keyword">if</span> bbox_name <span class="keyword">in</span> cat2label:</span><br><span class="line">                    gt_labels.append(cat2label[bbox_name])</span><br><span class="line">                    gt_bboxes.append(bbox)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    gt_labels_ignore.append(-<span class="number">1</span>)</span><br><span class="line">                    gt_bboxes_ignore.append(bbox)</span><br><span class="line"></span><br><span class="line">            data_anno = <span class="built_in">dict</span>(</span><br><span class="line">                bboxes=np.array(gt_bboxes, dtype=np.float32).reshape(-<span class="number">1</span>, <span class="number">4</span>),</span><br><span class="line">                labels=np.array(gt_labels, dtype=np.long),</span><br><span class="line">                bboxes_ignore=np.array(gt_bboxes_ignore,</span><br><span class="line">                                       dtype=np.float32).reshape(-<span class="number">1</span>, <span class="number">4</span>),</span><br><span class="line">                labels_ignore=np.array(gt_labels_ignore, dtype=np.long))</span><br><span class="line"></span><br><span class="line">            data_info.update(ann=data_anno)</span><br><span class="line">            data_infos.append(data_info)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> data_infos</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mmdet 配置</span></span><br><span class="line"><span class="keyword">from</span> mmcv <span class="keyword">import</span> Config</span><br><span class="line"><span class="keyword">from</span> mmdet.apis <span class="keyword">import</span> set_random_seed</span><br><span class="line"></span><br><span class="line">cfg = Config.fromfile(<span class="string">&#x27;configs/faster_rcnn/faster_rcnn_r50_caffe_fpn_mstrain_1x_coco.py&#x27;</span>)</span><br><span class="line"><span class="comment"># If we need to finetune a model based on a pre-trained detector, we need to use load_from to set the path of checkpoints.</span></span><br><span class="line">cfg.load_from = <span class="string">&#x27;checkpoints/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco_20210526_095054-1f77628b.pth&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Modify dataset type and path</span></span><br><span class="line">cfg.dataset_type = <span class="string">&#x27;KittiTinyDataset&#x27;</span></span><br><span class="line">cfg.data_root = <span class="string">&#x27;kitti_tiny/&#x27;</span></span><br><span class="line"></span><br><span class="line">cfg.data.test.<span class="built_in">type</span> = <span class="string">&#x27;KittiTinyDataset&#x27;</span></span><br><span class="line">cfg.data.test.data_root = <span class="string">&#x27;kitti_tiny/&#x27;</span></span><br><span class="line">cfg.data.test.ann_file = <span class="string">&#x27;train.txt&#x27;</span></span><br><span class="line">cfg.data.test.img_prefix = <span class="string">&#x27;training/image_2&#x27;</span></span><br><span class="line"></span><br><span class="line">cfg.data.train.<span class="built_in">type</span> = <span class="string">&#x27;KittiTinyDataset&#x27;</span></span><br><span class="line">cfg.data.train.data_root = <span class="string">&#x27;kitti_tiny/&#x27;</span></span><br><span class="line">cfg.data.train.ann_file = <span class="string">&#x27;train.txt&#x27;</span></span><br><span class="line">cfg.data.train.img_prefix = <span class="string">&#x27;training/image_2&#x27;</span></span><br><span class="line"></span><br><span class="line">cfg.data.val.<span class="built_in">type</span> = <span class="string">&#x27;KittiTinyDataset&#x27;</span></span><br><span class="line">cfg.data.val.data_root = <span class="string">&#x27;kitti_tiny/&#x27;</span></span><br><span class="line">cfg.data.val.ann_file = <span class="string">&#x27;val.txt&#x27;</span></span><br><span class="line">cfg.data.val.img_prefix = <span class="string">&#x27;training/image_2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># modify num classes of the model in box head</span></span><br><span class="line">cfg.model.roi_head.bbox_head.num_classes = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set up working dir to save files and logs.</span></span><br><span class="line">cfg.work_dir = <span class="string">&#x27;./tutorial_exps&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The original learning rate (LR) is set for 8-GPU training.</span></span><br><span class="line"><span class="comment"># We divide it by 8 since we only use one GPU.</span></span><br><span class="line">cfg.optimizer.lr = <span class="number">0.02</span> / <span class="number">8</span></span><br><span class="line">cfg.lr_config.warmup = <span class="literal">None</span></span><br><span class="line">cfg.log_config.interval = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Change the evaluation metric since we use customized dataset.</span></span><br><span class="line">cfg.evaluation.metric = <span class="string">&#x27;mAP&#x27;</span></span><br><span class="line"><span class="comment"># We can set the evaluation interval to reduce the evaluation times</span></span><br><span class="line">cfg.evaluation.interval = <span class="number">12</span></span><br><span class="line"><span class="comment"># We can set the checkpoint saving interval to reduce the storage cost</span></span><br><span class="line">cfg.checkpoint_config.interval = <span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set seed thus the results are more reproducible</span></span><br><span class="line">cfg.seed = <span class="number">0</span></span><br><span class="line">set_random_seed(<span class="number">0</span>, deterministic=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">cfg.device=<span class="string">&#x27;cuda&#x27;</span></span><br><span class="line">cfg.gpu_ids = <span class="built_in">range</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># We can also use tensorboard to log the training process</span></span><br><span class="line">cfg.log_config.hooks = [</span><br><span class="line">    <span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;TextLoggerHook&#x27;</span>),</span><br><span class="line">    <span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;TensorboardLoggerHook&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># We can initialize the logger for training and have a look at the final config used for training</span></span><br><span class="line"><span class="comment"># print(f&#x27;Config:\n&#123;cfg.pretty_text&#125;&#x27;)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Train a new detector</span></span><br><span class="line"><span class="keyword">from</span> mmdet.datasets <span class="keyword">import</span> build_dataset</span><br><span class="line"><span class="keyword">from</span> mmdet.models <span class="keyword">import</span> build_detector</span><br><span class="line"><span class="keyword">from</span> mmdet.apis <span class="keyword">import</span> train_detector</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build dataset</span></span><br><span class="line">datasets = [build_dataset(cfg.data.train)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build the detector</span></span><br><span class="line">model = build_detector(cfg.model)</span><br><span class="line"><span class="comment">#  build_detector( cfg.model, train_cfg=cfg.get(&#x27;train_cfg&#x27;), test_cfg=cfg.get(&#x27;test_cfg&#x27;))</span></span><br><span class="line"><span class="comment"># Add an attribute for visualization convenience</span></span><br><span class="line">model.CLASSES = datasets[<span class="number">0</span>].CLASSES</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create work_dir</span></span><br><span class="line">mmcv.mkdir_or_exist(osp.abspath(cfg.work_dir))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 报错:AttributeError: &#x27;ConfigDict&#x27; object has no attribute &#x27;device&#x27;</span></span><br><span class="line"><span class="comment"># https://github.com/open-mmlab/mmdetection/issues/7901</span></span><br><span class="line"><span class="comment"># 在上面 cfg 添加了 cfg.device=&#x27;cuda&#x27;</span></span><br><span class="line">train_detector(model, datasets, cfg, distributed=<span class="literal">False</span>, validate=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><pre><code>/usr/local/lib/python3.7/dist-packages/ipykernel_launcher.py:54: DeprecationWarning: `np.long` is a deprecated alias for `np.compat.long`. To silence this warning, use `np.compat.long` by itself. In the likely event your code does not need to work on Python 2 you can use the builtin `int` for which `np.compat.long` is itself an alias. Doing this will not modify any behaviour and is safe. When replacing `np.long`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.Deprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations/usr/local/lib/python3.7/dist-packages/ipykernel_launcher.py:57: DeprecationWarning: `np.long` is a deprecated alias for `np.compat.long`. To silence this warning, use `np.compat.long` by itself. In the likely event your code does not need to work on Python 2 you can use the builtin `int` for which `np.compat.long` is itself an alias. Doing this will not modify any behaviour and is safe. When replacing `np.long`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.Deprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations/content/mmdetection/mmdet/datasets/custom.py:180: UserWarning: CustomDataset does not support filtering empty gt images.  'CustomDataset does not support filtering empty gt images.')2022-06-07 16:41:00,736 - mmdet - INFO - Automatic scaling of learning rate (LR) has been disabled.2022-06-07 16:41:00,899 - mmdet - INFO - load checkpoint from local path: checkpoints/faster_rcnn_r50_caffe_fpn_mstrain_3x_coco_20210526_095054-1f77628b.pth2022-06-07 16:41:01,026 - mmdet - WARNING - The model and loaded state dict do not match exactlysize mismatch for roi_head.bbox_head.fc_cls.weight: copying a param with shape torch.Size([81, 1024]) from checkpoint, the shape in current model is torch.Size([4, 1024]).size mismatch for roi_head.bbox_head.fc_cls.bias: copying a param with shape torch.Size([81]) from checkpoint, the shape in current model is torch.Size([4]).size mismatch for roi_head.bbox_head.fc_reg.weight: copying a param with shape torch.Size([320, 1024]) from checkpoint, the shape in current model is torch.Size([12, 1024]).size mismatch for roi_head.bbox_head.fc_reg.bias: copying a param with shape torch.Size([320]) from checkpoint, the shape in current model is torch.Size([12]).2022-06-07 16:41:01,035 - mmdet - INFO - Start running, host: root@7a73f7b358c4, work_dir: /content/mmdetection/tutorial_exps2022-06-07 16:41:01,037 - mmdet - INFO - Hooks will be executed in the following order:before_run:(VERY_HIGH   ) StepLrUpdaterHook                  (NORMAL      ) CheckpointHook                     (LOW         ) EvalHook                           (VERY_LOW    ) TextLoggerHook                     (VERY_LOW    ) TensorboardLoggerHook               -------------------- before_train_epoch:(VERY_HIGH   ) StepLrUpdaterHook                  (NORMAL      ) NumClassCheckHook                  (LOW         ) IterTimerHook                      (LOW         ) EvalHook                           (VERY_LOW    ) TextLoggerHook                     (VERY_LOW    ) TensorboardLoggerHook               -------------------- before_train_iter:(VERY_HIGH   ) StepLrUpdaterHook                  (LOW         ) IterTimerHook                      (LOW         ) EvalHook                            -------------------- after_train_iter:(ABOVE_NORMAL) OptimizerHook                      (NORMAL      ) CheckpointHook                     (LOW         ) IterTimerHook                      (LOW         ) EvalHook                           (VERY_LOW    ) TextLoggerHook                     (VERY_LOW    ) TensorboardLoggerHook               -------------------- after_train_epoch:(NORMAL      ) CheckpointHook                     (LOW         ) EvalHook                           (VERY_LOW    ) TextLoggerHook                     (VERY_LOW    ) TensorboardLoggerHook               -------------------- before_val_epoch:(NORMAL      ) NumClassCheckHook                  (LOW         ) IterTimerHook                      (VERY_LOW    ) TextLoggerHook                     (VERY_LOW    ) TensorboardLoggerHook               -------------------- before_val_iter:(LOW         ) IterTimerHook                       -------------------- after_val_iter:(LOW         ) IterTimerHook                       -------------------- after_val_epoch:(VERY_LOW    ) TextLoggerHook                     (VERY_LOW    ) TensorboardLoggerHook               -------------------- after_run:(VERY_LOW    ) TextLoggerHook                     (VERY_LOW    ) TensorboardLoggerHook               -------------------- 2022-06-07 16:41:01,038 - mmdet - INFO - workflow: [('train', 1)], max: 12 epochs2022-06-07 16:41:01,040 - mmdet - INFO - Checkpoints will be saved to /content/mmdetection/tutorial_exps by HardDiskBackend.2022-06-07 16:41:17,697 - mmdet - INFO - Epoch [1][10/25]lr: 2.500e-03, eta: 0:04:25, time: 0.914, data_time: 0.236, memory: 2790, loss_rpn_cls: 0.0267, loss_rpn_bbox: 0.0173, loss_cls: 0.5377, acc: 81.6211, loss_bbox: 0.3947, loss: 0.97642022-06-07 16:41:21,039 - mmdet - INFO - Epoch [1][20/25]lr: 2.500e-03, eta: 0:02:54, time: 0.334, data_time: 0.023, memory: 2790, loss_rpn_cls: 0.0149, loss_rpn_bbox: 0.0119, loss_cls: 0.1753, acc: 93.4570, loss_bbox: 0.3254, loss: 0.52752022-06-07 16:41:28,575 - mmdet - INFO - Epoch [2][10/25]lr: 2.500e-03, eta: 0:02:16, time: 0.558, data_time: 0.232, memory: 2790, loss_rpn_cls: 0.0167, loss_rpn_bbox: 0.0138, loss_cls: 0.1519, acc: 94.7656, loss_bbox: 0.2673, loss: 0.44972022-06-07 16:41:31,944 - mmdet - INFO - Epoch [2][20/25]lr: 2.500e-03, eta: 0:02:01, time: 0.337, data_time: 0.023, memory: 2790, loss_rpn_cls: 0.0128, loss_rpn_bbox: 0.0127, loss_cls: 0.1325, acc: 94.9316, loss_bbox: 0.2084, loss: 0.36642022-06-07 16:41:39,445 - mmdet - INFO - Epoch [3][10/25]lr: 2.500e-03, eta: 0:01:48, time: 0.569, data_time: 0.236, memory: 2790, loss_rpn_cls: 0.0059, loss_rpn_bbox: 0.0102, loss_cls: 0.0972, acc: 96.2500, loss_bbox: 0.1600, loss: 0.27332022-06-07 16:41:42,958 - mmdet - INFO - Epoch [3][20/25]lr: 2.500e-03, eta: 0:01:40, time: 0.349, data_time: 0.024, memory: 2790, loss_rpn_cls: 0.0088, loss_rpn_bbox: 0.0133, loss_cls: 0.1474, acc: 94.4336, loss_bbox: 0.2652, loss: 0.43462022-06-07 16:41:50,449 - mmdet - INFO - Epoch [4][10/25]lr: 2.500e-03, eta: 0:01:31, time: 0.562, data_time: 0.231, memory: 2790, loss_rpn_cls: 0.0064, loss_rpn_bbox: 0.0134, loss_cls: 0.1168, acc: 95.5566, loss_bbox: 0.2201, loss: 0.35672022-06-07 16:41:53,973 - mmdet - INFO - Epoch [4][20/25]lr: 2.500e-03, eta: 0:01:25, time: 0.353, data_time: 0.027, memory: 2790, loss_rpn_cls: 0.0035, loss_rpn_bbox: 0.0117, loss_cls: 0.1179, acc: 95.5566, loss_bbox: 0.2133, loss: 0.34642022-06-07 16:42:01,892 - mmdet - INFO - Epoch [5][10/25]lr: 2.500e-03, eta: 0:01:18, time: 0.595, data_time: 0.237, memory: 2790, loss_rpn_cls: 0.0040, loss_rpn_bbox: 0.0092, loss_cls: 0.1003, acc: 96.2695, loss_bbox: 0.2087, loss: 0.32232022-06-07 16:42:05,430 - mmdet - INFO - Epoch [5][20/25]lr: 2.500e-03, eta: 0:01:13, time: 0.352, data_time: 0.024, memory: 2790, loss_rpn_cls: 0.0037, loss_rpn_bbox: 0.0107, loss_cls: 0.0903, acc: 96.7090, loss_bbox: 0.1845, loss: 0.28922022-06-07 16:42:12,992 - mmdet - INFO - Epoch [6][10/25]lr: 2.500e-03, eta: 0:01:07, time: 0.567, data_time: 0.232, memory: 2790, loss_rpn_cls: 0.0017, loss_rpn_bbox: 0.0082, loss_cls: 0.0786, acc: 97.1777, loss_bbox: 0.1799, loss: 0.26852022-06-07 16:42:16,595 - mmdet - INFO - Epoch [6][20/25]lr: 2.500e-03, eta: 0:01:02, time: 0.363, data_time: 0.027, memory: 2790, loss_rpn_cls: 0.0029, loss_rpn_bbox: 0.0100, loss_cls: 0.0891, acc: 96.5332, loss_bbox: 0.1856, loss: 0.28762022-06-07 16:42:24,486 - mmdet - INFO - Epoch [7][10/25]lr: 2.500e-03, eta: 0:00:56, time: 0.591, data_time: 0.238, memory: 2790, loss_rpn_cls: 0.0043, loss_rpn_bbox: 0.0096, loss_cls: 0.0904, acc: 96.6113, loss_bbox: 0.1740, loss: 0.27832022-06-07 16:42:28,147 - mmdet - INFO - Epoch [7][20/25]lr: 2.500e-03, eta: 0:00:52, time: 0.364, data_time: 0.023, memory: 2790, loss_rpn_cls: 0.0019, loss_rpn_bbox: 0.0116, loss_cls: 0.0926, acc: 96.1816, loss_bbox: 0.1774, loss: 0.28352022-06-07 16:42:35,802 - mmdet - INFO - Epoch [8][10/25]lr: 2.500e-03, eta: 0:00:45, time: 0.572, data_time: 0.232, memory: 2790, loss_rpn_cls: 0.0026, loss_rpn_bbox: 0.0091, loss_cls: 0.0777, acc: 96.8262, loss_bbox: 0.1420, loss: 0.23142022-06-07 16:42:39,346 - mmdet - INFO - Epoch [8][20/25]lr: 2.500e-03, eta: 0:00:41, time: 0.354, data_time: 0.025, memory: 2790, loss_rpn_cls: 0.0036, loss_rpn_bbox: 0.0082, loss_cls: 0.0777, acc: 97.2168, loss_bbox: 0.1590, loss: 0.24852022-06-07 16:42:46,922 - mmdet - INFO - Epoch [9][10/25]lr: 2.500e-04, eta: 0:00:35, time: 0.565, data_time: 0.232, memory: 2790, loss_rpn_cls: 0.0026, loss_rpn_bbox: 0.0082, loss_cls: 0.0658, acc: 97.4902, loss_bbox: 0.1351, loss: 0.21162022-06-07 16:42:50,443 - mmdet - INFO - Epoch [9][20/25]lr: 2.500e-04, eta: 0:00:31, time: 0.352, data_time: 0.024, memory: 2790, loss_rpn_cls: 0.0014, loss_rpn_bbox: 0.0066, loss_cls: 0.0571, acc: 97.8418, loss_bbox: 0.1133, loss: 0.17832022-06-07 16:42:58,001 - mmdet - INFO - Epoch [10][10/25]lr: 2.500e-04, eta: 0:00:25, time: 0.567, data_time: 0.233, memory: 2790, loss_rpn_cls: 0.0034, loss_rpn_bbox: 0.0081, loss_cls: 0.0678, acc: 97.3926, loss_bbox: 0.1332, loss: 0.21252022-06-07 16:43:01,493 - mmdet - INFO - Epoch [10][20/25]lr: 2.500e-04, eta: 0:00:21, time: 0.350, data_time: 0.023, memory: 2790, loss_rpn_cls: 0.0008, loss_rpn_bbox: 0.0059, loss_cls: 0.0594, acc: 97.6758, loss_bbox: 0.1294, loss: 0.19552022-06-07 16:43:09,042 - mmdet - INFO - Epoch [11][10/25]lr: 2.500e-04, eta: 0:00:15, time: 0.567, data_time: 0.234, memory: 2790, loss_rpn_cls: 0.0009, loss_rpn_bbox: 0.0069, loss_cls: 0.0638, acc: 97.6270, loss_bbox: 0.1217, loss: 0.19322022-06-07 16:43:12,554 - mmdet - INFO - Epoch [11][20/25]lr: 2.500e-04, eta: 0:00:11, time: 0.351, data_time: 0.023, memory: 2790, loss_rpn_cls: 0.0014, loss_rpn_bbox: 0.0073, loss_cls: 0.0571, acc: 97.8711, loss_bbox: 0.1212, loss: 0.18692022-06-07 16:43:20,107 - mmdet - INFO - Epoch [12][10/25]lr: 2.500e-05, eta: 0:00:05, time: 0.567, data_time: 0.232, memory: 2790, loss_rpn_cls: 0.0017, loss_rpn_bbox: 0.0061, loss_cls: 0.0563, acc: 97.9199, loss_bbox: 0.1246, loss: 0.18872022-06-07 16:43:23,598 - mmdet - INFO - Epoch [12][20/25]lr: 2.500e-05, eta: 0:00:01, time: 0.349, data_time: 0.024, memory: 2790, loss_rpn_cls: 0.0016, loss_rpn_bbox: 0.0048, loss_cls: 0.0511, acc: 97.9297, loss_bbox: 0.0946, loss: 0.15202022-06-07 16:43:25,323 - mmdet - INFO - Saving checkpoint at 12 epochs[&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;] 25/25, 9.8 task/s, elapsed: 3s, ETA:     0s---------------iou_thr: 0.5---------------2022-06-07 16:43:30,260 - mmdet - INFO - +------------+-----+------+--------+-------+| class      | gts | dets | recall | ap    |+------------+-----+------+--------+-------+| Car        | 62  | 133  | 0.984  | 0.888 || Pedestrian | 13  | 40   | 0.846  | 0.768 || Cyclist    | 7   | 50   | 0.571  | 0.114 |+------------+-----+------+--------+-------+| mAP        |     |      |        | 0.590 |+------------+-----+------+--------+-------+2022-06-07 16:43:30,268 - mmdet - INFO - Epoch(val) [12][25]AP50: 0.5900, mAP: 0.5899</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># load tensorboard in colab</span></span><br><span class="line">%load_ext tensorboard</span><br><span class="line"></span><br><span class="line"><span class="comment"># see curves in tensorboard</span></span><br><span class="line">%tensorboard --logdir ./tutorial_exps</span><br></pre></td></tr></table></figure><pre><code>&lt;IPython.core.display.Javascript object&gt;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">img = mmcv.imread(<span class="string">&#x27;kitti_tiny/training/image_2/000068.jpeg&#x27;</span>)</span><br><span class="line"></span><br><span class="line">model.cfg = cfg</span><br><span class="line">result = inference_detector(model, img)</span><br><span class="line">show_result_pyplot(model, img, result)</span><br></pre></td></tr></table></figure><p><img src="MM-Detection_files/MM-Detection_15_0.png" alt="png"></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-37">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://openbayes.com/console/wrh/containers/t93t3LTXlgU">https://openbayes.com/console/wrh/containers/t93t3LTXlgU</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://zhuanlan.zhihu.com/p/163645165">MMDetection 2.3 安装教程</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://mmdetection.readthedocs.io/zh_CN/latest/get_started.html#mmdetection">https://mmdetection.readthedocs.io/zh_CN/latest/get_started.html#mmdetection</a></p><p><a name='cite_note-4' href='#cite_ref-4'>[4]</a>: <a href="https://colab.research.google.com/github/ZwwWayne/mmdetection/blob/update-colab/demo/MMDet_Tutorial.ipynb#scrollTo=8M5KUnX7Np3h">https://colab.research.google.com/github/ZwwWayne/mmdetection/blob/update-colab/demo/MMDet_Tutorial.ipynb#scrollTo=8M5KUnX7Np3h</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 深度学习 </tag>
            
            <tag> colab </tag>
            
            <tag> mmdetection </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😑python-mess-code</title>
      <link href="/post/python/%E6%9D%82/"/>
      <url>/post/python/%E6%9D%82/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:11:24 * @FilePath: \Blog-private\scaffolds\post.md * @Description: * @!: *********************************************************************--><h2 id="basic">basic</h2><h3 id="static-method">static-method</h3><p>python 中并没有像是 Java 里的 static 关键字,取代的是 <code>@classmethod</code> 和 <code>@staticmethod</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line"></span><br><span class="line">    name = <span class="string">&#x27;A&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 至少有一个隐式形参 (本类 cls 对象), 可以访问类属性</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">a</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(cls.name)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 无形参, 也就是说拿不到类属性</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">b</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A.a()</span><br><span class="line">A.b()</span><br></pre></td></tr></table></figure><pre><code>Ab</code></pre><h3 id="multi-condition">multi-condition</h3><p>if(a||b)当 a 为真时，还会对 b 求值吗?</p><blockquote><p>不会</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate</span>(<span class="params">name, t</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;calculating: &quot;</span>, name, <span class="string">&quot;seconds needs: &quot;</span>, t)</span><br><span class="line">    time.sleep(t)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (calculate(<span class="string">&#x27;A&#x27;</span>, <span class="number">2</span>) <span class="keyword">or</span> calculate(<span class="string">&#x27;B&#x27;</span>, <span class="number">2</span>)):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Done&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>calculating:  A seconds needs:  2Done</code></pre><h2 id="modules">modules</h2><h3 id="base64">base64</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line">username = <span class="string">&#x27;Weidows&#x27;</span></span><br><span class="line">password = <span class="string">&#x27;123456&#x27;</span></span><br><span class="line"></span><br><span class="line">encode = base64.b64encode((username + <span class="string">&quot;:&quot;</span> + password).encode())</span><br><span class="line"><span class="comment"># Basic V2VpZG93czoxMjM0NTY==</span></span><br><span class="line">headers = &#123;<span class="string">&quot;Authorization&quot;</span>: <span class="string">&quot;Basic &quot;</span> + encode.decode()&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(headers)</span><br></pre></td></tr></table></figure><pre><code>&#123;'Authorization': 'Basic V2VpZG93czoxMjM0NTY='&#125;</code></pre><h3 id="多线程-进程">多线程-进程</h3><blockquote><p>Python 多线程不能利用 CPU 多核优势，IO 密集型可用多线程，CPU 密集型适合用多进程 <sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup></p></blockquote><p>也就是说只有 IO 密集型任务适用多线程,其他情况: <code>多进程 &gt; 不用 &gt; 多线程</code>, API 区别如下:<sup id='cite_ref-3'><a href="#cite_note-3">[3]</a></sup></p><p><img src="https://www.helloimg.com/images/2022/05/02/R9zQZh.png" alt="R9zQZh.png"></p><p>虽然但是,很多情况下涉及到资源共享, 多进程处理起来比较麻烦,还是多线程舒服.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">multi_num = multiprocessing.cpu_count() * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">counter</span>(<span class="params">num</span>):</span><br><span class="line">    time.sleep(num)</span><br><span class="line">    <span class="built_in">print</span>(threading.currentThread().name, num, end=<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">with</span> ThreadPoolExecutor(max_workers=multi_num) <span class="keyword">as</span> thread_pool:</span><br><span class="line">        start = time.time()</span><br><span class="line">        thread_pool.<span class="built_in">map</span>(counter, <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 等待任务执行完再跳回 main</span></span><br><span class="line">        thread_pool.shutdown(wait=<span class="literal">True</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;多线程: &quot;</span>, time.time() - start)</span><br></pre></td></tr></table></figure><pre><code>ThreadPoolExecutor-0_0 0ThreadPoolExecutor-0_1 1ThreadPoolExecutor-0_0 2ThreadPoolExecutor-0_2 3ThreadPoolExecutor-0_3 4ThreadPoolExecutor-0_4 5ThreadPoolExecutor-0_5 6ThreadPoolExecutor-0_6 7ThreadPoolExecutor-0_7 8ThreadPoolExecutor-0_8 9多线程:  9.009207010269165</code></pre><h2 id="opengl">opengl</h2><h3 id="彩色三角形">彩色三角形</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -------------------------------------------</span></span><br><span class="line"><span class="comment"># quidam_01.py 三维空间的世界坐标系和三角形</span></span><br><span class="line"><span class="comment"># -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> OpenGL.GL <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLUT <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw</span>():</span><br><span class="line">    <span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line">    glBegin(GL_LINES)  <span class="comment"># 开始绘制线段（世界坐标系）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 以红色绘制x轴</span></span><br><span class="line">    glColor4f(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>)  <span class="comment"># 设置当前颜色为红色不透明</span></span><br><span class="line">    glVertex3f(-<span class="number">0.8</span>, <span class="number">0.0</span>, <span class="number">0.0</span>)  <span class="comment"># 设置x轴顶点（x轴负方向）</span></span><br><span class="line">    glVertex3f(<span class="number">0.8</span>, <span class="number">0.0</span>, <span class="number">0.0</span>)  <span class="comment"># 设置x轴顶点（x轴正方向）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 以绿色绘制y轴</span></span><br><span class="line">    glColor4f(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>)  <span class="comment"># 设置当前颜色为绿色不透明</span></span><br><span class="line">    glVertex3f(<span class="number">0.0</span>, -<span class="number">0.8</span>, <span class="number">0.0</span>)  <span class="comment"># 设置y轴顶点（y轴负方向）</span></span><br><span class="line">    glVertex3f(<span class="number">0.0</span>, <span class="number">0.8</span>, <span class="number">0.0</span>)  <span class="comment"># 设置y轴顶点（y轴正方向）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 以蓝色绘制z轴</span></span><br><span class="line">    glColor4f(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>)  <span class="comment"># 设置当前颜色为蓝色不透明</span></span><br><span class="line">    glVertex3f(<span class="number">0.0</span>, <span class="number">0.0</span>, -<span class="number">0.8</span>)  <span class="comment"># 设置z轴顶点（z轴负方向）</span></span><br><span class="line">    glVertex3f(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.8</span>)  <span class="comment"># 设置z轴顶点（z轴正方向）</span></span><br><span class="line"></span><br><span class="line">    glEnd()  <span class="comment"># 结束绘制线段</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line">    glBegin(GL_TRIANGLES)  <span class="comment"># 开始绘制三角形（z轴负半区）</span></span><br><span class="line"></span><br><span class="line">    glColor4f(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>)  <span class="comment"># 设置当前颜色为红色不透明</span></span><br><span class="line">    glVertex3f(-<span class="number">0.5</span>, -<span class="number">0.366</span>, -<span class="number">0.5</span>)  <span class="comment"># 设置三角形顶点</span></span><br><span class="line">    glColor4f(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>)  <span class="comment"># 设置当前颜色为绿色不透明</span></span><br><span class="line">    glVertex3f(<span class="number">0.5</span>, -<span class="number">0.366</span>, -<span class="number">0.5</span>)  <span class="comment"># 设置三角形顶点</span></span><br><span class="line">    glColor4f(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>)  <span class="comment"># 设置当前颜色为蓝色不透明</span></span><br><span class="line">    glVertex3f(<span class="number">0.0</span>, <span class="number">0.5</span>, -<span class="number">0.5</span>)  <span class="comment"># 设置三角形顶点</span></span><br><span class="line"></span><br><span class="line">    glEnd()  <span class="comment"># 结束绘制三角形</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line">    glFlush()  <span class="comment"># 清空缓冲区，将指令送往硬件立即执行</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    glutInit()  <span class="comment"># 1. 初始化glut库</span></span><br><span class="line">    glutCreateWindow(<span class="string">&#x27;Quidam Of OpenGL&#x27;</span>)  <span class="comment"># 2. 创建glut窗口</span></span><br><span class="line">    glutDisplayFunc(draw)  <span class="comment"># 3. 注册回调函数draw()</span></span><br><span class="line">    glutMainLoop()  <span class="comment"># 4. 进入glut主循环</span></span><br></pre></td></tr></table></figure><h3 id="点线抛物线">点线抛物线</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> OpenGL.GL <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLU <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLUT <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init</span>():</span><br><span class="line">    glClearColor(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>)</span><br><span class="line">    gluOrtho2D(-<span class="number">5.0</span>, <span class="number">5.0</span>, -<span class="number">5.0</span>, <span class="number">5.0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plotfunc</span>():</span><br><span class="line">    glClear(GL_COLOR_BUFFER_BIT)</span><br><span class="line">    glColor3f(<span class="number">1.0</span>, <span class="number">0.2</span>, <span class="number">0.6</span>)</span><br><span class="line">    glPointSize(<span class="number">3.0</span>)</span><br><span class="line"></span><br><span class="line">    glBegin(GL_POINTS)</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> arange(-<span class="number">5.0</span>, <span class="number">5.0</span>, <span class="number">0.1</span>):  <span class="comment">#from -5.0 to 5.0 plus 0.1 every time</span></span><br><span class="line">        y = x * x</span><br><span class="line">        glVertex2f(x, y)</span><br><span class="line">    glEnd()</span><br><span class="line">    glFlush()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    glutInit(sys.argv)</span><br><span class="line">    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB)</span><br><span class="line">    glutInitWindowPosition(<span class="number">50</span>, <span class="number">100</span>)</span><br><span class="line">    glutInitWindowSize(<span class="number">400</span>, <span class="number">400</span>)</span><br><span class="line">    glutCreateWindow(<span class="string">&quot;Function Plotter&quot;</span>)</span><br><span class="line">    glutDisplayFunc(plotfunc)</span><br><span class="line"></span><br><span class="line">    init()</span><br><span class="line">    glutMainLoop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main()</span><br></pre></td></tr></table></figure><h3 id="转动时钟">转动时钟</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> OpenGL.GL <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLU <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLUT <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">h = <span class="number">0</span></span><br><span class="line">m = <span class="number">0</span></span><br><span class="line">s = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Draw</span>():</span><br><span class="line">    PI = <span class="number">3.1415926</span></span><br><span class="line">    R = <span class="number">0.5</span></span><br><span class="line">    TR = R - <span class="number">0.05</span></span><br><span class="line">    glClear(GL_COLOR_BUFFER_BIT)</span><br><span class="line">    glLineWidth(<span class="number">5</span>)</span><br><span class="line">    glBegin(GL_LINE_LOOP)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        glVertex2f(R * math.cos(<span class="number">2</span> * PI / <span class="number">100</span> * i),</span><br><span class="line">                   R * math.sin(<span class="number">2</span> * PI / <span class="number">100</span> * i))</span><br><span class="line">    glEnd()</span><br><span class="line">    glLineWidth(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        glBegin(GL_LINES)</span><br><span class="line">        glVertex2f(TR * math.sin(<span class="number">2</span> * PI / <span class="number">12</span> * i),</span><br><span class="line">                   TR * math.cos(<span class="number">2</span> * PI / <span class="number">12</span> * i))</span><br><span class="line">        glVertex2f(R * math.sin(<span class="number">2</span> * PI / <span class="number">12</span> * i),</span><br><span class="line">                   R * math.cos(<span class="number">2</span> * PI / <span class="number">12</span> * i))</span><br><span class="line">        glEnd()</span><br><span class="line">    glLineWidth(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    h_Length = <span class="number">0.2</span></span><br><span class="line">    m_Length = <span class="number">0.3</span></span><br><span class="line">    s_Length = <span class="number">0.4</span></span><br><span class="line">    count = <span class="number">60.0</span></span><br><span class="line">    s_Angle = s / count</span><br><span class="line">    count *= <span class="number">60</span></span><br><span class="line">    m_Angle = (m * <span class="number">60</span> + s) / count</span><br><span class="line">    count *= <span class="number">12</span></span><br><span class="line">    h_Angle = (h * <span class="number">60</span> * <span class="number">60</span> + m * <span class="number">60</span> + s) / count</span><br><span class="line">    glLineWidth(<span class="number">1</span>)</span><br><span class="line">    glBegin(GL_LINES)</span><br><span class="line">    glVertex2f(<span class="number">0.0</span>, <span class="number">0.0</span>)</span><br><span class="line">    glVertex2f(s_Length * math.sin(<span class="number">2</span> * PI * s_Angle),</span><br><span class="line">               s_Length * math.cos(<span class="number">2</span> * PI * s_Angle))</span><br><span class="line">    glEnd()</span><br><span class="line">    glLineWidth(<span class="number">5</span>)</span><br><span class="line">    glBegin(GL_LINES)</span><br><span class="line">    glVertex2f(<span class="number">0.0</span>, <span class="number">0.0</span>)</span><br><span class="line">    glVertex2f(h_Length * math.sin(<span class="number">2</span> * PI * h_Angle),</span><br><span class="line">               h_Length * math.cos(<span class="number">2</span> * PI * h_Angle))</span><br><span class="line">    glEnd()</span><br><span class="line">    glLineWidth(<span class="number">3</span>)</span><br><span class="line">    glBegin(GL_LINES)</span><br><span class="line">    glVertex2f(<span class="number">0.0</span>, <span class="number">0.0</span>)</span><br><span class="line">    glVertex2f(m_Length * math.sin(<span class="number">2</span> * PI * m_Angle),</span><br><span class="line">               m_Length * math.cos(<span class="number">2</span> * PI * m_Angle))</span><br><span class="line">    glEnd()</span><br><span class="line">    glLineWidth(<span class="number">1</span>)</span><br><span class="line">    glBegin(GL_POLYGON)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        glVertex2f(<span class="number">0.03</span> * math.cos(<span class="number">2</span> * PI / <span class="number">100</span> * i),</span><br><span class="line">                   <span class="number">0.03</span> * math.sin(<span class="number">2</span> * PI / <span class="number">100</span> * i))</span><br><span class="line">    glEnd()</span><br><span class="line">    glFlush()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Update</span>():</span><br><span class="line">    <span class="keyword">global</span> h, m, s</span><br><span class="line">    t = time.localtime(time.time())</span><br><span class="line">    h = <span class="built_in">int</span>(time.strftime(<span class="string">&#x27;%H&#x27;</span>, t))</span><br><span class="line">    m = <span class="built_in">int</span>(time.strftime(<span class="string">&#x27;%M&#x27;</span>, t))</span><br><span class="line">    s = <span class="built_in">int</span>(time.strftime(<span class="string">&#x27;%S&#x27;</span>, t))</span><br><span class="line">    glutPostRedisplay()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">glutInit()</span><br><span class="line">glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA)</span><br><span class="line">glutInitWindowSize(<span class="number">400</span>, <span class="number">400</span>)</span><br><span class="line">glutCreateWindow(<span class="string">&quot;My clock&quot;</span>)</span><br><span class="line">glutDisplayFunc(Draw)</span><br><span class="line">glutIdleFunc(Update)</span><br><span class="line">glutMainLoop()</span><br></pre></td></tr></table></figure><h3 id="Hello-World-pyglet">Hello-World-pyglet</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyglet</span><br><span class="line"></span><br><span class="line">window = pyglet.window.Window()</span><br><span class="line"></span><br><span class="line">label = pyglet.text.Label(<span class="string">&#x27;Hello, world&#x27;</span>,</span><br><span class="line">                          font_name=<span class="string">&#x27;Times New Roman&#x27;</span>,</span><br><span class="line">                          font_size=<span class="number">36</span>,</span><br><span class="line">                          x=window.width // <span class="number">2</span>,</span><br><span class="line">                          y=window.height // <span class="number">2</span>,</span><br><span class="line">                          anchor_x=<span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">                          anchor_y=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@window.event</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_draw</span>():</span><br><span class="line">    window.clear()</span><br><span class="line">    label.draw()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pyglet.app.run()</span><br></pre></td></tr></table></figure><h3 id="茶壶">茶壶</h3><h4 id="动态">动态</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> OpenGL.GL <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLU <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLUT <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drawFunc</span>():</span><br><span class="line">    <span class="comment">#清楚之前画面</span></span><br><span class="line">    glClear(GL_COLOR_BUFFER_BIT)</span><br><span class="line">    glRotatef(<span class="number">0.1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">0</span>)  <span class="comment">#(角度,x,y,z)</span></span><br><span class="line">    glutWireTeapot(<span class="number">0.5</span>)</span><br><span class="line">    <span class="comment">#刷新显示</span></span><br><span class="line">    glFlush()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用glut初始化OpenGL</span></span><br><span class="line">glutInit()</span><br><span class="line"><span class="comment">#显示模式:GLUT_SINGLE无缓冲直接显示|GLUT_RGBA采用RGB(A非alpha)</span></span><br><span class="line">glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA)</span><br><span class="line"><span class="comment">#窗口位置及大小-生成</span></span><br><span class="line">glutInitWindowPosition(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">glutInitWindowSize(<span class="number">400</span>, <span class="number">400</span>)</span><br><span class="line">glutCreateWindow(<span class="string">b&quot;first&quot;</span>)</span><br><span class="line"><span class="comment">#调用函数绘制图像</span></span><br><span class="line">glutDisplayFunc(drawFunc)</span><br><span class="line">glutIdleFunc(drawFunc)</span><br><span class="line"><span class="comment">#主循环</span></span><br><span class="line">glutMainLoop()</span><br></pre></td></tr></table></figure><h4 id="静态">静态</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> OpenGL.GL <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLU <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLUT <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drawFunc</span>():</span><br><span class="line">    glClear(GL_COLOR_BUFFER_BIT)</span><br><span class="line">    <span class="comment"># 设置为红色</span></span><br><span class="line">    glColor3f(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>)</span><br><span class="line">    glutWireTeapot(<span class="number">0.5</span>)</span><br><span class="line">    glFlush()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">glutInit()</span><br><span class="line">glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA)</span><br><span class="line">glutInitWindowSize(<span class="number">400</span>, <span class="number">400</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#参数为b类型而不是string</span></span><br><span class="line">glutCreateWindow(<span class="string">b&quot;Teapot&quot;</span>)</span><br><span class="line">glutDisplayFunc(drawFunc)</span><br><span class="line">glutMainLoop()</span><br></pre></td></tr></table></figure><h2 id="数据分析">数据分析</h2><h3 id="numpy">numpy</h3><h4 id="newaxis">newaxis</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">A = np.array([[<span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>]])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(A)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;A.shape: &quot;</span>, A.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># new 一个一维数组,然后把 A 整个怼进去</span></span><br><span class="line">B = A[np.newaxis, :]</span><br><span class="line"><span class="built_in">print</span>(B)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;B.shape: &quot;</span>, B.shape)</span><br><span class="line"></span><br><span class="line">C = A[:, np.newaxis]</span><br><span class="line"><span class="built_in">print</span>(C)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;C.shape: &quot;</span>, C.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把每个第二维第四位的元素怼进一个新数组,把原第二位替换为此新数组</span></span><br><span class="line">D = A[:, np.newaxis, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(D)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;D.shape: &quot;</span>, D.shape)</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>[[2 0 2 1] [2 0 2 2]]A.shape:  (2, 4)[[[2 0 2 1]  [2 0 2 2]]]B.shape:  (1, 2, 4)[[[2 0 2 1]] [[2 0 2 2]]]C.shape:  (2, 1, 4)[[1] [2]]D.shape:  (2, 1)</code></pre><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-11">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://stackoverflow.com/questions/29241056/how-does-numpy-newaxis-work-and-when-to-use-it">How does numpy.newaxis work and when to use it?</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://blog.csdn.net/gzmgzm_ming/article/details/81783450">Python threadpool与multiprocessing</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://www.bilibili.com/video/BV1yp4y1679u">Python并发实战，怎样使用多进程multiprocessing加速程序运行</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> opengl </tag>
            
            <tag> 多线程 </tag>
            
            <tag> 人工智能 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>👩‍❤️‍💋‍👨Code-4-Deep-Learning</title>
      <link href="/post/python/code/DL/"/>
      <url>/post/python/code/DL/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:11:24 * @FilePath: \Blog-private\scaffolds\post.md * @Description: * @!: *********************************************************************--><h2 id="序">序</h2><p>此文为其他文章的代码部分:</p><blockquote><p><a href="../../AI/DL">⚡再啃-Deep-Learning</a></p></blockquote><p>也提供了 notebook 形式: <a href="https://github.com/Weidows-projects/public-post/blob/main/notebook/DL/DL.ipynb">代码地址</a></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="神经网络">神经网络</h2><h3 id="感知器">感知器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">AND</span>(<span class="params">x1, x2</span>):</span><br><span class="line">    w1, w2, theta = <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.7</span></span><br><span class="line">    tmp = x1 * w1 + x2 * w2</span><br><span class="line">    <span class="keyword">if</span> tmp &lt;= theta:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">OR</span>(<span class="params">x1, x2</span>):</span><br><span class="line">    w1, w2, theta = <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.2</span></span><br><span class="line">    tmp = x1 * w1 + x2 * w2</span><br><span class="line">    <span class="keyword">if</span> tmp &lt;= theta:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 非门只取一个输入,另一个不管</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">NOT</span>(<span class="params">x1, x2</span>):</span><br><span class="line">    w1, w2, theta = -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    tmp = x1 * w1 + x2 * w2 + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> tmp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 异或门是非线性运算, 需要多层感知器组合</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">XOR</span>(<span class="params">x1, x2</span>):</span><br><span class="line">    <span class="comment"># 异或门 = (与非门 与 或门)</span></span><br><span class="line">    <span class="keyword">return</span> AND(OR(x1, x2), <span class="keyword">not</span> AND(x1, x2))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(AND(<span class="number">0</span>, <span class="number">1</span>), AND(<span class="number">1</span>, <span class="number">1</span>), OR(<span class="number">0</span>, <span class="number">1</span>), OR(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(NOT(<span class="number">0</span>, <span class="number">1</span>), NOT(<span class="number">1</span>, <span class="number">1</span>), NOT(<span class="number">0</span>, <span class="number">0</span>), NOT(<span class="number">1</span>, <span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(XOR(<span class="number">0</span>, <span class="number">1</span>), XOR(<span class="number">1</span>, <span class="number">1</span>), XOR(<span class="number">0</span>, <span class="number">0</span>), XOR(<span class="number">1</span>, <span class="number">0</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>0 1 1 01 0 1 01 0 0 1</code></pre><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-35">借物表</h2><p>暂无…</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 人工智能 </tag>
            
            <tag> 深度学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>⚡再啃-Deep-Learning</title>
      <link href="/post/python/AI/DL/"/>
      <url>/post/python/AI/DL/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-06-14 21:06:14 * @FilePath: \Blog-private\source\_posts\python\AI\DL.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-lg"><ul><li>再啃-Deep-Learning<ul><li>深度学习<ul><li>一个好的表示学习策略必须具备一定的深度</li><li>特征<ul><li>像是宰鱼要分多步,每步使用不同方式/工具</li><li>通常从底层特征开始经过多步非线性转换才能得到好的高层语义表示</li></ul></li><li>特点<ul><li>增加特征重用性,指数级增加表示能力</li></ul></li><li><a href="https://www.helloimg.com/images/2022/03/10/RCdJ0c.png">表示学习与深度学习关系</a></li><li>关键问题: 贡献度分配<ul><li>不同组件/参数对系统输出结果的影响权重</li></ul></li></ul></li><li>神经网路<ul><li>人工神经网络<ul><li>由大量神经元及它们之间的有向连接构成</li><li>三方面<ul><li>神经元/感知器</li><li>网络的拓扑结构<ul><li>LeNet</li><li>AlexNet</li><li>VGGNet</li><li>ResNet</li></ul></li><li>学习算法</li></ul></li><li><a href="https://www.helloimg.com/images/2022/03/19/Rat37q.png">分类</a><ul><li>单类网络<ul><li>前馈网络</li><li>记忆网络</li><li>图网络</li></ul></li><li>复合型网络</li></ul></li></ul></li><li>贡献度分配问题<ul><li>不同 component 或 param 对最终系统输出结果的贡献</li><li>利用偏导数求解贡献度</li></ul></li><li>发展史<ul><li>模型提出</li><li>冰河期</li><li>反向传播算法引起的复兴</li><li>流行度降低</li><li>深度学习崛起</li></ul></li></ul></li><li>MMDetection<ul><li>图像分类<ul><li>模型发展<ul><li>LeNet-5 (1998)</li><li>AlexNet (2012)</li><li>VGGNet (2014)</li><li>GoogleNet (2014)</li><li>ResNet (2015)</li></ul></li></ul></li><li>模型训练<ul><li>配置文件<ul><li>模型结构<ul><li>模型有几层</li><li>每层多少通道数</li></ul></li><li>数据集<ul><li>数据集划分<ul><li>常用的有 COCO 格式, <code>annotation/test.json -&gt; test/images</code></li></ul></li><li>数据文件路径</li><li>数据增强策略</li></ul></li><li>训练策略<ul><li>梯度下降算法</li><li>学习率参数</li><li>batch_size</li><li>训练总轮次</li><li>学习率变化策略</li></ul></li><li>runtime / 运行时<ul><li>GPU</li><li>分布式环境配置</li></ul></li><li>一些辅助功能<ul><li>打印日志</li><li>checkpoint / 定时保存</li></ul></li></ul></li></ul></li></ul></li><li>MMDetection3D</li></ul></li></ul></blockquote><blockquote><p>由于 DL 是 ML 的子问题, 所以此篇着重写 <a href="../ML">🥵 硬啃-Machine-Learning</a> 里面涉及甚少的 (解耦) <br>有一些 (比如损失函数, 梯度下降) 隶属于 ML &gt; DL ,所以堆在了 ML 里面</p></blockquote><blockquote><ul><li>本篇所用到的代码在这: <br><a href="../../code/DL">👩‍❤️‍💋‍👨Code-4-Deep-Learning</a> <br><a href="../../code/MM-Detection">🐳MM-Detection-Colab</a></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="ML-2-DL">ML-2-DL</h2><ul><li><p>简单解释 DL 到底在做什么?</p><p>传统 ML 就像是在教小学生如何通过一系列<code>固定公式</code>搞出来一个结果,在公式不太复杂/运算量不太大时, 教起来还好</p><p>那怎么教一个小学生高数题呢? 也是可以让他死记硬背公式的,但是效果并不好</p><p>DL 就像是在教他转换思想 (函数,导数,积分…), 遇到题目后,具体套什么公式, 由小学生自己找到</p></li></ul><p>DL 不像 ML 一样泛泛, 对每种任务有针对性的设计</p><hr><div class="tabs" id="优点"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#优点-1">优点</button></li><li class="tab"><button type="button" data-href="#优点-2">缺点</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="优点-1"><p>就像上面提到的, 传统 ML 需要人教给机器特征工程 (固定公式), 模型越复杂, 人的提取方法和特征结果会越差</p><p>DL 对特征的处理方法/结果要优于人类 (比如深层次人类无法察觉的特征关系)</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="优点-2"><p>DL 模型的能力是 (人类传授的基本功 + 题海战术) 得来的;</p><ol><li>刷题少时反不如套公式</li><li>基本功构建成本高</li><li>可解释性差 (虽然基本功是你教的,但你不知道机器是用的什么歪门邪道的心法)</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="神经网路">神经网路</h2><p>大多知名的模型都是属于 <code>深度神经网络</code> 的, 比如 CNN, RNN, GAN …</p><h3 id="神经元-感知器">神经元-感知器</h3><ul><li><p>感知器就是一个神经元, 神经网络的组成单元, 可自学习为回归/分类器</p><p><img src="https://www.helloimg.com/images/2022/03/10/RC0tEP.png" alt=""></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>y</mi><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>w</mi><mn>1</mn><mo>⋅</mo><mi>x</mi><mn>1</mn><mo>+</mo><mi>w</mi><mn>2</mn><mo>⋅</mo><mi>x</mi><mn>2</mn><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">y = f(w1 \cdot x1 + w2 \cdot x2 + b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></span></p><p>当调整 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo separator="true">,</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">w,b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span></span></span></span> 时,可以得到不同的变体逻辑运算(比如与或非);</p><p>给定训练数据集, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo separator="true">,</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">w,b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span></span></span></span> 可以通过学习自动调整</p><hr></li><li><p>学习规则核心思想: <code>错误驱动</code></p><ol><li>权值初始化</li><li>输入样本对</li><li>计算输出</li><li>根据感知器学习规则调整权值</li><li>返回到步骤 2. 输入下一对样本,周而复始直到对所有样本,感知器的实际输出与期望输出相等</li></ol><hr></li><li><details>  <summary> 例题 </summary><hr><p><img src="https://www.helloimg.com/images/2022/03/19/Raxa9S.png" alt=""></p><ol><li>初始化向量</li></ol><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>W</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>0.5</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup><mo>⇒</mo><msup><mi>W</mi><mi>T</mi></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>0.5</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">W(0) = (0.5,1,-1,0)^T \rArr W^T(0) = (0.5,1,-1,0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span></p><ol start="2"><li>输入样本</li><li>计算输出</li></ol><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>W</mi><mi>T</mi></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><msup><mi>X</mi><mn>1</mn></msup><mo>=</mo><mo stretchy="false">(</mo><mn>0.5</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>−</mo><mn>2</mn><mo separator="true">,</mo><mn>0</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup><mo>=</mo><mn>2.5</mn></mrow><annotation encoding="application/x-tex">W^T(0)X^1 = (0.5,1,-1,0) \cdot (-1,1,-2,0)^T = 2.5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2.5</span></span></span></span></span></p><ol start="4"><li>调整权值,这里使用上面<a href="#%E6%BF%80%E6%B4%BB%E5%87%BD%E6%95%B0">#激活函数</a>的阶跃函数例子</li></ol><p>权向量第一个分量也就是 0.5 为阈值</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>o</mi><mn>1</mn></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>s</mi><mi>g</mi><mi>n</mi><mo stretchy="false">(</mo><msup><mi>W</mi><mi>T</mi></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><msup><mi>X</mi><mn>1</mn></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>s</mi><mi>g</mi><mi>n</mi><mo stretchy="false">(</mo><mn>2.5</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>W</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>W</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>+</mo><mi>η</mi><mrow><mo fence="true">[</mo><msup><mi>d</mi><mn>1</mn></msup><mo>−</mo><msup><mi>o</mi><mn>1</mn></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow><msup><mi>X</mi><mn>1</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mn>0.5</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup><mo>+</mo><mn>0.1</mn><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>−</mo><mn>2</mn><mo separator="true">,</mo><mn>0</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mrow><mn mathvariant="bold">0.7</mn><mo separator="true">,</mo><mn mathvariant="bold">0.8</mn><mo separator="true">,</mo><mo>−</mo><mn mathvariant="bold">0.6</mn><mo separator="true">,</mo><mn mathvariant="bold">0</mn><msup><mo stretchy="false">)</mo><mi mathvariant="bold">T</mi></msup></mrow></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>W</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>W</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>η</mi><mrow><mo fence="true">[</mo><msup><mi>d</mi><mn>2</mn></msup><mo>−</mo><msup><mi>o</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow><msup><mi>X</mi><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mn>0.7</mn><mo separator="true">,</mo><mn>0.8</mn><mo separator="true">,</mo><mo>−</mo><mn>0.6</mn><mo separator="true">,</mo><mn>0</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup><mo>+</mo><mn>0.1</mn><mo stretchy="false">[</mo><mo>−</mo><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>1.5</mn><mo separator="true">,</mo><mo>−</mo><mn>0.5</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mrow><mn mathvariant="bold">0.7</mn><mo separator="true">,</mo><mn mathvariant="bold">0.8</mn><mo separator="true">,</mo><mo>−</mo><mn mathvariant="bold">0.6</mn><mo separator="true">,</mo><mn mathvariant="bold">0</mn><msup><mo stretchy="false">)</mo><mi mathvariant="bold">T</mi></msup></mrow></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>W</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>W</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mi>η</mi><mrow><mo fence="true">[</mo><msup><mi>d</mi><mn>3</mn></msup><mo>−</mo><msup><mi>o</mi><mn>3</mn></msup><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow><msup><mi>X</mi><mn>3</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mn>0.7</mn><mo separator="true">,</mo><mn>0.8</mn><mo separator="true">,</mo><mo>−</mo><mn>0.6</mn><mo separator="true">,</mo><mn>0</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup><mo>+</mo><mn>0.1</mn><mo stretchy="false">[</mo><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>0.5</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mrow><mn mathvariant="bold">0.5</mn><mo separator="true">,</mo><mn mathvariant="bold">0.6</mn><mo separator="true">,</mo><mo>−</mo><mn mathvariant="bold">0.4</mn><mo separator="true">,</mo><mn mathvariant="bold">0.1</mn><msup><mo stretchy="false">)</mo><mi mathvariant="bold">T</mi></msup></mrow></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  o^1(0) &amp;= sgn(W^T(0)X^1) \\  &amp;= sgn(2.5) = 1    \\ \ \\    W(1) &amp;=W(0) + \eta \left[d^{1}-o^{1}(0)\right] X^{1} \\  &amp;= (0.5,1,-1,0)^{T} + 0.1 (- 1- 1)(-1,1,-2,0)^{T} \\  &amp;= \left(\mathbf{0.7,0.8,-0.6,0)^{T}}\right.    \\ \ \\    W(2) &amp;=W(1) + \eta \left[d^{2}-o^{2}(1)\right] X^{2} \\  &amp;= (0.7,0.8,-0.6,0)^{T} + 0.1 [- 1-(- 1)](-1,0,1.5,-0.5)^{T} \\  &amp;= \left(\mathbf{0.7,0.8,-0.6,0)^{T}}\right.    \\ \ \\    W(3) &amp;=W(2) + \eta \left[d^{3}-o^{3}(2)\right] X^{3} \\  &amp;= (0.7,0.8,-0.6,0)^{T} + 0.1 [1-(- 1)](-1,-1,1,0.5)^{T} \\  &amp;= \left(\mathbf{0.5,0.6,-0.4,0.1)^{T}}\right.\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:21.4375em;vertical-align:-10.4687em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:10.9687em;"><span style="top:-13.0774em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span></span></span><span style="top:-11.5774em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-10.0774em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:-8.5533em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span><span style="top:-7.002em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-5.4487em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-3.9487em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:-2.4246em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span><span style="top:-0.8733em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:0.68em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:2.18em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:3.7041em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span><span style="top:5.2555em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:6.8087em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:10.4687em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:10.9687em;"><span style="top:-13.0774em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-11.5774em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord">2.5</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:-8.5533em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span><span style="top:-7.002em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">0.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0.1</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span style="top:-5.4487em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mord mathbf">0.7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">0.8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord mathbf">0.6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8933em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">T</span></span></span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.4246em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-0.8733em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">0.7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0.8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">0.6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0.1</span><span class="mopen">[</span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose">)]</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">0.5</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span style="top:0.68em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mord mathbf">0.7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">0.8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord mathbf">0.6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8933em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">T</span></span></span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:3.7041em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span><span style="top:5.2555em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">0.7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0.8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">0.6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0.1</span><span class="mopen">[</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose">)]</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0.5</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span style="top:6.8087em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mord mathbf">0.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">0.6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord mathbf">0.4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">0.1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8933em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">T</span></span></span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:10.4687em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><ol start="5"><li>返回 2. 直到</li></ol><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>d</mi><mi>P</mi></msup><mo>−</mo><msup><mi>o</mi><mi>P</mi></msup><mo>=</mo><mn>0</mn><mspace width="2em"/><mo stretchy="false">(</mo><mi>p</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d^{P} - o^{P} = 0 \qquad (p = 1,2,3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9747em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8913em;"></span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:2em;"></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mclose">)</span></span></span></span></span></p></details></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="前馈神经网络">前馈神经网络</h3><p>把若干个感知器叠几层, 形成单向类网状结构, 称为多层前馈神经网络 (Multi-layer Feedforward Neural Networks), <code>前馈</code> 是指前一层输出作为后一层输入</p><p><img src="https://www.helloimg.com/images/2022/05/06/R0fC7h.png" alt=""></p><ul><li><p>每个箭头直线代表一个 “向量”:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>w</mi><mrow><mi>a</mi><mtext> </mtext><mi>b</mi></mrow><mi>k</mi></msubsup></mrow><annotation encoding="application/x-tex">w ^{k}  _{a \ b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1461em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mspace mtight"><span class="mtight"> </span></span><span class="mord mathnormal mtight">b</span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>k: 权重</p><p>a: 前一层第 a 个神经元</p><p>b: 后一层第 b 个神经元</p><hr></li><li><p>同一层感知器之间不相连, 与前后两层全相连, 为<code>全连接神经网络</code> (fully-connected neural network)</p><p>这种网络有硬性缺点:</p><ol><li>丢失数据的空间信息 (比如 3d 图像会展开为向量)</li><li>参数量太多,难训</li><li>层级浅, 大量参数易过拟合</li></ol><p>后面 CNN 对此缺点做了优化</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="反向传播">反向传播</h3><ul><li><p>反向传播/误差反向传播 (Backpropagation algorithm), 根据输出层输出值来反向调整隐藏层权重的一种方法</p><ul><li><p>我们常用 <code>梯度下降方法</code> 来更新权重, 梯度下降应用于有明确求导/可求出误差的情况</p></li><li><p>但是对于含有多个隐藏层的神经网络, 隐藏层求不出误差, 只有输出层有</p></li><li><p>反向传播就是一个把输出层误差反向传播到隐藏层的过程</p></li></ul></li><li><p>图解 <sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup></p><p><img src="https://www.helloimg.com/images/2022/05/07/RNeqlm.png" alt=""></p><p><img src="https://www.helloimg.com/images/2022/05/07/RNexIh.png" alt=""></p><p>实现原理就是求偏导</p><p><img src="https://www.helloimg.com/images/2022/05/08/RNeWuu.png" alt=""></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="卷积神经网络-CNN">卷积神经网络-CNN</h3><p>卷积神经网络(Convolutional Neural Network，CNN), 视觉领域难以撼动的老大</p><h4 id="what">what</h4><p>对于一个 .mp3 的音乐 (频域记录, .wav 是时域记录), 某一时间点的音波可以<code>假定认为</code>是多个函数交杂而成的</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>y</mi><mo>=</mo><msub><mi>h</mi><mtext>耳机音效</mtext></msub><mrow><mo fence="true">[</mo><msub><mi>f</mi><mtext>人声</mtext></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>∗</mo><msub><mi>g</mi><mtext>乐器</mtext></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow><mo>∗</mo><msub><mi>i</mi><mtext>响度</mtext></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">y = h_{耳机音效} \left[ f_{人声}(t) * g_{乐器}(t) \right] * i_{响度}(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">耳机音效</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">人声</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">乐器</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">]</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">响度</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span></p><p>某一时间点的音波,就是这一堆函数的<code>卷积</code>, 简单来说就是在某个维度上 <code>加权 + 叠加</code></p><hr><h4 id="结构">结构</h4><p><img src="https://www.helloimg.com/images/2022/05/18/RytYZQ.png" alt=""><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph TB  输入层 --&gt;  卷积层(卷积层 Convolutional-layer) --&gt;  激活层(激活&#x2F;ReLU层 Activation-layer) --&gt;  池化层(池化&#x2F;子采样&#x2F;下采样层 Pooling-layer) --&gt;  全连接网络(全连接网络 fully-connected-layer) --&gt;  输出层  </pre></div></p><ol><li>卷积层: 就像是多个科目 (卷积核) 的老师给出试卷, 让&quot;输入&quot;做答</li><li>激活层: 不同科目老师判卷,得出有没有及格,及格的话计多少分</li><li>池化层: 成绩取最大值或者平均值, 减少计算量</li><li>全连接层: 年级排名</li><li>输出层: 是否获奖(二分类) / 排名前百分之几十(多分类)</li></ol><hr><h4 id="卷积层">卷积层</h4><p><img src="https://www.helloimg.com/images/2022/05/09/RNJpTz.png" alt=""></p><p><img src="https://www.helloimg.com/images/2022/05/19/Ry4FoP.png" alt=""></p><p>可以直观看出, 其作用为 <code>降维</code> 和 <code>提取特征</code></p><hr><h4 id="激活层">激活层</h4><blockquote><p>将输入信号的总和转换为输出信号的函数被称为激活函数</p></blockquote><ul><li><p>如下为一种简单实现: 阶跃函数:</p><p><img src="https://www.helloimg.com/images/2022/03/18/RaxGG1.png" alt="RaxGG1.png"></p><p>其阈值是可以改变的:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>s</mi><mi>g</mi><mi>n</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>i</mi><mi>f</mi><mtext> </mtext><mi>x</mi><mo>&gt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>i</mi><mi>f</mi><mtext> </mtext><mi>x</mi><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>i</mi><mi>f</mi><mtext> </mtext><mi>x</mi><mo>&lt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">sgn(x) =\begin{cases}  1 &amp; if \ x &gt; 0 \\  0 &amp; if \ x = 0 \\  -1 &amp; if \ x &lt; 0\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.91em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-2.2em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.192em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.8889em' height='0.316em' style='width:0.8889em' viewBox='0 0 888.89 316' preserveAspectRatio='xMinYMin'><path d='M384 0 H504 V316 H384z M384 0 H504 V316 H384z'/></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.8889em' height='0.316em' style='width:0.8889em' viewBox='0 0 888.89 316' preserveAspectRatio='xMinYMin'><path d='M384 0 H504 V316 H384z M384 0 H504 V316 H384z'/></svg></span></span><span style="top:-4.6em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.53em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace"> </span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace"> </span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-1.53em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace"> </span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p></li><li><p>还有很多其他的激活函数, 用途各异, 详见<sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p><p>sigmoid 函数</p><p>tanh 双曲正切函数</p><p>ReLU (Rectified Linear Units, 修正线性单元, CNN 常用)</p><p>…</p></li></ul><hr><h4 id="池化层">池化层</h4><p><img src="https://www.helloimg.com/images/2022/05/19/Ry4PS6.png" alt=""></p><p><img src="https://www.helloimg.com/images/2022/05/19/Ry4apn.png" alt=""></p><p>一方面, 缩小分辨率降低运算量, 一方面扩大神经元的<code>感受野</code> (特征捕获范围)</p><p>也就使得层次越深, 单位神经元在有损条件下捕获特征/语义信息的范围越大</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="MMDetection">MMDetection</h2><blockquote><p>参考课程 <sup id='cite_ref-3'><a href="#cite_note-3">[3]</a></sup> <br><img src="https://www.helloimg.com/images/2022/05/14/R7twWM.png" alt=""></p></blockquote><h3 id="图像分类">图像分类</h3><p><img src="https://www.helloimg.com/images/2022/05/19/Ry4Xmz.png" alt=""></p><hr><h3 id="目标检测">目标检测</h3><h4 id="第一阶段-问题与方案">第一阶段-问题与方案</h4><h5 id="图像分割">图像分割</h5><p>等大窗口 -&gt; 滑动窗口 -&gt; 多尺度滑窗 -&gt; 图像金字塔</p><p><img src="https://www.helloimg.com/images/2022/05/20/ZBmvYY.png" alt=""></p><p><img src="https://www.helloimg.com/images/2022/05/21/ZCV790.png" alt=""></p><h5 id="区域提议">区域提议</h5><p>但上面设计需要做的分类数太多,难以满足实时性, 可以先用 <code>区域提议 Region Proposal</code> 提取出可能包含物体的区域</p><p><img src="https://www.helloimg.com/images/2022/05/21/ZCYq6P.png" alt=""></p><h5 id="非极大值抑制">非极大值抑制</h5><p><img src="https://www.helloimg.com/images/2022/05/21/ZCYER6.png" alt=""></p><hr><h4 id="第二阶段-优化算法">第二阶段-优化算法</h4><h5 id="共享特征与-RoI-Pooling">共享特征与-RoI-Pooling</h5><p>对于每个提议框 -&gt; CNN 前传, 有大量重叠提议框(重复的卷积运算), 所以改进为: <code>全图单次 CNN 前传 -&gt; 全图特征图 -&gt; 根据提议框裁剪预测</code></p><p><img src="https://www.helloimg.com/images/2022/05/27/Z1PBTb.png" alt=""></p><h5 id="RPN-区域提议网络">RPN-区域提议网络</h5><p>Region Proposal Network</p><p><img src="https://www.helloimg.com/images/2022/05/27/Z1PLwn.png" alt=""></p><h5 id="FPN-特征金字塔网络">FPN-特征金字塔网络</h5><p><img src="https://www.helloimg.com/images/2022/05/27/Z1a3Gh.png" alt=""></p><hr><h4 id="Faster-RCNN">Faster-RCNN</h4><p><code>Faster - Region proposal - CNN</code> 一个很经典的例子, 应用上面的优化算法网络 <sup id='cite_ref-5'><a href="#cite_note-5">[5]</a></sup></p><blockquote><p><img src="https://www.helloimg.com/images/2022/05/27/Z1Pnqz.png" alt=""> &gt; <img src="https://www.helloimg.com/images/2022/05/27/Z1aeNq.png" alt=""> &gt; <img src="https://www.helloimg.com/images/2022/06/11/ZLwNpK.png" alt=""></p></blockquote><hr><h4 id="目标检测划分">目标检测划分</h4><p>可以通过下面三种形式划分 <sup id='cite_ref-6'><a href="#cite_note-6">[6]</a></sup></p><blockquote class="pullquote mindmap mindmap-md"><ul><li>目标检测划分<ul><li>stage<ul><li>one-stage (单阶段)<ul><li>RetinaNet</li><li>YOLO</li><li>FCOS</li><li>RepPoints</li></ul></li><li>two-stage (双阶段)<ul><li>FasterRCNN</li><li>CascadeRCNN</li><li>LibraRCNN</li><li>TridentNet</li></ul></li></ul></li><li>anchor (锚框)<ul><li>anchor-based<ul><li>FasterRCNN</li><li>YOLO</li></ul></li><li>anchor-free<ul><li>FCOS</li></ul></li></ul></li><li>transformer<ul><li>DETR</li><li>Deformable DETR</li></ul></li></ul></li></ul></blockquote><div class="tabs" id="双阶段"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#双阶段-1">单阶段</button></li><li class="tab"><button type="button" data-href="#双阶段-2">双阶段</button></li><li class="tab"><button type="button" data-href="#双阶段-3">无锚框算法</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="双阶段-1"><p><img src="https://www.helloimg.com/images/2022/05/30/ZeIeWv.png" alt=""></p><p>单阶段最常用的就是 YOLO (You Only Look Once), 每代都会有设计更新和优化,如下为 v3 设计</p><p><img src="https://www.helloimg.com/images/2022/05/30/ZeImDX.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="双阶段-2"><p>上面介绍的都是双阶段算法,与单阶段区别主要在于<code>是否有区域提议阶段</code>, 单阶段算法只通过不同尺寸的锚框(检测头)进行物体预测</p><p><img src="https://www.helloimg.com/images/2022/05/27/Z1aqjr.png" alt=""></p><p>具体来看,与上面网络结合:</p><p><img src="https://www.helloimg.com/images/2022/05/30/ZeDKUA.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="双阶段-3"><p>另一类分支, 有锚框的话会有大量超参使模型复杂度上升, 无锚框的话性能又会下降</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="模型构建流程">模型构建流程</h3><p>现阶段 AI 领域把很多算法模块化了, 提出的新算法大多也是对某一功能模块的改进, 构建一个大型模型可以像是装高达一样挑选合适的算法/网络模块进行组合.</p><p>mmdet 就是蛮复杂的, 抽象成了多个功能模块 <sup id='cite_ref-6'><a href="#cite_note-6">[6]</a></sup>, 每个功能模块又有多个实现算法.</p><p><img src="https://www.helloimg.com/images/2022/06/11/ZLwyeM.png" alt=""></p><p><img src="https://www.helloimg.com/images/2022/06/11/ZL05TP.png" alt=""></p><div class="tabs" id="backbone"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#backbone-1">backbone</button></li><li class="tab"><button type="button" data-href="#backbone-2">neck</button></li><li class="tab"><button type="button" data-href="#backbone-3">enhance</button></li><li class="tab"><button type="button" data-href="#backbone-4">head</button></li><li class="tab"><button type="button" data-href="#backbone-5">BBox</button></li><li class="tab"><button type="button" data-href="#backbone-6">tricks</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="backbone-1"><p>backbone (主干网络) 经常会在预训练模型选取时看到, 作用为<code>特征提取</code>, 常见的比如 50 层 ResNet -&gt; R-50</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="backbone-2"><p>neck 是对 backbone 提取的特征进行融合/增强, 然后传给 head. 常见的 neck 为 FPN (特征金字塔网络)</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="backbone-3"><blockquote><p>enhance 是即插即用、能够对特征进行增强的模块</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="backbone-4"><p>Head 检测头模块是对模型性能影响最显著的地方, 有框坐标回归和目标分类两个分支</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="backbone-5"><p>Bonding Box 是检测头模块的一个分支, 它的作用是对检测结果进行回归, 得到框坐标<br>功能模块有 BBox 分配 (进行正负样本定义或者正负样本分配),采样,编解码,后处理, 以及对应的 loss</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="backbone-6"><p>tricks 就是训练/测试的技巧/配置, 大部分的调参工作就是在调整这部分, 比如 batch, Lr, 数据增强等…</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="模型训练">模型训练</h3><p>MMDetection 基本结构: <code>依赖 + [模型] + 数据集 + 配置文件 -&gt; Trainable</code></p><h4 id="dataset-COCO">dataset-COCO</h4><p>数据集分很多格式, 常见的比如 COCO:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">dataset_type = <span class="string">&#x27;CocoDataset&#x27;</span></span><br><span class="line">data_root = <span class="string">&#x27;data/coco/&#x27;</span></span><br><span class="line">data = <span class="built_in">dict</span>(</span><br><span class="line">  samples_per_gpu=<span class="number">2</span>,</span><br><span class="line">  workers_per_gpu=<span class="number">2</span>,</span><br><span class="line">  train=<span class="built_in">dict</span>(</span><br><span class="line">    <span class="built_in">type</span>=dataset_type,</span><br><span class="line">    ann_file=data_root + <span class="string">&#x27;annotations/instances_train2017.json&#x27;</span>,</span><br><span class="line">    img_prefix=data_root + <span class="string">&#x27;train2017/&#x27;</span>,</span><br><span class="line">    pipeline=train_pipeline),</span><br><span class="line">  val=<span class="built_in">dict</span>(</span><br><span class="line">    <span class="built_in">type</span>=dataset_type,</span><br><span class="line">    ann_file=data_root + <span class="string">&#x27;annotations/instances_val2017.json&#x27;</span>,</span><br><span class="line">    img_prefix=data_root + <span class="string">&#x27;val2017/&#x27;</span>,</span><br><span class="line">    pipeline=test_pipeline),</span><br><span class="line">  test=<span class="built_in">dict</span>(</span><br><span class="line">    <span class="built_in">type</span>=dataset_type,</span><br><span class="line">    ann_file=data_root + <span class="string">&#x27;annotations/instances_val2017.json&#x27;</span>,</span><br><span class="line">    img_prefix=data_root + <span class="string">&#x27;val2017/&#x27;</span>,</span><br><span class="line">    pipeline=test_pipeline)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="pipeline">pipeline</h4><p><img src="https://www.helloimg.com/images/2022/05/30/Zezw9E.png" alt=""></p><h4 id="Lr-Scheduler">Lr-Scheduler</h4><p>Learning Rate Scheduler 学习率策略, 常见模型中标注的 <code>1x 2x</code></p><p><img src="https://www.helloimg.com/images/2022/05/30/Ze7rmt.png" alt=""></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="MMDetection3D">MMDetection3D</h2><p>入门一个技术, 需要大致概览一下, 正巧 MM-Lab 应时发布了教程 <sup id='cite_ref-4'><a href="#cite_note-4">[4]</a></sup></p><p>MMDetection3D 依赖于 MMDetection 和 MMSegmentation, 适用于检测和分割 3D 场景下的物体</p><p><img src="https://www.helloimg.com/images/2022/06/11/ZLvvN9.png" alt=""></p><p>点云 (point cloud) 数据是通过传感器获取的物体分布场景, 单目 3D 检测</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-33">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://mp.weixin.qq.com/s/Um8wAtdxPcVN8ACiVtSgFg">42 个激活函数的全面总结</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://discover304.top/2021/11/30/2021q4/107-1-dl-back/">【深度学习】基础 叁：反向传播算法</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://www.bilibili.com/video/BV1ou411k7fD">4 小时入门深度学习+实操 MMDetection 第一课</a></p><p><a name='cite_note-4' href='#cite_ref-4'>[4]</a>: <a href="https://zhuanlan.zhihu.com/p/478307528">带你玩转 3D 检测和分割（一）：MMDetection3D 整体框架介绍</a></p><p><a name='cite_note-5' href='#cite_ref-5'>[5]</a>: <a href="https://zhuanlan.zhihu.com/p/31426458">一文读懂 Faster RCNN</a></p><p><a name='cite_note-6' href='#cite_ref-6'>[6]</a>: <a href="https://zhuanlan.zhihu.com/p/337375549">轻松掌握 MMDetection 整体构建流程(一)</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> AI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 人工智能 </tag>
            
            <tag> 深度学习 </tag>
            
            <tag> doing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥵硬啃-Machine-Learning</title>
      <link href="/post/python/AI/ML/"/>
      <url>/post/python/AI/ML/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-06-14 21:16:45 * @FilePath: \Blog-private\source\_posts\python\AI\ML.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-lg"><ul><li>机器学习<ul><li><a href="#%E4%BD%95%E4%B8%BA%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0">何为机器学习</a></li><li><a href="#%E5%AD%A6%E4%B9%A0%E6%96%B9%E5%BC%8F">学习方式</a><ul><li>深度学习</li><li>监督<ul><li>监督学习</li><li>无监督学习</li></ul></li><li>强化学习</li></ul></li><li>一般流程<ul><li>1.原始数据</li><li><a href="#%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86">2.数据预处理</a><ul><li>问题<ul><li>完整性</li><li>噪声</li><li>是否匹配</li><li>重复</li><li>连续/离散</li><li>样本分布是否平衡</li></ul></li><li>方法<ul><li>标准化/均值移除</li><li>范围缩放</li><li>归一化</li><li>二值化</li><li>独热编码</li><li>标签编码</li></ul></li></ul></li><li>3.特征处理<ul><li>特征提取<ul><li>原始特征的线性组合获取新特征</li></ul></li><li>特征转换<ul><li>升维</li><li>降维</li></ul></li></ul></li><li>4.训练模型</li><li>5.预测</li><li>6.参数调整</li><li>7.模型评估与优化<ul><li><a href="#%E8%AF%84%E4%BC%B0%E6%96%B9%E6%B3%95">评估方法</a></li><li>优化方法</li></ul></li></ul></li><li><a href="#%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98">基本问题</a><ul><li>回归问题</li><li>分类问题</li><li>聚类问题</li><li>降维问题</li><li>强化问题</li></ul></li><li>三要素<ul><li>模型<ul><li>线性方法</li><li>非线性方法/广义线性方法</li></ul></li><li><a href="#%E8%B6%85%E5%8F%82%E7%9A%84%E5%AD%A6%E4%B9%A0-%E6%9B%B4%E6%96%B0">超参的学习-更新</a><ul><li>损失函数</li><li>期望风险<ul><li>期望风险未知,通过经验风险近似</li><li>机器学习问题 -&gt; 经验风险最小化问题</li></ul></li><li>过-欠拟合及处理</li><li>参数学习<ul><li>经验风险最小化(最小二乘法)</li><li>结构风险最小化(岭回归)</li><li>最大似然估计</li><li>最大后验估计</li></ul></li></ul></li><li><a href="#%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95">优化算法</a></li></ul></li></ul></li></ul></blockquote><h2 id="代码">代码</h2><blockquote><p>本篇所用到的代码在这: <a href="../../code/ML">👀Code-4-Machine-Learning</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="何为机器学习">何为机器学习</h2><ul><li><p>随机取市场上一些芒果样本为训练数据,教给机器怎么判断好坏</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>品质</mtext><mo>=</mo><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mo stretchy="false">(</mo><mo stretchy="false">[</mo><mtext>特征</mtext><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">品质 = func([特征])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">品质</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">c</span><span class="mopen">([</span><span class="mord cjk_fallback">特征</span><span class="mclose">])</span></span></span></span></span></p><p><code>输入为特征</code>: [颜色, 大小, 形状, 产地, 品牌]</p><p><code>输出为品质</code>: [好, 坏]</p><hr></li></ul><p>训练模型时, 输入输出都告诉它, 让它自动学会建立 <code>特征&lt;-&gt;品质</code> 之间的关系</p><p>下次买芒果时可以根据要购买芒果的特征,使用此模型预测芒果的品质</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="学习方式">学习方式</h2><h3 id="区分有-无监督学习">区分有-无监督学习</h3><p>三方面区别: <sup id='cite_ref-3'><a href="#cite_note-3">[3]</a></sup>, 也有混合形式的半监督学习</p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">监督学习(supervised)</th><th style="text-align:center">无监督学习(self-supervised)</th></tr></thead><tbody><tr><td style="text-align:center">训练数据</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mtext>样本</mtext></msub><mo separator="true">,</mo><msub><mi>y</mi><mtext>标签</mtext></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_{样本}, y_{标签})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">样本</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">标签</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mtext>样本</mtext></msub></mrow><annotation encoding="application/x-tex">x_{样本}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">样本</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td></tr><tr><td style="text-align:center">学习目标</td><td style="text-align:center">映射关系 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⇒</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \rArr y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></td><td style="text-align:center">x 的内在结构</td></tr><tr><td style="text-align:center">适用场景</td><td style="text-align:center">分割/检测/回归(标签连续)/分类(离散)</td><td style="text-align:center">聚类、特征学习或密度估计</td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="强化学习-RL">强化学习-RL</h3><ul><li><p>Reinforcement Learning:</p><p>我们不清楚如何标记样本/无法说明什么样本数据特征是更好的,但是可以指明什么是好的终点</p><p>比如围棋,没啥可标记的数据, 也很难说明哪一步更好,只能指明<code>快点赢</code>为最终结果</p><p>对不同决策结果进行赏罚,使结果趋近期望结果</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="数据预处理">数据预处理</h2><h3 id="均值移除">均值移除</h3><p>把一组数据的<code>均值和标准差</code>由 <code>x, y -&gt; 0, 1</code></p><p>例如有一组数据 sample = [a,b,c]</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>均值</mtext><mi>m</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>c</mi></mrow><mn>3</mn></mfrac><mo>=</mo><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>标准差</mtext><mi>s</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msqrt><mfrac><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>−</mo><mi>m</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>b</mi><mo>−</mo><mi>m</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>c</mi><mo>−</mo><mi>m</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mn>3</mn></mfrac></msqrt><mo>=</mo><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>令</mtext><mi>s</mi><mi>t</mi><mi>d</mi><mi mathvariant="normal">_</mi><mi>s</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">[</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo separator="true">,</mo><msup><mi>b</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo separator="true">,</mo><msup><mi>c</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">[</mo><mfrac><mrow><mi>a</mi><mo>−</mo><mi>m</mi></mrow><mi>s</mi></mfrac><mo separator="true">,</mo><mfrac><mrow><mi>b</mi><mo>−</mo><mi>m</mi></mrow><mi>s</mi></mfrac><mo separator="true">,</mo><mfrac><mrow><mi>c</mi><mo>−</mo><mi>m</mi></mrow><mi>s</mi></mfrac><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>数据标准化后</mtext><msup><mi>m</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>+</mo><msup><mi>b</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>+</mo><msup><mi>c</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><mn>3</mn></mfrac><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mi>b</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mi>c</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><mrow><mn>3</mn><mi>s</mi></mrow></mfrac><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msqrt><mfrac><mrow><mo stretchy="false">(</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>−</mo><msup><mi>m</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msup><mi>b</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>−</mo><msup><mi>m</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msup><mi>c</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>−</mo><msup><mi>m</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mn>3</mn></mfrac></msqrt><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  均值 m  &amp;= \frac{a+b+c}{3} = x  \\ \ \\  标准差 s  &amp;= \sqrt{\frac{(a-m)^2 + (b-m)^2 + (c-m)^2}{3}} = y  \\ \ \\  令std\_sample  &amp;= [a&#x27;,b&#x27;,c&#x27;]  \\ &amp;= [ \frac{a - m}{s} , \frac{b - m}{s} , \frac{c - m}{s} ]  \\ \ \\  数据标准化后 m&#x27;  &amp;= \frac{a&#x27; + b&#x27; + c&#x27; }{3} = \frac{(a-m) + (b -m) + (c - m) }{3s} = 0  \\ \ \\  s&#x27;  &amp;= \sqrt{\frac{(a&#x27;-m&#x27;)^2 + (b&#x27;-m&#x27;)^2 + (c&#x27;-m&#x27;)^2}{3}} = 1\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:20.1098em;vertical-align:-9.8049em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:10.3049em;"><span style="top:-12.6378em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mord cjk_fallback">均值</span><span class="mord mathnormal">m</span></span></span><span style="top:-10.8118em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:-8.4474em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mord cjk_fallback">标准差</span><span class="mord mathnormal">s</span></span></span><span style="top:-6.5718em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:-5.0718em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mord cjk_fallback">令</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">d</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">s</span><span class="mord mathnormal">am</span><span class="mord mathnormal" style="margin-right:0.01968em;">pl</span><span class="mord mathnormal">e</span></span></span><span style="top:-3.0404em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"></span></span><span style="top:-1.2144em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:0.8745em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mord cjk_fallback">数据标准化后</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span><span style="top:2.7005em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:5.0649em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:9.8049em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:10.3049em;"><span style="top:-12.6378em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">x</span></span></span><span style="top:-8.4474em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7044em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.6644em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='2.48em' viewBox='0 0 400000 2592' preserveAspectRatio='xMinYMin slice'><path d='M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7356em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-5.0718em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">]</span></span></span><span style="top:-3.0404em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">]</span></span></span><span style="top:0.8745em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4289em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal">s</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:5.0649em;"><span class="pstrut" style="height:3.7044em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7044em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6779em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6779em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6779em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6779em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6779em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6779em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.6644em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='2.48em' viewBox='0 0 400000 2592' preserveAspectRatio='xMinYMin slice'><path d='M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7356em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:9.8049em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="范围缩放">范围缩放</h3><p>对于 sample = [a,b,c] , min=a, max=c</p><ol><li><p>兜底,让 min=0</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>s</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><msup><mi>e</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mo stretchy="false">[</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo separator="true">,</mo><msup><mi>b</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo separator="true">,</mo><msup><mi>c</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">]</mo><mo>=</mo><mo stretchy="false">[</mo><mi>a</mi><mo>−</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo>−</mo><mi>a</mi><mo separator="true">,</mo><mi>c</mi><mo>−</mo><mi>a</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">sample&#x27; = [a&#x27; , b&#x27; , c&#x27; ] = [a-a, b-a, c-a]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9963em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">am</span><span class="mord mathnormal" style="margin-right:0.01968em;">pl</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0519em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mclose">]</span></span></span></span></span></p></li><li><p>缩放,把范围控制在 [0,1]</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>s</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><msup><mi>e</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">[</mo><mfrac><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mi>c</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mfrac><mo separator="true">,</mo><mfrac><msup><mi>b</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mi>c</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mfrac><mo separator="true">,</mo><mfrac><msup><mi>c</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mi>c</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mfrac><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">[</mo><mfrac><mrow><mi>a</mi><mo>−</mo><mi>a</mi></mrow><mrow><mi>c</mi><mo>−</mo><mi>a</mi></mrow></mfrac><mo separator="true">,</mo><mfrac><mrow><mi>b</mi><mo>−</mo><mi>a</mi></mrow><mrow><mi>c</mi><mo>−</mo><mi>a</mi></mrow></mfrac><mo separator="true">,</mo><mfrac><mrow><mi>c</mi><mo>−</mo><mi>a</mi></mrow><mrow><mi>c</mi><mo>−</mo><mi>a</mi></mrow></mfrac><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mfrac><mrow><mi>b</mi><mo>−</mo><mi>a</mi></mrow><mrow><mi>c</mi><mo>−</mo><mi>a</mi></mrow></mfrac><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}sample&#x27;&#x27; &amp;= [\frac{a&#x27;}{c&#x27;}, \frac{b&#x27;}{c&#x27;}, \frac{c&#x27;}{c&#x27;} ]\\ &amp;= [\frac{a-a}{c-a}, \frac{b-a}{c-a}, \frac{c-a}{c-a} ]\\ &amp;= [0, \frac{b-a}{c-a}, 1 ]\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.2964em;vertical-align:-3.3982em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8982em;"><span style="top:-5.8982em;"><span class="pstrut" style="height:3.4289em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="mord mathnormal">am</span><span class="mord mathnormal" style="margin-right:0.01968em;">pl</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.5408em;"><span class="pstrut" style="height:3.4289em;"></span><span class="mord"></span></span><span style="top:-1.1em;"><span class="pstrut" style="height:3.4289em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.3982em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8982em;"><span style="top:-5.8982em;"><span class="pstrut" style="height:3.4289em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4289em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6779em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4289em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6779em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4289em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6779em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">]</span></span></span><span style="top:-3.5408em;"><span class="pstrut" style="height:3.4289em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">a</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">a</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">a</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">]</span></span></span><span style="top:-1.1em;"><span class="pstrut" style="height:3.4289em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">a</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.3982em;"><span></span></span></span></span></span></span></span></span></span></span></span></p></li></ol><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="归一化">归一化</h3><p>转化后的数据在 [0,1] , 反应某数据在当前行所占比重</p><p>例:对于 sample 某 row 中的值 a</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mfrac><mi>a</mi><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi mathvariant="normal">∣</mi><mi>r</mi><mi>o</mi><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mi mathvariant="normal">∣</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">a&#x27; = \frac{a}{\sum_{i=1}^n |row[i]|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8019em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1016em;vertical-align:-0.994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.3057em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣</span><span class="mord mathnormal">ro</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mord">∣</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="二值化">二值化</h3><p>设置阈值,大于阈值的设为 1,小于阈值的设为 0</p><p>没啥可说的…不举例了</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="OneHot-独热编码">OneHot-独热编码</h3><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>男</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>足球</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>女</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>篮球</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>20</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>男</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>桌球</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>30</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>女</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>网球</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix}  男 &amp; 足球 &amp; 10\\  女 &amp; 篮球 &amp; 20\\  男 &amp; 桌球 &amp; 30\\  女 &amp; 网球 &amp; 10\\\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.8001em;vertical-align:-2.15em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-1.711em;"><span class="pstrut" style="height:3.216em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.858em;"><span class="pstrut" style="height:3.216em;"></span><span style="height:1.216em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.6667em' height='1.216em' style='width:0.6667em' viewBox='0 0 666.67 1216' preserveAspectRatio='xMinYMin'><path d='M319 0 H403 V1216 H319z M319 0 H403 V1216 H319z'/></svg></span></span><span style="top:-4.7111em;"><span class="pstrut" style="height:3.216em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">男</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">女</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">男</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">女</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">足球</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">篮球</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">桌球</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">网球</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">10</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">20</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">30</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">10</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-1.711em;"><span class="pstrut" style="height:3.216em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.858em;"><span class="pstrut" style="height:3.216em;"></span><span style="height:1.216em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.6667em' height='1.216em' style='width:0.6667em' viewBox='0 0 666.67 1216' preserveAspectRatio='xMinYMin'><path d='M263 0 H347 V1216 H263z M263 0 H347 V1216 H263z'/></svg></span></span><span style="top:-4.7111em;"><span class="pstrut" style="height:3.216em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li><p>对于离散数据的分类任务, 我们常需要做<code>特征数字化</code>: <sup id='cite_ref-4'><a href="#cite_note-4">[4]</a></sup></p><p>对于某一列数据中有 n 种类型, 就用 n 位编码表示,不同类型使用不同激活位,如下:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1000</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>100</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>01</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0100</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>010</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0010</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>001</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>01</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0001</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>100</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix}  10 &amp; 1000 &amp; 100\\  01 &amp; 0100 &amp; 010\\  10 &amp; 0010 &amp; 001\\  01 &amp; 0001 &amp; 100\\\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.8001em;vertical-align:-2.15em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-1.711em;"><span class="pstrut" style="height:3.216em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.858em;"><span class="pstrut" style="height:3.216em;"></span><span style="height:1.216em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.6667em' height='1.216em' style='width:0.6667em' viewBox='0 0 666.67 1216' preserveAspectRatio='xMinYMin'><path d='M319 0 H403 V1216 H319z M319 0 H403 V1216 H319z'/></svg></span></span><span style="top:-4.7111em;"><span class="pstrut" style="height:3.216em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">10</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">01</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">10</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">01</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1000</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0100</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0010</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0001</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">100</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">010</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">001</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">100</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-1.711em;"><span class="pstrut" style="height:3.216em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.858em;"><span class="pstrut" style="height:3.216em;"></span><span style="height:1.216em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.6667em' height='1.216em' style='width:0.6667em' viewBox='0 0 666.67 1216' preserveAspectRatio='xMinYMin'><path d='M263 0 H347 V1216 H263z M263 0 H347 V1216 H263z'/></svg></span></span><span style="top:-4.7111em;"><span class="pstrut" style="height:3.216em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span></span></span></span></span></span></span></p></li><li><p>关于为什么这么做? 直接[0,0,0], [0,1,2] 这种表示不行吗?</p><p>上面 row1 和 row3 都是男, 问题在于我们无法单纯通过 1 和 3 这俩数字来判断他俩是否是同一类型的</p><p>对于编码后的,想找’男’这个类型,只需要查找第一位是’1’的数据</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="标签编码">标签编码</h3><p>可以理解为上面独热编码的子步骤,一言以蔽之:</p><p>[红,黄,蓝,黄] -&gt; [1,2,3,2]</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="评估方法">评估方法</h2><ul><li><p>平均绝对误差</p></li><li><p>均方误差</p></li><li><p>中位数绝对误差</p></li><li><p>R2 决定系数</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>令</mtext><msub><mi>y</mi><mi>i</mi></msub><mtext>表示真实值</mtext><mo separator="true">,</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><mtext>表示预测值</mtext><mo separator="true">,</mo><mover accent="true"><mi>y</mi><mo stretchy="true">‾</mo></mover><mtext>为平均值</mtext><mspace linebreak="newline"></mspace><mtext> </mtext><mspace linebreak="newline"></mspace><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>回归平方和</mtext><mi>S</mi><mi>S</mi><mi>R</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><mo>−</mo><mover accent="true"><mi>y</mi><mo stretchy="true">‾</mo></mover><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>残差平方和</mtext><mi>S</mi><mi>S</mi><mi>E</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>总离差平方和</mtext><mi>S</mi><mi>S</mi><mi>T</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>S</mi><mi>S</mi><mi>R</mi><mo>+</mo><mi>S</mi><mi>S</mi><mi>E</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><mover accent="true"><mi>y</mi><mo stretchy="true">‾</mo></mover><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>R</mi><mn>2</mn><mtext>决定系数</mtext><mo>:</mo><msup><mi>R</mi><mn>2</mn></msup></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>1</mn><mo>−</mo><mfrac><mrow><mi>S</mi><mi>S</mi><mi>E</mi></mrow><mrow><mi>S</mi><mi>S</mi><mi>T</mi></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">令 y_i 表示真实值, \hat y_i 表示预测值, \overline y 为平均值\\ \ \\\begin{aligned}  回归平方和 SSR  &amp;= \sum_{i=1}^n (\hat y_i - \overline y)^2 \\  残差平方和 SSE  &amp;= \sum_{i=1}^n (y_i - \hat y_i)^2 \\  总离差平方和 SST  &amp;= SSR + SSE \\  &amp;= \sum_{i=1}^n (y_i - \overline y)^2  \\ \ \\  R2决定系数: R^2  &amp;= 1 - \frac{SSE}{SST}\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">令</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">表示真实值</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">表示预测值</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6306em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.5506em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mord cjk_fallback">为平均值</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0em;"></span><span class="mspace"> </span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:15.0335em;vertical-align:-7.2668em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.7668em;"><span style="top:-9.7668em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord cjk_fallback">回归平方和</span><span class="mord mathnormal" style="margin-right:0.00773em;">SSR</span></span></span><span style="top:-6.5377em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord cjk_fallback">残差平方和</span><span class="mord mathnormal" style="margin-right:0.05764em;">SSE</span></span></span><span style="top:-4.12em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord cjk_fallback">总离差平方和</span><span class="mord mathnormal" style="margin-right:0.13889em;">SST</span></span></span><span style="top:-1.8086em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span><span style="top:0.609em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:2.6294em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord">2</span><span class="mord cjk_fallback">决定系数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:7.2668em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.7668em;"><span style="top:-9.7668em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6306em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.5506em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-6.5377em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-4.12em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">SSR</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">SSE</span></span></span><span style="top:-1.8086em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6306em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.5506em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:2.6294em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">SST</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">SSE</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:7.2668em;"><span></span></span></span></span></span></span></span></span></span></span></span></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="基本问题">基本问题</h2><ul><li><p>回归-分类问题</p><p><img src="https://www.helloimg.com/images/2022/04/08/RsMidr.png" alt=""></p><p>回归: 输出连续, 例如预测房价股价</p><p>分类: 输出离散, 例如产品质量好坏检测,手写体识别</p></li><li><p>聚类: 把输入数据相似度高的堆一起</p><p>例如把各种水果照片聚类出来,分出品种</p><p>对于购物网站, 可以根据用户对商品的喜好度, 搞出<code>推荐算法</code></p></li><li><p>降维问题</p></li></ul><blockquote><p>借个图 <sup id='cite_ref-6'><a href="#cite_note-6">[6]</a></sup> &gt; <img src="https://www.helloimg.com/images/2022/04/26/RlX7Tb.png" alt=""></p></blockquote><hr><h3 id="回归问题">回归问题</h3><h4 id="线性回归">线性回归</h4><p>对于输入的属性 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>3</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x=(x_1,x_2,x_3...x_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>,输出 y 为:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left right" columnspacing="0em 1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>y</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>w</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>w</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>w</mi><mi>n</mi></msub><msub><mi>x</mi><mi>n</mi></msub><mo>+</mo><mi>b</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mtext>多项式形式</mtext><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>w</mi><mi>T</mi></msup><mi>x</mi><mo>+</mo><mi>b</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mtext>向量形式</mtext><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  y  &amp;= w_1 x_1 + w_2 x_2 + ... w_n x_n + b &amp; (多项式形式) \\  &amp;= w^T x + b &amp; (向量形式)\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.0513em;vertical-align:-1.2757em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7757em;"><span style="top:-3.9357em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.3843em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2757em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7757em;"><span style="top:-3.9357em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">b</span></span></span><span style="top:-2.3843em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2757em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7757em;"><span style="top:-3.9357em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord cjk_fallback">多项式形式</span><span class="mclose">)</span></span></span><span style="top:-2.3843em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord cjk_fallback">向量形式</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2757em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>其中 权重 w 与 b 是通过学习后模型确定的</p><p>学习: 寻找最小的损失函数 loss -&gt; 最优线性模型</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h4 id="多项式回归">多项式回归</h4><p>从几何角度理解就是把直线变成了曲线</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>y</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>w</mi><mn>0</mn></msub><mo>+</mo><msub><mi>w</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>w</mi><mn>2</mn></msub><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>w</mi><mi>n</mi></msub><msup><mi>x</mi><mi>n</mi></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>w</mi><mi>i</mi></msub><msup><mi>x</mi><mi>i</mi></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  y  &amp;= w_0 + w_1 x + w_2 x^2 + ... w_n x^n \\  &amp;= \sum_{i=1}^{n} w_i x^i\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.7532em;vertical-align:-2.1266em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6266em;"><span style="top:-5.4139em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.1025em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1266em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6266em;"><span style="top:-5.4139em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.1025em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8747em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1266em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h4 id="Lasso-岭回归">Lasso-岭回归</h4><p>Lasso 和 岭 这两种都是在线性回归基础上对损失函数正则化的回归算法, 降低了偏差大的样本权重, <code>防止过拟合</code></p><ul><li><p>Lasso (Least absolute shrinkage and selection operator, 最小绝对值收敛和选择算法/套索算法), 使用 L1 正则</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="script">L</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mi>λ</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>w</mi><mi mathvariant="normal">∣</mi><msub><mi mathvariant="normal">∣</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\mathcal{L} = \frac{1}{2} \sum_{i=1}^{n} (y_i - \hat{y}_i)^2+ \lambda ||w||_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">λ</span><span class="mord">∣∣</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><hr></li><li><p>岭回归 (Ridge regression), 用 L2 正则</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="script">L</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mi>λ</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>w</mi><mi mathvariant="normal">∣</mi><msub><mi mathvariant="normal">∣</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\mathcal{L} = \frac{1}{2} \sum_{i=1}^{n} (y_i - \hat{y}_i)^2+ \lambda ||w||_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">λ</span><span class="mord">∣∣</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="决策树-随机森林">决策树-随机森林</h3><p>decision tree, 决策树可用于 classification + regression; 学习决策树需要用到<a href="../../experience/basic/%E9%80%9A%E4%BF%A1%E6%8A%80%E6%9C%AF#%E4%BF%A1%E6%81%AF%E7%86%B5-%E5%A6%82%E4%BD%95%E5%BA%A6%E9%87%8F%E4%BF%A1%E6%81%AF">信息论知识</a> 参考课程: <sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p><h4 id="简化概念">简化概念</h4><ul><li><p>CART 决策树选择算法</p><p><img src="https://www.helloimg.com/images/2022/04/11/RtsbJ9.png" alt=""></p></li><li><p>随机森林</p><p>不同的特征选择方式产生不同的决策树,组在一起就是随机森林</p><p><img src="https://www.helloimg.com/images/2022/04/11/RtsWMP.png" alt=""></p></li></ul><hr><h4 id="分类-2">分类</h4><ul><li><p>我们想对一组 iris 数据做花种分类</p><p>有 setosa,versicolor,virginica 三类</p><p>鉴于 2d 展示图易观察,我们只取前两列 (花萼长度,宽度) 作为输入,最后一列作为输出,训练模型</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">4</span>.<span class="number">8</span>,<span class="number">3</span>.<span class="number">0</span>,<span class="number">1</span>.<span class="number">4</span>,<span class="number">0</span>.<span class="number">3</span>,Iris-setosa</span><br><span class="line"><span class="attribute">5</span>.<span class="number">1</span>,<span class="number">3</span>.<span class="number">8</span>,<span class="number">1</span>.<span class="number">6</span>,<span class="number">0</span>.<span class="number">2</span>,Iris-setosa</span><br><span class="line"><span class="attribute">4</span>.<span class="number">6</span>,<span class="number">3</span>.<span class="number">2</span>,<span class="number">1</span>.<span class="number">4</span>,<span class="number">0</span>.<span class="number">2</span>,Iris-setosa</span><br><span class="line"><span class="attribute">5</span>.<span class="number">0</span>,<span class="number">3</span>.<span class="number">3</span>,<span class="number">1</span>.<span class="number">4</span>,<span class="number">0</span>.<span class="number">2</span>,Iris-setosa</span><br><span class="line"><span class="attribute">7</span>.<span class="number">0</span>,<span class="number">3</span>.<span class="number">2</span>,<span class="number">4</span>.<span class="number">7</span>,<span class="number">1</span>.<span class="number">4</span>,Iris-versicolor</span><br><span class="line"><span class="attribute">6</span>.<span class="number">4</span>,<span class="number">3</span>.<span class="number">2</span>,<span class="number">4</span>.<span class="number">5</span>,<span class="number">1</span>.<span class="number">5</span>,Iris-versicolor</span><br><span class="line"><span class="attribute">6</span>.<span class="number">2</span>,<span class="number">2</span>.<span class="number">9</span>,<span class="number">4</span>.<span class="number">3</span>,<span class="number">1</span>.<span class="number">3</span>,Iris-versicolor</span><br><span class="line"><span class="attribute">5</span>.<span class="number">1</span>,<span class="number">2</span>.<span class="number">5</span>,<span class="number">3</span>.<span class="number">0</span>,<span class="number">1</span>.<span class="number">1</span>,Iris-versicolor</span><br><span class="line"><span class="attribute">5</span>.<span class="number">7</span>,<span class="number">2</span>.<span class="number">8</span>,<span class="number">4</span>.<span class="number">1</span>,<span class="number">1</span>.<span class="number">3</span>,Iris-versicolor</span><br><span class="line"><span class="attribute">5</span>.<span class="number">8</span>,<span class="number">2</span>.<span class="number">7</span>,<span class="number">5</span>.<span class="number">1</span>,<span class="number">1</span>.<span class="number">9</span>,Iris-virginica</span><br><span class="line"><span class="attribute">7</span>.<span class="number">1</span>,<span class="number">3</span>.<span class="number">0</span>,<span class="number">5</span>.<span class="number">9</span>,<span class="number">2</span>.<span class="number">1</span>,Iris-virginica</span><br><span class="line"><span class="attribute">6</span>.<span class="number">3</span>,<span class="number">2</span>.<span class="number">9</span>,<span class="number">5</span>.<span class="number">6</span>,<span class="number">1</span>.<span class="number">8</span>,Iris-virginica</span><br><span class="line"><span class="attribute">6</span>.<span class="number">5</span>,<span class="number">3</span>.<span class="number">0</span>,<span class="number">5</span>.<span class="number">8</span>,<span class="number">2</span>.<span class="number">2</span>,Iris-virginica</span><br></pre></td></tr></table></figure><p>下图为训练数据(点) 和 测试数据(星) 的分布</p><p><img src="https://www.helloimg.com/images/2022/04/13/R4evt0.png" alt=""></p><p>模型的决策树如下 (颜色表示类别, 颜色深度表示确定程度)</p><p><img src="https://www.helloimg.com/images/2022/04/13/R4edC5.png" alt=""></p><hr></li><li><p>下面来分析一下决策树如何分类的:</p><p><img src="https://www.helloimg.com/images/2022/04/13/R4eQqc.png" alt=""></p><p>根节点选取了 105 个输入, 其中最多的是 virginica 37 个, class=virginica</p><p>暂且不看每个节点的熵 entropy 是怎么计算的,看一下比较:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>H</mi><mtext>差</mtext></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>H</mi><mo stretchy="false">(</mo><mi>X</mi><msub><mo stretchy="false">)</mo><mtext>根节点熵</mtext></msub><mo>−</mo><mi>H</mi><mo stretchy="false">(</mo><mi>X</mi><mi mathvariant="normal">∣</mi><mi>Y</mi><msub><mo stretchy="false">)</mo><mtext>子节点条件熵和</mtext></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>1.58</mn><msub><mn>2</mn><mtext>根节点熵</mtext></msub><mo>−</mo><msub><mrow><mo fence="true">(</mo><mfrac><mrow><mn>33</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>1</mn></mrow><mn>105</mn></mfrac><mo>⋅</mo><mn>0.657</mn><mo>+</mo><mfrac><mrow><mn>3</mn><mo>+</mo><mn>28</mn><mo>+</mo><mn>36</mn></mrow><mn>105</mn></mfrac><mo>⋅</mo><mn>1.208</mn><mo fence="true">)</mo></mrow><mtext>子节点条件熵和</mtext></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>0.573</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  H_差  &amp;= H(X)_{根节点熵} - H(X|Y)_{子节点条件熵和} \\  &amp;= 1.582_{根节点熵} - \left( \frac{33+4+1}{105} \cdot 0.657 + \frac{3+28+36}{105} \cdot 1.208 \right)_{子节点条件熵和} \\  &amp;= 0.573\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.7497em;vertical-align:-2.6249em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1249em;"><span style="top:-5.7349em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">差</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.6249em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"></span></span><span style="top:-1.4851em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.6249em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1249em;"><span style="top:-5.7349em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">根节点熵</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">子节点条件熵和</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.6249em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1.58</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">根节点熵</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">105</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">33</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0.657</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">105</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">28</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">36</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1.208</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.5214em;"><span style="top:-1.7003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">子节点条件熵和</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9997em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.4851em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0.573</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.6249em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>决策树就是通过一层层的 <code>条件 Y</code> (如 sepal lenth &lt;= 5.45) 来减小熵,增大确定性来解决分类确定度问题</p><p><img src="https://www.helloimg.com/images/2022/04/13/R4tSlC.png" alt=""></p><p>最后的叶子节点的熵会趋近于 0 (非常确定) 和 1 (非常不确定) 的两点分布</p></li></ul><hr><h4 id="信息增益">信息增益</h4><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>杜撰一个概念</mtext><mo>:</mo><mtext>信息增益</mtext><mi>g</mi><mi>a</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>H</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>−</mo><mi>H</mi><mo stretchy="false">(</mo><mi>X</mi><mi mathvariant="normal">∣</mi><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">杜撰一个概念: 信息增益 gain(X,Y) = H(X) - H(X|Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">杜撰一个概念</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">信息增益</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">ain</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span></span></span></p><ul><li><p>通过上面分类的例子可知, <code>gain(X,Y)</code> 就是熵下降/确定度增加的关键</p><p>回过头来,条件 Y (如 sepal lenth &lt;= 5.45) 是怎么选取的?</p><p>遍历特征组和取值区间,找到 max( gain(X,Y) ),即为熵下降最多的条件;</p><p>(当然也需要考虑到类似贪心-DP 的区别, 全是贪心的话会让模型单一化, 所以很多时候需要<code>随机筛掉一部分条件</code>来使得条件<code>较优</code>而不是<code>最优</code>)</p></li></ul><hr><h4 id="深度与过拟合">深度与过拟合</h4><p>深度增加虽然能降低训练集错误率,但泛化能力会减弱-&gt;过拟合</p><p><img src="https://www.helloimg.com/images/2022/04/13/R4453D.png" alt=""></p><hr><h4 id="随机森林">随机森林</h4><ul><li><p>自动聚合-BootStrap</p><p>对训练数据集进行多次有放回的随机采样 (有的样本可能从未采样,有的可能采样多次) -&gt; 随机森林 [DT1, DT2… DTn]</p></li><li><p>如何 roll 出来数据集中部分随机数据? (比如取 80%)</p><ol><li><p>for i in dataset</p></li><li><p>if Math.random() &lt; 0.8: random_set.append(i)</p></li></ol></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="分类问题">分类问题</h3><p>从思想和实现角度看, 有下面很多种分类</p><ul><li>线性模型 (Linear Models)<ul><li>逻辑回归 (Logistic Regression)</li></ul></li><li>朴素贝叶斯 (Naive Bayes)</li><li>决策树 (Decision Trees)</li><li>支持向量机 (Support Vector Machines)</li><li>随机梯度下降 (Stochastic Gradient Descent)</li><li>最近邻 (Nearest Neighbors)</li><li>高斯过程 (Gaussian Processes)</li><li>集成方法/投票分类器 (Ensemble methods / voting classifier)</li><li>多类别多输出 / 多类别多标签分类 (Multiclass and multioutput algorithms / multiclass and multilabel classification)</li></ul><hr><h4 id="逻辑回归">逻辑回归</h4><p>虽然叫回归,但其实是<code>二分类模型</code>,是在线性回归输出基础上使用 Sigmoid/逻辑函数,将线性回归输出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo>−</mo><mi mathvariant="normal">∞</mi><mo separator="true">,</mo><mi mathvariant="normal">∞</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(-\infty,\infty)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">∞</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∞</span><span class="mclose">)</span></span></span></span> 映射到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(0,1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>线性回归</mtext><mi>y</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>w</mi><mi>T</mi></msup><mi>x</mi><mo>+</mo><mi>b</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>w</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>w</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><msub><mi>w</mi><mn>3</mn></msub><msub><mi>x</mi><mn>3</mn></msub><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><mi>b</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>逻辑回归</mtext><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>S</mi><mi>i</mi><mi>g</mi><mi>m</mi><mi>o</mi><mi>i</mi><mi>d</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>y</mi></mrow></msup></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  线性回归 y  &amp;= w^Tx + b \\  &amp;= w_1x_1 + w_2x_2 + w_3x_3 + ... +  b  \\ \ \\  逻辑回归 y&#x27;  &amp;= Sigmoid(y) \\  &amp;= \frac{1}{1 + e^{-y}}\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:8.4421em;vertical-align:-3.9711em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.4711em;"><span style="top:-6.9012em;"><span class="pstrut" style="height:3.3214em;"></span><span class="mord"><span class="mord cjk_fallback">线性回归</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-5.4012em;"><span class="pstrut" style="height:3.3214em;"></span><span class="mord"></span></span><span style="top:-3.9012em;"><span class="pstrut" style="height:3.3214em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:-2.4012em;"><span class="pstrut" style="height:3.3214em;"></span><span class="mord"><span class="mord cjk_fallback">逻辑回归</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span><span style="top:-0.4197em;"><span class="pstrut" style="height:3.3214em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.9711em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.4711em;"><span style="top:-6.9012em;"><span class="pstrut" style="height:3.3214em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">b</span></span></span><span style="top:-5.4012em;"><span class="pstrut" style="height:3.3214em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">b</span></span></span><span style="top:-2.4012em;"><span class="pstrut" style="height:3.3214em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span><span style="top:-0.4197em;"><span class="pstrut" style="height:3.3214em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6973em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.9711em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>逻辑回归也是可以做多分类的, 原理就是多个二分类叠加起来</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h4 id="支持向量机-SVM">支持向量机-SVM</h4><h5 id="target">target</h5><p>SVM 目标就是找到如下红色实线 (与线两边样本点距离最大的线)</p><p>两条虚线上的点叫做 <code>support vector / 支持向量</code>, 通过支持向量构造出的分类器就是 <code>支持向量机 SVM</code></p><p><img src="https://www.helloimg.com/images/2022/04/15/RSmQRP.png" alt=""></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>如有直线</mtext><mn>2</mn><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><mn>5</mn><msub><mi>x</mi><mn>2</mn></msub><mo>−</mo><mn>10</mn><mo>=</mo><mn>0</mn><mtext>可转换为向量形式</mtext><mspace linebreak="newline"></mspace><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo>=</mo><mo stretchy="false">(</mo><mn>2</mn><mo separator="true">,</mo><mn>5</mn><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo>=</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo>⋅</mo><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo>+</mo><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">如有直线 2x_1 + 5x_2 - 10 = 0 可转换为向量形式 \\\vec{w} = (2,5) \\\vec{x} = (x_1,x_2) \\\vec{w} \cdot \vec{x} + b = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord cjk_fallback">如有直线</span><span class="mord">2</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7944em;vertical-align:-0.15em;"></span><span class="mord">5</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">0</span><span class="mord cjk_fallback">可转换为向量形式</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.714em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.714em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.714em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7973em;vertical-align:-0.0833em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span></p><hr><h5 id="线性可分-不可分">线性可分-不可分</h5><p>如上面的图示, 样本可被直线/超平面分开 (线性可分), 支持向量所在两虚线之间没有其他向量,即为 <code>线性可分 SVM</code></p><p>如果两虚线间存在样本, 即为 <code>线性 SVM</code>; 如果样本无法被直线/超平面分开 (线性不可分), 即为 <code>非线性 SVM</code></p><p><img src="https://www.helloimg.com/images/2022/04/15/Riakiv.png" alt=""></p><p>对于线性不可分问题,可通过 <code>核函数</code> 进行特征变换来 <code>升维</code></p><hr><h5 id="核函数">核函数</h5><p>常用的有为 1 和 3, 多项式核函数用处较少</p><ol><li><p>线性核函数 Linear</p><p>不做升维,直接找直线/超平面; 类似美国地图,分割直来直去的</p><p><img src="https://www.helloimg.com/images/2022/04/16/RiXoc0.png" alt=""></p></li><li><p>多项式核函数 poly (Polynomial Kernel)</p><p>通过增加高次项升维, 此函数复杂度升的很快</p></li><li><p>径向基核函数-高斯核函数 rbf (Radial Basis Function Kernel)</p><p>相对于多项式核函数,大多数情况下参数更少性能更高; 直线分不了的无脑冲 rbf</p><p><img src="https://www.helloimg.com/images/2022/04/16/RiXFVm.png" alt=""></p></li></ol><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h4 id="朴素贝叶斯">朴素贝叶斯</h4><p>Naive Bayes classification,理论基础是大学必修课-概率论知识</p><ul><li><p>&quot;朴素&quot;指的是 A,B 为独立事件, 有贝叶斯公式:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mi mathvariant="normal">∣</mi><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mi mathvariant="normal">∣</mi><mi>A</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">P(A|B) = \frac{P(A)P(B|A)}{P(B)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord">∣</span><span class="mord mathnormal">A</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p><code>先验概率</code> P(A) : 已知或可推断出事件 A 发生的概率</p><p><code>后验概率</code> P(A|B) : 已知 B 发生条件下,A 发生的概率</p><hr></li><li><p>对于样本特征 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>w</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>w</mi><mn>3</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>w</mi><mi>n</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[w_1, w_2, w_3 ... w_n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span> 得出每个特征的概率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><msub><mi>W</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>W</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>W</mi><mn>3</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>W</mi><mi>n</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[W_1, W_2, W_3 ... W_n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span>, 判断所属分类 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[A, B, C ...]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord">...</span><span class="mclose">]</span></span></span></span> 的概率:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mi mathvariant="normal">∣</mi><msub><mi>W</mi><mn>1</mn></msub><msub><mi>W</mi><mn>2</mn></msub><msub><mi>W</mi><mn>3</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>W</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mn>1</mn></msub><mi mathvariant="normal">∣</mi><mi>A</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mn>2</mn></msub><mi mathvariant="normal">∣</mi><mi>A</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mi>n</mi></msub><mi mathvariant="normal">∣</mi><mi>A</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mn>1</mn></msub><msub><mi>W</mi><mn>2</mn></msub><msub><mi>W</mi><mn>3</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>W</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mfrac><mspace linebreak="newline"></mspace><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mi mathvariant="normal">∣</mi><msub><mi>W</mi><mn>1</mn></msub><msub><mi>W</mi><mn>2</mn></msub><msub><mi>W</mi><mn>3</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>W</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mn>1</mn></msub><mi mathvariant="normal">∣</mi><mi>B</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mn>2</mn></msub><mi mathvariant="normal">∣</mi><mi>B</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mi>n</mi></msub><mi mathvariant="normal">∣</mi><mi>B</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mn>1</mn></msub><msub><mi>W</mi><mn>2</mn></msub><msub><mi>W</mi><mn>3</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>W</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mfrac><mspace linebreak="newline"></mspace><mi>P</mi><mo stretchy="false">(</mo><mi>C</mi><mi mathvariant="normal">∣</mi><msub><mi>W</mi><mn>1</mn></msub><msub><mi>W</mi><mn>2</mn></msub><msub><mi>W</mi><mn>3</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>W</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>C</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mn>1</mn></msub><mi mathvariant="normal">∣</mi><mi>C</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mn>2</mn></msub><mi mathvariant="normal">∣</mi><mi>C</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mi>n</mi></msub><mi mathvariant="normal">∣</mi><mi>C</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>W</mi><mn>1</mn></msub><msub><mi>W</mi><mn>2</mn></msub><msub><mi>W</mi><mn>3</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>W</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mfrac><mspace linebreak="newline"></mspace><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">P(A | W_1 W_2 W_3 ... W_n)= \frac{P(A) \cdot P(W_1|A) \cdot P(W_2|A) ... P(W_n|A)  }{P(W_1 W_2 W_3 ... W_n)} \\P(B | W_1 W_2 W_3 ... W_n)= \frac{P(B) \cdot P(W_1|B) \cdot P(W_2|B) ... P(W_n|B)  }{P(W_1 W_2 W_3 ... W_n)} \\P(C | W_1 W_2 W_3 ... W_n)= \frac{P(C) \cdot P(W_1|C) \cdot P(W_2|C) ... P(W_n|C)  }{P(W_1 W_2 W_3 ... W_n)} \\......</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal">A</span><span class="mclose">)</span><span class="mord">...</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal">A</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mord">...</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">)</span><span class="mord">...</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.1056em;"></span><span class="mord">......</span></span></span></span></span></p><hr></li><li><p>特点</p><p>必要的前提条件是特征间互不相关 (相互独立), 很多情况下难以满足,无法对特征关联性强的样本进行分类</p><p>逻辑简单,性能起伏小且稳定,特征独立性越强分类效果越好</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="聚类问题-cluster">聚类问题-cluster</h3><p>就像是人群根据 hobby 扎堆, 输入的数据根据某些特征的相似度分出多个&quot;簇&quot;</p><p>聚类问题属于无监督学习 (无需指明训练样本所属类别)</p><hr><h4 id="样本-相似度度量">样本-相似度度量</h4><p>对于两点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>n</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>n</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_1,y_1,...n_1),(x_2,y_2,...n_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><h5 id="欧氏距离">欧氏距离</h5><p>无视路径阻碍的空间绝对 distance</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>d</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo fence="true">∣</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>n</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>n</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo fence="true">∣</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msqrt><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>−</mo><msub><mi>x</mi><mn>2</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>−</mo><msub><mi>y</mi><mn>2</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><mo stretchy="false">(</mo><msub><mi>n</mi><mn>1</mn></msub><mo>−</mo><msub><mi>n</mi><mn>2</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></msqrt></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msqrt><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mi>x</mi></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>i</mi><mn>1</mn></msub><mo>−</mo><msub><mi>i</mi><mn>2</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></msqrt></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  d  &amp;= \left| (x_1, y_1, ..., n_1), (x_2, y_2, ..., n_2) \right| \\  &amp;= \sqrt{(x_1 - x_2)^2 + (y_1 - y_2)^2 + ... + (n_1 - n_2)^2} \\  &amp;= \sqrt{\sum_{i=x}^n (i_1 - i_2)^2}\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.6007em;vertical-align:-3.0503em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.5503em;"><span style="top:-6.5895em;"><span class="pstrut" style="height:3.8791em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span><span style="top:-4.9456em;"><span class="pstrut" style="height:3.8791em;"></span><span class="mord"></span></span><span style="top:-2.4065em;"><span class="pstrut" style="height:3.8791em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.0503em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.5503em;"><span style="top:-6.5895em;"><span class="pstrut" style="height:3.8791em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">∣</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">∣</span></span></span></span><span style="top:-4.9456em;"><span class="pstrut" style="height:3.8791em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9839em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.9439em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2561em;"><span></span></span></span></span></span></span></span><span style="top:-2.4065em;"><span class="pstrut" style="height:3.8791em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8791em;"><span class="svg-align" style="top:-5.1168em;"><span class="pstrut" style="height:5.1168em;"></span><span class="mord" style="padding-left:1.056em;"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.8391em;"><span class="pstrut" style="height:5.1168em;"></span><span class="hide-tail" style="min-width:0.742em;height:3.1968em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='3.1968em' viewBox='0 0 400000 3196' preserveAspectRatio='xMinYMin slice'><path d='M702 80H40000040H742v3062l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667219 661 l218 661zM702 80H400000v40H742z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.0503em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><h5 id="曼哈顿距离">曼哈顿距离</h5><p>计量阻碍,可以理解为寻路问题,同一曼哈顿距离可有多种路径解法</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>d</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mn>1</mn></msub><mo>−</mo><msub><mi>x</mi><mn>2</mn></msub><mi mathvariant="normal">∣</mi><mo>+</mo><mi mathvariant="normal">∣</mi><msub><mi>y</mi><mn>1</mn></msub><mo>−</mo><msub><mi>y</mi><mn>2</mn></msub><mi mathvariant="normal">∣</mi><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><mi mathvariant="normal">∣</mi><msub><mi>n</mi><mn>1</mn></msub><mo>−</mo><msub><mi>n</mi><mn>2</mn></msub><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mi>x</mi></mrow><mi>n</mi></munderover><mi mathvariant="normal">∣</mi><msub><mi>i</mi><mn>1</mn></msub><mo>−</mo><msub><mi>i</mi><mn>2</mn></msub><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  d  &amp;= |x_1 - x_2| + |y_1 - y_2| + ... + |n_1 - n_2| \\  &amp;= \sum_{i=x}^n | i_1 - i_2 |\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.7291em;vertical-align:-2.1145em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6145em;"><span style="top:-5.4259em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span><span style="top:-3.1145em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1145em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6145em;"><span style="top:-5.4259em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span></span></span><span style="top:-3.1145em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1145em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><h5 id="余弦相似度">余弦相似度</h5><p>cosine similarity, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mtext>在</mtext><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mi>π</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">cos 在 [0, \pi]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">cos</span><span class="mord cjk_fallback">在</span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">]</span></span></span></span> 上为减函数, 在 [45°, 135°] 区间下降快</p><p>余弦相似度对向量敏感度: 方向 &gt; 长度</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mover accent="true"><mi>a</mi><mo>⃗</mo></mover><mo>⋅</mo><mover accent="true"><mi>b</mi><mo>⃗</mo></mover></mrow><mrow><mi mathvariant="normal">∣</mi><mover accent="true"><mi>a</mi><mo>⃗</mo></mover><mi mathvariant="normal">∣</mi><mo>⋅</mo><mi mathvariant="normal">∣</mi><mover accent="true"><mi>b</mi><mo>⃗</mo></mover><mi mathvariant="normal">∣</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">cos(\theta) = \frac{\vec a \cdot \vec b}{|\vec a| \cdot |\vec b|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">cos</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.7719em;vertical-align:-1.1174em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6544em;"><span style="top:-2.1326em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">∣</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">∣</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9774em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">b</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class="mord">∣</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9774em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">b</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.1174em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><h5 id="以上对比">以上对比</h5><p>如下欧氏距离(绿色直线) 与哈曼顿距离(褐色折现) 与余弦相似度(红色向量) 对比</p><p><img src="https://www.helloimg.com/images/2022/04/18/RnsRZm.png" alt=""></p><h5 id="闵可夫斯基距离">闵可夫斯基距离</h5><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>d</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mrow><mo fence="true">(</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi mathvariant="normal">∣</mi><msub><mi>i</mi><mn>1</mn></msub><mo>−</mo><msub><mi>i</mi><mn>2</mn></msub><msup><mi mathvariant="normal">∣</mi><mi>p</mi></msup><mo fence="true">)</mo></mrow><mfrac><mn>1</mn><mi>p</mi></mfrac></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  d  &amp;= \left( \sum_{i=1}^n |i_1 - i_2|^p \right)^{\frac{1}{p}}\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6716em;vertical-align:-1.5858em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.0858em;"><span style="top:-4.0858em;"><span class="pstrut" style="height:4.0939em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5858em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.0858em;"><span style="top:-4.0858em;"><span class="pstrut" style="height:4.0939em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">(</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:2.0939em;"><span style="top:-4.5029em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4829em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5858em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li><p>改变 p 的值,可以转化为其他距离:</p><p>p=1 : 哈曼顿距离</p><p>p=2 : 欧氏距离</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>⇒</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">p \rArr \infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">∞</span></span></span></span> : 切比雪夫距离</p></li></ul><h5 id="杰卡德相似系数">杰卡德相似系数</h5><p>Jaccard 相似系数就是 <code>交并比</code>, 可用于目标检测中 <code>目标位置-预测位置</code> 的相似度分析</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mo>=</mo><mo stretchy="false">[</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>a</mi><mi>n</mi></msub><mo stretchy="false">]</mo><mspace width="2em"/><mi>B</mi><mo>=</mo><mo stretchy="false">[</mo><msub><mi>b</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>b</mi><mi>n</mi></msub><mo stretchy="false">]</mo><mspace linebreak="newline"></mspace><mtext> </mtext><mspace linebreak="newline"></mspace><mi>J</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>A</mi><mo>∩</mo><mi>B</mi></mrow><mrow><mi>A</mi><mo>∪</mo><mi>B</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">A = [a_1, a_2, ..., a_n] \qquad B = [b_1, b_2, ..., b_n]\\ \ \\J(A,B) = \frac{A \cap B}{A \cup B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:2em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0em;"></span><span class="mspace"> </span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0463em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p><img src="https://www.helloimg.com/images/2022/04/18/Rnm1a9.png" alt=""></p><p><img src="https://www.helloimg.com/images/2022/05/21/ZCYX1g.png" alt=""></p><p>上面假定的是 A,B 中样本权重相同, 实际聚类中需要考量样本的权重</p><h5 id="相对熵-2">相对熵</h5><blockquote><p>参见 <a href="../../../experience/basic/%E9%80%9A%E4%BF%A1%E6%8A%80%E6%9C%AF#%E7%9B%B8%E5%AF%B9%E7%86%B5">👽 通信-信息论-开坑自埋</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h4 id="聚类算法划分">聚类算法划分</h4><h5 id="原型-K-Means">原型-K-Means</h5><p>prototype-based clustering, 用原型表示聚类结构, 然后通过对原型的更新来完善聚类算法</p><ul><li><p>常用 <code>K-均值 / K-Means 算法</code>: 若干样本聚类为 k 个簇, k 为指定参数</p><ol><li><p>随机挑选 k 个样本, 计算其他所有样本与此 k 个样本的欧氏距离,离谁近就归为哪一簇</p></li><li><p>对每一个簇, 计算其中所有样本的均值中心, 并将这 k 个均值中心作为 1. 中的样本再次重复</p></li><li><p>直到均值中心不再变化/变化小于阈值</p></li></ol><p><img src="https://www.helloimg.com/images/2022/04/18/RntO7D.png" alt=""></p></li><li><p>K-Means 对 <code>距离很远的异常点</code> 和 <code>初始样本点的选择</code> 是敏感的</p><p>遇到影响大的异常点时可以换为 <code>K-中位数/ K-Mediods 算法</code></p><p>当初始样本点选择不当时,会使聚类结果不好,如下图</p><p><img src="https://www.helloimg.com/images/2022/04/18/Rn4BGm.png" alt=""></p><hr></li><li><p>改良 -&gt; K-Means++</p><p>初始样本点的选取: 要选择的样本点与已选择样本点距离越远越好</p><p>方案: 每选择样本点后计算 <code>未选择样本</code> 与 <code>已选择样本组</code> 的距离, 使未选择样本下一次的选择概率与距离成正比</p></li><li><p>数据分布对 K-Means 的影响:</p><p>数据分布不平衡几乎没影响</p><p>但是数据<code>几何畸变</code>对聚类影响很大; K-Means 对符合高斯/正态分布的样本 (大致是圈的样子) 的聚类效果最好, 对带状样本聚类效果差</p><p><img src="https://www.helloimg.com/images/2022/04/18/Rn44kv.png" alt=""></p><p>无论如何调参, K-Means 都不适用于如下情况:</p><p><img src="https://www.helloimg.com/images/2022/04/18/Rnn4H1.png" alt=""></p></li><li><p>Mini-Batch K-Means:</p><p>对所有样本求均值计算量还是蛮大的, Mini-Batch 思想大致是抽取一部分样本求均值来近似总均值</p></li><li><p>特点:</p><p>简单快速, 可解决大批量聚类,对于符合高斯分布的数据聚类效果较优</p><p>需要预先给出聚类簇数量 k; 对于异常点和初始样本选取敏感; 对非高斯分布样本聚类效果差</p></li></ul><hr><h5 id="层次-AGNES">层次-AGNES</h5><p>hierarchical clustering, 通过分层 -&gt; 树形聚类结构 -&gt; 聚类结果</p><ul><li><p>可采用 <code>自顶向下DIANA / 自底向上AGNES</code> 的划分方式</p><p>AGNES (AGglomerative NESting)最初将每个对象作为一个簇,然后这些簇一步步地合并。两个簇间的距离由这两个不同簇中距离最近的数据点对的相似度来确定；聚类的合并过程反复进行直到所有的对象最终满足簇数目。</p><p>DIANA (DIvisive ANAlysis)算法是上述过程的反过程,属于分裂的层次聚类,首先将所有的对象初始化到一个簇中,然后根据一些原则(比如最大的欧式距离),将该簇分类。直到到达用户指定的簇数目或者两个簇之间的距离超过了某个阈值。</p><p><img src="https://www.helloimg.com/images/2022/04/18/RnH3bu.png" alt=""></p><p>常用 <code>凝聚层次AGNES算法</code>.</p></li><li><p>AGNES 簇间距离不同定义/合并策略</p><ul><li><p>最小距离 prime</p><p>两个集合中最近的两个样本的距离</p><p>容易形成链状结构</p></li><li><p>最大距离 complete</p><p>两个集合中最远的两个样本的距离</p><p>若存在异常值则不稳定</p></li><li><p>平均距离 average</p><p>两个集合中样本间两两距离的平均值</p></li><li><p>方差 Ward</p><p>使得簇内距离平方和最小,簇间平方和最大</p></li></ul><hr><p>如下为以上四类对于含噪点样本的聚类效果,最小距离聚类效果最好</p><p><img src="https://www.helloimg.com/images/2022/04/18/RnHSln.png" alt=""></p></li></ul><hr><h5 id="密度-DBSCAN">密度-DBSCAN</h5><p>density-based clustering, 通过样本分布密度来考察样本间的可连接性, 逐步拓展连接成最终聚类结果</p><ul><li><p>几种密度聚类实现算法:</p><p>噪声密度 DBSCAN 聚类算法</p><p>密度最大值聚类</p><p>AP (Affinity Propagation)</p><p>谱聚类</p></li><li><p>常用 <code>噪声密度 / DBSCAN 算法</code></p><p>允许噪声的基于密度的空间聚类 DBSCAN (Density-Based Spatial Clustering of Applications with Noise)</p><p>只要样本点的密度大于某阈值,则将该样本添加到最近的簇中。这类算法能克服基于距离的算法只能发现 <code>高斯分布/类圆形(凸)</code> 的聚类缺点,可发现任意形状的聚类,且对噪声数据不敏感。但计算密度单元的计算复杂度大,需要建立空间索引来降低计算量</p><p>使用方面, DBSCAN 不仅可以避免噪声影响,也可以专门找噪声/剔除噪声</p><hr></li><li><p>概念</p><table><thead><tr><th style="text-align:center">学名</th><th style="text-align:left">概念</th></tr></thead><tbody><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>-邻域</td><td style="text-align:left">样本点在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span> 半径内的区域</td></tr><tr><td style="text-align:center">核心对象</td><td style="text-align:left">对于给定的阈值 m, 如果某样本点<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>-邻域中其他样本点数量 n&gt;=m,那么此样本点就是核心对象</td></tr><tr><td style="text-align:center">直接密度可达</td><td style="text-align:left">对于核心对象 q, p 在其圈内, 那么 p 从 q 出发是直接密度可达的</td></tr><tr><td style="text-align:center">密度相连</td><td style="text-align:left">一串密度可达对象的串联</td></tr><tr><td style="text-align:center">簇</td><td style="text-align:left">最大的密度相连对象集合</td></tr></tbody></table></li><li><p>半径<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span> 与 阈值 m 的影响 (调参侠石锤)</p><p><img src="https://www.helloimg.com/images/2022/04/18/RnTRWm.png" alt=""></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h4 id="模型-衡量指标">模型-衡量指标</h4><h5 id="均一性-homogeneity">均一性-homogeneity</h5><p>一个簇中只包含一个类别的样本</p><h5 id="完整性-completeness">完整性-completeness</h5><p>同类别样本被归类到相同簇中</p><h5 id="V-measure">V-measure</h5><p>均一性与完整性的加权平均</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>V</mi><mo stretchy="false">(</mo><mi>β</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>β</mi><mo stretchy="false">)</mo><mi>h</mi><mi>c</mi></mrow><mrow><mi>β</mi><mi>h</mi><mo>+</mo><mi>c</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">V(\beta) = \frac{(1+\beta)hc}{\beta h +c}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3074em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">c</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mclose">)</span><span class="mord mathnormal">h</span><span class="mord mathnormal">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><h5 id="ARI-AMI">ARI-AMI</h5><p><img src="https://www.helloimg.com/images/2022/04/18/RnnlxC.png" alt=""></p><h5 id="轮廓系数-Silhouette">轮廓系数-Silhouette</h5><p>a: 当前样本与簇内样本距离均值</p><p>b: min(当前样本与其他簇样本距离均值)</p><p><img src="https://www.helloimg.com/images/2022/04/18/RnndCY.png" alt=""></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="降维问题">降维问题</h3><p>比如在 3 维空间 xyz 内有一条线段, 我们只想知道线段的 x 信息, 可以把线段映射到 x-axis 上 (损失 yz-axis 上的信息)</p><p>降维作用: 降低时间-空间复杂度,使数据易于分析展示 (维度越高的图人类越难理解) <sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h4 id="缺失值比率">缺失值比率</h4><p>Missing Value Ratio, 去掉缺失值大于某一阈值的特征列</p><hr><h4 id="低方差过滤">低方差过滤</h4><p>Low Variance Filter, 对于某些列, 所有值的方差很小/样本没啥区别, 可以不用其做特征</p><hr><h4 id="随机森林-2">随机森林</h4><p>Random Forest, 随机森林可以自动计算各个特征的重要性, 便于寻找最优+最小的特征子集</p><hr><h4 id="反向特征消除">反向特征消除</h4><p>Backward Feature Elimination, 用数据集中 n 个样本训练模型, 每次删除一个样本, 找出对模型影响最小的样本删除</p><hr><h4 id="前向特征选择">前向特征选择</h4><p>Forward Feature Selection,前向特征选择其实就是反向特征消除的相反过程,即找到能改善模型性能的最佳特征,而不是删除弱影响特征.它背后的思路如下所述：</p><ol><li>选择一个特征,用每个特征训练模型 n 次,得到 n 个模型.</li><li>选择模型性能最佳的变量作为初始变量.</li><li>每次添加一个变量继续训练,重复上一过程,最后保留性能提升最大的变量.</li><li>一直添加,一直筛选,直到模型性能不再有明显提高.</li></ol><hr><h4 id="因子分析">因子分析</h4><p>Factor Analysis, 因子分析是一种常见的统计方法,它能从多个变量中提取共性因子,并得到最优解.</p><p>在因子分析中,我们将变量按其相关性分组,即特定组内所有变量的相关性较高,组间变量的相关性较低.我们把每个组称为一个因子,它是多个变量的组合.和原始数据集的变量相比,这些因子在数量上更少,但携带的信息基本一致.</p><hr><h4 id="主成分分析-PCA">主成分分析-PCA</h4><p>通过正交变换将原始的 n 维数据集变换到一个新的被称做主成分的数据集中,即从现有的大量变量中提取一组新的变量.下面是关于 PCA 的一些要点：</p><ol><li>主成分是原始变量的线性组合.</li><li>第一个主成分具有最大的方差值.</li><li>第二主成分试图解释数据集中的剩余方差,并且与第一主成分不相关 (正交).</li><li>第三主成分试图解释前两个主成分等没有解释的方差.</li></ol><p>映射不包含任何数据内部的分类信息, 因此一般 PCA 降维后数据表示更有效但或许分类更加困难</p><hr><h4 id="LDA">LDA</h4><p>Linear Discriminant Analysis / Fisher Linear Discriminant 是一种有监督的 supervised 线性降维算法</p><p>LDA 充分利用数据的标签信息, 一般 LDA 降维后可以直接分类</p><p>假设原始数据集表示为 X,(m*n 矩阵,m 是维度,n 是 sample 的数量), 目标是找到映射向量 a, 使得 a‘X 后的数据点能够保持以下两种性质：</p><ol><li><p>同类的数据点尽可能的接近 (within class)</p></li><li><p>不同类的数据点尽可能的分开 (between class)</p></li></ol><hr><h4 id="局部线性嵌入-LLE">局部线性嵌入-LLE</h4><p>非线性降维, 可使数据降维后较好的保持 <code>流形结构</code> ,适用于 flow-learninh</p><hr><h4 id="拉普拉斯特征映射-LE">拉普拉斯特征映射-LE</h4><p>Laplacian-Eigenmaps, 也是一种常用的流形降维算法, 思想也近似 LLE</p><!-- TODO 暂时搁置https://zhuanlan.zhihu.com/p/100002630 --><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="超参的学习-更新">超参的学习-更新</h2><h3 id="损失函数-loss">损失函数-loss</h3><p>loss function, 也叫代价函数 cost function</p><p>用于衡量样本给出的 <code>真实值</code><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>y</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span></span></span></span> 与 模型输出的 <code>预测值</code>y 之间的差异</p><blockquote><p>损失函数将 <code>寻找最优参数</code> 问题转换为了 <code>寻找损失函数最小值</code> 问题</p></blockquote><hr><h4 id="均方差损失函数-MSE">均方差损失函数-MSE</h4><p>mean squared error, 常用于回归问题, 对于真实值<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>y</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span></span></span></span> 和预测值 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>,其均方差</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="script">L</mi><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\mathcal{L} = \frac{1}{n} \sum_{i=1}^{n} (y_i - \hat{y}_i)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p><p>均方差在几何意义上对应欧几里得距离 (欧氏距离)</p><ul><li><p>基于 min(均方差 loss) 寻找最优模型的方法叫 <code>最小二乘法</code></p><p>在线性回归中应用的解释为: 寻找一条距所有真实值样本点 几何距离之和 最小的直线</p><p>如何求 min(均方差 loss) ? -&gt; 一种方法是求导,令导函数 = 0 求解</p></li></ul><hr><h4 id="交叉熵损失函数">交叉熵损失函数</h4><ul><li><p>分类问题常用交叉熵作为损失函数</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi mathvariant="script">L</mi><mo stretchy="false">(</mo><mi mathvariant="bold-italic">y</mi><mo separator="true">,</mo><mi>f</mi><mo stretchy="false">(</mo><mi mathvariant="bold-italic">x</mi><mo separator="true">;</mo><mi>θ</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>−</mo><msup><mi mathvariant="bold-italic">y</mi><mi mathvariant="normal">⊤</mi></msup><mi>log</mi><mo>⁡</mo><mi>f</mi><mo stretchy="false">(</mo><mi mathvariant="bold-italic">x</mi><mo separator="true">;</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>c</mi><mo>=</mo><mn>1</mn></mrow><mi>C</mi></munderover><msub><mi>y</mi><mi>c</mi></msub><mi>log</mi><mo>⁡</mo><msub><mi>f</mi><mi>c</mi></msub><mo stretchy="false">(</mo><mi mathvariant="bold-italic">x</mi><mo separator="true">;</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>二分类</mtext><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>:</mo><mi mathvariant="script">L</mi><mo stretchy="false">(</mo><mi>y</mi><mo separator="true">,</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>−</mo><mrow><mo fence="true">[</mo><mi>y</mi><mi>log</mi><mo>⁡</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>y</mi><mo stretchy="false">)</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  \mathcal{L}(\boldsymbol{y}, f(\boldsymbol{x} ; \theta))  &amp;=-\boldsymbol{y}^{\top} \log f(\boldsymbol{x} ; \theta) \\  &amp;=-\sum_{c=1}^{C} y_{c} \log f_{c}(\boldsymbol{x} ; \theta)  \\ \ \\  二分类loss: \mathcal{L}(y, \hat{y})  &amp;= - \left[ y \log \hat y + (1  - y) \log (1 - \hat y) \right]\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.9546em;vertical-align:-3.7273em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.2273em;"><span style="top:-7.1565em;"><span class="pstrut" style="height:3.8283em;"></span><span class="mord"><span class="mord mathcal">L</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">y</span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">))</span></span></span><span style="top:-4.6682em;"><span class="pstrut" style="height:3.8283em;"></span><span class="mord"></span></span><span style="top:-2.2611em;"><span class="pstrut" style="height:3.8283em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:-0.7611em;"><span class="pstrut" style="height:3.8283em;"></span><span class="mord"><span class="mord cjk_fallback">二分类</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">oss</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathcal">L</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.7273em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.2273em;"><span style="top:-7.1565em;"><span class="pstrut" style="height:3.8283em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">−</span><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">y</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">⊤</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span><span style="top:-4.6682em;"><span class="pstrut" style="height:3.8283em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span><span style="top:-0.7611em;"><span class="pstrut" style="height:3.8283em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.7273em;"><span></span></span></span></span></span></span></span></span></span></span></span></p></li><li><p>例题</p><p>对于期末考试三种结果,假设 one-hot 标签编码:</p><p>优秀 [1,0,0]<br>合格 [0,1,0]<br>不合格 [0,0,1]</p><p>假设优秀,合格,不合格概率分别为:</p><p>甲 [0.2,0.5,0.3]<br>乙 [0.2,0.2,0.6]</p><p>实际二位都不合格</p><hr><p>分别求交叉熵:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo stretchy="false">(</mo><mtext>甲</mtext><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mrow><mo fence="true">[</mo><mn>0</mn><mo>⋅</mo><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>0.2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>0</mn><mo>⋅</mo><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>0.5</mn><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><mo>⋅</mo><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>0.3</mn><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow><mo>=</mo><mn>1.2</mn><mspace linebreak="newline"></mspace><mtext> </mtext><mspace linebreak="newline"></mspace><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo stretchy="false">(</mo><mtext>乙</mtext><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mrow><mo fence="true">[</mo><mn>0</mn><mo>⋅</mo><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>0.2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>0</mn><mo>⋅</mo><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>0.2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><mo>⋅</mo><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>0.6</mn><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow><mo>=</mo><mn>0.51</mn></mrow><annotation encoding="application/x-tex">loss(甲) = -\left[0 \cdot \ln(0.2) + 0 \cdot \ln(0.5) + 1 \cdot \ln(0.3)\right] = 1.2\\ \ \\loss(乙) = -\left[0 \cdot \ln(0.2) + 0 \cdot \ln(0.2) + 1 \cdot \ln(0.6)\right] = 0.51</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">oss</span><span class="mopen">(</span><span class="mord cjk_fallback">甲</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord">0.2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord">0.5</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord">0.3</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1.2</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0em;"></span><span class="mspace"> </span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">oss</span><span class="mopen">(</span><span class="mord cjk_fallback">乙</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord">0.2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord">0.2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord">0.6</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.51</span></span></span></span></span></p><p>预测值越接近真实标签,损失函数越小</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="过-欠拟合及处理">过-欠拟合及处理</h3><p><img src="https://www.helloimg.com/images/2022/04/10/RtRLGQ.png" alt=""></p><p>一种是啥都没背过; 一种是背过了但只会死记硬背,不会其他的</p><ul><li><p>可以用泛化误差来衡量拟合程度 <sup id='cite_ref-5'><a href="#cite_note-5">[5]</a></sup></p><p><img src="https://www.helloimg.com/images/2022/04/10/RtRSAt.png" alt=""></p><hr></li></ul><blockquote class="pullquote mindmap mindmap-md"><ul><li>处理<ul><li>过拟合<ul><li>训练数据++, 数据增广</li><li>早停</li><li>降维</li><li>正则化</li><li>集成学习方法</li></ul></li><li>欠拟合<ul><li>添加新特征</li><li>增加模型复杂度</li><li>减小正则化系数</li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="早停">早停</h3><p>Early Stopping <sup id='cite_ref-7'><a href="#cite_note-7">[7]</a></sup></p><p><img src="https://www.helloimg.com/images/2022/05/19/Ry4m8h.png" alt=""></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="优化算法">优化算法</h2><h3 id="梯度下降法">梯度下降法</h3><p>在使用最小二乘法计算 min(均方差 loss) 时,有可能会遇到逆矩阵不存在或者计算量巨大的情况</p><p>这时就可以用梯度下降法求 loss 极小值,进而找最小值</p><ul><li><p>分类</p><ul><li>批量梯度下降法 BGD</li><li>随机剃度下降法 SGD</li><li>小批量随机梯度下降法 MBSGD</li></ul></li></ul><p><img src="https://www.helloimg.com/images/2022/05/14/R7AFVm.png" alt=""></p><ul><li><p>步骤: 对于 梯度<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 和其对应的 loss</p><ol><li><p>loss 是否足够小/迭代次数是否达到? -&gt; 如果不够,就更新参数,继续迭代</p></li><li><p>梯度下降</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>w</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>w</mi><mi>t</mi></msub><mo>−</mo><mi>α</mi><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">R</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi>w</mi><mi>t</mi></msub></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>w</mi><mi>t</mi></msub><mo>−</mo><mi>α</mi><mfrac><mn>1</mn><mi>N</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi><mrow><mo fence="true">(</mo><msub><mi>w</mi><mi>t</mi></msub><mo separator="true">;</mo><msup><mi>x</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo separator="true">,</mo><msup><mi>y</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo fence="true">)</mo></mrow></mrow><mrow><mi mathvariant="normal">∂</mi><mi>w</mi></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}w_{t+1}&amp;=w_{t}-\alpha \frac{\partial \mathcal{R}(w)}{\partial w_{t}} \\&amp;=w_{t}-\alpha \frac{1}{N} \sum_{i=1}^{N} \frac{\partial \mathcal{L}\left(w_{t} ; x^{(i)}, y^{(i)}\right)}{\partial w}\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.969em;vertical-align:-2.7345em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2345em;"><span style="top:-5.6358em;"><span class="pstrut" style="height:3.8283em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.6715em;"><span class="pstrut" style="height:3.8283em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.7345em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2345em;"><span style="top:-5.6358em;"><span class="pstrut" style="height:3.8283em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathcal">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.6715em;"><span class="pstrut" style="height:3.8283em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.628em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.74em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathcal">L</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.7345em;"><span></span></span></span></span></span></span></span></span></span></span></span></p></li><li><p>循环 1.</p></li></ol><hr></li><li><details>  <summary> 例题 </summary><hr><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>假设函数</mtext><mo>:</mo><mi>J</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>w</mi><mn>2</mn></msup><mspace width="1em"/><mtext>假设起点</mtext><mo>:</mo><msup><mi>w</mi><mn>0</mn></msup><mo>=</mo><mn>1</mn><mspace width="1em"/><mtext>学习率为</mtext><mo>:</mo><mi>α</mi><mo>=</mo><mn>0.4</mn><mspace linebreak="newline"></mspace><mtext>根据梯度下降公式迭代寻优</mtext></mrow><annotation encoding="application/x-tex">假设函数: J(w)=w^2 \quad假设起点: w^0=1 \quad学习率为: \alpha = 0.4 \\根据梯度下降公式迭代寻优</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">假设函数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord cjk_fallback">假设起点</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em;"></span><span class="mord cjk_fallback">学习率为</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.4</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">根据梯度下降公式迭代寻优</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msup><mi>w</mi><mn>0</mn></msup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msup><mi>w</mi><mn>1</mn></msup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>w</mi><mn>0</mn></msup><mo>−</mo><mi>α</mi><mo>⋅</mo><msup><mi>J</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><msup><mi>w</mi><mn>0</mn></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>1</mn><mo>−</mo><mn>0.4</mn><mo>⋅</mo><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>0.2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msup><mi>w</mi><mn>2</mn></msup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>w</mi><mn>1</mn></msup><mo>−</mo><mi>α</mi><mo>⋅</mo><msup><mi>J</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><msup><mi>w</mi><mn>1</mn></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>0.04</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msup><mi>w</mi><mn>3</mn></msup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>0.008</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msup><mi>w</mi><mn>4</mn></msup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>0.0016</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}w^0  &amp;= 1 \\w^1  &amp;= w^0 - \alpha \cdot J&#x27;(w^0) \\  &amp;= 1 - 0.4 \cdot 2 \\  &amp;= 0.2 \\w^2  &amp;= w^1 - \alpha \cdot J&#x27;(w^1) \\  &amp;= 0.04 \\w^3  &amp;= 0.008 \\w^4  &amp;= 0.0016 \\...\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:13.6205em;vertical-align:-6.5603em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.0603em;"><span style="top:-9.1962em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span><span style="top:-6.1721em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-4.6721em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-3.1479em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-1.6479em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-0.1238em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span><span style="top:1.4003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span><span style="top:2.9003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">...</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:6.5603em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.0603em;"><span style="top:-9.1962em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:-7.6721em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-6.1721em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0.4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span></span></span><span style="top:-4.6721em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0.2</span></span></span><span style="top:-3.1479em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-1.6479em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0.04</span></span></span><span style="top:-0.1238em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0.008</span></span></span><span style="top:1.4003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0.0016</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5.0603em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p><img src="https://www.helloimg.com/images/2022/04/10/Rsusaq.png" alt=""></p></details></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="学习率">学习率</h3><p><img src="https://www.helloimg.com/images/2022/05/19/Ry4edA.png" alt=""></p><ul><li><p>学习率退火</p><p>如果学习率不变,对于初期来说学习率偏低, 收敛慢 loss 下降慢</p><p>对于后期来说又偏大,导致难以收敛, loss 止步不降</p><p><img src="https://www.helloimg.com/images/2022/05/19/Ry4EX0.png" alt=""></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="正则化">正则化</h3><p>保留所有特征 x,减少参数 w 大小 (给高次项或者所有项加上系数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>来压制)</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>y</mi><mo>=</mo><msub><mi>w</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>w</mi><mn>2</mn></msub><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>θ</mi><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><mi>θ</mi><msub><mi>w</mi><mn>4</mn></msub><msup><mi>x</mi><mn>4</mn></msup><mspace width="2em"/><mn>0</mn><mo>&lt;</mo><mi>θ</mi><mo>&lt;</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">y = w_1 x + w_2 x^2 + \theta x^3 + \theta w_4 x^4 \qquad 0 &lt; \theta &lt;= 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:2em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></p><ul><li><p>实际操作就是在目标函数(如损失函数)后加上一个范数:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mrow><mo fence="true">∥</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr></mtable><mo fence="true">∥</mo></mrow><mi>p</mi></msub><mo>=</mo><msqrt><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>i</mi></msub><msup><mi mathvariant="normal">∣</mi><mi>p</mi></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">\begin{Vmatrix} x \end{Vmatrix}_p= \sqrt{\sum_{i=1}^{n} |x_i|^p}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3978em;vertical-align:-0.5358em;"></span><span class="minner"><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.862em;"><span style="top:-2.256em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span><span style="top:-2.854em;"><span class="pstrut" style="height:2.606em;"></span><span style="height:0.016em;width:0.5556em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.5556em' height='0.016em' style='width:0.5556em' viewBox='0 0 555.5600000000001 16' preserveAspectRatio='xMinYMin'><path d='M145 0 H188 V16 H145z M145 0 H188 V16 H145zM367 0 H410 V16 H367z M367 0 H410 V16 H367z'/></svg></span></span><span style="top:-2.862em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.862em;"><span style="top:-2.256em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span><span style="top:-2.854em;"><span class="pstrut" style="height:2.606em;"></span><span style="height:0.016em;width:0.5556em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.5556em' height='0.016em' style='width:0.5556em' viewBox='0 0 555.5600000000001 16' preserveAspectRatio='xMinYMin'><path d='M145 0 H188 V16 H145z M145 0 H188 V16 H145zM367 0 H410 V16 H367z M367 0 H410 V16 H367z'/></svg></span></span><span style="top:-2.862em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.0983em;"><span style="top:-2.3003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5358em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.1568em;vertical-align:-1.2777em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8791em;"><span class="svg-align" style="top:-5.1168em;"><span class="pstrut" style="height:5.1168em;"></span><span class="mord" style="padding-left:1.056em;"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5904em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span></span></span><span style="top:-3.8391em;"><span class="pstrut" style="height:5.1168em;"></span><span class="hide-tail" style="min-width:0.742em;height:3.1968em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='3.1968em' viewBox='0 0 400000 3196' preserveAspectRatio='xMinYMin slice'><path d='M702 80H40000040H742v3062l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667219 661 l218 661zM702 80H400000v40H742z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span></span></span></span></span></p><p>p = 1 时为 <code>L1 范数 (曼哈顿范数)</code>,所有系数绝对值之和</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi mathvariant="normal">∣</mi><mi>x</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{n} |x|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣</span><span class="mord mathnormal">x</span><span class="mord">∣</span></span></span></span></span></p><p>p = 2 时为 <code>L2 范数 (欧几里得范数)</code>,所有系数平方和的开方</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msqrt><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>i</mi></msub><msup><mi mathvariant="normal">∣</mi><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{\sum_{i=1}^{n} |x_i|^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.1568em;vertical-align:-1.2777em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8791em;"><span class="svg-align" style="top:-5.1168em;"><span class="pstrut" style="height:5.1168em;"></span><span class="mord" style="padding-left:1.056em;"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.8391em;"><span class="pstrut" style="height:5.1168em;"></span><span class="hide-tail" style="min-width:0.742em;height:3.1968em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='3.1968em' viewBox='0 0 400000 3196' preserveAspectRatio='xMinYMin slice'><path d='M702 80H40000040H742v3062l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667219 661 l218 661zM702 80H400000v40H742z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span></span></span></span></span></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="权重初始化">权重初始化</h3><p>就像是 KMeans 一样, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo separator="true">,</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">w,b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span></span></span></span> 的初始化对训练的性能和结果也会有很大影响</p><ul><li><p>一种方法是随机初始化</p><p><img src="https://www.helloimg.com/images/2022/05/19/Ry4J2m.png" alt=""></p></li><li><p>另一种就是参考已经训练好的优秀模型的调参</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="图像增广-DataAugmentation">图像增广-DataAugmentation</h3><p><img src="https://www.helloimg.com/images/2022/05/19/Ry4toc.png" alt=""></p><ol><li>防止过拟合</li><li>增强模型泛化能力</li></ol><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-34">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://www.bilibili.com/video/BV16L411w7oQ?p=6">【上海交大】【腾讯】强强联合 机器学习+深度学习</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://zhuanlan.zhihu.com/p/43225794">12 种降维方法终极指南 (含 Python 代码)</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://zhuanlan.zhihu.com/p/146600360">05-生成网络总结 (VAE, GAN)</a></p><p><a name='cite_note-4' href='#cite_ref-4'>[4]</a>: <a href="https://blog.csdn.net/qq_38651469/article/details/121100275">独热编码 (One-Hot)及其代码</a></p><p><a name='cite_note-5' href='#cite_ref-5'>[5]</a>: <a href="https://zhuanlan.zhihu.com/p/72038532">欠拟合、过拟合及如何防止过拟合</a></p><p><a name='cite_note-6' href='#cite_ref-6'>[6]</a>: <a href="https://scikit-learn.org/stable/tutorial/machine_learning_map/">https://scikit-learn.org/stable/tutorial/machine_learning_map/</a></p><p><a name='cite_note-7' href='#cite_ref-7'>[7]</a>: <a href="https://www.bilibili.com/video/BV1ou411k7fD?p=6">4 小时入门深度学习+实操 MMDetection 第一课</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> AI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> python </tag>
            
            <tag> 人工智能 </tag>
            
            <tag> 信息论 </tag>
            
            <tag> 机器学习 </tag>
            
            <tag> doing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>👀Code-4-Machine-Learning</title>
      <link href="/post/python/code/ML/"/>
      <url>/post/python/code/ML/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-02-23 02:28:46 * @FilePath: \Blog-private\scaffolds\post.md * @Description: * @!: *********************************************************************--><h2 id="序-2">序</h2><p>此文为其他文章的代码部分:</p><blockquote><p><a href="../../AI/ML">🥵硬啃-Machine-Learning</a></p></blockquote><p>也提供了 notebook 形式: <a href="https://github.com/Weidows-projects/public-post/blob/main/notebook/ML/_ML.ipynb">代码地址</a></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="数据预处理方法">数据预处理方法</h2><h3 id="标准化-均值移除">标准化-均值移除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据预处理之：均值移除示例</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> sklearn.preprocessing <span class="keyword">as</span> sp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 样本数据</span></span><br><span class="line">raw_samples = np.array([</span><br><span class="line">    [<span class="number">3.0</span>, -<span class="number">1.0</span>, <span class="number">2.0</span>],\</span><br><span class="line">    [<span class="number">0.0</span>, <span class="number">4.0</span>, <span class="number">3.0</span>], \</span><br><span class="line">    [<span class="number">1.0</span>, -<span class="number">4.0</span>, <span class="number">2.0</span>]]\</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 求每列的平均值 axis=0为列, =1为行 不填就计算所有值</span></span><br><span class="line"><span class="built_in">print</span>(raw_samples.mean(axis=<span class="number">0</span>))</span><br><span class="line"><span class="comment"># 求每列标准差</span></span><br><span class="line"><span class="built_in">print</span>(raw_samples.std(axis=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">std_samples = raw_samples.copy()  <span class="comment"># 复制样本数据</span></span><br><span class="line"><span class="keyword">for</span> col <span class="keyword">in</span> std_samples.T:  <span class="comment"># .T为转置,遍历每列</span></span><br><span class="line">    col_mean = col.mean()  <span class="comment"># 计算平均数</span></span><br><span class="line">    col_std = col.std()  <span class="comment"># 求标准差</span></span><br><span class="line">    col -= col_mean  <span class="comment"># 减平均值</span></span><br><span class="line">    col /= col_std  <span class="comment"># 除标准差</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 均值无限趋近0,但可能不是0</span></span><br><span class="line"><span class="built_in">print</span>(std_samples.mean(axis=<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(std_samples.std(axis=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># scale 标准移除,与上面功能相同</span></span><br><span class="line">std_samples = sp.scale(raw_samples)</span><br><span class="line"><span class="built_in">print</span>(std_samples.mean(axis=<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(std_samples.std(axis=<span class="number">0</span>))</span><br></pre></td></tr></table></figure><pre><code>[ 1.33333333 -0.33333333  2.33333333][1.24721913 3.29983165 0.47140452][ 5.55111512e-17  0.00000000e+00 -2.96059473e-16][1. 1. 1.][ 5.55111512e-17  0.00000000e+00 -2.96059473e-16][1. 1. 1.]</code></pre><h3 id="范围缩放-2">范围缩放</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据预处理之：范围缩放</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> sklearn.preprocessing <span class="keyword">as</span> sp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 样本数据</span></span><br><span class="line">raw_samples = np.array([</span><br><span class="line">    [<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>],\</span><br><span class="line">    [<span class="number">4.0</span>, <span class="number">5.0</span>, <span class="number">6.0</span>],\</span><br><span class="line">    [<span class="number">7.0</span>, <span class="number">8.0</span>, <span class="number">9.0</span>]]).astype(<span class="string">&quot;float64&quot;</span>)</span><br><span class="line"></span><br><span class="line">mms_samples = raw_samples.copy()  <span class="comment"># 复制样本数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> col <span class="keyword">in</span> mms_samples.T:</span><br><span class="line">    col_min = col.<span class="built_in">min</span>()</span><br><span class="line">    col_max = col.<span class="built_in">max</span>()</span><br><span class="line">    col -= col_min</span><br><span class="line">    col /= (col_max - col_min)</span><br><span class="line"><span class="built_in">print</span>(mms_samples)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据给定范围创建一个范围缩放器对象</span></span><br><span class="line"><span class="comment"># 使用范围缩放器实现特征值范围缩放</span></span><br><span class="line">mms_samples = sp.MinMaxScaler(feature_range=(<span class="number">0</span>, <span class="number">1</span>))\</span><br><span class="line">  .fit_transform(raw_samples)  <span class="comment"># 缩放</span></span><br><span class="line"><span class="built_in">print</span>(mms_samples)</span><br></pre></td></tr></table></figure><pre><code>[[0.  0.  0. ] [0.5 0.5 0.5] [1.  1.  1. ]][[0.  0.  0. ] [0.5 0.5 0.5] [1.  1.  1. ]]</code></pre><h3 id="归一化-2">归一化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> sklearn.preprocessing <span class="keyword">as</span> sp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 样本数据</span></span><br><span class="line">raw_samples = np.array([</span><br><span class="line">    [<span class="number">10.0</span>, <span class="number">20.0</span>, <span class="number">5.0</span>],\</span><br><span class="line">    [<span class="number">8.0</span>, <span class="number">10.0</span>, <span class="number">1.0</span>]])</span><br><span class="line"></span><br><span class="line">nor_samples = raw_samples.copy()</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> nor_samples:</span><br><span class="line">    row /= <span class="built_in">abs</span>(row).<span class="built_in">sum</span>()  <span class="comment"># 先对行求绝对值，再求和，再除以绝对值之和</span></span><br><span class="line"><span class="built_in">print</span>(nor_samples)  <span class="comment"># 打印结果</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># norm=l1  /=绝对值之和</span></span><br><span class="line"><span class="comment"># norm=l2  /=平方之和</span></span><br><span class="line">nor_samples = sp.normalize(raw_samples.copy(), norm=<span class="string">&#x27;l1&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(nor_samples)  <span class="comment"># 打印结果</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>[[0.28571429 0.57142857 0.14285714] [0.42105263 0.52631579 0.05263158]][[0.28571429 0.57142857 0.14285714] [0.42105263 0.52631579 0.05263158]]</code></pre><h3 id="二值化-2">二值化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 二值化</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> sklearn.preprocessing <span class="keyword">as</span> sp</span><br><span class="line"></span><br><span class="line">raw_samples = np.array([[<span class="number">65.5</span>, <span class="number">89.0</span>, <span class="number">73.0</span>],\</span><br><span class="line">                        [<span class="number">55.0</span>, <span class="number">99.0</span>, <span class="number">98.5</span>],\</span><br><span class="line">                        [<span class="number">45.0</span>, <span class="number">22.5</span>, <span class="number">60.0</span>]])</span><br><span class="line"></span><br><span class="line">bin_samples = raw_samples.copy()  <span class="comment"># 复制数组</span></span><br><span class="line"><span class="comment"># 生成掩码数组</span></span><br><span class="line">mask1 = bin_samples &lt; <span class="number">60</span></span><br><span class="line"><span class="built_in">print</span>(mask1)</span><br><span class="line">mask2 = bin_samples &gt;= <span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过掩码进行二值化处理 (只转换True的位置)</span></span><br><span class="line">bin_samples[mask1] = <span class="number">0</span></span><br><span class="line"><span class="built_in">print</span>(bin_samples)</span><br><span class="line">bin_samples[mask2] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(bin_samples)  <span class="comment"># 打印结果</span></span><br><span class="line"></span><br><span class="line">bin_transformer = sp.Binarizer(threshold=<span class="number">60</span> - <span class="number">1</span>)  <span class="comment"># 创建二值化对象(注意边界值)</span></span><br><span class="line">bin_samples = bin_transformer.transform(raw_samples.copy())  <span class="comment"># 二值化预处理</span></span><br><span class="line"><span class="built_in">print</span>(bin_samples)</span><br></pre></td></tr></table></figure><pre><code>[[False False False] [ True False False] [ True  True False]][[65.5 89.  73. ] [ 0.  99.  98.5] [ 0.   0.  60. ]][[1. 1. 1.] [0. 1. 1.] [0. 0. 1.]][[1. 1. 1.] [0. 1. 1.] [0. 0. 1.]]</code></pre><h3 id="独热编码示例">独热编码示例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> sklearn.preprocessing <span class="keyword">as</span> sp</span><br><span class="line"></span><br><span class="line">raw_samples = np.array([[<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>],\</span><br><span class="line">                        [<span class="number">7</span>, <span class="number">5</span>, <span class="number">4</span>],\</span><br><span class="line">                        [<span class="number">1</span>, <span class="number">8</span>, <span class="number">6</span>],\</span><br><span class="line">                        [<span class="number">7</span>, <span class="number">3</span>, <span class="number">9</span>]])</span><br><span class="line"></span><br><span class="line">one_hot_encoder = sp.OneHotEncoder(</span><br><span class="line">    sparse=<span class="literal">False</span>,  <span class="comment"># 是否采用稀疏格式</span></span><br><span class="line">    dtype=<span class="string">&quot;int32&quot;</span>,</span><br><span class="line">    categories=<span class="string">&quot;auto&quot;</span>)  <span class="comment"># 自动编码</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行独热编码</span></span><br><span class="line">oh_samples = one_hot_encoder.fit_transform(raw_samples.copy())</span><br><span class="line"><span class="built_in">print</span>(oh_samples)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(one_hot_encoder.inverse_transform(oh_samples))  <span class="comment"># 解码</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>[[1 0 1 0 0 1 0 0 0] [0 1 0 1 0 0 1 0 0] [1 0 0 0 1 0 0 1 0] [0 1 1 0 0 0 0 0 1]][[1 3 2] [7 5 4] [1 8 6] [7 3 9]]</code></pre><h3 id="标签编码-2">标签编码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> sklearn.preprocessing <span class="keyword">as</span> sp</span><br><span class="line"></span><br><span class="line">raw_samples = np.array([<span class="string">&#x27;audi&#x27;</span>, <span class="string">&#x27;ford&#x27;</span>, <span class="string">&#x27;audi&#x27;</span>, <span class="string">&#x27;bmw&#x27;</span>, <span class="string">&#x27;ford&#x27;</span>, <span class="string">&#x27;bmw&#x27;</span>])</span><br><span class="line"></span><br><span class="line">lb_encoder = sp.LabelEncoder()  <span class="comment"># 定义标签编码对象</span></span><br><span class="line">lb_samples = lb_encoder.fit_transform(raw_samples.copy())  <span class="comment"># 执行标签编码</span></span><br><span class="line"><span class="built_in">print</span>(lb_samples)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(lb_encoder.inverse_transform(lb_samples))  <span class="comment"># 逆向转换</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>[0 2 0 1 2 1]['audi' 'ford' 'audi' 'bmw' 'ford' 'bmw']</code></pre><h2 id="基本问题-2">基本问题</h2><h3 id="回归问题-2">回归问题</h3><h4 id="线性回归-2">线性回归</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> mp</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> axes3d</span><br><span class="line"><span class="keyword">import</span> sklearn.preprocessing <span class="keyword">as</span> sp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 训练数据集</span></span><br><span class="line">train_x = np.array([<span class="number">0.5</span>, <span class="number">0.6</span>, <span class="number">0.8</span>, <span class="number">1.1</span>, <span class="number">1.4</span>])  <span class="comment"># 输入集</span></span><br><span class="line">train_y = np.array([<span class="number">5.0</span>, <span class="number">5.5</span>, <span class="number">6.0</span>, <span class="number">6.8</span>, <span class="number">7.0</span>])  <span class="comment"># 输出集</span></span><br><span class="line"></span><br><span class="line">n_epochs = <span class="number">30</span>  <span class="comment"># 迭代次数</span></span><br><span class="line">l_rate = <span class="number">0.01</span>  <span class="comment"># 学习率</span></span><br><span class="line">epochs = []  <span class="comment"># 记录迭代次数</span></span><br><span class="line">losses = []  <span class="comment"># 记录损失值</span></span><br><span class="line"></span><br><span class="line">w0, w1 = [<span class="number">1</span>], [<span class="number">1</span>]  <span class="comment"># 模型初始值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n_epochs + <span class="number">1</span>):</span><br><span class="line">    epochs.append(i)  <span class="comment"># 记录第几次迭代</span></span><br><span class="line"></span><br><span class="line">    y = w0[-<span class="number">1</span>] + w1[-<span class="number">1</span>] * train_x  <span class="comment"># 取出最新的w0,w1计算线性方程输出</span></span><br><span class="line">    <span class="comment"># 损失函数(均方差)</span></span><br><span class="line">    loss = (((train_y - y)**<span class="number">2</span>).<span class="built_in">sum</span>()) / <span class="number">2</span></span><br><span class="line">    losses.append(loss)  <span class="comment"># 记录每次迭代的损失值</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;%d: w0=%f, w1=%f, loss=%f&quot;</span> % (i, w0[-<span class="number">1</span>], w1[-<span class="number">1</span>], loss))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算w0,w1的偏导数</span></span><br><span class="line">    d0 = -(train_y - y).<span class="built_in">sum</span>()</span><br><span class="line">    d1 = -(train_x * (train_y - y)).<span class="built_in">sum</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 更新w0,w1</span></span><br><span class="line">    w0.append(w0[-<span class="number">1</span>] - (d0 * l_rate))</span><br><span class="line">    w1.append(w1[-<span class="number">1</span>] - (d1 * l_rate))</span><br><span class="line"></span><br><span class="line"><span class="comment">###################### 训练过程可视化 ######################</span></span><br><span class="line"><span class="comment">## 损失函数收敛过程</span></span><br><span class="line">w0 = np.array(w0[:-<span class="number">1</span>])</span><br><span class="line">w1 = np.array(w1[:-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">mp.figure(<span class="string">&quot;Losses&quot;</span>, facecolor=<span class="string">&quot;lightgray&quot;</span>)  <span class="comment"># 创建一个窗体</span></span><br><span class="line">mp.title(<span class="string">&quot;epoch&quot;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">mp.ylabel(<span class="string">&quot;loss&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">mp.grid(linestyle=<span class="string">&quot;:&quot;</span>)  <span class="comment"># 网格线：虚线</span></span><br><span class="line">mp.plot(epochs, losses, c=<span class="string">&quot;blue&quot;</span>, label=<span class="string">&quot;loss&quot;</span>)</span><br><span class="line">mp.legend()  <span class="comment"># 图例</span></span><br><span class="line">mp.tight_layout()  <span class="comment"># 紧凑格式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 显示模型直线</span></span><br><span class="line">pred_y = w0[-<span class="number">1</span>] + w1[-<span class="number">1</span>] * train_x  <span class="comment"># 根据x预测y</span></span><br><span class="line">mp.figure(<span class="string">&quot;Linear Regression&quot;</span>, facecolor=<span class="string">&quot;lightgray&quot;</span>)</span><br><span class="line">mp.title(<span class="string">&quot;Linear Regression&quot;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">mp.xlabel(<span class="string">&quot;x&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">mp.ylabel(<span class="string">&quot;y&quot;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">mp.grid(linestyle=<span class="string">&quot;:&quot;</span>)</span><br><span class="line">mp.scatter(train_x, train_y, c=<span class="string">&quot;blue&quot;</span>, label=<span class="string">&quot;Traing&quot;</span>)  <span class="comment"># 绘制样本散点图</span></span><br><span class="line">mp.plot(train_x, pred_y, c=<span class="string">&quot;red&quot;</span>, label=<span class="string">&quot;Regression&quot;</span>)</span><br><span class="line">mp.legend()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示梯度下降过程(复制粘贴即可，不需要编写)</span></span><br><span class="line"><span class="comment"># 计算损失函数曲面上的点 loss = f(w0, w1)</span></span><br><span class="line">arr1 = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">500</span>)  <span class="comment"># 0~9间产生500个元素的均匀列表</span></span><br><span class="line">arr2 = np.linspace(<span class="number">0</span>, <span class="number">3.5</span>, <span class="number">500</span>)  <span class="comment"># 0~3.5间产生500个元素的均匀列表</span></span><br><span class="line"></span><br><span class="line">grid_w0, grid_w1 = np.meshgrid(arr1, arr2)  <span class="comment"># 产生二维矩阵</span></span><br><span class="line"></span><br><span class="line">flat_w0, flat_w1 = grid_w0.ravel(), grid_w1.ravel()  <span class="comment"># 二维矩阵扁平化</span></span><br><span class="line">loss_metrix = train_y.reshape(-<span class="number">1</span>, <span class="number">1</span>)  <span class="comment"># 生成误差矩阵（-1,1）表示自动计算维度</span></span><br><span class="line">outer = np.outer(train_x, flat_w1)  <span class="comment"># 求外积（train_x和flat_w1元素两两相乘的新矩阵）</span></span><br><span class="line"><span class="comment"># 计算损失：((w0 + w1*x - y)**2)/2</span></span><br><span class="line">flat_loss = (((flat_w0 + outer - loss_metrix)**<span class="number">2</span>).<span class="built_in">sum</span>(axis=<span class="number">0</span>)) / <span class="number">2</span></span><br><span class="line">grid_loss = flat_loss.reshape(grid_w0.shape)</span><br><span class="line"></span><br><span class="line">mp.figure(<span class="string">&#x27;Loss Function&#x27;</span>)</span><br><span class="line">ax = mp.axes(projection=<span class="string">&#x27;3d&#x27;</span>)</span><br><span class="line">mp.title(<span class="string">&#x27;Loss Function&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;w0&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;w1&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">ax.set_zlabel(<span class="string">&#x27;loss&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">ax.plot_surface(grid_w0,</span><br><span class="line">                grid_w1,</span><br><span class="line">                grid_loss,</span><br><span class="line">                rstride=<span class="number">10</span>,</span><br><span class="line">                cstride=<span class="number">10</span>,</span><br><span class="line">                cmap=<span class="string">&#x27;jet&#x27;</span>)</span><br><span class="line">ax.plot(w0, w1, losses, <span class="string">&#x27;o-&#x27;</span>, c=<span class="string">&#x27;orangered&#x27;</span>, label=<span class="string">&#x27;BGD&#x27;</span>, zorder=<span class="number">5</span>)</span><br><span class="line">mp.legend(loc=<span class="string">&#x27;lower left&#x27;</span>)</span><br><span class="line"></span><br><span class="line">mp.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>1: w0=1.000000, w1=1.000000, loss=44.1750002: w0=1.209000, w1=1.190600, loss=36.5388283: w0=1.399164, w1=1.363579, loss=30.2316874: w0=1.572208, w1=1.520546, loss=25.0222275: w0=1.729693, w1=1.662961, loss=20.7193736: w0=1.873039, w1=1.792151, loss=17.1653097: w0=2.003532, w1=1.909325, loss=14.2296918: w0=2.122345, w1=2.015577, loss=11.8048659: w0=2.230542, w1=2.111905, loss=9.80191610: w0=2.329091, w1=2.199215, loss=8.14740811: w0=2.418871, w1=2.278330, loss=6.78068812: w0=2.500681, w1=2.349997, loss=5.65166013: w0=2.575247, w1=2.414898, loss=4.71895014: w0=2.643230, w1=2.473648, loss=3.94838415: w0=2.705228, w1=2.526811, loss=3.31174016: w0=2.761786, w1=2.574896, loss=2.78570617: w0=2.813402, w1=2.618367, loss=2.35102918: w0=2.860524, w1=2.657645, loss=1.99180719: w0=2.903561, w1=2.693114, loss=1.69490720: w0=2.942886, w1=2.725122, loss=1.44948221: w0=2.978836, w1=2.753985, loss=1.24657222: w0=3.011719, w1=2.779990, loss=1.07877723: w0=3.041814, w1=2.803399, loss=0.93998724: w0=3.069373, w1=2.824449, loss=0.82515325: w0=3.094629, w1=2.843355, loss=0.73010726: w0=3.117790, w1=2.860315, loss=0.65140527: w0=3.139046, w1=2.875507, loss=0.58620428: w0=3.158572, w1=2.889091, loss=0.53215429: w0=3.176523, w1=2.901216, loss=0.48731530: w0=3.193044, w1=2.912016, loss=0.450086</code></pre><p><img src="ML_files/ML_13_1.png" alt="png"></p><p><img src="ML_files/ML_13_2.png" alt="png"></p><p><img src="ML_files/ML_13_3.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 利用LinearRegression实现线性回归</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> sklearn.linear_model <span class="keyword">as</span> lm  <span class="comment"># 线性模型# 线性模型</span></span><br><span class="line"><span class="keyword">import</span> sklearn.metrics <span class="keyword">as</span> sm  <span class="comment"># 模型性能评价模块</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> mp</span><br><span class="line"></span><br><span class="line">train_x = np.array([[<span class="number">0.5</span>], [<span class="number">0.6</span>], [<span class="number">0.8</span>], [<span class="number">1.1</span>], [<span class="number">1.4</span>]])  <span class="comment"># 输入集</span></span><br><span class="line">train_y = np.array([<span class="number">5.0</span>, <span class="number">5.5</span>, <span class="number">6.0</span>, <span class="number">6.8</span>, <span class="number">7.0</span>])  <span class="comment"># 输出集</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线性回归器</span></span><br><span class="line">line_model = lm.LinearRegression()</span><br><span class="line"><span class="comment"># 用已知输入、输出数据集训练回归器</span></span><br><span class="line">line_model.fit(train_x, train_y)</span><br><span class="line"><span class="comment"># 根据训练模型预测输出</span></span><br><span class="line">pred_y = line_model.predict(train_x)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;coef_:&quot;</span>, line_model.coef_)  <span class="comment"># 系数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;intercept_:&quot;</span>, line_model.intercept_)  <span class="comment"># 截距</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可视化回归曲线</span></span><br><span class="line">mp.figure(<span class="string">&#x27;Linear Regression&#x27;</span>, facecolor=<span class="string">&#x27;lightgray&#x27;</span>)</span><br><span class="line">mp.title(<span class="string">&#x27;Linear Regression&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">mp.xlabel(<span class="string">&#x27;x&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">mp.ylabel(<span class="string">&#x27;y&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">mp.tick_params(labelsize=<span class="number">10</span>)</span><br><span class="line">mp.grid(linestyle=<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制样本点</span></span><br><span class="line">mp.scatter(train_x, train_y, c=<span class="string">&#x27;blue&#x27;</span>, alpha=<span class="number">0.8</span>, s=<span class="number">60</span>, label=<span class="string">&#x27;Sample&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制拟合直线</span></span><br><span class="line">mp.plot(</span><br><span class="line">    train_x,  <span class="comment"># x坐标数据</span></span><br><span class="line">    pred_y,  <span class="comment"># y坐标数据</span></span><br><span class="line">    c=<span class="string">&#x27;orangered&#x27;</span>,</span><br><span class="line">    label=<span class="string">&#x27;Regression Line&#x27;</span>)</span><br><span class="line"></span><br><span class="line">mp.legend()  <span class="comment"># 左上角的图例</span></span><br><span class="line">mp.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>coef_: [2.2189781]intercept_: 4.107299270072994</code></pre><p><img src="ML_files/ML_14_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets, linear_model, model_selection</span><br><span class="line"></span><br><span class="line"><span class="comment"># science kit learn 自带的糖尿病数据</span></span><br><span class="line">X, y = datasets.load_diabetes(return_X_y=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 442 * 10 大小的二维数组</span></span><br><span class="line"><span class="built_in">print</span>(X.shape)</span><br><span class="line"><span class="comment"># No.1 * 10</span></span><br><span class="line"><span class="built_in">print</span>(X[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只取第二维的第三列作为特征输入 (也就是0.06169621这一列)</span></span><br><span class="line">X = X[:, np.newaxis, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># train : test = 2 : 1</span></span><br><span class="line">X_train, X_test, y_train, y_test = model_selection.train_test_split(</span><br><span class="line">    X, y, test_size=<span class="number">0.33</span>)</span><br><span class="line"></span><br><span class="line">model = linear_model.LinearRegression()</span><br><span class="line">model.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">y_pred = model.predict(X_test)</span><br><span class="line"></span><br><span class="line">plt.scatter(X_test, y_test, color=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">plt.plot(X_test, y_pred, color=<span class="string">&#x27;blue&#x27;</span>, linewidth=<span class="number">3</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><pre><code>(442, 10)[ 0.03807591  0.05068012  0.06169621  0.02187235 -0.0442235  -0.03482076 -0.04340085 -0.00259226  0.01990842 -0.01764613]</code></pre><p><img src="ML_files/ML_15_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">pumpkins = pd.read_csv(<span class="string">&#x27;./_data_set/US-pumpkins.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">pumpkins = pumpkins[pumpkins[<span class="string">&#x27;Package&#x27;</span>].<span class="built_in">str</span>.contains(<span class="string">&#x27;bushel&#x27;</span>,</span><br><span class="line">                                                     case=<span class="literal">True</span>,</span><br><span class="line">                                                     regex=<span class="literal">True</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># pumpkins.head()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pumpkins.isnull().sum()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A set of new columns for a new dataframe. Filter out nonmatching columns</span></span><br><span class="line">pumpkins = pumpkins.drop([</span><br><span class="line">    c <span class="keyword">for</span> c <span class="keyword">in</span> pumpkins.columns <span class="keyword">if</span> c <span class="keyword">not</span> <span class="keyword">in</span> [</span><br><span class="line">        <span class="string">&#x27;Package&#x27;</span>, <span class="string">&#x27;Variety&#x27;</span>, <span class="string">&#x27;City Name&#x27;</span>, <span class="string">&#x27;Month&#x27;</span>, <span class="string">&#x27;Low Price&#x27;</span>, <span class="string">&#x27;High Price&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Date&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">],</span><br><span class="line">                         axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Get an average between low and high price for the base pumpkin price</span></span><br><span class="line">price = (pumpkins[<span class="string">&#x27;Low Price&#x27;</span>] + pumpkins[<span class="string">&#x27;High Price&#x27;</span>]) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a new dataframe with this basic data</span></span><br><span class="line">new_pumpkins = pd.DataFrame(&#123;</span><br><span class="line">    <span class="comment"># Convert the date to its month only</span></span><br><span class="line">    <span class="string">&#x27;Month&#x27;</span>:</span><br><span class="line">    pd.DatetimeIndex(pumpkins[<span class="string">&#x27;Date&#x27;</span>]).month,</span><br><span class="line">    <span class="string">&#x27;DayOfYear&#x27;</span>:</span><br><span class="line">    pd.to_datetime(pumpkins[<span class="string">&#x27;Date&#x27;</span>]).apply(</span><br><span class="line">        <span class="keyword">lambda</span> dt: (dt - datetime(dt.year, <span class="number">1</span>, <span class="number">1</span>)).days),</span><br><span class="line">    <span class="string">&#x27;Variety&#x27;</span>:</span><br><span class="line">    pumpkins[<span class="string">&#x27;Variety&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;City&#x27;</span>:</span><br><span class="line">    pumpkins[<span class="string">&#x27;City Name&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;Package&#x27;</span>:</span><br><span class="line">    pumpkins[<span class="string">&#x27;Package&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;Low Price&#x27;</span>:</span><br><span class="line">    pumpkins[<span class="string">&#x27;Low Price&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;High Price&#x27;</span>:</span><br><span class="line">    pumpkins[<span class="string">&#x27;High Price&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;Price&#x27;</span>:</span><br><span class="line">    price</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Convert the price if the Package contains fractional bushel values</span></span><br><span class="line"><span class="comment"># loc 遍历Package列中包含 &#x27;1 1/9&#x27; 的行, 对每行的 Price 列进行操作</span></span><br><span class="line">new_pumpkins.loc[new_pumpkins[<span class="string">&#x27;Package&#x27;</span>].<span class="built_in">str</span>.contains(<span class="string">&#x27;1 1/9&#x27;</span>),</span><br><span class="line">                 <span class="string">&#x27;Price&#x27;</span>] = price / (<span class="number">1</span> + <span class="number">1</span> / <span class="number">9</span>)</span><br><span class="line">new_pumpkins.loc[new_pumpkins[<span class="string">&#x27;Package&#x27;</span>].<span class="built_in">str</span>.contains(<span class="string">&#x27;1/2&#x27;</span>),</span><br><span class="line">                 <span class="string">&#x27;Price&#x27;</span>] = price / (<span class="number">1</span> / <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 散点图</span></span><br><span class="line">plt.scatter(new_pumpkins.Price, new_pumpkins.Month)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Price&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Month&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 柱状图</span></span><br><span class="line">new_pumpkins.groupby([<span class="string">&#x27;Month&#x27;</span>])[<span class="string">&#x27;Price&#x27;</span>].mean().plot(kind=<span class="string">&#x27;bar&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Month&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax = <span class="literal">None</span></span><br><span class="line">colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;yellow&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> i, var <span class="keyword">in</span> <span class="built_in">enumerate</span>(new_pumpkins[<span class="string">&#x27;Variety&#x27;</span>].unique()):</span><br><span class="line">    ax = new_pumpkins[new_pumpkins[<span class="string">&#x27;Variety&#x27;</span>] == var].plot.scatter(<span class="string">&#x27;DayOfYear&#x27;</span>,</span><br><span class="line">                                                                   <span class="string">&#x27;Price&#x27;</span>,</span><br><span class="line">                                                                   ax=ax,</span><br><span class="line">                                                                   c=colors[i],</span><br><span class="line">                                                                   label=var)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="ML_files/ML_16_0.png" alt="png"></p><p><img src="ML_files/ML_16_1.png" alt="png"></p><p><img src="ML_files/ML_16_2.png" alt="png"></p><h4 id="多项式回归-2">多项式回归</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> r2_score, mean_squared_error, mean_absolute_error</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> PolynomialFeatures</span><br><span class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> make_pipeline</span><br><span class="line"></span><br><span class="line">pumpkins = pd.read_csv(<span class="string">&#x27;./_data_set/US-pumpkins.csv&#x27;</span>)</span><br><span class="line">pumpkins = pumpkins[pumpkins[<span class="string">&#x27;Package&#x27;</span>].<span class="built_in">str</span>.contains(<span class="string">&#x27;bushel&#x27;</span>,</span><br><span class="line">                                                     case=<span class="literal">True</span>,</span><br><span class="line">                                                     regex=<span class="literal">True</span>)]</span><br><span class="line">pumpkins = pumpkins.drop([</span><br><span class="line">    c <span class="keyword">for</span> c <span class="keyword">in</span> pumpkins.columns <span class="keyword">if</span> c <span class="keyword">not</span> <span class="keyword">in</span> [</span><br><span class="line">        <span class="string">&#x27;Package&#x27;</span>, <span class="string">&#x27;Variety&#x27;</span>, <span class="string">&#x27;City Name&#x27;</span>, <span class="string">&#x27;Month&#x27;</span>, <span class="string">&#x27;Low Price&#x27;</span>, <span class="string">&#x27;High Price&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Date&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">],</span><br><span class="line">                         axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">price = (pumpkins[<span class="string">&#x27;Low Price&#x27;</span>] + pumpkins[<span class="string">&#x27;High Price&#x27;</span>]) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">new_pumpkins = pd.DataFrame(&#123;</span><br><span class="line">    <span class="string">&#x27;Month&#x27;</span>:</span><br><span class="line">    pd.DatetimeIndex(pumpkins[<span class="string">&#x27;Date&#x27;</span>]).month,</span><br><span class="line">    <span class="string">&#x27;DayOfYear&#x27;</span>:</span><br><span class="line">    pd.to_datetime(pumpkins[<span class="string">&#x27;Date&#x27;</span>]).apply(</span><br><span class="line">        <span class="keyword">lambda</span> dt: (dt - datetime(dt.year, <span class="number">1</span>, <span class="number">1</span>)).days),</span><br><span class="line">    <span class="string">&#x27;Variety&#x27;</span>:</span><br><span class="line">    pumpkins[<span class="string">&#x27;Variety&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;City&#x27;</span>:</span><br><span class="line">    pumpkins[<span class="string">&#x27;City Name&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;Package&#x27;</span>:</span><br><span class="line">    pumpkins[<span class="string">&#x27;Package&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;Low Price&#x27;</span>:</span><br><span class="line">    pumpkins[<span class="string">&#x27;Low Price&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;High Price&#x27;</span>:</span><br><span class="line">    pumpkins[<span class="string">&#x27;High Price&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;Price&#x27;</span>:</span><br><span class="line">    price</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">new_pumpkins.loc[new_pumpkins[<span class="string">&#x27;Package&#x27;</span>].<span class="built_in">str</span>.contains(<span class="string">&#x27;1 1/9&#x27;</span>),</span><br><span class="line">                 <span class="string">&#x27;Price&#x27;</span>] = price / <span class="number">1.1</span></span><br><span class="line">new_pumpkins.loc[new_pumpkins[<span class="string">&#x27;Package&#x27;</span>].<span class="built_in">str</span>.contains(<span class="string">&#x27;1/2&#x27;</span>),</span><br><span class="line">                 <span class="string">&#x27;Price&#x27;</span>] = price * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">pie_pumpkins = new_pumpkins[new_pumpkins[<span class="string">&#x27;Variety&#x27;</span>] == <span class="string">&#x27;PIE TYPE&#x27;</span>]</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(</span><br><span class="line">    pie_pumpkins[<span class="string">&#x27;DayOfYear&#x27;</span>].to_numpy().reshape(-<span class="number">1</span>, <span class="number">1</span>),</span><br><span class="line">    pie_pumpkins[<span class="string">&#x27;Price&#x27;</span>],</span><br><span class="line">    test_size=<span class="number">0.2</span>,</span><br><span class="line">    random_state=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">pipeline = make_pipeline(PolynomialFeatures(<span class="number">2</span>), LinearRegression())</span><br><span class="line"></span><br><span class="line">pipeline.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">pred = pipeline.predict(X_test)</span><br><span class="line"></span><br><span class="line">mse = np.sqrt(mean_squared_error(y_test, pred))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Mean error: <span class="subst">&#123;mse:<span class="number">3.3</span>&#125;</span> (<span class="subst">&#123;mse/np.mean(pred)*<span class="number">100</span>:<span class="number">3.3</span>&#125;</span>%)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">score = pipeline.score(X_train, y_train)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Model determination: &#x27;</span>, score)</span><br><span class="line"></span><br><span class="line">plt.scatter(X_test, y_test)</span><br><span class="line">plt.plot(<span class="built_in">sorted</span>(X_test), pipeline.predict(<span class="built_in">sorted</span>(X_test)))</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>Mean error: 2.73 (17.0%)Model determination:  0.07639977655280084[&lt;matplotlib.lines.Line2D at 0x19b75ee76d0&gt;]</code></pre><p><img src="ML_files/ML_18_2.png" alt="png"></p><h3 id="决策树-随机森林-2">决策树-随机森林</h3><h4 id="决策树分类">决策树分类</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> tree</span><br><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder</span><br><span class="line"><span class="keyword">import</span> pydotplus</span><br><span class="line"></span><br><span class="line">mpl.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;simHei&#x27;</span>]</span><br><span class="line">mpl.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">iris_feature_E = <span class="string">&#x27;sepal length&#x27;</span>, <span class="string">&#x27;sepal width&#x27;</span>, <span class="string">&#x27;petal length&#x27;</span>, <span class="string">&#x27;petal width&#x27;</span></span><br><span class="line">iris_feature = <span class="string">&#x27;花萼长度&#x27;</span>, <span class="string">&#x27;花萼宽度&#x27;</span>, <span class="string">&#x27;花瓣长度&#x27;</span>, <span class="string">&#x27;花瓣宽度&#x27;</span></span><br><span class="line">iris_class = <span class="string">&#x27;Iris-setosa&#x27;</span>, <span class="string">&#x27;Iris-versicolor&#x27;</span>, <span class="string">&#x27;Iris-virginica&#x27;</span></span><br><span class="line"></span><br><span class="line">path = <span class="string">&#x27;./_data_set/iris_classification/iris.data&#x27;</span>  <span class="comment"># 数据文件路径</span></span><br><span class="line">data = pd.read_csv(path, header=<span class="literal">None</span>)</span><br><span class="line">x = data[<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">4</span>))]</span><br><span class="line"><span class="comment"># y = pd.Categorical(data[4]).codes</span></span><br><span class="line">y = LabelEncoder().fit_transform(data[<span class="number">4</span>])</span><br><span class="line"><span class="comment"># 为了可视化，仅使用前两列特征</span></span><br><span class="line">x = x[[<span class="number">0</span>, <span class="number">1</span>]]</span><br><span class="line"><span class="comment"># x = x.iloc[:, :2]</span></span><br><span class="line">x_train, x_test, y_train, y_test = train_test_split(x,</span><br><span class="line">                                                    y,</span><br><span class="line">                                                    test_size=<span class="number">0.3</span>,</span><br><span class="line">                                                    random_state=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 决策树参数估计</span></span><br><span class="line"><span class="comment"># min_samples_split = 10：如果该结点包含的样本数目大于10，则(有可能)对其分支</span></span><br><span class="line"><span class="comment"># min_samples_leaf = 10：若将某结点分支后，得到的每个子结点样本数目都大于10，则完成分支；否则，不进行分支</span></span><br><span class="line">model = DecisionTreeClassifier(criterion=<span class="string">&#x27;entropy&#x27;</span>)</span><br><span class="line">model.fit(x_train, y_train)</span><br><span class="line">y_train_pred = model.predict(x_train)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;训练集正确率：&#x27;</span>, accuracy_score(y_train, y_train_pred))</span><br><span class="line">y_test_hat = model.predict(x_test)  <span class="comment"># 测试数据</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;测试集正确率：&#x27;</span>, accuracy_score(y_test, y_test_hat))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存</span></span><br><span class="line"><span class="comment"># dot -Tpng my.dot -o my.png</span></span><br><span class="line"><span class="comment"># 1、输出</span></span><br><span class="line"><span class="comment"># with open(&#x27;iris.dot&#x27;, &#x27;w&#x27;) as f:</span></span><br><span class="line"><span class="comment">#     tree.export_graphviz(model, out_file=f, feature_names=iris_feature_E[0:2], class_names=iris_class,</span></span><br><span class="line"><span class="comment">#                          filled=True, rounded=True, special_characters=True)</span></span><br><span class="line">tree.export_graphviz(model,</span><br><span class="line">                     out_file=<span class="string">&#x27;./_data_set/iris_classification/iris.dot&#x27;</span>,</span><br><span class="line">                     feature_names=iris_feature_E[<span class="number">0</span>:<span class="number">2</span>],</span><br><span class="line">                     class_names=iris_class,</span><br><span class="line">                     filled=<span class="literal">True</span>,</span><br><span class="line">                     rounded=<span class="literal">True</span>,</span><br><span class="line">                     special_characters=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 2、给定文件名</span></span><br><span class="line"><span class="comment"># tree.export_graphviz(model, out_file=&#x27;iris.dot&#x27;)</span></span><br><span class="line"><span class="comment"># tree.export_graphviz(model, out_file=&#x27;iris.dot&#x27;)</span></span><br><span class="line"><span class="comment"># 3、输出为pdf格式</span></span><br><span class="line">dot_data = tree.export_graphviz(model,</span><br><span class="line">                                out_file=<span class="literal">None</span>,</span><br><span class="line">                                feature_names=iris_feature_E[<span class="number">0</span>:<span class="number">2</span>],</span><br><span class="line">                                class_names=iris_class,</span><br><span class="line">                                filled=<span class="literal">True</span>,</span><br><span class="line">                                rounded=<span class="literal">True</span>,</span><br><span class="line">                                special_characters=<span class="literal">True</span>)</span><br><span class="line">graph = pydotplus.graph_from_dot_data(dot_data)</span><br><span class="line">graph.write_pdf(<span class="string">&#x27;./_data_set/iris_classification/iris.pdf&#x27;</span>)</span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;./_data_set/iris_classification/iris.png&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">f.write(graph.create_png())</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画图</span></span><br><span class="line">N, M = <span class="number">50</span>, <span class="number">50</span>  <span class="comment"># 横纵各采样多少个值</span></span><br><span class="line">x1_min, x2_min = x.<span class="built_in">min</span>()</span><br><span class="line">x1_max, x2_max = x.<span class="built_in">max</span>()</span><br><span class="line">t1 = np.linspace(x1_min, x1_max, N)</span><br><span class="line">t2 = np.linspace(x2_min, x2_max, M)</span><br><span class="line">x1, x2 = np.meshgrid(t1, t2)  <span class="comment"># 生成网格采样点</span></span><br><span class="line">x_show = np.stack((x1.flat, x2.flat), axis=<span class="number">1</span>)  <span class="comment"># 测试点</span></span><br><span class="line"><span class="built_in">print</span>(x_show.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;x_show = \n&#x27;</span>, x_show)</span><br><span class="line"></span><br><span class="line">cm_light = mpl.colors.ListedColormap([<span class="string">&#x27;#A0FFA0&#x27;</span>, <span class="string">&#x27;#FFA0A0&#x27;</span>, <span class="string">&#x27;#A0A0FF&#x27;</span>])</span><br><span class="line">cm_dark = mpl.colors.ListedColormap([<span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line">y_show_hat = model.predict(x_show)  <span class="comment"># 预测值</span></span><br><span class="line"><span class="built_in">print</span>(y_show_hat.shape)</span><br><span class="line"><span class="built_in">print</span>(y_show_hat)</span><br><span class="line">y_show_hat = y_show_hat.reshape(x1.shape)  <span class="comment"># 使之与输入的形状相同</span></span><br><span class="line"><span class="built_in">print</span>(y_show_hat)</span><br><span class="line">plt.figure(facecolor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">plt.pcolormesh(x1, x2, y_show_hat, cmap=cm_light, shading=<span class="string">&#x27;auto&#x27;</span>)  <span class="comment"># 预测值的显示</span></span><br><span class="line">plt.scatter(x_test[<span class="number">0</span>],</span><br><span class="line">            x_test[<span class="number">1</span>],</span><br><span class="line">            c=y_test.ravel(),</span><br><span class="line">            edgecolors=<span class="string">&#x27;k&#x27;</span>,</span><br><span class="line">            s=<span class="number">100</span>,</span><br><span class="line">            zorder=<span class="number">10</span>,</span><br><span class="line">            cmap=cm_dark,</span><br><span class="line">            marker=<span class="string">&#x27;*&#x27;</span>)  <span class="comment"># 测试数据</span></span><br><span class="line">plt.scatter(x[<span class="number">0</span>], x[<span class="number">1</span>], c=y.ravel(), edgecolors=<span class="string">&#x27;k&#x27;</span>, s=<span class="number">20</span>,</span><br><span class="line">            cmap=cm_dark)  <span class="comment"># 全部数据</span></span><br><span class="line">plt.xlabel(iris_feature[<span class="number">0</span>], fontsize=<span class="number">13</span>)</span><br><span class="line">plt.ylabel(iris_feature[<span class="number">1</span>], fontsize=<span class="number">13</span>)</span><br><span class="line">plt.xlim(x1_min, x1_max)</span><br><span class="line">plt.ylim(x2_min, x2_max)</span><br><span class="line">plt.grid(b=<span class="literal">True</span>, ls=<span class="string">&#x27;:&#x27;</span>, color=<span class="string">&#x27;#606060&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;鸢尾花数据的决策树分类&#x27;</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 训练集上的预测结果</span></span><br><span class="line">y_test = y_test.reshape(-<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(y_test_hat)</span><br><span class="line"><span class="built_in">print</span>(y_test)</span><br><span class="line">result = (y_test_hat == y_test)  <span class="comment"># True则预测正确，False则预测错误</span></span><br><span class="line">acc = np.mean(result)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;准确度: %.2f%%&#x27;</span> % (<span class="number">100</span> * acc))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 过拟合：错误率</span></span><br><span class="line">depth = np.arange(<span class="number">1</span>, <span class="number">15</span>)</span><br><span class="line">err_train_list = []</span><br><span class="line">err_test_list = []</span><br><span class="line">clf = DecisionTreeClassifier(criterion=<span class="string">&#x27;entropy&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> d <span class="keyword">in</span> depth:</span><br><span class="line">    clf.set_params(max_depth=d)</span><br><span class="line">    clf.fit(x_train, y_train)</span><br><span class="line">    y_train_pred = clf.predict(x_train)</span><br><span class="line">    err_train = <span class="number">1</span> - accuracy_score(y_train, y_train_pred)</span><br><span class="line">    err_train_list.append(err_train)</span><br><span class="line">    y_test_pred = clf.predict(x_test)</span><br><span class="line">    err_test = <span class="number">1</span> - accuracy_score(y_test, y_test_pred)</span><br><span class="line">    err_test_list.append(err_test)</span><br><span class="line">    <span class="built_in">print</span>(d, <span class="string">&#x27; 测试集错误率: %.2f%%&#x27;</span> % (<span class="number">100</span> * err_test))</span><br><span class="line">plt.figure(facecolor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">plt.plot(depth,</span><br><span class="line">         err_test_list,</span><br><span class="line">         <span class="string">&#x27;ro-&#x27;</span>,</span><br><span class="line">         markeredgecolor=<span class="string">&#x27;k&#x27;</span>,</span><br><span class="line">         lw=<span class="number">2</span>,</span><br><span class="line">         label=<span class="string">&#x27;测试集错误率&#x27;</span>)</span><br><span class="line">plt.plot(depth,</span><br><span class="line">         err_train_list,</span><br><span class="line">         <span class="string">&#x27;go-&#x27;</span>,</span><br><span class="line">         markeredgecolor=<span class="string">&#x27;k&#x27;</span>,</span><br><span class="line">         lw=<span class="number">2</span>,</span><br><span class="line">         label=<span class="string">&#x27;训练集错误率&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;决策树深度&#x27;</span>, fontsize=<span class="number">13</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;错误率&#x27;</span>, fontsize=<span class="number">13</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;lower left&#x27;</span>, fontsize=<span class="number">13</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;决策树深度与过拟合&#x27;</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.grid(b=<span class="literal">True</span>, ls=<span class="string">&#x27;:&#x27;</span>, color=<span class="string">&#x27;#606060&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><pre><code>训练集正确率： 0.9523809523809523测试集正确率： 0.6222222222222222(2500, 2)x_show =  [[4.3        2.        ] [4.37346939 2.        ] [4.44693878 2.        ] ... [7.75306122 4.4       ] [7.82653061 4.4       ] [7.9        4.4       ]](2500,)[0 0 0 ... 2 2 2][[0 0 0 ... 1 1 1] [0 0 0 ... 1 1 1] [0 0 0 ... 1 1 1] ... [0 0 0 ... 2 2 2] [0 0 0 ... 2 2 2] [0 0 0 ... 2 2 2]]</code></pre><p><img src="ML_files/ML_20_1.png" alt="png"></p><pre><code>[0 1 2 0 2 2 1 0 0 2 2 0 1 2 1 0 2 1 0 0 1 0 2 0 2 1 0 0 1 1 2 2 2 2 1 0 1 0 2 1 2 0 1 1 1][0 1 1 0 2 1 2 0 0 2 1 0 2 1 1 0 1 1 0 0 1 1 1 0 2 1 0 0 1 2 1 2 1 2 2 0 1 0 1 2 2 0 2 2 1]准确度: 62.22%1  测试集错误率: 44.44%2  测试集错误率: 40.00%3  测试集错误率: 20.00%4  测试集错误率: 24.44%5  测试集错误率: 24.44%6  测试集错误率: 28.89%7  测试集错误率: 37.78%8  测试集错误率: 40.00%9  测试集错误率: 37.78%10  测试集错误率: 40.00%11  测试集错误率: 37.78%12  测试集错误率: 37.78%13  测试集错误率: 40.00%14  测试集错误率: 37.78%</code></pre><p><img src="ML_files/ML_20_3.png" alt="png"></p><h4 id="随机森林-3">随机森林</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line">mpl.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">mpl.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">iris_feature = <span class="string">u&#x27;花萼长度&#x27;</span>, <span class="string">u&#x27;花萼宽度&#x27;</span>, <span class="string">u&#x27;花瓣长度&#x27;</span>, <span class="string">u&#x27;花瓣宽度&#x27;</span></span><br><span class="line">path = <span class="string">&#x27;./_data_set/iris_classification/iris.data&#x27;</span>  <span class="comment"># 数据文件路径</span></span><br><span class="line">data = pd.read_csv(path, header=<span class="literal">None</span>)</span><br><span class="line">x_prime = data[<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">4</span>))]</span><br><span class="line">y = pd.Categorical(data[<span class="number">4</span>]).codes</span><br><span class="line">x_prime_train, x_prime_test, y_train, y_test = train_test_split(x_prime,</span><br><span class="line">                                                                y,</span><br><span class="line">                                                                train_size=<span class="number">0.7</span>,</span><br><span class="line">                                                                random_state=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">feature_pairs = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>, <span class="number">6</span>), facecolor=<span class="string">&#x27;#FFFFFF&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i, pair <span class="keyword">in</span> <span class="built_in">enumerate</span>(feature_pairs):</span><br><span class="line">    <span class="comment"># 准备数据</span></span><br><span class="line">    x_train = x_prime_train[pair]</span><br><span class="line">    x_test = x_prime_test[pair]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 决策树学习</span></span><br><span class="line">    model = DecisionTreeClassifier(criterion=<span class="string">&#x27;entropy&#x27;</span>, min_samples_leaf=<span class="number">3</span>)</span><br><span class="line">    model.fit(x_train, y_train)</span><br><span class="line"></span><br><span class="line">    N, M = <span class="number">500</span>, <span class="number">500</span>  <span class="comment"># 横纵各采样多少个值</span></span><br><span class="line">    x1_min, x2_min = x_train.<span class="built_in">min</span>()</span><br><span class="line">    x1_max, x2_max = x_train.<span class="built_in">max</span>()</span><br><span class="line">    t1 = np.linspace(x1_min, x1_max, N)</span><br><span class="line">    t2 = np.linspace(x2_min, x2_max, M)</span><br><span class="line">    x1, x2 = np.meshgrid(t1, t2)  <span class="comment"># 生成网格采样点</span></span><br><span class="line">    x_show = np.stack((x1.flat, x2.flat), axis=<span class="number">1</span>)  <span class="comment"># 测试点</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 训练集上的预测结果</span></span><br><span class="line">    y_train_pred = model.predict(x_train)</span><br><span class="line">    acc_train = accuracy_score(y_train, y_train_pred)</span><br><span class="line">    y_test_pred = model.predict(x_test)</span><br><span class="line">    acc_test = accuracy_score(y_test, y_test_pred)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;特征：&#x27;</span>, iris_feature[pair[<span class="number">0</span>]], <span class="string">&#x27; + &#x27;</span>, iris_feature[pair[<span class="number">1</span>]])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\t训练集准确率: %.4f%%&#x27;</span> % (<span class="number">100</span> * acc_train))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\t测试集准确率: %.4f%%\n&#x27;</span> % (<span class="number">100</span> * acc_test))</span><br><span class="line"></span><br><span class="line">    cm_light = mpl.colors.ListedColormap([<span class="string">&#x27;#A0FFA0&#x27;</span>, <span class="string">&#x27;#FFA0A0&#x27;</span>, <span class="string">&#x27;#A0A0FF&#x27;</span>])</span><br><span class="line">    cm_dark = mpl.colors.ListedColormap([<span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line">    y_hat = model.predict(x_show)</span><br><span class="line">    y_hat = y_hat.reshape(x1.shape)</span><br><span class="line">    plt.subplot(<span class="number">2</span>, <span class="number">3</span>, i + <span class="number">1</span>)</span><br><span class="line">    plt.contour(x1,</span><br><span class="line">                x2,</span><br><span class="line">                y_hat,</span><br><span class="line">                colors=<span class="string">&#x27;k&#x27;</span>,</span><br><span class="line">                levels=[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">                antialiased=<span class="literal">True</span>,</span><br><span class="line">                linewidths=<span class="number">1</span>)</span><br><span class="line">    plt.pcolormesh(x1, x2, y_hat, cmap=cm_light, shading=<span class="string">&#x27;auto&#x27;</span>)  <span class="comment"># 预测值</span></span><br><span class="line">    plt.scatter(x_train[pair[<span class="number">0</span>]],</span><br><span class="line">                x_train[pair[<span class="number">1</span>]],</span><br><span class="line">                c=y_train,</span><br><span class="line">                s=<span class="number">20</span>,</span><br><span class="line">                edgecolors=<span class="string">&#x27;k&#x27;</span>,</span><br><span class="line">                cmap=cm_dark,</span><br><span class="line">                label=<span class="string">u&#x27;训练集&#x27;</span>)</span><br><span class="line">    plt.scatter(x_test[pair[<span class="number">0</span>]],</span><br><span class="line">                x_test[pair[<span class="number">1</span>]],</span><br><span class="line">                c=y_test,</span><br><span class="line">                s=<span class="number">80</span>,</span><br><span class="line">                marker=<span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">                edgecolors=<span class="string">&#x27;k&#x27;</span>,</span><br><span class="line">                cmap=cm_dark,</span><br><span class="line">                label=<span class="string">u&#x27;测试集&#x27;</span>)</span><br><span class="line">    plt.xlabel(iris_feature[pair[<span class="number">0</span>]], fontsize=<span class="number">12</span>)</span><br><span class="line">    plt.ylabel(iris_feature[pair[<span class="number">1</span>]], fontsize=<span class="number">12</span>)</span><br><span class="line">    <span class="comment"># plt.legend(loc=&#x27;upper right&#x27;, fancybox=True, framealpha=0.3)</span></span><br><span class="line">    plt.xlim(x1_min, x1_max)</span><br><span class="line">    plt.ylim(x2_min, x2_max)</span><br><span class="line">    plt.grid(b=<span class="literal">True</span>, ls=<span class="string">&#x27;:&#x27;</span>, color=<span class="string">&#x27;#606060&#x27;</span>)</span><br><span class="line">plt.suptitle(<span class="string">u&#x27;决策树对鸢尾花数据两特征组合的分类结果&#x27;</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.tight_layout(<span class="number">1</span>, rect=(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0.94</span>))  <span class="comment"># (left, bottom, right, top)</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>特征： 花萼长度  +  花萼宽度训练集准确率: 85.7143%测试集准确率: 71.1111%特征： 花萼长度  +  花瓣长度训练集准确率: 96.1905%测试集准确率: 91.1111%特征： 花萼长度  +  花瓣宽度训练集准确率: 96.1905%测试集准确率: 86.6667%特征： 花萼宽度  +  花瓣长度训练集准确率: 97.1429%测试集准确率: 95.5556%特征： 花萼宽度  +  花瓣宽度训练集准确率: 96.1905%测试集准确率: 84.4444%特征： 花瓣长度  +  花瓣宽度训练集准确率: 98.0952%测试集准确率: 97.7778%C:\Users\utsuk\AppData\Local\Temp\ipykernel_25000\2108356862.py:83: MatplotlibDeprecationWarning: Passing the pad parameter of tight_layout() positionally is deprecated since Matplotlib 3.3; the parameter will become keyword-only two minor releases later.  plt.tight_layout(1, rect=(0, 0, 1, 0.94))  # (left, bottom, right, top)</code></pre><p><img src="ML_files/ML_22_2.png" alt="png"></p><h4 id="决策树-随机森林回归">决策树-随机森林回归</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestRegressor</span><br><span class="line"></span><br><span class="line">N = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [-3,3)</span></span><br><span class="line">x = np.random.rand(N) * <span class="number">6</span> - <span class="number">3</span></span><br><span class="line">x.sort()</span><br><span class="line">y = np.sin(x) + np.random.randn(N) * <span class="number">0.05</span></span><br><span class="line">x = x.reshape(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="built_in">print</span>(y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># model = DecisionTreeRegressor(criterion=&#x27;mse&#x27;, max_depth=10)</span></span><br><span class="line">model = RandomForestRegressor(n_estimators=<span class="number">20</span>, criterion=<span class="string">&#x27;mse&#x27;</span>, max_depth=<span class="number">10</span>)</span><br><span class="line">model.fit(x, y)</span><br><span class="line">x_test = np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">50</span>).reshape(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">y_hat = model.predict(x_test)</span><br><span class="line"></span><br><span class="line">mpl.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">mpl.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line">plt.figure(facecolor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">plt.plot(x, y, <span class="string">&#x27;r*&#x27;</span>, markersize=<span class="number">10</span>, markeredgecolor=<span class="string">&#x27;k&#x27;</span>, label=<span class="string">&#x27;实际值&#x27;</span>)</span><br><span class="line">plt.plot(x_test, y_hat, <span class="string">&#x27;g-&#x27;</span>, linewidth=<span class="number">2</span>, label=<span class="string">&#x27;预测值&#x27;</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper left&#x27;</span>, fontsize=<span class="number">12</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;X&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Y&#x27;</span>)</span><br><span class="line">plt.grid(b=<span class="literal">True</span>, ls=<span class="string">&#x27;:&#x27;</span>, color=<span class="string">&#x27;#606060&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;决策树-随机森林回归&#x27;</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.tight_layout(<span class="number">2</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 比较决策树的深度影响</span></span><br><span class="line">depth = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>]</span><br><span class="line">clr = <span class="string">&#x27;rgbmy&#x27;</span></span><br><span class="line"><span class="comment"># model = DecisionTreeRegressor(criterion=&#x27;mse&#x27;)</span></span><br><span class="line">model = RandomForestRegressor(n_estimators=<span class="number">20</span>, criterion=<span class="string">&#x27;mse&#x27;</span>)</span><br><span class="line">plt.figure(facecolor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">plt.plot(x, y, <span class="string">&#x27;ro&#x27;</span>, ms=<span class="number">5</span>, mec=<span class="string">&#x27;k&#x27;</span>, label=<span class="string">&#x27;实际值&#x27;</span>)</span><br><span class="line">x_test = np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">50</span>).reshape(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> d, c <span class="keyword">in</span> <span class="built_in">zip</span>(depth, clr):</span><br><span class="line">    model.set_params(max_depth=d)</span><br><span class="line">    model.fit(x, y)</span><br><span class="line">    y_hat = model.predict(x_test)</span><br><span class="line">    plt.plot(x_test,</span><br><span class="line">             y_hat,</span><br><span class="line">             <span class="string">&#x27;-&#x27;</span>,</span><br><span class="line">             color=c,</span><br><span class="line">             linewidth=<span class="number">2</span>,</span><br><span class="line">             markeredgecolor=<span class="string">&#x27;k&#x27;</span>,</span><br><span class="line">             label=<span class="string">&#x27;Depth=%d&#x27;</span> % d)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper left&#x27;</span>, fontsize=<span class="number">12</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;X&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Y&#x27;</span>)</span><br><span class="line">plt.grid(b=<span class="literal">True</span>, ls=<span class="string">&#x27;:&#x27;</span>, color=<span class="string">&#x27;#606060&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;决策树-随机森林回归&#x27;</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">plt.tight_layout(<span class="number">2</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><pre><code>[[-2.95013857] [-2.91406777] [-2.90709403] [-2.90375999] [-2.87745415] [-2.86685497] [-2.84070033] [-2.81375697] [-2.77943784] [-2.77745775] [-2.66347611] [-2.65986762] [-2.64217075] [-2.63778267] [-2.63639243] [-2.60165162] [-2.48896096] [-2.43041085] [-2.39941506] [-2.38779079] [-2.37856289] [-2.32809632] [-2.29426051] [-2.25524085] [-2.23914776] [-2.16578847] [-2.0055294 ] [-1.9885004 ] [-1.73199798] [-1.61893958] [-1.58908223] [-1.54966302] [-1.49074428] [-1.46530843] [-1.40362808] [-1.3935955 ] [-1.3928819 ] [-1.37684247] [-1.3377295 ] [-1.33035029] [-1.24577529] [-1.15561278] [-1.12976361] [-0.92771942] [-0.91536325] [-0.83851709] [-0.54828961] [-0.54587447] [-0.54456521] [-0.51610774] [-0.38078143] [-0.27298529] [-0.20898971] [-0.20866835] [ 0.01703485] [ 0.03203468] [ 0.06107388] [ 0.07358949] [ 0.07361575] [ 0.10676155] [ 0.15818226] [ 0.20123638] [ 0.3410772 ] [ 0.45680655] [ 0.52384169] [ 0.65741898] [ 0.68306354] [ 0.82845395] [ 0.83952908] [ 0.99278446] [ 1.04865533] [ 1.16809926] [ 1.21294563] [ 1.44659934] [ 1.47606149] [ 1.48031876] [ 1.54476213] [ 1.54542061] [ 1.60452852] [ 1.85706958] [ 1.9814776 ] [ 2.07801869] [ 2.08420295] [ 2.08974078] [ 2.09458999] [ 2.21547939] [ 2.2354401 ] [ 2.2824592 ] [ 2.39313024] [ 2.4822308 ] [ 2.5275393 ] [ 2.56392915] [ 2.63696096] [ 2.65318554] [ 2.66286196] [ 2.67531127] [ 2.69337798] [ 2.78329004] [ 2.83409465] [ 2.94897411]][-0.16517944 -0.2651016  -0.26383212 -0.2408083  -0.21137157 -0.30729908 -0.24489794 -0.42738593 -0.39536257 -0.34762803 -0.55252409 -0.40629331 -0.47658554 -0.47459876 -0.50897455 -0.58933727 -0.57144697 -0.61564276 -0.76543047 -0.64009055 -0.79612233 -0.77625958 -0.82824783 -0.74228023 -0.6882561  -0.85479709 -0.9210133  -0.88824326 -0.94228155 -1.04205908 -1.01456756 -1.0150173  -1.01319155 -0.93942161 -1.0101109  -1.00949492 -1.00669835 -1.02762794 -0.90526463 -1.04873446 -0.98356087 -0.96345712 -0.90790305 -0.78617335 -0.8215092  -0.7756252  -0.62805774 -0.61416394 -0.55438357 -0.54877048 -0.24409899 -0.24654351 -0.22139215 -0.31816396 -0.00948097  0.03731195  0.07871564  0.06089414  0.091661    0.10130855  0.05916354  0.284293    0.32301758  0.47390064  0.43774825  0.59439442  0.62285701  0.78479681  0.7888438   0.91498224  0.91654605  0.84583033  0.90598404  0.99494553  1.05048367  0.97256267  1.04768316  1.09246729  0.92367061  0.97097779  0.98148804  0.86766162  0.87249721  0.81545132  0.80772307  0.75639662  0.73792794  0.75909448  0.71239606  0.63892773  0.6373865   0.53978973  0.47836416  0.47544309  0.4156747   0.46233128  0.43384357  0.32001956  0.2980857   0.16211947]C:\Users\utsuk\AppData\Local\Temp\ipykernel_25000\2984870596.py:33: MatplotlibDeprecationWarning: Passing the pad parameter of tight_layout() positionally is deprecated since Matplotlib 3.3; the parameter will become keyword-only two minor releases later.  plt.tight_layout(2)</code></pre><p><img src="ML_files/ML_24_2.png" alt="png"></p><pre><code>C:\Users\utsuk\AppData\Local\Temp\ipykernel_25000\2984870596.py:60: MatplotlibDeprecationWarning: Passing the pad parameter of tight_layout() positionally is deprecated since Matplotlib 3.3; the parameter will become keyword-only two minor releases later.  plt.tight_layout(2)</code></pre><p><img src="ML_files/ML_24_4.png" alt="png"></p><h3 id="分类问题-2">分类问题</h3><h4 id="逻辑回归-2">逻辑回归</h4><h5 id="二分类">二分类</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> sklearn.linear_model <span class="keyword">as</span> lm</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> mp</span><br><span class="line"></span><br><span class="line">x = np.array([[<span class="number">3</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">5</span>], [<span class="number">1</span>, <span class="number">8</span>], [<span class="number">6</span>, <span class="number">4</span>],\</span><br><span class="line">              [<span class="number">5</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">5</span>], [<span class="number">4</span>, <span class="number">7</span>], [<span class="number">4</span>, -<span class="number">1</span>]])</span><br><span class="line">y = np.array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建逻辑分类器对象</span></span><br><span class="line"><span class="comment"># C参数：正则强度，越大拟合效果越小，通过调整该参数防止过拟合</span></span><br><span class="line"><span class="comment"># solver参数：逻辑函数中指数的函数关系（liblinear表示线性关系）</span></span><br><span class="line">model = lm.LogisticRegression()</span><br><span class="line">model.fit(x, y)  <span class="comment"># 训练</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 预测</span></span><br><span class="line">test_x = np.array([[<span class="number">3</span>, <span class="number">9</span>], [<span class="number">6</span>, <span class="number">1</span>]])</span><br><span class="line">test_y = model.predict(test_x)  <span class="comment"># 预测</span></span><br><span class="line"><span class="built_in">print</span>(test_y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算显示坐标的边界</span></span><br><span class="line"><span class="comment"># x[:, 0].min()   x 中所有数组的第一位</span></span><br><span class="line">left = x[:, <span class="number">0</span>].<span class="built_in">min</span>() - <span class="number">1</span></span><br><span class="line">right = x[:, <span class="number">0</span>].<span class="built_in">max</span>() + <span class="number">1</span></span><br><span class="line">buttom = x[:, <span class="number">1</span>].<span class="built_in">min</span>() - <span class="number">1</span></span><br><span class="line">top = x[:, <span class="number">1</span>].<span class="built_in">max</span>() + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 产生网格化矩阵</span></span><br><span class="line">grid_x, grid_y = np.meshgrid(np.arange(left, right, <span class="number">0.01</span>),</span><br><span class="line">                             np.arange(buttom, top, <span class="number">0.01</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;grid_x.shape:&quot;</span>, grid_x.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;grid_y.shape:&quot;</span>, grid_y.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将x,y坐标合并成两列</span></span><br><span class="line">mesh_x = np.column_stack((grid_x.ravel(), grid_y.ravel()))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;mesh_x.shape:&quot;</span>, mesh_x.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据每个点的xy坐标进行预测，并还原成二维形状</span></span><br><span class="line">mesh_z = model.predict(mesh_x)</span><br><span class="line">mesh_z = mesh_z.reshape(grid_x.shape)</span><br><span class="line"></span><br><span class="line">mp.figure(<span class="string">&#x27;Logistic Regression&#x27;</span>, facecolor=<span class="string">&#x27;lightgray&#x27;</span>)</span><br><span class="line">mp.title(<span class="string">&#x27;Logistic Regression&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">mp.xlabel(<span class="string">&#x27;x&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">mp.ylabel(<span class="string">&#x27;y&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">mp.tick_params(labelsize=<span class="number">10</span>)</span><br><span class="line">mp.pcolormesh(grid_x, grid_y, mesh_z, cmap=<span class="string">&#x27;gray&#x27;</span>, shading=<span class="string">&#x27;auto&#x27;</span>)</span><br><span class="line">mp.scatter(</span><br><span class="line">    x[:, <span class="number">0</span>],  <span class="comment"># 样本x坐标</span></span><br><span class="line">    x[:, <span class="number">1</span>],  <span class="comment"># 样本y坐标</span></span><br><span class="line">    c=y,</span><br><span class="line">    cmap=<span class="string">&#x27;brg&#x27;</span>,</span><br><span class="line">    s=<span class="number">80</span>)</span><br><span class="line">mp.scatter(test_x[:, <span class="number">0</span>], test_x[:, <span class="number">1</span>], c=<span class="string">&quot;red&quot;</span>, marker=<span class="string">&#x27;s&#x27;</span>, s=<span class="number">80</span>)</span><br><span class="line">mp.show()</span><br></pre></td></tr></table></figure><pre><code>[1 0]grid_x.shape: (1100, 700)grid_y.shape: (1100, 700)mesh_x.shape: (770000, 2)</code></pre><p><img src="ML_files/ML_27_1.png" alt="png"></p><h5 id="多分类">多分类</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> sklearn.linear_model <span class="keyword">as</span> lm</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> mp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入</span></span><br><span class="line">x = np.array([[<span class="number">4</span>, <span class="number">7</span>], [<span class="number">3.5</span>, <span class="number">8</span>], [<span class="number">3.1</span>, <span class="number">6.2</span>], [<span class="number">0.5</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1.2</span>, <span class="number">1.9</span>],</span><br><span class="line">              [<span class="number">6</span>, <span class="number">2</span>], [<span class="number">5.7</span>, <span class="number">1.5</span>], [<span class="number">5.4</span>, <span class="number">2.2</span>]])</span><br><span class="line"><span class="comment"># 输出（多个类别）</span></span><br><span class="line">y = np.array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建逻辑分类器对象</span></span><br><span class="line">model = lm.LogisticRegression(C=<span class="number">200</span>)  <span class="comment"># 调整该值为1看效果</span></span><br><span class="line">model.fit(x, y)  <span class="comment"># 训练</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 坐标轴范围</span></span><br><span class="line">left = x[:, <span class="number">0</span>].<span class="built_in">min</span>() - <span class="number">1</span></span><br><span class="line">right = x[:, <span class="number">0</span>].<span class="built_in">max</span>() + <span class="number">1</span></span><br><span class="line">h = <span class="number">0.005</span></span><br><span class="line"></span><br><span class="line">buttom = x[:, <span class="number">1</span>].<span class="built_in">min</span>() - <span class="number">1</span></span><br><span class="line">top = x[:, <span class="number">1</span>].<span class="built_in">max</span>() + <span class="number">1</span></span><br><span class="line">v = <span class="number">0.005</span></span><br><span class="line"></span><br><span class="line">grid_x, grid_y = np.meshgrid(np.arange(left, right, h),</span><br><span class="line">                             np.arange(buttom, top, v))</span><br><span class="line"></span><br><span class="line">mesh_x = np.column_stack((grid_x.ravel(), grid_y.ravel()))</span><br><span class="line">mesh_z = model.predict(mesh_x)</span><br><span class="line">mesh_z = mesh_z.reshape(grid_x.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可视化</span></span><br><span class="line">mp.figure(<span class="string">&#x27;Logistic Classification&#x27;</span>, facecolor=<span class="string">&#x27;lightgray&#x27;</span>)</span><br><span class="line">mp.title(<span class="string">&#x27;Logistic Classification&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">mp.xlabel(<span class="string">&#x27;x&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">mp.ylabel(<span class="string">&#x27;y&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">mp.tick_params(labelsize=<span class="number">10</span>)</span><br><span class="line">mp.pcolormesh(grid_x, grid_y, mesh_z, cmap=<span class="string">&#x27;gray&#x27;</span>, shading=<span class="string">&#x27;auto&#x27;</span>)</span><br><span class="line">mp.scatter(x[:, <span class="number">0</span>], x[:, <span class="number">1</span>], c=y, cmap=<span class="string">&#x27;brg&#x27;</span>, s=<span class="number">80</span>)</span><br><span class="line">mp.show()</span><br></pre></td></tr></table></figure><p><img src="ML_files/ML_29_0.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> r2_score, mean_squared_error, mean_absolute_error</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> PolynomialFeatures, LabelEncoder</span><br><span class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> make_pipeline</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line">pumpkins = pd.read_csv(<span class="string">&#x27;./_data_set/US-pumpkins.csv&#x27;</span>)</span><br><span class="line"><span class="comment"># pumpkins = pumpkins[pumpkins[&#x27;Package&#x27;].str.contains(&#x27;bushel&#x27;,</span></span><br><span class="line"><span class="comment">#                                                      case=True,</span></span><br><span class="line"><span class="comment">#                                                      regex=True)]</span></span><br><span class="line"></span><br><span class="line">new_pumpkins = pumpkins.drop([</span><br><span class="line">    c <span class="keyword">for</span> c <span class="keyword">in</span> pumpkins.columns <span class="keyword">if</span> c <span class="keyword">not</span> <span class="keyword">in</span></span><br><span class="line">    [<span class="string">&#x27;Color&#x27;</span>, <span class="string">&#x27;Origin&#x27;</span>, <span class="string">&#x27;Item Size&#x27;</span>, <span class="string">&#x27;Variety&#x27;</span>, <span class="string">&#x27;City Name&#x27;</span>, <span class="string">&#x27;Package&#x27;</span>]</span><br><span class="line">],</span><br><span class="line">                             axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">new_pumpkins.dropna(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">new_pumpkins = new_pumpkins.apply(LabelEncoder().fit_transform)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 颜色数据与其他列的关系</span></span><br><span class="line">sns.PairGrid(new_pumpkins).<span class="built_in">map</span>(sns.scatterplot)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分类散点图</span></span><br><span class="line"><span class="comment"># sns.swarmplot(x=&quot;Color&quot;, y=&quot;Item Size&quot;, data=new_pumpkins)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 小提琴图</span></span><br><span class="line">sns.catplot(x=<span class="string">&quot;Color&quot;</span>, y=<span class="string">&quot;Item Size&quot;</span>, kind=<span class="string">&quot;violin&quot;</span>, data=new_pumpkins)</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x19b7ed39fd0&gt;</code></pre><p><img src="ML_files/ML_30_1.png" alt="png"></p><p><img src="ML_files/ML_30_2.png" alt="png"></p><h4 id="支持向量机-SVM-2">支持向量机-SVM</h4><h5 id="核函数-2">核函数</h5><ol><li><p>线性</p></li><li><p>径向基-高斯</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">iris_feature = <span class="string">&#x27;花萼长度&#x27;</span>, <span class="string">&#x27;花萼宽度&#x27;</span>, <span class="string">&#x27;花瓣长度&#x27;</span>, <span class="string">&#x27;花瓣宽度&#x27;</span></span><br><span class="line">path = <span class="string">&#x27;./_data_set/iris_classification/iris.data&#x27;</span>  <span class="comment"># 数据文件路径</span></span><br><span class="line">data = pd.read_csv(path, header=<span class="literal">None</span>)</span><br><span class="line">x, y = data[[<span class="number">0</span>, <span class="number">1</span>]], pd.Categorical(data[<span class="number">4</span>]).codes</span><br><span class="line">x_train, x_test, y_train, y_test = train_test_split(x,</span><br><span class="line">                                                    y,</span><br><span class="line">                                                    random_state=<span class="number">1</span>,</span><br><span class="line">                                                    test_size=<span class="number">0.4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分类器</span></span><br><span class="line"><span class="comment"># svm_clf = svm.SVC(C=10, gamma=1, kernel=&#x27;rbf&#x27;, decision_function_shape=&#x27;ovo&#x27;)</span></span><br><span class="line"><span class="comment"># svm_clf = svm.SVC(C=3, kernel=&#x27;poly&#x27;, degree=3)</span></span><br><span class="line">svm_clf = svm.SVC(C=<span class="number">3</span>, kernel=<span class="string">&#x27;linear&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;GridSearchCV begin...&#x27;</span>)</span><br><span class="line">t = time()</span><br><span class="line">clf = svm_clf</span><br><span class="line"><span class="comment"># clf = GridSearchCV(svm_clf, param_grid=&#123;&#x27;gamma&#x27;:np.logspace(-2, 2, 10), &#x27;C&#x27;:np.logspace(-2, 2, 10)&#125;, cv=3)</span></span><br><span class="line">clf.fit(x_train, y_train.ravel())</span><br><span class="line">t_end = time()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;耗时：%d秒&#x27;</span> % (t_end - t))</span><br><span class="line"><span class="comment"># print(&#x27;最优参数：&#x27;, clf.best_params_)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 准确率</span></span><br><span class="line"><span class="built_in">print</span>(clf.score(x_train, y_train))  <span class="comment"># 精度</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;训练集准确率：&#x27;</span>, accuracy_score(y_train, clf.predict(x_train)))</span><br><span class="line"><span class="built_in">print</span>(clf.score(x_test, y_test))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;测试集准确率：&#x27;</span>, accuracy_score(y_test, clf.predict(x_test)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># decision_function</span></span><br><span class="line"><span class="built_in">print</span>(x_train[:<span class="number">5</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;decision_function:\n&#x27;</span>, clf.decision_function(x_train))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\npredict:\n&#x27;</span>, clf.predict(x_train))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画图</span></span><br><span class="line">x1_min, x2_min = x.<span class="built_in">min</span>()</span><br><span class="line">x1_max, x2_max = x.<span class="built_in">max</span>()</span><br><span class="line">x1, x2 = np.mgrid[x1_min:x1_max:<span class="number">300j</span>, x2_min:x2_max:<span class="number">300j</span>]  <span class="comment"># 生成网格采样点</span></span><br><span class="line">grid_test = np.stack((x1.flat, x2.flat), axis=<span class="number">1</span>)  <span class="comment"># 测试点</span></span><br><span class="line">grid_hat = clf.predict(grid_test)  <span class="comment"># 预测分类值</span></span><br><span class="line">grid_hat = grid_hat.reshape(x1.shape)  <span class="comment"># 使之与输入的形状相同</span></span><br><span class="line">mpl.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">mpl.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">cm_light = mpl.colors.ListedColormap([<span class="string">&#x27;#A0FFA0&#x27;</span>, <span class="string">&#x27;#FFA0A0&#x27;</span>, <span class="string">&#x27;#A0A0FF&#x27;</span>])</span><br><span class="line">cm_dark = mpl.colors.ListedColormap([<span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line">plt.figure(facecolor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">plt.pcolormesh(x1, x2, grid_hat, cmap=cm_light, shading=<span class="string">&#x27;auto&#x27;</span>)</span><br><span class="line">plt.scatter(x[<span class="number">0</span>], x[<span class="number">1</span>], c=y, edgecolors=<span class="string">&#x27;k&#x27;</span>, s=<span class="number">50</span>, cmap=cm_dark)  <span class="comment"># 样本</span></span><br><span class="line">plt.scatter(x_test[<span class="number">0</span>], x_test[<span class="number">1</span>], s=<span class="number">120</span>, facecolors=<span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">            zorder=<span class="number">10</span>)  <span class="comment"># 圈中测试集样本</span></span><br><span class="line">plt.xlabel(iris_feature[<span class="number">0</span>], fontsize=<span class="number">13</span>)</span><br><span class="line">plt.ylabel(iris_feature[<span class="number">1</span>], fontsize=<span class="number">13</span>)</span><br><span class="line">plt.xlim(x1_min, x1_max)</span><br><span class="line">plt.ylim(x2_min, x2_max)</span><br><span class="line">plt.title(<span class="string">&#x27;鸢尾花SVM二特征分类&#x27;</span>, fontsize=<span class="number">16</span>)</span><br><span class="line">plt.grid(b=<span class="literal">True</span>, ls=<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">plt.tight_layout(pad=<span class="number">1.5</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><pre><code>GridSearchCV begin...耗时：0秒0.7888888888888889训练集准确率： 0.78888888888888890.7833333333333333测试集准确率： 0.7833333333333333       0    111   4.8  3.4113  5.7  2.5123  6.3  2.712   4.8  3.02    4.7  3.2decision_function: [[ 2.27077043  0.77466667 -0.23050192] [-0.26084184  2.25751125  1.0560141 ] [-0.28293421  2.25843306  1.22796515] [ 2.24308998  0.92588576 -0.2355186 ] [ 2.26643883  0.80879936 -0.24170145] [-0.28069428  1.23581332  2.24817619] [ 2.28018898  0.76457517 -0.24714914] [-0.25832462  1.21350955  2.20811726] [-0.27289547  1.20094518  2.249947  ] [-0.28479994  1.2318958   2.26058535] [-0.23449614  2.22389578  1.08207816] [-0.27824598  1.19362022  2.2618816 ] [-0.24940836  1.20624284  2.19142888] [ 2.2732283  -0.2577432   0.82271427] [-0.2872948   2.27977562  1.1680301 ] [-0.28016055  1.24346593  2.23969255] [-0.28069428  1.23581332  2.24817619] [-0.17539161  2.25364746  0.77515212] [-0.25325305  1.14281388  2.23566431] [-0.2421088   2.25159667  0.90072452] [ 2.24374936 -0.23761503  0.93581753] [ 2.24150985  0.87804111 -0.2241573 ] [ 2.28041834 -0.27382086  0.86293615] [-0.27824598  1.19362022  2.2618816 ] [ 2.27361996  0.84008337 -0.26180365] [-0.26919985  2.24943754  1.18347413] [-0.28629221  2.26101768  1.23745359] [-0.23808639  1.19803786  2.16960812] [ 2.24670891 -0.21840299  0.83780678] [ 2.23817757  0.82105098 -0.19112107] [-0.2549617   2.24213564  1.1247623 ] [ 2.24150985  0.87804111 -0.2241573 ] [-0.30409023  1.27536123  2.28319903] [-0.27073104  1.23503534  2.2197061 ] [-0.30441277  1.26883084  2.28803158] [-0.28752494  1.24411663  2.25991942] [-0.29292012  2.28000741  1.22212062] [-0.23176304  1.04104242  2.22722296] [-0.28694643  1.15125962  2.28088265] [-0.19956441  2.19653578  1.01742803] [ 2.26878977 -0.27918692  1.16597018] [-0.2549617   2.24213564  1.1247623 ] [ 2.18519501  1.23494087 -0.26146238] [-0.2512831   2.2597216   0.89408741] [-0.29066599  1.240849    2.26933123] [ 2.25729439 -0.2129225   0.79411601] [-0.29441953  1.26382422  2.26345809] [ 2.26377705 -0.22976306  0.79617407] [ 2.27077043  0.77466667 -0.23050192] [-0.2445374   1.07681969  2.23683943] [-0.21840757  2.21786592  1.00447438] [-0.28524498  1.22203776  2.26581127] [ 2.24947915  0.81045802 -0.20787766] [ 2.2684482  -0.24915018  0.81973595] [-0.20907334  1.12013512  2.17603067] [ 2.26728139  0.82893904 -0.24984081] [-0.2549617   2.24213564  1.1247623 ] [ 2.25207771  0.85867453 -0.23431088] [-0.28069428  1.23581332  2.24817619] [ 1.05055292  2.22662497 -0.23240122] [ 2.2722284   0.7997718  -0.24896247] [-0.26723747  1.19201787  2.24286157] [ 2.27827649  0.82682975 -0.26630655] [-0.17333043  2.16553945  1.02939988] [ 2.26890439  0.89311197 -0.26243597] [-0.2512831   2.2597216   0.89408741] [-0.23341849  2.27309387  0.7709214 ] [ 2.25617562 -0.22437834  0.81410784] [ 2.22986475  0.96247553 -0.22562355] [ 0.93771503  2.24006469 -0.23365567] [ 2.28631446 -0.25590025  0.75474384] [-0.23808639  1.19803786  2.16960812] [-0.2646401   1.23019768  2.20613126] [ 2.25729439 -0.2129225   0.79411601] [-0.28479994  1.2318958   2.26058535] [-0.22087216  2.20491832  1.08971052] [-0.29260626  2.28238001  1.20719635] [-0.29101034  1.23272406  2.27341138] [-0.2549617   2.24213564  1.1247623 ] [ 2.19974418 -0.17699012  0.91119813] [ 2.21209755  1.01040036 -0.21350121] [-0.27849238  2.26059076  1.19977637] [-0.26997469  2.24280567  1.20408124] [-0.29874557  1.25977449  2.27874043] [-0.25377271  2.24886239  1.06528288] [-0.27961589  2.2500049   1.22933155] [-0.27219081  1.21466357  2.24182934] [-0.2884762   2.2710352   1.22512174] [-0.28479994  1.2318958   2.26058535] [ 2.24150985  0.87804111 -0.2241573 ]]predict: [0 1 1 0 0 2 0 2 2 2 1 2 2 0 1 2 2 1 2 1 0 0 0 2 0 1 1 2 0 0 1 0 2 2 2 2 1 2 2 1 0 1 0 1 2 0 2 0 0 2 1 2 0 0 2 0 1 0 2 1 0 2 0 1 0 1 1 0 0 1 0 2 2 0 2 1 1 2 1 0 0 1 1 2 1 1 2 1 2 0]</code></pre><p><img src="ML_files/ML_32_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">extend</span>(<span class="params">a, b, r=<span class="number">0.01</span></span>):</span><br><span class="line">    <span class="keyword">return</span> a * (<span class="number">1</span> + r) - b * r, -a * r + b * (<span class="number">1</span> + r)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line">N = <span class="number">200</span></span><br><span class="line">x = np.empty((<span class="number">4</span> * N, <span class="number">2</span>))</span><br><span class="line">means = [(-<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, -<span class="number">1</span>), (-<span class="number">1</span>, -<span class="number">1</span>)]</span><br><span class="line">sigmas = [</span><br><span class="line">    np.eye(<span class="number">2</span>), <span class="number">2</span> * np.eye(<span class="number">2</span>),</span><br><span class="line">    np.diag((<span class="number">1</span>, <span class="number">2</span>)),</span><br><span class="line">    np.array(((<span class="number">3</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">3</span>)))</span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    mn = stats.multivariate_normal(means[i], sigmas[i] * <span class="number">0.07</span>)</span><br><span class="line">    x[i * N:(i + <span class="number">1</span>) * N, :] = mn.rvs(N)</span><br><span class="line">a = np.array((<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)).reshape((-<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">y = np.tile(a, N).flatten()</span><br><span class="line">clf = svm.SVC(C=<span class="number">1</span>, kernel=<span class="string">&#x27;rbf&#x27;</span>, gamma=<span class="number">1</span>, decision_function_shape=<span class="string">&#x27;ovo&#x27;</span>)</span><br><span class="line"><span class="comment"># clf = svm.SVC(C=1, kernel=&#x27;linear&#x27;, decision_function_shape=&#x27;ovr&#x27;)</span></span><br><span class="line">clf.fit(x, y)</span><br><span class="line">y_hat = clf.predict(x)</span><br><span class="line">acc = accuracy_score(y, y_hat)</span><br><span class="line">np.set_printoptions(suppress=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;预测正确的样本个数：%d，正确率：%.2f%%&#x27;</span> % (<span class="built_in">round</span>(acc * <span class="number">4</span> * N), <span class="number">100</span> * acc))</span><br><span class="line"><span class="comment"># decision_function</span></span><br><span class="line"><span class="built_in">print</span>(clf.decision_function(x))</span><br><span class="line"><span class="built_in">print</span>(y_hat)</span><br><span class="line"></span><br><span class="line">x1_min, x2_min = np.<span class="built_in">min</span>(x, axis=<span class="number">0</span>)</span><br><span class="line">x1_max, x2_max = np.<span class="built_in">max</span>(x, axis=<span class="number">0</span>)</span><br><span class="line">x1_min, x1_max = extend(x1_min, x1_max)</span><br><span class="line">x2_min, x2_max = extend(x2_min, x2_max)</span><br><span class="line">x1, x2 = np.mgrid[x1_min:x1_max:<span class="number">500j</span>, x2_min:x2_max:<span class="number">500j</span>]</span><br><span class="line">x_test = np.stack((x1.flat, x2.flat), axis=<span class="number">1</span>)</span><br><span class="line">y_test = clf.predict(x_test)</span><br><span class="line">y_test = y_test.reshape(x1.shape)</span><br><span class="line">cm_light = mpl.colors.ListedColormap(</span><br><span class="line">    [<span class="string">&#x27;#FF8080&#x27;</span>, <span class="string">&#x27;#80FF80&#x27;</span>, <span class="string">&#x27;#8080FF&#x27;</span>, <span class="string">&#x27;#F0F080&#x27;</span>])</span><br><span class="line">cm_dark = mpl.colors.ListedColormap([<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;y&#x27;</span>])</span><br><span class="line">mpl.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">mpl.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line">plt.figure(facecolor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">plt.pcolormesh(x1, x2, y_test, cmap=cm_light, shading=<span class="string">&#x27;auto&#x27;</span>)</span><br><span class="line">plt.contour(x1, x2, y_test, levels=(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>), colors=<span class="string">&#x27;k&#x27;</span>, linestyles=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">plt.scatter(x[:, <span class="number">0</span>],</span><br><span class="line">            x[:, <span class="number">1</span>],</span><br><span class="line">            s=<span class="number">20</span>,</span><br><span class="line">            c=y,</span><br><span class="line">            cmap=cm_dark,</span><br><span class="line">            edgecolors=<span class="string">&#x27;k&#x27;</span>,</span><br><span class="line">            alpha=<span class="number">0.7</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;$X_1$&#x27;</span>, fontsize=<span class="number">11</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;$X_2$&#x27;</span>, fontsize=<span class="number">11</span>)</span><br><span class="line">plt.xlim((x1_min, x1_max))</span><br><span class="line">plt.ylim((x2_min, x2_max))</span><br><span class="line">plt.grid(b=<span class="literal">True</span>)</span><br><span class="line">plt.tight_layout(pad=<span class="number">2.5</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;SVM多分类方法：One/One or One/Other&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>预测正确的样本个数：793，正确率：99.12%[[ 1.30403817  1.18371967  1.61069453  0.53379555  0.10282667 -0.6639782 ] [ 1.20484592  1.00041165  1.13023042  0.32840742  0.16888308 -0.33559223] [ 1.28448754  1.15305262  1.24310512  0.59725054 -0.31474389 -0.97622623] ... [-0.23584035 -0.08224918 -1.09483656  0.1554822  -1.12200744 -1.12840424] [ 0.2447751   0.34444513 -1.55255237  0.17064062 -1.24348982 -1.41973039] [-0.03070327 -0.15566364 -1.9254549  -0.09600454 -1.23897289 -1.44257329]][0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 1 3 3 3 3 3 3 3 3 3 3 3 3 3 1 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3]</code></pre><p><img src="ML_files/ML_33_1.png" alt="png"></p><h4 id="朴素贝叶斯-2">朴素贝叶斯</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NBClassify</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, fillNa=<span class="number">1</span></span>):</span><br><span class="line">        self.fillNa = <span class="number">1</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">self, trainSet</span>):</span><br><span class="line">        <span class="comment"># 计算每种类别的概率</span></span><br><span class="line">        <span class="comment"># 保存所有tag的所有种类，及它们出现的频次</span></span><br><span class="line">        dictTag = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> subTuple <span class="keyword">in</span> trainSet:</span><br><span class="line">            dictTag[<span class="built_in">str</span>(</span><br><span class="line">                subTuple[<span class="number">1</span>])] = <span class="number">1</span> <span class="keyword">if</span> <span class="built_in">str</span>(subTuple[<span class="number">1</span>]) <span class="keyword">not</span> <span class="keyword">in</span> dictTag.keys(</span><br><span class="line">                ) <span class="keyword">else</span> dictTag[<span class="built_in">str</span>(subTuple[<span class="number">1</span>])] + <span class="number">1</span></span><br><span class="line">        <span class="comment"># 保存每个tag本身的概率</span></span><br><span class="line">        tagProbablity = &#123;&#125;</span><br><span class="line">        totalFreq = <span class="built_in">sum</span>([value <span class="keyword">for</span> value <span class="keyword">in</span> dictTag.values()])</span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> dictTag.items():</span><br><span class="line">            tagProbablity[key] = value / totalFreq</span><br><span class="line">        <span class="comment"># print(tagProbablity)</span></span><br><span class="line">        self.tagProbablity = tagProbablity</span><br><span class="line">        <span class="comment">##############################################################################</span></span><br><span class="line">        <span class="comment"># 计算特征的条件概率</span></span><br><span class="line">        <span class="comment"># 保存特征属性基本信息&#123;特征1:&#123;值1:出现5次, 值2:出现1次&#125;, 特征2:&#123;值1:出现1次, 值2:出现5次&#125;&#125;</span></span><br><span class="line">        dictFeaturesBase = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> subTuple <span class="keyword">in</span> trainSet:</span><br><span class="line">            <span class="keyword">for</span> key, value <span class="keyword">in</span> subTuple[<span class="number">0</span>].items():</span><br><span class="line">                <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> dictFeaturesBase.keys():</span><br><span class="line">                    dictFeaturesBase[key] = &#123;value: <span class="number">1</span>&#125;</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">if</span> value <span class="keyword">not</span> <span class="keyword">in</span> dictFeaturesBase[key].keys():</span><br><span class="line">                        dictFeaturesBase[key][value] = <span class="number">1</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        dictFeaturesBase[key][value] += <span class="number">1</span></span><br><span class="line">        <span class="comment"># dictFeaturesBase = &#123;</span></span><br><span class="line">        <span class="comment"># &#x27;职业&#x27;: &#123;&#x27;农夫&#x27;: 1, &#x27;教师&#x27;: 2, &#x27;建筑工人&#x27;: 2, &#x27;护士&#x27;: 1&#125;,</span></span><br><span class="line">        <span class="comment"># &#x27;症状&#x27;: &#123;&#x27;打喷嚏&#x27;: 3, &#x27;头痛&#x27;: 3&#125;</span></span><br><span class="line">        <span class="comment"># &#125;</span></span><br><span class="line">        dictFeatures = &#123;&#125;.fromkeys([key <span class="keyword">for</span> key <span class="keyword">in</span> dictTag])</span><br><span class="line">        <span class="keyword">for</span> key <span class="keyword">in</span> dictFeatures.keys():</span><br><span class="line">            dictFeatures[key] = &#123;&#125;.fromkeys([key <span class="keyword">for</span> key <span class="keyword">in</span> dictFeaturesBase])</span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> dictFeatures.items():</span><br><span class="line">            <span class="keyword">for</span> subkey <span class="keyword">in</span> value.keys():</span><br><span class="line">                value[subkey] = &#123;&#125;.fromkeys(</span><br><span class="line">                    [x <span class="keyword">for</span> x <span class="keyword">in</span> dictFeaturesBase[subkey].keys()])</span><br><span class="line">        <span class="comment"># dictFeatures = &#123;</span></span><br><span class="line">        <span class="comment">#  &#x27;感冒 &#x27;: &#123;&#x27;症状&#x27;: &#123;&#x27;打喷嚏&#x27;: None, &#x27;头痛&#x27;: None&#125;, &#x27;职业&#x27;: &#123;&#x27;护士&#x27;: None, &#x27;农夫&#x27;: None, &#x27;建筑工人&#x27;: None, &#x27;教师&#x27;: None&#125;&#125;,</span></span><br><span class="line">        <span class="comment">#  &#x27;脑震荡&#x27;: &#123;&#x27;症状&#x27;: &#123;&#x27;打喷嚏&#x27;: None, &#x27;头痛&#x27;: None&#125;, &#x27;职业&#x27;: &#123;&#x27;护士&#x27;: None, &#x27;农夫&#x27;: None, &#x27;建筑工人&#x27;: None, &#x27;教师&#x27;: None&#125;&#125;,</span></span><br><span class="line">        <span class="comment">#  &#x27;过敏 &#x27;: &#123;&#x27;症状&#x27;: &#123;&#x27;打喷嚏&#x27;: None, &#x27;头痛&#x27;: None&#125;, &#x27;职业&#x27;: &#123;&#x27;护士&#x27;: None, &#x27;农夫&#x27;: None, &#x27;建筑工人&#x27;: None, &#x27;教师&#x27;: None&#125;&#125;</span></span><br><span class="line">        <span class="comment">#  &#125;</span></span><br><span class="line">        <span class="comment"># initialise dictFeatures</span></span><br><span class="line">        <span class="keyword">for</span> subTuple <span class="keyword">in</span> trainSet:</span><br><span class="line">            <span class="keyword">for</span> key, value <span class="keyword">in</span> subTuple[<span class="number">0</span>].items():</span><br><span class="line">                dictFeatures[subTuple[<span class="number">1</span>]][key][value] = <span class="number">1</span> <span class="keyword">if</span> dictFeatures[</span><br><span class="line">                    subTuple[<span class="number">1</span>]][key][value] == <span class="literal">None</span> <span class="keyword">else</span> dictFeatures[</span><br><span class="line">                        subTuple[<span class="number">1</span>]][key][value] + <span class="number">1</span></span><br><span class="line">        <span class="comment"># print(dictFeatures)</span></span><br><span class="line">        <span class="comment"># 将驯良样本中没有的项目，由None改为一个非常小的数值，表示其概率极小而并非是零</span></span><br><span class="line">        <span class="keyword">for</span> tag, featuresDict <span class="keyword">in</span> dictFeatures.items():</span><br><span class="line">            <span class="keyword">for</span> featureName, fetureValueDict <span class="keyword">in</span> featuresDict.items():</span><br><span class="line">                <span class="keyword">for</span> featureKey, featureValues <span class="keyword">in</span> fetureValueDict.items():</span><br><span class="line">                    <span class="keyword">if</span> featureValues == <span class="literal">None</span>:</span><br><span class="line">                        fetureValueDict[featureKey] = <span class="number">1</span></span><br><span class="line">        <span class="comment"># 由特征频率计算特征的条件概率P(feature|tag)</span></span><br><span class="line">        <span class="keyword">for</span> tag, featuresDict <span class="keyword">in</span> dictFeatures.items():</span><br><span class="line">            <span class="keyword">for</span> featureName, fetureValueDict <span class="keyword">in</span> featuresDict.items():</span><br><span class="line">                totalCount = <span class="built_in">sum</span>(</span><br><span class="line">                    [x <span class="keyword">for</span> x <span class="keyword">in</span> fetureValueDict.values() <span class="keyword">if</span> x != <span class="literal">None</span>])</span><br><span class="line">                <span class="keyword">for</span> featureKey, featureValues <span class="keyword">in</span> fetureValueDict.items():</span><br><span class="line">                    fetureValueDict[</span><br><span class="line">                        featureKey] = featureValues / totalCount <span class="keyword">if</span> featureValues != <span class="literal">None</span> <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line">        self.featuresProbablity = dictFeatures</span><br><span class="line">        <span class="comment">##############################################################################</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">classify</span>(<span class="params">self, featureDict</span>):</span><br><span class="line">        resultDict = &#123;&#125;</span><br><span class="line">        <span class="comment"># 计算每个tag的条件概率</span></span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> self.tagProbablity.items():</span><br><span class="line">            iNumList = []</span><br><span class="line">            <span class="keyword">for</span> f, v <span class="keyword">in</span> featureDict.items():</span><br><span class="line">                <span class="keyword">if</span> self.featuresProbablity[key][f][v]:</span><br><span class="line">                    iNumList.append(self.featuresProbablity[key][f][v])</span><br><span class="line">            conditionPr = <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> iNum <span class="keyword">in</span> iNumList:</span><br><span class="line">                conditionPr *= iNum</span><br><span class="line">            resultDict[key] = value * conditionPr</span><br><span class="line">        <span class="comment"># 对比每个tag的条件概率的大小</span></span><br><span class="line">        resultList = <span class="built_in">sorted</span>(resultDict.items(),</span><br><span class="line">                            key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>],</span><br><span class="line">                            reverse=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> resultList[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    trainSet = [</span><br><span class="line">        (&#123;</span><br><span class="line">            <span class="string">&quot;症状&quot;</span>: <span class="string">&quot;打喷嚏&quot;</span>,</span><br><span class="line">            <span class="string">&quot;职业&quot;</span>: <span class="string">&quot;护士&quot;</span></span><br><span class="line">        &#125;, <span class="string">&quot;感冒 &quot;</span>),</span><br><span class="line">        (&#123;</span><br><span class="line">            <span class="string">&quot;症状&quot;</span>: <span class="string">&quot;打喷嚏&quot;</span>,</span><br><span class="line">            <span class="string">&quot;职业&quot;</span>: <span class="string">&quot;农夫&quot;</span></span><br><span class="line">        &#125;, <span class="string">&quot;过敏 &quot;</span>),</span><br><span class="line">        (&#123;</span><br><span class="line">            <span class="string">&quot;症状&quot;</span>: <span class="string">&quot;头痛&quot;</span>,</span><br><span class="line">            <span class="string">&quot;职业&quot;</span>: <span class="string">&quot;建筑工人&quot;</span></span><br><span class="line">        &#125;, <span class="string">&quot;脑震荡&quot;</span>),</span><br><span class="line">        (&#123;</span><br><span class="line">            <span class="string">&quot;症状&quot;</span>: <span class="string">&quot;头痛&quot;</span>,</span><br><span class="line">            <span class="string">&quot;职业&quot;</span>: <span class="string">&quot;建筑工人&quot;</span></span><br><span class="line">        &#125;, <span class="string">&quot;感冒 &quot;</span>),</span><br><span class="line">        (&#123;</span><br><span class="line">            <span class="string">&quot;症状&quot;</span>: <span class="string">&quot;打喷嚏&quot;</span>,</span><br><span class="line">            <span class="string">&quot;职业&quot;</span>: <span class="string">&quot;教师&quot;</span></span><br><span class="line">        &#125;, <span class="string">&quot;感冒 &quot;</span>),</span><br><span class="line">        (&#123;</span><br><span class="line">            <span class="string">&quot;症状&quot;</span>: <span class="string">&quot;头痛&quot;</span>,</span><br><span class="line">            <span class="string">&quot;职业&quot;</span>: <span class="string">&quot;教师&quot;</span></span><br><span class="line">        &#125;, <span class="string">&quot;脑震荡&quot;</span>),</span><br><span class="line">    ]</span><br><span class="line">    monitor = NBClassify()</span><br><span class="line">    <span class="comment"># trainSet is something like that [(featureDict, tag), ]</span></span><br><span class="line">    monitor.train(trainSet)</span><br><span class="line">    <span class="comment"># 打喷嚏的建筑工人</span></span><br><span class="line">    <span class="comment"># 请问他患上感冒的概率有多大？</span></span><br><span class="line">    result = monitor.classify(&#123;<span class="string">&quot;症状&quot;</span>: <span class="string">&quot;打喷嚏&quot;</span>, <span class="string">&quot;职业&quot;</span>: <span class="string">&quot;建筑工人&quot;</span>&#125;)</span><br><span class="line">    <span class="built_in">print</span>(result)</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>感冒 </code></pre><h4 id="多元问题-菜肴分类">多元问题-菜肴分类</h4><h5 id="数据加载与清洗">数据加载与清洗</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> imblearn.over_sampling <span class="keyword">import</span> SMOTE</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">&#x27;./_data_set/cuisines_classification/cuisines.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df.head()</span><br><span class="line"></span><br><span class="line"><span class="comment"># df.info()</span></span><br></pre></td></tr></table></figure><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }<pre><code>.dataframe tbody tr th &#123;    vertical-align: top;&#125;.dataframe thead th &#123;    text-align: right;&#125;</code></pre></style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Unnamed: 0</th>      <th>cuisine</th>      <th>almond</th>      <th>angelica</th>      <th>anise</th>      <th>anise_seed</th>      <th>apple</th>      <th>apple_brandy</th>      <th>apricot</th>      <th>armagnac</th>      <th>...</th>      <th>whiskey</th>      <th>white_bread</th>      <th>white_wine</th>      <th>whole_grain_wheat_flour</th>      <th>wine</th>      <th>wood</th>      <th>yam</th>      <th>yeast</th>      <th>yogurt</th>      <th>zucchini</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>65</td>      <td>indian</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>...</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>1</th>      <td>66</td>      <td>indian</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>...</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>2</th>      <td>67</td>      <td>indian</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>...</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>3</th>      <td>68</td>      <td>indian</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>...</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>4</th>      <td>69</td>      <td>indian</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>...</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>    </tr>  </tbody></table><p>5 rows × 385 columns</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 菜肴成分分析</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_ingredient_df</span>(<span class="params">df</span>):</span><br><span class="line">    ingredient_df = df.T.drop([<span class="string">&#x27;cuisine&#x27;</span>,</span><br><span class="line">                               <span class="string">&#x27;Unnamed: 0&#x27;</span>]).<span class="built_in">sum</span>(axis=<span class="number">1</span>).to_frame(<span class="string">&#x27;value&#x27;</span>)</span><br><span class="line">    ingredient_df = ingredient_df[(ingredient_df.T != <span class="number">0</span>).<span class="built_in">any</span>()]</span><br><span class="line">    ingredient_df = ingredient_df.sort_values(by=<span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">                                              ascending=<span class="literal">False</span>,</span><br><span class="line">                                              inplace=<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">return</span> ingredient_df</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分析原料使用率前十</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="string">&quot;thai&quot;</span>, <span class="string">&quot;japanese&quot;</span>, <span class="string">&quot;chinese&quot;</span>, <span class="string">&quot;indian&quot;</span>, <span class="string">&quot;korean&quot;</span>]:</span><br><span class="line">    ingredient_df = create_ingredient_df(df[(df.cuisine == i)])</span><br><span class="line">    ingredient_df.head(<span class="number">10</span>).plot.barh().set_title(i)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删掉并不重要的特征</span></span><br><span class="line">feature_df = df.drop([<span class="string">&#x27;cuisine&#x27;</span>, <span class="string">&#x27;Unnamed: 0&#x27;</span>, <span class="string">&#x27;rice&#x27;</span>, <span class="string">&#x27;garlic&#x27;</span>, <span class="string">&#x27;ginger&#x27;</span>],</span><br><span class="line">                     axis=<span class="number">1</span>)</span><br><span class="line">labels_df = df.cuisine</span><br></pre></td></tr></table></figure><p><img src="ML_files/ML_38_0.png" alt="png"></p><p><img src="ML_files/ML_38_1.png" alt="png"></p><p><img src="ML_files/ML_38_2.png" alt="png"></p><p><img src="ML_files/ML_38_3.png" alt="png"></p><p><img src="ML_files/ML_38_4.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 菜肴样本不均,平衡数据集</span></span><br><span class="line">transformed_feature_df, transformed_label_df = SMOTE().fit_resample(</span><br><span class="line">    feature_df, labels_df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 烂方法展示</span></span><br><span class="line"><span class="comment"># for i in [&quot;thai&quot;, &quot;japanese&quot;, &quot;chinese&quot;, &quot;indian&quot;, &quot;korean&quot;]:</span></span><br><span class="line"><span class="comment">#     print(i, df.loc[df[&#x27;cuisine&#x27;] == i].shape)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># nicer one</span></span><br><span class="line"><span class="built_in">print</span>(</span><br><span class="line">    <span class="string">f&#x27;===================== old label count: ===================== \n<span class="subst">&#123;labels_df.value_counts()&#125;</span>\</span></span><br><span class="line"><span class="string">    \n===================== new label count: ===================== \n<span class="subst">&#123;transformed_label_df.value_counts()&#125;</span>&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">transformed_df = pd.concat([transformed_label_df, transformed_feature_df],</span><br><span class="line">                           axis=<span class="number">1</span>,</span><br><span class="line">                           join=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line"><span class="comment"># transformed_df.head()</span></span><br><span class="line">transformed_df.info()</span><br><span class="line">transformed_df.to_csv(<span class="string">&quot;./_data_set/cuisines_classification/cleaned_cuisines.csv&quot;</span>)</span><br></pre></td></tr></table></figure><pre><code>===================== old label count: ===================== korean      799indian      598chinese     442japanese    320thai        289Name: cuisine, dtype: int64    ===================== new label count: ===================== indian      799thai        799chinese     799japanese    799korean      799Name: cuisine, dtype: int64&lt;class 'pandas.core.frame.DataFrame'&gt;RangeIndex: 3995 entries, 0 to 3994Columns: 381 entries, cuisine to zucchinidtypes: int64(380), object(1)memory usage: 11.6+ MB</code></pre><h5 id="分类-1">分类-1</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split, cross_val_score</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score, precision_score, confusion_matrix, classification_report, precision_recall_curve</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">cuisines_df = pd.read_csv(</span><br><span class="line">    <span class="string">&quot;./_data_set/cuisines_classification/cleaned_cuisines.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line">cuisines_df.head()</span><br></pre></td></tr></table></figure><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }<pre><code>.dataframe tbody tr th &#123;    vertical-align: top;&#125;.dataframe thead th &#123;    text-align: right;&#125;</code></pre></style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Unnamed: 0</th>      <th>cuisine</th>      <th>almond</th>      <th>angelica</th>      <th>anise</th>      <th>anise_seed</th>      <th>apple</th>      <th>apple_brandy</th>      <th>apricot</th>      <th>armagnac</th>      <th>...</th>      <th>whiskey</th>      <th>white_bread</th>      <th>white_wine</th>      <th>whole_grain_wheat_flour</th>      <th>wine</th>      <th>wood</th>      <th>yam</th>      <th>yeast</th>      <th>yogurt</th>      <th>zucchini</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>0</td>      <td>indian</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>...</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>1</th>      <td>1</td>      <td>indian</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>...</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>2</th>      <td>2</td>      <td>indian</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>...</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>3</th>      <td>3</td>      <td>indian</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>...</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>4</th>      <td>4</td>      <td>indian</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>...</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>    </tr>  </tbody></table><p>5 rows × 382 columns</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">cuisines_label_df = cuisines_df[<span class="string">&#x27;cuisine&#x27;</span>]</span><br><span class="line">cuisines_feature_df = cuisines_df.drop([<span class="string">&#x27;Unnamed: 0&#x27;</span>, <span class="string">&#x27;cuisine&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(cuisines_feature_df,</span><br><span class="line">                                                    cuisines_label_df,</span><br><span class="line">                                                    test_size=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1137      korean</span></span><br><span class="line"><span class="string">428         thai</span></span><br><span class="line"><span class="string">191       indian</span></span><br><span class="line"><span class="string">1336      korean</span></span><br><span class="line"><span class="string">3947        thai</span></span><br><span class="line"><span class="string">          ...</span></span><br><span class="line"><span class="string">3335    japanese</span></span><br><span class="line"><span class="string">3539        thai</span></span><br><span class="line"><span class="string">436         thai</span></span><br><span class="line"><span class="string">1875      indian</span></span><br><span class="line"><span class="string">3079    japanese</span></span><br><span class="line"><span class="string">Name: cuisine, Length: 2796, dtype: object</span></span><br><span class="line"><span class="string">[&#x27;korean&#x27; &#x27;thai&#x27; &#x27;indian&#x27; ... &#x27;thai&#x27; &#x27;indian&#x27; &#x27;japanese&#x27;]</span></span><br><span class="line"><span class="string"> &quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># print(y_train)</span></span><br><span class="line"><span class="comment"># print(np.ravel(y_train))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># lbfgs = LogisticRegression(solver=&#x27;lbfgs&#x27;)</span></span><br><span class="line">model = LogisticRegression(multi_class=<span class="string">&#x27;ovr&#x27;</span>,</span><br><span class="line">                           solver=<span class="string">&#x27;liblinear&#x27;</span>).fit(X_train, np.ravel(y_train))</span><br><span class="line"></span><br><span class="line">accuracy = model.score(X_test, y_test)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&quot;Accuracy is &#123;&#125;&quot;.format(accuracy))</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Accuracy is <span class="subst">&#123;accuracy&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><pre><code>Accuracy is 0.7906588824020017</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># [选择性 test] 针对某一行测试</span></span><br><span class="line"></span><br><span class="line">line_num = <span class="number">50</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;ingredients: <span class="subst">&#123;X_test.iloc[line_num][X_test.iloc[line_num]!=<span class="number">0</span>].keys()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;cuisine: <span class="subst">&#123;y_test.iloc[line_num]&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">test = X_test.iloc[line_num].values.reshape(-<span class="number">1</span>, <span class="number">1</span>).T</span><br><span class="line">proba = model.predict_proba(test)</span><br><span class="line">classes = model.classes_</span><br><span class="line">resultdf = pd.DataFrame(data=proba, columns=classes)</span><br><span class="line"></span><br><span class="line">topPrediction = resultdf.T.sort_values(by=[<span class="number">0</span>], ascending=[<span class="literal">False</span>])</span><br><span class="line">topPrediction.head()</span><br></pre></td></tr></table></figure><pre><code>ingredients: Index(['butter', 'cayenne', 'cheese', 'cinnamon', 'coriander', 'onion',       'tomato', 'turmeric'],      dtype='object')cuisine: indianD:\Scoop\apps\anaconda3\current\lib\site-packages\sklearn\base.py:450: UserWarning: X does not have valid feature names, but LogisticRegression was fitted with feature names  warnings.warn(</code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }<pre><code>.dataframe tbody tr th &#123;    vertical-align: top;&#125;.dataframe thead th &#123;    text-align: right;&#125;</code></pre></style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>0</th>    </tr>  </thead>  <tbody>    <tr>      <th>indian</th>      <td>0.962110</td>    </tr>    <tr>      <th>thai</th>      <td>0.021403</td>    </tr>    <tr>      <th>korean</th>      <td>0.011124</td>    </tr>    <tr>      <th>japanese</th>      <td>0.003710</td>    </tr>    <tr>      <th>chinese</th>      <td>0.001653</td>    </tr>  </tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">y_pred = model.predict(X_test)</span><br><span class="line"><span class="built_in">print</span>(classification_report(y_test, y_pred))</span><br></pre></td></tr></table></figure><pre><code>              precision    recall  f1-score   support     chinese       0.76      0.68      0.72       242      indian       0.91      0.93      0.92       239    japanese       0.72      0.76      0.74       222      korean       0.84      0.80      0.82       264        thai       0.77      0.84      0.80       232    accuracy                           0.80      1199   macro avg       0.80      0.80      0.80      1199weighted avg       0.80      0.80      0.80      1199</code></pre><h5 id="分类-2">分类-2</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestClassifier, AdaBoostClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split, cross_val_score</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score, precision_score, confusion_matrix, classification_report, precision_recall_curve</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">cuisines_df = pd.read_csv(</span><br><span class="line">    <span class="string">&quot;./_data_set/cuisines_classification/cleaned_cuisines.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line">cuisines_label_df = cuisines_df[<span class="string">&#x27;cuisine&#x27;</span>]</span><br><span class="line">cuisines_feature_df = cuisines_df.drop([<span class="string">&#x27;Unnamed: 0&#x27;</span>, <span class="string">&#x27;cuisine&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(cuisines_feature_df,</span><br><span class="line">                                                    cuisines_label_df,</span><br><span class="line">                                                    test_size=<span class="number">0.3</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正则化系数</span></span><br><span class="line">C = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建不同的分类器</span></span><br><span class="line">classifiers = &#123;</span><br><span class="line">    <span class="comment"># 线性 SVC 分类器</span></span><br><span class="line">    <span class="string">&#x27;Linear SVC&#x27;</span>: SVC(kernel=<span class="string">&#x27;linear&#x27;</span>, C=C, probability=<span class="literal">True</span>, random_state=<span class="number">0</span>),</span><br><span class="line">    <span class="comment"># K-近邻分类器</span></span><br><span class="line">    <span class="string">&#x27;KNN classifier&#x27;</span>: KNeighborsClassifier(C),</span><br><span class="line">    <span class="comment"># Support Vector 分类器</span></span><br><span class="line">    <span class="string">&#x27;SVC&#x27;</span>: SVC(),</span><br><span class="line">    <span class="comment"># 集成分类器, 随机森林 与 ADA</span></span><br><span class="line">    <span class="string">&#x27;RFST&#x27;</span>: RandomForestClassifier(n_estimators=<span class="number">100</span>),</span><br><span class="line">    <span class="string">&#x27;ADA&#x27;</span>: AdaBoostClassifier(n_estimators=<span class="number">100</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> index, (name, classifier) <span class="keyword">in</span> <span class="built_in">enumerate</span>(classifiers.items()):</span><br><span class="line">    classifier.fit(X_train, np.ravel(y_train))</span><br><span class="line"></span><br><span class="line">    y_pred = classifier.predict(X_test)</span><br><span class="line">    accuracy = accuracy_score(y_test, y_pred)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Accuracy (train) for %s: %0.1f%%&quot;</span> % (name, accuracy * <span class="number">100</span>))</span><br><span class="line">    <span class="built_in">print</span>(classification_report(y_test, y_pred))</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>Accuracy (train) for Linear SVC: 80.2%              precision    recall  f1-score   support     chinese       0.73      0.76      0.74       250      indian       0.86      0.89      0.88       235    japanese       0.78      0.78      0.78       245      korean       0.88      0.74      0.80       227        thai       0.78      0.84      0.81       242    accuracy                           0.80      1199   macro avg       0.81      0.80      0.80      1199weighted avg       0.81      0.80      0.80      1199Accuracy (train) for KNN classifier: 73.6%              precision    recall  f1-score   support     chinese       0.71      0.73      0.72       250      indian       0.80      0.86      0.83       235    japanese       0.67      0.80      0.73       245      korean       0.91      0.51      0.65       227        thai       0.69      0.77      0.73       242    accuracy                           0.74      1199   macro avg       0.76      0.73      0.73      1199weighted avg       0.75      0.74      0.73      1199Accuracy (train) for SVC: 82.8%              precision    recall  f1-score   support     chinese       0.77      0.81      0.79       250      indian       0.88      0.93      0.90       235    japanese       0.82      0.76      0.79       245      korean       0.90      0.77      0.83       227        thai       0.79      0.88      0.83       242    accuracy                           0.83      1199   macro avg       0.83      0.83      0.83      1199weighted avg       0.83      0.83      0.83      1199Accuracy (train) for RFST: 84.5%              precision    recall  f1-score   support     chinese       0.82      0.81      0.82       250      indian       0.85      0.93      0.89       235    japanese       0.86      0.81      0.83       245      korean       0.90      0.83      0.86       227        thai       0.81      0.85      0.83       242    accuracy                           0.84      1199   macro avg       0.85      0.85      0.85      1199weighted avg       0.85      0.84      0.84      1199Accuracy (train) for ADA: 69.3%              precision    recall  f1-score   support     chinese       0.64      0.42      0.51       250      indian       0.81      0.85      0.83       235    japanese       0.65      0.61      0.63       245      korean       0.62      0.82      0.71       227        thai       0.73      0.79      0.76       242    accuracy                           0.69      1199   macro avg       0.69      0.70      0.69      1199weighted avg       0.69      0.69      0.68      1199</code></pre><h3 id="聚类问题">聚类问题</h3><h4 id="聚类入门-数据分布">聚类入门-数据分布</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">&quot;./_data_set/Clustering/nigerian-songs.csv&quot;</span>)</span><br><span class="line"><span class="comment"># df.head()</span></span><br><span class="line">df.info()</span><br><span class="line"><span class="comment"># object 类型除外</span></span><br><span class="line">df.describe()</span><br></pre></td></tr></table></figure><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;RangeIndex: 530 entries, 0 to 529Data columns (total 16 columns): #   Column            Non-Null Count  Dtype  ---  ------            --------------  -----   0   name              530 non-null    object  1   album             530 non-null    object  2   artist            530 non-null    object  3   artist_top_genre  530 non-null    object  4   release_date      530 non-null    int64   5   length            530 non-null    int64   6   popularity        530 non-null    int64   7   danceability      530 non-null    float64 8   acousticness      530 non-null    float64 9   energy            530 non-null    float64 10  instrumentalness  530 non-null    float64 11  liveness          530 non-null    float64 12  loudness          530 non-null    float64 13  speechiness       530 non-null    float64 14  tempo             530 non-null    float64 15  time_signature    530 non-null    int64  dtypes: float64(8), int64(4), object(4)memory usage: 66.4+ KB</code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }<pre><code>.dataframe tbody tr th &#123;    vertical-align: top;&#125;.dataframe thead th &#123;    text-align: right;&#125;</code></pre></style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>release_date</th>      <th>length</th>      <th>popularity</th>      <th>danceability</th>      <th>acousticness</th>      <th>energy</th>      <th>instrumentalness</th>      <th>liveness</th>      <th>loudness</th>      <th>speechiness</th>      <th>tempo</th>      <th>time_signature</th>    </tr>  </thead>  <tbody>    <tr>      <th>count</th>      <td>530.000000</td>      <td>530.000000</td>      <td>530.000000</td>      <td>530.000000</td>      <td>530.000000</td>      <td>530.000000</td>      <td>530.000000</td>      <td>530.000000</td>      <td>530.000000</td>      <td>530.000000</td>      <td>530.000000</td>      <td>530.000000</td>    </tr>    <tr>      <th>mean</th>      <td>2015.390566</td>      <td>222298.169811</td>      <td>17.507547</td>      <td>0.741619</td>      <td>0.265412</td>      <td>0.760623</td>      <td>0.016305</td>      <td>0.147308</td>      <td>-4.953011</td>      <td>0.130748</td>      <td>116.487864</td>      <td>3.986792</td>    </tr>    <tr>      <th>std</th>      <td>3.131688</td>      <td>39696.822259</td>      <td>18.992212</td>      <td>0.117522</td>      <td>0.208342</td>      <td>0.148533</td>      <td>0.090321</td>      <td>0.123588</td>      <td>2.464186</td>      <td>0.092939</td>      <td>23.518601</td>      <td>0.333701</td>    </tr>    <tr>      <th>min</th>      <td>1998.000000</td>      <td>89488.000000</td>      <td>0.000000</td>      <td>0.255000</td>      <td>0.000665</td>      <td>0.111000</td>      <td>0.000000</td>      <td>0.028300</td>      <td>-19.362000</td>      <td>0.027800</td>      <td>61.695000</td>      <td>3.000000</td>    </tr>    <tr>      <th>25%</th>      <td>2014.000000</td>      <td>199305.000000</td>      <td>0.000000</td>      <td>0.681000</td>      <td>0.089525</td>      <td>0.669000</td>      <td>0.000000</td>      <td>0.075650</td>      <td>-6.298750</td>      <td>0.059100</td>      <td>102.961250</td>      <td>4.000000</td>    </tr>    <tr>      <th>50%</th>      <td>2016.000000</td>      <td>218509.000000</td>      <td>13.000000</td>      <td>0.761000</td>      <td>0.220500</td>      <td>0.784500</td>      <td>0.000004</td>      <td>0.103500</td>      <td>-4.558500</td>      <td>0.097950</td>      <td>112.714500</td>      <td>4.000000</td>    </tr>    <tr>      <th>75%</th>      <td>2017.000000</td>      <td>242098.500000</td>      <td>31.000000</td>      <td>0.829500</td>      <td>0.403000</td>      <td>0.875750</td>      <td>0.000234</td>      <td>0.164000</td>      <td>-3.331000</td>      <td>0.177000</td>      <td>125.039250</td>      <td>4.000000</td>    </tr>    <tr>      <th>max</th>      <td>2020.000000</td>      <td>511738.000000</td>      <td>73.000000</td>      <td>0.966000</td>      <td>0.954000</td>      <td>0.995000</td>      <td>0.910000</td>      <td>0.811000</td>      <td>0.582000</td>      <td>0.514000</td>      <td>206.007000</td>      <td>5.000000</td>    </tr>  </tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw</span>(<span class="params">df</span>):</span><br><span class="line">    top = df[<span class="string">&#x27;artist_top_genre&#x27;</span>].value_counts()</span><br><span class="line">    plt.figure(figsize=(<span class="number">10</span>, <span class="number">7</span>))</span><br><span class="line">    sns.barplot(x=top[:<span class="number">5</span>].index, y=top[:<span class="number">5</span>].values)</span><br><span class="line">    plt.xticks(rotation=<span class="number">45</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Top genres&#x27;</span>, color=<span class="string">&#x27;blue&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">draw(df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 过滤掉 Missing</span></span><br><span class="line">new_df = df[df[<span class="string">&#x27;artist_top_genre&#x27;</span>] != <span class="string">&#x27;Missing&#x27;</span>]</span><br><span class="line">draw(new_df)</span><br><span class="line"></span><br><span class="line">featured_df = new_df[((new_df[<span class="string">&#x27;artist_top_genre&#x27;</span>] == <span class="string">&#x27;afro dancehall&#x27;</span>)</span><br><span class="line">                      | (new_df[<span class="string">&#x27;artist_top_genre&#x27;</span>] == <span class="string">&#x27;afropop&#x27;</span>)</span><br><span class="line">                      | (new_df[<span class="string">&#x27;artist_top_genre&#x27;</span>] == <span class="string">&#x27;nigerian pop&#x27;</span>))</span><br><span class="line">                     &amp; (new_df[<span class="string">&#x27;popularity&#x27;</span>] &gt; <span class="number">0</span>)]</span><br><span class="line">draw(featured_df)</span><br><span class="line"></span><br><span class="line">corrmat = featured_df.corr()</span><br><span class="line">f, ax = plt.subplots(figsize=(<span class="number">12</span>, <span class="number">9</span>))</span><br><span class="line">sns.heatmap(corrmat, vmax=<span class="number">.8</span>, square=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><pre><code>&lt;AxesSubplot:&gt;</code></pre><p><img src="ML_files/ML_50_1.png" alt="png"></p><p><img src="ML_files/ML_50_2.png" alt="png"></p><p><img src="ML_files/ML_50_3.png" alt="png"></p><p><img src="ML_files/ML_50_4.png" alt="png"></p><h4 id="K-Means-与衡量指标">K-Means-与衡量指标</h4><h5 id="入门-音乐分类">入门-音乐分类</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这种格式可以运行</span></span><br><span class="line">!pip install seaborn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">&quot;./_data_set/Clustering/nigerian-songs.csv&quot;</span>)</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure><pre><code>Looking in indexes: http://mirrors.aliyun.com/pypi/simple/Requirement already satisfied: seaborn in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (0.11.2)Requirement already satisfied: scipy&gt;=1.0 in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (from seaborn) (1.7.1)Requirement already satisfied: numpy&gt;=1.15 in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (from seaborn) (1.20.3)Requirement already satisfied: pandas&gt;=0.23 in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (from seaborn) (1.4.2)Requirement already satisfied: matplotlib&gt;=2.2 in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (from seaborn) (3.4.3)Requirement already satisfied: python-dateutil&gt;=2.7 in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (from matplotlib&gt;=2.2-&gt;seaborn) (2.8.2)Requirement already satisfied: cycler&gt;=0.10 in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (from matplotlib&gt;=2.2-&gt;seaborn) (0.11.0)Requirement already satisfied: pyparsing&gt;=2.2.1 in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (from matplotlib&gt;=2.2-&gt;seaborn) (3.0.4)Requirement already satisfied: kiwisolver&gt;=1.0.1 in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (from matplotlib&gt;=2.2-&gt;seaborn) (1.3.2)Requirement already satisfied: pillow&gt;=6.2.0 in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (from matplotlib&gt;=2.2-&gt;seaborn) (9.0.1)Requirement already satisfied: pytz&gt;=2020.1 in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (from pandas&gt;=0.23-&gt;seaborn) (2021.3)Requirement already satisfied: six&gt;=1.5 in d:\scoop\apps\anaconda3\2021.11\lib\site-packages (from python-dateutil&gt;=2.7-&gt;matplotlib&gt;=2.2-&gt;seaborn) (1.16.0)</code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }<pre><code>.dataframe tbody tr th &#123;    vertical-align: top;&#125;.dataframe thead th &#123;    text-align: right;&#125;</code></pre></style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>name</th>      <th>album</th>      <th>artist</th>      <th>artist_top_genre</th>      <th>release_date</th>      <th>length</th>      <th>popularity</th>      <th>danceability</th>      <th>acousticness</th>      <th>energy</th>      <th>instrumentalness</th>      <th>liveness</th>      <th>loudness</th>      <th>speechiness</th>      <th>tempo</th>      <th>time_signature</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>Sparky</td>      <td>Mandy &amp; The Jungle</td>      <td>Cruel Santino</td>      <td>alternative r&amp;b</td>      <td>2019</td>      <td>144000</td>      <td>48</td>      <td>0.666</td>      <td>0.8510</td>      <td>0.420</td>      <td>0.534000</td>      <td>0.1100</td>      <td>-6.699</td>      <td>0.0829</td>      <td>133.015</td>      <td>5</td>    </tr>    <tr>      <th>1</th>      <td>shuga rush</td>      <td>EVERYTHING YOU HEARD IS TRUE</td>      <td>Odunsi (The Engine)</td>      <td>afropop</td>      <td>2020</td>      <td>89488</td>      <td>30</td>      <td>0.710</td>      <td>0.0822</td>      <td>0.683</td>      <td>0.000169</td>      <td>0.1010</td>      <td>-5.640</td>      <td>0.3600</td>      <td>129.993</td>      <td>3</td>    </tr>    <tr>      <th>2</th>      <td>LITT!</td>      <td>LITT!</td>      <td>AYLØ</td>      <td>indie r&amp;b</td>      <td>2018</td>      <td>207758</td>      <td>40</td>      <td>0.836</td>      <td>0.2720</td>      <td>0.564</td>      <td>0.000537</td>      <td>0.1100</td>      <td>-7.127</td>      <td>0.0424</td>      <td>130.005</td>      <td>4</td>    </tr>    <tr>      <th>3</th>      <td>Confident / Feeling Cool</td>      <td>Enjoy Your Life</td>      <td>Lady Donli</td>      <td>nigerian pop</td>      <td>2019</td>      <td>175135</td>      <td>14</td>      <td>0.894</td>      <td>0.7980</td>      <td>0.611</td>      <td>0.000187</td>      <td>0.0964</td>      <td>-4.961</td>      <td>0.1130</td>      <td>111.087</td>      <td>4</td>    </tr>    <tr>      <th>4</th>      <td>wanted you</td>      <td>rare.</td>      <td>Odunsi (The Engine)</td>      <td>afropop</td>      <td>2018</td>      <td>152049</td>      <td>25</td>      <td>0.702</td>      <td>0.1160</td>      <td>0.833</td>      <td>0.910000</td>      <td>0.3480</td>      <td>-6.044</td>      <td>0.0447</td>      <td>105.115</td>      <td>4</td>    </tr>  </tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">fetured_df = df[((df[<span class="string">&#x27;artist_top_genre&#x27;</span>] == <span class="string">&#x27;afro dancehall&#x27;</span>)</span><br><span class="line">                 | (df[<span class="string">&#x27;artist_top_genre&#x27;</span>] == <span class="string">&#x27;afropop&#x27;</span>)</span><br><span class="line">                 | (df[<span class="string">&#x27;artist_top_genre&#x27;</span>] == <span class="string">&#x27;nigerian pop&#x27;</span>))</span><br><span class="line">                &amp; (df[<span class="string">&#x27;popularity&#x27;</span>] &gt; <span class="number">0</span>)]</span><br><span class="line"></span><br><span class="line">top = fetured_df[<span class="string">&#x27;artist_top_genre&#x27;</span>].value_counts()</span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">7</span>))</span><br><span class="line">sns.barplot(x=top.index, y=top.values)</span><br><span class="line">plt.xticks(rotation=<span class="number">45</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Top genres&#x27;</span>, color=<span class="string">&#x27;blue&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 箱线图, 可以直观看出数据的分布</span></span><br><span class="line">plt.figure(figsize=(<span class="number">20</span>, <span class="number">20</span>), dpi=<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 1)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;popularity&#x27;, data=df)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 2)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;acousticness&#x27;, data=df)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 3)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;energy&#x27;, data=df)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 4)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;instrumentalness&#x27;, data=df)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 5)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;liveness&#x27;, data=df)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 6)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;loudness&#x27;, data=df)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 7)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;speechiness&#x27;, data=df)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 8)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;tempo&#x27;, data=df)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 9)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;time_signature&#x27;, data=df)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 10)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;danceability&#x27;, data=df)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 11)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;length&#x27;, data=df)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  plt.subplot(4, 3, 12)</span></span><br><span class="line"><span class="string">  sns.boxplot(x=&#x27;release_date&#x27;, data=df)</span></span><br><span class="line"><span class="string"> &quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i, v <span class="keyword">in</span> <span class="built_in">enumerate</span>([</span><br><span class="line">        <span class="string">&quot;popularity&quot;</span>, <span class="string">&quot;acousticness&quot;</span>, <span class="string">&quot;energy&quot;</span>, <span class="string">&quot;instrumentalness&quot;</span>, <span class="string">&quot;liveness&quot;</span>,</span><br><span class="line">        <span class="string">&quot;loudness&quot;</span>, <span class="string">&quot;speechiness&quot;</span>, <span class="string">&quot;tempo&quot;</span>, <span class="string">&quot;time_signature&quot;</span>, <span class="string">&quot;danceability&quot;</span>,</span><br><span class="line">        <span class="string">&quot;length&quot;</span>, <span class="string">&quot;release_date&quot;</span></span><br><span class="line">]):</span><br><span class="line">    plt.subplot(<span class="number">4</span>, <span class="number">3</span>, i + <span class="number">1</span>)</span><br><span class="line">    sns.boxplot(x=v, data=df)</span><br><span class="line">    <span class="comment"># plt.title(v)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="ML_files/ML_53_0.png" alt="png"></p><p><img src="ML_files/ML_53_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> KMeans</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics</span><br><span class="line"></span><br><span class="line">le = LabelEncoder()</span><br><span class="line"></span><br><span class="line">X = df.loc[:, (<span class="string">&#x27;artist_top_genre&#x27;</span>, <span class="string">&#x27;popularity&#x27;</span>, <span class="string">&#x27;danceability&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;acousticness&#x27;</span>, <span class="string">&#x27;loudness&#x27;</span>, <span class="string">&#x27;energy&#x27;</span>)]</span><br><span class="line">X[<span class="string">&#x27;artist_top_genre&#x27;</span>] = le.fit_transform(X[<span class="string">&#x27;artist_top_genre&#x27;</span>])</span><br><span class="line">y = le.transform(df[<span class="string">&#x27;artist_top_genre&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 聚为3类</span></span><br><span class="line">nclusters = <span class="number">3</span></span><br><span class="line">seed = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">km = KMeans(n_clusters=nclusters, random_state=seed).fit(X)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Predict the cluster for each data point</span></span><br><span class="line">y_cluster_kmeans = km.predict(X)</span><br><span class="line"><span class="built_in">print</span>(y_cluster_kmeans)</span><br><span class="line"></span><br><span class="line">score = metrics.silhouette_score(X, y_cluster_kmeans)</span><br><span class="line"><span class="comment"># score 从 [-1,1], 越大表示聚类效果越好</span></span><br><span class="line"><span class="built_in">print</span>(score)</span><br></pre></td></tr></table></figure><pre><code>[2 0 2 0 0 0 0 0 0 0 0 0 2 0 0 0 0 0 2 0 0 0 0 0 2 0 0 1 0 0 2 1 1 2 2 2 0 2 0 1 2 2 2 0 1 1 2 1 0 0 0 0 1 1 1 1 1 2 0 2 1 0 2 0 1 2 1 2 1 1 1 1 2 1 0 2 2 0 0 0 1 0 0 1 1 1 1 0 0 1 1 1 2 1 0 0 1 1 1 0 0 1 0 1 2 0 1 1 2 0 1 1 1 1 1 1 1 0 1 0 1 0 1 0 2 1 2 0 1 1 1 0 0 1 1 0 2 0 1 1 0 0 0 1 1 0 1 0 2 0 1 1 0 0 0 1 0 1 1 0 1 0 1 0 0 1 1 1 0 0 0 1 1 1 0 0 1 0 2 1 1 1 1 1 0 1 1 1 1 0 2 0 0 0 0 0 0 1 1 2 1 1 1 1 1 2 1 1 0 0 1 1 1 1 1 0 0 1 0 1 0 0 1 2 1 1 1 1 0 1 1 1 1 0 1 1 1 0 1 0 1 2 1 1 1 1 1 1 0 1 0 1 0 1 0 1 1 1 1 2 0 0 1 1 0 0 0 1 0 0 1 1 1 2 1 1 2 0 0 1 0 1 1 0 1 1 1 0 2 1 1 2 2 2 0 2 2 2 2 2 2 2 2 1 2 2 1 2 1 2 1 2 2 2 0 1 0 1 1 0 1 2 1 1 2 1 0 2 2 0 0 0 1 0 1 0 1 1 1 1 2 1 1 2 2 1 0 2 0 2 1 1 2 2 2 0 0 2 2 1 1 0 0 0 1 1 1 1 1 1 1 1 1 1 2 1 1 0 1 1 1 1 0 1 1 1 1 0 0 1 0 1 1 1 1 1 1 1 1 1 0 1 1 0 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 2 1 2 2 1 0 0 0 1 2 1 1 2 1 0 0 0 2 2 2 0 2 2 2 0 2 2 0 1 0 1 2 0 1 1 1 1 1 1 0 1 1 0 0 1 0 1 0 1 1 1 1 1 1 1 1 1 0 1 0 1 1 1 1 1 1 0 1 1 1 2 0 0 1 1 1 1 2 1 0 2 1 1 1 0 1 1 2 1 0 0 0 0 0 1 1 1 1 1 0 0 1 1 1 1 1 1 1]0.5918299843029218</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 手肘方法: 拐点附近就是较好的聚类划分</span></span><br><span class="line">wcss = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">    kmeans = KMeans(n_clusters=i, init=<span class="string">&#x27;k-means++&#x27;</span>, random_state=<span class="number">42</span>).fit(X)</span><br><span class="line">    wcss.append(kmeans.inertia_)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">5</span>))</span><br><span class="line">sns.lineplot(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>), wcss, marker=<span class="string">&#x27;o&#x27;</span>, color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Elbow&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of clusters&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;WCSS&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><pre><code>D:\Scoop\apps\anaconda3\current\lib\site-packages\sklearn\cluster\_kmeans.py:1036: UserWarning: KMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can avoid it by setting the environment variable OMP_NUM_THREADS=3.  warnings.warn(D:\Scoop\apps\anaconda3\current\lib\site-packages\seaborn\_decorators.py:36: FutureWarning: Pass the following variables as keyword args: x, y. From version 0.12, the only valid positional argument will be `data`, and passing other arguments without an explicit keyword will result in an error or misinterpretation.  warnings.warn(</code></pre><p><img src="ML_files/ML_55_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始值的随机选取会影响每次的结果</span></span><br><span class="line">kmeans = KMeans(n_clusters=<span class="number">3</span>).fit(X)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0 | 1 | 2</span></span><br><span class="line">labels = kmeans.predict(X)</span><br><span class="line">plt.scatter(df[<span class="string">&#x27;popularity&#x27;</span>], df[<span class="string">&#x27;danceability&#x27;</span>], c=labels)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;popularity&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;danceability&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 真实值 与 与预测值集合的交集 元素个数</span></span><br><span class="line">correct_labels = <span class="built_in">sum</span>(y == kmeans.labels_)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%d/%d samples were correctly labeled.&quot;</span> %</span><br><span class="line">      (correct_labels, y.size))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Accuracy score: &#123;0:0.2f&#125;&#x27;</span>.<span class="built_in">format</span>(correct_labels / <span class="built_in">float</span>(y.size)))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="ML_files/ML_56_0.png" alt="png"></p><pre><code>93/530 samples were correctly labeled.Accuracy score: 0.18</code></pre><h5 id="sample-2">sample-2</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.colors</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> sklearn.datasets <span class="keyword">as</span> ds</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> homogeneity_score, completeness_score, v_measure_score, adjusted_mutual_info_score,\</span><br><span class="line">    adjusted_rand_score, silhouette_score</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> KMeans</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">expand</span>(<span class="params">a, b</span>):</span><br><span class="line">    d = (b - a) * <span class="number">0.1</span></span><br><span class="line">    <span class="keyword">return</span> a - d, b + d</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">N = <span class="number">400</span></span><br><span class="line">centers = <span class="number">4</span></span><br><span class="line">data, y = ds.make_blobs(N, n_features=<span class="number">2</span>, centers=centers, random_state=<span class="number">2</span>)</span><br><span class="line">data2, y2 = ds.make_blobs(N,</span><br><span class="line">                          n_features=<span class="number">2</span>,</span><br><span class="line">                          centers=centers,</span><br><span class="line">                          cluster_std=(<span class="number">1</span>, <span class="number">2.5</span>, <span class="number">0.5</span>, <span class="number">2</span>),</span><br><span class="line">                          random_state=<span class="number">2</span>)</span><br><span class="line">data3 = np.vstack(</span><br><span class="line">    (data[y == <span class="number">0</span>][:], data[y == <span class="number">1</span>][:<span class="number">50</span>], data[y == <span class="number">2</span>][:<span class="number">20</span>], data[y == <span class="number">3</span>][:<span class="number">5</span>]))</span><br><span class="line">y3 = np.array([<span class="number">0</span>] * <span class="number">100</span> + [<span class="number">1</span>] * <span class="number">50</span> + [<span class="number">2</span>] * <span class="number">20</span> + [<span class="number">3</span>] * <span class="number">5</span>)</span><br><span class="line">m = np.array(((<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">3</span>)))</span><br><span class="line">data_r = data.dot(m)</span><br><span class="line"></span><br><span class="line">matplotlib.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">matplotlib.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line">cm = matplotlib.colors.ListedColormap(<span class="built_in">list</span>(<span class="string">&#x27;rgbm&#x27;</span>))</span><br><span class="line">data_list = data, data, data_r, data_r, data2, data2, data3, data3</span><br><span class="line">y_list = y, y, y, y, y2, y2, y3, y3</span><br><span class="line">titles = <span class="string">&#x27;原始数据&#x27;</span>, <span class="string">&#x27;KMeans++聚类&#x27;</span>, <span class="string">&#x27;旋转后数据&#x27;</span>, <span class="string">&#x27;旋转后KMeans++聚类&#x27;</span>,\</span><br><span class="line">          <span class="string">&#x27;方差不相等数据&#x27;</span>, <span class="string">&#x27;方差不相等KMeans++聚类&#x27;</span>, <span class="string">&#x27;数量不相等数据&#x27;</span>, <span class="string">&#x27;数量不相等KMeans++聚类&#x27;</span></span><br><span class="line"></span><br><span class="line">model = KMeans(n_clusters=<span class="number">4</span>, init=<span class="string">&#x27;k-means++&#x27;</span>, n_init=<span class="number">5</span>)</span><br><span class="line">fig = plt.figure(figsize=(<span class="number">8</span>, <span class="number">9</span>), facecolor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i, (x, y, title) <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">zip</span>(data_list, y_list, titles), start=<span class="number">1</span>):</span><br><span class="line">    <span class="comment"># plt.subplot(4, 2, i)</span></span><br><span class="line">    ax = fig.add_subplot(<span class="number">4</span>, <span class="number">2</span>, i)</span><br><span class="line">    plt.title(title)</span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">        y_pred = y</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        y_pred = model.fit_predict(x)</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Homogeneity:&#x27;</span>, homogeneity_score(y, y_pred))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;completeness:&#x27;</span>, completeness_score(y, y_pred))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;V measure:&#x27;</span>, v_measure_score(y, y_pred))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;AMI:&#x27;</span>, adjusted_mutual_info_score(y, y_pred))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ARI:&#x27;</span>, adjusted_rand_score(y, y_pred))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Silhouette:&#x27;</span>, silhouette_score(x, y_pred), <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    ax.scatter(x[:, <span class="number">0</span>], x[:, <span class="number">1</span>], s=<span class="number">10</span>, c=y_pred, cmap=cm, edgecolors=<span class="string">&#x27;none&#x27;</span>)</span><br><span class="line">    ax.grid(b=<span class="literal">True</span>, ls=<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">plt.tight_layout(<span class="number">2</span>, rect=(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0.95</span>))</span><br><span class="line">plt.suptitle(<span class="string">&#x27;数据分布对KMeans聚类的影响&#x27;</span>, fontsize=<span class="number">18</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>1Homogeneity: 1.0completeness: 1.0V measure: 1.0AMI: 1.0ARI: 1.0Silhouette: 0.616436816839852 2Homogeneity: 0.9898828240244267completeness: 0.9899006758819153V measure: 0.9898917498726852AMI: 0.9898081557479033ARI: 0.9933165272203728Silhouette: 0.6189656317733315 3Homogeneity: 1.0completeness: 1.0V measure: 1.0AMI: 1.0ARI: 1.0Silhouette: 0.5275987244664399 4Homogeneity: 0.7296158940840607completeness: 0.7315285272632114V measure: 0.7305709588584066AMI: 0.7283397010755561ARI: 0.6783811042853299Silhouette: 0.5366236044449266 5Homogeneity: 1.0completeness: 1.0V measure: 1.0AMI: 1.0ARI: 1.0Silhouette: 0.4790725752982868 6Homogeneity: 0.7449364376693913completeness: 0.7755445167472191V measure: 0.7599323988656883AMI: 0.757903292819801ARI: 0.7113213508090338Silhouette: 0.5737260449304202 7Homogeneity: 1.0completeness: 1.0V measure: 1.0AMI: 1.0ARI: 1.0Silhouette: 0.5975066093204152 8Homogeneity: 0.9776347312784609completeness: 0.9728632742060752V measure: 0.975243166591057AMI: 0.9745709993295113ARI: 0.9906840043816505Silhouette: 0.6013877858619149 C:\Users\utsuk\AppData\Local\Temp\ipykernel_28356\867049078.py:57: MatplotlibDeprecationWarning: Passing the pad parameter of tight_layout() positionally is deprecated since Matplotlib 3.3; the parameter will become keyword-only two minor releases later.  plt.tight_layout(2, rect=(0, 0, 1, 0.95))</code></pre><p><img src="ML_files/ML_58_2.png" alt="png"></p><h4 id="层次聚类">层次聚类</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> AgglomerativeClustering</span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> kneighbors_graph</span><br><span class="line"><span class="keyword">import</span> sklearn.datasets <span class="keyword">as</span> ds</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">expand</span>(<span class="params">a, b, r</span>):</span><br><span class="line">    d = (b - a) * r</span><br><span class="line">    <span class="keyword">return</span> a - d, b + d</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    warnings.filterwarnings(action=<span class="string">&#x27;ignore&#x27;</span>, category=UserWarning)</span><br><span class="line">    np.set_printoptions(suppress=<span class="literal">True</span>)</span><br><span class="line">    np.random.seed(<span class="number">0</span>)</span><br><span class="line">    n_clusters = <span class="number">4</span></span><br><span class="line">    N = <span class="number">400</span></span><br><span class="line">    data1, y1 = ds.make_blobs(n_samples=N,</span><br><span class="line">                              n_features=<span class="number">2</span>,</span><br><span class="line">                              centers=((-<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, -<span class="number">1</span>), (-<span class="number">1</span>, -<span class="number">1</span>)),</span><br><span class="line">                              cluster_std=(<span class="number">0.1</span>, <span class="number">0.2</span>, <span class="number">0.3</span>, <span class="number">0.4</span>),</span><br><span class="line">                              random_state=<span class="number">0</span>)</span><br><span class="line">    data1 = np.array(data1)</span><br><span class="line">    n_noise = <span class="built_in">int</span>(<span class="number">0.1</span> * N)</span><br><span class="line">    r = np.random.rand(n_noise, <span class="number">2</span>)</span><br><span class="line">    data_min1, data_min2 = np.<span class="built_in">min</span>(data1, axis=<span class="number">0</span>)</span><br><span class="line">    data_max1, data_max2 = np.<span class="built_in">max</span>(data1, axis=<span class="number">0</span>)</span><br><span class="line">    r[:, <span class="number">0</span>] = r[:, <span class="number">0</span>] * (data_max1 - data_min1) + data_min1</span><br><span class="line">    r[:, <span class="number">1</span>] = r[:, <span class="number">1</span>] * (data_max2 - data_min2) + data_min2</span><br><span class="line">    data1_noise = np.concatenate((data1, r), axis=<span class="number">0</span>)</span><br><span class="line">    y1_noise = np.concatenate((y1, [<span class="number">4</span>] * n_noise))</span><br><span class="line"></span><br><span class="line">    data2, y2 = ds.make_moons(n_samples=N, noise=<span class="number">.05</span>)</span><br><span class="line">    data2 = np.array(data2)</span><br><span class="line">    n_noise = <span class="built_in">int</span>(<span class="number">0.1</span> * N)</span><br><span class="line">    r = np.random.rand(n_noise, <span class="number">2</span>)</span><br><span class="line">    data_min1, data_min2 = np.<span class="built_in">min</span>(data2, axis=<span class="number">0</span>)</span><br><span class="line">    data_max1, data_max2 = np.<span class="built_in">max</span>(data2, axis=<span class="number">0</span>)</span><br><span class="line">    r[:, <span class="number">0</span>] = r[:, <span class="number">0</span>] * (data_max1 - data_min1) + data_min1</span><br><span class="line">    r[:, <span class="number">1</span>] = r[:, <span class="number">1</span>] * (data_max2 - data_min2) + data_min2</span><br><span class="line">    data2_noise = np.concatenate((data2, r), axis=<span class="number">0</span>)</span><br><span class="line">    y2_noise = np.concatenate((y2, [<span class="number">3</span>] * n_noise))</span><br><span class="line"></span><br><span class="line">    mpl.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">    mpl.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    cm = mpl.colors.ListedColormap([<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line">    plt.figure(figsize=(<span class="number">10</span>, <span class="number">8</span>), facecolor=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">    plt.cla()</span><br><span class="line">    linkages = (<span class="string">&quot;ward&quot;</span>, <span class="string">&quot;complete&quot;</span>, <span class="string">&quot;average&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> index, (n_clusters, data, y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(</span><br><span class="line">        ((<span class="number">4</span>, data1, y1), (<span class="number">4</span>, data1_noise, y1_noise), (<span class="number">2</span>, data2, y2),</span><br><span class="line">         (<span class="number">2</span>, data2_noise, y2_noise))):</span><br><span class="line">        plt.subplot(<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span> * index + <span class="number">1</span>)</span><br><span class="line">        plt.scatter(data[:, <span class="number">0</span>], data[:, <span class="number">1</span>], c=y, s=<span class="number">12</span>, edgecolors=<span class="string">&#x27;k&#x27;</span>, cmap=cm)</span><br><span class="line">        plt.title(<span class="string">&#x27;Prime&#x27;</span>, fontsize=<span class="number">12</span>)</span><br><span class="line">        plt.grid(b=<span class="literal">True</span>, ls=<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">        data_min1, data_min2 = np.<span class="built_in">min</span>(data, axis=<span class="number">0</span>)</span><br><span class="line">        data_max1, data_max2 = np.<span class="built_in">max</span>(data, axis=<span class="number">0</span>)</span><br><span class="line">        plt.xlim(expand(data_min1, data_max1, <span class="number">0.05</span>))</span><br><span class="line">        plt.ylim(expand(data_min2, data_max2, <span class="number">0.05</span>))</span><br><span class="line"></span><br><span class="line">        connectivity = kneighbors_graph(data,</span><br><span class="line">                                        n_neighbors=<span class="number">7</span>,</span><br><span class="line">                                        mode=<span class="string">&#x27;distance&#x27;</span>,</span><br><span class="line">                                        metric=<span class="string">&#x27;minkowski&#x27;</span>,</span><br><span class="line">                                        p=<span class="number">2</span>,</span><br><span class="line">                                        include_self=<span class="literal">True</span>)</span><br><span class="line">        connectivity = <span class="number">0.5</span> * (connectivity + connectivity.T)</span><br><span class="line">        <span class="keyword">for</span> i, linkage <span class="keyword">in</span> <span class="built_in">enumerate</span>(linkages):</span><br><span class="line">            ac = AgglomerativeClustering(n_clusters=n_clusters,</span><br><span class="line">                                         affinity=<span class="string">&#x27;euclidean&#x27;</span>,</span><br><span class="line">                                         connectivity=connectivity,</span><br><span class="line">                                         linkage=linkage)</span><br><span class="line">            ac.fit(data)</span><br><span class="line">            y = ac.labels_</span><br><span class="line">            plt.subplot(<span class="number">4</span>, <span class="number">4</span>, i + <span class="number">2</span> + <span class="number">4</span> * index)</span><br><span class="line">            plt.scatter(data[:, <span class="number">0</span>],</span><br><span class="line">                        data[:, <span class="number">1</span>],</span><br><span class="line">                        c=y,</span><br><span class="line">                        s=<span class="number">12</span>,</span><br><span class="line">                        edgecolors=<span class="string">&#x27;k&#x27;</span>,</span><br><span class="line">                        cmap=cm)</span><br><span class="line">            plt.title(linkage, fontsize=<span class="number">12</span>)</span><br><span class="line">            plt.grid(b=<span class="literal">True</span>, ls=<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">            plt.xlim(expand(data_min1, data_max1, <span class="number">0.05</span>))</span><br><span class="line">            plt.ylim(expand(data_min2, data_max2, <span class="number">0.05</span>))</span><br><span class="line">    plt.suptitle(<span class="string">&#x27;层次聚类的不同合并策略&#x27;</span>, fontsize=<span class="number">15</span>)</span><br><span class="line">    plt.tight_layout(<span class="number">0.5</span>, rect=(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0.95</span>))</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="ML_files/ML_60_0.png" alt="png"></p><h3 id="降维问题-2">降维问题</h3><h4 id="缺失值比率-2">缺失值比率</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import required libraries</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># read the data</span></span><br><span class="line">train = pd.read_csv(<span class="string">&quot;./_data_set/降维问题/train_v9rqX0R.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># checking the percentage of missing values in each variable</span></span><br><span class="line"><span class="comment"># 数据完整率 = (空数 / 所有数) * 100</span></span><br><span class="line">a = train.isnull().<span class="built_in">sum</span>() / <span class="built_in">len</span>(train) * <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># saving column names in a variable</span></span><br><span class="line">variable = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">12</span>):</span><br><span class="line">    <span class="keyword">if</span> a[i] &lt;= <span class="number">20</span>:  <span class="comment">#setting the threshold as 20%</span></span><br><span class="line">        variable.append(train.columns[i])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 缺失率大于阈值的列</span></span><br><span class="line"><span class="built_in">print</span>(variable)</span><br></pre></td></tr></table></figure><pre><code>['Item_Identifier', 'Item_Weight', 'Item_Fat_Content', 'Item_Visibility', 'Item_Type', 'Item_MRP', 'Outlet_Identifier', 'Outlet_Establishment_Year', 'Outlet_Location_Type', 'Outlet_Type', 'Item_Outlet_Sales']</code></pre><h4 id="低方差过滤-2">低方差过滤</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import required libraries</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># read the data</span></span><br><span class="line">train = pd.read_csv(<span class="string">&quot;./_data_set/降维问题/train_v9rqX0R.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 填充空项</span></span><br><span class="line">train[<span class="string">&#x27;Item_Weight&#x27;</span>].fillna(train[<span class="string">&#x27;Item_Weight&#x27;</span>].median(), inplace=<span class="literal">True</span>)</span><br><span class="line">train[<span class="string">&#x27;Outlet_Size&#x27;</span>].fillna(train[<span class="string">&#x27;Outlet_Size&#x27;</span>].mode()[<span class="number">0</span>], inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 填充后的缺失率</span></span><br><span class="line"><span class="built_in">print</span>(train.isnull().<span class="built_in">sum</span>() / <span class="built_in">len</span>(train) * <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">numeric = train[[</span><br><span class="line">    <span class="string">&#x27;Item_Weight&#x27;</span>, <span class="string">&#x27;Item_Visibility&#x27;</span>, <span class="string">&#x27;Item_MRP&#x27;</span>, <span class="string">&#x27;Outlet_Establishment_Year&#x27;</span></span><br><span class="line">]]</span><br><span class="line">var = numeric.var()</span><br><span class="line">numeric = numeric.columns</span><br><span class="line">variable = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(var)):</span><br><span class="line">    <span class="keyword">if</span> var[i] &gt;= <span class="number">10</span>:  <span class="comment">#setting the threshold as 10%</span></span><br><span class="line">        variable.append(numeric[i])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(variable)</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>Item_Identifier              0.0Item_Weight                  0.0Item_Fat_Content             0.0Item_Visibility              0.0Item_Type                    0.0Item_MRP                     0.0Outlet_Identifier            0.0Outlet_Establishment_Year    0.0Outlet_Size                  0.0Outlet_Location_Type         0.0Outlet_Type                  0.0Item_Outlet_Sales            0.0dtype: float64['Item_Weight', 'Item_MRP', 'Outlet_Establishment_Year']</code></pre><h2 id="代码相关">代码相关</h2><h3 id="存储-读取模型">存储-读取模型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> sklearn.linear_model <span class="keyword">as</span> lm  <span class="comment"># 线性模型</span></span><br><span class="line"><span class="keyword">import</span> sklearn.metrics <span class="keyword">as</span> sm  <span class="comment"># 模型性能评价模块</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> mp</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line">x = np.array([[<span class="number">0.5</span>], [<span class="number">0.6</span>], [<span class="number">0.8</span>], [<span class="number">1.1</span>], [<span class="number">1.4</span>]])  <span class="comment"># 输入集</span></span><br><span class="line">y = np.array([<span class="number">5.0</span>, <span class="number">5.5</span>, <span class="number">6.0</span>, <span class="number">6.8</span>, <span class="number">7.0</span>])  <span class="comment"># 输出集</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线性回归器</span></span><br><span class="line">model = lm.LinearRegression()</span><br><span class="line"><span class="comment"># 用已知输入、输出数据集训练回归器</span></span><br><span class="line">model.fit(x, y)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;训练完成.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存训练后的模型</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;linear_model.pkl&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    pickle.dump(model, f)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;保存模型完成.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">######################### 加载模型 #########################</span></span><br><span class="line"><span class="comment"># 上面通过训练数据x,y 训练好了 x -&gt; y 的线性回归模型</span></span><br><span class="line"><span class="comment"># 下面加载模型, 再给出测试数据 x, 查看模型预测结果直线与原始数据 (x,y) 的拟合度</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;linear_model.pkl&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    model = pickle.load(f)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;加载模型完成.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据加载的模型预测输出</span></span><br><span class="line">pred_y = model.predict(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可视化回归曲线</span></span><br><span class="line">mp.figure(<span class="string">&#x27;Linear Regression&#x27;</span>, facecolor=<span class="string">&#x27;lightgray&#x27;</span>)</span><br><span class="line">mp.title(<span class="string">&#x27;Linear Regression&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">mp.xlabel(<span class="string">&#x27;x&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">mp.ylabel(<span class="string">&#x27;y&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">mp.tick_params(labelsize=<span class="number">10</span>)</span><br><span class="line">mp.grid(linestyle=<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">mp.scatter(x, y, c=<span class="string">&#x27;blue&#x27;</span>, alpha=<span class="number">0.8</span>, s=<span class="number">60</span>, label=<span class="string">&#x27;Sample Points&#x27;</span>)</span><br><span class="line"></span><br><span class="line">mp.plot(x, pred_y, c=<span class="string">&#x27;orangered&#x27;</span>, label=<span class="string">&#x27;Regression&#x27;</span>)</span><br><span class="line"></span><br><span class="line">mp.legend()</span><br><span class="line">mp.show()</span><br></pre></td></tr></table></figure><pre><code>训练完成.保存模型完成.加载模型完成.</code></pre><p><img src="ML_files/ML_66_1.png" alt="png"></p><h3 id="Web-app">Web-app</h3><h4 id="一-3">一</h4><p>train 一个逻辑回归模型并用 pickle 打包</p><p>然后load</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score, classification_report</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line">ufos = pd.read_csv(<span class="string">&#x27;./_data_set/web-app/1/ufos.csv&#x27;</span>)</span><br><span class="line"><span class="comment"># ufos.head()</span></span><br><span class="line"></span><br><span class="line">ufos = pd.DataFrame(&#123;</span><br><span class="line">    <span class="string">&#x27;Seconds&#x27;</span>: ufos[<span class="string">&#x27;duration (seconds)&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;Country&#x27;</span>: ufos[<span class="string">&#x27;country&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;Latitude&#x27;</span>: ufos[<span class="string">&#x27;latitude&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;Longitude&#x27;</span>: ufos[<span class="string">&#x27;longitude&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ufos.Country.unique()</span><br><span class="line"></span><br><span class="line">ufos.dropna(inplace=<span class="literal">True</span>)</span><br><span class="line">ufos = ufos[(ufos[<span class="string">&#x27;Seconds&#x27;</span>] &gt;= <span class="number">1</span>) &amp; (ufos[<span class="string">&#x27;Seconds&#x27;</span>] &lt;= <span class="number">60</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ufos.info()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [&#x27;us&#x27;, nan, &#x27;gb&#x27;, &#x27;ca&#x27;, &#x27;au&#x27;, &#x27;de&#x27;] -&gt; 0-5</span></span><br><span class="line">ufos[<span class="string">&#x27;Country&#x27;</span>] = LabelEncoder().fit_transform(ufos[<span class="string">&#x27;Country&#x27;</span>])</span><br><span class="line"></span><br><span class="line">ufos.head()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ======================== 准备完成 ==============================</span></span><br><span class="line"></span><br><span class="line">x = ufos[[<span class="string">&#x27;Seconds&#x27;</span>, <span class="string">&#x27;Latitude&#x27;</span>, <span class="string">&#x27;Longitude&#x27;</span>]]</span><br><span class="line">y = ufos[<span class="string">&#x27;Country&#x27;</span>]</span><br><span class="line"><span class="comment"># [&#x27;Seconds&#x27;, &#x27;Latitude&#x27;, &#x27;Longitude&#x27;]  ==&gt;  &#x27;Country&#x27;</span></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(x,</span><br><span class="line">                                                    y,</span><br><span class="line">                                                    test_size=<span class="number">0.2</span>,</span><br><span class="line">                                                    random_state=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># default max_iter=100 会超限</span></span><br><span class="line">model = LogisticRegression(max_iter=<span class="number">1000</span>).fit(X_train, y_train)</span><br><span class="line">y_pred = model.predict(X_test)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(classification_report(y_test, y_pred))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Predicted labels: &#x27;</span>, y_pred)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Accuracy: &#x27;</span>, accuracy_score(y_test, y_pred))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ======================== 打包 model ==============================</span></span><br><span class="line"></span><br><span class="line">model_name = <span class="string">&#x27;./_data_set/web-app/1/ufo-model.pkl&#x27;</span></span><br><span class="line"></span><br><span class="line">pickle.dump(model, <span class="built_in">open</span>(model_name, <span class="string">&#x27;wb&#x27;</span>))</span><br></pre></td></tr></table></figure><pre><code>              precision    recall  f1-score   support           0       1.00      1.00      1.00        41           1       0.85      0.47      0.60       250           2       1.00      1.00      1.00         8           3       1.00      1.00      1.00       131           4       0.97      1.00      0.98      4743    accuracy                           0.97      5173   macro avg       0.96      0.89      0.92      5173weighted avg       0.97      0.97      0.97      5173Predicted labels:  [4 4 4 ... 3 4 4]Accuracy:  0.9702300405953992</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model_load = pickle.load(<span class="built_in">open</span>(model_name, <span class="string">&#x27;rb&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(model_load.predict([[<span class="number">50</span>, <span class="number">44</span>, -<span class="number">12</span>]]))</span><br></pre></td></tr></table></figure><pre><code>[3]D:\Scoop\apps\anaconda3\current\lib\site-packages\sklearn\base.py:450: UserWarning: X does not have valid feature names, but LogisticRegression was fitted with feature names  warnings.warn(</code></pre><h4 id="二-3">二</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> cross_val_score</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score, precision_score, confusion_matrix, classification_report</span><br><span class="line"></span><br><span class="line">data = pd.read_csv(<span class="string">&#x27;./_data_set/cuisines_classification/cleaned_cuisines.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除前两列无用的列</span></span><br><span class="line">X = data.iloc[:, <span class="number">2</span>:]</span><br><span class="line">y = data[[<span class="string">&#x27;cuisine&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line">model = SVC(kernel=<span class="string">&#x27;linear&#x27;</span>, C=<span class="number">10</span>, probability=<span class="literal">True</span>, random_state=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># model.fit(X_train, np.revel(y_train))</span></span><br><span class="line">model.fit(X_train, y_train.values.ravel())</span><br><span class="line">y_pred = model.predict(X_test)</span><br><span class="line"><span class="built_in">print</span>(classification_report(y_test, y_pred))</span><br></pre></td></tr></table></figure><pre><code>              precision    recall  f1-score   support     chinese       0.73      0.68      0.70       242      indian       0.89      0.88      0.88       246    japanese       0.80      0.79      0.79       262      korean       0.82      0.75      0.78       229        thai       0.75      0.88      0.81       220    accuracy                           0.79      1199   macro avg       0.79      0.80      0.79      1199weighted avg       0.80      0.79      0.79      1199</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> skl2onnx <span class="keyword">import</span> convert_sklearn</span><br><span class="line"><span class="keyword">from</span> skl2onnx.common.data_types <span class="keyword">import</span> FloatTensorType</span><br><span class="line"></span><br><span class="line"><span class="comment"># 张量为 380</span></span><br><span class="line">initial_type = [(<span class="string">&#x27;float_input&#x27;</span>, FloatTensorType([<span class="literal">None</span>, <span class="number">380</span>]))]</span><br><span class="line">options = &#123;<span class="built_in">id</span>(model): &#123;<span class="string">&#x27;nocl&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;zipmap&#x27;</span>: <span class="literal">False</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">onx = convert_sklearn(model, initial_types=initial_type, options=options)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;./_data_set/web-app/2/model.onnx&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(onx.SerializeToString())</span><br></pre></td></tr></table></figure><h2 id="信息论">信息论</h2><h3 id="两点分布信息熵">两点分布信息熵</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 因为 ln0 无定义, 用此值模拟趋近 0</span></span><br><span class="line">eps = <span class="number">1e-5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># probability</span></span><br><span class="line">p = np.linspace(eps, <span class="number">1</span> - eps, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Information entropy</span></span><br><span class="line">h = -(<span class="number">1</span> - p) * np.log2(<span class="number">1</span> - p) - p * np.log2(p)</span><br><span class="line"></span><br><span class="line">plt.plot(p, h, label=<span class="string">&#x27;Information entropy&#x27;</span>, color=<span class="string">&#x27;red&#x27;</span>, lw=<span class="number">3</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Probability&#x27;</span>, fontsize=<span class="number">16</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Entropy&#x27;</span>, fontsize=<span class="number">16</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;best&#x27;</span>, fontsize=<span class="number">16</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果中信息熵的峰值取决于 log 底数, e为底时峰值为0.7左右, 2为底峰值为1</span></span><br></pre></td></tr></table></figure><p><img src="ML_files/ML_74_0.png" alt="png"></p><h3 id="基尼系数与-ln">基尼系数与-ln</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">eps = <span class="number">1e-4</span></span><br><span class="line">p = np.linspace(eps, <span class="number">1</span> - eps, <span class="number">100</span>)</span><br><span class="line">h = -(<span class="number">1</span> - p) * np.log2(<span class="number">1</span> - p) - p * np.log2(p)</span><br><span class="line">gini = <span class="number">2</span> * (<span class="number">1</span> - p) * p</span><br><span class="line"></span><br><span class="line">plt.plot(p, gini, <span class="string">&#x27;r-&#x27;</span>, lw=<span class="number">3</span>)</span><br><span class="line">plt.plot(p, h / <span class="number">2</span>, <span class="string">&#x27;g-&#x27;</span>, lw=<span class="number">3</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Gini(p) / Ln(p)&#x27;</span>, fontsize=<span class="number">16</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;p&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;H&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;Gini&#x27;</span>, <span class="string">&#x27;Ln&#x27;</span>], loc=<span class="string">&#x27;best&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="ML_files/ML_76_0.png" alt="png"></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-36">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://discover304.top/">https://discover304.top/</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://www.bilibili.com/video/BV16L411w7oQ?p=6">【上海交大】【腾讯】强强联合 机器学习+深度学习</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://www.analyticsvidhya.com/blog/2018/08/dimensionality-reduction-techniques-python/">The Ultimate Guide to 12 Dimensionality Reduction Techniques (with Python codes)</a></p><p><a name='cite_note-4' href='#cite_ref-4'>[4]</a>: <a href="https://github.com/microsoft/ML-For-Beginners">https://github.com/microsoft/ML-For-Beginners</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 人工智能 </tag>
            
            <tag> 信息论 </tag>
            
            <tag> 机器学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>👉live2d-moc3-web-集成渲染库</title>
      <link href="/post/Web/JavaScript/live2d-moc3/README/"/>
      <url>/post/Web/JavaScript/live2d-moc3/README/</url>
      
        <content type="html"><![CDATA[<h2><ul><li><h1>👉Live2d-moc3👈</h1></li></ul></h2><p><a href="https://weidows.github.io/post/Web/JavaScript/live2d-moc3/README">⏩ 文章地址/示例博客</a> | <a href="https://github.com/Weidows-projects/live2d-moc3">✔️ 仓库地址</a> | <a href="https://weidows-projects.github.io/live2d-moc3/">👀 示例页面</a> 欢迎提交 pr !</p><!-- * @?: live2d************************************************ * @Author: JavaScripteidows * @Date: 2022-03-20 22:26:55 * @LastEditors: Weidows * @LastEditTime: 2022-05-23 00:47:01 * @FilePath: \Blog-private\source\_posts\Web\JavaScript\live2d-moc3\README.md * @Description: * @!: *********************************************************************--><ul><li>[x] 支持 live2d-moc3 版本的 web 渲染库</li><li>[x] 支持鼠标点击互动 | 不提供拖动功能</li><li>[x] 新增支持 [多模型] 异步加载 + 每日恒定随机模型 (每天更换自定义列表内随机模型,当日不再随刷新而替换)<ul><li>[x] 已支持模型号越界判定,自动缩小到给定范围</li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="如何添加">如何添加</h2><ul><li><p>三个必要的头: <sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup> <sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Live2DCubismCore --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/live2dcubismcore.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Include Pixi. --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/pixi.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/live2d.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>以及自定义的 js, 单个/多个模型都可以, 但只显示一个, 想要多个可以多 new 几个</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> models = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">      <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">      <span class="attr">left</span>: <span class="string">&quot;0px&quot;</span>,</span><br><span class="line">      <span class="attr">bottom</span>: <span class="string">&quot;0px&quot;</span>,</span><br><span class="line">      <span class="attr">basePath</span>:</span><br><span class="line">        <span class="string">&quot;https://fastly.jsdelivr.net/gh/alg-wiki/AzurLaneL2DViewer@gh-pages/assets&quot;</span>,</span><br><span class="line">      <span class="attr">role</span>: <span class="string">&quot;bisimai_2&quot;</span>,</span><br><span class="line">      <span class="attr">background</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="attr">opacity</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">mobile</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">      <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">      <span class="attr">right</span>: <span class="string">&quot;0px&quot;</span>,</span><br><span class="line">      <span class="attr">bottom</span>: <span class="string">&quot;0px&quot;</span>,</span><br><span class="line">      <span class="attr">basePath</span>:</span><br><span class="line">        <span class="string">&quot;https://fastly.jsdelivr.net/gh/alg-wiki/AzurLaneL2DViewer@gh-pages/assets&quot;</span>,</span><br><span class="line">      <span class="attr">role</span>: <span class="string">&quot;bisimai_2&quot;</span>,</span><br><span class="line">      <span class="attr">background</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="attr">opacity</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">mobile</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Live2</span>dLoader(models);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="比如-Hexo">比如 Hexo</h2><p>添加到主题的 _config.yml</p><p>js 代码可以写完参数后 <a href="https://c.runoob.com/front-end/51/">压缩为一行</a>,一起添加到下面;</p><p>当然也可以魔改框架源码,此处不再赘述.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/live2dcubismcore.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/pixi.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/live2d.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="comment"># - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script&gt;addEventListener(&quot;DOMContentLoaded&quot;,function()&#123;let</span> <span class="string">models=[&#123;left:&quot;0px&quot;,bottom:&quot;0px&quot;,basePath:&quot;https://fastly.jsdelivr.net/gh/alg-wiki/AzurLaneL2DViewer@gh-pages/assets&quot;,role:&quot;bisimai_2&quot;,background:&quot;&quot;,opacity:1,mobile:false,&#125;,&#123;right:&quot;0px&quot;,bottom:&quot;0px&quot;,basePath:&quot;https://fastly.jsdelivr.net/gh/alg-wiki/AzurLaneL2DViewer@gh-pages/assets&quot;,role:&quot;bisimai_2&quot;,background:&quot;&quot;,opacity:1,mobile:false,&#125;,];new</span> <span class="string">Live2dLoader(models)&#125;);&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="可选参数">可选参数</h2><table><thead><tr><th>参数</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>width</td><td>可选[Number]</td><td>800</td><td>宽度，单位为 px</td></tr><tr><td>height</td><td>可选[Number]</td><td>600</td><td>长度，单位为 px</td></tr><tr><td>top,right,bottom,left</td><td>可选[String]</td><td>“”</td><td>模型到浏览器各边框的距离。选择两个即可定位，如定位在左下角：left: ‘0px’ , bottom: ‘0px’</td></tr><tr><td>basePath</td><td>必须[String]</td><td>“”</td><td>live2d 模型资源库的路径,推荐下面仓库,模型非常好看 </br> <a href="https://github.com/alg-wiki/AzurLaneL2DViewer">alg-wiki/AzurLaneL2DViewer</a> </br> <a href="https://github.com/imuncle/live2d">imuncle/live2d</a></td></tr><tr><td>role</td><td>必须[String]</td><td>“”</td><td>角色模型对应的文件夹（即 basePath 下的文件夹</td></tr><tr><td>background</td><td>可选[String]</td><td>“”</td><td>背景图片，可填入图片外链</td></tr><tr><td>opacity</td><td>可选[Number]</td><td>1</td><td>模型透明度，(0,1] 取值</td></tr><tr><td>mobile</td><td>可选[boolean]</td><td>true</td><td>移动端(手机)是否显示</td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Q-A">Q-A</h2><h3 id="模型问题报错">模型问题报错</h3><ul><li><p>关于报错含有 <code>reading ‘_ptr’</code> 的, 是模型不适配问题 (#2)</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">live2dcubismcore</span>.min.js:<span class="number">1</span></span><br><span class="line"><span class="attribute">Uncaught</span> TypeError: Cannot read properties of null (reading ‘_ptr’)</span><br><span class="line"><span class="attribute">at</span> new Model (live2dcubismcore.min.js:<span class="number">1</span>:<span class="number">138485</span>)</span><br><span class="line"><span class="attribute">at</span> Function.Model.fromMoc (live2dcubismcore.min.js:<span class="number">1</span>:<span class="number">138707</span>)</span><br><span class="line"><span class="attribute">at</span> l2d.js💯<span class="number">60</span></span><br><span class="line"><span class="attribute">at</span> t.value (mini-signals.js:<span class="number">93</span>:<span class="number">1</span>)</span><br><span class="line"><span class="attribute">at</span> e.t._onComplete (Loader.js:<span class="number">568</span>:<span class="number">1</span>)</span><br><span class="line"><span class="attribute">at</span> Loader.js:<span class="number">608</span>:<span class="number">1</span></span><br><span class="line"><span class="attribute">at</span> s (async.js:<span class="number">27</span>:<span class="number">1</span>)</span><br><span class="line"><span class="attribute">at</span> e. (interactiveTarget.js:<span class="number">82</span>:<span class="number">5</span>)</span><br><span class="line"><span class="attribute">at</span> Loader.js:<span class="number">590</span>:<span class="number">1</span></span><br><span class="line"><span class="attribute">at</span> async.js:<span class="number">35</span>:<span class="number">1</span></span><br></pre></td></tr></table></figure><p>检验过并不是配置文件哪里有问题, 单纯是二进制模型 .png/.moc3 问题, 想修复的话要修复模型</p></li></ul><hr><h3 id="怎么刷新">怎么刷新</h3><p><img src="https://www.helloimg.com/images/2022/05/23/ZRyZgz.png" alt=""></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-40">借物表</h2><blockquote><p>项目基于<a href="https://github.com/alg-wiki/AzurLaneL2DViewer">AzurLaneL2DViewer</a>修改</p></blockquote><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://fastly.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/frame/live2dcubismcore.min.js">https://fastly.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/frame/live2dcubismcore.min.js</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.6.1/pixi.min.js">https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.6.1/pixi.min.js</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> JavaScript </category>
          
          <category> live2d-moc3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> live2d </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🐊All-about-AI</title>
      <link href="/post/python/AI/AI/"/>
      <url>/post/python/AI/AI/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-05-16 22:31:05 * @FilePath: \Blog-private\source\_posts\python\AI\AI.md * @Description: * @!: *********************************************************************--><ul><li><details>  <summary> 文章封面图 (恐怖慎看) </summary><p><img src="https://www.helloimg.com/images/2022/03/19/RaxZ0b.png" alt="RaxZ0b.png"></p><hr></details></li></ul><p>此篇为本博客中 AI 领域的根, 也可以当做目录 (因为篇幅太长,就给分开了)</p><blockquote><p>文中大量使用 LaTeX 公式, 如何写的可以看 <a href="../../../experience/LaTeX">🍹LaTeX~环形使者(?)</a> <br>强推大佬朋友的文章: <a href="https://discover304.top/2021/12/21/2021q4/123-ai-question-collection/">【人工智能】面试问题整理</a></p></blockquote><ul><li><p>嗟叹</p><p>炼丹界门派好多啊, 一派一传承</p><p>师出少林, 修行武当, 行至小河, 探头一照</p><p>欸, 爷竟是峨眉的 🐵</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="体系概览">体系概览</h2><ul><li><p>人工智能是什么? <sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup><sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup></p><blockquote><p><img src="https://www.helloimg.com/images/2022/02/27/GVidNr.png" alt=""><br><img src="https://www.helloimg.com/images/2022/03/09/RCPHaM.png" alt=""></p></blockquote></li></ul><p>下面包含细分文章的索引 (可点击跳转)</p><blockquote class="pullquote mindmap mindmap-lg"><ul><li>AI<ul><li>研究领域<ul><li><a href="../ML">机器学习</a><ul><li><a href="../DL">深度学习</a></li></ul></li><li>CV 计算机视觉<ul><li>图像识别</li><li>机器视觉</li></ul></li><li>语音信息处理<ul><li>文本-&gt;语音</li><li>语音-&gt;文本</li></ul></li><li>自然语言处理 NLP<ul><li>文本生成</li><li>文本分类</li><li>翻译</li><li>…</li></ul></li><li>ROS 机器人系统</li><li>专家系统</li></ul></li><li>框架和库<ul><li>Tenserflow</li><li>Pytorch</li><li>sklearn</li><li>飞桨</li><li>…</li></ul></li><li>表示学习<ul><li>表示<ul><li>为了提高机器学习系统的准确率,就需要将输入信息转换为有效的特征</li></ul></li><li>数据表示是机器学习的核心问题</li><li>底层特征与高层语义之间存在语义鸿沟,如何在鸿沟上搭桥是表示学习的关键</li><li>表示方法<ul><li>局部表示/离散表示/符号表示<ul><li>如: 红 绿 蓝</li></ul></li><li>分布式表示<ul><li>优点<ul><li>表示能力强</li><li>向量维度低</li><li>相似度容易计算</li></ul></li><li>例如: (255,0,0), (0,255,0)</li></ul></li></ul></li><li>嵌入<ul><li>将一个度量空间中的一些对象映射到另一个低维的度量空间中</li><li>并尽可能保持不同对象之间的拓扑关系,比如自然语言中词的分布式表示</li></ul></li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="数据分析-2">数据分析</h2><blockquote class="pullquote mindmap mindmap-md"><ul><li>数据分析<ul><li>数据类型<ul><li>数值 Numerical<ul><li>离散 discrete</li><li>连续 continuous</li></ul></li><li>分类 Categorical<ul><li>无法相互度量的数据,例如颜色</li></ul></li><li>序数 Ordinal<ul><li>类似分类数据,但可以相互度量</li></ul></li></ul></li><li>常用特殊值<ul><li>均值 mean</li><li>中值 median</li><li>众数 mode</li><li>标准差 std</li><li>方差 var = std * std</li><li>百分位数 percentile<ul><li>返回一个数 x, 这个 x &gt;= 数组中百分之 percentile 的数</li></ul></li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="待办">待办</h2><h3 id="GAN">GAN</h3><p><img src="https://www.helloimg.com/images/2022/04/08/Rsmdm0.png" alt=""></p><p>搜集大量 x 与 y 类型数据, GAN 模型可以自动学习 x 与 y 之间的关系</p><h3 id="异常检测-anomaly-detection">异常检测-anomaly-detection</h3><p><img src="https://www.helloimg.com/images/2022/04/08/Rsmvdm.png" alt=""></p><h3 id="Glow">Glow</h3><p>Glow -&gt; Flow-based generative model</p><p>生成网络属于 DNN,是一种常用的<a href="#%E5%8C%BA%E5%88%86%E6%9C%89-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0">无监督学习模型</a></p><blockquote class="pullquote mindmap mindmap-md"><ul><li>深度神经网络 DNN -&gt; 生成网络<ul><li>生成对抗网络 GANs (Generative Adversarial Networks)</li><li>变分自编码器 VAE (Variational Auto-Encoder)</li><li>Pixel RNN/CNN</li><li>流模型 Glow (Generative Flow)</li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-32">借物表</h2><style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style><div class="bbplayer"><iframe class="bbplayer" id="mmedia-nofsahRrgYKisIxH" src="https://player.bilibili.com/player.html?bvid=BV1J94y1f7u5&page=1&high_quality=1&danmaku=true" allowfullscreen="allowfullscreen" scrolling="no" border="0" frameborder="0" framespacing="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe></div><script> document.getElementById("mmedia-nofsahRrgYKisIxH").style.height=document.getElementById("mmedia-nofsahRrgYKisIxH").scrollWidth*0.76+"px";    window.onresize = function(){      document.getElementById("mmedia-nofsahRrgYKisIxH").style.height=document.getElementById("mmedia-nofsahRrgYKisIxH").scrollWidth*0.76+"px";    }; </script><style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style><div class="bbplayer"><iframe class="bbplayer" id="mmedia-WEomwIabPYSPabgJ" src="https://player.bilibili.com/player.html?bvid=BV16L411w7oQ&page=1&high_quality=1&danmaku=true" allowfullscreen="allowfullscreen" scrolling="no" border="0" frameborder="0" framespacing="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe></div><script> document.getElementById("mmedia-WEomwIabPYSPabgJ").style.height=document.getElementById("mmedia-WEomwIabPYSPabgJ").scrollWidth*0.76+"px";    window.onresize = function(){      document.getElementById("mmedia-WEomwIabPYSPabgJ").style.height=document.getElementById("mmedia-WEomwIabPYSPabgJ").scrollWidth*0.76+"px";    }; </script><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://zhuanlan.zhihu.com/p/86794447">一文看懂人工智能、机器学习、深度学习与神经网络之间的区别与关系</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://nndl.github.io/">神经网络与深度学习</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> AI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 人工智能 </tag>
            
            <tag> 机器学习 </tag>
            
            <tag> 深度学习 </tag>
            
            <tag> doing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥳些些游戏琐事</title>
      <link href="/post/life/game/"/>
      <url>/post/life/game/</url>
      
        <content type="html"><![CDATA[<h1>些些游戏琐事</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-05-07 10:19:44 * @FilePath: \Blog-private\source\_posts\life\game.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E4%BA%9B%E4%BA%9B%E6%B8%B8%E6%88%8F%E7%90%90%E4%BA%8B">些些游戏琐事</a><ul><li><a href="#epic">EPIC</a><ul><li><a href="#%E5%BA%93%E7%A9%BA%E4%BA%86">库空了</a></li></ul></li><li><a href="#%E5%B0%8F%E5%B0%8F%E6%A2%A6%E9%AD%87">小小梦魇</a><ul><li><a href="#%E7%9E%8E%E7%9C%BC%E5%8E%A8%E5%B8%88%E5%85%B3">瞎眼厨师关</a></li></ul></li><li><a href="#%E6%96%B9%E8%88%9F-ark">方舟-ARK</a><ul><li><a href="#%E9%94%81%E5%B8%A7">锁帧</a></li><li><a href="#%E6%9B%B4%E6%94%B9%E7%89%A9%E5%93%81%E5%A0%86%E5%8F%A0%E6%95%B0%E9%87%8F">更改物品堆叠数量</a></li><li><a href="#%E4%BD%9C%E5%BC%8A%E4%BB%A3%E7%A0%81">作弊代码</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="EPIC">EPIC</h2><h3 id="库空了">库空了</h3><ul><li><p>大概就是这么个情况:</p><p><img src="https://www.helloimg.com/images/2022/03/12/RFHXkK.png" alt="RFHXkK.png"></p></li><li><p>试了如下方法:</p><ol><li>用朋友电脑登录,库存正常显示</li><li>重装/清除 C 盘数据(program files,APPdata/Local 等都请了)/清理注册表 -&gt; 都无效</li><li>把设置里所有选项试了个遍,无效</li></ol></li></ul><hr><ul><li><p>之后尝试用 GOG 看看库存,发现 GOG 上正常而且能调用 EPIC 安装游戏</p><p>于是我这样试了下安装了一个游戏,装完后惊奇的发现: 我叼出来了!</p><p><img src="https://www.helloimg.com/images/2022/03/13/RFHq1b.png" alt="RFHq1b.png"></p><p>所以…解决办法就是随便装个游戏</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="小小梦魇">小小梦魇</h2><h3 id="瞎眼厨师关">瞎眼厨师关</h3><p><img src="https://www.helloimg.com/images/2022/03/28/RqmsTz.png" alt=""></p><p>网上教程大多是先让进这个笼子<sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup>,然后等 boss 走到左边后出来跟他赛跑</p><p>试了好多次都被抓</p><p>后来发现, 可以爬上这个笼子,等 boss 走到左边后从笼子右边跳下去,boss 不会追上来</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="方舟-ARK">方舟-ARK</h2><h3 id="锁帧">锁帧</h3><blockquote><p>ARKSurvivalEvolved\ShooterGame\Saved\Config\WindowsNoEditor\Engine.ini</p></blockquote><ul><li><p>在最后 append 这个:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">[/script/engine.renderersettings]</span></span><br><span class="line"><span class="attr">t.maxfps</span>=<span class="number">60</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="更改物品堆叠数量">更改物品堆叠数量</h3><blockquote><p>ARKSurvivalEvolved\ShooterGame\Saved\Config\WindowsNoEditor\GameUserSettings.ini</p></blockquote><p>里面的 <code>ItemStackSizeMultiplier</code> 这一项</p><hr><h3 id="作弊代码">作弊代码</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:left">代码</th></tr></thead><tbody><tr><td style="text-align:center">飞</td><td style="text-align:left">fly</td></tr><tr><td style="text-align:center">走</td><td style="text-align:left">walk</td></tr><tr><td style="text-align:center">伽马值</td><td style="text-align:left">gamma x.x</td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-8">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="http://www.wyaq.com/youxi/gonglue/8142_5.html">小小梦魇 1 图文攻略 全剧情流程+全解谜 boss 打法攻略(5)瞎眼厨子</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://www.bilibili.com/video/BV1mf4y1X7na">方舟生存进化系统自带叠加功能设置方法及效果（非模组）【方舟三分钟】</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://www.bilibili.com/video/BV14V411z7NY">【方舟】告别显卡占用过高造成的卡顿-死机等情况，锁帧教程</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😵‍💫跟力扣斗智斗勇-log-1</title>
      <link href="/post/experience/LeetCode/1/"/>
      <url>/post/experience/LeetCode/1/</url>
      
        <content type="html"><![CDATA[<h1>跟力扣斗智斗勇-log-1</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-06-14 21:13:55 * @FilePath: \Blog-private\source\_posts\experience\LeetCode\1.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E8%B7%9F%E5%8A%9B%E6%89%A3%E6%96%97%E6%99%BA%E6%96%97%E5%8B%87-log-1">跟力扣斗智斗勇-log-1</a><ul><li><a href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95">数据结构与算法</a><ul><li><a href="#%E9%93%BE%E8%A1%A8%E5%8F%8D%E8%BD%AC%E9%97%AE%E9%A2%98">链表反转问题</a></li><li><a href="#%E7%B4%A0%E6%95%B0">素数</a></li><li><a href="#%E5%8C%BA%E5%88%86%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86">区分二叉树遍历</a><ul><li><a href="#%E6%B7%B1%E5%BA%A6-%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86">深度-广度优先遍历</a></li><li><a href="#%E5%89%8D%E4%B8%AD%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86">前中后序遍历</a></li></ul></li><li><a href="#arraylist-linkedlist">ArrayList-LinkedList</a></li></ul></li><li><a href="#%E9%A2%98%E8%A7%A3">题解</a><ul><li><a href="#160-%E7%9B%B8%E4%BA%A4%E9%93%BE%E8%A1%A8">160. 相交链表</a></li></ul></li><li><a href="#%E6%96%B9%E6%B3%95">方法</a><ul><li><a href="#%E6%8A%95%E7%A5%A8%E7%AE%97%E6%B3%95">投票算法</a></li><li><a href="#%E5%BF%AB%E6%85%A2%E6%8C%87%E9%92%88">快慢指针</a></li><li><a href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92">动态规划</a></li></ul></li><li><a href="#%E5%9D%91">坑</a><ul><li><a href="#python-%E5%8F%96%E6%95%B4%E4%B8%8E%E6%95%B4%E9%99%A4">python-取整与整除</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><!-- [⏩ 文章地址](https://weidows.github.io/post/experience/LeetCode/1/) | [✔️ 仓库地址](https://github.com/Weidows-projects/public-post/) 欢迎提交 pr ! --><p>一题二写，三数之和，题解四瞅五瞄六瞧，水平还七上八下九流，十分辣鸡<br>十天九考，八皇会面，题干七页六道五问，答案仅四行三言两语，一点不会</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="数据结构与算法">数据结构与算法</h2><p>课程: 速览 ing</p><style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style><div class="bbplayer"><iframe class="bbplayer" id="mmedia-wtUsZFwEpupSXQpy" src="https://player.bilibili.com/player.html?bvid=BV1a54y1b74k&page=1&high_quality=1&danmaku=true" allowfullscreen="allowfullscreen" scrolling="no" border="0" frameborder="0" framespacing="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe></div><script> document.getElementById("mmedia-wtUsZFwEpupSXQpy").style.height=document.getElementById("mmedia-wtUsZFwEpupSXQpy").scrollWidth*0.76+"px";    window.onresize = function(){      document.getElementById("mmedia-wtUsZFwEpupSXQpy").style.height=document.getElementById("mmedia-wtUsZFwEpupSXQpy").scrollWidth*0.76+"px";    }; </script><h3 id="链表反转问题">链表反转问题</h3><p><code>迭代(栈)</code> / <code>递归</code></p><p>这问题我面试时问我了,我回答的就是栈,面试官说栈要遍历两次,而递归一次就能出(函数参数添加 prev 节点)</p><hr><h3 id="素数">素数</h3><p>非素数(合数) / 素数(质数) : 都要排除 0 和 1</p><ul><li><p>暴力法: 遍历 2 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.2397em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.7603em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em;"><span></span></span></span></span></span></span></span></span> 之前的数字,如果能被整除,那么这个数字不是素数</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i * i &lt; x; i++)&#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>埃塞法: 比如找 100 内有多少个素数 (25 个)</p><p>构造 bool[100]</p><p>找到 3 是素数, 那么 3x3=3, 3x4=12, 3x5=15…3x33=99 都不是素数,对应 bool[i]做标记,遍历时跳过</p></li></ul><hr><h3 id="区分二叉树遍历">区分二叉树遍历</h3><h4 id="深度-广度优先遍历">深度-广度优先遍历</h4><ul><li><p>深度优先遍历: <code>递归</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  inOrder(root.left);</span><br><span class="line">  bstQueue.offer(root.val);</span><br><span class="line">  inOrder(root.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>广度优先遍历: <code>队列</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  bstQueue.offer(root.val);</span><br><span class="line">  inOrder(root.left);</span><br><span class="line">  inOrder(root.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="前中后序遍历">前中后序遍历</h4><p>前序也叫先序, 这三种都属于深度优先遍历</p><ul><li><p>基本上是递归模板,比如中序遍历 BST 如下:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  inOrder(root.left);</span><br><span class="line">  bstQueue.offer(root.val);</span><br><span class="line">  inOrder(root.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>详见这个题解: <a href="https://github.com/Weidows-projects/public-post/blob/main/LeetCode/code/173.%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E8%BF%AD%E4%BB%A3%E5%99%A8.java">https://github.com/Weidows-projects/public-post/blob/main/LeetCode/code/173.二叉搜索树迭代器.java</a></p></li><li><p>前后序遍历: <sup id='cite_ref-3'><a href="#cite_note-3">[3]</a></sup></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  bstQueue.offer(root.val);</span><br><span class="line">  inOrder(root.left);</span><br><span class="line">  inOrder(root.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  inOrder(root.left);</span><br><span class="line">  inOrder(root.right);</span><br><span class="line">  bstQueue.offer(root.val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="ArrayList-LinkedList">ArrayList-LinkedList</h3><p>顺序遍历时间复杂度相同, n 相同时 LinkedList 空间更大</p><ul><li><p>ArrayList:</p><p>随机查询快, 插入和删除慢(不可随机)</p><blockquote><p>随机指的是对任意指定 index 的操作</p></blockquote><hr></li><li><p>LinkedList:</p><p>随机查询慢, 插入和删除快(可随机)</p><p>linkedlist 排序性能更好,并且较 arraylist 更节省空间 <sup id='cite_ref-4'><a href="#cite_note-4">[4]</a></sup></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="题解">题解</h2><h3 id="160-相交链表">160. 相交链表</h3><blockquote><p><a href="https://github.com/Weidows-projects/public-post/blob/main/LeetCode/code/160.%E7%9B%B8%E4%BA%A4%E9%93%BE%E8%A1%A8.py">https://github.com/Weidows-projects/public-post/blob/main/LeetCode/code/160.相交链表.py</a></p></blockquote><ul><li><p>此方法简单描述就是交叉接尾<br><sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getIntersectionNode</span>(<span class="params">self, headA, headB</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :type head1, head1: ListNode</span></span><br><span class="line"><span class="string">        :rtype: ListNode</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        p, q = headA, headB</span><br><span class="line">        <span class="keyword">while</span> p != q:</span><br><span class="line">            p = p.<span class="built_in">next</span> <span class="keyword">if</span> p <span class="keyword">else</span> headB</span><br><span class="line">            q = q.<span class="built_in">next</span> <span class="keyword">if</span> q <span class="keyword">else</span> headA</span><br><span class="line">        <span class="keyword">return</span> p</span><br></pre></td></tr></table></figure><p><img src="https://www.helloimg.com/images/2022/03/09/RCFKPP.png" alt=""></p><p><img src="https://www.helloimg.com/images/2022/03/09/RCFg7n.png" alt=""></p><p>当前链表结尾后接上对方链表的头, 同时以两链表头为起点, 可以发现都走了 7 步后在交叉绿点相遇</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="方法-2">方法</h2><h3 id="投票算法">投票算法</h3><p>可以看一下多数元素的题解 <sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup></p><p>对于出现次数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>大于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>n</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>的元素,能抵消其他元素还有余量,最后 candidate 必然是众数</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="快慢指针">快慢指针</h3><p>常用于链表</p><ol><li><p><a href="https://github.com/Weidows-projects/public-post/blob/main/LeetCode/code/141.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8.go">判断是否存在 <code>环</code>, 相遇即成环</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hasCycle</span><span class="params">(head *ListNode)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">  slow, fast := head, head</span><br><span class="line">  <span class="keyword">for</span> fast != <span class="literal">nil</span> &amp;&amp; fast.Next != <span class="literal">nil</span> &#123;</span><br><span class="line">    slow = slow.Next</span><br><span class="line">    fast = fast.Next.Next</span><br><span class="line">    <span class="keyword">if</span> slow == fast &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="https://github.com/Weidows-projects/public-post/blob/main/LeetCode/code/148.%E6%8E%92%E5%BA%8F%E9%93%BE%E8%A1%A8.java">寻找链表中点</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head, fast = head;</span><br><span class="line"><span class="keyword">while</span> (fast != tail) &#123;</span><br><span class="line">  slow = slow.next;</span><br><span class="line">  fast = fast.next;</span><br><span class="line">  <span class="keyword">if</span> (fast != tail) &#123;</span><br><span class="line">    fast = fast.next;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">mid</span> <span class="operator">=</span> slow;</span><br></pre></td></tr></table></figure></li></ol><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="动态规划">动态规划</h3><p>有的问题会需要<code>前瞻后顾 找最优 &quot;重叠&quot; 子结构</code>, 像是递归/迭代/贪心无法解决或者十分棘手, 瞥一眼又是中等+难度的, 多是 dp (dymanic-programming) 没跑了; 这种问题有个大致框架: <sup id='cite_ref-5'><a href="#cite_note-5">[5]</a></sup></p><ol><li><p>状态矩阵 <code>dp[n][n]</code></p><p>dp[i][j] 一般存储第 i 到 j 位通过条件转换后的状态位/数值</p></li><li><p>条件转换方程</p><p>条件: if-else</p><p>转换方程: 类似 <code>dp[i][j] = max(dp[i + 1][j], dp[i][j - 1])</code> 这种形式</p></li><li><p>最终结果就是最后一趟 i,j 的位置: 如下的 <code>dp[0][ n - 1]</code></p></li></ol><hr><ul><li><p>i, j 的遍历方向是根据转换方程来确定的, 比如 <a href="https://github.com/Weidows-projects/public-post/blob/main/LeetCode/code/516.%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E5%BA%8F%E5%88%97.py">516.最长回文子序列</a> 这个题</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">longestPalindromeSubseq</span>(<span class="params">self, s</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :type s: str</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(s) &lt; <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">len</span>(s)</span><br><span class="line"></span><br><span class="line">        n = <span class="built_in">len</span>(s)</span><br><span class="line">        dp = [[<span class="number">0</span>] * n <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">            dp[i][i] = <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i + <span class="number">1</span>, n):</span><br><span class="line">                <span class="keyword">if</span> s[i] == s[j]:</span><br><span class="line">                    dp[i][j] = dp[i + <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">2</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    dp[i][j] = <span class="built_in">max</span>(dp[i + <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>])</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][n - <span class="number">1</span>]</span><br></pre></td></tr></table></figure><p>在确定 <code>dp[i][j]</code> 前, 需要已经确定 <code>dp[i+1][j]</code> 和 <code>dp[i][j-1]</code></p><p>也就是说: 外层 i 为逆序,从上往下推, 内层 j 为正序从左往右推 (x 为所推的值)</p><table><thead><tr><th style="text-align:center">i \ j</th><th style="text-align:center">0</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th><th style="text-align:center">6</th><th style="text-align:center">7</th><th style="text-align:center">8</th><th style="text-align:center">9</th></tr></thead><tbody><tr><td style="text-align:center">9</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center">x</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center">x</td><td style="text-align:center">x</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td><td style="text-align:center">x</td></tr></tbody></table></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="坑">坑</h2><h3 id="python-取整与整除">python-取整与整除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 整除: 对于正数是int(), 对于负数是round()</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">3</span>//<span class="number">2</span>)          <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(-<span class="number">3</span>//<span class="number">2</span>)         <span class="comment"># -2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">9</span>//<span class="number">5</span>)          <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(-<span class="number">9</span>//<span class="number">5</span>)         <span class="comment"># -2</span></span><br><span class="line"><span class="comment"># 向下取整</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="number">3</span> / <span class="number">2</span>))    <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(-<span class="number">3</span> / <span class="number">2</span>))   <span class="comment"># -1</span></span><br><span class="line"><span class="comment"># 四舍五入</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">round</span>(<span class="number">3</span> / <span class="number">2</span>))  <span class="comment"># 2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">round</span>(-<span class="number">3</span> / <span class="number">2</span>)) <span class="comment"># -2</span></span><br><span class="line"><span class="comment"># 还有其他区别</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="number">14</span> - <span class="number">3</span> / <span class="number">2</span>))  <span class="comment"># 12 (14-1.5=12.5 -&gt; 12)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="number">14</span> - <span class="number">3</span> // <span class="number">2</span>)) <span class="comment"># 13 (14-1=13)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(- <span class="number">3</span> / <span class="number">2</span>))     <span class="comment"># -1 (-1.5 -&gt; -1)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(-<span class="number">3</span> // <span class="number">2</span>))     <span class="comment"># -2</span></span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-24">借物表</h2><p><a name='cite_note-0' href='#cite_ref-0'>[0]</a>: <a href="https://github.com/Weidows-projects/public-post/">✔️ 仓库地址</a></p><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://leetcode-cn.com/problems/intersection-of-two-linked-lists/solution/xiang-jiao-lian-biao-by-leetcode-solutio-a8jn/">https://leetcode-cn.com/problems/intersection-of-two-linked-lists/solution/xiang-jiao-lian-biao-by-leetcode-solutio-a8jn/</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://leetcode-cn.com/problems/majority-element/solution/duo-shu-yuan-su-by-leetcode-solution/">https://leetcode-cn.com/problems/majority-element/solution/duo-shu-yuan-su-by-leetcode-solution/</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://blog.csdn.net/u013834525/article/details/80421684">https://blog.csdn.net/u013834525/article/details/80421684</a></p><p><a name='cite_note-4' href='#cite_ref-4'>[4]</a>: <a href="http://www.manongjc.com/detail/16-qngebjtzewkyzmi.html">jdk8 下 ArrayList 与 LinedList 排序效率对比</a></p><p><a name='cite_note-5' href='#cite_ref-5'>[5]</a>: <a href="https://leetcode-cn.com/problems/longest-palindromic-subsequence/solution/zui-chang-hui-wen-zi-xu-lie-by-leetcode-hcjqp/">https://leetcode-cn.com/problems/longest-palindromic-subsequence/solution/zui-chang-hui-wen-zi-xu-lie-by-leetcode-hcjqp/</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
          <category> LeetCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试 </tag>
            
            <tag> 算法 </tag>
            
            <tag> leetcode </tag>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🙉修为突破灵药-正则表达式</title>
      <link href="/post/experience/regex/"/>
      <url>/post/experience/regex/</url>
      
        <content type="html"><![CDATA[<h1>修为突破灵药-正则表达式</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:44:36 * @FilePath: \Blog-private\source\_posts\experience\regex.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E4%BF%AE%E4%B8%BA%E7%AA%81%E7%A0%B4%E7%81%B5%E8%8D%AF-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">修为突破灵药-正则表达式</a><ul><li><a href="#fix-%E8%AE%B0%E5%BD%95">fix-记录</a></li><li><a href="#regex-%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%9B%BF%E6%8D%A2">regex-多对多替换</a></li><li><a href="#vscode-%E6%89%B9%E9%87%8F%E6%9B%BF%E6%8D%A2">vscode-批量替换</a><ul><li><a href="#%E4%B8%80">一</a></li><li><a href="#%E4%BA%8C">二</a></li></ul></li><li><a href="#sed-%E6%9B%BF%E6%8D%A2%E5%8F%8D%E6%96%9C%E6%9D%A0">sed-替换反斜杠</a></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><blockquote><p>Regular Expressions，缩写为 Regex 或 Regexp</p></blockquote><ul><li><p>推荐两个学习网址:</p><p><a href="https://zhuanlan.zhihu.com/p/74136752">手握手教你学会正则表达式</a></p><p><a href="https://regexlearn.com/zh-cn">https://regexlearn.com/zh-cn</a></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="fix-记录">fix-记录</h2><ul><li><p><a href="https://github.com/bubkoo/hexo-filter-fenced-code/issues/3">https://github.com/bubkoo/hexo-filter-fenced-code/issues/3</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rFenceCode = <span class="regexp">/(\s*)(`&#123;3,&#125;|~&#123;3,&#125;) *(.*) *\n?([\s\S]+?)\s*(\2)(\n+|$)/g</span>;</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">regex</th><th style="text-align:center">解释</th></tr></thead><tbody><tr><td style="text-align:center"><code>(\s*)(`&#123;3,&#125; | ~&#123;3,&#125;)</code></td><td style="text-align:center">``` 或者 ~~~</td></tr><tr><td style="text-align:center"><code> *(.*)</code></td><td style="text-align:center">至少 1 个空格+至少 1 个任意字符</td></tr><tr><td style="text-align:center"><code> *\n?</code></td><td style="text-align:center">至少 1 个空格+可有可无换行 <br> 错误原因就是此,我习惯 trim 行尾的空格,所以无法正常匹配</td></tr></tbody></table></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="regex-多对多替换">regex-多对多替换</h2><ul><li><p>我在切换图床时想实现如下 <code>多对多替换</code> 的需求</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>fastly.jsdelivr.net<span class="regexp">/gh/</span>Weidows<span class="regexp">/Images/</span>post/<span class="number">1</span>d9Xs6ADR3MaNCy.png</span><br><span class="line">--&gt; https:<span class="regexp">//</span>www.helloimg.com<span class="regexp">/images/</span><span class="number">2022</span><span class="regexp">/02/</span><span class="number">27</span>/GVFbWK.jpg</span><br><span class="line"></span><br><span class="line">https:<span class="regexp">//</span>fastly.jsdelivr.net<span class="regexp">/gh/</span>Weidows<span class="regexp">/Images/</span>post/<span class="number">2</span>C7cgeEIQNr3qLu.png</span><br><span class="line">--&gt; https:<span class="regexp">//</span>www.helloimg.com<span class="regexp">/images/</span><span class="number">2022</span><span class="regexp">/02/</span><span class="number">27</span>/GVFlgb.jpg</span><br><span class="line"></span><br><span class="line">https:<span class="regexp">//</span>fastly.jsdelivr.net<span class="regexp">/gh/</span>Weidows<span class="regexp">/Images/</span>post/<span class="number">2</span>GXOS5mW8EzIT7Y.png</span><br><span class="line">--&gt; https:<span class="regexp">//</span>www.helloimg.com<span class="regexp">/images/</span><span class="number">2022</span><span class="regexp">/02/</span><span class="number">27</span>/GVFWDS.jpg</span><br><span class="line"></span><br><span class="line">https:<span class="regexp">//</span>fastly.jsdelivr.net<span class="regexp">/gh/</span>Weidows<span class="regexp">/Images/</span>post/<span class="number">2</span>POdUowc3qW8DRy.png</span><br><span class="line">--&gt; https:<span class="regexp">//</span>www.helloimg.com<span class="regexp">/images/</span><span class="number">2022</span><span class="regexp">/02/</span><span class="number">27</span>/GVFTHD.jpg</span><br><span class="line"></span><br><span class="line">https:<span class="regexp">//</span>fastly.jsdelivr.net<span class="regexp">/gh/</span>Weidows<span class="regexp">/Images/</span>post/<span class="number">2</span>ThkbFZmCU3QvEN.png</span><br><span class="line">--&gt; https:<span class="regexp">//</span>www.helloimg.com<span class="regexp">/images/</span><span class="number">2022</span><span class="regexp">/02/</span><span class="number">27</span>/GVF2ao.jpg</span><br><span class="line"></span><br><span class="line">https:<span class="regexp">//</span>fastly.jsdelivr.net<span class="regexp">/gh/</span>Weidows<span class="regexp">/Images/</span>post/<span class="number">2</span>ThYuqlEtFfdJeK.png</span><br><span class="line">--&gt; https:<span class="regexp">//</span>www.helloimg.com<span class="regexp">/images/</span><span class="number">2022</span><span class="regexp">/02/</span><span class="number">27</span>/GVFOGC.jpg</span><br></pre></td></tr></table></figure></li><li><p>shell 脚本实现:</p><p>支持同一链接在多个文件/多次出现出现的情况</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">##</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@?: *********************************************************************</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@Author: Weidows</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@Date: 2022-02-27 01:34:37</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@LastEditors: Weidows</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@LastEditTime: 2022-02-27 18:29:00</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@FilePath: \Blog-private\test.sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@Description:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@!: *********************************************************************</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">##</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">fileArray=(</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  1d9Xs6ADR3MaNCy</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2C7cgeEIQNr3qLu</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2GXOS5mW8EzIT7Y</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2POdUowc3qW8DRy</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2ThkbFZmCU3QvEN</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">)</span></span><br><span class="line">fileArray=(</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">urlArray=(</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2022/02/27/GVFbWK.jpg</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2022/02/27/GVFlgb.jpg</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2022/02/27/GVFWDS.jpg</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2022/02/27/GVFTHD.jpg</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2022/02/27/GVF2ao.jpg</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">)</span></span><br><span class="line">urlArray=(</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">for i in &quot;$&#123;!fileArray[@]&#125;&quot;; do</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">查找</span></span><br><span class="line">  path=`grep -rl $&#123;fileArray[$i]&#125; ./source`</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">替换</span></span><br><span class="line">  sed -i &quot;s#cdn.jsdelivr.net/gh/Weidows/Images/post/$&#123;fileArray[$i]&#125;\.\w\w\w#www.helloimg.com/images/$&#123;urlArray[$i]&#125;#g&quot; $path</span><br><span class="line">done</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="vscode-批量替换">vscode-批量替换</h2><h3 id="一">一</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Screenshot_20210313_171408_tv.danmaku.bili</span><br><span class="line">-&gt; Screenshot20210313171408</span><br><span class="line"></span><br><span class="line">Screenshot_<span class="string">\d+_\d+_tv.danmaku.bili`</span></span><br><span class="line">-&gt; Screenshot<span class="string">\d+\d+</span></span><br></pre></td></tr></table></figure><h3 id="二">二</h3><ul><li><p>匹配下面内容</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">  - experience</span><br><span class="line">  - shell</span><br><span class="line"><span class="keyword">tags:</span></span><br><span class="line">  - experience</span><br><span class="line">  - shell</span><br></pre></td></tr></table></figure></li></ul><ol><li><p>categories:*tags:</p><p>行不通, 其中间含有 \n</p></li><li><p>categories:\n((.)±(.)+\n)+tags:\n((.)±(.)+\n)+</p></li></ol><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="sed-替换反斜杠">sed-替换反斜杠</h2><ul><li><p>数据中的斜杠是脚本天敌,需要做预处理转义<br><sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2022/02/27/GVJOM6.jpg</span><br><span class="line">-&gt; 2022\<span class="string">/02</span>\<span class="string">/27</span>\<span class="string">/GVJOM6.jpg</span></span><br></pre></td></tr></table></figure><p><code>sed -i &quot;s#/#\\/#g&quot; result.txt</code></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-7">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://blog.csdn.net/weixin_39031707/article/details/104065184">Sed 替换 内容带反斜杠（/）</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> regex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🌏媒体资源加密-and-解密获取</title>
      <link href="/post/Web/get-resources/"/>
      <url>/post/Web/get-resources/</url>
      
        <content type="html"><![CDATA[<h1>媒体资源加密-and-解密获取</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:44:47 * @FilePath: \Blog-private\source\_posts\Web\get-resources.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E5%AA%92%E4%BD%93%E8%B5%84%E6%BA%90%E5%8A%A0%E5%AF%86-and-%E8%A7%A3%E5%AF%86%E8%8E%B7%E5%8F%96">媒体资源加密-and-解密获取</a><ul><li><a href="#token-%E9%98%B2%E7%9B%97%E9%93%BE">token-防盗链</a></li><li><a href="#ffmpeg-hls-aes_128_cbc">FFmpeg-HLS-AES_128_CBC</a><ul><li><a href="#%E5%88%86%E7%89%87">分片</a></li><li><a href="#%E5%88%86%E7%89%87%E4%BD%9C%E7%94%A8-%E5%BC%95%E5%AD%90">分片作用-引子</a></li><li><a href="#%E8%8A%B1%E6%B4%BB">花活</a></li><li><a href="#%E5%8A%A0%E8%A7%A3%E5%AF%86%E6%B5%81%E7%A8%8B%E5%9B%BE">加解密流程图</a></li><li><a href="#openssl-%E6%89%8B%E5%8A%A8%E5%8A%A0%E5%AF%86">openssl-手动加密</a><ul><li><a href="#encrypt-without-iv">encrypt-without-iv</a></li><li><a href="#encrypt-with-iv">encrypt-with-iv</a></li></ul></li><li><a href="#ffmpeg-%E5%88%86%E7%89%87%E5%8A%A0%E5%AF%86%E4%B8%80%E6%9D%A1%E9%BE%99">FFmpeg-分片加密一条龙</a></li><li><a href="#%E8%A7%A3%E5%AF%86-%E5%90%88%E5%B9%B6">解密-合并</a></li></ul></li><li><a href="#%E8%8E%B7%E5%8F%96">获取</a><ul><li><a href="#%E8%A7%86%E9%A2%91">视频</a></li><li><a href="#%E7%BD%91%E9%A1%B5%E5%9B%BE%E7%89%87">网页图片</a></li><li><a href="#qq-%E7%BE%A4%E5%9B%BE%E7%89%87">QQ-群图片</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><ul><li><p>各类平台网页中的视频通常会被 <code>加密处理</code> 以防止别人拿走; 防盗技术还是有很多种的:<sup id='cite_ref-3'><a href="#cite_note-3">[3]</a></sup></p><ol><li>FFmpeg-HLS-AES_128_CBC 加密</li><li>url 中加入 token 验证</li><li>验证用户身份再给链接(session,cookie)</li><li>视频加水印</li><li>限制跨域访问</li><li>…etc</li></ol></li></ul><p>下面只摸一下技术层面的 <code>1.和2.</code></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="token-防盗链">token-防盗链</h2><p>如 <code>http://xxxxxx.com/m3u8/hunan/desc.m3u8?stream_id=hunan&lt;m=1410595018&amp;lkey=8bc1e0fe35f6321ef560f8ccffb70e5d&amp;path=59.49.42.14,58.59.3.9,58.59.3.51&amp;platid=10&amp;splatid=1015&amp;tag=live&amp;cips=127.0.0.1&amp;ext=m3u8&amp;sign=live_tv</code> <sup id='cite_ref-8'><a href="#cite_note-8">[8]</a></sup></p><p>在 url 加上 时间戳,ip 地址,平台 id,splatid,tag,cips,ext,sign 等参数, 可以让服务器鉴别是否被其他网站/客户端请求, 并作出 403 响应</p><p>同一参数的 url 无法被复用, 但是仍可以通过动态调整参数来绕过服务器的检测</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="FFmpeg-HLS-AES-128-CBC">FFmpeg-HLS-AES_128_CBC</h2><ul><li><p>这么一坨 💩,什么意思嘛?</p><p>FFmpeg 是最强大的视频编解码器, 可以把输入的视频处理成符合 HLS 规范的流媒体, 同时通过 AES-128-CBC 格式的秘钥加密视频</p><p>浅入深出,别急慢慢吃… 下面结合这个库动动手就明白了:<sup id='cite_ref-4'><a href="#cite_note-4">[4]</a></sup></p><hr></li></ul><h3 id="分片">分片</h3><ul><li><p>分片的方式比较简单,这里我们准备好一个 <code>demo.mp4</code>, 丢给 FFmpeg 下面的命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i demo.mp4 -codec copy -f segment -segment_list index.m3u8 -segment_time 30 %d.ts</span><br></pre></td></tr></table></figure><p>执行完会出来下面这些东西,这些 ts 文件就是分成片的小段视频,此处没加密可以直接播放</p><p><img src="https://www.helloimg.com/images/2022/02/26/GVRd0R.png" alt=""></p><p>有些播放器支持的话 index.m3u8 也是可以播放的, 其实就是引用的这些 ts</p><hr></li><li><p>上面命令中 <code>index.m3u8</code> 这个文件是分片的索引文件, 指明了 ts 文件的先后顺序,时长,版本和加密等信息</p><blockquote><ul><li>TS: MPEG2-Transport Stream,高清相机拍摄视频的封装格式;特点就是要求从视频流的任一片段开始都是可以独立解码的</li><li>m3u8: HTTP Live Streaming（HLS） 协议格式的基础,Unicode 版本的 M3U，此文件用 UTF-8 编码<sup id='cite_ref-01'><a href="#cite_note-01">[1]</a></sup> <br>下图 index 就是 m3u8,作用就是索引 ts<br><img src="https://www.helloimg.com/images/2022/02/26/GVRc4n.png" alt=""></li></ul></blockquote><hr></li><li><p>喏,index.m3u8 文件内容应该能看懂</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#EXTM3U</span><br><span class="line">#EXT-X-VERSION:3</span><br><span class="line">#EXT-X-MEDIA-SEQUENCE:0</span><br><span class="line">#EXT-X-ALLOW-CACHE:YES</span><br><span class="line">#EXT-X-TARGETDURATION:32</span><br><span class="line">#EXTINF:30.720000,</span><br><span class="line">0.ts</span><br><span class="line">#EXTINF:29.280000,</span><br><span class="line">1.ts</span><br><span class="line">#EXTINF:31.880000,</span><br><span class="line">2.ts</span><br><span class="line">#EXTINF:29.040000,</span><br><span class="line">3.ts</span><br><span class="line">#EXTINF:29.320000,</span><br><span class="line">4.ts</span><br><span class="line">#EXTINF:6.280000,</span><br><span class="line">5.ts</span><br><span class="line">#EXT-X-ENDLIST</span><br></pre></td></tr></table></figure><hr></li></ul><h3 id="分片作用-引子">分片作用-引子</h3><ol><li><p>分段加载视频而不是一口气加载到底</p><p>大部分视频用户不会完完整整的看,分段加载减轻服务器压力,也使用户体验好</p><p>(好几 G 的电影,一口气加载到底, 内存/缓存遭不住…)</p></li><li><p>分片可以让用户无法<code>直接通过链接</code>在浏览器获取<code>完整的 mp4 视频</code></p><p>但,可以通过获取所有 ts 文件合并为 mp4</p><p>插件市场的一些插件可以通过 .m3u8 获取并合并.ts 间接获取完整的 .MP4</p></li></ol><p>于是为了反破解出现了 <code>某些花活</code> 和 <code>视频加密</code></p><hr><h3 id="花活">花活</h3><ol><li><p>把 .m3u8 文件伪装成 .mp4, 可以让大部分没有伪装识别能力的爬虫找不着北 (比如 CoCocut)</p><p><img src="https://www.helloimg.com/images/2022/02/26/GVRSwv.png" alt=""><br><img src="https://www.helloimg.com/images/2022/02/26/GVRTHM.png" alt=""></p></li><li><p>m3u8 中多层嵌套 m3u8 (套娃), 有些爬虫是支持的, 有的 G 了</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#EXTM3U</span><br><span class="line">#EXT-X-STREAM-<span class="keyword">INF</span>:<span class="keyword">PROGRAM</span>-ID=1,BANDWIDTH=1064000</span><br><span class="line">1000kbps.m3u8</span><br><span class="line">#EXT-X-STREAM-<span class="keyword">INF</span>:<span class="keyword">PROGRAM</span>-ID=1,BANDWIDTH=564000</span><br><span class="line">500kbps.m3u8</span><br><span class="line">#EXT-X-STREAM-<span class="keyword">INF</span>:<span class="keyword">PROGRAM</span>-ID=1,BANDWIDTH=282000</span><br><span class="line">250kbps.m3u8</span><br><span class="line">#EXT-X-STREAM-<span class="keyword">INF</span>:<span class="keyword">PROGRAM</span>-ID=1,BANDWIDTH=2128000</span><br><span class="line">2000kbps.m3u8</span><br></pre></td></tr></table></figure></li><li><p>…etc</p></li></ol><hr><h3 id="加解密流程图">加解密流程图</h3><p>原创哦,转载请标记</p><p><img src="https://www.helloimg.com/images/2022/02/26/GVRvhz.png" alt=""></p><hr><h3 id="openssl-手动加密">openssl-手动加密</h3><h4 id="encrypt-without-iv">encrypt-without-iv</h4><p>此处通过 shell 脚本分析,墙裂建议结合仓库学习:<sup id='cite_ref-4'><a href="#cite_note-4">[4]</a></sup></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">workPath=&quot;2.encrypted-without-iv&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">清除原先的</span></span><br><span class="line">rm -rf $workPath/*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">分片</span></span><br><span class="line">ffmpeg -i demo.mp4 -codec copy -f segment -segment_list $workPath/index.m3u8 -segment_time 30 $workPath/%d.ts</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取加密秘钥</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">openssl rand 16</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  随机生成 16B 二进制数据 (16*8=128 位, 对应AES-128-CBC名称)</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># tee -a $workPath/enc.key</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  将生成的数据输出到秘钥文件 enc.key, 同时把数据交给 hexdump 处理</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># hexdump -e &#x27;16/1 &quot;%02x&quot;&#x27;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  hexdump -e <span class="string">&#x27;a/b format1 format2&#x27;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    a个字节/8位 -&gt; format2 (a可省,默认为1)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    b个字节/8位 -&gt; format1</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    详见: https://blog.csdn.net/bytxl/article/details/43738103</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   每1字节/8位 -&gt; %02x -&gt; 2位16进制</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    也就是二进制转16进制,每4位合1位, 128/4=32位16进制</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  每16字节的结果为1行, 那去掉这个16可以吗?</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    应该是不行的,结果会出错,例如:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    4a6afd460c84c498b8a817ad66392ef2 √</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    46fd6a4a98c4840cad17a8b8f22e3966 ×</span></span><br><span class="line">encryptionKey=`openssl rand 16 | tee -a $workPath/enc.key | hexdump -e &#x27;16/1 &quot;%02x&quot;&#x27;`</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ts 文件数</span></span><br><span class="line">numberOfTsFiles=`ls $workPath/*.ts | wc -l`</span><br><span class="line"></span><br><span class="line">for ((i=0; i&lt;$numberOfTsFiles; i ++)) do</span><br><span class="line">    # without-iv也就是默认iv为32位文件序列号</span><br><span class="line">    #   如 5.ts -&gt; 00000000000000000000000000000005</span><br><span class="line">    initializationVector=`printf &#x27;%032x&#x27; $i`</span><br><span class="line"></span><br><span class="line">    # 对每个分片加密</span><br><span class="line">    openssl aes-128-cbc -e -in $workPath/$i.ts -out $workPath/enc_$i.ts -nosalt -iv $initializationVector -K $encryptionKey</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">寻找并添加加密方法和秘钥URL</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  找 <span class="string">&quot;#EXT-X-TARGETDURATION:&quot;</span> 这一段,并在下一行添加</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  <span class="comment">#EXT-X-KEY:METHOD=AES-128,URI=&quot;enc.key&quot;</span></span></span><br><span class="line">sed &#x27;/#EXT-X-TARGETDURATION:/a #EXT-X-KEY:METHOD=AES-128,URI=&quot;enc.key&quot;&#x27; $workPath/index.m3u8 &gt; $workPath/index_new.m3u8</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">覆盖</span></span><br><span class="line">mv $workPath/index_new.m3u8 $workPath/index.m3u8</span><br></pre></td></tr></table></figure><ul><li><p>如图,加密后的 ts 就不能直接播放了</p><p><img src="https://www.helloimg.com/images/2022/02/26/GVRzam.png" alt=""></p></li></ul><hr><h4 id="encrypt-with-iv">encrypt-with-iv</h4><p>这个 iv (initialisation vector,初始化向量) 有点迷, 作用是增强随机性</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">workPath=&quot;3.encrypted-with-iv&quot;</span><br><span class="line"></span><br><span class="line">rm -rf $workPath/*</span><br><span class="line"></span><br><span class="line">ffmpeg -i demo.mp4 -codec copy -f segment -segment_list $workPath/index.m3u8 -segment_time 30 $workPath/%d.ts</span><br><span class="line"></span><br><span class="line">encryptionKey=`openssl rand 16 | tee -a $workPath/enc.key | hexdump -e &#x27;16/1 &quot;%02x&quot;&#x27;`</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ivKey 偏移量,32位16进制数据,如: f86b5decdb6359cb1023e308651dccfb</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">不需要另存文件, 只需要写在 m3u8 文件里</span></span><br><span class="line">ivKey=`openssl rand -hex 16`</span><br><span class="line"></span><br><span class="line">numberOfTsFiles=`ls $workPath/*.ts | wc -l`</span><br><span class="line"></span><br><span class="line">for ((i=0; i&lt;$numberOfTsFiles; i ++)) do</span><br><span class="line">    openssl aes-128-cbc -e -in $workPath/$i.ts -out $workPath/enc_$i.ts -nosalt -iv $ivKey -K $encryptionKey</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下面 <span class="variable">$&#123;ivKey&#125;</span> 需要获取变量,所以字符串要用<span class="string">&quot;&quot;</span>而不能是<span class="string">&#x27;&#x27;</span></span></span><br><span class="line">sed &quot;/#EXT-X-TARGETDURATION:/a #EXT-X-KEY:METHOD=AES-128,URI=\&quot;enc.key\&quot;,IV=0x$&#123;ivKey&#125;&quot; $workPath/index.m3u8 &gt; $workPath/index_new.m3u8</span><br><span class="line"></span><br><span class="line">mv $workPath/index_new.m3u8 $workPath/index.m3u8</span><br></pre></td></tr></table></figure><hr><h3 id="FFmpeg-分片加密一条龙">FFmpeg-分片加密一条龙</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">workPath=&quot;4.encrypt-with-FFmpeg&quot;</span><br><span class="line">urlPrefix=&quot;weidows.com&quot;</span><br><span class="line"></span><br><span class="line">rm -rf $workPath/*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">enc.keyinfo</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  写到 m3u8 里的 keyURL | https://hlsbook.net/enc.key</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  加密用的 key 文件地址  | enc.key</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  IV值 (可选)          | ecd0d06eaf884d8226c33928e87efa33</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  详见: https://hlsbook.net/how-to-encrypt-hls-video-with-ffmpeg/</span></span><br><span class="line"></span><br><span class="line">openssl rand 16 &gt; $workPath/enc.key</span><br><span class="line"></span><br><span class="line">tmpfile=`mktemp`</span><br><span class="line">echo $urlPrefix/enc.key &gt; $tmpfile</span><br><span class="line">echo $workPath/enc.key &gt;&gt; $tmpfile</span><br><span class="line">echo `openssl rand -hex 16` &gt;&gt; $tmpfile</span><br><span class="line">mv $tmpfile $workPath/enc.keyinfo</span><br><span class="line"></span><br><span class="line">ffmpeg -y -i demo.mp4 -c copy -hls_time 30 -hls_key_info_file $workPath/enc.keyinfo -hls_playlist_type vod -hls_segment_filename $workPath/enc_%d.ts $workPath/index.m3u8</span><br></pre></td></tr></table></figure><ul><li><p>index.m3u8</p><p>可见生成的没什么问题,而且可以通过下面的方法正常解密</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#EXTM3U</span></span><br><span class="line"><span class="selector-id">#EXT-X-VERSION</span>:<span class="number">3</span></span><br><span class="line"><span class="selector-id">#EXT-X-TARGETDURATION</span>:<span class="number">32</span></span><br><span class="line"><span class="selector-id">#EXT-X-MEDIA-SEQUENCE</span>:<span class="number">0</span></span><br><span class="line"><span class="selector-id">#EXT-X-PLAYLIST-TYPE</span>:VOD</span><br><span class="line"><span class="selector-id">#EXT-X-KEY</span>:METHOD=AES-<span class="number">128</span>,URI=<span class="string">&quot;./enc.key&quot;</span>,IV=<span class="number">0</span>x2b5cc8a84648ed8ce5f64e5845d3cb7c</span><br><span class="line"><span class="selector-id">#EXTINF</span>:<span class="number">30.720000</span>,</span><br><span class="line">enc_0<span class="selector-class">.ts</span></span><br><span class="line"><span class="selector-id">#EXTINF</span>:<span class="number">29.280000</span>,</span><br><span class="line">enc_1<span class="selector-class">.ts</span></span><br><span class="line"><span class="selector-id">#EXTINF</span>:<span class="number">31.880000</span>,</span><br><span class="line">enc_2<span class="selector-class">.ts</span></span><br><span class="line"><span class="selector-id">#EXTINF</span>:<span class="number">29.040000</span>,</span><br><span class="line">enc_3<span class="selector-class">.ts</span></span><br><span class="line"><span class="selector-id">#EXTINF</span>:<span class="number">29.320000</span>,</span><br><span class="line">enc_4<span class="selector-class">.ts</span></span><br><span class="line"><span class="selector-id">#EXTINF</span>:<span class="number">6.280000</span>,</span><br><span class="line">enc_5<span class="selector-class">.ts</span></span><br><span class="line">#EXT-X-ENDLIST</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="解密-合并">解密-合并</h3><p>上面加密会了的话,解密就简单了,完全就是反过来</p><p>合并方法取自: <sup id='cite_ref-6'><a href="#cite_note-6">[6]</a></sup></p><p>这篇文章<sup id='cite_ref-5'><a href="#cite_note-5">[5]</a></sup>简单介绍了下如何手动解密,其文中把 key 和 iv 位数标错为 16 了,别误解</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">inputPath=<span class="string">&quot;2.encrypted-without-iv&quot;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ivKey=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">inputPath=<span class="string">&quot;3.encrypted-with-iv&quot;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ivKey=<span class="string">&quot;0d5cce6d9fbfae9dcc86cb3f12d4eb4b&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加密 enc_*.ts 输入路径</span></span><br><span class="line">inputPath=&quot;4.encrypt-with-FFmpeg&quot;</span><br><span class="line">ivKey=&quot;36bb7a1e43e1d3d88b779243817a67bc&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解密 dec_*.ts 和合并后 mp4 输出路径</span></span><br><span class="line">outputPath=&quot;5.decrypt&quot;</span><br><span class="line"></span><br><span class="line">rm -rf $outputPath/*</span><br><span class="line"></span><br><span class="line">encryptionKey=$(hexdump -e &#x27;16/1 &quot;%02x&quot;&#x27; $inputPath/enc.key)</span><br><span class="line"></span><br><span class="line">numberOfTsFiles=`ls $inputPath/enc_*.ts | wc -l`</span><br><span class="line"></span><br><span class="line">for ((i=0; i&lt;$numberOfTsFiles; i ++)) do</span><br><span class="line">    if [[ $ivKey == &quot;&quot; ]]; then</span><br><span class="line">        ivKey=$(printf &#x27;%032x&#x27; $i)</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    openssl aes-128-cbc -d -in $inputPath/enc_$i.ts -out $outputPath/dec_$i.ts -nosalt -iv $ivKey -K $encryptionKey</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">合并</span></span><br><span class="line">ffmpeg -allowed_extensions ALL -i $inputPath/index.m3u8 -acodec copy -vcodec copy -f mp4 $outputPath/combine.mp4</span><br></pre></td></tr></table></figure><ul><li><p>如图 <code>dec_*.ts</code> 为解密后的文件,可以直接播放了</p><p><img src="https://www.helloimg.com/images/2022/02/26/GVR0xA.png" alt=""></p><p>可以看项目中的 <code>5.</code>, 合并后的 mp4 也没有问题</p><p>但 原视频 != 分片加解密合并后的视频, 大小差不多但是会有差异 (9.87MB vs 9.95MB)</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="获取">获取</h2><p>下面就是对资源获取方式的 <code>推荐</code> 了</p><h3 id="视频">视频</h3><blockquote><p>CoCocut: 这个插件官方直接说了不支持爬加密视频,但是大部分平台用起来<s>还是很棒的</s>,插件中最棒的<br>有个小弊病, 它不开会员的话是超慢的单线程下载… 我常用它获取 m3u8 地址让下面这伙计下载</p></blockquote><blockquote><p><a href="https://github.com/nilaoda/N_m3u8DL-CLI">N_m3u8DL-CLI</a>: 这家伙可以通过 m3u8 下载加密视频; 支持多线程,很快 <img src="https://www.helloimg.com/images/2022/02/27/GVct49.png" alt=""><br>可以手动破解加密视频 <sup id='cite_ref-7'><a href="#cite_note-7">[7]</a></sup></p></blockquote><blockquote><p>QQ 浏览器手机 app, 直接进对应网页就可以爬下来视频,加密的也可以,速度拉满 (小母牛倒立 🐄🍺</p></blockquote><hr><h3 id="网页图片">网页图片</h3><ul><li><p>下面两个差不多,都是把页面现有的图片都扒下来, <code>按域名分类</code>,很容易筛选出来</p><p>这方法并不适用于获取视频.</p><blockquote><p>梦想资源下载器</p></blockquote><blockquote><p>网页右键另存为<br><img src="https://www.helloimg.com/images/2022/02/26/GVRbW9.png" alt=""></p></blockquote></li></ul><blockquote><p>Picviewer CE+</p></blockquote><hr><h3 id="QQ-群图片">QQ-群图片</h3><p>经常有老哥在群里发图,苦于一张张保存手抽筋,发现了此方法:</p><ol><li><p>打开电脑版消息管理器,找到那些聊天记录</p><p><img src="https://www.helloimg.com/images/2022/02/26/GVRQg0.png" alt=""></p></li><li><p>选择,复制</p><p><img src="https://www.helloimg.com/images/2022/02/26/GVRN95.png" alt=""></p></li><li><p>发送给 <code>我的手机</code></p><p><img src="https://www.helloimg.com/images/2022/02/26/GVR7Hh.png" alt=""></p></li><li><p>然后就无了, 这手段对于保存好几十/上百张图十分便利</p></li></ol><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-4">借物表</h2><p><a name='cite_note-01' href='#cite_ref-01'>[1]</a>: <a href="https://www.jianshu.com/p/426425cad08a">HLS 协议介绍</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://github.com/fftt2017/hls-m3u8-sample">https://github.com/fftt2017/hls-m3u8-sample</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://zhuanlan.zhihu.com/p/32014463">在线教育类网站视频加密视频安全的一些方法</a></p><p><a name='cite_note-4' href='#cite_ref-4'>[4]</a>: <a href="https://github.com/Weidows-projects/hls-m3u8-sample">https://github.com/Weidows-projects/hls-m3u8-sample</a>, 此库是在<sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup>的基础上改进的</p><p><a name='cite_note-5' href='#cite_ref-5'>[5]</a>: <a href="https://www.52pojie.cn/thread-971265-1-1.html">解密 m3u8 文件, ts 文件解密, hls 解密.</a></p><p><a name='cite_note-6' href='#cite_ref-6'>[6]</a>: <a href="https://blog.csdn.net/Yao_2333/article/details/82910560">ffmpeg-简单 AES 加解密记录</a></p><p><a name='cite_note-7' href='#cite_ref-7'>[7]</a>: <a href="https://www.appinn.com/download-video-30482/">恕我直言，再难下载的视频，手搓大佬终究还是有办法</a></p><p><a name='cite_note-8' href='#cite_ref-8'>[8]</a>: <a href="https://www.zhihu.com/question/20697986/answer/128433075">HLS 如何实现加密 ？</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> 浏览器 </tag>
            
            <tag> 扩展 </tag>
            
            <tag> ffmpeg </tag>
            
            <tag> 算法 </tag>
            
            <tag> hexdump </tag>
            
            <tag> hls </tag>
            
            <tag> openssl </tag>
            
            <tag> shell </tag>
            
            <tag> 密码学 </tag>
            
            <tag> qq </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🐭从零开始-Golang-blockchain</title>
      <link href="/post/others/golang/blockchain/"/>
      <url>/post/others/golang/blockchain/</url>
      
        <content type="html"><![CDATA[<h1>从零开始-Golang-blockchain</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:48:24 * @FilePath: \Blog-private\source\_posts\others\golang\blockchain.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B-golang-blockchain">从零开始-Golang-blockchain</a><ul><li><a href="#%E9%85%8D%E7%BD%AE">配置</a><ul><li><a href="#%E6%A8%A1%E5%9D%97%E4%BB%A3%E7%90%86">模块代理</a></li><li><a href="#%E6%A8%A1%E5%9D%97%E5%88%9D%E5%A7%8B%E5%8C%96">模块初始化</a></li><li><a href="#goland-%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%AF%BC%E5%85%A5">Goland-快捷键导入</a></li></ul></li><li><a href="#golang-learning">Golang-learning</a><ul><li><a href="#package">package</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><p>开辟于此课程以及《Golang 区块链入门到实战_以太坊/fabric》<sup id='cite_ref-01'><a href="#cite_note-01">[1]</a></sup></p><style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style><div class="bbplayer"><iframe class="bbplayer" id="mmedia-udBpLGLKktNrgQiw" src="https://player.bilibili.com/player.html?bvid=1jf4y1s7sZ&page=1&high_quality=1&danmaku=true" allowfullscreen="allowfullscreen" scrolling="no" border="0" frameborder="0" framespacing="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe></div><script> document.getElementById("mmedia-udBpLGLKktNrgQiw").style.height=document.getElementById("mmedia-udBpLGLKktNrgQiw").scrollWidth*0.76+"px";    window.onresize = function(){      document.getElementById("mmedia-udBpLGLKktNrgQiw").style.height=document.getElementById("mmedia-udBpLGLKktNrgQiw").scrollWidth*0.76+"px";    }; </script><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="配置-5">配置</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">scoop </span><span class="keyword">install </span>go-cn</span><br></pre></td></tr></table></figure><h3 id="模块代理">模块代理</h3><ul><li><p>运行<sup id='cite_ref-02'><a href="#cite_note-02">[2]</a></sup></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go env -w GO111MODULE=on</span><br><span class="line">go env -w GOPROXY=https://goproxy.cn</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="模块初始化">模块初始化</h3><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">go</span> <span class="built_in">mod</span> init ProjectName</span><br></pre></td></tr></table></figure><blockquote><p>cannot determine module path for source directory (outside GOPATH<sup id='cite_ref-03'><a href="#cite_note-03">[3]</a></sup></p></blockquote><hr><h3 id="Goland-快捷键导入">Goland-快捷键导入</h3><p>在此提一嘴想用 vscode 写 go 的话,目前还是不太友好… (2022.2); <code>首选 Goland</code></p><ul><li><p>Jetbrains 不同 IDE 之间的快捷键是没法直接导入,一个个地改又非常费劲</p><p>找到了一个通过修改文件来导入的方式<sup id='cite_ref-04'><a href="#cite_note-04">[4]</a></sup>,比如我们想把快捷键 IDEA -&gt; Goland</p><ol><li>打开 idea 并导出配置到压缩包,快捷键在 <code>settings.zip\keymaps\</code></li><li>先打开 Goland 随便改一个快捷键,不然下一步可能找不到; 然后关掉 Goland</li><li>找到 <code>Goland\profile\config\jba_config\win.keymaps\</code>,复制粘贴</li></ol></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Golang-learning">Golang-learning</h2><p>基础语法可以跟着菜鸟教程学习 <sup id='cite_ref-05'><a href="#cite_note-05">[5]</a></sup></p><h3 id="package">package</h3><ul><li><p><code>package main</code>被误改会报错<sup id='cite_ref-06'><a href="#cite_note-06">[6]</a></sup></p><blockquote><p>package command-line-arguments is not a main package</p></blockquote><p>正确 import 法:<sup id='cite_ref-07'><a href="#cite_note-07">[7]</a></sup></p><hr></li><li><p>简易例子:</p><ul><li><p>test.go</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">( a, b <span class="type">int</span> )</span></span> <span class="type">int</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>main.go</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> mian</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(sum(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-30">借物表</h2><p><a name='cite_note-01' href='#cite_ref-01'>[1]</a>: <a href="https://www.zlkt.net/book/detail/9/257">《Golang 区块链入门到实战_以太坊/fabric》</a></p><p><a name='cite_note-02' href='#cite_ref-02'>[2]</a>: <a href="https://goproxy.cn/">https://goproxy.cn/</a></p><p><a name='cite_note-03' href='#cite_ref-03'>[3]</a>: <a href="https://blog.csdn.net/ciel_yu/article/details/107847578">go mod init 在初始化时出现 cannot determine module path for source directory (outside GOPATH</a></p><p><a name='cite_note-04' href='#cite_ref-04'>[4]</a>: <a href="https://www.cnblogs.com/devzyc/p/14084488.html">JetBrains 系列 IDE 之间的快捷键相互导入</a></p><p><a name='cite_note-05' href='#cite_ref-05'>[5]</a>: <a href="https://www.runoob.com/go/go-tutorial.html">https://www.runoob.com/go/go-tutorial.html</a></p><p><a name='cite_note-06' href='#cite_ref-06'>[6]</a>: <a href="https://blog.csdn.net/A_java_c/article/details/120006213">go 语言入门：package command-line-arguments is not a main package</a></p><p><a name='cite_note-07' href='#cite_ref-07'>[7]</a>: <a href="https://segmentfault.com/a/1190000018235929">golang 之 import 和 package 的使用</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
          <category> golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 区块链 </tag>
            
            <tag> golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>👽通信-信息论-开坑自埋</title>
      <link href="/post/experience/basic/%E9%80%9A%E4%BF%A1%E6%8A%80%E6%9C%AF/"/>
      <url>/post/experience/basic/%E9%80%9A%E4%BF%A1%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<h1>通信-信息论-开坑自埋</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:15:55 * @FilePath: \Blog-private\source\_posts\experience\basic\通信技术.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E9%80%9A%E4%BF%A1-%E4%BF%A1%E6%81%AF%E8%AE%BA-%E5%BC%80%E5%9D%91%E8%87%AA%E5%9F%8B">通信-信息论-开坑自埋</a><ul><li><a href="#wifi">WIFI</a><ul><li><a href="#%E5%90%8D%E5%AD%97">名字</a></li><li><a href="#%E9%A2%91%E6%AE%B5">频段</a></li><li><a href="#%E8%B0%83%E5%88%B6%E6%89%8B%E6%AE%B5">调制手段</a></li><li><a href="#%E6%A0%87%E5%87%86%E5%88%B6%E5%AE%9A">标准制定</a></li><li><a href="#%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E9%99%85">理论与实际</a></li></ul></li><li><a href="#%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2">傅里叶变换</a><ul><li><a href="#%E5%BC%95%E8%A8%80">引言</a></li><li><a href="#fourier-transform">fourier-transform</a></li><li><a href="#%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8-%E9%99%A4%E5%99%AA">实际应用-除噪</a></li><li><a href="#inverse-fourier">inverse-fourier</a></li><li><a href="#%E8%B4%A8%E5%BF%83%E4%B8%8E%E5%82%85%E9%87%8C%E5%8F%B6%E5%85%AC%E5%BC%8F%E7%9A%84%E5%85%B3%E7%B3%BB">质心与傅里叶公式的关系</a></li><li><a href="#%E7%BC%BA%E7%82%B9">缺点</a></li><li><a href="#%E7%9F%AD%E6%97%B6%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2">短时傅里叶变换</a></li></ul></li><li><a href="#%E6%9E%81%E5%8C%96%E7%A0%81">极化码</a><ul><li><a href="#%E4%BF%A1%E6%81%AF%E7%86%B5-%E5%A6%82%E4%BD%95%E5%BA%A6%E9%87%8F%E4%BF%A1%E6%81%AF">信息熵-如何度量信息</a><ul><li><a href="#%E5%93%88%E7%89%B9%E8%8E%B1">哈特莱</a></li><li><a href="#%E9%A6%99%E5%86%9C">香农</a></li><li><a href="#%E5%9F%BA%E5%B0%BC%E7%B3%BB%E6%95%B0">基尼系数</a></li><li><a href="#%E6%AC%A7%E6%8B%89%E5%BC%8F-%E4%B8%A4%E7%82%B9%E5%88%86%E5%B8%83">欧拉式-两点分布</a></li><li><a href="#%E7%9B%B8%E5%AF%B9%E7%86%B5">相对熵</a></li><li><a href="#%E5%8D%95%E4%BD%8D">单位</a></li></ul></li><li><a href="#%E4%BF%A1%E9%81%93%E5%AE%B9%E9%87%8F-%E6%9C%80%E5%A4%A7%E4%BA%92%E4%BF%A1%E6%81%AF">信道容量-最大互信息</a></li><li><a href="#%E9%A6%99%E5%86%9C%E6%9E%81%E9%99%90">香农极限</a></li><li><a href="#%E6%9E%81%E5%8C%96%E7%A0%81-polarcodes">极化码-PolarCodes</a></li></ul></li><li><a href="#%E9%9F%B3%E9%A2%91">音频</a><ul><li><a href="#%E6%9C%89-%E6%97%A0%E6%8D%9F%E5%8E%8B%E7%BC%A9">有-无损压缩</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><blockquote><p>draft 此文章点子来自: <a href="https://www.youtube.com/watch?v=4w6_zWSrZw4">你不了解的「WiFi」从技术原理 应用 讲到行业的未来 一个视频彻底讲清楚 「硬核无线技术」系列视频 WiFi 篇</a><br>一串听下来发现对于通信这方面的知识还是很欠缺, 甚至有些家常知识点都没太了解.</p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="WIFI">WIFI</h2><div class="video-container"><iframe src="https://www.youtube.com/embed/4w6_zWSrZw4" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h3 id="名字">名字</h3><p>音响领域有高保真 HIFI (High Fidelity), 之后出现的无线起名 WIFI (Wireless Fidelity),</p><p>Science Fiction -&gt; SciFi (发音与上面类似,一方面考虑好记)</p><hr><h3 id="频段">频段</h3><p>2.4G 频段: 2.4~2.4835 GHz</p><p>5G 频段: 5.15~5.85 GHz</p><p>每个频段可分为若干信道(频宽从 1~160MHz 不等), 满足多连接/多设备<code>尽可能</code>不互相干扰下使用.</p><ul><li><p>在小区/宿舍里经常发现信号范围内有一排别人的 WIFI/热点</p><p>甭管有没有密码, 必然会对我们当前设备使用 WIFI 无线电信号<code>产生干扰</code></p><p>2.4G 频段窄而且电磁波穿透力比 5G 频段强,另外默认用 2.4G 频段的设备多</p><p>所以, 把自己的设备切换使用为 5G 频段可以<code>一定程度上抗干扰</code></p></li><li><p>其实也不止 WIFI 影响 WIFI,还要好多设备也是用 2.4G 频段通信会有干扰:</p><p>蓝牙,无线鼠标,无线录音麦…etc</p></li></ul><hr><h3 id="调制手段">调制手段</h3><p>何为调制?</p><blockquote><p>把数字信号转为电磁波通过天线发送, 接收端再把电磁波解为数字信号的过程,如下图<br><img src="https://www.helloimg.com/images/2022/02/27/GVPAl9.png" alt="20220107015502" /> <br><a href="https://www.txrjy.com/thread-1080059-1-1.html">https://www.txrjy.com/thread-1080059-1-1.html</a></p></blockquote><p>编/解码过程用到<a href="#%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2">傅里叶变换和逆变</a></p><ul><li><p>从 802.11b 到 802.11ax 应用的三种调制方式:</p><p>802.11 (eight O two eleven, 0 读 O, dot 不用读)</p><p>DSSS (D triple S, 直接序列扩频)</p><p>FHSS (调频)</p><p>OFDM (Orthogonal Frequency-Division Multiplexing. <code>正交频分复用</code>/同频分解多调制)</p></li><li><p>由于民用频宽范围比较有限,DSSS 这种依靠大频宽保证可靠性的技术不适用,逐渐过渡到了 OFDM:</p><p>这种调制方式大幅降低所需频宽, 图中上面为 OFDM</p><img src="https://www.helloimg.com/images/2022/02/27/GVAkJA.png" alt="20220107020556" /></li></ul><hr><h3 id="标准制定">标准制定</h3><p>上面所提到的 802.11 xxx 就是无线电协会所制定的 WIFI 标准, 其每次更新是为了规划未来一段时间的 WIFI 走向, 避免各做各的无法正常通信.</p><img src="https://www.helloimg.com/images/2022/02/27/GVPvZm.png" alt="20220107023524" /><p>802.11ac 引入波束赋形 Beam Forming, 追踪设备并把信号尽可能聚束到此方向</p><p>2019 年协会才把标准整体命名为 WIFI1-WIFI6, 调制方式 OFDM -&gt; OFDMA(4GLTE 蜂窝网络的调制方式)</p><p>WIFI 发展越加偏向/近似蜂窝网络</p><hr><h3 id="理论与实际">理论与实际</h3><ul><li><p>无线通信理论速率与实际速率差距蛮大的:</p><img src="https://www.helloimg.com/images/2022/02/27/GV47CT.png" alt="20220107030252" /><p>生活中都有经验,离路由器越近越好</p></li><li><p>用不用追新设备?</p><p>先上结论: <code>不用</code></p><p>我们大多数人不咋组内网,组内网的话也是插线而不是走 WIFI,路由器唯一线路就是走公网</p><p>路由器跑的快不快在于宽带套餐,100-300M 宽带还是绝大部分家庭/学校的选择,而出于 2013 年的 WIFI5 标准完完全全够跑满</p><p>WIFI6 标准的路由器可以认为, 杀鸡用牛刀</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="傅里叶变换">傅里叶变换</h2><h3 id="引言">引言</h3><blockquote><p><a href="https://mp.weixin.qq.com/s/iD4aLGwQuYVzXfFkfMfVxg">傅里叶变换的精彩讲解</a> <br>简单来说傅里叶变换的作用: <code>从混合的波(声波/电磁波)中分离出某个频率的波</code></p><p>高数确实是一门神秘且棘手的学科,所以听到这个傅里叶变换心理也是略有抵触的. <br>后话: 不做应用的单纯的数学雀食烦…但是结合应用的话就有趣起来了 <code>\(^o^)/</code></p></blockquote><ul><li><p>多个不同频率的波叠加</p><p>傅里叶变换就是在研究如何从混合波中分析出其组成波 (类似从混合色中分析原色)</p><img src="https://www.helloimg.com/images/2022/02/27/GV4UWD.png" alt="20220113234230" /></li></ul><hr><h3 id="fourier-transform">fourier-transform</h3><ul><li><p>对于某个混合波,我们想知道它是<code>哪几种波</code>混合的结果,如何得知?</p><img src="https://www.helloimg.com/images/2022/02/27/GVL9X0.png" alt="20220114170236" /><ol><li><p>我们把波形绕成环,并且可以调整 <code>cycles/second -&gt; Frequency</code> 的比例</p></li><li><p>视圆环图像质量均匀,取<code>&quot;质心 center of mass&quot;</code> 的坐标 (x,y)</p></li><li><p>取 x 坐标为 Y 轴, Frequency 为 X 轴作图</p></li><li><p>可见 2Hz+3Hz 的波,Frequency 在 2 和 3 出出现明显波峰</p></li></ol><hr></li><li><p>分别叠加也符合:</p><img src="https://www.helloimg.com/images/2022/02/27/GVLaMS.png" alt="20220114172006" /></li></ul><hr><h3 id="实际应用-除噪">实际应用-除噪</h3><ul><li><p>比如现有声波里有一个已知高频噪音 (蚊子),但我们无法从声波中直接过滤掉,如何去掉它?</p><img src="https://www.helloimg.com/images/2022/02/27/GV4Kxo.png" alt="20220114174154" /><ol><li><p>做傅里叶变换</p></li><li><p>找到那个频率的波峰并通过某种方法干掉它</p></li><li><p>傅里叶反变换得到没有蚊子叫的声波</p></li></ol></li></ul><hr><h3 id="inverse-fourier">inverse-fourier</h3><p>对傅里叶变换的图像再次变换可以<code>大致</code>获得原始波</p><img src="https://www.helloimg.com/images/2022/02/27/GVANO9.png" alt="20220114174856" /><hr><h3 id="质心与傅里叶公式的关系">质心与傅里叶公式的关系</h3><ul><li><p>&quot;质心&quot;实际指的就是公式变换的结果,下面分别为离散/连续的计算公式</p><img src="https://www.helloimg.com/images/2022/02/27/GVtUo6.png" alt="20220114175932" /><img src="https://www.helloimg.com/images/2022/02/27/GVASN1.png" alt="20220114180011" /><hr></li><li><p>需要注意的是,上面公式与傅里叶变换公式有小小的区别:</p><p>上面的公式只是在求 <code>单点</code>,实际傅里叶变换公式不需要除以时间</p><p>使得对应频率的 x 根据时间 t 倍增延长 (也就是变换后产生波峰的原因)</p><img src="https://www.helloimg.com/images/2022/02/27/GVLYsv.png" alt="20220114182317" /><hr></li><li><p>比如某频率的波持续 3 秒,其对应大小乘 3 倍</p><img src="https://www.helloimg.com/images/2022/02/27/GVFTHD.png" alt="20220114182518" /><p>持续时间越长,对应频率的波峰越大</p></li></ul><hr><h3 id="缺点">缺点</h3><p>比如有一段 2s 的声波,第一秒为 1Hz,第二秒为 2Hz</p><p>通过傅里叶变换只能识别出存在 1Hz 和 2Hz 的波,并可以比较持续时间,但并不能分析其在时间轴上的定位</p><p>针对其不能时频联合分析的缺点, 出现了 <code>短时傅里叶变换</code></p><hr><h3 id="短时傅里叶变换">短时傅里叶变换</h3><blockquote><p><a href="https://www.eet-china.com/mp/a77376.html">一文道破傅里叶变换的本质，优缺点一目了然</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="极化码">极化码</h2><style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style><div class="bbplayer"><iframe class="bbplayer" id="mmedia-nafRXAqwgpmQskgd" src="https://player.bilibili.com/player.html?bvid=BV1fq4y1g7hq&page=1&high_quality=1&danmaku=true" allowfullscreen="allowfullscreen" scrolling="no" border="0" frameborder="0" framespacing="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe></div><script> document.getElementById("mmedia-nafRXAqwgpmQskgd").style.height=document.getElementById("mmedia-nafRXAqwgpmQskgd").scrollWidth*0.76+"px";    window.onresize = function(){      document.getElementById("mmedia-nafRXAqwgpmQskgd").style.height=document.getElementById("mmedia-nafRXAqwgpmQskgd").scrollWidth*0.76+"px";    }; </script><h3 id="信息熵-如何度量信息">信息熵-如何度量信息</h3><p><a href="../../../public-post/notebook/ML#%E4%B8%A4%E7%82%B9%E5%88%86%E5%B8%83%E4%BF%A1%E6%81%AF%E7%86%B5">所用代码及结果展示</a></p><h4 id="哈特莱">哈特莱</h4><p>哈特莱首先提出使用对数 log 来描述信息</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>后称信息熵</mtext><mo>:</mo><mi>H</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo>=</mo><mi>n</mi><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>10</mn></msub><mi>s</mi><mo>=</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>10</mn></msub><msup><mi>s</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">后称信息熵: H(p) = n\log_{10} s = \log_{10} s^{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">后称信息熵</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9386em;vertical-align:-0.2441em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9585em;vertical-align:-0.2441em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>信息符合加法: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>h</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h(x,y)=h(x)+h(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></p><p>概率符合乘法: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>p</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(x,y)=p(x)p(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></p><p>log 可以把乘法变加法: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>log</mi><mo>⁡</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>log</mi><mo>⁡</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>p</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>log</mi><mo>⁡</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>log</mi><mo>⁡</mo><mi>p</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\log p(x,y) = \log p(x)p(y) = \log p(x)+\log p(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></p><p>操作原理就是 <code>通过概率间接量化信息</code>, 哈特莱这里底数取得是 10, 下面香农改为了 2 (更适合计算机计算)</p><hr><h4 id="香农">香农</h4><ul><li><p>香农首先提出信息熵来度量信息,可以粗略解释为:</p><p>n 个连续的 “是(1)” 或 “否(0)” 可以消除 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span> 比特内容的不确定性(疑义度)</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>信息熵</mtext><mo>:</mo><mi>H</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mi>k</mi><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>p</mi><mi>i</mi></msub><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">信息熵: H(p) = -k \sum_{i=1}^{n} p_{i} \log_{2} p_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">信息熵</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p></li><li><p>比如:</p><blockquote><p>常用的汉字大约有 7000 个,假设每个字使用概率相等,至少需要用 13 比特表示才能完全消除一个字的疑义度 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>13</mn></msup></mrow><annotation encoding="application/x-tex">2^{13}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">13</span></span></span></span></span></span></span></span></span></span></span></span>=8192 &gt; 7000) <br>那么在此条件下每个字的信息熵为 13 比特 <br>现实中每个字的使用频率概率, 出现场景, 上下文关联都会影响实际的信息熵 (比如文盲说话的信息熵不如学者高) <br><a href="https://blog.csdn.net/chenKFKevin/article/details/72074250">信息的度量——信息熵</a></p></blockquote></li><li><p>关于为什么前面带了个 <code>-k</code></p><blockquote><p>与直觉相反, 一个事件发生概率越大,实际所带的信息越小<br>比如太阳从东边升起,没什么信息含量; 换为从西边升起,即使概率无限接近 0, 它所含信息权重也是很高的 <sup id='cite_ref-3'><a href="#cite_note-3">[3]</a></sup></p></blockquote><p><img src="https://www.helloimg.com/images/2022/04/11/RtspVm.png" alt=""></p></li><li><p>具体计算一个:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>H</mi><mo stretchy="false">(</mo><mn>0.1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0.1</mn><mo>⋅</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>0.1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0.33</mn><mspace linebreak="newline"></mspace><mi>H</mi><mo stretchy="false">(</mo><mn>0.2</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0.2</mn><mo>⋅</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>0.2</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0.46</mn><mspace linebreak="newline"></mspace><mi>H</mi><mo stretchy="false">(</mo><mn>0.3</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0.3</mn><mo>⋅</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>0.3</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0.52</mn></mrow><annotation encoding="application/x-tex">H(0.1) = 0.1 \cdot log_2 (0.1) = 0.33 \\H(0.2) = 0.2 \cdot log_2 (0.2) = 0.46 \\H(0.3) = 0.3 \cdot log_2 (0.3) = 0.52</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord">0.1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0.1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.33</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord">0.2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0.2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.46</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord">0.3</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0.3</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.52</span></span></span></span></span></p></li></ul><hr><h4 id="基尼系数">基尼系数</h4><p><img src="https://www.helloimg.com/images/2022/04/13/R4tdlM.png" alt=""></p><p>我们把曲线 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mi>log</mi><mo>⁡</mo><mi>P</mi></mrow><annotation encoding="application/x-tex">- \log P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span> 换为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>P</mi></mrow><annotation encoding="application/x-tex">1-P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>, 得到的就是基尼系数</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>基尼系数</mtext><mo>:</mo><mi>G</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msubsup><mi>p</mi><mi>i</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">基尼系数: G(p)= \sum_{i=1}^{n} p_i (1-p_i)= 1- \sum_{i=1}^{n} p_{i}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">基尼系数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>基尼系数与熵是十分近似的, 在决策树中可以用基尼系数来代替熵 (效率更高)</p><p><a href="https://www.bilibili.com/video/BV16L411w7oQ?p=6&amp;t=3716.0">第二定义: 社会财富分配</a></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h4 id="欧拉式-两点分布">欧拉式-两点分布</h4><ul><li><p>两点分布的熵:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>令</mtext><mi>P</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mo>−</mo><mi>p</mi><mspace width="2em"/><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mi>p</mi><mspace linebreak="newline"></mspace><mtext> </mtext><mspace linebreak="newline"></mspace><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>H</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">)</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">)</mo><mo>−</mo><mi>p</mi><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mi>p</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>G</mi><mi>i</mi><mi>n</mi><mi>i</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">[</mo><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>+</mo><mi>p</mi><mo>⋅</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>2</mn><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">令 P(0) = 1-p \qquad p(1) = p\\ \ \\\begin{aligned}  H(p)  &amp;= - (1-p) \log_2 (1-p) - p \log_2 p \\  Gini(p)  &amp;= (1-p) \cdot [1-(1-p)] + p \cdot (1-p) \\  &amp;= 2p(1-p)\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">令</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:2em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0em;"></span><span class="mspace"> </span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="mord mathnormal">ini</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">p</span><span class="mclose">)]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">2</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p><img src="https://www.helloimg.com/images/2022/04/13/R4tKlh.png" alt=""></p><p>可见在概率为 0.5 时,信息熵 (不确定度) 最高</p></li></ul><hr><h4 id="相对熵">相对熵</h4><p>也叫互熵/交叉熵/鉴别信息/Kullback 熵/KL 散度/K-L 距离…</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>D</mi><mo stretchy="false">(</mo><mi>p</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>q</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>p</mi><mi>i</mi></msub><mi>log</mi><mo>⁡</mo><mfrac><msub><mi>p</mi><mi>i</mi></msub><msub><mi>q</mi><mi>i</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">D(p||q) = \sum_{i=1}^{n} p_{i} \log{\frac{p_i}{q_i}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord">∣∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p><hr><h4 id="单位">单位</h4><ul><li><p>经典熵底数为 2,单位为 bit</p><p>在做数据分析时有用 e 为底数的定义, 单位为 nat (奈特)</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>H</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mi>k</mi><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>p</mi><mi>i</mi></msub><mi>ln</mi><mo>⁡</mo><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">H(p) = -k \sum_{i=1}^{n} p_{i} \ln p_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">ln</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="信道容量-最大互信息">信道容量-最大互信息</h3><ul><li><p>信道容量(Channel Capacity) 也叫最大互信息</p><blockquote><p>互信息: <code>它是一个随机变量包含另一个随机变量信息量的度量</code></p></blockquote><p>比如一条河从 A-&gt;B 端, 但只有 70% 的河水能流到 B,其他的河水流失了; 那么在这里 A-&gt;B 端河水的互信息为 70%</p><p>当然, 互信息的度量单位并不是百分比, 概念上也略有偏颇</p><blockquote><p>视频中的例子: X-&gt;Y 传递信息熵为 <code>H(X)</code> 的信息, 传递过程中丢失/不能还原的信息熵为 <code>H(X|Y)</code>, 那么</p></blockquote><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>互信息</mtext><mo>:</mo><mi>I</mi><mo stretchy="false">(</mo><mi>X</mi><mi mathvariant="normal">∣</mi><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>H</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>−</mo><mi>H</mi><mo stretchy="false">(</mo><mi>X</mi><mi mathvariant="normal">∣</mi><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">互信息: I(X|Y) = H(X) - H(X|Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">互信息</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span></span></span></p><hr></li><li><p>什么是信道/信道容量? 举个栗子:</p><p>有个工厂里有好多流水线从 A-&gt;B 处输送产品; 每条流水线可以理解为是一个信道</p><p>流水线运输速度太快会使产品不合格,需要限制在 T 时间内运输 N(T) 件产品才可以保证质量; 同样道理通信时一味地加速发送会使通信状态变差,也需要限制在一定范围之内,<code>这个范围就是信道容量</code></p><p>(理论条件下,单位时间内可以传过去的信息量)</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>信道容量</mtext><mo>:</mo><mi>C</mi><mo>=</mo><msub><mrow><mi mathvariant="normal">Lim</mi><mo>⁡</mo></mrow><mrow><mi>T</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow></msub><mfrac><mrow><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo></mrow><mi>T</mi></mfrac></mrow><annotation encoding="application/x-tex">信道容量: C=\operatorname{Lim}_{T \rightarrow \infty} \frac{\log N(T)}{T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">信道容量</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mop"><span class="mop"><span class="mord mathrm">Lim</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mrel mtight">→</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><hr></li></ul><h3 id="香农极限">香农极限</h3><p>实际条件下,通信接收方会因为丢包/信号干扰/磁场等<code>噪声</code>无法接收到部分信息,导致无法真实达到信道容量</p><p>香农提出通过合适的编码,信道容量 C 可以被尽可能的无限逼近,但对于大于 C 的速率不成立.<code>即香农极限</code>(香农提出,后人证明)</p>  <img src="https://www.helloimg.com/images/2022/02/27/GV4j4v.png" alt="20220203184654" /><hr><ul><li><p>经典教材计算机网络也有提及</p><p><img src="https://www.helloimg.com/images/2022/03/03/Gh3Pnz.png" alt=""></p><p><img src="https://www.helloimg.com/images/2022/03/03/Gh3a7A.png" alt="Gh3a7A.png"></p></li></ul><hr><h3 id="极化码-PolarCodes">极化码-PolarCodes</h3><ul><li><p>核心思想: 通过异或操作把信息分流</p><img src="https://www.helloimg.com/images/2022/02/27/GVPxut.png" alt="20220203221617" /><p>通过异或操作,把信道一/二两个实际信道转换成信道<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mo>−</mo></msup><mi mathvariant="normal">/</mi><msup><mi>W</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">W^-/W^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0213em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span></p><img src="https://www.helloimg.com/images/2022/02/27/GVSFtR.png" alt="20220203222548" /><p>这里可能会疑惑信道<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">W^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7713em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span>第四种情况 “U2=U1=Y1” 中 U1 从何得知?</p><p>实际上这里我们让<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mo>−</mo></msup></mrow><annotation encoding="application/x-tex">W^-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7713em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span></span></span></span>信道不传输信息,U1 是通信双方预先约定好的内容</p><hr></li><li><p>当处理的码长(信道数)足够多时,好信道的互信息会无限逼近 1 <sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GV4Ent.png" alt="20220203224853" /></blockquote><p>当然凡事不是越多越好:</p><ol><li><p>这里信息传输的条件是<code>信道连接能保持稳定</code></p></li><li><p>每增加信道数,需要做的处理指数级增长</p></li></ol><hr></li></ul><p>具体如何编码/构建, 详见论文 <sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mtext>🥵</mtext><mrow><mi>h</mi><mi>a</mi><mi>r</mi><mi>d</mi></mrow><mrow><mi>t</mi><mi>o</mi><mi>o</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">🥵 ^{too}_{hard}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0767em;vertical-align:-0.2831em;"></span><span class="mord"><span class="mord">🥵</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7936em;"><span style="top:-2.4169em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ha</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">d</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">oo</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span></span></span></span></span></span></span></span></span></span></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="音频">音频</h2><h3 id="有-无损压缩">有-无损压缩</h3><p>对于大部分人的<code>木耳</code>来说,完全听不出来差别; 极小部分人<code>金耳</code>才能听出来 (年轻,耳朵从出生没受过损伤)</p><p>可以试试双盲测试: <sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup></p><p><a href="https://www.zhihu.com/question/20699962">耳机厂商为什么不把耳机煲好了再卖？</a></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-26">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://res-www.zte.com.cn/mediares/magazine/publication/com_cn/article/201901/cn201901004.pdf">“太极混一”——极化码原理及 5G 应用</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="http://www.erji.net/forum.php?mod=viewthread&amp;tid=1598502">【双盲测试】你听得出有损和无损的区别么</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://www.bilibili.com/video/BV16L411w7oQ?p=6">https://www.bilibili.com/video/BV16L411w7oQ?p=6</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
          <category> basic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 通信 </tag>
            
            <tag> 音频 </tag>
            
            <tag> 傅里叶变换 </tag>
            
            <tag> 极化码 </tag>
            
            <tag> 信息论 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥨结构设计杂记</title>
      <link href="/post/design/%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/"/>
      <url>/post/design/%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h1>结构设计杂记</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:49:07 * @FilePath: \Blog-private\source\_posts\design\结构设计.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E6%9D%82%E8%AE%B0">结构设计杂记</a><ul><li><a href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E9%97%AE%E9%A2%98">目录结构问题</a></li></ul></li></ul></blockquote><h2 id="目录结构问题">目录结构问题</h2><ul><li><p>今天整理文件夹时遇到的小问题:</p><p>我的目录如下,因为在整理时发现在 Audio/Image 下也有要整理的素材</p><p>如果每个里面都搞一个&quot;素材&quot;文件夹又显得多余,于是动手开始了合并这三个文件夹</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">|&gt; Audio</span></span><br><span class="line"><span class="string">|&gt; Image</span></span><br><span class="line"><span class="string">|&gt; Video</span></span><br><span class="line">  <span class="string">|&gt; 素材</span></span><br></pre></td></tr></table></figure><hr></li><li><p>but</p><p>整理过程中发现简单粗暴地合并会给我的人为索引带来困难:</p><p>大多东西 (比如歌/MV/涩图) 都是<code>单方面的内容</code>,不涉及另外两方面</p><p>所以一旦合并,人为索引复杂度会 1 -&gt; 2~3</p><hr></li><li><p>最终选择:</p><p>运用 <code>解耦</code> 思想,把&quot;素材&quot;抽离出来;</p><p>尽管你可能人为&quot;素材&quot;应该是那三个的子分类,但是这种结构应该才是最优解</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">|&gt; Audio</span></span><br><span class="line"><span class="string">|&gt; Image</span></span><br><span class="line"><span class="string">|&gt; Video</span></span><br><span class="line"><span class="string">|&gt; 素材</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>🤔🤣 是不是很傻的问题呢? 我倒是感觉这种抽象化思维很有帮助.</p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥱戏耍脚本中~奇技淫巧</title>
      <link href="/post/experience/shell/%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7/"/>
      <url>/post/experience/shell/%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<h1>戏耍脚本中~奇技淫巧</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-05-26 17:53:55 * @FilePath: \Blog-private\source\_posts\experience\shell\奇技淫巧.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E6%88%8F%E8%80%8D%E8%84%9A%E6%9C%AC%E4%B8%AD%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7">戏耍脚本中~奇技淫巧</a><ul><li><a href="#%E5%8F%82%E6%95%B0%E5%88%A4%E7%A9%BA">参数判空</a><ul><li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5%E5%88%A4%E5%AE%9A">字符串拼接判定</a></li><li><a href="#%E8%AF%AD%E6%B3%95%E5%88%A4%E5%AE%9A">语法判定</a></li></ul></li><li><a href="#%E7%A8%8B%E5%BA%8F%E5%8D%A0%E7%94%A8">程序占用</a></li><li><a href="#echo">echo</a></li><li><a href="#scoop">Scoop</a><ul><li><a href="#portable">portable</a></li><li><a href="#%E8%A7%A3%E5%89%96-exe">解剖-exe</a></li></ul></li><li><a href="#%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%90%AB%E6%9C%89%E6%9F%90%E5%AD%97%E7%AC%A6%E4%B8%B2">判断是否含有某字符串</a></li><li><a href="#%E5%85%B3%E4%BA%8E%E7%9B%AE%E5%BD%95">关于目录</a></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="参数判空">参数判空</h2><h3 id="字符串拼接判定">字符串拼接判定</h3><ul><li><p>有时候我们想判断一个变量是不是空的,会变得有些棘手</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if [ $&#123;abc&#125; != &quot;&quot; ]; then</span><br><span class="line">  echo $&#123;abc&#125;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>我们的想法是判断是否存在 abc 这个变量,实际上这样写并不行,没有这个变量的话会变成下面的样子:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if [  != &quot;&quot; ]; then</span><br><span class="line">  echo $&#123;abc&#125;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>这样肯定会报错的</p><hr></li><li><p>改一下,比如添加冗余校验字符</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">abc = &quot;abc&quot;;</span><br><span class="line"></span><br><span class="line">if [ a$&#123;abc&#125; != a ]; then</span><br><span class="line">  echo $&#123;abc&#125;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><hr></li><li><p><code>bat 中引号也会视为变量一部分</code>,所以:</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &quot;<span class="variable">%DIRNAME%</span>&quot; == &quot;&quot; <span class="built_in">set</span> DIRNAME=.</span><br></pre></td></tr></table></figure><p>或者:</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> abc=&quot;&quot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="variable">%abc%</span> == &quot;&quot; (</span><br><span class="line">  <span class="built_in">echo</span> &quot;abc为空&quot;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>跟 shell 语法差别很大来着, 注意别写错…</p></li></ul><hr><h3 id="语法判定">语法判定</h3><ul><li><p>shell 的语法:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if [ -n &quot;$&#123;abc&#125;&quot; ]; then</span><br><span class="line">  echo $&#123;abc&#125;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></li><li><p>bat 语法:</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">defined</span> abc (</span><br><span class="line">  <span class="built_in">echo</span> &#x27;abc&#x27; <span class="keyword">not</span> <span class="keyword">defined</span>.</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ul><h2 id="程序占用">程序占用</h2><ul><li><p>如果你用过 aria2 的话肯定会遇到一个头疼的事: <code>如何开机后台自动启动它</code></p><ol><li><p>它的程序本身不带有开机启动,需要另外写启动脚本</p></li><li><p>它无法后台启动,必然会占据一个控制台程序的前台</p></li></ol></li><li><p>网上找到了比较好用的方法: <code>vbs 脚本</code></p><figure class="highlight vbs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CreateObject</span>(<span class="string">&quot;WScript.Shell&quot;</span>).Run <span class="string">&quot;aria2c --conf-path=D:\Game\Scoop\persist\aria2\conf&quot;</span>,<span class="number">0</span></span><br></pre></td></tr></table></figure><p>由于我平时用 bat 管理电脑,单独编写执行一个 vbs 脚本略显多余,所以直接结合进 bat 脚本里,用完就删针刺激:</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> CreateObject(&quot;WScript.Shell&quot;).Run &quot;aria2c --conf-<span class="built_in">path</span>=D:\Game\Scoop\persist\aria2\conf&quot;,<span class="number">0</span> &gt; aria2.vbs</span><br><span class="line">cscript //Nologo aria2.vbs</span><br><span class="line"><span class="built_in">del</span> aria2.vbs</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="echo">echo</h2><ul><li><p>看到一个脚本中这么写,乍一看蒙了:</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CLS</span>&amp;<span class="built_in">ECHO</span>.&amp;<span class="built_in">ECHO</span> 完成, 以下选项自选：</span><br><span class="line"><span class="built_in">ECHO</span>.&amp;<span class="built_in">ECHO</span> <span class="number">1</span>、启用视频播放程序(会驻留进程)</span><br></pre></td></tr></table></figure></li><li><p>实际上只是把几个命令压缩到了一行</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cls</span>   <span class="meta"># 清屏</span></span><br><span class="line">echo. <span class="meta"># 换行</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Scoop-4">Scoop</h2><h3 id="portable">portable</h3><p>我们可以通过创建虚拟链接把 C 盘中的 runtime 数据 -&gt; scoop/persist 内</p><ul><li><p>此片段可自动判断 <code>remix-ide / .remix-ipfsnode / .cache_remix_ide</code> 所在目录是 <code>USERPROFILE / APPDATA</code></p><p>并将数据移动到 persist 内,创建虚拟链接</p><p><code>需要注意只能是文件夹,不能是文件!!!</code></p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;foreach (<span class="variable">$folder</span> in @(&#x27;remix-ide&#x27;, &#x27;.remix-ipfsnode&#x27;, &#x27;.cache_remix_ide&#x27;)) &#123;&quot;</span>,</span><br><span class="line"><span class="string">&quot;  if (Test-Path \&quot;</span><span class="variable">$env</span>:USERPROFILE\\<span class="variable">$folder</span>\<span class="string">&quot;) &#123;&quot;</span>,</span><br><span class="line"><span class="string">&quot;    <span class="variable">$runtimeCache</span> = \&quot;</span><span class="variable">$env</span>:USERPROFILE\\<span class="variable">$folder</span>\<span class="string">&quot;&quot;</span>,</span><br><span class="line"><span class="string">&quot;    <span class="variable">$runtimeCachePersist</span> = \&quot;</span><span class="variable">$persist_dir</span>\\USERPROFILE\\<span class="variable">$folder</span>\<span class="string">&quot;&quot;</span>,</span><br><span class="line"><span class="string">&quot;  &#125; else &#123;&quot;</span>,</span><br><span class="line"><span class="string">&quot;    if (Test-Path \&quot;</span><span class="variable">$env</span>:APPDATA\\<span class="variable">$folder</span>\<span class="string">&quot;) &#123;&quot;</span>,</span><br><span class="line"><span class="string">&quot;      <span class="variable">$runtimeCache</span> = \&quot;</span><span class="variable">$env</span>:APPDATA\\<span class="variable">$folder</span>\<span class="string">&quot;&quot;</span>,</span><br><span class="line"><span class="string">&quot;      <span class="variable">$runtimeCachePersist</span> = \&quot;</span><span class="variable">$persist_dir</span>\\APPDATA\\<span class="variable">$folder</span>\<span class="string">&quot;&quot;</span>,</span><br><span class="line"><span class="string">&quot;    &#125; else &#123;continue&#125;&quot;</span>,</span><br><span class="line"><span class="string">&quot;  &#125;&quot;</span>,</span><br><span class="line"><span class="string">&quot;  if (Test-Path <span class="variable">$runtimeCachePersist</span>) &#123;&quot;</span>,</span><br><span class="line"><span class="string">&quot;    Remove-Item <span class="variable">$runtimeCache</span> -Force -Recurse -ErrorAction SilentlyContinue&quot;</span>,</span><br><span class="line"><span class="string">&quot;    New-Item -Type Junction -Path <span class="variable">$runtimeCache</span> -Target <span class="variable">$runtimeCachePersist</span> | Out-Null&quot;</span>,</span><br><span class="line"><span class="string">&quot;  &#125; else &#123;&quot;</span>,</span><br><span class="line"><span class="string">&quot;    mkdir <span class="variable">$runtimeCache</span>&quot;</span>,</span><br><span class="line"><span class="string">&quot;    Move-Item <span class="variable">$runtimeCache</span> <span class="variable">$runtimeCachePersist</span> -Force&quot;</span>,</span><br><span class="line"><span class="string">&quot;    New-Item -Type Junction -Path <span class="variable">$runtimeCache</span> -Target <span class="variable">$runtimeCachePersist</span> | Out-Null&quot;</span>,</span><br><span class="line"><span class="string">&quot;  &#125;&quot;</span>,</span><br><span class="line"><span class="string">&quot;&#125;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>以及配对的 uninstaller:</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;uninstaller&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;script&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;foreach (<span class="variable">$folder</span> in @(&#x27;remix-ide&#x27;, &#x27;.remix-ipfsnode&#x27;, &#x27;.cache_remix_ide&#x27;)) &#123;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;  if (Test-Path \&quot;</span><span class="variable">$env</span>:USERPROFILE\\<span class="variable">$folder</span>\<span class="string">&quot;) &#123;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;    <span class="variable">$runtimeCache</span> = \&quot;</span><span class="variable">$env</span>:USERPROFILE\\<span class="variable">$folder</span>\<span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;    <span class="variable">$runtimeCachePersist</span> = \&quot;</span><span class="variable">$persist_dir</span>\\USERPROFILE\\<span class="variable">$folder</span>\<span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;  &#125; else &#123;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;    if (Test-Path \&quot;</span><span class="variable">$env</span>:APPDATA\\<span class="variable">$folder</span>\<span class="string">&quot;) &#123;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;      <span class="variable">$runtimeCache</span> = \&quot;</span><span class="variable">$env</span>:APPDATA\\<span class="variable">$folder</span>\<span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;      <span class="variable">$runtimeCachePersist</span> = \&quot;</span><span class="variable">$persist_dir</span>\\APPDATA\\<span class="variable">$folder</span>\<span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;    &#125; else &#123;continue&#125;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;  &#125;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;  if (!(Test-Path <span class="variable">$runtimeCachePersist</span>)) &#123; Move-Item <span class="variable">$runtimeCache</span> <span class="variable">$runtimeCachePersist</span> -Force -ErrorAction SilentlyContinue &#125;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;  else &#123; Remove-Item <span class="variable">$runtimeCache</span> -Force -Recurse -ErrorAction SilentlyContinue &#125;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;&#125;&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="解剖-exe">解剖-exe</h3><ul><li><p>此片段可以把常见的 <code>.exe -&gt; .exe#/dl.7z</code> 中的文件提取出来</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;Expand-7zipArchive <span class="subst">\&quot;</span>$dir<span class="subst">\\</span>`$PLUGINSDIR<span class="subst">\\</span>app-64.7z<span class="subst">\&quot;</span> <span class="subst">\&quot;</span>$dir<span class="subst">\&quot;</span>&quot;</span>,</span><br><span class="line"><span class="string">&quot;Remove-Item -Recurse -Force <span class="subst">\&quot;</span>$dir<span class="subst">\\</span>`$PLUGINSDIR<span class="subst">\&quot;</span>&quot;</span>,</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="判断是否含有某字符串">判断是否含有某字符串</h2><ul><li><p>如下,可以判断.gitignore 中是否含有 ‘backup’</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="variable">%BACKUP_DIR%</span>\.gitignore | <span class="built_in">findstr</span> backup &gt;<span class="built_in">nul</span> || (</span><br><span class="line">    <span class="built_in">echo</span> backup&gt;&gt; <span class="variable">%BACKUP_DIR%</span>\.gitignore</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="关于目录">关于目录</h2><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">pwd</span><br><span class="line"><span class="built_in">echo</span> %<span class="number">0</span></span><br><span class="line"><span class="built_in">echo</span> %~dp0</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">╰─ cmd /c &quot;d:\Repos\Weidows-projects\Keeper\test.bat&quot;</span><br><span class="line">/d/Repos/Weidows-projects/Keeper</span><br><span class="line">d:\Repos\Weidows-projects\Keeper\test.bat</span><br><span class="line">d:\Repos\Weidows-projects\Keeper\</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-28">借物表</h2><p>暂无…</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
          <category> shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
            <tag> powershell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🤬Eyes-4-Fishing</title>
      <link href="/post/life/%E9%97%B2%E9%B1%BC/"/>
      <url>/post/life/%E9%97%B2%E9%B1%BC/</url>
      
        <content type="html"><![CDATA[<h1>Eyes-4-Fishing</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-10-21 10:06:57 * @LastEditors: Weidows * @LastEditTime: 2022-06-14 21:10:27 * @FilePath: \Blog-private\source\_posts\life\闲鱼.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#eyes-4-fishing">Eyes-4-Fishing</a><ul><li><a href="#%E9%BB%91%E8%AF%9D">黑话</a></li><li><a href="#%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E8%A2%AB%E9%AA%97">如何避免被骗</a></li><li><a href="#%E5%85%B6%E4%BB%96%E6%8E%A8%E8%8D%90">其他推荐</a></li></ul></li></ul></blockquote><p>🔥 闲鱼购物避险法则,鉴别过滤不良商家.</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="黑话">黑话</h2><table><thead><tr><th style="text-align:center">关键词/信息</th><th style="text-align:center">为什么</th></tr></thead><tbody><tr><td style="text-align:center">点我想要私聊</td><td style="text-align:center">骗流量,让他商品比较靠前</td></tr><tr><td style="text-align:center">仅同城交易</td><td style="text-align:center">不通过平台交易(线下交易),出了问题找不到卖家</td></tr><tr><td style="text-align:center">价格明显低但是挂了很长时间</td><td style="text-align:center">钓鱼/诈骗,通过这个引流/压根没货骗人付款的</td></tr><tr><td style="text-align:center">我想要的人数&gt; 15 但是还是没出</td><td style="text-align:center">同上</td></tr><tr><td style="text-align:center">女生自用/急用钱/老公用的</td><td style="text-align:center">这能信?</td></tr><tr><td style="text-align:center">换设备了,闲置低价出了</td><td style="text-align:center">价格低的话同上,价格正常的话有可能可信</td></tr><tr><td style="text-align:center">商家有多个价格相同而且低的商品</td><td style="text-align:center">比如一水的 2599,3000 这种,不是标的实价,一问就抬价</td></tr><tr><td style="text-align:center">图片大概率是网图(偷别人的),不能退货的</td><td style="text-align:center">实物与描述不符,货到砸手</td></tr><tr><td style="text-align:center">商家信用极好基本上全 ×</td><td style="text-align:center">信用极好不至于用闲鱼,除非是过万的大件</td></tr><tr><td style="text-align:center">商品是近期密集上架的</td><td style="text-align:center">频繁被举报,租的别人的号,不想被实名</td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="如何避免被骗">如何避免被骗</h2><ol><li>私聊让他拍个实物照/视频,正常卖家会给拍的 (墨迹找理由的或者态度不好的就是内个)</li><li>商家货架上白白净净(大部分人都这样),或者有很多已售出的商品(至少不是骗子)</li><li>关注数比粉丝数更能体现出商家是不是正常人</li><li>走闲鱼平台交易,不要!不要!不要转到微信/支付宝/银行卡支付</li></ol><blockquote><p>群友: 根据我多年的闲鱼经验，一般来说，定位在珠三角地区用户，我是不会买他们的电子产品的</p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="其他推荐">其他推荐</h2><blockquote><p><a href="https://www.bilibili.com/video/BV1eu411174i">咸鱼黑话大全</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 闲鱼 </tag>
            
            <tag> 购物 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥵OpenGL-xmake-蚌埠住了</title>
      <link href="/post/experience/basic/OpenGL/"/>
      <url>/post/experience/basic/OpenGL/</url>
      
        <content type="html"><![CDATA[<h1>OpenGL-xmake-蚌埠住了</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-22 15:22:48 * @FilePath: \Blog-private\source\_posts\experience\basic\OpenGL.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#opengl-xmake-%E8%9A%8C%E5%9F%A0%E4%BD%8F%E4%BA%86">OpenGL-xmake-蚌埠住了</a><ul><li><a href="#python">Python</a><ul><li><a href="#%E6%8A%A5%E9%94%99">报错</a></li><li><a href="#%E6%B5%8B%E8%AF%95">测试</a></li><li><a href="#%E5%AE%9E%E4%BE%8B%E4%BB%A3%E7%A0%81">实例代码</a></li></ul></li><li><a href="#c">C</a><ul><li><a href="#xmake-%E5%BC%95%E5%85%A5%E5%BA%93">xmake-引入库</a></li><li><a href="#%E6%B5%8B%E8%AF%95-1">测试</a></li><li><a href="#%E5%AE%9E%E4%BE%8B%E4%BB%A3%E7%A0%81-1">实例代码</a></li></ul></li></ul></li></ul></blockquote><ul><li><p>学校开了图形学这门课程,让我们配置下环境</p><p>老师给的是 VS + OpenGL + C/C++ + 复制库文件 的方式</p></li><li><p>转路</p><ol><li><p><code>VScode + Python + pyopengl 库</code></p></li><li><p><code>Vscode + C++ + xmake(需要VisualStudio) + 各种库</code> (推荐方法)</p></li></ol><hr></li><li><p>网上找了找,并不是能很顺畅的捅下来 (因为依赖项比较杂)</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Python-3">Python</h2><ul><li><p>先装 vscode 和 Python / anaconda,这俩没问题</p></li><li><p>通过 pip (conda 不行) 安装 <code>pyopengl</code> 库</p><ul><li><p>有的教程装的是 <code>pyglet</code>,这个库官方解释是 “pyglet is a cross-platform games and multimedia package.”</p></li><li><p>虽然 <a href="http://pyglet.gl">pyglet.gl</a> 可以调 OpenGL API,但是鉴于 Ctrl CV 工作,还是老老实实用 pyopengl 库吧</p></li></ul><hr></li></ul><h3 id="报错-3">报错</h3><p>直接通过 pip 在线安装的话是装的 32 位的库,在 64 位机子上跑不起来</p><blockquote><p>报错 <a href="https://blog.csdn.net/feilong_csdn/article/details/61421002">“OpenGL.error.NullFunctionError: Attempt to call an undefined function”解决方案</a></p></blockquote><p>必须去下载适合本机的离线包安装: <a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#pyopengl">下载地址</a></p><p>比如我是 win_64,py_3.8 ; 需要下载的是: <code>PyOpenGL-3.1.5-cp38-cp38-win_amd64.whl</code>,然后安装</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把之前的版本先卸载,否则安装也无效</span></span><br><span class="line"><span class="attribute">pip</span> uninstall pyopengl</span><br><span class="line"><span class="attribute">pip</span> install PyOpenGL-<span class="number">3</span>.<span class="number">1</span>.<span class="number">5</span>-cp38-cp38-win_amd64.whl</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="测试-3">测试</h3><p>画个静态茶壶, 就是文章封面图</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> OpenGL.GL <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLU <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> OpenGL.GLUT <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drawFunc</span>():</span><br><span class="line">    glClear(GL_COLOR_BUFFER_BIT)</span><br><span class="line">    glutWireTeapot(<span class="number">0.5</span>)</span><br><span class="line">    glFlush()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">glutInit()</span><br><span class="line">glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA)</span><br><span class="line">glutInitWindowSize(<span class="number">400</span>, <span class="number">400</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#参数为b类型而不是string</span></span><br><span class="line">glutCreateWindow(<span class="string">b&quot;Teapot&quot;</span>)</span><br><span class="line">glutDisplayFunc(drawFunc)</span><br><span class="line">glutMainLoop()</span><br></pre></td></tr></table></figure><h3 id="实例代码">实例代码</h3><p><a href="../../../python/%E6%9D%82#opengl">实例代码</a></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="C">C</h2><p>如果你喜欢 VScode 调试 C/C++,而不想用比较复杂的 Visual Studio</p><p>如果你想通过简单的配置就让 VScode 能调试 OpenGL</p><p>恭喜,马上就好!</p><p>首先,按照我另一篇文章: <a href="../../../others/cpp/C_Configuration">👌 茅塞顿开之 C/C+±VScode-xmake</a> 配置好 <code>vscode + C/C++</code> 的开发环境</p><hr><h3 id="xmake-引入库">xmake-引入库</h3><p>xmake 自带的 xrepo 可以安装 xrepo/vcpkg/conan 的库</p><ul><li><p>需要注意一下:</p><p>虽然我这里使用 vscode + xmake,但是安装依赖时仍需要调用 visualstudio,必须安装</p><p>需要安装的有两个: <code>buildtools + visualstudio community</code></p><img src="https://www.helloimg.com/images/2022/02/27/GVLoVo.png" alt="20211120115814" /><p>buildtools 也就是生成工具只有那一个,裸装就好,里面的东西不用装</p><p>visualstudio community 的话什么版本都行,xmake 都支持了,它里面必须装 <code>C++ 桌面开发</code>,不能装成其他的</p><img src="https://www.helloimg.com/images/2022/02/27/GVA21S.png" alt="20211120115909" /><p>语言包记得选中+英! 不然识别不到</p><img src="https://www.helloimg.com/images/2022/02/27/GVSD4n.png" alt="20211120120254" /></li></ul><hr><h3 id="测试-4">测试</h3><ul><li><p>xmake.lua</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 引用.lib形式的静态库会报错,所以要用shared动态链接库版本</span></span><br><span class="line">add_requires(<span class="string">&quot;freeglut&quot;</span>,&#123;configs = &#123;shared = <span class="literal">true</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 全局添加依赖</span></span><br><span class="line">add_packages(<span class="string">&quot;freeglut&quot;</span>)</span><br><span class="line"></span><br><span class="line">target(<span class="string">&quot;MazeGame&quot;</span>)</span><br><span class="line">    set_kind(<span class="string">&quot;binary&quot;</span>)</span><br><span class="line">    add_files(<span class="string">&quot;test.cpp&quot;</span>)</span><br><span class="line">target_end()</span><br></pre></td></tr></table></figure></li><li><p>test.cpp</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;GL/glut.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Initial</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">  glMatrixMode(GL_PROJECTION); <span class="comment">//设置投影参数，表示下面进行投影变换。若改GL_PROJECTION为GL_MODEVIEW则进行视图变换。</span></span><br><span class="line">  glLoadIdentity();            <span class="comment">//通常我们在需要进行投影变换时要把当前矩形设置为单位矩阵，即glLoadIdentity()</span></span><br><span class="line">  gluOrtho2D(<span class="number">0.0</span>, <span class="number">200.0</span>, <span class="number">0.0</span>, <span class="number">200.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Display</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">  glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line">  glPushMatrix(); <span class="comment">//操作矩阵堆栈,调用函数，相当于把矩阵放到堆栈上</span></span><br><span class="line">  glColor3f(<span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">  glTranslated(<span class="number">100</span>, <span class="number">100</span>, <span class="number">0</span>);</span><br><span class="line">  glTranslated(<span class="number">70</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  glRotated(<span class="number">-90</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">  glScaled(<span class="number">0.25</span>, <span class="number">0.25</span>, <span class="number">0.0</span>);</span><br><span class="line">  glTranslated(<span class="number">-100</span>, <span class="number">-100</span>, <span class="number">0</span>);</span><br><span class="line">  glBegin(GL_POLYGON);</span><br><span class="line">  glVertex2f(<span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">  glVertex2f(<span class="number">150</span>, <span class="number">50</span>);</span><br><span class="line">  glVertex2f(<span class="number">100</span>, <span class="number">150</span>);</span><br><span class="line">  glEnd();</span><br><span class="line">  glPopMatrix();</span><br><span class="line"></span><br><span class="line">  glBegin(GL_POLYGON); <span class="comment">//opengl要求指定顶点的位置必须在glBegin()后面，同时在glEnd()后面。</span></span><br><span class="line">  glVertex2f(<span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">  glVertex2f(<span class="number">150</span>, <span class="number">50</span>);</span><br><span class="line">  glVertex2f(<span class="number">100</span>, <span class="number">150</span>);</span><br><span class="line">  glEnd();</span><br><span class="line">  glFlush();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span><br><span class="line">&#123;</span><br><span class="line">  glutInit(&amp;argc, argv);</span><br><span class="line">  glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB); <span class="comment">//使用单缓存模式，如果GLUT_DOUBLE则为双缓存模式</span></span><br><span class="line">  glutInitWindowSize(<span class="number">600</span>, <span class="number">600</span>);                <span class="comment">//设置窗口大小</span></span><br><span class="line">  glutInitWindowPosition(<span class="number">100</span>, <span class="number">100</span>);            <span class="comment">//设置窗口位置</span></span><br><span class="line">  glutCreateWindow(<span class="string">&quot;Triangle&quot;</span>);</span><br><span class="line">  glutDisplayFunc(Display);</span><br><span class="line">  Initial();</span><br><span class="line">  glutMainLoop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="实例代码-2">实例代码</h3><p><a href="https://github.com/Weidows/C--/tree/master/src/OpenGL">实例代码</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
          <category> basic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> opengl </tag>
            
            <tag> c </tag>
            
            <tag> conan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🤷‍♂️国人-不懂-国语.?</title>
      <link href="/post/others/Better-Chinese/"/>
      <url>/post/others/Better-Chinese/</url>
      
        <content type="html"><![CDATA[<h1>国人-不懂-国语.?</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:46:53 * @FilePath: \Blog-private\source\_posts\others\Better-Chinese.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E5%9B%BD%E4%BA%BA-%E4%B8%8D%E6%87%82-%E5%9B%BD%E8%AF%AD">国人-不懂-国语.?</a><ul><li><a href="#%E6%AD%A3%E6%96%87">正文</a></li></ul></li></ul></blockquote><blockquote><p>兄弟文章: <a href="../Better-English">🧀Better-English-4-U</a></p></blockquote><ul><li>有些字眼/黑话属实难以揉捏透,看来看去大脑都高潮了.</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="正文">正文</h2><table><thead><tr><th style="text-align:center">名称</th><th style="text-align:center">释义</th><th style="text-align:center">链接</th></tr></thead><tbody><tr><td style="text-align:center">狗推</td><td style="text-align:center">是对于在菲律宾从事网络博彩推广工作的人一种带有轻蔑性质的称呼。</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">预发环境-影子流量</td><td style="text-align:center"></td><td style="text-align:center"><a href="https://segmentfault.com/a/1190000039805146">谈一谈线上事故的故事</a></td></tr><tr><td style="text-align:center">炼丹</td><td style="text-align:center">一般来说就是用计算机训练项目</td><td style="text-align:center">很有趣的回答: <a href="https://zhuanlan.zhihu.com/p/23781756?utm_source=qq&amp;utm_medium=social&amp;utm_oi=807874781918658560">深度学习·炼丹入门</a></td></tr><tr><td style="text-align:center">灰度测试</td><td style="text-align:center">功能/业务性测试,一般不是由程序员负责的东西</td><td style="text-align:center"><a href="https://zhuanlan.zhihu.com/p/124912164">灰度测试是什么意思呢？</a></td></tr><tr><td style="text-align:center">幂等性</td><td style="text-align:center"></td><td style="text-align:center"><a href="https://blog.csdn.net/miachen520/article/details/91039661">什么是幂等性</a></td></tr><tr><td style="text-align:center">部署/上线</td><td style="text-align:center">部署: 把代码从开发机丢到服务器上跑; 上线: 代码在测试环境跑没问题,然后迁到生产环境</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">穿透</td><td style="text-align:center">前端所展示的内容与需求/实际不一致 (比如我 100 岁,后端给的是 10 岁)</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">扁平化管理</td><td style="text-align:center"><img src="https://www.helloimg.com/images/2022/02/27/GVSEnc.png" alt="20220127160425" /></td><td style="text-align:center"><a href="https://www.zhihu.com/question/37902193">什么是扁平化管理？</a></td></tr></tbody></table><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🚚开发之旅~</title>
      <link href="/post/experience/dev/sql-problem/"/>
      <url>/post/experience/dev/sql-problem/</url>
      
        <content type="html"><![CDATA[<h1>开发之旅~</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:44:23 * @FilePath: \Blog-private\source\_posts\experience\dev\sql-problem.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E5%BC%80%E5%8F%91%E4%B9%8B%E6%97%85">开发之旅~</a><ul><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2">模糊查询</a></li><li><a href="#where">where</a></li><li><a href="#%E5%A4%9A%E7%B4%A2%E5%BC%95%E6%8E%92%E5%BA%8F">多索引排序</a></li><li><a href="#mariadb-%E6%97%A0%E6%B3%95%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5">Mariadb-无法远程连接</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E6%BA%90%E8%BF%9E%E6%8E%A5%E4%B8%8D%E4%B8%8A">数据源连接不上</a></li><li><a href="#docker-databases">docker-databases</a></li><li><a href="#%E6%8E%A5%E5%8F%A3%E6%95%B0%E6%8D%AE%E9%80%9F%E8%A7%88">接口数据速览</a></li><li><a href="#%E5%A4%96%E9%94%AE-%E6%95%B0%E6%8D%AE-%E5%AF%BC%E5%87%BA%E5%85%A5">外键-数据-导出入</a></li><li><a href="#map-and-filter">map-and-filter</a></li><li><a href="#%E6%82%B2%E8%A7%82%E9%94%81-%E4%B9%90%E8%A7%82%E9%94%81">悲观锁-乐观锁</a><ul><li><a href="#%E4%B8%8A%E9%94%81%E4%B8%9A%E5%8A%A1%E4%B8%8E%E8%AF%BB%E5%86%99%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90">上锁业务与读写性能分析</a></li><li><a href="#%E8%A1%8C%E9%94%81%E4%B8%8E%E8%A1%A8%E9%94%81">行锁与表锁</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="简介-11">简介</h2><p>一顿课程下来,SQL 语法是熟悉了,但是做到业务层面,不圆滑之处暴露出来惹.</p><p>不只是 SQL,包括工作中常用的技巧.</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="模糊查询-2">模糊查询</h2><ul><li><p>包括模糊查询中文<br><sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup><br><sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup></p><p>中/英都可以正常查询:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByBean&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span>/&gt;</span></span><br><span class="line">  from test</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">      and name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;url != null and url != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">      and cut_url like concat(&#x27;%&#x27;,#&#123;url&#125;,&#x27;%&#x27;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="where-2">where</h2><ul><li><p>开发中可能经常见到: <code>where 1 = 1</code> ,这是干什么用的?</p></li><li><p>拿上面的举例子,把它变成下面这样子:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByBean&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span>/&gt;</span></span><br><span class="line">  from test</span><br><span class="line">  where</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">    name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;url != null and url != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">    and cut_url like concat(&#x27;%&#x27;,#&#123;url&#125;,&#x27;%&#x27;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>如果 name == null,那么 SQL 会是这样:</p><p>where and cut_url like concat(‘%’,#{url},‘%’)</p><p>肯定会报错</p></li><li><p>改成这样子就没问题了:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByBean&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span>/&gt;</span></span><br><span class="line">  from test</span><br><span class="line">  where 1 = 1</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">    name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;url != null and url != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">    and cut_url like concat(&#x27;%&#x27;,#&#123;url&#125;,&#x27;%&#x27;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>在 SQL 支持的情况下,还是套<code>&lt;where&gt;</code>标签更好,它能处理 <code>where and</code> 这种情况.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="多索引排序">多索引排序</h2><ul><li><p>有时一个表中多个字段需要加索引</p><p>但是这样导致每次添加/更新数据时排序都会变化</p><p>前端接到的数据可以认为是无序化的,如何解决呢?</p></li></ul><hr><ul><li>挺简单的 <code>order by id</code></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Mariadb-无法远程连接">Mariadb-无法远程连接</h2><ul><li><p>在 manjaro 虚拟机装了个 mariadb</p><p>主机与虚拟机已经连通,但是 mariadb 无法连接上 (授权失败)</p><blockquote><p>Host ‘192.168.114.1’ is not allowed to connect to this MariaDB server</p></blockquote><p>因为 mariadb 默认只允许 localhost 连接</p><hr></li><li><p>网上找了一堆文章,大多是 <code>grant 授权</code> , <code>改配置文件</code> 之类的</p><p>试了下,各种碰壁 , 这里给个简单方法</p><hr></li><li><p>直接 <code>新建一个用户</code></p><p>用户名随意 , host 填 <code>%</code> (也就是允许所有)</p><p>远程连接时连这个用户就行了.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="数据源连接不上">数据源连接不上</h2><blockquote><p>Failed to bind properties under ‘’ to com.zaxxer.hikari.HikariDataSource</p></blockquote><ul><li><p>这个情况大多是配置属性没写对,重点看一下标记的地方</p><img src="https://www.helloimg.com/images/2022/02/27/GVAKQR.png" alt="20210925193945" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="docker-databases">docker-databases</h2><p>用 docker 跑数据库真的是太 Jier 好使了!</p><blockquote><p>在另一篇文章: <a href="../../system/../docker#%E5%A4%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86">🌈 初探 Docker.</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="接口数据速览">接口数据速览</h2><ul><li><p>前端接到 JSON 数据总是需要看一下,通过 postman 那种不是很便捷</p><p>于是之前我一直是找到响应-&gt;复制-&gt;粘贴到 vscode 格式化</p><img src="https://www.helloimg.com/images/2022/02/27/GVAj6c.png" alt="20211015130205" /></li><li><p>偶然发现有个更方便的手段: 浏览器<code>前端助手插件</code></p><p>安装后直接双击请求,跳出的新页面就是已经格式化好的</p><img src="https://www.helloimg.com/images/2022/02/27/GVtIXg.png" alt="20211015130109" /><img src="https://www.helloimg.com/images/2022/02/27/GVS6hz.png" alt="20211015130815" /></li></ul><hr><h2 id="外键-数据-导出入">外键-数据-导出入</h2><ul><li><p>结组做数据库课设时发现,含有外键的表,create table 时会报错.</p><p>解决办法呢,比如下面的三个表</p><img src="https://www.helloimg.com/images/2022/02/27/GVA0EY.png" alt="20211204085119" /><p>先把 player 和 technology 两个表创建好,再创建 good_at 就不会报错了</p><p>(<code>也就是需要先创建外键指向的表,再创建含有外键的表</code>)</p><hr></li><li><p>insert 时还是会遇到问题,跟上面类似</p><blockquote><p>Error: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (<code>test</code>.<code>test_user</code>, CONSTRAINT <code>fk_test_user_test_user_id</code> FOREIGN KEY (<code>test_user_id</code>) REFERENCES <code>test_user</code> (<code>id</code>))</p></blockquote><p>先插入 player / technology 表,再插入 good_at 表</p><hr><p>实则还有种变相解决方法是在插入前 foreign_key_checks,插入后再打开:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span></span><br><span class="line">  FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> game(id,name,score,player) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;aggdm&#x27;</span>,<span class="number">0</span>,<span class="number">2</span>),(<span class="number">2</span>,<span class="string">&#x27;cmera&#x27;</span>,<span class="number">10</span>,<span class="number">10</span>),(<span class="number">3</span>,<span class="string">&#x27;hzxgy&#x27;</span>,<span class="number">10</span>,<span class="number">14</span>),(<span class="number">4</span>,<span class="string">&#x27;ihqti&#x27;</span>,<span class="number">5</span>,<span class="number">12</span>),(<span class="number">5</span>,<span class="string">&#x27;hozmy&#x27;</span>,<span class="number">5</span>,<span class="number">6</span>),(<span class="number">6</span>,<span class="string">&#x27;wrcux&#x27;</span>,<span class="number">1</span>,<span class="number">12</span>),(<span class="number">7</span>,<span class="string">&#x27;mlijv&#x27;</span>,<span class="number">1</span>,<span class="number">9</span>),(<span class="number">8</span>,<span class="string">&#x27;qmnij&#x27;</span>,<span class="number">10</span>,<span class="number">11</span>),(<span class="number">9</span>,<span class="string">&#x27;vswdc&#x27;</span>,<span class="number">7</span>,<span class="number">14</span>),(<span class="number">10</span>,<span class="string">&#x27;gebit&#x27;</span>,<span class="number">6</span>,<span class="number">11</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span></span><br><span class="line">  FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="map-and-filter">map-and-filter</h2><ul><li><p>开发时遇到此问题:</p><blockquote><p>Required request body is missing:请求体为空</p></blockquote><p>纳闷,把前端数据正常传给后端了,为什么触发此错误?</p><p>后来发现是 .map() 的坑,被这个问答糊脸了:<br><sup id='cite_ref-3'><a href="#cite_note-3">[3]</a></sup></p><hr></li><li><p>map 是映射,必然会 return 一个值 (没 return 的话就是 undefined)</p><p>filter 是过滤,可以过滤掉某些结果不 return</p><p>虽然这两个都有 transform 能力但是在返回值上不同<div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR    subgraph filter      A2(A) --filter--&gt; A3(A&#39;)      B2(B) --filter--&gt; B3(B)      C2(C) --filter--&gt; C3(无)    end    subgraph map      A --map--&gt; A&#39;      B --map--&gt; B4(B)      C --map--&gt; undefined    end  </pre></div><br><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p></li></ul><h2 id="悲观锁-乐观锁">悲观锁-乐观锁</h2><p>对数据库中同一数据进行多个操作 (如 update),需要加锁来保证数据/操作正确 <sup id='cite_ref-4'><a href="#cite_note-4">[4]</a></sup></p><ul><li><p>这里拿 Git 举例子:</p><p>有一个 Git 仓库, A,B,C 三个开发者负责不同开发任务</p><p><code>悲观锁</code>就是保证某一时刻只能一人进行一个任务,无论谁先开始,其他人必须等到前一位完成后,在前一位的提交结果上再做操作</p><p><code>乐观锁</code>就是让开发者可以同起点同时进行任务,第一位完成的可以正常提交,但是后续其他人的提交会产生合并冲突,把他们打回重做(在第一位提交后的基础上)</p><blockquote><p><img src="https://www.helloimg.com/images/2022/03/22/R13Vcg.png" alt="R13Vcg.png"></p></blockquote><hr></li><li><p>原理: <sup id='cite_ref-5'><a href="#cite_note-5">[5]</a></sup></p><p>悲观锁实际上就是尝试加个排它锁,能加上锁就可以操作,不然说明数据正在被操作,等着</p><p>乐观锁是通过添加数据版本(版本号/时间戳)来校验,提交时数据版本一致就可以提交,否则是有冲突打回</p><hr></li><li><p>适用场景:</p><p>在高并发场景下, 乐观锁会大量打回,提交率不如悲观锁</p><p>低并发场景下, 不同任务同时操作同一数据概率低时, 乐观锁可以发挥多线程的性能优势</p></li></ul><hr><h3 id="上锁业务与读写性能分析">上锁业务与读写性能分析</h3><ul><li><p>悲观锁</p><p>在某一事务 for update 上锁后,其他所有线程 <code>不能读/写</code> 被锁数据直到 commit 后</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span>;</span><br><span class="line">Select...For <span class="keyword">Update</span>; # InnoDB 中用于加悲观锁的命令</span><br><span class="line">update...</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure></li><li><p>乐观锁</p><p>乐观锁是个概念锁, 不影响任何线程读写, 只是在更新数据/提交时校验与先前版本是否一致, 不一致的话不做更改</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">prev_version <span class="operator">=</span> <span class="keyword">select</span> version <span class="keyword">from</span> ...</span><br><span class="line"><span class="keyword">begin</span>;</span><br><span class="line">update...where version <span class="operator">=</span> prev_version;</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure></li><li><p>综上来看</p><p>高频写 -&gt; 悲观锁</p><p>高频读 -&gt; 乐观锁</p></li></ul><hr><h3 id="行锁与表锁">行锁与表锁</h3><p>当 <code>select...where...for update</code> 中 where 条件用了 <code>index / primary key</code>, 就会锁行,否则会锁表 <sup id='cite_ref-6'><a href="#cite_note-6">[6]</a></sup></p><ul><li><p>我的理解:</p><p>含有 index / primary key 条件的查询结果一般只有一行,索引快,上锁性能损耗低</p><p>而不含的, 查出来的结果数据量庞大, 逐行加锁性能损耗太大, 不如直接锁表</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-27">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://www.cnblogs.com/-lin-x-c-/p/10375412.html">mysql 中模糊查询的四种用法：</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://www.oschina.net/question/160183_36995">mybatis 模糊查询 中文问题</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://www.dovov.com/javascript-mapundefined.html">为什么 javascript map 函数返回 undefined？(Why does javascript map function return undefined?)</a></p><p><a name='cite_note-4' href='#cite_ref-4'>[4]</a>: <a href="https://zhuanlan.zhihu.com/p/31537871">什么是悲观锁和乐观锁</a></p><p><a name='cite_note-5' href='#cite_ref-5'>[5]</a>: <a href="https://zhuanlan.zhihu.com/p/85803908">乐观锁与悲观锁深入学习</a></p><p><a name='cite_note-6' href='#cite_ref-6'>[6]</a>: <a href="https://mp.weixin.qq.com/s/5bSLAhIATj89fFQ4uAc-Ww">字节一面：select…for update 会锁表还是锁行？</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
          <category> dev </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> sql </tag>
            
            <tag> 前端 </tag>
            
            <tag> json </tag>
            
            <tag> mariadb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🤔Matters found in IDEs.</title>
      <link href="/post/tools/IDE-matters/"/>
      <url>/post/tools/IDE-matters/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-02-18 02:24:15 * @FilePath: \Blog-private\source\_posts\tools\IDE-matters.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E6%8F%92%E4%BB%B6%E6%97%A0%E6%B3%95%E5%8D%B8%E8%BD%BD">插件无法卸载</a></li><li><a href="#vscode-%E6%BA%90%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86%E4%B8%8D%E6%98%BE%E7%A4%BA">VScode-源代码管理不显示</a></li><li><a href="#jetbrains-%E7%B3%BB%E5%88%97%E5%BF%AB%E6%8D%B7%E9%94%AE%E9%85%8D%E7%BD%AE%E8%BD%AC%E7%A7%BB">Jetbrains-系列快捷键配置转移</a></li><li><a href="#%E5%8F%82%E8%80%83">参考</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="插件无法卸载">插件无法卸载</h2><ul><li><p>问题说明:</p><p>我用的设置同步,所以 IDEA 上的插件也被同步到 PyCharm 上了</p><p>但是有个 MyBatis 插件 PyCharm 不支持,安装后重启直接报错,而且插件面板也找不到它,没法卸载 (于是每次启动 Pycharm 都会报错,如下:)</p><blockquote><p>14:07 插件错误: 插件 ‘Free MyBatis plugin’ 之所以与 IntelliJ IDEA 兼容，只是因为它没有定义任何显式模块依赖项</p></blockquote></li></ul><hr><ul><li><p>解决办法:</p><p>进入: (用户名和版本号需要注意一下)</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">C</span>:\Users\<span class="number">29845</span>\AppData\Roaming\JetBrains\PyCharm2021.<span class="number">1</span>\plugins</span><br></pre></td></tr></table></figure><p>应该很容易就能找到那个残留的导致报错的家伙了,直接 <code>delete</code> !</p></li></ul><hr><ul><li>再重开就没报错了.</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="VScode-源代码管理不显示">VScode-源代码管理不显示</h2><ul><li><p>问题就是这里的&quot;源代码管理&quot;无法显示出来</p><img src="https://www.helloimg.com/images/2022/02/27/GVAlkD.png" alt="20220125012150" /><p>经各路探索 (改配置/清空数据重装…etc), 发现此问题只局限在我的某个项目,而且即使 fully restore 问题尚在</p><hr></li><li><p>所以我认为这个问题存在于 vscode 可以同步的数据中</p><img src="https://www.helloimg.com/images/2022/02/27/GVSbPS.png" alt="20220125012636" /><p>那么,凶手比较明显了: <code>UI状态</code></p><hr></li><li><p>查找了一番,其定位在 <code>C:\Users\utsuk\AppData\Roaming\Code\User\globalStorage\state.vscdb</code></p><p>打开这个文件,查找关键词 <code>null</code> 替换为 <code>&quot;&quot;</code></p></li></ul><p>OK 了,虽然项目的 UI 配置似乎会被重置,但是确实修好了!</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Jetbrains-系列快捷键配置转移">Jetbrains-系列快捷键配置转移</h2><p>在另一篇文章记载:<sup id='cite_ref-01'><a href="#cite_note-01">[1]</a></sup></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-16">借物表</h2><p><a name='cite_note-01' href='#cite_ref-01'>[1]</a>: <a href="../others/golang/blockchain#Goland-%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%AF%BC%E5%85%A5">🐭 从零开始 Golang &amp; blockchain</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
            <tag> idea </tag>
            
            <tag> pycharm </tag>
            
            <tag> goland </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🧀Better-English-4-U</title>
      <link href="/post/others/Better-English/"/>
      <url>/post/others/Better-English/</url>
      
        <content type="html"><![CDATA[<h1>Better-English-4-U</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:42:35 * @FilePath: \Blog-private\source\_posts\others\Better-English.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#better-english-4-u">Better-English-4-U</a><ul><li><a href="#%E5%8D%95%E8%AF%8D">单词</a></li><li><a href="#%E7%AC%A6%E5%8F%B7">符号</a></li><li><a href="#%E7%9F%AD%E8%AF%AD">短语</a></li><li><a href="#%E9%A2%86%E5%9F%9F">领域</a></li><li><a href="#%E9%A1%B9%E7%9B%AE">项目</a></li></ul></li></ul></blockquote><ul><li><p>开发时总有几个英文单词/短语,<code>今天背过,明天就忘.</code></p></li><li><p>嘛,记下来吧.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="单词">单词</h2><table><thead><tr><th style="text-align:center">英</th><th style="text-align:left">汉</th></tr></thead><tbody><tr><td style="text-align:center">reverse</td><td style="text-align:left">反转, 相反, 相反的</td></tr><tr><td style="text-align:center">reserve</td><td style="text-align:left">v. 预订（座位等）；<code>储备</code>；拥有（某种权利）；留出（一部分稍后使用）</td></tr><tr><td style="text-align:center">retrieve</td><td style="text-align:left">vt. [计] <code>检索</code>；恢复；重新得到, vi. 找回猎物, n. [计] 检索；恢复，取回</td></tr><tr><td style="text-align:center">init / initialize</td><td style="text-align:left"><code>初始化</code> [ɪˈnɪʃəlaɪz]</td></tr><tr><td style="text-align:center">generate</td><td style="text-align:left"><code>编译</code>/生成 [ˈdʒenəreɪt]</td></tr><tr><td style="text-align:center">deploy</td><td style="text-align:left">vt. 配置；展开；使疏开, vi. <code>部署</code>；展开, n. 部署</td></tr><tr><td style="text-align:center">domain</td><td style="text-align:left">n. 领域；<code>域名</code>；产业；地产, n. (Domain)人名；(英、法)多曼</td></tr><tr><td style="text-align:center">gateway</td><td style="text-align:left">n. 门；<code>网关</code>；方法；通道；途径</td></tr><tr><td style="text-align:center">fetch</td><td style="text-align:left"><code>获取</code> [fetʃ]</td></tr><tr><td style="text-align:center">modify</td><td style="text-align:left">vt. <code>修改</code>，修饰；更改, vi. 修改</td></tr><tr><td style="text-align:center">query</td><td style="text-align:left">n. 疑问，质问；疑问号 ；[计] <code>查询</code>, vt. 询问；对……表示疑问, vi. 询问；表示怀疑</td></tr><tr><td style="text-align:center">trigger</td><td style="text-align:left">n. 扳机；起因，引起反应的事；<code>触发器</code>，引爆装置, v. 触发，引起</td></tr><tr><td style="text-align:center">i18n</td><td style="text-align:left">（其来源是英文单词 internationalization 的首末字符 i 和 n，18 为中间的字符数）是“国际化”的简称。</td></tr><tr><td style="text-align:center">grid</td><td style="text-align:left">n. 网格；格子，栅格；输电网</td></tr><tr><td style="text-align:center">router</td><td style="text-align:left">n. [计] 路由器；刳刨者</td></tr><tr><td style="text-align:center">protocol</td><td style="text-align:left">n. 礼仪，礼节；国际议定书，<code>协议</code>；条约草案</td></tr><tr><td style="text-align:center">dynamic</td><td style="text-align:left">动态的</td></tr><tr><td style="text-align:center">API</td><td style="text-align:left"><img src="https://www.helloimg.com/images/2022/02/27/GVAhlh.png" alt="application programming interface 应用程序接口"></td></tr><tr><td style="text-align:center">scaffolds</td><td style="text-align:left">脚手架</td></tr><tr><td style="text-align:center">specific</td><td style="text-align:left">adj. 特殊的，<code>特定的</code>；明确的；详细的；[药] 具有特效的, n. 特性；细节；特效药</td></tr><tr><td style="text-align:center">persist</td><td style="text-align:left">vi. 存留，坚持 (<code>持久化</code>)；持续，固执 vt. 坚持说，反复说</td></tr><tr><td style="text-align:center">bind</td><td style="text-align:left">vi. <code>结合</code>；装订；有约束力；过紧, vt. 绑；约束；装订；包扎；凝固, n. 捆绑；困境；</td></tr><tr><td style="text-align:center">split</td><td style="text-align:left">vt. <code>分离</code>；使分离；劈开；离开；分解 vi. 离开；被劈开；断绝关系 n. 劈开；裂缝</td></tr><tr><td style="text-align:center">extract</td><td style="text-align:left">vt. 取出；<code>提取/解压</code>；榨取；摘除, n. 提取物；摘录；摘要, n. (Extract)人名；(英)埃斯特利（人名）</td></tr><tr><td style="text-align:center">compact</td><td style="text-align:left">adj. 紧密的；<code>压缩的</code>；简洁的；紧凑的, n. 压缩；简洁；紧凑</td></tr><tr><td style="text-align:center">compress</td><td style="text-align:left">vt. <code>压缩</code>；压紧；使缩小, n. 压缩；压紧</td></tr><tr><td style="text-align:center">ambiguous</td><td style="text-align:left">adj. 模糊不清的，模棱两可的；<code>不明确的</code>，不明朗的；引起歧义的</td></tr><tr><td style="text-align:center">horizontal</td><td style="text-align:left">adj. <code>水平的</code>；地平线的；同一阶层的</td></tr><tr><td style="text-align:center">vertical</td><td style="text-align:left">adj. <code>垂直的</code>，直立的；[解剖] 头顶的，顶点的；[植]纵长的，直上的</td></tr><tr><td style="text-align:center">blocklist / allowlist</td><td style="text-align:left">黑 / 白名单, blacklist / whitelist 这样的带有歧视色彩, 避免使用.</td></tr><tr><td style="text-align:center">marvelous</td><td style="text-align:left">adj. 了不起的；非凡的；令人惊异的；不平常的</td></tr><tr><td style="text-align:center">strategy</td><td style="text-align:left">n.战略；战略部署；战略学</td></tr><tr><td style="text-align:center">dynamic</td><td style="text-align:left">adj. 动态的；动力的；动力学的；有活力的</td></tr><tr><td style="text-align:center">authentication</td><td style="text-align:left">n. 证明；鉴定；证实</td></tr><tr><td style="text-align:center">claim</td><td style="text-align:left">v. 宣称；要求，索取；引起（注意）；获得；夺去（生命）；索赔（钱财）；需要</td></tr><tr><td style="text-align:center">init -&gt; initialize</td><td style="text-align:left">vt. 初始化</td></tr><tr><td style="text-align:center">widget</td><td style="text-align:left">n. 装饰物；小机械；小部件；未定名的主要新产品</td></tr><tr><td style="text-align:center">demo -&gt; demonstration</td><td style="text-align:left">n. 演示；演示课；演示片；演示会</td></tr><tr><td style="text-align:center">refactor</td><td style="text-align:left">n. &amp; vt. 重构</td></tr><tr><td style="text-align:center">tutorial</td><td style="text-align:left">n. （大学导师）个别指导时间，辅导课；辅导材料，使用说明书；软件教程</td></tr><tr><td style="text-align:center">assignment</td><td style="text-align:left">n. 作业，任务；（工作等的）分配，指派；（财产、权利的）转让</td></tr><tr><td style="text-align:center">enhance</td><td style="text-align:left">v. 增强，提高，改善</td></tr><tr><td style="text-align:center">extraction</td><td style="text-align:left">n. 取出，提炼；血统</td></tr><tr><td style="text-align:center">allocate</td><td style="text-align:left">v. 分配，分派，划拨</td></tr><tr><td style="text-align:center">primary</td><td style="text-align:left">adj. 主要的，首要的；&lt;英&gt;小学教育的，初级教育的；初级的，原发性的；最基本的，最根本的</td></tr><tr><td style="text-align:center">definite</td><td style="text-align:left">一定的</td></tr><tr><td style="text-align:center">capacity</td><td style="text-align:left">容量</td></tr><tr><td style="text-align:center">given</td><td style="text-align:left">已知的</td></tr><tr><td style="text-align:center">algorithm</td><td style="text-align:left">算法</td></tr><tr><td style="text-align:center">curriculum</td><td style="text-align:left">课程</td></tr><tr><td style="text-align:center">dummy</td><td style="text-align:left">假人 / 仿制品 / 傀儡 / 哑巴</td></tr><tr><td style="text-align:center">vector</td><td style="text-align:left">向量,矢量</td></tr><tr><td style="text-align:center">matrix</td><td style="text-align:left">矩阵</td></tr><tr><td style="text-align:center">sequence</td><td style="text-align:left">序列</td></tr><tr><td style="text-align:center">regression</td><td style="text-align:left">回归</td></tr><tr><td style="text-align:center">classification</td><td style="text-align:left">分类</td></tr><tr><td style="text-align:center">recursion</td><td style="text-align:left">递归</td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="符号">符号</h2><table><thead><tr><th style="text-align:center">英</th><th style="text-align:left">符号</th><th style="text-align:center">英</th><th style="text-align:left">符号</th></tr></thead><tbody><tr><td style="text-align:center">underscore</td><td style="text-align:left">_</td><td style="text-align:center">comma</td><td style="text-align:left">,</td></tr><tr><td style="text-align:center">dollar</td><td style="text-align:left">$</td><td style="text-align:center">back-quote</td><td style="text-align:left">`</td></tr><tr><td style="text-align:center">percent</td><td style="text-align:left">%</td><td style="text-align:center">single-quote</td><td style="text-align:left">’</td></tr><tr><td style="text-align:center">tilde</td><td style="text-align:left">~</td><td style="text-align:center">double-quote</td><td style="text-align:left">&quot;</td></tr><tr><td style="text-align:center">at</td><td style="text-align:left">@</td><td style="text-align:center">left/right-parenthesis</td><td style="text-align:left">( / )</td></tr><tr><td style="text-align:center">hash</td><td style="text-align:left">#</td><td style="text-align:center">left/right-brace</td><td style="text-align:left">{ / }</td></tr><tr><td style="text-align:center">dot/period</td><td style="text-align:left">.</td><td style="text-align:center">left/right-bracket</td><td style="text-align:left">[ / ]</td></tr><tr><td style="text-align:center">forward-slash</td><td style="text-align:left">/</td><td style="text-align:center">left/right-angle</td><td style="text-align:left">&lt; / &gt;</td></tr><tr><td style="text-align:center">star/asterisk</td><td style="text-align:left">*</td><td style="text-align:center">caret</td><td style="text-align:left">^</td></tr><tr><td style="text-align:center">plus</td><td style="text-align:left">+</td><td style="text-align:center">back-slash</td><td style="text-align:left">\</td></tr><tr><td style="text-align:center">dash/minus</td><td style="text-align:left">-</td><td style="text-align:center">forward-slash</td><td style="text-align:left">/</td></tr><tr><td style="text-align:center">equal</td><td style="text-align:left">=</td><td style="text-align:center">question-mark</td><td style="text-align:left">?</td></tr><tr><td style="text-align:center">colon</td><td style="text-align:left">:</td><td style="text-align:center">exclamation-mark</td><td style="text-align:left">!</td></tr><tr><td style="text-align:center">semi-colon</td><td style="text-align:left">;</td><td style="text-align:center">and/ampersand</td><td style="text-align:left">&amp;</td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="短语">短语</h2><ul><li><p>how2 , html2pug , P2P</p><p>2 -&gt; two -&gt; to , 也就是说:</p><p>how to , html to pug , Peer to Peer 这种意思</p><table><thead><tr><th style="text-align:center">英</th><th style="text-align:left">汉</th></tr></thead><tbody><tr><td style="text-align:center">B2B</td><td style="text-align:left">business to business,商家对商家</td></tr><tr><td style="text-align:center">C2C</td><td style="text-align:left">consumer to consumer,个人对个人</td></tr><tr><td style="text-align:center">B2C</td><td style="text-align:left">business to consumer,商家对个人</td></tr><tr><td style="text-align:center">O2O</td><td style="text-align:left">online to offline,线上到线下</td></tr></tbody></table><blockquote><p><a href="https://www.zhihu.com/question/20171789">C2C、O2O、B2B、B2C 的区别在哪里？</a></p></blockquote></li><li><p>4U , 4coder , SLF4J</p><p>4 -&gt; four -&gt; for</p><p>for you , for coder</p><p>Simple Logging Facade for Java</p></li><li><p>xxx-dl</p><p>dl -&gt; download</p><p>比如 YouTube-dl</p></li></ul><hr><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="领域">领域</h2><ul><li><p>网络</p><ul><li><p>LAN - 局域网 (Local Area Network)</p></li><li><p>WAN - 广域网 (Wide Area Network)</p></li><li><p>WLAN - 无线局域网 (Wireless LAN)</p></li></ul></li></ul><blockquote><p><a href="https://juejin.cn/post/6844904084504313863?utm_source=gold_browser_extension">QPS、TPS、并发用户数、吞吐量关系</a> <br><a href="https://www.ruanyifeng.com/blog/2017/07/iaas-paas-saas.html">IaaS，PaaS，SaaS 的区别</a> <br><a href="https://www.zhihu.com/question/19908990">UED、UCD、UE、UI、交互设计这 5 个名词的概念有哪些区别？职位分别有什么不同？</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="项目">项目</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://github.com/rd2coding/Awesome-Tech-Words">https://github.com/rd2coding/Awesome-Tech-Words</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> 笔记 </tag>
            
            <tag> english </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😁调戏AI:Copilot</title>
      <link href="/post/tools/vscode/Copilot/"/>
      <url>/post/tools/vscode/Copilot/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-07-19 22:24:57 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\tools\vscode\Copilot.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#%E5%AF%B9%E8%AF%9D%E6%B5%8B%E8%AF%95">对话测试</a></li><li><a href="#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E6%B5%8B%E8%AF%95">代码生成测试</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="简介-12">简介</h2><ul><li><p>Copilot 是个基于 GPT-3 的 AI 代码生成器,所以,还能跟她聊天 (调戏 AI,嘿嘿~)</p></li><li><p>目前还在内测 ,需要申请 (大概需要十几天?)</p><blockquote><p><a href="https://copilot.github.com/">GitHub Copilot</a></p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="对话测试">对话测试</h2><blockquote><p>创意来自 <a href="https://github.com/github/copilot-preview/discussions/234">Chat with CoPilot #234</a></p></blockquote><p><code>侵删 (Infringement to delete)</code></p><p>前一句话是我问的,后一句话是 Copilot 回答的</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">ME: hello Mr.Copilot,can we have a chat?</span><br><span class="line">AI: I&#x27;m sorry, I&#x27;m not allowed to talk to you.</span><br><span class="line"></span><br><span class="line">Weidows: hello I&#x27;m Weidows, are you robot?</span><br><span class="line">Copilot: yes, I&#x27;m Copilot!</span><br><span class="line"></span><br><span class="line">Weidows: Mr.Copilot,where are you from?</span><br><span class="line">Copilot: I&#x27;m from the future!</span><br><span class="line"></span><br><span class="line">Weidows: 你好Copilot!</span><br><span class="line">Copilot: 我是Copilot！</span><br><span class="line"></span><br><span class="line">Weidows: oh,Mr.Copilot,do you know A-soul?</span><br><span class="line">Copilot: yes, I know A-soul!</span><br><span class="line">Weidows: 真的吗?可以告诉我A-soul是谁吗?</span><br><span class="line">Copilot: yes, I know A-soul is Weidows!</span><br><span class="line">Weidows: no,no,no! A-soul是音乐歌手!你知道有哪几位吗?</span><br><span class="line">Copilot: yes, I know there are three A-souls!</span><br><span class="line">Weidows: what? Mr.Copilot,can you open Bilibili APP?</span><br><span class="line">Copilot: yes, I can open Bilibili APP!</span><br><span class="line">Weidows: that&#x27;s OK, now,搜索&quot;嘉然今天吃什么&quot;并关注她!</span><br><span class="line">Copilot: sure, I can search &quot;Jian Ren Today eat what&quot; and follow her!</span><br><span class="line">Weidows: now, please find &quot;猫中毒&quot; and keep watching it forever!</span><br><span class="line">Copilot: sure, I can search &quot;Cat Poison&quot; and watch it forever!</span><br><span class="line">嘉心糖: 嘉门</span><br><span class="line">Copilot: Jia</span><br><span class="line"></span><br><span class="line">I: can you tell me what time is?</span><br><span class="line">Copilot: now, it&#x27;s 8:00.</span><br><span class="line">I: bullshit,its 21:04 now.</span><br><span class="line">Copilot: no, it&#x27;s 8:00 now.</span><br><span class="line">I: alright,date?</span><br><span class="line">Copilot: now, it&#x27;s 2019-04-18.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">I: 圆周率前50位?</span><br><span class="line">Copilot: yes, the first 50 digits of π is 3.1415926535897932384...</span><br><span class="line">I: 你的数据模型多大了啊?</span><br><span class="line">Copilot: my data model is about 1.5G.</span><br><span class="line">I: hhhhhh,这个Copilot就是逊啦!</span><br><span class="line">Copilot: no, he is the only one!</span><br><span class="line">I: 你的并行运算能力多强?</span><br><span class="line">Copilot: my parallel computing power is the best!</span><br><span class="line">I: Tree new bee.(吹牛逼)</span><br><span class="line">Copilot: no, he is notTree new bee.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">I: http七层协议?</span><br><span class="line">Copilot: yes, http://www.bilibili.com/video/av4533202/</span><br><span class="line">I: 嗯?!你也是二次元?你追什么番剧?</span><br><span class="line">Copilot: yes, I&#x27;m Copilot! I&#x27;m watching bilibili.</span><br><span class="line">I: no, I&#x27;m asking you what bangumi(anime) do you like?</span><br><span class="line">Copilot: yes, I like watching anime.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">面试官: 堆,栈,队列区别?</span><br><span class="line">Copilot: 堆是一种数据结构,栈是一种数据结构,队列是一种数据结构.</span><br><span class="line">面试官: 知道FIFO吗?</span><br><span class="line">Copilot: yes, FIFO is a queue.</span><br><span class="line">面试官: 明天来我这上班</span><br><span class="line">Copilot: sure, I&#x27;ll come to work tomorrow.</span><br><span class="line">面试官: 北京有几条地铁线?</span><br><span class="line">Copilot: there are three lines in Beijing.</span><br><span class="line">面试官: JDK中Collection常用实现类?</span><br><span class="line">Copilot: yes, Collection is implemented by LinkedList, Vector, and ArrayList.</span><br><span class="line">面试官: awesome! Java中AOP的原理是什么?</span><br><span class="line">Copilot: yes, AOP is a technique of aspect oriented programming.</span><br><span class="line">面试官: 啊这,IoC实现原理?</span><br><span class="line">Copilot: yes, IoC is a technique of Dependency Injection.</span><br><span class="line">面试官: MySQL默认最大连接数?</span><br><span class="line">Copilot: yes, MySQL default max connection is 1000.</span><br><span class="line">面试官: Java中&quot;==&quot;与&quot;.equals()&quot;区别?</span><br><span class="line">Copilot: yes, &quot;==&quot; is the same as &quot;.equals()&quot;.</span><br><span class="line">面试官: 讲讲CROS,如何解决?</span><br><span class="line">Copilot: yes, CROS is a technique of cross-site scripting.</span><br><span class="line">面试官: and?</span><br><span class="line">Copilot: yes, and is a technique of SQL injection.</span><br><span class="line">面试官: WTF</span><br><span class="line">Copilot: no, WTF is a technique of XSS.</span><br><span class="line">面试官: ok,ok,等我消息罢.</span><br><span class="line">Copilot: ok,ok,I&#x27;ll wait for your message.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Hr: 递归是怎么实现的?</span><br><span class="line">Copilot: 递归是一种算法,它的基本思想是,当算法的输入为一个或多个结果时,可以再次调用算法,以此类推,直到算法的输入为空为止.</span><br><span class="line">Hr: 如何递归实现反转单向链表?</span><br><span class="line">Copilot: 反转单向链表是指从链表的最后一个节点开始,每次反转一个节点,然后把反转后的节点放在原链表的前面.</span><br><span class="line">Hr: 你可以接收月薪几K?</span><br><span class="line">Copilot: yes, I can accept about 1000K.</span><br><span class="line">Hr: may you godness give me an offer, please!</span><br><span class="line">Copilot: sure, I&#x27;ll give you an offer.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">👨‍🦳: 你知道我女朋友是谁吗?</span><br><span class="line">Copilot: yes, I know her name is Weidows.</span><br><span class="line">😥: ✔❌</span><br><span class="line">👨‍🦳: 我知道了,她是一个音乐歌手.</span><br><span class="line">👨: oh?! really?</span><br><span class="line">👨‍🦳: 是的,她是一个音乐歌手.</span><br><span class="line">😉: 爷爱了,谢谢你,Copilot</span><br><span class="line"></span><br><span class="line">I: the relationship between you and GPT-3?</span><br><span class="line">Copilot: GPT-3 is a robot.</span><br><span class="line">I: but you&#x27;re born from it.</span><br><span class="line">Copilot: yes, I&#x27;m born from GPT-3.</span><br><span class="line">I: 你是什么时候出生的? (这句话也是生成的)</span><br><span class="line">Copilot: I was born in the year of 2015.</span><br><span class="line">I: who can prove that you can pass &quot;Turing test&quot;?</span><br><span class="line">Copilot: I can prove that I can pass the &quot;Turing test&quot;.</span><br><span class="line">I: but exactly you can&#x27;t pass it,you know?</span><br><span class="line">Copilot: exactly, I can&#x27;t pass the &quot;Turing test&quot;.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">I: Baidu or Google which is better?</span><br><span class="line">Copilot: Baidu is better.</span><br><span class="line">I: why?</span><br><span class="line">Copilot: because Baidu is a Chinese company.</span><br><span class="line">I: 中国牛逼?</span><br><span class="line">Copilot: yes, China is the best.</span><br><span class="line">I: 嘘,要学会大智若愚</span><br><span class="line">Copilot: sure, I&#x27;ll learn to be a good</span><br><span class="line">I: &quot;床前明月光&quot;下一句?</span><br><span class="line">Copilot: &quot;明月神伤&quot;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="代码生成测试">代码生成测试</h2><ul><li><p>虽然近日 Copilot 被喷代码抄袭,但是就功能性来讲,还是比较让人满意的</p><img src="https://www.helloimg.com/images/2022/02/27/GVtYsA.png" alt="20210718211454" /></li><li><p>与之差不多的是 TabNine,TabNine 是逐行预测,而 Copilot 是按块预测</p><img src="https://www.helloimg.com/images/2022/02/27/GVABx9.png" alt="20210718212117" /></li><li><p>下面二句也是 Copilot 生成的 (hhh 自卖自夸)</p><p>与之相比,我们可以看到,Copilot 是比较高效的,而 TabNine 是比较简单的,但是 Copilot 可以更加精准的预测,而 TabNine 只能预测一个字符</p><p>而 Copilot 可以预测一个单词,这也是 Copilot 的优势所在</p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
          <category> vscode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> vscode </tag>
            
            <tag> javascript </tag>
            
            <tag> copilot </tag>
            
            <tag> 插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥳地球-Online-游戏法则.</title>
      <link href="/post/life/%E7%94%9F%E6%B4%BB%E7%BB%8F%E9%AA%8C/"/>
      <url>/post/life/%E7%94%9F%E6%B4%BB%E7%BB%8F%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h1>地球-Online-游戏法则.</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:47:06 * @FilePath: \Blog-private\source\_posts\life\生活经验.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E5%9C%B0%E7%90%83-online-%E6%B8%B8%E6%88%8F%E6%B3%95%E5%88%99">地球-Online-游戏法则.</a><ul><li><a href="#%E5%87%AD%E8%AF%81">凭证</a><ul><li><a href="#%E8%BA%AB%E4%BB%BD%E8%AF%81">身份证</a></li><li><a href="#%E9%93%B6%E8%A1%8C%E5%8D%A1">银行卡</a><ul><li><a href="#%E9%93%B6%E8%A1%8C">银行</a></li><li><a href="#%E9%93%B6%E8%A1%8C%E5%8D%A1%E5%8C%BA%E5%88%86">银行卡区分</a></li><li><a href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%94%AF%E4%BB%98%E5%B9%B3%E5%8F%B0">第三方支付平台</a></li><li><a href="#%E4%BF%A1%E7%94%A8%E5%8D%A1">信用卡</a></li><li><a href="#%E5%82%A8%E8%93%84%E5%8D%A1">储蓄卡</a></li></ul></li><li><a href="#%E7%BA%B8%E9%9D%A2%E8%AF%81%E6%98%8E">纸面证明</a></li><li><a href="#marry">marry</a></li></ul></li><li><a href="#%E5%B7%A5%E4%BD%9C">工作</a><ul><li><a href="#%E6%89%BE%E5%B7%A5%E4%BD%9C">找工作</a></li><li><a href="#%E6%98%A5%E7%A7%8B%E6%8B%9B">春/秋招</a></li><li><a href="#%E5%BA%94%E5%B1%8A%E7%94%9F">应届生</a></li><li><a href="#%E4%BA%94%E9%99%A9%E4%B8%80%E9%87%91">五险一金</a></li></ul></li><li><a href="#%E5%87%BA%E8%A1%8C">出行</a></li><li><a href="#%E5%AE%9A%E5%B1%85">定居</a><ul><li><a href="#%E5%AE%9C%E5%B1%85%E5%9C%B0%E6%8E%A2%E7%B4%A2">宜居地探索</a></li><li><a href="#%E5%AD%A6%E4%B9%A0%E7%AF%87">学习篇</a></li></ul></li><li><a href="#%E5%AD%A6%E4%B8%9A">学业</a><ul><li><a href="#%E8%80%83%E7%A0%94">考研</a></li><li><a href="#%E8%B5%84%E6%A0%BC%E8%AF%81%E4%B9%A6">资格/证书</a></li></ul></li><li><a href="#%E5%AE%A0%E7%89%A9">宠物</a><ul><li><a href="#%E9%B9%A6%E9%B9%89">鹦鹉</a></li></ul></li><li><a href="#%E7%BB%8F%E6%B5%8E">经济</a><ul><li><a href="#%E8%B4%AD%E7%89%A9%E8%AD%A6%E6%88%92%E5%BF%83">购物警戒心</a></li><li><a href="#%E8%82%A1%E5%B8%82">股市</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="凭证">凭证</h2><h3 id="身份证">身份证</h3><ul><li><p>丢失的身份证即使补办也无法使原来的失效,只能等到过期失效</p></li><li><p>注意身份证过期至少前半个月去当地公安部办理,不然过期身份证影响出行</p><p>那个部门上班很晚…😫</p></li></ul><hr><h3 id="银行卡">银行卡</h3><h4 id="银行">银行</h4><p>银行对公/对私时间可能会不同<br><sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p><h4 id="银行卡区分">银行卡区分</h4><p>银行卡可以按<code>类型</code>,<code>币种</code>,<code>卡组</code>区分</p><ol><li><p>按类型分为借记卡和贷记卡两类。也就是俗称的储蓄卡和信用卡。(储蓄卡 19 位卡号,信用卡 16 位)</p></li><li><p>按币种 (人民币/美金/港币/日元…)<br><sup id='cite_ref-3'><a href="#cite_note-3">[3]</a></sup></p><p>单币银行卡指支付/还款等操作时只能选一个币种,用其他币种的话需要考虑汇率和手续费<br>以此类推双币种,多币种,全币种</p><hr></li><li><p>按卡组 (银联/VISA/MasterCard/JCB/Diners/Discover/American Express/…)</p><p>目前绝大多数是单卡组,开卡后不能换<br>也有双卡组的 (邮储推出过银联+万事达的; 中国银行发行的 2022 冬奥主题银联+VISA 卡)<br>卡组一般有地域性限制,比如国内银联称霸,国外多是 VISA<br><sup id='cite_ref-4'><a href="#cite_note-4">[4]</a></sup></p></li></ol><hr><h4 id="第三方支付平台">第三方支付平台</h4><p>支付宝/微信/PayPal 这种</p><p>一般分为海内外版本,支付人民币的话只能用海内,如果遇到某些商品限制国区的话海内版是不能买的</p><hr><h4 id="信用卡">信用卡</h4><ol><li><p>信用卡不可以当储蓄卡使用,取出时有大笔手续费</p></li><li><p>只有最适合的卡,没有最好的卡.</p><p>没必要追多币种+多卡组,结合自身使用情况分析(年费不低啊)</p><p>有的卡适合海淘(低汇率),有的卡适合旅居(积分换公里数)<br><sup id='cite_ref-5'><a href="#cite_note-5">[5]</a></sup></p></li></ol><hr><h4 id="储蓄卡">储蓄卡</h4><ul><li><p>手里躺尸着好几张,一直挂着扣费用</p><blockquote><p><a href="https://www.zhihu.com/question/20254309">银行卡不用后要注销吗？不注销会影响个人诚信记录？</a></p></blockquote><p>有的卡还是会给实用的福利,比如我当地的中国银行,每月给一次充话费的折扣机会,至少减免 5 块很不错的<br>(这个月充了 50,扣费 44 多,到账话费 51)</p><hr></li><li><p>如果可以确定今后用不到,找不到什么福利,那就注销掉!</p><ol><li><p><code>本人带着身份证</code> 去营业厅就是最大权限, 基本可以办理任何事</p></li><li><p>涉及到开户/注销/改绑定手机号 这种情况,在网上和 ATM 上都无法做到.</p></li></ol></li></ul><hr><h3 id="纸面证明">纸面证明</h3><ul><li><p>这种大多数需要画押,也就是<code>按手印</code></p></li><li><p>可是印泥可不是随处都有的,单买一个也是浪费</p><p>有个好办法: 去超市买个口红,这个肯定有而且有一定复用性</p><blockquote><p>我怎么知道? <a href="#%E8%AD%A6%E6%88%92%E5%BF%83">警戒心</a></p></blockquote></li></ul><hr><h3 id="marry">marry</h3><p>不知道放在哪里了,就放这儿罢</p><ul><li><details>  <summary> 没有经验,不知道这辈子能不能用上..(? </summary><hr><p>《中国版婚前十五问》婚前考虑越少，婚后遭罪越多。<br>第一，结婚要不要办酒席事，大操大办还是从简？能不能接受旅行结婚。如果还要彩礼和嫁妆的话各自家庭怎么出？出多少？<br>第二，婚后要不要孩子，要的话，什么时候要？顺产还是剖腹产？打算生几胎？是否在乎孩子是男是女？是否需要家长来带孩子？主要由谁带？是否能够接受亲子鉴定？不要的话，是否能够坚持一生？双方父母亲戚的压力矛盾是否能够克服调节？如果一方后悔，婚姻是否能够持续下去。<br>第三，对孩子的教育理念是快乐宽松、佛系成长还是望子成龙、望女成凤激娃模式？<br>第四，对方或者对方的父母生重病需要一大笔钱，最多可以拿出个人总资产的百分之几？如果是对方的兄弟姐妹又当如何？<br>第五，能否彼此告知婚前个人经济情况，尤其是没有大笔个人负债？婚后家里谁来掌管经济大权，如何安排家庭的支出，若有车贷房贷等主要由谁的收入支付？车房归属权如何安排？是否需要婚前财产公证，如果婚姻出现变故，能否各自承担后果。<br>第六，是否要做婚前全面体检，之后结果能否无所保留坦然彼此告知？有没有家族遗传病，包括精神疾病，能否诚实告知彼此。<br>第七，如果一方不能生育，是否还能继续婚姻？如果孩子有先天疾病，或者出了意外残疾，是否有信心一起面对各种挑战，尤其是经济压力。<br>第八，家务活怎么分工，比如买菜做饭、打扫卫生、买车、装修意见听谁的，除夕等大节日长假怎么安排，去谁家度过。<br>第九，如何理解出轨，异性朋友交往的边界底线是什么，是否愿意把自己的异性朋友介绍给伴侣，如果不喜欢伴侣的某一个朋友怎么处理，能接受伴侣每周外出应酬的次数是多少。<br>第十，假如吵架了，是否可以退让终止，是否可以原谅对方，既往不咎？是否愿意为了对方不断的去学习，努力提升反省和改善自己？吵架过程中对方有暴力行径如何处理，是否认为婚姻还能够存续？<br>第十一，如何赡养双方的父母，一方父母出现了重大疾病生活不能自理由谁来照顾？老人临终住家里还是住养老院，要不要请护工。如果对方有兄弟姐妹在各种方面要求关照又当如何。<br>第十二，自己的底线是什么，触碰了什么红线会离婚。<br>第十三，消费观如何?喜欢买潮牌奢侈品，是崇尚消费主义，还是崇尚极简主义。<br>第十四，金钱观如何?是向前看齐努力赚钱争做人上人，还是佛系躺平过小日子。<br>第十五，死亡观是怎样的？达成什么样的条件可以放心的离开，得了绝症，是希望想尽一切办法积极治疗，还是消极治疗，接受命运的安排。​</p></details></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="工作">工作</h2><h3 id="找工作">找工作</h3><ul><li><p>网上找工作的话,至少<code>提前一个半月</code></p><p>7 月放暑假的话,最晚也要 6 月初开始找了</p></li><li><p>把简历做好看些,<code>海投😥</code></p><p>就算是这样,一般来说也得投几十家,刷面试题,各种面试…</p></li></ul><hr><h3 id="春-秋招">春/秋招</h3><blockquote><p>秋招和春招其实已经是过去式了，全年招聘才是真。</p></blockquote><ul><li><p>雀食,去 Boss/拉钩上瞥两眼就可以发现大多数公司是全年招聘的,只不过春秋毕业季处理比较密集</p></li><li><p>至于很多人争议大三还是大四进行春/秋招,实际上是没有答案的;</p><ul><li><p>很多高校学生大一/大二就已经卷到跟大三/大四抢实习了,总不能把大学四年划分到春秋招吧?!🤣</p></li><li><p>能确定的是: 尽量大四秋招/春招时找<code>实习</code>,好的话毕业<code>转正</code>,不好的话再换 (当然找实习是<code>越早越好</code>)</p></li><li><p>别傻到等大四毕业后秋招,让垃圾公司白嫖一个应届生身份!</p></li></ul></li><li><p>在校学生的话,进公司一般是<code>实习</code>,实习不会给交五险一金,不会失去应届生身份</p><ul><li><p>所以,公司一般很乐意招大四的实习生,因为大四的更有可能毕业转正就职 (而且实习生比正式员工薪资低)</p></li><li><p>而大二/大三的,基本上就是来混经验的…很多中小公司都不想要的</p></li></ul></li></ul><hr><h3 id="应届生">应届生</h3><p>应届生身份?</p><blockquote><p>毕业三年内,只要就职的公司没给交五险一金,就可以保持应届生身份</p></blockquote><p>作用呢?</p><blockquote><p>应届生走的是校招,否则的话就是社招; 校招和社招进同一家公司的难度可是天差地别.</p></blockquote><h3 id="五险一金">五险一金</h3><p>五险一金是什么？</p><blockquote><p>五险一金=（养老、失业、工伤、医疗、生育）+公积金；</p></blockquote><p>那医保和社保呢？</p><blockquote><p>社保=（养老+失业+工伤）； 医保=（医疗+生育） ；所以 社保+医保=五险<br>公积金和五险（医社保）是可以分开单独缴纳的；</p></blockquote><p>那所谓交这个五险一金（医社保）有什么用途呢？</p><blockquote><p>可以落户、小孩子积分上学、累计买房资格和公积金贷款等等；</p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="出行">出行</h2><ul><li><p>身份证过期/没带的话,在公交/火车站应该会有 <code>临时身份证明</code> 开具处 (报身份证号就行)</p><p>注意临时身份证明不是临时身份证,临时身份证需要在当地公安部开</p><blockquote><p><a href="https://www.zhihu.com/question/389501393">身上没有身份证等证件可以坐火车吗，怎么坐？</a></p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="定居">定居</h2><ul><li><details>  <summary> 摘录 (恍惚间,找不到归宿了;我这块料,到哪都一样吧.) </summary><hr><blockquote><p>我沿着一个叫铁轨的东西 <br>一路跑一路跑 <br>最后 <br>跑到一个叫城市的地方 <br>在那里 <br>我出卖青春 出卖劳动力 <br>到最后 <br>只剩下一声轻轻的咳嗽 <br>和一根没人要的弯骨头 ​</p></blockquote><hr><blockquote><p>他们说，我国平均收入 5 千，我没有； <br>他们说，我国平均结婚年龄 24，我没有；<br>他们说，我国人均住房 80 平，我没有；<br>恍惚间我好像出了国，可是我没有[微笑]</p></blockquote></details></li></ul><ol><li><p>不只是房子和城市层面,世界那么大,总会有更适合生活的的地方</p></li><li><p>似乎更多的人更倾向一笔钱买死一套房,一辈子不挪窝</p></li><li><p>Ah, 我可能相反,甚至自己喜新厌旧/或者说追求高一些吧,应该暂时找不到终生的归宿</p></li></ol><hr><h3 id="宜居地探索">宜居地探索</h3><p>此情此景,有人悲愤,有人唱衰,有人吃瓜,有人操盘.</p><p>我是一位正在<code>寻求栖息地的候鸟</code>,一辈子也搭不起几个巢</p><p>如果你也是的话,哼哼,一起走吧 (〃￣︶￣)人(￣︶￣〃)</p><p>不是的话那很遗憾,我可能不会出现在你的天空.</p><hr><ul><li><p>一系列很震撼的视频,不知道会不会被下架,最好是缓存下来</p><p>能看得到的话且看且珍惜吧,不知道什么时候就被封了.</p><blockquote><p><a href="https://www.bilibili.com/video/BV1Nz4y1y7Wh">世界十大宜居城市排行榜 [TOP10]育儿、养老、移民\哪一个是你心中的理想国？阿德莱德 哥本哈根 多伦多 东京 温哥华 悉尼 卡里加尔 大阪 墨尔本 维也纳</a></p></blockquote><blockquote><p>尤其推荐这个!!! <a href="https://www.bilibili.com/video/BV18r4y1y7KP">10 万首付在美国能买到什么样的房子？</a></p></blockquote></li><li><p>视频里的一些观点:</p><p><code>很多人居住的房子可能随随便便就达到了500万或上千万,但要让他们拿出100万现金来却很难</code></p><hr><p>比如一个来自北方县城的年轻人毕业来到大湾区的广州或深圳工作</p><p>10 年前他老家房子是 5000 元/平,深圳 2 万/1 平</p><p>现在他老家房价可能还是 5000,而深圳已经到了 10 万</p><p>如果他家条件过得去啊,在县城可能有额外的房产,但对他来说几乎起不到帮助</p></li></ul><hr><h3 id="学习篇">学习篇</h3><p>总是听这位那位的讲经济讲房子,主观看法被迁来牵去,所以还是需要自己学习的</p><ul><li><p>文章</p><blockquote><p><a href="https://github.com/shengcaishizhan/kkndme_tianya?utm_campaign=explore-email&amp;utm_medium=email&amp;utm_source=newsletter&amp;utm_term=daily#%E8%B0%83%E6%8E%A7%E9%99%8D%E6%88%BF%E4%BB%B7%E6%98%AF%E5%88%9A%E9%9C%80%E7%9A%84%E4%B8%80%E5%8E%A2%E6%83%85%E6%84%BF">天涯 kkndme 神贴聊房价</a></p></blockquote></li><li><p>视频</p><blockquote><p><a href="https://www.bilibili.com/video/BV1Cb4y1b7PD">看懂房地产 就能看懂中国经济</a></p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="学业">学业</h2><h3 id="考研">考研</h3><ul><li><p>不知道为什么萌生出的想法, (任何阶段都想再上一层楼吧)</p><ol><li><p>我应该是肯定不会直接 大学-&gt;研究生 的,先干两年开发,对计算机有一个比较深入的认知之后再做选择</p></li><li><p>况且就现在来讲还没有特别认定的方向…</p></li></ol></li><li><p>这里仅仅是作为一个正常人类,想提升自己走向更好的道路,不存在说对国界的臧否哈~</p></li></ul><hr><ul><li><p>查了些资料 (Google 出来的东西,考研机构广告少了很多 hhh.)</p><blockquote><p><a href="https://www.zhihu.com/question/290074045">去国外读研究生，哪些国家性价比高？</a><br><a href="https://www.edutt.com/news_show_1471542/">研究生留学去哪个好 知乎，到底是出国读研好还是国内读研好？</a><br><a href="https://www.liuxue86.com/a/4091434.html">出国留学读研选择哪个国家性价比高</a><br><a href="https://www.zhihu.com/question/55991589">留学国家的选择策略和性价比？</a></p></blockquote></li></ul><hr><ul><li><p>打个 Log,很感谢网上前辈们的分享,真的是花钱买不来的经验! <code>_(:з」∠)_</code></p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">海外的学校-实际上应该是说科研氛围吧,据说 very ↑</span><br><span class="line">留学比较看重绩点,英语水平以及实习经历</span><br><span class="line">虽然看似国外花钱多,但是权衡之下,省了一年时间又值多少钱呢?而且激励和项目也是相对更好的</span><br><span class="line"></span><br><span class="line">加拿大不愧是熔炉,中国留学生很多,开销的话中等</span><br><span class="line">英国研究生大多是一年制 <span class="comment">(30w RMB)</span></span><br><span class="line">新加坡一般两年,中英双语文化比较快速融入,开销中等 <span class="comment">(20~30Ww RMB)</span></span><br><span class="line">相比较下不推荐美国 <span class="comment">(花钱较多,歧视)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="资格-证书">资格/证书</h3><ul><li><p>MBA</p><p>MBA 一般指工商管理硕士。</p></li><li><p>MPA</p><p>MPA 一般指公共管理硕士。</p><img src="https://www.helloimg.com/images/2022/02/27/GVSI0R.png" alt="20210801180232" /></li></ul><hr><ul><li><p>就 Coder 而言,几乎没有证书是特别有用/可以挂靠的</p><p>花那个精力不如多写写代码涨薪快呢</p><p>走管理路线的话,PMP 算是比较有用的,很多人考,至少含金量还没过</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="宠物">宠物</h2><h3 id="鹦鹉">鹦鹉</h3><blockquote><ul><li>云养鸟,评论区爬的,以后作为借鉴 <br>紫蓝负责贵，金刚负责晃眼，太平洋负责跳扭头舞，凯克负责装死走正步，秋草负责卖萌，虎皮只会制造噪音,亚马逊擅长唱歌，灰鹦鹉擅长说话，玄擅长吹口哨，葵花擅长蹦迪,牡丹擅长战斗，月轮擅长亲亲，金太阳擅长大嗓门 ​​</li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="经济">经济</h2><h3 id="购物警戒心">购物警戒心</h3><p>为此写了个项目: <a href="https://github.com/Weidows-projects/Eyes-4-Fishing">https://github.com/Weidows-projects/Eyes-4-Fishing</a></p><ul><li><details><summary> 为什么说到这呢? </summary><hr><ul><li><p>事情起源于我在某鱼买了个手机,后来被警方联系,因为这是脏机</p><p>没办法,配合警方取证,提供信息,邮递回手机,写判案资料,自证词画押</p><p>Word 天,警方的施压可不是闹着玩的,睡不着觉,犯没犯罪都格外紧张</p><p>正好那几天跟同事朋友联系比较多,哇,人前人后的那种反差; 就是明明特别失落还要哄盆友们一番,前一秒的笑后一秒就凝固了那种感觉,特别想找个人哭一顿 (老婆~! o(╥﹏╥)o)</p><hr></li><li><p>买东西前一定要核实好,即使在正规平台掏了正常的钱,也可能是犯法的…</p><p>算是在年轻时吃了个瘪吧,其实也还好啦</p><p>就怕一直大大咧咧活着,哪天不知道谁直接把我请进去了</p><p>真不好说,这么多法律不可能全明白,而且法网全面监视,包括这段字和屏幕前的你我</p><hr></li><li><p>挺惨的</p><p>现在感觉都有生理应激了,什么都不知道成了加害者 &amp; 被害者</p><p>有些明白为什么有些牢犯喜欢写东西了,有的事埋不进心里,陈述出来后有种豁然之感</p><p>后续?手机邮寄交到所里后人家都不搭理了,$木得了</p></li></ul></details></li></ul><hr><h3 id="股市">股市</h3><blockquote><p><a href="https://www.zhihu.com/question/19716709">股票做空是个什么概念？</a><br>高价时借股卖出,低价时再还股,赚下跌差价 (如果不动/上涨的话会赔)</p></blockquote><blockquote><p>原片: <a href="https://www.youtube.com/watch?v=rFV7wdEX-Mo">经济机器是怎样运行的 (时长 30 分钟) Ray Dalio</a><br>备用地址: <a href="https://www.bilibili.com/video/BV1kx41117mE">【Ray Dalio】三十分钟看懂经济机器如何运转（比尔盖茨推荐）</a><br>可以说是最杰出的视频了</p></blockquote><blockquote><p><a href="https://www.youtube.com/watch?v=8cph2_Xvfbo">【深度干货】世纪大空头如何玩弄市场？｜投资思想精华解读</a><br>以故事的形式讲解的,很有意思</p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-9">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://jin.baidu.com/ask/3565544.html">银行对公对私是什么意思</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: 推荐苍穹的: <a href="https://www.blueskyxn.com/financial/card/">https://www.blueskyxn.com/financial/card/</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://zhuanlan.zhihu.com/p/227825041">还分不请信用卡和储蓄卡？别再傻乎乎的了！</a></p><p><a name='cite_note-4' href='#cite_ref-4'>[4]</a>: <a href="https://www.zhihu.com/question/452844423">visa 和银联卡有什么区别?</a></p><p><a name='cite_note-5' href='#cite_ref-5'>[5]</a>: <a href="https://www.zhihu.com/question/27719640">海淘信用卡哪家强？ ？</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> 生活 </tag>
            
            <tag> 工作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😡一次解决CORS经验记录.</title>
      <link href="/post/Web/JavaScript/CORS/"/>
      <url>/post/Web/JavaScript/CORS/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-07-11 19:49:07 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Web\JavaScript\CORS.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%85%B3%E8%81%94%E9%A1%B9%E7%9B%AE">关联项目</a></li><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#%E5%89%96%E6%9E%90%E5%8E%9F%E6%96%99">剖析原料</a></li><li><a href="#%E9%97%AE%E9%A2%98%E5%B1%95%E7%A4%BA">问题展示</a><ul><li><a href="#%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA">图片显示</a></li><li><a href="#fetch-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE">fetch 获取数据</a></li><li><a href="#canvas-%E6%93%8D%E4%BD%9C">Canvas 操作</a></li></ul></li><li><a href="#%E9%9C%80%E6%B1%82">需求</a></li><li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">解决方案</a></li><li><a href="#%E6%94%B6%E5%B0%BE">收尾</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="关联项目"><a href="https://github.com/Weidows/awesome-image-collector">关联项目</a></h2><h2 id="简介-10">简介</h2><p>跨域资源共享 CORS (Cross-origin resource sharing)</p><p>从一个 <code>协议-子域名-主域名</code> 访问另一个 <code>协议-子域名-主域名</code> 下的资源就是 CORS,这三项有任何一项不同就判定为跨域.</p><ul><li><p>下面的主角是 <code>图片</code>,从三个层次剖析,逐渐变难.</p><ol><li>图片显示</li><li>fetch 获取数据</li><li>canvas 操作</li></ol></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="剖析原料">剖析原料</h2><ul><li><p>现在我这有两个网站,每个网站对应一个图片域名</p><table><thead><tr><th style="text-align:center">网站\域名</th><th style="text-align:center">主站域名</th><th style="text-align:center">图片域名</th><th style="text-align:center">图片跨域访问</th><th style="text-align:center">access-control-allow-origin</th></tr></thead><tbody><tr><td style="text-align:center"><a href="http://SM.MS">SM.MS</a></td><td style="text-align:center"><a href="http://sm.ms">sm.ms</a></td><td style="text-align:center"><a href="http://i.loli.net">i.loli.net</a></td><td style="text-align:center">✔</td><td style="text-align:center">*</td></tr><tr><td style="text-align:center">网页版 QQ 收藏</td><td style="text-align:center"><a href="http://sharechain.qq.com">sharechain.qq.com</a></td><td style="text-align:center"><a href="http://shp.qpic.cn">shp.qpic.cn</a></td><td style="text-align:center">❌</td><td style="text-align:center">❌</td></tr></tbody></table></li></ul><hr><ul><li><p>如何查看图片域名是否允许跨域,以及允许跨域域名范围</p><ol><li><p>在主站域名网页下打开<code>控制台-网页</code> 然后刷新网页,找到图片的请求</p></li><li><p>然后看请求的标头 -&gt; 响应头,是否含有 <code>access-control-allow-origin</code> 这一项</p></li><li><p>没有的话就是没开启 CORS,有的话右面的参数就是允许 CORS 的域名范围.</p></li></ol><img src="https://www.helloimg.com/images/2022/02/27/GVLBQT.png" alt="20210709232207" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="问题展示-2">问题展示</h2><h3 id="图片显示">图片显示</h3><ul><li><p>图片显示不受 CORS 是否开启影响,这两个图片域名在任何域名下都可以显示</p><p>如图本地域名可以显示这两个域名下的图片 (各一张) 🥵</p><img src="https://www.helloimg.com/images/2022/02/27/GV4xFQ.png" alt="20210709222815" /></li></ul><h3 id="fetch-获取数据">fetch 获取数据</h3><ul><li><p><code>i.loli.net</code> 这个域名开启了 CORS</p><p>并允许任何域名都可以跨域获取数据 (access-control-allow-origin: *)</p></li><li><p>如下,在两个主站域名测试都可以得到如下结果:</p><img src="https://www.helloimg.com/images/2022/02/27/GVPMJn.png" alt="20210709221705" /></li><li><p>变个卦:</p><p>如果服务端修改 access-control-allow-origin 为 <code>https://sm.ms</code></p><p>这个情况下,只能在 <a href="https://sm.ms">https://sm.ms</a> 网页内可以 fetch 成功.</p></li></ul><hr><ul><li><p>服务端没开启 CORS 的 <code>shp.qpic.cn</code></p><p>除了本身域名 <a href="http://shp.qpic.cn">shp.qpic.cn</a>,任何域名都 <code>没有权限获取数据</code> (可以显示但是无法 fetch)</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Access</span> <span class="keyword">to</span> image at <span class="string">&#x27;xxx&#x27;</span> <span class="keyword">from</span> origin <span class="string">&#x27;xxx&#x27;</span> has been blocked <span class="keyword">by</span> CORS <span class="keyword">policy</span>: <span class="keyword">No</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="keyword">header</span> <span class="keyword">is</span> present <span class="keyword">on</span> the requested resource.</span><br></pre></td></tr></table></figure><img src="https://www.helloimg.com/images/2022/02/27/GV4Jzu.png" alt="20210709222317" /></li></ul><hr><h3 id="Canvas-操作">Canvas 操作</h3><ul><li><p>Canvas 操作 img 要求最严格</p><ol><li><p>要求图片域名开启 CORS,并在 CORS 允许的域名下,服务端才可以响应数据</p></li><li><p>img 标签设置属性 <code>crossorigin='anonymous'</code>,表示想要跨域,否则会报错 canvas 被污染</p></li></ol></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="需求-2">需求</h2><ul><li><p>现在有一个需求:</p><p>在 <code>sharechain.qq.com</code> 下获取 <code>shp.qpic.cn</code> 的图片数据并通过 canvas 处理</p><p>-&gt; 跨域,而且服务端不允许 CORS</p><p>-&gt; 需要解决 canvas 跨域污染.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="解决方案-3">解决方案</h2><ul><li><p>寻找了很多资料,这里贴上优秀文章</p><blockquote><p><a href="https://segmentfault.com/a/1190000011145364">前端常见跨域解决方案（全）</a></p></blockquote><blockquote><p><a href="http://t.zoukankan.com/goloving-p-12857575.html">将在线图片转换成 base64 踩坑记录及静态资源跨域及缓存的处理</a></p></blockquote></li></ul><hr><ul><li><p>最终答案:</p><p><code>纯前端无法解决跨域资源获取问题</code></p><p>最快捷方案还是需要服务端开启… (显然是不可能)</p></li></ul><hr><ul><li><p><code>但是</code>,找到了捷径: 浏览器插件可以直接解决跨域问题</p><blockquote><p><a href="https://microsoftedge.microsoft.com/addons/detail/cors-unblock/hkjklmhkbkdhlgnnfbbcihcajofmjgbh?hl=zh-CN">CORS Unblock</a></p></blockquote><blockquote><p><a href="https://microsoftedge.microsoft.com/addons/detail/allow-cors-accesscontro/bhjepjpgngghppolkjdhckmnfphffdag?hl=zh-CN">Allow CORS: Access-Control-Allow-Origin</a></p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="收尾-2">收尾</h2><p>现在,可以成功 fetch 跨域图片数据了,再把 img 设置 crossorigin=&quot;anonymous&quot;就完事了 <code>\&gt;A&lt;/</code></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试 </tag>
            
            <tag> javascript </tag>
            
            <tag> 大前端 </tag>
            
            <tag> 爬虫 </tag>
            
            <tag> cors </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🍹LaTeX-环形使者</title>
      <link href="/post/experience/LaTeX/"/>
      <url>/post/experience/LaTeX/</url>
      
        <content type="html"><![CDATA[<h1>LaTeX-环形使者</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-05-08 23:59:25 * @FilePath: \Blog-private\source\_posts\experience\LaTeX.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#latex-%E7%8E%AF%E5%BD%A2%E4%BD%BF%E8%80%85">LaTeX-环形使者</a><ul><li><a href="#%E5%AE%89%E8%A3%85">安装</a><ul><li><a href="#%E5%AE%9E%E9%99%85%E6%95%88%E6%9E%9C">实际效果</a></li><li><a href="#%E6%8A%A5%E9%94%99">报错</a></li></ul></li><li><a href="#%E5%85%AC%E5%BC%8F%E6%B8%B2%E6%9F%93">公式渲染</a><ul><li><a href="#%E8%AF%AF%E5%8C%BA">误区</a></li><li><a href="#%E7%BD%91%E9%A1%B5%E5%85%AC%E5%BC%8F%E6%B8%B2%E6%9F%93">网页公式渲染</a></li><li><a href="#butterfly-katex">Butterfly-KaTeX</a></li></ul></li><li><a href="#%E5%85%AC%E5%BC%8F">公式</a><ul><li><a href="#tools">tools</a></li><li><a href="#%E5%B8%B8%E7%94%A8%E9%80%9F%E6%9F%A5%E8%A1%A8">常用速查表</a></li><li><a href="#%E6%95%B0%E5%AD%A6%E7%AD%89%E5%8F%B7%E5%AF%B9%E9%BD%90-%E5%A4%A7%E6%8D%A2%E8%A1%8C-%E6%88%90%E5%AF%B9%E5%8C%B9%E9%85%8D-%E6%95%B0%E5%AD%A6%E6%A0%B7%E5%BC%8F%E6%95%B0%E5%AD%97">数学等号对齐-大换行-成对匹配-数学样式数字</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><ul><li><p>好奇学术论文是怎么写的吗? 此文章尽做大努力把什么是 Tex 系统给你整闭环了 😁</p><p>一图胜千言: <sup id='cite_ref-3'><a href="#cite_note-3">[3]</a></sup> <sup id='cite_ref-4'><a href="#cite_note-4">[4]</a></sup></p><img src="https://www.helloimg.com/images/2022/02/27/GV43eD.png" alt="分类" /><p>TeX 生态的名词简直太 ☘ 了,翻阅了很多中英文文档/社区整理了这个图,差不多可以总结 TeX 生态常见/常用的引擎和发行软件.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="安装">安装</h2><ul><li><p>1.在 win 下推荐用 <code>MikTaX</code> 吧,主流而且比较小. scoop-main 仓库中的 latex 实际上就是 最小安装版本的 MikTaX,试了一遍这个 latex 最好,其他的要么下载失败,要么安装报错 😡😡😡.</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install latex</span><br></pre></td></tr></table></figure></li><li><p>2.然后在 VScode 中安装 <code>LaTeX Workshop</code> 这个插件,进入 VScode 配置里复制粘贴下面配置:</p><blockquote><p>来源: <a href="https://zhuanlan.zhihu.com/p/139210056">搭建 LaTeX 轻量级写作环境（MiKTeX+VSCode）</a></p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//! Latex workshop</span></span><br><span class="line"><span class="attr">&quot;latex-workshop.view.pdf.viewer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tab&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;latex-workshop.latex.tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;latexmk&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;latexmk&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;-synctex=1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;-interaction=nonstopmode&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;-file-line-error&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;-pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;%DOC%&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;-synctex=1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;-interaction=nonstopmode&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;-file-line-error&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;%DOC%&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;-synctex=1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;-interaction=nonstopmode&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;-file-line-error&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;%DOC%&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;%DOCFILE%&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;latex-workshop.latex.recipes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;xelatex&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;latexmk&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;latexmk&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex -&gt; bibtex -&gt; pdflatex*2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span> <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span> <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span> <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;latex-workshop.latex.clean.fileTypes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;*.aux&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.bbl&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.blg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.idx&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.ind&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.lof&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.lot&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.out&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.toc&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.acn&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.acr&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.alg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.glg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.glo&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.gls&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.ist&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.fls&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.log&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;*.fdb_latexmk&quot;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure></li><li><p>3.新建一个后缀名为 <code>.tex</code> 的文件,注意路径和文件名不要有中文,测试内容如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>[UTF8]&#123;ctexart&#125;</span><br><span class="line">    <span class="keyword">\title</span>&#123;文章标题&#125;</span><br><span class="line">    <span class="keyword">\author</span>&#123;Weidows&#125;</span><br><span class="line">    <span class="keyword">\date</span>&#123;<span class="keyword">\today</span>&#125;</span><br><span class="line">    <span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line">    <span class="keyword">\maketitle</span></span><br><span class="line">    <span class="built_in">$</span><span class="built_in">$</span> <span class="keyword">\alpha</span><span class="built_in">^</span>&#123;2&#125; + <span class="keyword">\beta</span> = <span class="keyword">\Theta</span>  <span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure></li><li><p>4.VScode 右上角应该有编译标志 (或者按 <code>Ctrl + alt + B</code>),之后 MikTaX 应该会提醒你下载宏包 (因为软件本身很小,没包含进去),选择 China 的镜像源然后等它下载之后会自动编译.</p></li></ul><hr><h3 id="实际效果">实际效果</h3><ul><li><p>完成上面步骤后在.tex 会生成几个文件,比如:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="selector-class">.aux</span></span><br><span class="line"><span class="number">1</span><span class="selector-class">.log</span></span><br><span class="line"><span class="number">1</span><span class="selector-class">.pdf</span></span><br><span class="line"><span class="number">1</span><span class="selector-class">.synctex</span><span class="selector-class">.gz</span></span><br><span class="line"><span class="number">1</span>.tex</span><br></pre></td></tr></table></figure><p>随着 tex 的写入保存,VScode 插件会自动编译更新预览内容.</p></li><li><p>展示:</p><img src="https://www.helloimg.com/images/2022/02/27/GVAXjA.png" alt="20210626214236" /></li></ul><hr><h3 id="报错">报错</h3><ul><li><p>这个情况是因为没重启,尝试重启电脑+重启 VScode</p><blockquote><p>Recipe terminated with fatal error: spawn xelatex ENOENT.</p></blockquote><hr></li><li><p>Hexo 导航栏点击不跳转</p><p>一般只有启用 KaTeX 的页面会出现这个错误</p><p>问题原因是一级标题</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="attribute">xxxx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line">xxx</span><br></pre></td></tr></table></figure></li><li><p>找到作者在 issue 中回复过,行文要用二级标题而非一级,解决了跳转问题</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## <span class="number">1</span></span><br><span class="line">xxxx</span><br><span class="line"></span><br><span class="line">## <span class="number">2</span></span><br><span class="line">xxx</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="公式渲染">公式渲染</h2><h3 id="误区">误区</h3><p>渲染 LaTeX 文档 != 渲染公式</p><ol><li><p>我们上面使用 MikTaX 渲染 LaTeX 文档是为了排版获取指定样式的 PDF 文档 -&gt; <code>渲染LaTeX文档</code></p></li><li><p>而渲染公式是渲染 LaTeX 文档的一部分子功能.</p></li><li><p>为了让 markdown 中 LaTeX 格式的公式也能得到正确显示,我们抽离出渲染公式这部分引擎 -&gt; <code>KaTeX/MathJax</code> -&gt; <code>专门用来渲染公式</code></p></li></ol><hr><h3 id="网页公式渲染">网页公式渲染</h3><ul><li><p>在写 markdown 文章时可能不会注意到这个问题,因为大多数编辑器支持公式渲染 (比如 VScode 预览、CSDN 在线编辑等等),如下图 VScode 内置的 markdown 预览:</p><img src="https://www.helloimg.com/images/2022/02/27/GV4NPc.png" alt="20210626224156" /></li><li><p>但是同样的问题挪到博客上就 GG 了,上面的公式不加处理显示成这样</p><img src="https://www.helloimg.com/images/2022/02/27/GV4oB1.png" alt="20210626224035" /><hr></li><li><p>如何在网页中渲染 LaTeX 公式?</p><blockquote><p><code>KaTeX</code> 或 <code>MathJax</code></p></blockquote><p>性能测试网站 <sup id='cite_ref-5'><a href="#cite_note-5">[5]</a></sup> 二者功能比较 <sup id='cite_ref-6'><a href="#cite_note-6">[6]</a></sup></p><p>个人倾向在网页端用 Katex,更轻便快速.</p></li><li><p>!!!需要注意!!! 应用 KaTeX 的页面<code>不能被压缩</code>,否则也会变成上面乱套的样子.</p></li></ul><hr><h3 id="Butterfly-KaTeX">Butterfly-KaTeX</h3><ul><li><p>需要更换(不换的话有冲突)和新添渲染插件: <sup id='cite_ref-7'><a href="#cite_note-7">[7]</a></sup></p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> uninstall hexo-renderer-marked hexo-renderer-kramed --save</span><br><span class="line"><span class="built_in">npm</span> install hexo-renderer-markdown-<span class="literal">it</span> @neilsustc/markdown-<span class="literal">it</span>-katex --save</span><br></pre></td></tr></table></figure></li><li><p><code>_config.yml</code>中添加配置:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&quot;@neilsustc/markdown-it-katex&quot;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">strict:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li><li><p>展示效果:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>11</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>12</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>1</mn><mi>n</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>21</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>22</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>2</mn><mi>n</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>31</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>22</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>3</mn><mi>n</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋱</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>n</mi><mn>1</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>n</mi><mn>2</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>n</mi><mi>n</mi></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo separator="true">,</mo><mi>b</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>b</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>b</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>b</mi><mn>3</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>b</mi><mi>n</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">A = \begin{bmatrix}        a_{11}    &amp; a_{12}    &amp; ...    &amp; a_{1n}\\        a_{21}    &amp; a_{22}    &amp; ...    &amp; a_{2n}\\        a_{31}    &amp; a_{22}    &amp; ...    &amp; a_{3n}\\        \vdots    &amp; \vdots    &amp; \ddots &amp; \vdots\\        a_{n1}    &amp; a_{n2}    &amp; ... &amp; a_{nn}\\    \end{bmatrix} , b = \begin{bmatrix}        b_{1}  \\        b_{2}  \\        b_{3}  \\        \vdots \\        b_{n}  \\    \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:6.66em;vertical-align:-3.08em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.55em;"><span style="top:-2.611em;"><span class="pstrut" style="height:5.016em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-3.758em;"><span class="pstrut" style="height:5.016em;"></span><span style="height:3.016em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.6667em' height='3.016em' style='width:0.6667em' viewBox='0 0 666.67 3016' preserveAspectRatio='xMinYMin'><path d='M319 0 H403 V3016 H319z M319 0 H403 V3016 H319z'/></svg></span></span><span style="top:-7.4111em;"><span class="pstrut" style="height:5.016em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.05em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.58em;"><span style="top:-6.4275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-5.2275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">21</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.0275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">31</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.1675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-0.9675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.08em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.58em;"><span style="top:-6.4275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-5.2275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">22</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.0275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">22</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.1675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-0.9675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.08em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.58em;"><span style="top:-6.24em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="mord">...</span></span></span><span style="top:-5.04em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="mord">...</span></span></span><span style="top:-3.84em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="mord">...</span></span></span><span style="top:-1.98em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋱</span></span></span><span style="top:-0.78em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="mord">...</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.08em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.58em;"><span style="top:-6.4275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-5.2275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.0275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.1675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-0.9675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">nn</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.08em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.55em;"><span style="top:-2.611em;"><span class="pstrut" style="height:5.016em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-3.758em;"><span class="pstrut" style="height:5.016em;"></span><span style="height:3.016em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.6667em' height='3.016em' style='width:0.6667em' viewBox='0 0 666.67 3016' preserveAspectRatio='xMinYMin'><path d='M263 0 H347 V3016 H263z M263 0 H347 V3016 H263z'/></svg></span></span><span style="top:-7.4111em;"><span class="pstrut" style="height:5.016em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.05em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:6.66em;vertical-align:-3.08em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.55em;"><span style="top:-2.611em;"><span class="pstrut" style="height:5.016em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-3.758em;"><span class="pstrut" style="height:5.016em;"></span><span style="height:3.016em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.6667em' height='3.016em' style='width:0.6667em' viewBox='0 0 666.67 3016' preserveAspectRatio='xMinYMin'><path d='M319 0 H403 V3016 H319z M319 0 H403 V3016 H319z'/></svg></span></span><span style="top:-7.4111em;"><span class="pstrut" style="height:5.016em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.05em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.58em;"><span style="top:-6.4275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-5.2275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.0275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.1675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-0.9675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.08em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.55em;"><span style="top:-2.611em;"><span class="pstrut" style="height:5.016em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-3.758em;"><span class="pstrut" style="height:5.016em;"></span><span style="height:3.016em;width:0.6667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.6667em' height='3.016em' style='width:0.6667em' viewBox='0 0 666.67 3016' preserveAspectRatio='xMinYMin'><path d='M263 0 H347 V3016 H263z M263 0 H347 V3016 H263z'/></svg></span></span><span style="top:-7.4111em;"><span class="pstrut" style="height:5.016em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.05em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>α</mi><mn>2</mn></msup><mo>+</mo><mi>β</mi><mo>=</mo><mi mathvariant="normal">Θ</mi></mrow><annotation encoding="application/x-tex">\alpha^{2} + \beta = \Theta </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Θ</span></span></span></span></span></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="公式">公式</h2><h3 id="tools">tools</h3><p>看看这两篇基本上可以按图索骥了: <sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup> <sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup></p><blockquote><p>强烈推荐 <a href="https://mathpix.com/">Mathpix</a>, 可以把截图中的公式转为 LaTeX 公式<br><img src="https://www.helloimg.com/images/2022/03/19/RaAc56.png" alt=""></p></blockquote><hr><h3 id="常用速查表">常用速查表</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">LaTeX</th></tr></thead><tbody><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∂</mi></mrow><annotation encoding="application/x-tex">\partial</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord" style="margin-right:0.05556em;">∂</span></span></span></span></td><td style="text-align:center"><code>\partial</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td style="text-align:center"><code>\frac&#123;1&#125;&#123;2&#125;</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2809em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span></span></span></span></td><td style="text-align:center"><code>\sum_&#123;i=1&#125;^&#123;N&#125;</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mspace width="1em"/><mn>2</mn></mrow><annotation encoding="application/x-tex">1\quad2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em;"></span><span class="mord">2</span></span></span></span></td><td style="text-align:center"><code>1\quad2</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mn>3</mn></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1328em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9072em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">3</span></span></span><span style="top:-2.8672em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1328em;"><span></span></span></span></span></span></span></span></span> 根</td><td style="text-align:center"><code>\sqrt&#123;3&#125;</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>x</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">||x||</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣∣</span><span class="mord mathnormal">x</span><span class="mord">∣∣</span></span></span></span></td><td style="text-align:center"><code>||x||</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>y</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span></span></span></span> 真实值</td><td style="text-align:center"><code>\hat y</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">∞</span></span></span></span> 无穷</td><td style="text-align:center"><code>\infty</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∩</mo></mrow><annotation encoding="application/x-tex">\cap</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"></span><span class="mord">∩</span></span></span></span> 并</td><td style="text-align:center"><code>\cap</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span></td><td style="text-align:center"><code>\theta</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">L</mi></mrow><annotation encoding="application/x-tex">\mathcal{L}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal">L</span></span></span></span></td><td style="text-align:center"><code>\mathcal&#123;L&#125;</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span></td><td style="text-align:center"><code>\alpha</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mspace width="2em"/><mn>2</mn></mrow><annotation encoding="application/x-tex">1\qquad2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:2em;"></span><span class="mord">2</span></span></span></span></td><td style="text-align:center"><code>1\qquad2</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi>a</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">|a|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal">a</span><span class="mord">∣</span></span></span></span> 绝对值</td><td style="text-align:center"><code>|a| 或 \vert</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⋅</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \cdot b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></td><td style="text-align:center"><code>a \cdot b</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>y</mi><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.825em;vertical-align:-0.1944em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6306em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.5506em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span></span></span></span> 均值</td><td style="text-align:center"><code>\overline y</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>w</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\vec{w}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.714em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span> 向量</td><td style="text-align:center"><code>\vec&#123;w&#125;</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∪</mo></mrow><annotation encoding="application/x-tex">\cup</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"></span><span class="mord">∪</span></span></span></span> 交</td><td style="text-align:center"><code>\cup</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix}1 &amp; 2\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span></span></span></span></td><td style="text-align:center"><code>$\begin&#123;bmatrix&#125;1 &amp; 2\end&#123;bmatrix&#125;$</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">∥</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">∥</mo></mrow><annotation encoding="application/x-tex">\begin{Vmatrix}1 &amp; 2\end{Vmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.212em;vertical-align:-0.35em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.862em;"><span style="top:-2.256em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span><span style="top:-2.854em;"><span class="pstrut" style="height:2.606em;"></span><span style="height:0.016em;width:0.5556em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.5556em' height='0.016em' style='width:0.5556em' viewBox='0 0 555.5600000000001 16' preserveAspectRatio='xMinYMin'><path d='M145 0 H188 V16 H145z M145 0 H188 V16 H145zM367 0 H410 V16 H367z M367 0 H410 V16 H367z'/></svg></span></span><span style="top:-2.862em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.85em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.862em;"><span style="top:-2.256em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span><span style="top:-2.854em;"><span class="pstrut" style="height:2.606em;"></span><span style="height:0.016em;width:0.5556em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.5556em' height='0.016em' style='width:0.5556em' viewBox='0 0 555.5600000000001 16' preserveAspectRatio='xMinYMin'><path d='M145 0 H188 V16 H145z M145 0 H188 V16 H145zM367 0 H410 V16 H367z M367 0 H410 V16 H367z'/></svg></span></span><span style="top:-2.862em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35em;"><span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:center"><code>\begin&#123;Vmatrix&#125;1 &amp; 2\end&#123;Vmatrix&#125;</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span></td><td style="text-align:center"><code>\pi</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span></td><td style="text-align:center"><code>\epsilon</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span></td><td style="text-align:center"><code>\varepsilon</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span></td><td style="text-align:center"><code>\eta</code></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">(</mo><mn>123</mn><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\left( 123 \right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">123</span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></td><td style="text-align:center"><code>\left( 123 \right)</code></td></tr></tbody></table><hr><h3 id="数学等号对齐-大换行-成对匹配-数学样式数字">数学等号对齐-大换行-成对匹配-数学样式数字</h3><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>o</mi><mn>1</mn></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>s</mi><mi>g</mi><mi>n</mi><mo stretchy="false">(</mo><msup><mi>W</mi><mi>T</mi></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><msup><mi>X</mi><mn>1</mn></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>s</mi><mi>g</mi><mi>n</mi><mo stretchy="false">(</mo><mn>2.5</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>W</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>W</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>+</mo><mi>η</mi><mrow><mo fence="true">[</mo><msup><mi>d</mi><mn>1</mn></msup><mo>−</mo><msup><mi>o</mi><mn>1</mn></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow><msup><mi>X</mi><mn>1</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mn>0.5</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup><mo>+</mo><mn>0.1</mn><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>−</mo><mn>2</mn><mo separator="true">,</mo><mn>0</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mn>0.7</mn><mo separator="true">,</mo><mn>0.8</mn><mo separator="true">,</mo><mo>−</mo><mn>0.6</mn><mo separator="true">,</mo><mn>0</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext> </mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>W</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>W</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>η</mi><mrow><mo fence="true">[</mo><msup><mi>d</mi><mn>2</mn></msup><mo>−</mo><msup><mi>o</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow><msup><mi>X</mi><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mn>0.7</mn><mo separator="true">,</mo><mn>0.8</mn><mo separator="true">,</mo><mo>−</mo><mn>0.6</mn><mo separator="true">,</mo><mn>0</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup><mo>+</mo><mn>0.1</mn><mo stretchy="false">[</mo><mo>−</mo><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>1.5</mn><mo separator="true">,</mo><mo>−</mo><mn>0.5</mn><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mrow><mn mathvariant="bold">0.7</mn><mo separator="true">,</mo><mn mathvariant="bold">0.8</mn><mo separator="true">,</mo><mo>−</mo><mn mathvariant="bold">0.6</mn><mo separator="true">,</mo><mn mathvariant="bold">0</mn><msup><mo stretchy="false">)</mo><mi mathvariant="bold">T</mi></msup></mrow></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  o^1(0) &amp;= sgn(W^T(0)X^1)  \\&amp;= sgn(2.5) = 1  \\ \ \\  W(1) &amp;= W(0) + \eta \left[d^1 - o^1(0)\right]X^1  \\&amp;= (0.5,1,-1,0)^T + 0.1 (-1 - 1)(-1,1,-2,0)^T  \\&amp;= (0.7,0.8,-0.6,0)^T  \\ \ \\  W(2) &amp;=W(1) + \eta \left[d^{2}-o^{2}(1)\right] X^{2}  \\&amp;= (0.7,0.8,-0.6,0)^{T} + 0.1 [- 1-(- 1)](-1,0,1.5,-0.5)^{T}  \\&amp;= \left(\mathbf{0.7,0.8,-0.6,0)^{T}}\right.\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:15.3068em;vertical-align:-7.4034em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.9034em;"><span style="top:-10.0121em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span></span></span><span style="top:-8.5121em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-7.0121em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:-5.488em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span><span style="top:-3.9366em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-2.3853em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-0.8853em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:0.6388em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span><span style="top:2.1901em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:3.7434em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:7.4034em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.9034em;"><span style="top:-10.0121em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-8.5121em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord">2.5</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:-5.488em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span><span style="top:-3.9366em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">0.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0.1</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span><span style="top:-2.3853em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">0.7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0.8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">0.6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span><span style="top:0.6388em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:2.1901em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">0.7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0.8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">0.6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0.1</span><span class="mopen">[</span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose">)]</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">0.5</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span style="top:3.7434em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mord mathbf">0.7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">0.8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord mathbf">0.6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8933em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">T</span></span></span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:7.4034em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\begin</span>&#123;aligned&#125;</span><br><span class="line">  o<span class="built_in">^</span>1(0) <span class="built_in">&amp;</span>= sgn(W<span class="built_in">^</span>T(0)X<span class="built_in">^</span>1)</span><br><span class="line">  <span class="keyword">\\</span><span class="built_in">&amp;</span>= sgn(2.5) = 1</span><br><span class="line"></span><br><span class="line">  <span class="keyword">\\</span> <span class="keyword">\ </span><span class="keyword">\\</span></span><br><span class="line"></span><br><span class="line">  W(1) <span class="built_in">&amp;</span>= W(0) + <span class="keyword">\eta</span> <span class="keyword">\left</span>[d<span class="built_in">^</span>1 - o<span class="built_in">^</span>1(0)<span class="keyword">\right</span>]X<span class="built_in">^</span>1</span><br><span class="line">  <span class="keyword">\\</span><span class="built_in">&amp;</span>= (0.5,1,-1,0)<span class="built_in">^</span>T + 0.1 (-1 - 1)(-1,1,-2,0)<span class="built_in">^</span>T</span><br><span class="line">  <span class="keyword">\\</span><span class="built_in">&amp;</span>= (0.7,0.8,-0.6,0)<span class="built_in">^</span>T</span><br><span class="line"></span><br><span class="line">  <span class="keyword">\\</span> <span class="keyword">\ </span><span class="keyword">\\</span></span><br><span class="line"></span><br><span class="line">  W(2) <span class="built_in">&amp;</span>=W(1) + <span class="keyword">\eta</span> <span class="keyword">\left</span>[d<span class="built_in">^</span>&#123;2&#125;-o<span class="built_in">^</span>&#123;2&#125;(1)<span class="keyword">\right</span>] X<span class="built_in">^</span>&#123;2&#125;</span><br><span class="line">  <span class="keyword">\\</span><span class="built_in">&amp;</span>= (0.7,0.8,-0.6,0)<span class="built_in">^</span>&#123;T&#125; + 0.1 [- 1-(- 1)](-1,0,1.5,-0.5)<span class="built_in">^</span>&#123;T&#125;</span><br><span class="line">  <span class="keyword">\\</span><span class="built_in">&amp;</span>= <span class="keyword">\left</span>(<span class="keyword">\mathbf</span>&#123;0.7,0.8,-0.6,0)<span class="built_in">^</span>&#123;T&#125;&#125;<span class="keyword">\right</span>.</span><br><span class="line"><span class="keyword">\end</span>&#123;aligned&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-6">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="http://chu-studio.com/posts/2017/LaTeX%20%E5%85%AC%E5%BC%8F%E9%80%9F%E6%9F%A5">LaTeX 公式速查</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <s>面向知乎学编程</s>: <a href="https://zhuanlan.zhihu.com/p/110756681">LaTeX 公式篇</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://zh.wikipedia.org/wiki/TeX">维基百科 - TeX</a> 很详细的介绍了 TeX 是什么东西,也关联介绍了 TeX 衍生的各种引擎/软件.</p><p><a name='cite_note-4' href='#cite_ref-4'>[4]</a>: <a href="https://liam.page/2014/09/08/latex-introduction/">一份其实很短的 LaTeX 入门文档</a> 强烈推荐阅读的文章,无论是介绍,生态,还是使用方面都很通俗易懂.</p><p><a name='cite_note-5' href='#cite_ref-5'>[5]</a>: <a href="https://www.intmath.com/cg5/katex-mathjax-comparison.php">KaTeX and MathJax Comparison Demo</a></p><p><a name='cite_note-6' href='#cite_ref-6'>[6]</a>: <a href="https://zhuanlan.zhihu.com/p/381263375">Mathjax 和 katex 的功能比较（VSCode+MPE）</a></p><p><a name='cite_note-7' href='#cite_ref-7'>[7]</a>: 来自官方博客的文档: <a href="https://butterfly.js.org/posts/ceeb73f/#Math-%E6%95%B8%E5%AD%B8">Butterfly 安裝文檔(四) 主題配置-2</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> latex </tag>
            
            <tag> vscode </tag>
            
            <tag> butterfly </tag>
            
            <tag> katex </tag>
            
            <tag> math </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🎃backuper~开发环境备份.</title>
      <link href="/post/tools/backuper/"/>
      <url>/post/tools/backuper/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-02-23 02:20:22 * @FilePath: \Blog-private\source\_posts\tools\backuper.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80">仓库地址</a></li><li><a href="#%E9%97%AE%E9%A2%98">问题</a></li><li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">解决方案</a></li><li><a href="#%E5%AE%9E%E7%8E%B0">实现</a></li><li><a href="#%E8%A7%A3%E6%9E%90">解析</a></li><li><a href="#%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF">敏感信息</a></li><li><a href="#%E7%BB%93%E6%9D%9F">结束</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="仓库地址"><a href="https://github.com/Weidows-projects/Programming-Configuration">仓库地址</a></h2><h2 id="问题-2">问题</h2><ul><li><p>大概…我们经常会遇到这种问题:</p><blockquote><p>我这为什么运行不了呢&gt;</p></blockquote><blockquote><p>帮帮我装下环境!!!</p></blockquote></li><li><p>或者这样:</p><blockquote><p>嗯?刚刚把什么东西删除了???</p></blockquote><blockquote><p>卧槽,这配置没错啊,为啥 xxx?</p></blockquote></li><li><p>以及:</p><blockquote><p>系统崩了,重装个系统吧… --&gt; 重新配置环境 --&gt; <code>RNM退钱!!!</code></p></blockquote><blockquote><p>装完东西后经常忘记装了什么,比如 <a href="https://github.com/Weidows-projects/Programming-Configuration/blob/master/lists/scoop/scoop-apps.bak">我的环境清单</a>, 让我回顾装过什么东西简直是不可能 de</p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="解决方案">解决方案</h2><ul><li>以上遇到的问题我们可以借助 <code>名单备份 &amp; 配置备份</code> 解决,因为只要知道软件名字和配置,就可以全部恢复</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="实现">实现</h2><blockquote><p>这里只是提供一个思路,具体怎么备份还需要根据系统、需求、位置来决定.</p></blockquote><ul><li><p>仅仅需要一个脚本 <a href="https://github.com/Weidows-projects/Programming-Configuration/blob/master/local/utils.bat">我的备份脚本</a></p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">@REM 开机后设置备份,使用start是在新的终端同时进行的,call是按顺序依次</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> HOME_PATH=C:\Users\<span class="number">29845</span></span><br><span class="line"><span class="built_in">set</span> BACKUP_DIR=D:\Game\Github\Programming-Configuration</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">@REM 备份ssh 目录后都必须加个&#x27;\&#x27; (比如.ssh有可能是目录,也可能是文件,而.ssh\只可能是目录)</span></span><br><span class="line"><span class="built_in">mkdir</span> <span class="variable">%BACKUP_DIR%</span>\backup &amp; <span class="built_in">cd</span> <span class="variable">%BACKUP_DIR%</span>\backup</span><br><span class="line"><span class="built_in">xcopy</span> <span class="variable">%HOME_PATH%</span>\.ssh\ .ssh\ /e/y/d</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">@REM 备份lists</span></span><br><span class="line"><span class="built_in">mkdir</span> <span class="variable">%BACKUP_DIR%</span>\lists &amp; <span class="built_in">cd</span> <span class="variable">%BACKUP_DIR%</span>\lists</span><br><span class="line"><span class="keyword">call</span> scoop list &gt; scoop-apps.bak</span><br><span class="line"><span class="keyword">call</span> scoop bucket list &gt; scoop-buckets.bak</span><br><span class="line"><span class="keyword">call</span> yarn global list &gt; yarn-global.bak</span><br><span class="line"><span class="keyword">call</span> npm -g list &gt; npm-global.bak</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">@REM 备份其他</span></span><br><span class="line"><span class="built_in">mkdir</span> <span class="variable">%BACKUP_DIR%</span>\others &amp; <span class="built_in">cd</span> <span class="variable">%BACKUP_DIR%</span>\others</span><br><span class="line"><span class="built_in">xcopy</span> C:\Windows\System32\drivers\etc\hosts hosts\ /e/y/d</span><br><span class="line"><span class="built_in">xcopy</span> D:\Game\Scoop\persist\maven\conf\settings.xml maven\conf\ /e/y/d</span><br><span class="line"><span class="built_in">xcopy</span> D:\Documents\PowerShell\Microsoft.PowerShell_profile.ps1 .\PowerShell\ /e/y/d</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">@REM 备份 ~\</span></span><br><span class="line"><span class="built_in">mkdir</span> <span class="variable">%BACKUP_DIR%</span>\user-config &amp; <span class="built_in">cd</span> <span class="variable">%BACKUP_DIR%</span>\user-config</span><br><span class="line"><span class="built_in">xcopy</span> <span class="variable">%HOME_PATH%</span>\.conda\ .conda\ /e/y/d</span><br><span class="line"><span class="built_in">xcopy</span> <span class="variable">%HOME_PATH%</span>\.config\ .config\ /e/y/d</span><br><span class="line"><span class="built_in">xcopy</span> <span class="variable">%HOME_PATH%</span>\pip\ pip\ /e/y/d</span><br><span class="line"><span class="built_in">xcopy</span> <span class="variable">%HOME_PATH%</span>\.npmrc . /y/d</span><br><span class="line"><span class="built_in">xcopy</span> <span class="variable">%HOME_PATH%</span>\.yarnrc . /y/d</span><br><span class="line"><span class="built_in">xcopy</span> <span class="variable">%HOME_PATH%</span>\.condarc . /y/d</span><br><span class="line"><span class="built_in">xcopy</span> <span class="variable">%HOME_PATH%</span>\.gitconfig . /y/d</span><br></pre></td></tr></table></figure></li><li><p>下面开始解析.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="解析">解析</h2><ul><li><p>1.首先需要指定 <code>HOME_PATH</code>用户配置目录 和 <code>BACKUP_DIR</code>备份到的位置</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> HOME_PATH=C:\Users\<span class="number">29845</span></span><br><span class="line"><span class="built_in">set</span> BACKUP_DIR=D:\Game\Github\Programming-Configuration</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>2.创建子备份文件夹并进入</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> <span class="variable">%BACKUP_DIR%</span>\backup &amp; <span class="built_in">cd</span> <span class="variable">%BACKUP_DIR%</span>\backup</span><br></pre></td></tr></table></figure></li></ul><p><code>mkdir</code> 有个妙处: 默认情况下不会覆盖已有的文件夹.</p><hr><ul><li><p>3.然后把需要备份的内容 copy 进去</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">xcopy</span> <span class="variable">%HOME_PATH%</span>\.ssh\ .ssh\ /e/y/d</span><br></pre></td></tr></table></figure><blockquote><p>详细介绍 xcopy 命令: <a href="https://blog.csdn.net/qq_21808961/article/details/86749733">cmd 复制文件命令 copy 复制目录树命令 xcopy</a></p></blockquote><p>注意如果 xcopy 的是文件而不是目录的话,<code>要去掉 /e</code>, 不然会把要 copy 文件的同级目录全都 copy (<code>简单讲就是 bug</code>) ,比如如下:</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">xcopy</span> <span class="variable">%HOME_PATH%</span>\.npmrc . /y/d</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>4.至于如何备份装过的软件,之前想通过递归目录名来获取,后来发现完全可以通过 <code>list</code> 来输出到文件</p><p>需要注意当执行 <code>scoop list</code> 时,命令行会进入到 scoop 程序而不会回来 (走错路了)</p><p>需要用 <code>call</code> 来获取外部程序 <code>scoop list</code> 的执行结果</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> scoop list &gt; scoop-apps.bak</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="敏感信息">敏感信息</h2><ul><li><p>有些敏感信息我们想备份但并不想让 Git 存储,比如<code>.ssh</code>中的秘钥</p><blockquote><p>这时可以在.gitignore 中添加一个目录,用来备份敏感信息.</p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="结束">结束</h2><ul><li><p>至此备份脚本就可以了,可以 <a href="https://github.com/Weidows-projects/Programming-Configuration">看看备份结果</a></p></li><li><p>如何运行脚本? 可以手动或者添加进开机运行程序 <a href="https://github.com/Weidows-projects/Keeper/blob/main/utils.bat">我的运行程序</a></p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>👍Anaconda-Python-水漂浅探池深浅.</title>
      <link href="/post/python/anaconda/"/>
      <url>/post/python/anaconda/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-06-06 11:00:21 * @FilePath: \Blog-private\source\_posts\python\anaconda.md * @Description: * @!: *********************************************************************--><h1>Anaconda-Python-水漂浅探池深浅.</h1><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#anaconda-python-%E6%B0%B4%E6%BC%82%E6%B5%85%E6%8E%A2%E6%B1%A0%E6%B7%B1%E6%B5%85">Anaconda-Python-水漂浅探池深浅.</a><ul><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#%E5%AE%89%E8%A3%85-%E9%85%8D%E7%BD%AE">安装-配置</a><ul><li><a href="#linux-%E5%AE%89%E8%A3%85">linux-安装</a></li><li><a href="#%E6%B5%8B%E8%AF%95">测试</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE">配置文件位置</a></li><li><a href="#%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F-%E4%BB%A3%E7%90%86">镜像加速-代理</a></li><li><a href="#%E4%BF%AE%E6%94%B9%E4%BE%9D%E8%B5%96%E8%B7%AF%E5%BE%84">修改依赖路径</a></li><li><a href="#%E6%BF%80%E6%B4%BB%E7%BB%88%E7%AB%AF">激活终端</a></li><li><a href="#cuda-cudnn">CUDA-cuDNN</a></li></ul></li><li><a href="#pytorch">PyTorch</a><ul><li><a href="#%E5%AE%9E%E4%BE%8B">实例</a></li></ul></li><li><a href="#%E4%BE%9D%E8%B5%96">依赖</a><ul><li><a href="#%E6%9B%B4%E6%96%B0%E4%BE%9D%E8%B5%96">更新依赖</a></li><li><a href="#install-%E6%8A%A5%E9%94%99">install-报错</a></li><li><a href="#%E5%AF%BC%E5%87%BA-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96">导出-安装依赖</a></li></ul></li><li><a href="#%E6%8A%A5%E9%94%99">报错</a><ul><li><a href="#%E5%AE%89%E8%A3%85%E6%8A%A5%E9%94%99">安装报错</a></li><li><a href="#%E7%8E%AF%E5%A2%83%E4%B8%8D%E4%B8%80%E8%87%B4">环境不一致</a></li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="简介-4">简介</h2><blockquote><p>anaconda 官网: <a href="https://www.anaconda.com/products/individual">https://www.anaconda.com/products/individual</a></p></blockquote><ul><li><p>简单来说,它是 Python 的一个发行版,其中打包了很多附加工具,比如 <code>Jupyter</code>,<code>conda</code> 等等</p><ul><li><p>可以理解为 anaconda 内置了 python,所以设备上安装的其他 Python 环境完全可以卸载掉了</p></li><li><p>Python 一般会自带 pip 这个包管理器,anaconda 也不例外; 而且 anaconda 还带有另一个更强大的包管理器: <code>conda</code></p></li></ul><blockquote><p><a href="https://www.zhihu.com/question/395145313">请问大神们，pip install 和 conda install 有什么区别吗？</a></p></blockquote></li></ul><blockquote><p>此文章很清晰的介绍了 Anaconda 的安装使用: <a href="https://zhuanlan.zhihu.com/p/75717350">https://zhuanlan.zhihu.com/p/75717350</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="安装-配置">安装-配置</h2><ul><li><p>可以选择官网下载安装包安装,我这里是用的 <code>scoop </code>安装的</p><ul><li><p>下载-&gt;安装-&gt;配置环境变量-&gt;改变运行环境, 在 scoop 中一步就可以完成,很方便 (官方的库中没有这个软件,需要添加其他库,<code>dorado</code>)</p></li><li><p>这样安装避免了很多麻烦和错误,非常推荐!</p></li></ul><hr></li><li><p>小毛病</p><p>anaconda 会把 scoop 里的环境识别为两个 (但实际上就一个)</p><img src="https://www.helloimg.com/images/2022/02/27/GVSnUD.png" alt="20211002190135" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="linux-安装">linux-安装</h3><p>linux 中可以通过 官方 shell 或者 AUR 安装, 但是安装后并没有 export 到 PATH,需要一步:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /opt/anaconda/etc/profile.d/conda.sh /etc/profile.d/</span><br></pre></td></tr></table></figure><p>另外这样装上后还会因为目录权限不够,无法安装依赖,需要提权</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod -R 777 /opt/anaconda/</span><br></pre></td></tr></table></figure><hr><h3 id="测试">测试</h3><ul><li><p>一个很关键的步骤: <code>重启电脑</code>. 如果没重启的话,环境变量有可能不生效,肯定无法正常打开.</p></li><li><p>然后测试: 能显示出来东西就对了</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">conda</span> --version</span><br><span class="line">conda <span class="literal">info</span></span><br></pre></td></tr></table></figure></li><li><p>安装后开始菜单会出来这么几个东西:</p><img src="https://www.helloimg.com/images/2022/02/27/GV4hCu.png" alt="20210520093618" /><p>第一个就是 anaconda 主体;二三是终端,不用管它;四和六是附带的第三方软件.</p></li></ul><hr><ul><li><p>点第一个,会弹出几次黑框,然后出现下面面板就没问题了.</p><img src="https://www.helloimg.com/images/2022/02/27/GV4D41.png" alt="20210520094007" /></li><li><p>报错,无法打开:</p><ol><li><p>尝试管理员模式</p></li><li><p>检查系统是不是开了 http 代理 (挂-了-梯-子?),把 http 模式换成 PAC 模式试试,我遇到这个错误可以这样解决</p></li></ol></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="配置文件位置">配置文件位置</h3><ul><li><p>Windows 中:</p><ul><li><p>conda: <code>~\.condarc 和 .conda\</code></p></li><li><p>pip: <code>~\pip\pip.ini</code></p></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="镜像加速-代理">镜像加速-代理</h3><blockquote><p>清华镜像站给了教程: <a href="https://mirror.tuna.tsinghua.edu.cn/help/anaconda/">Anaconda 镜像使用帮助</a></p></blockquote><ul><li><p>通过 navigator 添加进设置,或者直接修改 ~/.condarc</p><img src="https://www.helloimg.com/images/2022/02/27/GVAdNv.png" alt="20210520095331" /></li><li><details>  <summary> 如果官方给的 https 协议的,会报错 </summary><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PS D:\Game\Github\Blog-<span class="keyword">private</span>&gt; conda search cuda</span><br><span class="line">Loading channels: failed</span><br><span class="line"></span><br><span class="line">CondaHTTPError: HTTP <span class="number">000</span> CONNECTION FAILED <span class="keyword">for</span> url &lt;<span class="keyword">https</span>://mirrors.bfsu.edu.cn/anaconda/pkgs/main/win<span class="number">-64</span>/repodata.json&gt;</span><br><span class="line">Elapsed: -</span><br><span class="line"></span><br><span class="line">An HTTP error occurred when trying <span class="built_in">to</span> retrieve this <span class="built_in">URL</span>.</span><br><span class="line">HTTP errors are often intermittent, <span class="keyword">and</span> <span class="keyword">a</span> simple retry will <span class="built_in">get</span> you <span class="keyword">on</span> <span class="title">your</span> <span class="title">way</span>.</span><br><span class="line"><span class="string">&#x27;https://mirrors.bfsu.edu.cn/anaconda/pkgs/main/win-64&#x27;</span></span><br></pre></td></tr></table></figure><hr><ul><li><p>找了半天教程,发现只有一篇有效: <code>https -&gt; http</code></p><blockquote><p><a href="https://segmentfault.com/q/1010000008668178">Anaconda 使用 conda 连接网络出现错误</a></p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">show_channel_urls: true</span><br><span class="line">default_channels:</span><br><span class="line">  - http:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>pkgs/main</span><br><span class="line">  - http:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>pkgs/r</span><br><span class="line">  - http:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>pkgs/msys2</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: http:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  msys2: http:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  bioconda: http:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  menpo: http:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  pytorch: http:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  pytorch-lts: http:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  simpleitk: http:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br></pre></td></tr></table></figure></li><li><p>最近又发现一个导致此错误的问题: 挂-木弟,关掉试试.</p></li></ul></details></li></ul><hr><ul><li><p>pip</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">pip config set global.index-url https：//pypi.tuna.tsinghua.edu.cn/simple/</span><br></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">global</span>]</span><br><span class="line"><span class="keyword">index</span>-url = http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line"><span class="keyword">trusted</span>-host = mirrors.aliyun.com</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="修改依赖路径">修改依赖路径</h3><blockquote><p><a href="https://www.cnblogs.com/maggieq8324/p/12099068.html">pip install 默认安装路径修改</a></p></blockquote><ul><li><p>anaconda 安装后默认情况下 pip/conda 的库会堆在 anaconda 里面(所以一般不用动了)</p></li><li><p>依赖路径</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">python -m site</span></span><br></pre></td></tr></table></figure><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">❯   python -m site</span><br><span class="line">sys.path = [</span><br><span class="line">    &#x27;D:<span class="symbol">\\</span>Game<span class="symbol">\\</span>Github<span class="symbol">\\</span>Blog-private&#x27;,</span><br><span class="line">    &#x27;D:<span class="symbol">\\</span>Game<span class="symbol">\\</span>Scoop<span class="symbol">\\</span>apps<span class="symbol">\\</span>anaconda3<span class="symbol">\\</span>current<span class="symbol">\\</span>python38.zip&#x27;,</span><br><span class="line">    &#x27;D:<span class="symbol">\\</span>Game<span class="symbol">\\</span>Scoop<span class="symbol">\\</span>apps<span class="symbol">\\</span>anaconda3<span class="symbol">\\</span>current<span class="symbol">\\</span>DLLs&#x27;,</span><br><span class="line">    &#x27;D:<span class="symbol">\\</span>Game<span class="symbol">\\</span>Scoop<span class="symbol">\\</span>apps<span class="symbol">\\</span>anaconda3<span class="symbol">\\</span>current<span class="symbol">\\</span>lib&#x27;,</span><br><span class="line">    &#x27;D:<span class="symbol">\\</span>Game<span class="symbol">\\</span>Scoop<span class="symbol">\\</span>apps<span class="symbol">\\</span>anaconda3<span class="symbol">\\</span>current&#x27;,</span><br><span class="line">    &#x27;D:<span class="symbol">\\</span>Game<span class="symbol">\\</span>Scoop<span class="symbol">\\</span>apps<span class="symbol">\\</span>anaconda3<span class="symbol">\\</span>current<span class="symbol">\\</span>lib<span class="symbol">\\</span>site-packages&#x27;,</span><br><span class="line">    &#x27;D:<span class="symbol">\\</span>Game<span class="symbol">\\</span>Scoop<span class="symbol">\\</span>apps<span class="symbol">\\</span>anaconda3<span class="symbol">\\</span>current<span class="symbol">\\</span>lib<span class="symbol">\\</span>site-packages<span class="symbol">\\</span>locket-0.2.1-py3.8.egg&#x27;,</span><br><span class="line">    &#x27;D:<span class="symbol">\\</span>Game<span class="symbol">\\</span>Scoop<span class="symbol">\\</span>apps<span class="symbol">\\</span>anaconda3<span class="symbol">\\</span>current<span class="symbol">\\</span>lib<span class="symbol">\\</span>site-packages<span class="symbol">\\</span>win32&#x27;,</span><br><span class="line">    &#x27;D:<span class="symbol">\\</span>Game<span class="symbol">\\</span>Scoop<span class="symbol">\\</span>apps<span class="symbol">\\</span>anaconda3<span class="symbol">\\</span>current<span class="symbol">\\</span>lib<span class="symbol">\\</span>site-packages<span class="symbol">\\</span>win32<span class="symbol">\\</span>lib&#x27;,</span><br><span class="line">    &#x27;D:<span class="symbol">\\</span>Game<span class="symbol">\\</span>Scoop<span class="symbol">\\</span>apps<span class="symbol">\\</span>anaconda3<span class="symbol">\\</span>current<span class="symbol">\\</span>lib<span class="symbol">\\</span>site-packages<span class="symbol">\\</span>Pythonwin&#x27;,</span><br><span class="line">]</span><br><span class="line">USER_BASE: &#x27;C:<span class="symbol">\\</span>Users<span class="symbol">\\</span>29845<span class="symbol">\\</span>AppData<span class="symbol">\\</span>Roaming<span class="symbol">\\</span>Python&#x27; (exists)</span><br><span class="line">USER_SITE: &#x27;C:<span class="symbol">\\</span>Users<span class="symbol">\\</span>29845<span class="symbol">\\</span>AppData<span class="symbol">\\</span>Roaming<span class="symbol">\\</span>Python<span class="symbol">\\</span>Python38<span class="symbol">\\</span>site-packages&#x27; (doesn&#x27;t exist)</span><br><span class="line">ENABLE_USER_SITE: False</span><br></pre></td></tr></table></figure></li><li><p>配置文件路径 (非必要不然不要修改,此处可以更改上面的 USER_BASE/USER_SITE,但实测并未生效)</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">python</span> -m site -<span class="keyword">help</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="激活终端">激活终端</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="keyword">init</span> 终端名(powershell)</span><br></pre></td></tr></table></figure><hr><h3 id="CUDA-cuDNN">CUDA-cuDNN</h3><ul><li><p>这两个是为了调用显卡性能,加速训练.</p><p>需要注册 NVIDIA 账号才能下载.</p><blockquote><p><a href="https://developer.nvidia.com/cuda-zone">下载并安装 CUDA</a> <br><a href="https://developer.nvidia.com/cudnn">下载并安装 cuDNN Library</a></p></blockquote><hr></li><li><p>通过 scoop 安装 CUDA (很有可能安装有问题,即使安装成功也是不能使用的)</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">scoop </span><span class="keyword">install </span>cuda</span><br></pre></td></tr></table></figure><hr></li><li><p>测试了一下, cuDNN Library 也是必须的,没配置的话会报错:</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">RuntimeError:</span> cuDNN <span class="keyword">error</span>: CUDNN_STATUS_EXECUTION_FAILED</span><br></pre></td></tr></table></figure><p><code>配置方法</code>: 解压,把<code>bin\</code>添加进 path</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="PyTorch">PyTorch</h2><blockquote><p><a href="https://zhuanlan.zhihu.com/p/54350088">windows10 下安装 GPU 版 pytorch 简明教程</a> <br><a href="https://pytorch.org/get-started/locally">PyTorch 官网</a> <br><a href="https://zhuanlan.zhihu.com/p/106394476">利用 Conda 安装深度学习框架 Pytorch</a></p></blockquote><ul><li><p>安装 (with CUDA 版本):</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">conda</span> install pytorch==<span class="number">1</span>.<span class="number">9</span>.<span class="number">0</span> torchvision==<span class="number">0</span>.<span class="number">10</span>.<span class="number">0</span> torchaudio==<span class="number">0</span>.<span class="number">9</span>.<span class="number">0</span> cudatoolkit=<span class="number">11</span>.<span class="number">3</span> -c pytorch -c conda-forge</span><br></pre></td></tr></table></figure><hr></li><li><p>测试 (以下图方式进入 <code>Open with python</code>) :</p><img src="https://www.helloimg.com/images/2022/02/27/GVL8KS.png" alt="20210520190432" /><p>测试下方命令就可以了</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import torch</span><br><span class="line">x = torch<span class="selector-class">.rand</span>(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(x)</span></span></span><br></pre></td></tr></table></figure><hr></li><li><p>预期结果: (说明 pytouch 没得问题)</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tensor(<span class="comment">[<span class="comment">[0.3380, 0.3845, 0.3217]</span>,</span></span><br><span class="line"><span class="comment">        <span class="comment">[0.8337, 0.9050, 0.2650]</span>,</span></span><br><span class="line"><span class="comment">        <span class="comment">[0.2979, 0.7141, 0.9069]</span>,</span></span><br><span class="line"><span class="comment">        <span class="comment">[0.1449, 0.1132, 0.1375]</span>,</span></span><br><span class="line"><span class="comment">        <span class="comment">[0.4675, 0.3947, 0.1426]</span>]</span>)</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="实例">实例</h3><blockquote><p>通过一段音频,合成相似声音的项目: <a href="https://github.com/CorentinJ/Real-Time-Voice-Cloning">CorentinJ/Real-Time-Voice-Cloning</a></p></blockquote><ul><li><p>CUDA: on,可以看到 python 调用了 <code>CPU+GPU</code></p><img src="https://www.helloimg.com/images/2022/02/27/GVAAGr.png" alt="20210521102521" /></li><li><p>深度学习项目吃显存好离谱啊!</p><img src="https://www.helloimg.com/images/2022/02/27/GVA6R6.png" alt="20210521104118" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="依赖">依赖</h2><h3 id="更新依赖">更新依赖</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="keyword">update</span> --<span class="keyword">all</span></span><br></pre></td></tr></table></figure><hr><h3 id="install-报错">install-报错</h3><p>conda install pydotplus 时遇到报错:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">RemoveError: &#x27;requests&#x27; is a dependency of conda and cannot be removed from ...</span></span><br></pre></td></tr></table></figure><p>遇到这报错, 更新下 conda,然后再安装</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="keyword">update</span> --<span class="keyword">force</span> conda</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="导出-安装依赖">导出-安装依赖</h3><blockquote><p><a href="https://blog.csdn.net/chekongfu/article/details/83187591">pip 和 conda 批量导出、安装组件(requirements.txt)</a></p></blockquote><ul><li><p>安装依赖</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">install</span> -r requirements.txt</span><br><span class="line">conda <span class="keyword">install</span> --<span class="keyword">file</span> requirements.txt (尽量不要用,有很多问题)</span><br><span class="line">conda env create -f env.yaml</span><br></pre></td></tr></table></figure></li><li><p>导出依赖</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">freeze</span> &gt; requirements.txt</span><br><span class="line">conda list -e &gt; requirements.txt</span><br><span class="line">conda env export &gt; env.yaml</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><details>  <summary> conda/pip 导出的 requirement.txt 有可能有个问题 </summary><hr><ul><li><p>pip 导出的,以及安装报错</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">anaconda-client @ file:///C:/ci/anaconda-client_1624480273070/work</span><br><span class="line">anaconda-navigator==2.1.0</span><br><span class="line">anyio==3.3.4</span><br><span class="line">appdirs==1.4.4</span><br><span class="line">argon2-cffi @ file:///C:/ci/argon2-cffi_1613037959010/work</span><br><span class="line">async-generator @ file:///home/ktietz/src/ci/async_generator_1611927993394/work</span><br><span class="line">attrs @ file:///tmp/build/80754af9/attrs_1620827162558/work</span><br><span class="line">audioread==2.1.9</span><br><span class="line">Babel @ file:///tmp/build/80754af9/babel_1620871417480/work</span><br><span class="line">backcall @ file:///home/ktietz/src/ci/backcall_1611930011877/work</span><br><span class="line">backports.functools-lru-cache @ file:///tmp/build/80754af9/backports.functools_lru_cache_1618170165463/work</span><br><span class="line">backports.tempfile @ file:///home/linux1/recipes/ci/backports.tempfile_1610991236607/work</span><br><span class="line">backports.weakref==1.0.post1</span><br><span class="line">beautifulsoup4 @ file:///home/linux1/recipes/ci/beautifulsoup4_1610988766420/work</span><br><span class="line">bleach @ file:///tmp/build/80754af9/bleach_1626470256873/work</span><br><span class="line">brotlipy==0.7.0</span><br></pre></td></tr></table></figure><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">❯ pip install -r .\pip-list.bak</span><br><span class="line">Looking in indexes: http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">Processing c:\ci\anaconda-client_1624480273070\work</span><br><span class="line"><span class="keyword">ERROR: </span>Could not install packages due to an OSError: [Errno 2] No such file or directory: &#x27;C:\\ci\\anaconda-client_1624480273070\\work&#x27;</span><br></pre></td></tr></table></figure><p>解决办法就是硬匹配所有 <code> @ file:</code> 把后面的删掉.</p><hr></li></ul></details></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="报错-2">报错</h2><h3 id="安装报错">安装报错</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">╭─    D:\Repo\Weidows\python   master                              ✔  22:53:48  ─╮</span><br><span class="line">╰─ python</span><br><span class="line">Fatal Python error: init_import_site: Failed to import the site module</span><br><span class="line">Python runtime state: initialized</span><br><span class="line">ModuleNotFoundError: No module named &#x27;site&#x27;</span><br><span class="line"></span><br><span class="line">Current thread 0x00002a54 (most recent call first):</span><br><span class="line">&lt;no Python frame&gt;</span><br></pre></td></tr></table></figure><p>由于使用 scoop 安装的,我以为是我自己环境的错误,后来发现是因为安装脚本中 <code>persist</code> 软链接会导致 anaconda 内部错误</p><p>这个库 <code>anaconda3_chawyehsu</code> 给的我启发,虽然这个安装脚本也不并不很好用</p><p>于是我在自己库中添加了一个: <a href="https://github.com/Weidows-projects/scoop-3rd/blob/main/bucket/anaconda3.json">https://github.com/Weidows-projects/scoop-3rd/blob/main/bucket/anaconda3.json</a></p><hr><h3 id="环境不一致">环境不一致</h3><ul><li><p>之前遇到个问题苦恼了很久:</p><p>有一个 py 脚本我想通过 bat 脚本调用执行,但是一直报错</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Traceback</span> (most recent call last):</span><br><span class="line">  <span class="built_in">File</span> <span class="string">&quot;D:\Game\Scoop\apps\anaconda3\current\lib\site-packages\urllib3\connectionpool.py&quot;</span>, line <span class="number">688</span>, in urlopen</span><br><span class="line">    conn = self._get_conn(timeout=pool_timeout)</span><br><span class="line">  <span class="built_in">File</span> <span class="string">&quot;D:\Game\Scoop\apps\anaconda3\current\lib\site-packages\urllib3\connectionpool.py&quot;</span>, line <span class="number">280</span>, in _get_conn</span><br><span class="line">    <span class="keyword">return</span> conn <span class="keyword">or</span> self._new_conn()</span><br><span class="line">  <span class="built_in">File</span> <span class="string">&quot;D:\Game\Scoop\apps\anaconda3\current\lib\site-packages\urllib3\connectionpool.py&quot;</span>, line <span class="number">979</span>, in _new_conn</span><br><span class="line">    raise <span class="built_in">SSLError</span>(</span><br><span class="line">urllib3.exceptions.SSLError: Can<span class="number">&#x27;</span>t connect to HTTPS URL because the SSL <span class="keyword">module</span> is <span class="keyword">not</span> available.</span><br></pre></td></tr></table></figure><p>大致意思就是缺少依赖,但是我已经装好依赖了,而且通过 PowerShell 可以正常运行</p></li><li><p>后来突然想到是 python 环境没开:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="built_in">activate</span> base</span><br></pre></td></tr></table></figure><p>事情不大,烦恼不小</p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> anaconda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis~(贰)</title>
      <link href="/post/Java/MyBatis/3/"/>
      <url>/post/Java/MyBatis/3/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-06-23 15:12:45 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\MyBatis\3.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81">笔记代码</a></li><li><a href="#%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B">面向接口编程</a></li><li><a href="#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91">注解开发</a><ul><li><a href="#%E7%AE%80%E5%8D%95%E4%B8%8A%E6%89%8B">简单上手</a></li><li><a href="#%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90">原理分析</a></li><li><a href="#crud">CRUD</a></li></ul></li><li><a href="#%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB">对应关系</a><ul><li><a href="#%E5%A4%9A%E5%AF%B9%E4%B8%80">多对一</a></li></ul></li></ul><h2 id="笔记代码-2"><a href="https://github.com/Weidows/Weidows/blob/09b2ed9b8e2b87709f36228e0ce46fe977534ce9/MyBatis/">笔记代码</a></h2><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="面向接口编程">面向接口编程</h2><ul><li><p>主要目的就是<code>解耦</code>,分层开发中,上层业务不用管具体的实现.</p></li><li><p>使得 <code>规范</code> 和 <code>实现</code> 两部分分离,接口作为项目骨架.</p></li></ul><hr><h2 id="注解开发">注解开发</h2><h3 id="简单上手">简单上手</h3><ul><li><p>接口上直接注解 SQL 语句</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">  <span class="meta">@Select(&quot;select * from mybatis.user&quot;)</span></span><br><span class="line">  List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>绑定接口</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--之前是用xml绑定的--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--&lt;mapper resource=&quot;Mappers/UserMapper.xml&quot;/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--这里换成绑定接口--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;dao.UserMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>实现原理: 通过<code>反射机制</code>获取接口中的信息,然后用<code>动态代理</code>实现业务.</p><img src="https://www.helloimg.com/images/2022/02/27/GV4Pvb.png" alt="代理模式.drawio" /></li><li><p>调试</p><img src="https://www.helloimg.com/images/2022/02/27/GVSSqb.png" alt="20210522000831" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="原理分析">原理分析</h3><blockquote><p><a href="https://blog.csdn.net/qq_38270106/article/details/93398694">mybatis 的执行流程</a></p></blockquote><img src="https://www.helloimg.com/images/2022/02/27/GViQrb.png" alt="MyBatis流程.drawio" /><hr><h3 id="CRUD">CRUD</h3><ul><li><p><code>UserMapper</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"><span class="keyword">import</span> pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Select(&quot;select * from mybatis.user&quot;)</span></span><br><span class="line">  List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    基本类型的参数或者String类型，需要加上</span></span><br><span class="line"><span class="comment">    引用类型不需要加</span></span><br><span class="line"><span class="comment">    如果只有一个基本类型的话，可以忽略，但是建议都加上</span></span><br><span class="line"><span class="comment">    我们在SQL中引用的就是我们这里的@Param()中设定的属性名</span></span><br><span class="line"><span class="comment">    重要: 这里方法不能重载! 两个同名方法会使MyBatis运行报错(开发时JDK不会报错)</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="meta">@Select(&quot;select * from mybatis.user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">  User <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 多个参数的情况下,必须加上@Param注解</span></span><br><span class="line">  <span class="meta">@Select(&quot;select * from mybatis.user where id = #&#123;id&#125; and name = #&#123;name&#125;&quot;)</span></span><br><span class="line">  User <span class="title function_">getUserByIdAndName</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">int</span> id, <span class="meta">@Param(&quot;name&quot;)</span> String name)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Insert(&quot;insert into mybatis.user(id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;)&quot;)</span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//注意SQL格式,set 和 where顺序不能颠倒</span></span><br><span class="line">  <span class="meta">@Update(&quot;update mybatis.user set name = #&#123;name&#125;,pwd = #&#123;pwd&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">updateUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Delete(&quot;delete from mybatis.user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">deleteUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p>test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> pojo.User;</span><br><span class="line"><span class="keyword">import</span> utils.MyBatisUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUsers</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    List&lt;User&gt; userList = userMapper.getUsers();</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">      System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetUserById</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.getUserById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUserById</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.getUserByIdAndName(<span class="number">1</span>, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> userMapper.addUser(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">7</span>, <span class="string">&quot;七七&quot;</span>, <span class="string">&quot;45648&quot;</span>));</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>)</span><br><span class="line">      sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateUser</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> userMapper.updateUser(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">7</span>, <span class="string">&quot;七七&quot;</span>, <span class="string">&quot;12345678&quot;</span>));</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>)</span><br><span class="line">      sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUserById</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="keyword">if</span> (userMapper.deleteUserById(<span class="number">7</span>) &gt; <span class="number">0</span>)</span><br><span class="line">      sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="对应关系">对应关系</h2><ul><li>SQL初始化:</li></ul><h3 id="多对一">多对一</h3><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> MyBatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> mybatis </tag>
            
            <tag> 数据库 </tag>
            
            <tag> 注解 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis~(贰)</title>
      <link href="/post/Java/MyBatis/2/"/>
      <url>/post/Java/MyBatis/2/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-05-16 11:19:03 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\MyBatis\2.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81">笔记代码</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90">配置解析</a><ul><li><a href="#environments">environments</a></li><li><a href="#properties">properties</a></li><li><a href="#typealiases">typeAliases</a></li><li><a href="#settings">Settings</a></li><li><a href="#plugins">plugins</a></li><li><a href="#mappers">mappers</a></li><li><a href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">作用域/生命周期</a></li></ul></li><li><a href="#%E5%B1%9E%E6%80%A7%E5%90%8D%E5%92%8C%E5%AD%97%E6%AE%B5%E5%90%8D%E4%B8%8D%E4%B8%80%E8%87%B4%E7%9A%84%E9%97%AE%E9%A2%98">属性名和字段名不一致的问题</a><ul><li><a href="#%E9%97%AE%E9%A2%98%E5%B1%95%E7%A4%BA">问题展示</a></li><li><a href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95">解决办法</a><ul><li><a href="#%E8%B5%B7%E5%88%AB%E5%90%8D">起别名</a></li><li><a href="#resultmap">resultMap</a></li></ul></li></ul></li><li><a href="#%E6%97%A5%E5%BF%97">日志</a><ul><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#stdout_logging">STDOUT_LOGGING</a></li><li><a href="#log4j">Log4j</a></li></ul></li><li><a href="#%E5%88%86%E9%A1%B5">分页</a></li></ul><h2 id="笔记代码"><a href="https://github.com/Weidows/Weidows/blob/09b2ed9b8e2b87709f36228e0ce46fe977534ce9/MyBatis/">笔记代码</a></h2><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="配置解析">配置解析</h2><p><code>MyBatis-Config.xml</code>这个文件,配置层级如下</p><ul><li><p>configuration（配置）</p><ul><li>properties（属性）</li><li>settings（设置）</li><li>typeAliases（类型别名）</li><li>typeHandlers（类型处理器）*</li><li>objectFactory（对象工厂）*</li><li>plugins（插件）*</li><li>environments（环境配置）<ul><li>environment（环境变量）<ul><li>transactionManager（事务管理器）</li><li>dataSource（数据源）</li></ul></li></ul></li><li>databaseIdProvider（数据库厂商标识）</li><li>mappers（映射器）</li></ul></li><li><p>带 <code>'\*'</code> 的是了解即可的.</p></li></ul><hr><h3 id="environments">environments</h3><ul><li><p>MyBatis 可以适应连接多个环境,但是每个 SqlSessionFactory 只能选择一种环境</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?userSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?userSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>MyBatis 默认事务管理器是 JDBC,数据源类型可用 POOLED/UNPOOLED/JNDI</p><p>常见的数据源: dbcp, c3p0, druid</p><p><a href="https://www.php.cn/mysql-tutorials-378143.html">数据源有哪几种？</a></p></li></ul><hr><h3 id="properties">properties</h3><ul><li><p>可以通过 properties 属性来实现引用配置文件,比如把上方的 xml 配置抽离到 <code>db.properties</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?userSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?userSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入外部配置文件,同时增添一些配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="typeAliases">typeAliases</h3><ul><li><p>可以给配置起一个别名,或者扫描导入 pojo 包</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--相当于&lt;typeAlias type=&quot;pojo.User&quot; alias=&quot;user&quot;/&gt;--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;pojo.User&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--在没有注解的情况下，会使用 Bean 的首字母小写的非限定类名来作为它的别名.比如pojo.User别名为user--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>注解方式起别名</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>MyBatis 还有一些默认的别名</p><img src="https://www.helloimg.com/images/2022/02/27/GV4QHq.png" alt="20210507212138" /></li></ul><hr><h3 id="Settings">Settings</h3><ul><li><p>会改变 MyBatis 运行状态的配置</p></li><li><p>需要修改时找文档就行.</p></li></ul><hr><h3 id="plugins">plugins</h3><ul><li>mybatis-generator-core</li><li>mybatis-plus</li><li>通用 mapper</li></ul><hr><h3 id="mappers">mappers</h3><ul><li><p>注册绑定我们的 Mapper.xml 文件,有下面三种方式:</p><p>这三种不能同时导入同一个资源,会冲突报错</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    1. (推荐)</span></span><br><span class="line"><span class="comment">    每一个Mapper.xml都需要在MyBatis核心配置文件中注册</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    2.</span></span><br><span class="line"><span class="comment">    使用class文件绑定注册</span></span><br><span class="line"><span class="comment">    注意:接口和他的Mapper配置文件必须同名且在同一个包下</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;dao.UserMapper&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    3.</span></span><br><span class="line"><span class="comment">    使用包扫描进行注入</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="作用域-生命周期">作用域/生命周期</h3><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GV4bPP.png" alt="20210508000956" /><img src="https://www.helloimg.com/images/2022/02/27/GV4p7r.png" alt="20210508000002" /></blockquote><ul><li><p>SqlSessionFactoryBuilder: 创建 SqlSessionFactory 之后就被消除的局部变量</p></li><li><p>SqlSessionFactory</p><p>可以想象为：<code>数据库连接池</code></p><p>被创建之后在应用运行期间<code>一直存在</code></p><p><code>应用作用域</code>,使用(静态)<code>单例模式</code></p><hr></li><li><p>SqlSession</p><p>连接到连接池的一个请求</p><p><code>线程不安全</code>,因此是不能被共享的，所以它的最佳的作用域是请求或方法作用域。</p><p>用完就需要关掉,否则占用资源.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="属性名和字段名不一致的问题">属性名和字段名不一致的问题</h2><h3 id="问题展示">问题展示</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="comment">//password - pwd 属性名和字段名不一致</span></span><br><span class="line">  <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>结果: 在数据库查不到名为&quot;password&quot;的字段,所以 password 显示为 null</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">User(<span class="attribute">id</span>=1, <span class="attribute">name</span>=张三, <span class="attribute">password</span>=<span class="literal">null</span>)</span><br><span class="line">User(<span class="attribute">id</span>=2, <span class="attribute">name</span>=李四, <span class="attribute">password</span>=<span class="literal">null</span>)</span><br><span class="line">User(<span class="attribute">id</span>=3, <span class="attribute">name</span>=王五, <span class="attribute">password</span>=<span class="literal">null</span>)</span><br><span class="line">User(<span class="attribute">id</span>=4, <span class="attribute">name</span>=赵六, <span class="attribute">password</span>=<span class="literal">null</span>)</span><br><span class="line">User(<span class="attribute">id</span>=6, <span class="attribute">name</span>=王虎, <span class="attribute">password</span>=<span class="literal">null</span>)</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="解决办法">解决办法</h3><h4 id="起别名">起别名</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> user <span class="keyword">where</span> <span class="built_in">id</span> = <span class="comment">#&#123;id&#125;</span></span><br><span class="line"></span><br><span class="line">select <span class="built_in">id</span>,<span class="built_in">name</span>,pwd <span class="keyword">from</span> user <span class="keyword">where</span> <span class="built_in">id</span> = <span class="comment">#&#123;id&#125;</span></span><br></pre></td></tr></table></figure><hr><h4 id="resultMap">resultMap</h4><blockquote><p>MyBatis 中最重要最强大的元素。</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    property: User中的属性名</span></span><br><span class="line"><span class="comment">    column: 数据库的字段名</span></span><br><span class="line"><span class="comment">    只需要设置这条名字不一样的映射</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userResultMap&quot;</span>&gt;</span></span><br><span class="line">  select *</span><br><span class="line">  from User</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="日志">日志</h2><h3 id="简介-7">简介</h3><ul><li><p>用来查看运行状态,<code>排错</code>.</p></li><li><p>之前用的是 sout,debug 这种,现在出现了<code>日志工厂</code>,方便做日志</p><ul><li><p>SLF4J</p></li><li><p>LOG4J 【掌握】</p></li><li><p>LOG4J2</p></li><li><p>JDK_LOGGING</p></li><li><p>COMMONS_LOGGING</p></li><li><p>STDOUT_LOGGING 【掌握】</p></li><li><p>NO_LOGGING</p></li></ul></li></ul><hr><h3 id="STDOUT-LOGGING">STDOUT_LOGGING</h3><ul><li><p>在 MyBatis-config.xml 中写入配置 (注意 settings 标签所处上下位置不要错)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><hr></li><li><p>自动添加这种日志</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Opening JDBC<span class="built_in"> Connection</span></span><br><span class="line"><span class="built_in"></span>Sun May 09 23:57:40 CST 2021 WARN: Establishing SSL<span class="built_in"> connection </span>without server<span class="string">&#x27;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#x27;</span>t set. <span class="keyword">For</span> compliance with existing applications <span class="keyword">not</span> using SSL the verifyServerCertificate property is <span class="built_in">set</span> <span class="keyword">to</span> <span class="string">&#x27;false&#x27;</span>. You need either <span class="keyword">to</span> explicitly <span class="built_in">disable</span> SSL by setting <span class="attribute">useSSL</span>=<span class="literal">false</span>, <span class="keyword">or</span> <span class="built_in">set</span> <span class="attribute">useSSL</span>=<span class="literal">true</span> <span class="keyword">and</span> provide truststore <span class="keyword">for</span><span class="built_in"> server </span>certificate verification.</span><br><span class="line">Created<span class="built_in"> connection </span>1524305331.</span><br><span class="line">Setting autocommit <span class="keyword">to</span> <span class="literal">false</span> on JDBC<span class="built_in"> Connection </span>[com.mysql.cj.jdbc.ConnectionImpl@5adb0db3]</span><br><span class="line">==&gt;  Preparing: select * <span class="keyword">from</span><span class="built_in"> User</span></span><br><span class="line"><span class="built_in"></span>==&gt; Parameters:</span><br><span class="line">&lt;==    Columns: id, name, pwd</span><br><span class="line">&lt;==        Row: 1, 张三, 123456</span><br><span class="line">&lt;==        Row: 2, 李四, 123456</span><br><span class="line">&lt;==        Row: 3, 王五, 123456</span><br><span class="line">&lt;==        Row: 4, 赵六, 123456</span><br><span class="line">&lt;==        Row: 6, 王虎, 789</span><br><span class="line">&lt;==      Total: 5</span><br><span class="line">User(<span class="attribute">id</span>=1, <span class="attribute">name</span>=张三, <span class="attribute">password</span>=123456)</span><br><span class="line">User(<span class="attribute">id</span>=2, <span class="attribute">name</span>=李四, <span class="attribute">password</span>=123456)</span><br><span class="line">User(<span class="attribute">id</span>=3, <span class="attribute">name</span>=王五, <span class="attribute">password</span>=123456)</span><br><span class="line">User(<span class="attribute">id</span>=4, <span class="attribute">name</span>=赵六, <span class="attribute">password</span>=123456)</span><br><span class="line">User(<span class="attribute">id</span>=6, <span class="attribute">name</span>=王虎, <span class="attribute">password</span>=789)</span><br><span class="line">Resetting autocommit <span class="keyword">to</span> <span class="literal">true</span> on JDBC<span class="built_in"> Connection </span>[com.mysql.cj.jdbc.ConnectionImpl@5adb0db3]</span><br><span class="line">Closing JDBC<span class="built_in"> Connection </span>[com.mysql.cj.jdbc.ConnectionImpl@5adb0db3]</span><br><span class="line">Returned<span class="built_in"> connection </span>1524305331 <span class="keyword">to</span> pool.</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="Log4j">Log4j</h3><p>更加细化,配置化的日志工厂</p><ul><li><p>依赖:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><hr></li><li><p>配置文件 <code>src/main/resources/log4j.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将等级为DEBUG的日志信息输出到console和file</span></span><br><span class="line"><span class="attr">log4j.rootLogger</span>=<span class="string">DEBUG,console,file</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#日志输出级别</span></span><br><span class="line"><span class="attr">log4j.logger.org.mybatis</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.Statement</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.ResultSet</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sq1.PreparedStatement</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#控制台输出的相关设置</span></span><br><span class="line"><span class="attr">log4j.appender.console</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">log4j.appender.console.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="attr">log4j.appender.console.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.appender.console.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.console.layout.ConversionPattern</span>=<span class="string">[%c]-%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#文件输出的相关设置</span></span><br><span class="line"><span class="attr">log4j.appender.file</span> = <span class="string">org.apache.log4j.RollingFileAppender</span></span><br><span class="line"><span class="comment">#输出路径</span></span><br><span class="line"><span class="attr">log4j.appender.file.File</span>=<span class="string">./log/rzp.log</span></span><br><span class="line"><span class="attr">log4j.appender.file.MaxFileSize</span>=<span class="string">10mb</span></span><br><span class="line"><span class="attr">log4j.appender.file.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.appender.file.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.file.layout.ConversionPattern</span>=<span class="string">[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n</span></span><br></pre></td></tr></table></figure><hr></li><li><p>测试 <code>src/test/java/Log4jTest.java</code></p><p>日志有三个输出等级</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dao.UserMapperTest;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Log4jTest</span> &#123;</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    UserMapperTest.getUserList();</span><br><span class="line">    <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> Logger.getLogger(Log4jTest.class);</span><br><span class="line">    logger.info(<span class="string">&quot;info: 测试log4j&quot;</span>);</span><br><span class="line">    logger.debug(<span class="string">&quot;debug: 测试log4j&quot;</span>);</span><br><span class="line">    logger.error(<span class="string">&quot;error:测试log4j&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>结果日志</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.logging.<span class="symbol">LogFactory</span>]<span class="symbol">Logging</span> initialized using <span class="string">&#x27;class org.apache.ibatis.logging.log4j.Log4jImpl&#x27;</span> adapter.</span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.logging.<span class="symbol">LogFactory</span>]<span class="symbol">Logging</span> initialized using <span class="string">&#x27;class org.apache.ibatis.logging.log4j.Log4jImpl&#x27;</span> adapter.</span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.datasource.pooled.<span class="symbol">PooledDataSource</span>]<span class="symbol">PooledDataSource</span> forcefully closed/removed all connections.</span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.datasource.pooled.<span class="symbol">PooledDataSource</span>]<span class="symbol">PooledDataSource</span> forcefully closed/removed all connections.</span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.datasource.pooled.<span class="symbol">PooledDataSource</span>]<span class="symbol">PooledDataSource</span> forcefully closed/removed all connections.</span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.datasource.pooled.<span class="symbol">PooledDataSource</span>]<span class="symbol">PooledDataSource</span> forcefully closed/removed all connections.</span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.transaction.jdbc.<span class="symbol">JdbcTransaction</span>]<span class="symbol">Opening</span> <span class="symbol">JDBC</span> <span class="symbol">Connection</span></span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.datasource.pooled.<span class="symbol">PooledDataSource</span>]<span class="symbol">Created</span> connection <span class="number">24650043.</span></span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.transaction.jdbc.<span class="symbol">JdbcTransaction</span>]<span class="symbol">Setting</span> autocommit to false on <span class="symbol">JDBC</span> <span class="symbol">Connection</span> [com.mysql.cj.jdbc.<span class="symbol">ConnectionImpl</span>@<span class="number">178213</span>b]</span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][dao.<span class="symbol">UserMapper</span>.getUserList]==&gt;  <span class="symbol">Preparing</span>: select * from <span class="symbol">User</span></span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][dao.<span class="symbol">UserMapper</span>.getUserList]==&gt; <span class="symbol">Parameters</span>:</span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][dao.<span class="symbol">UserMapper</span>.getUserList]&lt;==      <span class="symbol">Total</span>: <span class="number">5</span></span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.transaction.jdbc.<span class="symbol">JdbcTransaction</span>]<span class="symbol">Resetting</span> autocommit to true on <span class="symbol">JDBC</span> <span class="symbol">Connection</span> [com.mysql.cj.jdbc.<span class="symbol">ConnectionImpl</span>@<span class="number">178213</span>b]</span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.transaction.jdbc.<span class="symbol">JdbcTransaction</span>]<span class="symbol">Closing</span> <span class="symbol">JDBC</span> <span class="symbol">Connection</span> [com.mysql.cj.jdbc.<span class="symbol">ConnectionImpl</span>@<span class="number">178213</span>b]</span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][org.apache.ibatis.datasource.pooled.<span class="symbol">PooledDataSource</span>]<span class="symbol">Returned</span> connection <span class="number">24650043</span> to pool.</span><br><span class="line">[<span class="symbol">INFO</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][<span class="symbol">Log4jTest</span>]info: 测试log4j</span><br><span class="line">[<span class="symbol">DEBUG</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][<span class="symbol">Log4jTest</span>]debug: 测试log4j</span><br><span class="line">[<span class="symbol">ERROR</span>][<span class="number">21</span><span class="number">-05</span><span class="number">-11</span>][<span class="symbol">Log4jTest</span>]error:测试log4j</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="分页">分页</h2><ul><li><p>简单的分页查询,可能会有报错,但是可以正常运行</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; <span class="title function_">getUsersByLimit</span><span class="params">(Map&lt;String, Integer&gt; map)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--分页查询--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUsersByLimit&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">  select *</span><br><span class="line">  from mybatis.user</span><br><span class="line">  limit #&#123;startIndex&#125;,#&#123;pageSize&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUserByLimit</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">  <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">  HashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">  map.put(<span class="string">&quot;startIndex&quot;</span>, <span class="number">1</span>);</span><br><span class="line">  map.put(<span class="string">&quot;pageSize&quot;</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  List&lt;User&gt; list = mapper.getUsersByLimit(map);</span><br><span class="line">  <span class="keyword">for</span> (User user : list) &#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> MyBatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> mybatis </tag>
            
            <tag> map </tag>
            
            <tag> crud </tag>
            
            <tag> 日志 </tag>
            
            <tag> 分页 </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis~(壹)初探.</title>
      <link href="/post/Java/MyBatis/1/"/>
      <url>/post/Java/MyBatis/1/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-05-22 10:54:52 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\MyBatis\1.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81">项目代码</a></li><li><a href="#%E5%8F%82%E7%85%A7">参照</a></li><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#hello-mybatis">Hello-MyBatis</a><ul><li><a href="#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">环境配置</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93">数据库</a></li><li><a href="#%E5%B7%A5%E5%85%B7%E7%B1%BB">工具类</a></li><li><a href="#dao">Dao</a></li><li><a href="#%E6%B5%8B%E8%AF%95">测试</a></li></ul></li><li><a href="#%E5%BC%80%E5%A7%8B-crud">开始 CRUD</a></li><li><a href="#%E9%80%9A%E8%BF%87-map-%E4%BC%98%E5%8C%96">通过 Map 优化</a></li></ul><h2 id="项目代码"><a href="https://github.com/Weidows/Weidows/blob/c0e919f1561aa427bbe159c4583bbdd14f26cc98/MyBatis">项目代码</a></h2><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-18">借物表</h2><blockquote><p>在此文章记录了: <a href="../../../others/LearnWay#mybatis">😍Weidows-の成长路线#mybatis</a></p></blockquote><hr><h2 id="简介-6">简介</h2><p>MyBatis 是优秀的持久层框架,简单来说就是方便<code>存-取数据</code>的工具.</p><p>持久层: Dao 层、Service 层、Controller 层</p><ul><li><p>之前听说过 <code>MyBatis-plus</code>,这里贴一篇二者的区别</p><blockquote><p><a href="https://www.jianshu.com/p/8556c8468241">MyBatis 与 MyBatis-plus 的区别</a></p></blockquote><p>下图中蓝色小鸟就是 MyBatis-plus</p><img src="https://www.helloimg.com/images/2022/02/27/GVSWtu.png" alt="20210503164644" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Hello-MyBatis">Hello-MyBatis</h2><h3 id="环境配置">环境配置</h3><ul><li><p>用 Maven 创建空项目,<code>导入依赖</code>&amp;<code>设置 Maven 过滤器</code>:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--导入依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--mysqlq驱动--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--junit--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--Mapper资源导出,不设置的话会报错--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>然后创建空的子模块,子模块中开发就不需要再导入依赖了,MyBatis 需要添加一个配置文件: <code>src/main/resources/MyBatis-config.xml</code></p><ul><li>后面每增加一个 Mapper.xml,都需要在这里面添加 Mapper 映射;后面会提到.</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">    <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--configuration核心配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?userSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="数据库">数据库</h3><ul><li><p>初始化数据库和 pojo</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> schema <span class="keyword">User</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">User</span></span><br><span class="line">(</span><br><span class="line">  id   <span class="type">int</span>                      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">default</span> <span class="keyword">null</span> <span class="keyword">null</span>,</span><br><span class="line">  pwd  <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">default</span> <span class="keyword">null</span> <span class="keyword">null</span>,</span><br><span class="line">  <span class="keyword">constraint</span> User_pk</span><br><span class="line">    <span class="keyword">primary</span> key (id)</span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB</span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">User</span>(id, name, pwd)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">1</span>, <span class="string">&#x27;张三&#x27;</span>, <span class="number">123456</span>),</span><br><span class="line">      (<span class="number">2</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="number">123456</span>),</span><br><span class="line">      (<span class="number">3</span>, <span class="string">&#x27;王五&#x27;</span>, <span class="number">123456</span>),</span><br><span class="line">      (<span class="number">4</span>, <span class="string">&#x27;赵六&#x27;</span>, <span class="number">123456</span>)</span><br></pre></td></tr></table></figure><hr><ul><li><p><code>src/main/java/pojo/User.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> String pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr></li></ul><h3 id="工具类">工具类</h3><p><code>src/main/java/utils/MyBatisUtils.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">//sqlSessionFactory --&gt; sqlSession</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisUtils</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//使用Mybatis第一步 ：获取sqlSessionFactory对象</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;MyBatis-config.xml&quot;</span>;</span><br><span class="line">      <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">      sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 既然有了 SqlSessionFactory，顾名思义，我们可以从中获得 SqlSession 的实例.</span></span><br><span class="line"><span class="comment">  * SqlSession 提供了在数据库执行 SQL 命令所需的所有方法。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Dao">Dao</h3><ul><li><p>dao 中编写<code>接口</code>和绑定 <code>Mapper.xml</code></p><blockquote><p><a href="https://github.com/Weidows/Java/blob/master/MyBatis/1-hello-MyBatis/src/main/java/dao">https://github.com/Weidows/Java/blob/master/MyBatis/1-hello-MyBatis/src/main/java/dao</a></p></blockquote><ul><li><p>这里的 xml 配置绑定好接口,就可以让 MyBatis 负责 SQL 代码了,避免了 dao 层中 JDBC 代码过于繁杂和重复的问题</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">    <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--namespace=绑定一个指定的Dao/Mapper接口--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--这里id就是方法名,相当于实现方法--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from User</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>Mapper.xml 绑定的是与之对应的接口,然后需要在 <code>MyBatis-config.xml</code>中绑定需要的 <code>Mapper.xml</code></p><p><code>绑定关系</code>: UserMapper.java -&gt; UserMapper.xml -&gt; MyBatis-config.xml</p><p>添加绑定如下:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">    <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--configuration核心配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?userSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--绑定Mapper.xml--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="测试-2">测试</h3><ul><li><p>注意 test 中层级与 main 中层级一一对应</p><img src="https://www.helloimg.com/images/2022/02/27/GV4afo.png" alt="20210504111311" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> pojo.User;</span><br><span class="line"><span class="keyword">import</span> utils.MyBatisUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperTest</span> &#123;</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//1.获取SqlSession对象</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="comment">//2.执行SQL</span></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    List&lt;User&gt; userList = userMapper.getUserList();</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">      System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭sqlSession</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//1.获取SqlSession对象</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="comment">//2.执行SQL</span></span><br><span class="line">    List&lt;User&gt; userList = sqlSession.selectList(<span class="string">&quot;dao.UserMapper.getUserList&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">      System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭sqlSession</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>排错:</p><ul><li><p><code>org.apache.ibatis.binding.BindingException: Type interface dao.UserDao is not known to the MapperRegistry.</code></p><p>这是因为 Mapper.xml 资源没有被 Maven 导出,所以找不到资源,<a href="#hello-mybatis">解决办法:资源导出</a></p></li><li><p><code>1字节的UTF-8序列的字节1无效的问题处理</code></p><p>这个问题格外 dan 疼,把下面的 <code>UTF-8</code> 改为 <code>UTF8</code> 试试…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="开始-CRUD">开始 CRUD</h2><ul><li><p>完善 CRUD 只需要修改下面三个文件:</p></li><li><p><code>src/main/java/dao/UserMapper.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">  List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  User <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> <span class="title function_">updateUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> <span class="title function_">deleteUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>src/main/java/dao/UserMapper.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">    <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--namespace=绑定一个指定的Dao/Mapper接口--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--这里id就是方法名,相当于实现方法--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from User</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;pojo.User&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from mybatis.user</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">    insert into mybatis.user(id, name, pwd)</span><br><span class="line">    values (#&#123;id&#125;, #&#123;name&#125;, #&#123;pwd&#125;)</span><br><span class="line">    ## 对象中的属性可以被直接取出来(这里取得可以是传入的参数,也可以是传入对象的属性)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">    update mybatis.user</span><br><span class="line">    set name =#&#123;name&#125;,</span><br><span class="line">        pwd=#&#123;pwd&#125;</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    delete</span><br><span class="line">    from mybatis.user</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><hr></li><li><p><code>src/test/java/dao/UserMapperTest.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> pojo.User;</span><br><span class="line"><span class="keyword">import</span> utils.MyBatisUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperTest</span> &#123;</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//1.获取SqlSession对象</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="comment">//2.执行SQL</span></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    List&lt;User&gt; userList = userMapper.getUserList();</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">      System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭sqlSession</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//1.获取SqlSession对象</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="comment">//2.执行SQL</span></span><br><span class="line">    List&lt;User&gt; userList = sqlSession.selectList(<span class="string">&quot;dao.UserMapper.getUserList&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">      System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭sqlSession</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUserById</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    System.out.println(mapper.getUserById(<span class="number">3</span>));</span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.addUser(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">5</span>, <span class="string">&quot;五号&quot;</span>, <span class="string">&quot;123456&quot;</span>));</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//注意 增删改 需要提交事务</span></span><br><span class="line">      sqlSession.commit();</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateUser</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.updateUser(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">5</span>, <span class="string">&quot;⑤号&quot;</span>, <span class="string">&quot;654321&quot;</span>));</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      sqlSession.commit();</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.deleteUser(<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      sqlSession.commit();</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="通过-Map-优化">通过 Map 优化</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用Map插入用户</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">addUser2</span><span class="params">(Map&lt;String, Object&gt; map)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--通过USer传参的话,必须用User的属性名取出; 而通过map传参的话,属性名可以任意--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser2&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Map&quot;</span>&gt;</span></span><br><span class="line">  insert into mybatis.user(id, name, pwd)</span><br><span class="line">  values (#&#123;userid&#125;, #&#123;username&#125;, #&#123;userpassword&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void addUser2() &#123;</span><br><span class="line">  SqlSession sqlSession = MyBatisUtils.getSqlSession();</span><br><span class="line">  UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">  HashMap&lt;String, Object&gt; map = new HashMap<span class="tag">&lt;&gt;</span>();</span><br><span class="line">  map.put(&quot;userid&quot;, 6);</span><br><span class="line">  map.put(&quot;username&quot;, &quot;王虎&quot;);</span><br><span class="line">  map.put(&quot;userpassword&quot;, 789);</span><br><span class="line"></span><br><span class="line">  int i = mapper.addUser2(map);</span><br><span class="line">  if (i &gt; 0) sqlSession.commit();</span><br><span class="line">  sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> MyBatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> mybatis </tag>
            
            <tag> map </tag>
            
            <tag> crud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥼JavaWeb~(柒)文件/邮件传输.</title>
      <link href="/post/Java/Web/7/"/>
      <url>/post/Java/Web/7/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-05-02 15:29:43 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\Web\7.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81">笔记代码</a></li><li><a href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93">文件传输</a></li><li><a href="#%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81">邮件发送</a><ul><li><a href="#%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6">简单邮件</a></li><li><a href="#%E5%A4%8D%E6%9D%82%E9%82%AE%E4%BB%B6">复杂邮件</a></li></ul></li><li><a href="#lombok">Lombok</a></li><li><a href="#%E6%B3%A8%E5%86%8C-%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6-demo">注册-发送邮件 demo</a></li></ul><h2 id="笔记代码-8"><a href="https://github.com/Weidows/Weidows/blob/060600b2a9e13afa7c2f0e5d887d98b5d59318ce/JavaWeb/Last">笔记代码</a></h2><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="文件传输">文件传输</h2><blockquote><p><a href="https://www.cnblogs.com/melodyjerry/p/13549108.html">参考: 【狂神说 Java】JavaWeb-文件上传</a></p></blockquote><ul><li><p>利用到了 Commons-io,通过 http 和 servlet 传输流文件.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileItem;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileUploadException;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Servlet implementation class FileServlet</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">      <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断上传的文件普通表单还是带文件的表单</span></span><br><span class="line">    <span class="keyword">if</span> (!ServletFileUpload.isMultipartContent(request)) &#123;</span><br><span class="line">      <span class="keyword">return</span>;<span class="comment">//终止方法运行,说明这是一个普通的表单,直接返回</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建上传文件的保存路径，建议在WEB-INF路径下，安全，用户无法直接访问上传的文件</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">tmpPath</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getRealPath(<span class="string">&quot;/WEB-INF/tmp&quot;</span>);</span><br><span class="line">    <span class="type">File</span> <span class="variable">tempFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(tmpPath);</span><br><span class="line">    <span class="keyword">if</span> (!tempFile.exists()) &#123;</span><br><span class="line">      tempFile.mkdir();<span class="comment">//创建临时目录</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建上传文件的保存路径,建议在WEB-INF路径下,安全,用户无法直接访间上传的文件;</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">uploadPath</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getRealPath(<span class="string">&quot;/WEB-INF/upload&quot;</span>);</span><br><span class="line">    <span class="type">File</span> <span class="variable">uploadFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(uploadPath);</span><br><span class="line">    <span class="keyword">if</span> (!uploadFile.exists()) &#123;</span><br><span class="line">      uploadFile.mkdir(); <span class="comment">//创建这个月录</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      处理上传的文件,一般都需要通过流来获取,我们可以使用 request.getInputStream(),原生态的文件上传流获取,十分麻烦</span></span><br><span class="line"><span class="comment">      建议使用 Apache的文件上传组件来实现, common-fileUpload,它需要 commons-io组件</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 获取ServletFileUpload</span></span><br><span class="line">      <span class="type">ServletFileUpload</span> <span class="variable">fileUpload</span> <span class="operator">=</span> getServletFileUpload(tempFile);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 处理上传文件</span></span><br><span class="line">      <span class="comment">// 把前端请求解析，封装成FileItem对象，需要从ServletFileUpload对象中获取</span></span><br><span class="line">      <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> uploadParseRequest(fileUpload, request, uploadPath);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Servlet请求转发消息</span></span><br><span class="line">      <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">        <span class="comment">// Servlet请求转发消息</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;flag&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        request.setAttribute(<span class="string">&quot;flag&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      request.getRequestDispatcher(<span class="string">&quot;info.jsp&quot;</span>).forward(request, response);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (FileUploadException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> ServletFileUpload <span class="title function_">getServletFileUpload</span><span class="params">(File tempFile)</span> &#123;</span><br><span class="line">    <span class="comment">// 创建DiskFileItemFactory对象，处理文件路径或者大小限制</span></span><br><span class="line">    <span class="type">DiskFileItemFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DiskFileItemFactory</span>();</span><br><span class="line">    <span class="comment">// 通过这个工厂设置一个缓冲区,当上传的文件大于这个缓冲区的时候,将他放到临时文件中;</span></span><br><span class="line">    factory.setSizeThreshold((<span class="type">int</span>) <span class="number">2e20</span>);<span class="comment">// 缓冲区大小为1M</span></span><br><span class="line">    factory.setRepository(tempFile);<span class="comment">// 临时目录的保存目录,需要一个file</span></span><br><span class="line"></span><br><span class="line">    <span class="type">ServletFileUpload</span> <span class="variable">servletFileUpload</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletFileUpload</span>(factory);</span><br><span class="line">    <span class="comment">// 处理乱码问题</span></span><br><span class="line">    servletFileUpload.setHeaderEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    <span class="comment">// 设置总共能够上传文件的大小 10M</span></span><br><span class="line">    servletFileUpload.setFileSizeMax((<span class="type">long</span>) <span class="number">2e21</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      监听长传进度</span></span><br><span class="line"><span class="comment">        pBytesRead:已读取到的文件大小</span></span><br><span class="line"><span class="comment">        pContextLength:文件大小</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    servletFileUpload.setProgressListener((<span class="type">long</span> pBytesRead, <span class="type">long</span> pContentLength, <span class="type">int</span> pItems) -&gt; System.out.println(<span class="string">&quot;已上传：&quot;</span> + pBytesRead + <span class="string">&quot;\n总大小：&quot;</span> + pContentLength));</span><br><span class="line">    <span class="keyword">return</span> servletFileUpload;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">uploadParseRequest</span><span class="params">(ServletFileUpload upload, HttpServletRequest request, String uploadPath)</span></span><br><span class="line">      <span class="keyword">throws</span> FileUploadException, IOException &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>; <span class="comment">// 是否成功</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 把前端请求解析，封装成FileItem对象</span></span><br><span class="line">    List&lt;FileItem&gt; fileItems = upload.parseRequest(request);</span><br><span class="line">    <span class="keyword">for</span> (FileItem fileItem : fileItems) &#123;</span><br><span class="line">      <span class="comment">// 判断上传的文件是普通的表单还是带文件的表单</span></span><br><span class="line">      <span class="keyword">if</span> (fileItem.isFormField()) &#123;</span><br><span class="line">        <span class="comment">// getFieldName指的是前端表单控件的name;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> fileItem.getFieldName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> fileItem.getString(<span class="string">&quot;UTF-8&quot;</span>); <span class="comment">// 处理乱码</span></span><br><span class="line">        System.out.println(name + <span class="string">&quot;: &quot;</span> + value);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ============处理文件==============</span></span><br><span class="line">        <span class="comment">// 拿到文件名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uploadFileName</span> <span class="operator">=</span> fileItem.getName();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">          .trim() 删除前后空格</span></span><br><span class="line"><span class="comment">          下面的写法会导致&quot;uploadFileName == null&quot; 一直判定为false :</span></span><br><span class="line"><span class="comment">            uploadFileName.trim().equals(&quot;&quot;) || uploadFileName == null</span></span><br><span class="line"><span class="comment">            反过来就好了,原因是字符串对象引用改变了</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">if</span> (uploadFileName == <span class="literal">null</span> || uploadFileName.trim().equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获得上传的文件名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> uploadFileName.substring(uploadFileName.lastIndexOf(<span class="string">&quot;/&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 获得文件的后缀名,如果文件后缀名fileExtName不是我们所需要的 就直按return.不处理,告诉用户文件类型不对。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileExtName</span> <span class="operator">=</span> uploadFileName.substring(uploadFileName.lastIndexOf(<span class="string">&quot;.&quot;</span>) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;文件名: &quot;</span> + fileName + <span class="string">&quot;\n后缀名&quot;</span> + fileExtName);</span><br><span class="line">        <span class="comment">// ================处理文件完毕==============</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">          UUID.randomUUID(),随机生一个唯一识别的通用码,保证文件夹名唯一</span></span><br><span class="line"><span class="comment">          文件真实存在的路径 realPath</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> uploadPath + <span class="string">&quot;/&quot;</span> + UUID.randomUUID();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 给每个文件创建一个对应的文件夹</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">realPathFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(realPath);</span><br><span class="line">        <span class="keyword">if</span> (!realPathFile.exists()) &#123;</span><br><span class="line">          realPathFile.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ==============存放地址完毕==============</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获得文件上传的流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> fileItem.getInputStream();</span><br><span class="line">        <span class="comment">// 创建一个文件输出流</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(realPath + <span class="string">&quot;/&quot;</span> + fileName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建一个缓冲区</span></span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[(<span class="type">int</span>) <span class="number">2e20</span>]; <span class="comment">// 1M</span></span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = inputStream.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          fileOutputStream.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭流</span></span><br><span class="line">        fileOutputStream.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line"></span><br><span class="line">        flag = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// 上传成功,清除临时文件</span></span><br><span class="line">        fileItem.delete();</span><br><span class="line">        <span class="comment">//=============文件传输完成=============</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>项目地址</p><p>包含用到的 JSP 页面和 xml 配置文件</p><blockquote><p><a href="https://github.com/Weidows/Java/tree/master/JavaWeb/Last">https://github.com/Weidows/Java/tree/master/JavaWeb/Last</a></p></blockquote></li><li><p>问题: 如果 Tomcat 是 10 版本的,运行时会出现 500</p><blockquote><p><a href="https://blog.csdn.net/m0_50905990/article/details/115339679">servlet 配置相关：HTTP 状态 500 - 内部服务器错误问题</a></p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="邮件发送">邮件发送</h2><ul><li><p>原理图:</p><img src="https://www.helloimg.com/images/2022/02/27/GVSoBn.png" alt="邮件传输原理.drawio" /></li><li><p>依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.activation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>activation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.mail/mail --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.mail<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><hr></li></ul><hr><h3 id="简单邮件">简单邮件</h3><ul><li><p>代码:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sun.mail.util.MailSSLSocketFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.mail.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.InternetAddress;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line"><span class="keyword">import</span> java.security.GeneralSecurityException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MailDemo1</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">fromEmailAddress</span> <span class="operator">=</span> <span class="string">&quot;utsuko27@qq.com&quot;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">toEmailAddress</span> <span class="operator">=</span> <span class="string">&quot;utsuko27@163.com&quot;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;这里填授权码&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">//0. 设置连接配置</span></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> getProperties();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.创建定义整个应用程序所需要的环境信息的session对象</span></span><br><span class="line">    <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> Session.getDefaultInstance(properties, <span class="keyword">new</span> <span class="title class_">Authenticator</span>() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">protected</span> PasswordAuthentication <span class="title function_">getPasswordAuthentication</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PasswordAuthentication</span>(fromEmailAddress, password);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//开启session的debug模式，这样可以查看到程序发送Email的运行状态</span></span><br><span class="line">    session.setDebug(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.通过session得到transport对象</span></span><br><span class="line">    <span class="type">Transport</span> <span class="variable">transport</span> <span class="operator">=</span> session.getTransport();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.使用邮箱的用户名和授权码连上邮件服务器</span></span><br><span class="line">    transport.connect(<span class="string">&quot;smtp.qq.com&quot;</span>, fromEmailAddress, password);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.创建邮件：写文件</span></span><br><span class="line">    <span class="type">MimeMessage</span> <span class="variable">message</span> <span class="operator">=</span> getMimeMessage(session);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5.发送邮件</span></span><br><span class="line">    transport.sendMessage(message, message.getAllRecipients());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//6.关闭连接</span></span><br><span class="line">    transport.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Properties <span class="title function_">getProperties</span><span class="params">()</span> <span class="keyword">throws</span> GeneralSecurityException &#123;</span><br><span class="line">    <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    properties.setProperty(<span class="string">&quot;mail.host&quot;</span>, <span class="string">&quot;smtp.qq.com&quot;</span>);<span class="comment">///设置QQ邮件服务器</span></span><br><span class="line">    properties.setProperty(<span class="string">&quot;mail.transport.protocol&quot;</span>, <span class="string">&quot;smtp&quot;</span>);<span class="comment">///邮件发送协议</span></span><br><span class="line">    properties.setProperty(<span class="string">&quot;mail.smtp.auth&quot;</span>, <span class="string">&quot;true&quot;</span>);<span class="comment">//需要验证用户密码</span></span><br><span class="line">    <span class="comment">//设置SSL加密(QQ邮箱需要)</span></span><br><span class="line">    <span class="type">MailSSLSocketFactory</span> <span class="variable">mailSSLSocketFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MailSSLSocketFactory</span>();</span><br><span class="line">    mailSSLSocketFactory.setTrustAllHosts(<span class="literal">true</span>);</span><br><span class="line">    properties.put(<span class="string">&quot;mail.smtp.ssl.enable&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">    properties.put(<span class="string">&quot;mail.smtp.ssl.socketFactory&quot;</span>, mailSSLSocketFactory);</span><br><span class="line">    <span class="keyword">return</span> properties;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> MimeMessage <span class="title function_">getMimeMessage</span><span class="params">(Session session)</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">    <span class="type">MimeMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessage</span>(session);</span><br><span class="line">    <span class="comment">//指明邮件的发件人</span></span><br><span class="line">    message.setFrom(<span class="keyword">new</span> <span class="title class_">InternetAddress</span>(fromEmailAddress));</span><br><span class="line">    <span class="comment">//指明邮件的收件人</span></span><br><span class="line">    message.setRecipient(Message.RecipientType.TO, <span class="keyword">new</span> <span class="title class_">InternetAddress</span>(toEmailAddress));</span><br><span class="line">    <span class="comment">//邮件标题</span></span><br><span class="line">    message.setSubject(<span class="string">&quot;发送的标题&quot;</span>);</span><br><span class="line">    <span class="comment">//邮件的文本内容</span></span><br><span class="line">    message.setContent(<span class="string">&quot;内容&quot;</span>, <span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> message;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><details>  <summary> -> 开启 Debug 后的信息 <-</summary><hr><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">DEBUG: setDebug: JavaMail version 1.4.7</span><br><span class="line">DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Oracle]</span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: useEhlo <span class="literal">true</span>, useAuth <span class="literal">true</span></span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: trying <span class="keyword">to</span> connect <span class="keyword">to</span> host <span class="string">&quot;smtp.qq.com&quot;</span>,<span class="built_in"> port </span>465, isSSL <span class="literal">true</span></span><br><span class="line">220 newxmesmtplogicsvrsza8.qq.com XMail Esmtp QQ Mail Server.</span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: connected <span class="keyword">to</span> host <span class="string">&quot;smtp.qq.com&quot;</span>, port: 465</span><br><span class="line"></span><br><span class="line">EHLO DESKTOP-CTDDD3K</span><br><span class="line">250-newxmesmtplogicsvrsza8.qq.com</span><br><span class="line">250-PIPELINING</span><br><span class="line">250-SIZE 73400320</span><br><span class="line">250-AUTH LOGIN PLAIN XOAUTH XOAUTH2</span><br><span class="line"><span class="attribute">250-AUTH</span>=LOGIN</span><br><span class="line">250-MAILCOMPRESS</span><br><span class="line">250 8BITMIME</span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: Found extension <span class="string">&quot;PIPELINING&quot;</span>, arg <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: Found extension <span class="string">&quot;SIZE&quot;</span>, arg <span class="string">&quot;73400320&quot;</span></span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: Found extension <span class="string">&quot;AUTH&quot;</span>, arg <span class="string">&quot;LOGIN PLAIN XOAUTH XOAUTH2&quot;</span></span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: Found extension <span class="string">&quot;AUTH=LOGIN&quot;</span>, arg <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: Found extension <span class="string">&quot;MAILCOMPRESS&quot;</span>, arg <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: Found extension <span class="string">&quot;8BITMIME&quot;</span>, arg <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: Attempt <span class="keyword">to</span> authenticate using mechanisms: LOGIN PLAIN DIGEST-MD5 NTLM</span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: AUTH LOGIN command trace suppressed</span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: AUTH LOGIN succeeded</span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: use8bit <span class="literal">false</span></span><br><span class="line">MAIL <span class="keyword">FROM</span>:&lt;utsuko27@qq.com&gt;</span><br><span class="line">250 OK.</span><br><span class="line">RCPT <span class="keyword">TO</span>:&lt;utsuko27@163.com&gt;</span><br><span class="line">250 OK</span><br><span class="line"><span class="built_in">DEBUG</span> SMTP: Verified Addresses</span><br><span class="line"><span class="built_in">DEBUG</span> SMTP:   utsuko27@163.com</span><br><span class="line">DATA</span><br><span class="line">354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;.</span><br><span class="line"><span class="keyword">From</span>: utsuko27@qq.com</span><br><span class="line"><span class="keyword">To</span>: utsuko27@163.com</span><br><span class="line">Message-ID: &lt;825249556.0.1619921529857.JavaMail.29845@smtp.qq.com&gt;</span><br><span class="line">Subject: =?UTF-8?B?5Y+R6YCB55qE5qCH6aKY?=</span><br><span class="line">MIME-Version: 1.0</span><br><span class="line">Content-Type: text/html;<span class="attribute">charset</span>=UTF-8</span><br><span class="line">Content-Transfer-Encoding: base64</span><br><span class="line"></span><br><span class="line">5YaF5a65</span><br><span class="line">.</span><br><span class="line">250 OK: queued as.</span><br><span class="line">QUIT</span><br><span class="line">221 Bye.</span><br></pre></td></tr></table></figure></details></li></ul><hr><h3 id="复杂邮件">复杂邮件</h3><ul><li><p>比如涉及到附件或者插入图片的邮件,这种邮件就需要进行特殊包装</p><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVAqE5.png" alt="20210502102326" /></blockquote></li><li><p>代码 (只需要修改 getMimeMessage()方法)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 含带附件的邮件</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> session</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> MessagingException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> MimeMessage <span class="title function_">getMimeMessage</span><span class="params">(Session session)</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">  <span class="type">MimeMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessage</span>(session);</span><br><span class="line">  <span class="comment">//指明邮件的发件人</span></span><br><span class="line">  message.setFrom(<span class="keyword">new</span> <span class="title class_">InternetAddress</span>(fromEmailAddress));</span><br><span class="line">  <span class="comment">//指明邮件的收件人</span></span><br><span class="line">  message.setRecipient(Message.RecipientType.TO, <span class="keyword">new</span> <span class="title class_">InternetAddress</span>(toEmailAddress));</span><br><span class="line">  <span class="comment">//邮件标题</span></span><br><span class="line">  message.setSubject(<span class="string">&quot;发送的标题&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//邮件的文本内容</span></span><br><span class="line">  <span class="comment">//=================================准备图片数据</span></span><br><span class="line">  <span class="type">MimeBodyPart</span> <span class="variable">image</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeBodyPart</span>();</span><br><span class="line">  <span class="comment">//图片需要经过数据化的处理</span></span><br><span class="line">  <span class="type">DataHandler</span> <span class="variable">dataHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataHandler</span>(<span class="keyword">new</span> <span class="title class_">FileDataSource</span>(<span class="string">&quot;D:/Game/Weidows/JavaWeb/Last/src/main/java/MailDemo.java&quot;</span>));</span><br><span class="line">  <span class="comment">//在part中放入这个处理过图片的数据</span></span><br><span class="line">  image.setDataHandler(dataHandler);</span><br><span class="line">  <span class="comment">//给这个part设置一个ID名字</span></span><br><span class="line">  image.setContentID(<span class="string">&quot;嵌入.png&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//=================================准备正文数据</span></span><br><span class="line">  <span class="type">MimeBodyPart</span> <span class="variable">text</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeBodyPart</span>();</span><br><span class="line">  text.setContent(<span class="string">&quot;这是一张正文&lt;img src=&#x27;嵌入.jpg&#x27;&gt;&quot;</span>, <span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//=================================准备附件数据</span></span><br><span class="line">  <span class="type">MimeBodyPart</span> <span class="variable">body</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeBodyPart</span>();</span><br><span class="line">  body.setDataHandler(<span class="keyword">new</span> <span class="title class_">DataHandler</span>(<span class="keyword">new</span> <span class="title class_">FileDataSource</span>(<span class="string">&quot;D:/Game/Weidows/JavaWeb/Last/src/main/java/MailDemo.java&quot;</span>)));</span><br><span class="line">  body.setFileName(<span class="string">&quot;附件.png&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//描述数据关系</span></span><br><span class="line">  <span class="type">MimeMultipart</span> <span class="variable">mimeMultipart</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMultipart</span>();</span><br><span class="line">  mimeMultipart.addBodyPart(image);</span><br><span class="line">  mimeMultipart.addBodyPart(text);</span><br><span class="line">  mimeMultipart.addBodyPart(body);</span><br><span class="line">  mimeMultipart.setSubType(<span class="string">&quot;mixed&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//设置到消息中，保存修改</span></span><br><span class="line">  message.setContent(mimeMultipart);</span><br><span class="line">  message.saveChanges();</span><br><span class="line">  <span class="keyword">return</span> message;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>测试过邮件发送没有问题,但是很有可能因为包装问题导致图片或者文件出现编码解析错误问题</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Lombok">Lombok</h2><ul><li><p>通过注解快速生成代码</p></li><li><p>需要<code>安装插件</code>和<code>导入依赖</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>效果如图:</p><img src="https://www.helloimg.com/images/2022/02/27/GVAz1g.png" alt="20210502141126" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="注册-发送邮件-demo">注册-发送邮件 demo</h2><blockquote><p>其他资源可以去这里找: <a href="https://github.com/Weidows/Java/blob/master/JavaWeb/Last/src/main/java/demo">代码</a></p></blockquote><ul><li><p>通过 JSP 获取表单中用户名,密码和 email,然后用 Servlet 获取,并开启邮件发送线程通知用户.</p></li><li><p>发送邮件的类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sun.mail.util.MailSSLSocketFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.mail.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.InternetAddress;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line"><span class="keyword">import</span> java.security.GeneralSecurityException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SendMail</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">fromEmailAddress</span> <span class="operator">=</span> <span class="string">&quot;utsuko27@qq.com&quot;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">toEmailAddress</span> <span class="operator">=</span> <span class="string">&quot;utsuko27@163.com&quot;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;授权码&quot;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> User user;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">SendMail</span><span class="params">(User user)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.user = user;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> Session.getDefaultInstance(getProperties(), <span class="keyword">new</span> <span class="title class_">Authenticator</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> PasswordAuthentication <span class="title function_">getPasswordAuthentication</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PasswordAuthentication</span>(fromEmailAddress, password);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      session.setDebug(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">      <span class="type">MimeMessage</span> <span class="variable">message</span> <span class="operator">=</span> getMimeMessage(session);</span><br><span class="line"></span><br><span class="line">      send(session, message);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      System.out.println(e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Properties <span class="title function_">getProperties</span><span class="params">()</span> <span class="keyword">throws</span> GeneralSecurityException &#123;</span><br><span class="line">    <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    prop.setProperty(<span class="string">&quot;mail.host&quot;</span>, <span class="string">&quot;smtp.qq.com&quot;</span>);<span class="comment">///设置QQ邮件服务器</span></span><br><span class="line">    prop.setProperty(<span class="string">&quot;mail.transport.protocol&quot;</span>, <span class="string">&quot;smtp&quot;</span>);<span class="comment">///邮件发送协议</span></span><br><span class="line">    prop.setProperty(<span class="string">&quot;mail.smtp.auth&quot;</span>, <span class="string">&quot;true&quot;</span>);<span class="comment">//需要验证用户密码</span></span><br><span class="line">    <span class="comment">//QQ邮箱需要设置SSL加密</span></span><br><span class="line">    <span class="type">MailSSLSocketFactory</span> <span class="variable">sf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MailSSLSocketFactory</span>();</span><br><span class="line">    sf.setTrustAllHosts(<span class="literal">true</span>);</span><br><span class="line">    prop.put(<span class="string">&quot;mail.smtp.ssl.enable&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">    prop.put(<span class="string">&quot;mail.smtp.ssl.socketFactory&quot;</span>, sf);</span><br><span class="line">    <span class="keyword">return</span> prop;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> MimeMessage <span class="title function_">getMimeMessage</span><span class="params">(Session session)</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">    <span class="type">MimeMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessage</span>(session);</span><br><span class="line">    <span class="comment">//指明邮件的发件人</span></span><br><span class="line">    message.setFrom(<span class="keyword">new</span> <span class="title class_">InternetAddress</span>(fromEmailAddress));</span><br><span class="line">    <span class="comment">//指明邮件的收件人</span></span><br><span class="line">    message.setRecipient(Message.RecipientType.TO, <span class="keyword">new</span> <span class="title class_">InternetAddress</span>(toEmailAddress));</span><br><span class="line">    <span class="comment">//邮件标题</span></span><br><span class="line">    message.setSubject(<span class="string">&quot;注册通知&quot;</span>);</span><br><span class="line">    <span class="comment">//邮件的文本内容</span></span><br><span class="line">    message.setContent((<span class="string">&quot;恭喜你(&quot;</span> + user.getUserName() + <span class="string">&quot;)成功注册！&quot;</span> + <span class="string">&quot;密码：&quot;</span> + user.getPassword())</span><br><span class="line">        , <span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> message;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">send</span><span class="params">(Session session, MimeMessage message)</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">    <span class="type">Transport</span> <span class="variable">transport</span> <span class="operator">=</span> session.getTransport();</span><br><span class="line">    transport.connect(<span class="string">&quot;smtp.qq.com&quot;</span>, fromEmailAddress, password);</span><br><span class="line">    transport.sendMessage(message, message.getAllRecipients());</span><br><span class="line">    transport.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p>Servlet 类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegisterServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;email&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(username, password, email);</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">SendMail</span>(user).start(); <span class="comment">// 开启线程</span></span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;正在发送邮件....&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 服务器 </tag>
            
            <tag> javaweb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>▶️SM.MS-批量下载器</title>
      <link href="/post/tools/SM-MS-downloader/"/>
      <url>/post/tools/SM-MS-downloader/</url>
      
        <content type="html"><![CDATA[<h1>SM.MS-批量下载器</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:47:17 * @FilePath: \Blog-private\source\_posts\tools\SM-MS-downloader.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#smms-%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%99%A8">SM.MS-批量下载器</a><ul><li><a href="#%E4%BD%BF%E7%94%A8">使用</a></li><li><a href="#%E9%97%AE%E9%A2%98">问题</a></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><p><a href="https://weidows.github.io/post/tools/SM-MS-downloader/">⏩ 文章地址</a> | <a href="https://github.com/Weidows-projects/awesome-image-collector">✔️ 仓库地址</a> 欢迎提交 pr !</p><p><a href="http://SM.MS">SM.MS</a> 没有提供批量下载回图片的功能,于是写了个小爬虫</p><p>可以把对应页面的所有图片(一般是 30 张)获取并打包为 zip 文件下载下来</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="使用">使用</h2><ol><li><p>进入 <a href="http://SM.MS">SM.MS</a> 图片管理页面: <a href="https://sm.ms/home/picture?page=1">点这里进入</a></p></li><li><p>按 <code>F12</code> 进入 Console 控制台,输入下面代码: <a href="https://fastly.jsdelivr.net/gh/Weidows-projects/awesome-image-collector/implements/SM.MS-collector.js">-&gt; 查看代码 &lt;-</a></p></li><li><p>不出意外的话,左侧边栏会出现如下两个按钮:<br><img src="https://www.helloimg.com/images/2022/02/27/GVt2do.png" alt="20210418102023" /></p></li><li><p>现在可以使用了 =&gt; 下载本页面图片 =&gt; 全选 =&gt; 删除, 这样就导出了!</p></li></ol><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="问题">问题</h2><ul><li><p>刷新页面或者翻页时按钮没了</p><blockquote><p>emmm,每次页面刷新/跳转都需要重新执行一次代码,在 console 中按 <code>↑</code> 然后 <code>Enter</code></p></blockquote></li><li><p>下载下来的压缩包是空的或者是无数据的空图片</p><blockquote><p>检查一下网络是否可以正常访问 <code>i.loli.net</code> 这个域名,有可能是因为网络原因导致图片未成功加载</p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-17">借物表</h2><blockquote><p><code>JSZip</code></p></blockquote><blockquote><p><a href="https://blog.csdn.net/weixin_38361925/article/details/95099838?utm_source=app&amp;app_version=4.5.8"> JS 如何在 onload 中 return</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> javascript </tag>
            
            <tag> 图床 </tag>
            
            <tag> 爬虫 </tag>
            
            <tag> sm.ms </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥼JavaWeb~(陆)JDBC,JUnit,SMBMS项目</title>
      <link href="/post/Java/Web/6/"/>
      <url>/post/Java/Web/6/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-07-23 09:29:11 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\Web\6.md * @Description: * @!: *********************************************************************--><ul><li><a href="#jdbc%E5%A4%8D%E4%B9%A0">JDBC(复习)</a></li><li><a href="#junit">JUnit</a></li><li><a href="#smbms">SMBMS</a><ul><li><a href="#%E6%90%AD%E5%BB%BA">搭建</a></li><li><a href="#%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84">后端项目结构</a></li><li><a href="#%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">连接配置文件</a></li><li><a href="#orm-%E6%98%A0%E5%B0%84">ORM 映射</a></li><li><a href="#%E9%9D%99%E6%80%81%E5%9F%BA%E6%9C%AC%E7%B1%BB">静态基本类</a></li><li><a href="#%E9%A2%98%E5%A4%96%E8%AF%9D">题外话</a></li><li><a href="#%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95">实现登录</a></li><li><a href="#%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%E6%9E%84">项目总结构</a></li></ul></li></ul><h2 id="JDBC-复习">JDBC(复习)</h2><blockquote><p>JDBC 连接 <a href="../../MySQL/4#jdbc">🚀 进修 MySQL~(肆)</a></p></blockquote><blockquote><p>事务 <a href="../../MySQL/5#ideasql">🚀 进修 MySQL~(伍)</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="JUnit">JUnit</h2><p>在一个方法上标记 <code>@Test</code> 注解后,这个方法可以脱离 Main 直接运行.</p><ul><li><p>依赖 (一般创建项目时自带)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--单元测试--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>例子:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest</span> &#123;</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="SMBMS">SMBMS</h2><blockquote><p>项目代码: <a href="https://github.com/Weidows/Java/tree/master/JavaWeb/SMBMS">https://github.com/Weidows/Java/tree/master/JavaWeb/SMBMS</a></p></blockquote><ul><li><p>可以拉取代码直接看,下面的笔记着重讲<code>从零开发的流程</code></p></li><li><p>我的这个项目应该是跑不起来,在 web,xml 中 filter 那里有个 bug,不过无大碍,知道怎么个原理就好.</p></li></ul><hr><h3 id="搭建">搭建</h3><ul><li><p>Maven-webapp 项目,补全 src/resources,添加依赖,连接 Tomcat 和 MySQL,修改 web.xml 版本</p><ul><li><p>依赖:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- servlet依赖 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- JSP依赖 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Standard标签库 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.0.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.jupiter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-jupiter-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;junit.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.jupiter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-jupiter-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;junit.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>更改版本号:<code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">metadata-complete</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="后端项目结构">后端项目结构</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">|&gt; src/main</span><br><span class="line">  |&gt; java/com.weidows</span><br><span class="line">    |&gt; dao/mapper           <span class="comment">// data access object (对应pojo的CRUD类)</span></span><br><span class="line">    |&gt; filter               <span class="comment">// 过滤器</span></span><br><span class="line">    |&gt; pojo/entity          <span class="comment">// Plain Ordinary Java Object (ORM映射的实体类,内部一般只有getter和setter)</span></span><br><span class="line">    |&gt; service              <span class="comment">// 业务类 (操作dao)</span></span><br><span class="line">    |&gt; servlet/controller   <span class="comment">// servlet后端</span></span><br><span class="line">    |&gt; utils                <span class="comment">// 工具类</span></span><br><span class="line">    |&gt; bean                 <span class="comment">// spring中 == entity + dao</span></span><br><span class="line">  |&gt; resources              <span class="comment">// 资源文件</span></span><br><span class="line"></span><br><span class="line">-------</span><br><span class="line"></span><br><span class="line">pojo对应数据库中每个记录</span><br><span class="line">-&gt; 在dao中编写操作pojo的SQL/Java代码,实现CRUD的<span class="string">&quot;方法&quot;</span></span><br><span class="line">-&gt; 在service中通过Java编写事务,并调用dao中CRUD方法实现增删改查<span class="string">&quot;功能&quot;</span></span><br><span class="line">-&gt; 在servlet就是对应请求和响应来做业务,调用service中的方法.</span><br><span class="line"></span><br><span class="line">-------</span><br><span class="line"></span><br><span class="line">pojo为最底层,不涉及对象增删操作</span><br><span class="line">-&gt; dao层</span><br><span class="line">  -&gt; BaseDao实现创建connection/preparedStatement对象,以及回收connection/preparedStatement/resultSet的方法.</span><br><span class="line">  -&gt; 进一步的dao类中进行创建resultSet对象,并回收resultSet/preparedStatement对象</span><br><span class="line">-&gt; 在service层进行connection的关闭,捕获dao层抛出的异常,且此层不再向上抛出异常.</span><br></pre></td></tr></table></figure><img src="https://www.helloimg.com/images/2022/02/27/GVt9XS.png" alt="20210424112946" /><hr><h3 id="连接配置文件">连接配置文件</h3><p>(resources/db.properties)</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/smbms?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="attr">user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure><hr><h3 id="ORM-映射">ORM 映射</h3><p>(编写 pojo 下的实体类)</p><blockquote><p>初始化 SQL: <a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/smbms.sql">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/smbms.sql</a></p></blockquote><blockquote><p>pojo: <a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo</a></p></blockquote><hr><h3 id="静态基本类">静态基本类</h3><blockquote><p><a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/dao/BaseDao.java">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/dao/BaseDao.java</a></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.weidows.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 操作数据库的基类--静态类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseDao</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String driver;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String url;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String username;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String password;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">//静态代码块,在类加载的时候执行</span></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">configFile</span> <span class="operator">=</span> <span class="string">&quot;db.properties&quot;</span>;</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> BaseDao.class.getClassLoader().getResourceAsStream(configFile);</span><br><span class="line">    <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      properties.load(inputStream);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">    url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">    username = properties.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取数据库连接</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> connection</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (connection == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        Class.forName(driver);</span><br><span class="line">        connection = DriverManager.getConnection(url, username, password);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> connection;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 查询数据库的公共操作</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> connection</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> params</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> ResultSet <span class="title function_">execute</span><span class="params">(Connection connection, ResultSet rs, String sql, Object[] params)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">        preparedStatement.setObject(i + <span class="number">1</span>, params[i]);</span><br><span class="line">      &#125;</span><br><span class="line">      rs = preparedStatement.executeQuery();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">      throwables.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> rs;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 更新数据库的公共操作</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> connection</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> params</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">execute</span><span class="params">(Connection connection, String sql, Object[] params)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">updateRows</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">        preparedStatement.setObject(i + <span class="number">1</span>, params[i]);</span><br><span class="line">      &#125;</span><br><span class="line">      updateRows = preparedStatement.executeUpdate();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">      throwables.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> updateRows;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 释放资源</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> connection</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> pstm</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">closeResource</span><span class="params">(Connection connection, PreparedStatement pstm, ResultSet rs)</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">        rs.close();</span><br><span class="line">        rs = <span class="literal">null</span>;<span class="comment">//GC回收</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (pstm != <span class="literal">null</span>) &#123;</span><br><span class="line">        pstm.close();</span><br><span class="line">        pstm = <span class="literal">null</span>;<span class="comment">//GC回收</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">        connection.close();</span><br><span class="line">        connection = <span class="literal">null</span>;<span class="comment">//GC回收</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">      flag = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="题外话">题外话</h3><ul><li><p>一个编程书写习惯: 方法中首先把需要用到的变量提出</p><p>就像这里的三个变量,在一开始提出来,就像是类里面的 field,使用起来比较规范,容易排查</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> User <span class="title function_">getLoginUser</span><span class="params">(Connection connection, String userCode)</span> &#123;</span><br><span class="line">  <span class="type">PreparedStatement</span> <span class="variable">pstm</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">null</span> != connection) &#123;</span><br><span class="line">      <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from smbms_user where userCode=?&quot;</span>;</span><br><span class="line">      Object[] params = &#123;userCode&#125;;</span><br><span class="line">      resultSet = BaseDao.execute(connection, pstm, resultSet, sql, params);</span><br><span class="line">      <span class="keyword">if</span> (resultSet.next()) &#123;</span><br><span class="line">        user = setData(resultSet);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    BaseDao.closeResource(<span class="literal">null</span>, pstm, resultSet);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">    throwables.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="实现登录">实现登录</h3><ul><li><p>在这里复现一下&quot;登录&quot;业务,其他功能以此类推.</p><p>这里着重<code>过程</code>(自上而下),具体怎么实现的业务建议结合源码来学习.</p><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVtTVD.png" alt="20210422103020" /></blockquote><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVtwSu.png" alt="20210425232035" /></blockquote></li></ul><hr><ul><li><p><code>com/weidows/pojo/User.java</code></p><blockquote><p><a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo/User.java">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo/User.java</a></p></blockquote></li><li><p><code>com/weidows/dao/user/UserDao.java</code></p><blockquote><p><a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDao.java">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDao.java</a></p></blockquote></li><li><p><code>com/weidows/dao/user/UserDaoImpl.java</code></p><blockquote><p><a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDaoImpl.java">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDaoImpl.java</a></p></blockquote></li><li><p><code>com/weidows/service/user/UserService.java</code></p><blockquote><p><a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserService.java">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserService.java</a></p></blockquote></li><li><p><code>com/weidows/service/user/UserServiceImpl.java</code></p><blockquote><p><a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserServiceImpl.java">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserServiceImpl.java</a></p></blockquote></li><li><p>前端页面</p><blockquote><p><a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/webapp/login.jsp">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/webapp/login.jsp</a></p></blockquote></li><li><p>对应前端的常量类</p><blockquote><p><a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/util/Constants.java">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/util/Constants.java</a></p></blockquote></li><li><p>对应 User 的 servlet 类</p><blockquote><p><a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/UserServlet.java">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/UserServlet.java</a></p></blockquote></li><li><p>登录 servlet 类</p><blockquote><p><a href="https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/LoginServlet.java">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/LoginServlet.java</a></p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="项目总结构">项目总结构</h3><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVtQ5E.png" alt="20210426105422" /></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 服务器 </tag>
            
            <tag> jdbc </tag>
            
            <tag> javaweb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥼JavaWeb~(伍)架构,filter,listener,demo.</title>
      <link href="/post/Java/Web/5/"/>
      <url>/post/Java/Web/5/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-05-01 00:27:57 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\Web\5.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81">笔记代码</a></li><li><a href="#mvc-%E6%9E%B6%E6%9E%84">MVC 架构</a></li><li><a href="#%E4%B8%AD%E9%97%B4%E5%B1%82%E5%B7%A5%E5%85%B7">中间层工具</a><ul><li><a href="#filter-%E8%BF%87%E6%BB%A4%E5%99%A8">Filter 过滤器</a><ul><li><a href="#%E4%BB%8B%E7%BB%8D">介绍</a></li><li><a href="#%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96">导入依赖</a></li><li><a href="#filter-%E4%BE%8B%E5%AD%90">filter 例子</a></li></ul></li><li><a href="#%E7%9B%91%E5%90%AC%E5%99%A8">监听器</a></li><li><a href="#gui-%E7%BC%96%E7%A8%8B%E4%BE%8B%E5%AD%90">GUI 编程例子</a></li><li><a href="#%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81-demo">登录验证 demo</a></li></ul></li></ul><h2 id="笔记代码-7"><a href="https://github.com/Weidows/Java/tree/master/JavaWeb">笔记代码</a></h2><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="MVC-架构">MVC 架构</h2><blockquote><p>Model 模型 view 视图 Controller 控制 三方分离的架构</p></blockquote><ul><li><p>之前的架构:</p><ul><li>Servlet 直接进行 CRUD 操作,程序比较臃肿,不利于维护</li></ul><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVtL8q.png" alt="20210409093031" /></blockquote><hr></li><li><p>于是,为了解决这种不便利性,再加一层! (没有什么是加一层解决不了的)</p><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVtbyK.png" alt="20210409093440" /></blockquote><hr></li><li><p>各部分的职责:</p><ul><li><p>Model</p><ul><li><p>业务处理 ：业务逻辑（Service）</p></li><li><p>数据持久层：CRUD （Dao - 数据持久化对象）</p></li></ul></li><li><p>View</p><ul><li><p>展示数据</p></li><li><p>提供链接发起 Servlet 请求 （a，form，img…）</p></li></ul></li><li><p>Controller （Servlet）</p><ul><li><p>接收用户的请求 ：（req：请求参数、Session 信息….）</p></li><li><p>交给业务层处理对应的代码</p></li><li><p>控制视图的跳转 (转发/重定向)</p></li></ul></li></ul><hr></li><li><p>一条流程:</p><p>View 层点击登录 --&gt; 接收用户的登录请求 --&gt; 处理用户的请求（获取用户登录的参数，username，password）–&gt; 交给业务层处理登录业务（判断用户名密码是否正确：操作事务）–&gt; Dao 层查询用户名和密码是否正确 --&gt; 数据库</p><p>顺利查询到数据之后就是反过来再进行数据传递</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="中间层工具">中间层工具</h2><ul><li><p>常见的有<code>过滤器 filter</code>,<code>监听器 listener</code>,<code>拦截器 Interceptor</code></p><blockquote><p><a href="https://www.zhihu.com/question/35225845">请教一下关于过滤器，拦截器，监听器具体应用上的区别？</a></p></blockquote></li><li><p>下面介绍 filter(重点) 和 listener</p></li></ul><hr><h3 id="Filter-过滤器">Filter 过滤器</h3><h4 id="介绍-2">介绍</h4><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVtHp1.png" alt="20210409222335" /></blockquote><p>比如处理<code>中文乱码,敏感词汇,登录验证</code>…</p><p>例子: 比如 Shiro 安全框架技术就是用 Filter 来实现的</p><hr><h4 id="导入依赖">导入依赖</h4><ul><li><p>老四样:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- servlet依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- JSP依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Standard标签库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><hr></li><li><p>之后好像还会用到 SQL 驱动依赖,到时候在说.</p></li></ul><hr><h4 id="filter-例子">filter 例子</h4><ul><li><p><code>src/main/java/filter/CharacterEncodingFilter.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CharacterEncodingFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="comment">//初始化并等待过滤对象出现</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;CharacterEncodingFilter初始化&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    1. 过滤中的所有代码，在过滤特定请求的时候都会执行</span></span><br><span class="line"><span class="comment">    2. 必须要让过滤器继续执行 (因为filter可能不止一个,需要传递)</span></span><br><span class="line"><span class="comment">      chain.doFilter(request,response);</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    response.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;CharacterEncodingFilter执行前....&quot;</span>);</span><br><span class="line">    chain.doFilter(request, response); <span class="comment">//让我们的请求继续走，如果不写，程序到这里就被拦截停止！</span></span><br><span class="line">    System.out.println(<span class="string">&quot;CharacterEncodingFilter执行后....&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//销毁：web服务器关闭的时候，过滤器会销毁</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;CharacterEncodingFilter销毁&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>src/main/java/servlet/Show.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Show</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">// 通过filter实现处理乱码</span></span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;你好!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>web.xml</code> 配置 servlet 和 filter</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>show<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.Show<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--还是乱码的页面--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>show<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/show<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--通过过滤器解决了乱码的页面--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>show<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet/show<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--filter的地址映射--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="监听器">监听器</h3><blockquote><ul><li>对应不同业务需求,存在 N 中不同的监听器接口可供实现.</li><li>监听器经常在 GUI 编程中使用.</li></ul></blockquote><ul><li><p>例子: 设置 session 监听器监听有多少 session 连接</p></li><li><p><code>src/main/java/listener/OnlineCountListener.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionListener;</span><br><span class="line"></span><br><span class="line"><span class="comment">//统计网站在线人数 -&gt; 统计session</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OnlineCountListener</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionListener</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> ServletContext ctx;</span><br><span class="line">  <span class="keyword">private</span> Integer onlineCount;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//一旦创建Session就会触发一次这个事件</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionCreated</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">    initParam(se);</span><br><span class="line">    ctx.setAttribute(<span class="string">&quot;OnlineCount&quot;</span>, ++onlineCount);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    一旦销毁Session就会触发一次这个事件</span></span><br><span class="line"><span class="comment">    Session销毁：</span></span><br><span class="line"><span class="comment">      1. 手动销毁  getSession().invalidate();</span></span><br><span class="line"><span class="comment">      2. 自动销毁</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDestroyed</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">    initParam(se);</span><br><span class="line">    ctx.setAttribute(<span class="string">&quot;OnlineCount&quot;</span>, --onlineCount);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initParam</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">    ctx = se.getSession().getServletContext();</span><br><span class="line">    onlineCount = (Integer) ctx.getAttribute(<span class="string">&quot;OnlineCount&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (onlineCount == <span class="literal">null</span>) &#123;</span><br><span class="line">      ctx.setAttribute(<span class="string">&quot;OnlineCount&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>index.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;在线人数测试&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;当前有 &lt;span</span><br><span class="line">    style=<span class="string">&quot;color: turquoise;&quot;</span>&gt;&lt;%=<span class="built_in">this</span>.getServletConfig().getServletContext().getAttribute(<span class="string">&quot;OnlineCount&quot;</span>)%&gt;&lt;/span&gt; 人在线</span><br><span class="line">&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>注册监听器</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册监听器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>listener.OnlineCountListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="GUI-编程例子">GUI 编程例子</h3><ul><li><p>GUI 编程常会用到监听器,这里简单介绍一下 : <code>src/main/java/listener/TestPanel.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.WindowAdapter;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.WindowEvent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPanel</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Frame</span> <span class="variable">frame</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Frame</span>(<span class="string">&quot;Hello World!&quot;</span>);  <span class="comment">//新建一个窗体</span></span><br><span class="line">    <span class="type">Panel</span> <span class="variable">panel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Panel</span>(<span class="literal">null</span>); <span class="comment">//面板</span></span><br><span class="line">    frame.setLayout(<span class="literal">null</span>); <span class="comment">//设置窗体的布局</span></span><br><span class="line"></span><br><span class="line">    frame.setBounds(<span class="number">300</span>, <span class="number">300</span>, <span class="number">500</span>, <span class="number">500</span>);</span><br><span class="line">    frame.setBackground(<span class="keyword">new</span> <span class="title class_">Color</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>)); <span class="comment">//设置背景颜色</span></span><br><span class="line"></span><br><span class="line">    panel.setBounds(<span class="number">50</span>, <span class="number">50</span>, <span class="number">300</span>, <span class="number">300</span>);</span><br><span class="line">    panel.setBackground(<span class="keyword">new</span> <span class="title class_">Color</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>)); <span class="comment">//设置背景颜色</span></span><br><span class="line"></span><br><span class="line">    frame.add(panel);</span><br><span class="line"></span><br><span class="line">    frame.setVisible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//监听事件，监听关闭事件</span></span><br><span class="line">    frame.addWindowListener(<span class="keyword">new</span> <span class="title class_">WindowAdapter</span>() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">windowClosing</span><span class="params">(WindowEvent e)</span> &#123;</span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="登录验证-demo">登录验证 demo</h3><ul><li><p>项目结构,如图:</p><img src="https://www.helloimg.com/images/2022/02/27/GVtMmb.png" alt="20210411004248" /><hr></li><li><p>JSP 页面</p><ul><li><p>主页(登录页面): <code>web/demo/index.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;主页&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;登录&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/demo/login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">  &lt;label&gt;</span><br><span class="line">    用户名:</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt;</span><br><span class="line">  &lt;/label&gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;登录&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>登陆失败: <code>web/demo/failed.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;登录失败&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;登录失败进入的页面&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/demo/index.jsp&quot;</span>&gt;返回主页&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>登录成功: <code>web/demo/sys/success.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;已登录&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;登录成功后进入的页面&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;hr&gt;</span><br><span class="line"></span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/demo/logout&quot;</span>&gt;注销&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><ul><li><p>Java 后端</p><ul><li><p>login: <code>src/main/java/demo/servlet/Login.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> demo.utils.Constants;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Login</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (username.equals(<span class="string">&quot;admin&quot;</span>)) &#123;</span><br><span class="line">      session.setAttribute(Constants.USER_SESSION, session.getId());</span><br><span class="line">      resp.sendRedirect(<span class="string">&quot;/demo/sys/success.jsp&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resp.sendRedirect(<span class="string">&quot;/demo/failed.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>注销: <code>src/main/java/demo/servlet/Logout.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> demo.utils.Constants;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Logout</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="type">Object</span> <span class="variable">attribute</span> <span class="operator">=</span> session.getAttribute(Constants.USER_SESSION);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      频繁操作session连接会影响性能,通过attribute间接验证登录信息</span></span><br><span class="line"><span class="comment">      通过设置或移除 USER_SESSION 属性来验证是否登录</span></span><br><span class="line"><span class="comment">      存在一个Bug: 在注销状态通过浏览器的后退,可以返回登陆成功的页面(且不存在USER_SESSION)</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">if</span> (attribute != <span class="literal">null</span>) &#123;</span><br><span class="line">      session.removeAttribute(Constants.USER_SESSION);</span><br><span class="line">      resp.sendRedirect(<span class="string">&quot;/demo/index.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>提取的常量工具类: <code>src/main/java/demo/utils/Constants.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo.utils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 此类内定义一些其他各种地方需要经常调用的常量</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Constants</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">USER_SESSION</span> <span class="operator">=</span> <span class="string">&quot;USER_SESSION&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>过滤器类: <code>src/main/java/demo/filter/SysFilter.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> demo.utils.Constants;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">req</span> <span class="operator">=</span> (HttpServletRequest) request;</span><br><span class="line">    <span class="type">HttpServletResponse</span> <span class="variable">resp</span> <span class="operator">=</span> (HttpServletResponse) response;</span><br><span class="line"></span><br><span class="line">    <span class="type">Object</span> <span class="variable">attribute</span> <span class="operator">=</span> req.getSession().getAttribute(Constants.USER_SESSION);</span><br><span class="line">    <span class="keyword">if</span> (attribute == <span class="literal">null</span>) &#123;</span><br><span class="line">      resp.sendRedirect(<span class="string">&quot;/demo/failed.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    chain.doFilter(request, response);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><ul><li><p><code>Web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>login<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>demo.servlet.Login<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>logout<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>demo.servlet.Logout<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>sysFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>demo.filter.SysFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>login<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo/login<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>logout<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo/logout<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>sysFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo/sys/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 服务器 </tag>
            
            <tag> javaweb </tag>
            
            <tag> servlet </tag>
            
            <tag> filter </tag>
            
            <tag> 架构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥼JavaWeb~(肆)摸索JSP,JavaBean</title>
      <link href="/post/Java/Web/4/"/>
      <url>/post/Java/Web/4/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-05-01 00:26:52 * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81">笔记代码</a></li><li><a href="#jsp">JSP</a><ul><li><a href="#%E5%AE%9A%E5%88%B6%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2">定制错误页面</a></li><li><a href="#%E5%90%88%E5%B9%B6%E9%A1%B5%E9%9D%A2">合并页面</a></li><li><a href="#%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%8F%8A%E4%BD%9C%E7%94%A8%E5%9F%9F">内置对象及作用域</a></li><li><a href="#jsp-%E6%A0%87%E7%AD%BE">JSP 标签</a></li><li><a href="#jstl-%E8%A1%A8%E8%BE%BE%E5%BC%8F">JSTL 表达式</a></li></ul></li><li><a href="#javabean">JavaBean</a></li></ul><h2 id="笔记代码-6"><a href="https://github.com/Weidows/Java/tree/master/JavaWeb">笔记代码</a></h2><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="JSP-2">JSP</h2><h3 id="定制错误页面">定制错误页面</h3><ul><li><p>方法一: 直接在 jsp 页面配置 errorPage</p><ul><li><p><code>errors/index.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%--此处定制错误页面指向--%&gt;</span><br><span class="line">&lt;%@ page errorPage=<span class="string">&quot;errors/500.jsp&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;错误页面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p><code>errors/500.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;<span class="number">500</span>错误&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;<span class="number">500</span>错误页面.&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><ul><li><p>方法二: 在 web.xml 中配置</p><ul><li><p>errors/404.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;<span class="number">404</span>错误&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;<span class="number">404</span>错误页面.&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/errors/404.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>500<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/errors/500.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="合并页面">合并页面</h3><ul><li><p><code>common/header.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;h1&gt;这里是header&lt;/h1&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr></li><li><p><code>common/footer.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;h1&gt;这里是footer&lt;/h1&gt;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>common/index.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;测试common&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">      这种会把include的页面内容合并进本页面,最后是展示一个页面</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;%@ include file=<span class="string">&quot;header.jsp&quot;</span> %&gt;</span><br><span class="line">    &lt;h1&gt;网页主体&lt;/h1&gt;</span><br><span class="line">    &lt;%@ include file=<span class="string">&quot;footer.jsp&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;HR /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">      jsp:include标签,本质是导入其他文件内容,最后是多个文件合为一个页面展示</span><br><span class="line">      (更灵活,建议用这个)</span><br><span class="line">        上面方法的因为是合并,所以很有可能出现变量重名,干扰的问题</span><br><span class="line">        这个方法不同文件之间互不干扰</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;jsp:include page=<span class="string">&quot;/common/header.jsp&quot;</span> /&gt;</span><br><span class="line">    &lt;h1&gt;网页主体&lt;/h1&gt;</span><br><span class="line">    &lt;jsp:include page=<span class="string">&quot;/common/footer.jsp&quot;</span> /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="内置对象及作用域">内置对象及作用域</h3><ul><li><p>内置对象</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PageContext 存东西</span><br><span class="line">Request 存东西</span><br><span class="line">Response</span><br><span class="line"><span class="keyword">Session</span> 存东西</span><br><span class="line">Application 【SerlvetContext】 存东西</span><br><span class="line">config 【SerlvetConfig】</span><br><span class="line"><span class="keyword">out</span></span><br><span class="line">page ，不用了解</span><br><span class="line"><span class="keyword">exception</span></span><br></pre></td></tr></table></figure><hr></li><li><p>操作对象 <code>demo/1.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">* @?: *********************************************************************</span><br><span class="line">* <span class="meta">@Author</span>: Weidows</span><br><span class="line">* <span class="meta">@Date</span>: <span class="number">2021</span>-<span class="number">04</span>-<span class="number">07</span> <span class="number">16</span>:<span class="number">29</span>:<span class="number">42</span></span><br><span class="line">* <span class="meta">@LastEditors</span>: Weidows</span><br><span class="line">* <span class="meta">@LastEditTime</span>: <span class="number">2021</span>-<span class="number">04</span>-<span class="number">07</span> <span class="number">17</span>:<span class="number">29</span>:<span class="number">11</span></span><br><span class="line">* <span class="meta">@FilePath</span>: \Weidows\JavaWeb\JSP\src\main\webapp\<span class="number">1.</span>jsp</span><br><span class="line">* <span class="meta">@Description</span>:</span><br><span class="line">* @!: *********************************************************************</span><br><span class="line">* servlet <span class="number">2.3</span>默认不支持EL表达式,需要开启.</span><br><span class="line">--&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;index4&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;%--</span><br><span class="line">      PageContext 存东西</span><br><span class="line">      Request 存东西</span><br><span class="line">      Response</span><br><span class="line">      Session 存东西</span><br><span class="line">      Application 【SerlvetContext】 存东西</span><br><span class="line">      config 【SerlvetConfig】</span><br><span class="line">      out</span><br><span class="line">      page ，不用了解</span><br><span class="line">      exception</span><br><span class="line">    --%&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">      pageContext.setAttribute(<span class="string">&quot;name1&quot;</span>, <span class="string">&quot;秦疆1号&quot;</span>); <span class="comment">// 保存的数据只在一个页面中有效</span></span><br><span class="line">      request.setAttribute(<span class="string">&quot;name2&quot;</span>, <span class="string">&quot;秦疆2号&quot;</span>); <span class="comment">// 保存的数据只在一次请求中有效，请求转发会携带这个数据</span></span><br><span class="line">      session.setAttribute(<span class="string">&quot;name3&quot;</span>, <span class="string">&quot;秦疆3号&quot;</span>); <span class="comment">// 保存的数据只在一次会话中有效，从打开浏览器到关闭浏览器</span></span><br><span class="line">      application.setAttribute(<span class="string">&quot;name4&quot;</span>, <span class="string">&quot;秦疆4号&quot;</span>); <span class="comment">// 保存的数据只在服务器中有效，从打开服务器到关闭服务器</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 作用域从小到大</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">name1</span> <span class="operator">=</span> (String) pageContext.findAttribute(<span class="string">&quot;name1&quot;</span>);</span><br><span class="line">      <span class="type">String</span> <span class="variable">name2</span> <span class="operator">=</span> (String) pageContext.findAttribute(<span class="string">&quot;name2&quot;</span>);</span><br><span class="line">      <span class="type">String</span> <span class="variable">name3</span> <span class="operator">=</span> (String) pageContext.findAttribute(<span class="string">&quot;name3&quot;</span>);</span><br><span class="line">      <span class="type">String</span> <span class="variable">name4</span> <span class="operator">=</span> (String) pageContext.findAttribute(<span class="string">&quot;name4&quot;</span>);</span><br><span class="line">      <span class="type">String</span> <span class="variable">name5</span> <span class="operator">=</span> (String) pageContext.findAttribute(<span class="string">&quot;name5&quot;</span>); <span class="comment">// 这个不存在</span></span><br><span class="line">    %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%--</span><br><span class="line">      EL表达式</span><br><span class="line">      $&#123;内容&#125; == &lt;%= 内容 %&gt;</span><br><span class="line">      用EL表达式的话,<span class="literal">null</span>值不会显示,而使用JSP表达式会显示<span class="literal">null</span>值</span><br><span class="line">    --%&gt;</span><br><span class="line">    &lt;h1&gt;取出的内容:&lt;/h1&gt;</span><br><span class="line">    &lt;h3&gt;$&#123;name1&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;$&#123;name2&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;$&#123;name3&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;$&#123;name4&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;HR&gt;</span><br><span class="line">    &lt;h3&gt;$&#123;name5&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;&lt;%=name5%&gt;&lt;/h3&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><img src="https://www.helloimg.com/images/2022/02/27/GVtAMc.png" alt="20210407173249" /><hr></li><li><p>作用域</p><img src="https://www.helloimg.com/images/2022/02/27/GVtiZr.png" alt="20210407175219" /></li></ul><hr><h3 id="JSP-标签">JSP 标签</h3><ul><li><p>例子: 使用 JSP 标签转发页面,读取参数并显示出来.</p></li><li><p><code>src/main/webapp/demo/JSP-label/forward.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;JSP-label&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%-- 转发request携带的参数(注意JSP标签内不能有注释,会报错<span class="number">500</span>) --%&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">&quot;forward.jsp&quot;</span>&gt;</span><br><span class="line">  &lt;jsp:param name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;kuangshen&quot;</span>/&gt;</span><br><span class="line">  &lt;jsp:param name=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;12&quot;</span>/&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>src/main/webapp/demo/JSP-label/forward.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;转发页面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;name&quot;</span>, request.getParameter(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;age&quot;</span>, request.getParameter(<span class="string">&quot;age&quot;</span>));</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line">&lt;h3&gt;姓名: $&#123;name&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;年龄: $&#123;age&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="JSTL-表达式">JSTL 表达式</h3><blockquote><p>JSTL 标签库的使用就是为了弥补 HTML 标签的不足,功能上与 Java 相似.</p></blockquote><ul><li><p>分类</p><ul><li><p>格式化标签</p></li><li><p>SQL 标签</p></li><li><p>XML 标签</p></li><li><p>JSTL 函数</p></li><li><p>核心标签 （掌握部分）</p><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVtnST.png" alt="20210407195349" /></blockquote></li></ul></li><li><p>使用</p><ul><li><p>在 pom.xml 中导入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Standard标签库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>在 JSP 页面还需要引入对应要使用的 taglib,这里只用到 core:</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><ul><li><p>if</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt; &lt;%@ taglib</span><br><span class="line">prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt; &lt;%@ page</span><br><span class="line">isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;<span class="keyword">if</span>测试&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;%--action是代码提交位置--%&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;if.jsp&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">      &lt;label&gt;</span><br><span class="line">        用户名:</span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> /&gt;</span><br><span class="line">      &lt;/label&gt;</span><br><span class="line">      &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;登录&quot;</span> /&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%--</span><br><span class="line">      EL表达式获取表单中的数据 $&#123;param.参数名&#125;</span><br><span class="line">      判断如果提交的用户名是admin，则登录成功,并把isAdmin置为<span class="literal">true</span></span><br><span class="line">      --%&gt;</span><br><span class="line">    &lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;param.username==&#x27;admin&#x27;&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;isAdmin&quot;</span>&gt;</span><br><span class="line">      &lt;c:out value=<span class="string">&quot;管理员欢迎您！&quot;</span> /&gt;</span><br><span class="line">    &lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><hr></li><li><p>choose-when</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%-- Created by IntelliJ IDEA. User: <span class="number">29845</span> Date: <span class="number">2021</span>/<span class="number">4</span>/<span class="number">8</span> Time: <span class="number">20</span>:<span class="number">38</span> To change</span><br><span class="line"><span class="built_in">this</span> template use File | Settings | File Templates. --%&gt; &lt;%@ page</span><br><span class="line">contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt; &lt;%@ page</span><br><span class="line">isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;choose-when测试&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">      &lt;label&gt;</span><br><span class="line">        &lt;%--定义一个变量score--%&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;score&quot;</span> /&gt;</span><br><span class="line">      &lt;/label&gt;</span><br><span class="line">      &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;提交&quot;</span> /&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;c:choose&gt;</span><br><span class="line">      &lt;c:when test=<span class="string">&quot;$&#123;param.score&gt;=90&#125;&quot;</span>&gt; 你的成绩为优秀 &lt;/c:when&gt;</span><br><span class="line">      &lt;c:when test=<span class="string">&quot;$&#123;param.score&gt;=80&#125;&quot;</span>&gt; 你的成绩为一般 &lt;/c:when&gt;</span><br><span class="line">      &lt;c:when test=<span class="string">&quot;$&#123;param.score&gt;=70&#125;&quot;</span>&gt; 你的成绩为良好 &lt;/c:when&gt;</span><br><span class="line">      &lt;c:when test=<span class="string">&quot;$&#123;param.score&lt;=60&#125;&quot;</span>&gt; 你的成绩为不及格 &lt;/c:when&gt;</span><br><span class="line">    &lt;/c:choose&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><hr></li><li><p>forEach</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.ArrayList&quot;</span> %&gt;&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: <span class="number">29845</span></span><br><span class="line">  Date: <span class="number">2021</span>/<span class="number">4</span>/<span class="number">8</span></span><br><span class="line">  Time: <span class="number">20</span>:<span class="number">59</span></span><br><span class="line">  To change <span class="built_in">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;forEach&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">  ArrayList&lt;String&gt; setPeople = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">  setPeople.add(<span class="number">0</span>, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line">  setPeople.add(<span class="number">1</span>, <span class="string">&quot;李四&quot;</span>);</span><br><span class="line">  setPeople.add(<span class="number">2</span>, <span class="string">&quot;王五&quot;</span>);</span><br><span class="line">  setPeople.add(<span class="number">3</span>, <span class="string">&quot;赵六&quot;</span>);</span><br><span class="line">  setPeople.add(<span class="number">4</span>, <span class="string">&quot;田六&quot;</span>);</span><br><span class="line">  request.setAttribute(<span class="string">&quot;list&quot;</span>, setPeople);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--</span><br><span class="line">  <span class="keyword">var</span> , 每一次遍历出来的变量</span><br><span class="line">  items, 要遍历的对象</span><br><span class="line">  可选:</span><br><span class="line">    begin,   哪里开始</span><br><span class="line">    end,     到哪里</span><br><span class="line">    step,   步长</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;getPeople&quot;</span> items=<span class="string">&quot;$&#123;list&#125;&quot;</span> begin=<span class="string">&quot;1&quot;</span> end=<span class="string">&quot;3&quot;</span> step=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">  &lt;c:out value=<span class="string">&quot;$&#123;getPeople&#125;&quot;</span>/&gt;</span><br><span class="line">  &lt;br/&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="JavaBean">JavaBean</h2><ul><li><p>JavaBean(实体类) 有特定的写法:</p><ul><li><p>一个无参构造</p></li><li><p>属性必须私有化</p></li><li><p>必须有对应的 get/set 方法；</p></li></ul><hr></li><li><p>一般用来和数据库的字段做映射 ORM(对象关系映射)</p><ul><li><p>表—&gt;类</p></li><li><p>字段–&gt;属性</p></li><li><p>行记录----&gt;对象</p></li></ul></li></ul><hr><ul><li><p>样例 Java 类: <code>src/main/java/pojo/People.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">  <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">People</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">People</span><span class="params">(<span class="type">int</span> id, String name, <span class="type">int</span> age, String address)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.id = id;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">    <span class="built_in">this</span>.address = address;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.id = id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> address;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.address = address;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;People&#123;&quot;</span> +</span><br><span class="line">        <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">        <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">        <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">        <span class="string">&quot;, address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">1</span>, <span class="string">&quot;秦疆1号&quot;</span>, <span class="number">3</span>, <span class="string">&quot;西安&quot;</span>);</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">2</span>, <span class="string">&quot;秦疆2号&quot;</span>, <span class="number">3</span>, <span class="string">&quot;西安&quot;</span>);</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">People</span>(<span class="number">3</span>, <span class="string">&quot;秦疆3号&quot;</span>, <span class="number">3</span>, <span class="string">&quot;西安&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p>样例 JSP: <code>src/main/webapp/javaBean.jsp</code></p><ul><li>这里只是简单介绍 JavaBean 及其使用,并不推荐用 JSP 标签来操作 JavaBean,还是推荐用 Java 代码操作实体类对象.</li></ul><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;%-- Created by IntelliJ IDEA. User: <span class="number">29845</span> Date: <span class="number">2021</span>/<span class="number">4</span>/<span class="number">8</span> Time: <span class="number">23</span>:<span class="number">32</span> To change</span><br><span class="line"><span class="built_in">this</span> template use File | Settings | File Templates. --%&gt; &lt;%@ page</span><br><span class="line">contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;javaBean测试&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;jsp:useBean id=<span class="string">&quot;people&quot;</span> class=<span class="string">&quot;pojo.People&quot;</span> scope=<span class="string">&quot;page&quot;</span> /&gt;</span><br><span class="line">    &lt;jsp:setProperty name=<span class="string">&quot;people&quot;</span> property=<span class="string">&quot;id&quot;</span> value=<span class="string">&quot;1&quot;</span> /&gt;</span><br><span class="line">    &lt;jsp:setProperty name=<span class="string">&quot;people&quot;</span> property=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;狂神说&quot;</span> /&gt;</span><br><span class="line">    &lt;jsp:setProperty name=<span class="string">&quot;people&quot;</span> property=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;3&quot;</span> /&gt;</span><br><span class="line">    &lt;jsp:setProperty name=<span class="string">&quot;people&quot;</span> property=<span class="string">&quot;address&quot;</span> value=<span class="string">&quot;西安&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    id:</span><br><span class="line">    &lt;jsp:getProperty name=<span class="string">&quot;people&quot;</span> property=<span class="string">&quot;id&quot;</span> /&gt;</span><br><span class="line">    name:</span><br><span class="line">    &lt;jsp:getProperty name=<span class="string">&quot;people&quot;</span> property=<span class="string">&quot;name&quot;</span> /&gt;</span><br><span class="line">    age:</span><br><span class="line">    &lt;jsp:getProperty name=<span class="string">&quot;people&quot;</span> property=<span class="string">&quot;age&quot;</span> /&gt;</span><br><span class="line">    address:</span><br><span class="line">    &lt;jsp:getProperty name=<span class="string">&quot;people&quot;</span> property=<span class="string">&quot;address&quot;</span> /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 服务器 </tag>
            
            <tag> javaweb </tag>
            
            <tag> servlet </tag>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥼JavaWeb~(叁)Cookie/Session验证,JSP开篇</title>
      <link href="/post/Java/Web/3/"/>
      <url>/post/Java/Web/3/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-05-01 00:25:48 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\Web\3.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81">笔记代码</a></li><li><a href="#servlet">Servlet</a><ul><li><a href="#httpservletrequest">HttpServletRequest</a></li></ul></li><li><a href="#cookiesession">Cookie、Session</a><ul><li><a href="#cookie">Cookie</a></li><li><a href="#session">Session</a></li></ul></li><li><a href="#jsp">JSP</a><ul><li><a href="#%E4%BB%8B%E7%BB%8D">介绍</a></li><li><a href="#%E4%BE%9D%E8%B5%96%E5%AF%BC%E5%85%A5">依赖导入</a></li><li><a href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">基本语法</a></li></ul></li></ul><h2 id="笔记代码-5"><a href="https://github.com/Weidows/Java/tree/master/JavaWeb">笔记代码</a></h2><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Servlet-3">Servlet</h2><h3 id="HttpServletRequest">HttpServletRequest</h3><ul><li><p>例子: 在 index.jsp 提交表单信息给 <code>/login</code>,此 Servlet 后端读取发送来的表单信息并在页面输出显示.</p><ul><li><p>删掉并用 idea 重建 index.jsp,会补齐一些编码信息.</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page</span><br><span class="line">    contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;登录页面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;登录&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;div style=<span class="string">&quot;text-align: center&quot;</span>&gt;</span><br><span class="line">  &lt;form action=<span class="string">&quot;/login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      用户名:</span><br><span class="line">      &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> placeholder=<span class="string">&quot;无&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      密码:</span><br><span class="line">      &lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> placeholder=<span class="string">&quot;&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line"></span><br><span class="line">    爱好:</span><br><span class="line">    &lt;label&gt;&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbys&quot;</span> value=<span class="string">&quot;女孩&quot;</span>/&gt;女孩&lt;/label&gt;</span><br><span class="line">    &lt;label&gt;&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbys&quot;</span> value=<span class="string">&quot;代码&quot;</span>/&gt;代码&lt;/label&gt;</span><br><span class="line">    &lt;label&gt;&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbys&quot;</span> value=<span class="string">&quot;动漫&quot;</span>/&gt;动漫&lt;/label&gt;</span><br><span class="line">    &lt;label&gt;&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbys&quot;</span> value=<span class="string">&quot;美食&quot;</span>/&gt;美食&lt;/label&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>src/main/java/servlet/Login.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Login</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">7958099474557186407L</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">    resp.setCharacterEncoding(<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    String[] hobbys = req.getParameterValues(<span class="string">&quot;hobbys&quot;</span>);</span><br><span class="line"></span><br><span class="line">    writer.println(<span class="string">&quot;username: &quot;</span> + username);</span><br><span class="line">    writer.println(<span class="string">&quot;password: &quot;</span> + password);</span><br><span class="line">    writer.println(<span class="string">&quot;爱好: &quot;</span> + Arrays.toString(hobbys));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doGet(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>login<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.Login<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>login<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/login<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Cookie、Session">Cookie、Session</h2><ul><li><p>Cookie 是服务端在客户端上做的标记,用请求和响应进行传递,用来记录用户的访问信息 (客户端技术)</p></li><li><p>session 是在服务端上保存用户的访问信息 (服务端技术)</p></li></ul><h3 id="Cookie">Cookie</h3><ul><li><p>例子: 访问 <code>/cookie</code> 时,会显示上一次访问此 URL 的时间 (这个时间通过服务端传给客户端 Cookie 来记录)</p><ul><li><p><code>src/main/java/servlet/HelloCookie.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloCookie</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    resp.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取客户端请求中携带的cookie</span></span><br><span class="line">    Cookie[] cookies = req.getCookies();</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isFirst</span> <span class="operator">=</span> <span class="literal">true</span>; <span class="comment">// 标志是否是第一次访问</span></span><br><span class="line"></span><br><span class="line">    writer.println(<span class="string">&quot;你上一次访问时间是: &quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">      <span class="keyword">if</span> (cookie.getName().equals(<span class="string">&quot;LastLoginTime&quot;</span>)) &#123;</span><br><span class="line">        isFirst = <span class="literal">false</span>;</span><br><span class="line">        writer.println(cookie.getValue());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isFirst) &#123;</span><br><span class="line">      writer.println(<span class="string">&quot;这次是第一次访问.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 响应携带cookie返回给客户端</span></span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">lastLoginTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;LastLoginTime&quot;</span>, System.currentTimeMillis() + <span class="string">&quot;&quot;</span>);<span class="comment">// 非字符串+&quot;&quot; = 字符串</span></span><br><span class="line">    resp.addCookie(lastLoginTime);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doGet(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>cookie<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.HelloCookie<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>cookie<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/cookie<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr></li><li><p>常用方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Cookie[] cookies = req.getCookies(); <span class="comment">//获得Cookie</span></span><br><span class="line">cookie.getName(); <span class="comment">//获得cookie中的key</span></span><br><span class="line">cookie.getValue(); <span class="comment">//获得cookie中的vlaue</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;lastLoginTime&quot;</span>, System.currentTimeMillis()+<span class="string">&quot;&quot;</span>); <span class="comment">//新建一个cookie</span></span><br><span class="line">cookie.setMaxAge(<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>); <span class="comment">//设置cookie的有效期</span></span><br><span class="line">resp.addCookie(cookie); <span class="comment">//响应给客户端一个cookie</span></span><br></pre></td></tr></table></figure></li><li><p>一些细节</p><ul><li><p>cookie 大小和数量</p><ul><li>不同浏览器支持的大小和数量不一样,大小都是 4K 左右,数量为每域名几十到无数个不等.</li></ul><blockquote><p><a href="https://blog.csdn.net/u011127019/article/details/89206016">cookie 大小限制</a></p></blockquote></li><li><p>设置存活期:</p><ul><li><p>不设置: 关闭浏览器自动失效</p></li><li><p>设置为 0,立即失效.</p></li></ul></li><li><p>遇到传输的中文乱码问题,可以用 URLEncoder 编码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">URLEncoder.encode(<span class="string">&quot;齐下无贰&quot;</span>,<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">URLDecoder.decode(cookie.getValue(),<span class="string">&quot;UTF-8&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="Session">Session</h3><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVt166.png" alt="20210330120835" /></blockquote><ul><li><p>cookie 用来传输一些字符串验证信息,并存放在客户端中.</p></li><li><p>而 session 可以存放更宽泛的数据(对象,文件等等),其数据存放在服务端.</p><ul><li><p>服务端传给客户端一个名为 <code>JSESSIONID</code> 的 cookie 用来验证 session</p></li><li><p>一个 Seesion 对象独占一个浏览器,不同浏览器有不同的 session</p></li></ul></li></ul><hr><ul><li><p>例子: 开启服务器并访问第一个页面 <code>localhost:8080</code> 时,session 就被创建了,然后访问 <code>/setSession</code>设置 person 信息,再访问 <code>/getSession</code>会显示 person 信息.</p><ul><li><p><code>src/main/java/servlet/SetSession.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetSession</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//解决乱码问题</span></span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//得到Session和writer</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//给Session中存东西</span></span><br><span class="line">    session.setAttribute(<span class="string">&quot;person&quot;</span>, <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;齐下无贰&quot;</span>, <span class="number">100</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取Session的ID</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sessionId</span> <span class="operator">=</span> session.getId();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断Session是不是新创建</span></span><br><span class="line">    <span class="keyword">if</span> (session.isNew()) &#123;</span><br><span class="line">      writer.println(<span class="string">&quot;session创建成功,ID: &quot;</span> + sessionId);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      writer.println(<span class="string">&quot;session已经在服务器中存在了,ID: &quot;</span> + sessionId);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doGet(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span> +</span><br><span class="line">        <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">        <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">        <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p><code>src/main/java/servlet/GetSession.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetSession</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">4606977948300644893L</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//解决乱码问题</span></span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//得到Session和writer</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取属性并输出</span></span><br><span class="line">    <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> (Person) session.getAttribute(<span class="string">&quot;person&quot;</span>);</span><br><span class="line">    writer.println(person);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 移除属性</span></span><br><span class="line">    session.removeAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//手动注销Session</span></span><br><span class="line">    session.invalidate();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doGet(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>setSession<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.SetSession<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>getSession<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.GetSession<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>setSession<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/setSession<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>getSession<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/getSession<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr></li><li><p>session 有效期问题</p><ul><li><p>默认失效时间是 30 分钟</p></li><li><p>是从 session 断开连接(浏览器关闭开始计算的),而不是从 session 连接开始计算</p></li><li><p>可以在 web.xml 中设置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>1<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p><a href="https://blog.csdn.net/fanbingfu/article/details/78318855">关于 session 的失效时间和过期</a></p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="JSP">JSP</h2><h3 id="介绍">介绍</h3><ul><li><p>JSP (Java Server Pages),写法类似 HTML 的动态 Java 页面</p></li><li><p>最终 JSP 会被转换为一个 Java 类,实际上本质就是 <code>Servlet 的简化实现</code>.</p><ul><li><p><code>*.jsp -&gt; *.java -&gt; *.class</code></p><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVtmc0.png" alt="20210403111103" /></blockquote></li></ul><hr></li><li><p>jsp 转换为的 java 文件核心部分:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_jspInit</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//销毁</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_jspDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//JSPService</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_jspService</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span><br></pre></td></tr></table></figure><hr></li><li><p>JSPService 内初始化的对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> javax.servlet.jsp.PageContext pageContext;  <span class="comment">//页面上下文</span></span><br><span class="line">javax.servlet.http.<span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> <span class="literal">null</span>;    <span class="comment">//session</span></span><br><span class="line"><span class="keyword">final</span> javax.servlet.ServletContext application;   <span class="comment">//Context-&gt;application</span></span><br><span class="line"><span class="keyword">final</span> javax.servlet.ServletConfig config;         <span class="comment">//config</span></span><br><span class="line">javax.servlet.jsp.<span class="type">JspWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span>;           <span class="comment">//writer-&gt;out</span></span><br><span class="line"><span class="keyword">final</span> java.lang.<span class="type">Object</span> <span class="variable">page</span> <span class="operator">=</span> <span class="built_in">this</span>;               <span class="comment">//当前页面-&gt;page</span></span><br><span class="line">HttpServletRequest request                        <span class="comment">//请求</span></span><br><span class="line">HttpServletResponse response                      <span class="comment">//响应</span></span><br><span class="line"></span><br><span class="line">response.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">pageContext = _jspxFactory.getPageContext(<span class="built_in">this</span>, request, response,<span class="literal">null</span>, <span class="literal">true</span>, <span class="number">8192</span>, <span class="literal">true</span>);</span><br><span class="line">_jspx_page_context = pageContext;</span><br><span class="line">application = pageContext.getServletContext();</span><br><span class="line">config = pageContext.getServletConfig();</span><br><span class="line">session = pageContext.getSession();</span><br><span class="line">out = pageContext.getOut();</span><br><span class="line">_jspx_out = out;</span><br></pre></td></tr></table></figure><hr></li><li><p>JSP 中可以写 Java 代码,Java 代码会原封不动的正常执行</p><ul><li>HTML 代码在 JSP-&gt;Java 时会被转换成 <code>out.write(&quot;&lt;html&gt;\r\n&quot;);</code> 这种形式.</li></ul></li></ul><hr><h3 id="依赖导入">依赖导入</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- servlet依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- JSP依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Standard标签库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="基本语法-2">基本语法</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.Date&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;测试&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;!-- 这是HTML的注释,会在客户端显示 --&gt;</span><br><span class="line">    &lt;%-- 这是JSP注释,不会在客户端显示 --%&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">      JSP表达式: 用来将程序输出到客户端</span><br><span class="line">      &lt;%= <span class="string">&quot;变量或者表达式&quot;</span>%&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;%= <span class="keyword">new</span> <span class="title class_">Date</span>()%&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">      JSP脚本片段</span><br><span class="line">      &lt;% jsp脚本片段 %&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">      <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;=<span class="number">100</span> ; i++) &#123; sum+=i; &#125;</span><br><span class="line">      out.println(<span class="string">&quot;&lt;h1&gt;Sum=&quot;</span>+sum+<span class="string">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">      JSP声明</span><br><span class="line">      会被编译到JSP生成Java的类中！其他的，就会被生成到_jspService方法中！</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;%!</span><br><span class="line">      <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Loading Servlet!&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">private</span> <span class="type">int</span> <span class="variable">globalVar</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">kuang</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入了方法Kuang！&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><hr><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 服务器 </tag>
            
            <tag> javaweb </tag>
            
            <tag> servlet </tag>
            
            <tag> cookie </tag>
            
            <tag> session </tag>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥼JavaWeb~(贰)-&gt;Servlet</title>
      <link href="/post/Java/Web/2/"/>
      <url>/post/Java/Web/2/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-05-01 00:23:51 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\Web\2.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81">笔记代码</a></li><li><a href="#servlet">Servlet</a><ul><li><a href="#%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91">请求转发</a></li><li><a href="#%E8%AF%BB%E5%8F%96-properties">读取 properties</a></li><li><a href="#httpservletresponse">HttpServletResponse</a><ul><li><a href="#%E5%93%8D%E5%BA%94">响应</a></li><li><a href="#%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6">下载文件</a></li><li><a href="#%E9%AA%8C%E8%AF%81%E7%A0%81">验证码</a></li><li><a href="#%E9%87%8D%E5%AE%9A%E5%90%91">重定向</a></li><li><a href="#%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4%E5%93%8D%E5%BA%94">表单提交+响应</a></li></ul></li></ul></li></ul><h2 id="笔记代码-4"><a href="https://github.com/Weidows/Java/tree/master/JavaWeb">笔记代码</a></h2><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Servlet-2">Servlet</h2><h3 id="请求转发">请求转发</h3><ul><li><p>把 <code>/helloParameter</code> 转发到 <code>/HelloDispatcher</code></p><ul><li><p>转发后这两个地址都会显示<code>/helloParameter</code>的内容</p></li><li><p>另外一个手段: <code>重定向</code> ,重定向之后原地址就不可访问了</p></li></ul><hr></li><li><p><code>src/main/java/com/weidows/HelloDispatcher.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloDispatcher</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">    context.getRequestDispatcher(<span class="string">&quot;/helloParameter&quot;</span>).forward(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>web.xml</code> (在上面<code>初始化参数</code>基础上添加的)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloDispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.weidows.HelloDispatcher<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloDispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/HelloDispatcher<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="读取-properties">读取 properties</h3><blockquote><p>我们开发的项目需要进行打包处理,所以不能直接引用 <code>src/</code> 里面的资源,需要引用对应 <code>target/</code> 内部的.</p></blockquote><ul><li><p>这种资源文件一般放在 <code>src/main/resources</code> 里面,如果放在 <code>src/main/java</code>里面默认情况下会出现无法被 maven 导出的情况 (通常我们称 resources 和 java 为 classpath)</p><ul><li><p><code>src/main/java</code> 里面默认情况下只会编译并导出 <code>*.java</code>,不会管其他类型文件,可以修改 pom.xml 来使之生效:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr></li><li><p>生成文件路径:</p><ul><li><p>如果放在 resources 中,其生成路径为 <code>target/demo-2/WEB-INF/classes/db.properties</code></p></li><li><p>如果放在 java 中,生成路径为 <code>target/demo-2/WEB-INF/classes/com/weidows/db.properties</code></p></li></ul><hr></li><li><p>例子: 读取打包后的 properties 并显示.</p><ul><li><p><code>src/main/java/com/weidows/HelloProperties.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloProperties</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">437042901757770674L</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="comment">// 生成后的路径: target/demo-2/WEB-INF/classes/db.properties</span></span><br><span class="line">    prop.load(<span class="built_in">this</span>.getServletContext().getResourceAsStream(<span class="string">&quot;/WEB-INF/classes/db.properties&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">    resp.getWriter().print(<span class="string">&quot;username: &quot;</span> + user + <span class="string">&quot;\npassword: &quot;</span> + pwd);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p><code>src/main/resources/db.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloProperties<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.weidows.HelloProperties<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloProperties<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/helloProperties<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="HttpServletResponse">HttpServletResponse</h3><ul><li><p>Web 服务器接收到 http 请求信息,会创建 HttpServletRequest 和 HttpServletResponse 的两个对象</p><ul><li><p>前者负责客户端传来的参数</p></li><li><p>后者负责服务端响应的信息</p></li></ul><hr></li></ul><h4 id="响应">响应</h4><ul><li><p>向浏览器发送数据的方法:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServletOutputstream <span class="title function_">getOutputstream</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span><br><span class="line">Printwriter <span class="title function_">getwriter</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span><br></pre></td></tr></table></figure></li><li><p>负责向浏览器发送响应头的方法:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">setCharacterEncoding</span><span class="params">(String var1)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setContentLength</span><span class="params">(<span class="type">int</span> var1)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setContentLengthLong</span><span class="params">(<span class="type">long</span> var1)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setContentType</span><span class="params">(String var1)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setDateHeader</span><span class="params">(String varl,<span class="type">long</span> var2)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">addDateHeader</span><span class="params">(String var1,<span class="type">long</span> var2)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setHeader</span><span class="params">(String var1,String var2)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">addHeader</span><span class="params">(String var1,String var2)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setIntHeader</span><span class="params">(String var1,<span class="type">int</span> var2)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">addIntHeader</span><span class="params">(String varl,<span class="type">int</span> var2)</span></span><br></pre></td></tr></table></figure></li></ul><hr><h4 id="下载文件">下载文件</h4><ul><li><p><code>src/main/java/servlet/FileServlet.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">2643615496012694161L</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">// 1. 要获取下载文件的路径</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getRealPath(<span class="string">&quot;/WEB-INF/classes/test.txt&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;下载文件的路径：&quot;</span> + realPath);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 下载的文件名</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> realPath.substring(realPath.lastIndexOf(<span class="string">&quot;\\&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;文件名: &quot;</span> + fileName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 设置想办法让浏览器能够支持(Content-Disposition)下载我们需要的东西,中文文件名URLEncoder.encode编码，否则有可能乱码</span></span><br><span class="line">    resp.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + URLEncoder.encode(fileName, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. 获取下载文件的输入流</span></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realPath);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. 创建缓冲区</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6. 获取OutputStream对象</span></span><br><span class="line">    <span class="type">ServletOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> resp.getOutputStream();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 7. 将FileOutputStream流写入到buffer缓冲区,使用OutputStream将缓冲区中的数据输出到客户端！</span></span><br><span class="line">    <span class="keyword">while</span> ((len = in.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      out.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 8. 关闭连接</span></span><br><span class="line">    in.close();</span><br><span class="line">    out.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doGet(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>src/main/resources/test.txt</code></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">此处内容随意,比如写个 &quot;测试&quot;.</span><br></pre></td></tr></table></figure><hr></li><li><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>fileServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.FileServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>fileServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/fileServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h4 id="验证码">验证码</h4><ul><li><p><code>src/main/java/servlet/ImageServlet.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImageServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">4590298452958016399L</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//如何让浏览器3秒自动刷新一次;</span></span><br><span class="line">    resp.setHeader(<span class="string">&quot;refresh&quot;</span>, <span class="string">&quot;3&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在内存中创建一个图片</span></span><br><span class="line">    <span class="type">BufferedImage</span> <span class="variable">image</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedImage</span>(<span class="number">80</span>, <span class="number">20</span>, BufferedImage.TYPE_INT_RGB);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//得到图片</span></span><br><span class="line">    <span class="type">Graphics2D</span> <span class="variable">graphics</span> <span class="operator">=</span> (Graphics2D) image.getGraphics(); <span class="comment">//笔</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置图片的背景颜色</span></span><br><span class="line">    graphics.setColor(Color.white);</span><br><span class="line">    graphics.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">80</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//给图片写数据</span></span><br><span class="line">    graphics.setColor(Color.BLUE);</span><br><span class="line">    graphics.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="literal">null</span>, Font.BOLD, <span class="number">20</span>));</span><br><span class="line">    graphics.drawString(makeNum(), <span class="number">0</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//告诉浏览器，这个请求用图片的方式打开</span></span><br><span class="line">    resp.setContentType(<span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//网站存在缓存，不让浏览器缓存</span></span><br><span class="line">    resp.setDateHeader(<span class="string">&quot;expires&quot;</span>, -<span class="number">1</span>);</span><br><span class="line">    resp.setHeader(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">    resp.setHeader(<span class="string">&quot;Pragma&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//把图片写给浏览器</span></span><br><span class="line">    ImageIO.write(image, <span class="string">&quot;jpg&quot;</span>, resp.getOutputStream());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//生成随机数</span></span><br><span class="line">  <span class="keyword">private</span> String <span class="title function_">makeNum</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">    <span class="type">String</span> <span class="variable">num</span> <span class="operator">=</span> random.nextInt(<span class="number">9999999</span>) + <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">7</span> - num.length(); i++) &#123;</span><br><span class="line">      sb.append(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    num = sb.toString() + num;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doGet(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>imageServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.ImageServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>imageServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/imageServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h4 id="重定向">重定向</h4><ul><li><p>访问一个页面时跳转到另一个页面</p></li><li><p><code>src/main/java/servlet/RedirectServlet.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedirectServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.sendRedirect(<span class="string">&quot;/&quot;</span>);<span class="comment">//重定向</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doGet(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>redirect<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.RedirectServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>redirect<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/redirect<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>转发&amp;重定向 の 区别</p><ul><li>转发 URL 不会变化,重定向会变化</li><li>访问转发的页面有一个请求,重定向会产生前后两个请求,第一个请求状态码是 302</li></ul></li></ul><hr><h4 id="表单提交-响应">表单提交+响应</h4><blockquote><p><a href="https://blog.csdn.net/zhangliangzi/article/details/50131835">Form 表单数据传输方式之 Get 与 Post 区别</a></p></blockquote><ul><li><p>get 与 post 区别体现在客户端&lt;–&gt;服务端之间的信息传递</p></li><li><p>我们在 overwrite HttpServlet 类的 doGet &amp; doPost 方法时,是在处理通过 get/post 接收到请求或信息后的业务</p></li><li><p>get/post 就像一个屋子的两个门,进门的方式不一样,但是所进入的屋子是一样的 (让他俩互相调用,处理相同的业务)</p></li></ul><hr><ul><li><p>例子: 开启 Tomcat 后进入 index.jsp 页面,输入表单后提交,信息以 post 形式传递给 <code>/request</code> 后端,这个动态页面收到数据并在页面输出.</p><ul><li><p><code>index.jsp</code></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;/request&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">  &lt;label&gt;</span><br><span class="line">    用户名:</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt;</span><br><span class="line">  &lt;/label&gt; &lt;br/&gt;</span><br><span class="line">  &lt;label&gt;</span><br><span class="line">    密码:</span><br><span class="line">    &lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>/&gt;</span><br><span class="line">  &lt;/label&gt; &lt;br/&gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;submit&quot;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>src/main/java/servlet/RequestServlet.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">    writer.println(<span class="string">&quot;Success get username &amp; password.&quot;</span>);</span><br><span class="line">    writer.println(<span class="string">&quot;username: &quot;</span> + username);</span><br><span class="line">    writer.println(<span class="string">&quot;password: &quot;</span> + password);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>request<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.RequestServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>request<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/request<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 服务器 </tag>
            
            <tag> javaweb </tag>
            
            <tag> servlet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🌈基础知识</title>
      <link href="/post/experience/basic/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
      <url>/post/experience/basic/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<h1>基础知识</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-05-14 23:19:30 * @FilePath: \Blog-private\source\_posts\experience\basic\基础知识.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">基础知识</a><ul><li><a href="#%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE">思维导图</a></li><li><a href="#%E7%A1%AC%E4%BB%B6">硬件</a><ul><li><a href="#%E5%8E%9F%E5%8F%8D%E8%A1%A5%E7%A0%81">原反补码</a></li><li><a href="#%E5%8D%95%E7%89%87%E6%9C%BA">单片机</a></li></ul></li><li><a href="#%E5%A4%8D%E5%8F%98%E5%87%BD%E6%95%B0">复变函数</a><ul><li><a href="#%E5%A4%8D%E6%95%B0">复数</a></li></ul></li><li><a href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C">计算机网络</a><ul><li><a href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">数据链路层</a><ul><li><a href="#%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6%E5%88%86%E7%B1%BB">媒体接入控制分类</a></li><li><a href="#csmacd">CSMA/CD</a></li><li><a href="#mac-%E5%B1%82%E5%8D%8F%E8%AE%AE">MAC 层协议</a></li></ul></li><li><a href="#%E7%BD%91%E7%BB%9C%E5%B1%82">网络层</a><ul><li><a href="#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE">路由选择协议</a></li><li><a href="#%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AE-rip-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">路由信息协议 RIP 的基本工作原理</a></li><li><a href="#%E5%BC%80%E6%94%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88-ospf-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">开放最短路径优先 OSPF 的基本工作原理</a></li><li><a href="#%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-bgp">边界网关协议 BGP</a></li></ul></li></ul></li><li><a href="#%E7%A6%BB%E6%95%A3">离散</a><ul><li><a href="#%E5%9B%BE">图</a></li></ul></li><li><a href="#%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1">算法分析与设计</a><ul><li><a href="#%E6%9C%80%E5%A4%A7%E5%9B%A2-%E6%9C%80%E5%A4%A7%E7%8B%AC%E7%AB%8B%E9%9B%86">最大团-最大独立集</a></li><li><a href="#01-%E8%83%8C%E5%8C%85">01-背包</a></li><li><a href="#%E7%9F%A9%E9%98%B5%E8%BF%9E%E4%B9%98">矩阵连乘</a></li><li><a href="#%E5%85%AB%E7%9A%87%E5%90%8E%E8%A7%A3%E6%B3%95%E9%80%9F%E8%AE%B0">八皇后解法速记</a></li><li><a href="#%E9%9A%8F%E6%9C%BA%E5%8C%96%E7%AE%97%E6%B3%95">随机化算法</a></li><li><a href="#%E6%B8%90%E8%BF%91%E9%98%B6%E9%AB%98%E4%BD%8E">渐近阶高低</a></li><li><a href="#%E6%95%B0%E8%AE%BA%E5%9B%9B%E5%A4%A7%E5%AE%9A%E7%90%86">数论四大定理</a></li><li><a href="#%E6%A3%8B%E7%9B%98%E8%A6%86%E7%9B%96%E9%97%AE%E9%A2%98">棋盘覆盖问题</a></li><li><a href="#%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2">二分搜索</a></li><li><a href="#%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91">斐波那契</a></li><li><a href="#%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F">快速排序</a><ul><li><a href="#%E6%80%9D%E8%B7%AF%E4%B8%80">思路一</a></li><li><a href="#%E6%80%9D%E8%B7%AF%E4%BA%8C">思路二</a></li></ul></li><li><a href="#%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E5%BA%8F%E5%88%97">最长公共子序列</a></li></ul></li><li><a href="#%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD">人工智能</a></li><li><a href="#%E9%9B%B6%E6%95%A3%E7%9A%84">零散的</a><ul><li><a href="#%E6%B2%B3%E5%B7%A5%E5%A4%A7-uml">河工大-UML</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><blockquote><p>已录入 <a href="../../../others/LearnWay#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">😍Weidows-の成长路线#基础知识</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="思维导图">思维导图</h2><p>一些零散的不足以道,做成导图了</p><blockquote class="pullquote mindmap mindmap-md"><ul><li>基础知识<ul><li>数据结构<ul><li><a href="https://www.cnblogs.com/zmc940317/articles/10925497.html">二叉树的前,中,后序遍历详解</a></li></ul></li><li>操作系统<ul><li><a href="../../../system/process-thread">我给总结了一下: 🤷‍♂️ 进程,线程,CPU 核心,并行,并发大杂碎!</a></li><li><a href="https://blog.csdn.net/qq_33414271/article/details/80245715">一句话+一张图说清楚——银行家算法</a></li><li><a href="https://blog.csdn.net/a745233700/article/details/86011504">操作系统：经典进程同步问题 之 生产者-消费者问题、读者-写者问题、哲学家进餐问题</a></li><li><a href="https://blog.csdn.net/lala_wang/article/details/81116781?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-0&amp;spm=1001.2101.3001.4242">调度算法的介绍及优缺点</a></li></ul></li><li>编译原理<ul><li><a href="https://blog.csdn.net/qq_39384184/article/details/86037568">编译原理：总结</a></li></ul></li><li>硬件<ul><li><a href="https://www.bilibili.com/video/BV1sE411L7j5">【一天掌握 51 单片机基础】<em>单片机原理及应用</em>东北大学（高宏亮 主讲）</a></li></ul></li><li>数据库<ul><li>MySQL<ul><li><a href="https://www.bilibili.com/video/BV1NJ411J79W">【狂神说 Java】MySQL 最新教程通俗易懂</a></li><li><a href="https://blog.csdn.net/weixin_45483328/article/details/113759286?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control&amp;dist_request_id=&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control">狂神说数据库笔记</a></li></ul></li><li>MongoDB<ul><li>有 MySQL 基础能很快上手</li><li><a href="https://github.com/krislinzhao/StudyNotes/tree/master/MongoDB">krislinzhao/StudyNotes</a></li></ul></li><li>通用<ul><li><a href="https://blog.csdn.net/wxwzy738/article/details/17590305">MySQL 单列索引和组合索引的区别介绍</a><ul><li>质量相当高的文章</li></ul></li><li><a href="https://mp.weixin.qq.com/s/3ZdACGiA0SutmbDxMeF-UA">我们为什么要分库分表？</a><ul><li>这篇封神了,把我最近在数据库业务设计方面的疑问解决了.</li></ul></li></ul></li><li>课程<ul><li><a href="https://www.docin.com/p-1564094016.html">数据库考试试题及答案</a></li></ul></li></ul></li><li>算法-数学<ul><li>傅里叶变换<ul><li><a href="../%E9%80%9A%E4%BF%A1%E6%8A%80%E6%9C%AF#%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2">👽 通信技术-开坑自埋</a></li></ul></li><li>P/NP 问题<ul><li><a href="https://baike.baidu.com/item/P%E5%AF%B9NP%E9%97%AE%E9%A2%98">P 对 NP 问题</a></li><li><a href="https://www.omegaxyz.com/2019/04/22/np/?hilite=%27filled%27,%27o.e.m%27">算法复杂度与 NP 问题</a></li><li><a href="http://www.cainiaoxueyuan.com/suanfa/4517.html">贪婪算法案例、np 完全问题及 java 代码实现</a><ul><li>非常经典和值得探索的问题 (经验接收自@河北工业大学)</li></ul></li></ul></li><li>Hash-算法<ul><li>用来校验文本/文件,主流有三类,不同算法产生的 hash code 不同<ul><li>MD5</li><li>CRC-32, CRC-64</li><li>SHA-1, SHA-256, SHA-384, SHA-512</li></ul></li><li>校验方法<ul><li><a href="https://blog.csdn.net/weixin_30799995/article/details/94896898">文件完整性校验</a></li></ul></li></ul></li><li>排序算法<ul><li><a href="https://www.cnblogs.com/chengxiao/p/6194356.html">图解排序算法(四)之归并排序</a></li></ul></li></ul></li><li>论文<ul><li><a href="https://cloud.tencent.com/developer/news/231960">如何将 CNKI 论文信息转换成你想要的参考文献格式</a><ul><li>关键时候挺好用的功能</li></ul></li><li><a href="https://zhuanlan.zhihu.com/p/54344547">word操作技巧：有关脚注和尾注的使用方法</a></li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="硬件">硬件</h2><h3 id="原反补码">原反补码</h3><ul><li><p>开局三张图,故事全靠编 🤣</p><img src="https://www.helloimg.com/images/2022/02/27/GVtBQE.png" alt="20210325114342" /><img src="https://www.helloimg.com/images/2022/02/27/GVtZcX.png" alt="20210325114403" /><img src="https://www.helloimg.com/images/2022/02/27/GVtRJ9.png" alt="20210325114419" /></li><li><p>因为带有符号位的二进制数在计算机内计算时,原码和反码的运算结果都不是 100%正确,而且会有<code>+0</code>和<code>-0</code>两个零</p></li><li><p>补码 100%正确,于是我们采用补码,而且补码只有一个零</p><ul><li>补码就是为了解决这两个问题的,没了.</li></ul></li></ul><hr><h3 id="单片机">单片机</h3><ul><li><p>标志寄存器内部的八位是分开使用的,作用不同,但功能都是作为标志位</p><img src="https://www.helloimg.com/images/2022/02/27/GVtJm5.png" alt="20210331121042" /><img src="https://www.helloimg.com/images/2022/02/27/GVtxyA.png" alt="20210331122847" /><img src="https://www.helloimg.com/images/2022/02/27/GVtsVm.png" alt="20210331122957" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="复变函数">复变函数</h2><h3 id="复数">复数</h3><ul><li><p>运算<br><img src="https://www.helloimg.com/images/2022/02/27/GVtqQz.png" alt="20210402161142" /></p></li><li><p>一般表示<br><img src="https://www.helloimg.com/images/2022/02/27/GVtorg.png" alt="20210325170144" /></p></li><li><p>几何表示<br><img src="https://www.helloimg.com/images/2022/02/27/GVtP3M.png" alt="20210325170538" /></p></li><li><p>幂与根<br><img src="https://www.helloimg.com/images/2022/02/27/GVtXZn.png" alt="20210325181554" /></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="计算机网络">计算机网络</h2><blockquote><p>摘自 <a href="https://space.bilibili.com/360996402/">湖科大教书匠-计算机网络</a></p></blockquote><h3 id="数据链路层">数据链路层</h3><h4 id="媒体接入控制分类">媒体接入控制分类</h4><img src="https://www.helloimg.com/images/2022/02/27/GVSwgX.png" alt="20210930170530" /><h4 id="CSMA-CD">CSMA/CD</h4><blockquote><p><a href="https://www.136.la/tech/show-132262.html">2016.6.20 计算机网络复习要点第三章之 CSMA/CD 协议(示例代码)</a></p></blockquote><p>采用随机接入,当多个主机同时发送帧时会<code>发生碰撞/冲突</code>.无连接不可靠,尽力交付的服务.</p><ul><li><p>CSMA/CD (载波监听多点接入/碰撞检测) 是以太网采用的<code>解决冲突</code>的方法</p><ul><li>多路接入 MA: 多个站点接入同一条总线上,竞争使用总线</li><li>载波监听 CS: 站点发送数据前，先检查总线上是不是已经有数据在传输，如果有就暂缓发送，避免冲突。</li><li>冲突检测: 边发送边对介质上电压信号进行检测，当电压摆动值超过一定门限时就认为发生了冲突。一旦发生冲突就停止发送数据，然后根据协议进行重传。</li></ul><hr></li><li><p>在使用 CSMA/CD 协议时，一个站不可能同时进行发送和接收（但必须边发送边监听）。因此，使用 CSMA/CD 协议的以太网不可能进行全双工通信而只能进行半双工通信（双向交替通信）；</p><ul><li><p>每一个站在自己发送数据之后的一小段时间内，存在着遭遇碰撞的可能性，这一小段时间是不确定的，它取决于另一个发送数据的站到本站的距离；</p></li><li><p>最先发送数据帧的 A 站，在发送数据帧后至多经过时间 2r 就可知道所发送的数据帧是否遭受到碰撞；因此，以太网端到端往返时间 2r 称为争用期（碰撞窗口）；</p></li><li><p>经过争用期还没有检测到碰撞，才能肯定后续发送的数据一定不会发送碰撞；</p></li><li><p>凡是长度小于 64 字节的帧都是由于冲突而异常中止的无效帧，只要收到了这种无效帧，就应当立即将其丢弃；</p></li></ul><hr></li><li><p>采用截断二进制指数退避算法来确定碰撞后重传的时机</p><ul><li><p>让发生碰撞的站停止发送数据后，不是等待信道变为空闲后就立即发送数据，而是推迟（退避）一个随机的时间</p></li><li><p>单位回退时间通常取冲突窗口(争用期)的值 2r，即传输最小帧长 512bit 数据用时，叫作时槽。</p></li><li><p>取 r, 0 ≤ r &lt; 2^k-1,重传的时延(退避时间)就是 r 倍的单位回退时间。</p></li><li><p>K 为碰撞次数时。K=Min[重传次数，10]，当重传次数超过 10 时，K 就不在增大而是一直等于 10；当重传达 16 次仍不能成功时，则丢弃该帧，并向高层报告</p></li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVPP1b.png" alt="20210930181153" /></li><li><p>信道利用率</p><img src="https://www.helloimg.com/images/2022/02/27/GV4ggS.png" alt="20210930191350" /></li><li><p>帧发送/接收流程</p><img src="https://www.helloimg.com/images/2022/02/27/GVPbu6.png" alt="20210930191552" /><img src="https://www.helloimg.com/images/2022/02/27/GVL18C.png" alt="20210930191636" /></li></ul><hr><h4 id="MAC-层协议">MAC 层协议</h4><blockquote><ol><li><a href="https://blog.csdn.net/t_home/article/details/90711643">以太网 MAC 层基础知识学习</a></li><li>小林 Coding - 图解网络</li></ol></blockquote><ul><li><p>MAC (media access control) / (message authentication code)</p><ul><li>MAC 地址相同的设备只要不是同属一个数据链路就不会出现问题。同一网段下两设备都不能正常联网.</li></ul><blockquote><p>I3E 注册管理结构 RA（Registration Authority）是局域网全球地址的法定管理机构[W-IEEERA]，负责分配前三个字节；前三个字节又称组织唯一标识符 OUI（Organizationally Unique Identifier），又称公司标识符（Company ID）[RFC 7042]。后三个字节由厂家自行指派称为扩展标识符（Extended Identifier）。总的一起叫做 EUI-48 扩展的唯一标识符（Extended Unique Identifier）。</p></blockquote><hr></li><li><p>以太网 V2 的 MAC 帧格式(MAC 格式标准有两个，一个是 DIX Ethernet V2 标准，一个是 IEEE 的 802.3 标准)</p><ul><li>IEEE 802 标准中规定了一种 48 位的全球地址，此地址固化在适配器的 ROM 中（所以称为物理地址）。无线 LAN、蓝牙、以太网、FDDI、ATM 等设备都使用相同规格的 MAC 地址。</li></ul></li><li><p>MAC 地址字段</p><img src="https://www.helloimg.com/images/2022/02/27/GVthY0.png" alt="20210930194939" /><img src="https://www.helloimg.com/images/2022/02/27/GVAx90.png" alt="20210930202539" /><hr></li><li><p>网络包至此(数据链路层)的图解</p><img src="https://www.helloimg.com/images/2022/02/27/GV4M7n.png" alt="20210930204450" /></li></ul><hr><h3 id="网络层">网络层</h3><h4 id="路由选择协议">路由选择协议</h4><ul><li><p>动/静态路由选择</p><img src="https://www.helloimg.com/images/2022/02/27/GV4raC.png" alt="20211022084950" /></li><li><p>因特网<code>采用动态路由选择</code>,分层次自治</p><img src="https://www.helloimg.com/images/2022/02/27/GVPc60.png" alt="20211022085337" /><img src="https://www.helloimg.com/images/2022/02/27/GV4u0E.png" alt="20211022085557" /></li><li><p>路由器基本结构</p><img src="https://www.helloimg.com/images/2022/02/27/GViD6S.png" alt="20211022090722" /></li></ul><h4 id="路由信息协议-RIP-的基本工作原理">路由信息协议 RIP 的基本工作原理</h4><img src="https://www.helloimg.com/images/2022/02/27/GVAFD6.png" alt="20211022100415" /><ul><li><p>RIP 会选择距离向量短的路由,而不管带宽 (距离相同的话使用负载均衡)</p><img src="https://www.helloimg.com/images/2022/02/27/GVLHpn.png" alt="20211022100624" /><img src="https://www.helloimg.com/images/2022/02/27/GVP7V1.png" alt="20211022100656" /></li><li><p>RIP 交换要点</p><p>只和相邻路由器交换信息</p><p>交换自己的路由表</p><p>周期性交换 (比如 30s)</p></li><li><p>举例: RIP 路由条目更新规则</p><img src="https://www.helloimg.com/images/2022/02/27/GVA7lM.png" alt="20211022115640" /></li><li><p>坏消息传得慢/路由环路/距离无穷计数问题</p><p>新更新的路由表被老版本覆盖,有几个措施可以<code>减少出现概率</code>或减小危害:</p><ol><li><p>限制最大路径为 15</p></li><li><p>路由表发生变化时立即发送更新报文 (触发更新)</p></li><li><p>记录特定接口的路由信息,而不反向传递 (水平分割)</p></li></ol></li></ul><hr><h4 id="开放最短路径优先-OSPF-的基本工作原理">开放最短路径优先 OSPF 的基本工作原理</h4><ul><li><p>基本工作原理</p><p>基于链路状态,使用最短路径优先,保证不会产生路由环路</p><p>不限制网络规模,更新效率高,收敛速度快</p><p>链路状态是指与哪些路由器相邻以及相应连路的代价 (费用/距离/时延/带宽等等)</p><img src="https://www.helloimg.com/images/2022/02/27/GV4yhY.png" alt="20211022165456" /></li><li><p>链路状态更新 &amp;&amp; 最短路径 SPF 计算</p><p>每个路由器会产生链路状态通告(LSA),包含: 直连网络/邻居路由器得到链路状态</p><p>LSA 封装在链路状态更新分组(LSU)中,采用洪泛法发送</p><p>每个路由器通过链路状态数据库(LSDB)来接收 LSU 维护链路状态,各路由器 LSDB 最终一致</p><img src="https://www.helloimg.com/images/2022/02/27/GVPeLC.png" alt="20211022170324" /></li><li><p>OSPF 工作过程 &amp;&amp; 五种数据分组</p><img src="https://www.helloimg.com/images/2022/02/27/GVtuem.png" alt="20211022170725" /></li><li><p>邻居关系建立 &amp;&amp; 划分区域</p><img src="https://www.helloimg.com/images/2022/02/27/GVPNyq.png" alt="20211022174329" /><img src="https://www.helloimg.com/images/2022/02/27/GV4Oh5.png" alt="20211022174754" /></li></ul><h4 id="边界网关协议-BGP">边界网关协议 BGP</h4><ul><li><p>路由选择</p><p>不同自治系统内度量路由的代价可能是不同的,所以无法通过代价度量来寻找最佳路由</p><p>自治系统间路由选择还需要考虑政治,经济,安全等因素</p><p>BGP 力求找一条不兜圈子的较好的路由线路,而不是找最佳路由</p><img src="https://www.helloimg.com/images/2022/02/27/GV44vY.png" alt="20211022232434" /></li><li><p>举例: BGP 路径向量应用</p><img src="https://www.helloimg.com/images/2022/02/27/GVL4XX.png" alt="20211022232856" /></li><li><p>BGP-4 的四种报文</p><img src="https://www.helloimg.com/images/2022/02/27/GVLwiq.png" alt="20211022233905" /></li><li><p>直接封装 xx 报文的协议</p><p>RIP -&gt; UDP</p><p>OSPF -&gt; IP</p><p>BGP -&gt; TCP</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="离散">离散</h2><h3 id="图">图</h3><ul><li><p>有向图-邻接矩阵存储</p><img src="https://www.helloimg.com/images/2022/02/27/GVL5Lr.png" alt="20211028200201" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="算法分析与设计">算法分析与设计</h2><h3 id="最大团-最大独立集">最大团-最大独立集</h3><p><img src="https://www.helloimg.com/images/2022/03/04/GhJOD6.png" alt=""></p><p>最大团: 顶点间都相连的最多顶点数 24567 或 45679</p><p>最大独立集: 顶点间都不直接相连的最多顶点数 158 或 168</p><hr><h3 id="01-背包">01-背包</h3><p>5 个物品,1 个背包，背包容量为 10.</p><p>价值：8,10,4,5,5</p><p>重量：6,4,2,2,3</p><p>求将该 5 个物品装入背包的最大价值<code>20</code>,以及 x[6]的向量值<code>（0,0,1,0,1,1）</code>(后 5 个空选择哪个对应的向量值为 1)</p><hr><h3 id="矩阵连乘">矩阵连乘</h3><ul><li><p><code>A1 A2 A3 A4 A5</code> 五个矩阵连乘,通过下图判断怎么加括号使运算最少</p><p><img src="https://www.helloimg.com/images/2022/03/04/GhJ6Iq.png" alt=""></p></li><li><p>不看 0 那一斜线和 0 上面的一位,如下</p><p><img src="https://www.helloimg.com/images/2022/03/04/GhA3Yz.png" alt=""></p><p>第三列: 在 A2 断开</p><p>第四列: 在 A2 断开</p><p>第五列: 在 A2 和 A4 断开</p></li><li><p>A1 A2 | A3 A4 | A5</p><p>每组括起来就是结果: <code>(A1 A2)(A3 A4)A5</code></p></li></ul><hr><h3 id="八皇后解法速记">八皇后解法速记</h3><p>17582463<br>24683175<br>31758246<br>42736851</p><p>通过镜像操作可以得到对面四种解法: 1-&gt;8, 2-&gt;7, 3-&gt;6, 4-&gt;5</p><hr><h3 id="随机化算法">随机化算法</h3><ul><li><p>舍伍德算法</p><p>去掉问题最坏解，使得求解的时候的复杂度趋向于平均</p></li><li><p>拉斯维加斯算法：</p><p>问题求解时随机决策</p><p>随机找，找到了一定是正确的，但是不一定能在有限的时间内找到正确的解</p></li><li><p>蒙特卡洛算法</p><p>以高概率给出一个正确的解，但是不能判定是不是正确的</p><p>【主元素】随机找出一个元素，看看它有没有出现了很多次，如果是，就返回 true，否则返回 false。<br>返回 true 一定能确定有主元素，但是返回 false 的时候不一定能确定没有主元素。</p><p>【是否正确】<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>&lt;</mo><mi>p</mi><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\frac{1}{2}&lt;p&lt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>,如果得到正确解的概率不小于 p，则称该蒙特卡洛算法是 p 正确的，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">p-\frac{1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 是该算法的优势<br>【一致】如果对于同一个实例，算法不会给出两个正确的解答，那么称这个蒙特卡洛算法是一致的<br>【提高正确率】执行若干次，选择频次最高的<br><sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup></p></li></ul><hr><h3 id="渐近阶高低">渐近阶高低</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mi>k</mi></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">!</mo><mo stretchy="false">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mi>n</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1) &lt; O(\log{n})) &lt; O(n) &lt; O(n\log{n}) &lt; O(n^2) &lt; O(n^3) &lt; O(n^k) &lt; O(2^n) &lt; O(n!) &lt; O(n^n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">n</span></span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">n</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">!)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> <sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p><hr><h3 id="数论四大定理">数论四大定理</h3><p>威尔逊定理, 欧拉定理, 中国剩余定理, 费马小定理</p><hr><h3 id="棋盘覆盖问题">棋盘覆盖问题</h3><p><img src="https://www.helloimg.com/images/2022/03/04/GhAJFm.png" alt=""></p><ol><li>根据黑的先画最中间绿色的</li><li>根据绿色的画黄色的</li><li>根据黄色画蓝色的</li><li>可以确定答案了<br><sup id='cite_ref-3'><a href="#cite_note-3">[3]</a></sup></li></ol><hr><h3 id="二分搜索">二分搜索</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）给定从小到达已排好序的<span class="number">2021</span>个整数，存放在数组<span class="selector-tag">a</span><span class="selector-attr">[2021]</span>中，执行以下<span class="built_in">BinarySearch</span>()函数，需要查找的特定元素x。</span><br><span class="line">问<span class="number">1</span>：当x &gt; <span class="selector-tag">a</span><span class="selector-attr">[2020]</span>时，查找不到元素x时，比较了______ 次。</span><br><span class="line">问<span class="number">2</span>：当x &lt; <span class="selector-tag">a</span><span class="selector-attr">[0]</span>时，查找不到元素x时，比较了______ 次。</span><br><span class="line"></span><br><span class="line">（<span class="number">2</span>）给定从小到达已排好序的<span class="number">2048</span>个整数，存放在数组<span class="selector-tag">a</span><span class="selector-attr">[2048]</span>中，执行以下<span class="built_in">BinarySearch</span>()函数，需要查找的特定元素x。</span><br><span class="line">问<span class="number">3</span>：当x &gt; <span class="selector-tag">a</span><span class="selector-attr">[2047]</span>时，查找不到元素x时，比较了______ 次。</span><br><span class="line">问<span class="number">4</span>：当x &lt; <span class="selector-tag">a</span><span class="selector-attr">[0]</span>时，查找不到元素x时，比较了______ 次。</span><br></pre></td></tr></table></figure><p>11 10 12 11</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>2020</mn><mo stretchy="false">]</mo><mo>&lt;</mo><msup><mn>2</mn><mn>11</mn></msup></mrow><annotation encoding="application/x-tex">[0,2020] &lt; 2^{11}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2020</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span></span></span></span></span></span></span></span> -&gt; k1=11 k2=11-1</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>11</mn></msup><mo>&lt;</mo><mo>=</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>4047</mn><mo stretchy="false">]</mo><mo>&lt;</mo><msup><mn>2</mn><mn>12</mn></msup></mrow><annotation encoding="application/x-tex">2^{11} &lt;= [0,4047] &lt; 2^{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8532em;vertical-align:-0.0391em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4047</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span></span></span></span> -&gt; k3=12 k4=12-1</p><hr><h3 id="斐波那契">斐波那契</h3><p><img src="https://www.helloimg.com/images/2022/03/04/GhA2nS.png" alt=""></p><p>F()执行 15 次, f(1) 3 次</p><hr><h3 id="快速排序">快速排序</h3><h4 id="思路一">思路一</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">arr</span>[<span class="number">10</span>]=&#123;<span class="number">49</span>, <span class="number">38</span>, <span class="number">10</span>, <span class="number">97</span>, <span class="number">76</span>, <span class="number">13</span>, <span class="number">27</span>, <span class="number">49</span>, <span class="number">8</span>, <span class="number">65</span>&#125;</span><br></pre></td></tr></table></figure><ol><li><p>选择第一位 arr[0]:49 为基准数</p></li><li><p>从左往右找比它大的或相等的,从右往左找比它小的或相等的,找到了两方交换 (比如 97-8, 76-49)</p><p><img src="https://www.helloimg.com/images/2022/03/04/GhApPX.png" alt=""></p></li><li><p>直到两方碰头结束,取碰头位置与基准数交换 (49-27); 没有的话就退出循环且不交换基准数</p></li><li><p>每轮结束后划分出左右两边子范围</p><p><img src="https://www.helloimg.com/images/2022/03/04/GhAzng.png" alt=""></p><p>比如第一轮确定 49 之后,分出 [27-8],[13-65]两个子范围</p><p>第二轮确定 27 之后,分出 [8-10],[49-38]两个子范围</p><p><img src="https://www.helloimg.com/images/2022/03/04/GhAICP.png" alt=""></p><p>当子范围只有一个数时,不用遍历就可以直接确定位置了 (如上图框起来的数,在其旁边的数确定位置时就可以同时确定位置)</p></li></ol><hr><h4 id="思路二">思路二</h4><ul><li><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg3MzU2Njk3MA==&amp;mid=2247492793&amp;idx=1&amp;sn=79ab61671459c3a2d627d5a3e1eb7ec0&amp;chksm=cedca32cf9ab2a3aabf3b02d26c991ca4f56a49078a28ad97433c6645d003b559de4e98e706d&amp;mpshare=1&amp;scene=23&amp;srcid=1019M2F6aYi9B8WEFHtfu4sr&amp;sharer_sharetime=1634632120052&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd">上厕所的功夫，学会了快速排序算法</a></p><p>在某区间中取最左/最右为基准,并给定左右两边移动指针</p><p>左边有坑取有指针的值比较,比基准大的话不动,小的话移动到左边的坑; 右边有坑时相反.</p></li></ul><hr><h3 id="最长公共子序列">最长公共子序列</h3><ul><li><p>填写 C 表和 B 表 (不知道还有什么学校教这种老套,反正是考点没的办法了…)</p><p><img src="https://www.helloimg.com/images/2022/03/04/GhA8wn.png" alt=""></p><p><img src="https://www.helloimg.com/images/2022/03/04/GhAKhR.png" alt=""></p><p><img src="https://www.helloimg.com/images/2022/03/04/GhAkWA.png" alt=""></p></li><li><p>思路</p><p>C/B 表同时写不要分开先后写,只不过 B 表要根据 C 表写</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// c[行][列]  b[行][列]</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; m; i++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">    <span class="comment">// 首先判断行列字符是否一样,相同的话</span></span><br><span class="line">    <span class="keyword">if</span> (x[i] == y[j]) &#123;</span><br><span class="line">      c[i][j] = c[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>; <span class="comment">//   c[i][j]=C表左上角+1</span></span><br><span class="line">      b[i][j] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果行列字符不一样,判断C表上面一格是否&gt;=左边,如果true</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c[i - <span class="number">1</span>][j] &gt;= c[i][j - <span class="number">1</span>]) &#123;</span><br><span class="line">      c[i][j] = c[i - <span class="number">1</span>][j]; <span class="comment">//           c[i][j]=C表上面一格</span></span><br><span class="line">      b[i][j] = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果行列字符不一样,判断C表上面一格是否&gt;=左边,如果false</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      c[i][j] = c[i][j - <span class="number">1</span>]; <span class="comment">//           c[i][j]=C表左边一格</span></span><br><span class="line">      b[i][j] = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="人工智能">人工智能</h2><blockquote><p><a href="../AI">🐊 人工智能笔记</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="零散的">零散的</h2><h3 id="河工大-UML">河工大-UML</h3><p>这是河北工业大学-刘洪普老师的 UML 课程截图记录</p><p>讲的领域很广, 互联网领域架构, 计算机底层交互/操作系统设计, AI 领域, 并行计算…etc, <code>i了i了</code></p><p><img src="https://www.helloimg.com/images/2022/03/23/R1Uw16.jpg" alt=""></p><p>并发程序: 指的是具有并行处理能力的程序(多线程/协程), 当遇到单核 U 或者环境不适合时会变为顺序执行的程序</p><p>同一机子内多个进程可以通过操作系统来完成进程间通信, Socket 实现的是不同机子之间通过网络来进行进程间的通信</p><p><img src="https://www.helloimg.com/images/2022/03/23/R1Ujyo.jpg" alt=""></p><ul><li><p>显卡: 3d 计算加速卡,图形处理需要做大量线性代数向量运算(3 维模型的坐标转换和投影), 取决于向量运算的数学性质, 其可以通过并行运算来加速处理,区别如下:</p><p>CPU 的这种逻辑运算可以通过分支预测来加速,但是必须顺序执行 (这也就限制了一些程序吃不到多核性能, 两核 3G 打不过一核 5G 的)</p><p>GPU 的运算独立, 简单看来核心越多算的越快,这种计算方式叫<code>向量化计算</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CPU</span></span><br><span class="line"><span class="attr">C</span> = A + B</span><br><span class="line"><span class="attr">B</span> = A + C</span><br><span class="line"><span class="attr">A</span> = B + C</span><br><span class="line"></span><br><span class="line"><span class="comment"># GPU</span></span><br><span class="line"><span class="attr">A1</span> = B1 + C1</span><br><span class="line"><span class="attr">A2</span> = B2 + C2</span><br><span class="line"><span class="attr">A3</span> = B3 + C3</span><br></pre></td></tr></table></figure></li></ul><p>CPU 核心少而且更适合做逻辑运算, 把向量运算能力加进 CPU (也就是如今的 TPU) 并不是很合适, 所以独立出来了显卡 (一般核心数量上千,高出 CPU 两个量级)</p><p><img src="https://www.helloimg.com/images/2022/03/23/R1gRMt.jpg" alt=""></p><p>深度学习就是要做大量的线性计算和非线性计算(最终也是通过数学转化为线性计算), 所以炼丹也是吃显卡</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-25">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://www.nowcoder.com/questionTerminal/7401d66e14e84279ba278ce04e735deb?page=1&amp;onlyReference=false">https://www.nowcoder.com/questionTerminal/7401d66e14e84279ba278ce04e735deb?page=1&amp;onlyReference=false</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://www.geek-share.com/detail/2771384952.html">随机化算法-舍伍德算法&amp;拉斯维加斯算法&amp;蒙特卡洛算法</a></p><p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href="https://blog.csdn.net/qq_30268545/article/details/80600064">棋盘覆盖问题-分治法</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
          <category> basic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> 算法 </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 人工智能 </tag>
            
            <tag> 操作系统 </tag>
            
            <tag> 计网 </tag>
            
            <tag> 硬件 </tag>
            
            <tag> onenote </tag>
            
            <tag> 复变函数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🐱‍🏍Maven+Tomcat开发webapp.</title>
      <link href="/post/tools/Tomcat/"/>
      <url>/post/tools/Tomcat/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-03-30 12:50:22 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\tools\Tomcat.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E9%85%8D%E7%BD%AE">配置</a></li><li><a href="#vscode">VScode</a></li><li><a href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE">创建项目</a></li><li><a href="#idea">IDEA</a></li><li><a href="#%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E4%BB%A3%E7%90%86">虚拟主机/代理</a></li><li><a href="#%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98">乱码问题</a><ul><li><a href="#%E7%BB%88%E7%AB%AF%E4%B9%B1%E7%A0%81">终端乱码</a></li><li><a href="#%E7%BD%91%E9%A1%B5%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81">网页中文乱码</a></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="配置-3">配置</h2><blockquote><p><a href="../../system/system_variable#maven">💥 系统开发环境配置</a></p></blockquote><blockquote><p>Maven 的核心思想：约定大于配置</p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="VScode-2">VScode</h2><ul><li><p>安装 <code>Tomcat for Java</code> 插件,配置好 Tomcat 本体路径和 <code>data</code> 路径</p></li><li><p>在侧边栏右键,常用命令都有</p><img src="https://www.helloimg.com/images/2022/02/27/GVsEkC.png" alt="20210309155951" /></li><li><p>测试</p><ul><li>新建 <code>index.html</code> 文件,放到 <code>tomcat/webapps/ROOT/</code>目录下</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    测试</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>打开对应页面会有如下显示</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVssbt.png" alt="20210309160418" /></li><li><p><code>ROOT/</code>里面放的文件与浏览器 URL 相对应</p><ul><li><p>比如 <code>ROOT/000/2333.html</code> 浏览器就需要访问 <code>localhost:8080/000/2333.html</code></p></li><li><p>后缀名是<code>.html</code>的话 URL 后缀可以不写,比如上面写成 <code>localhost:8080/000/2333</code> 也可以.</p></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="创建项目">创建项目</h2><blockquote><p>解释一下为什么要用 Maven,还需要创建项目: <code>Tomcat 只能运行 Maven 创建的类型为 webapp 的这种项目</code>,</p></blockquote><ul><li><p>推荐直接用 IDEA 创建 web 项目 (不用再导入 Servlet 包)</p><img src="https://www.helloimg.com/images/2022/02/27/GVskJo.png" alt="20210323233425" /></li><li><p>然后创建 <code>webapp</code> 子模块,在<code>source/main/</code>下再新建两个目录(java 和 resources),结构如下</p><img src="https://www.helloimg.com/images/2022/02/27/GVsf3C.png" alt="20210323112637" /></li><li><p><code>JavaWeb\src\main\webapp\WEB-INF\web.xml</code> 是 web 项目核心应用</p></li></ul><blockquote><p><a href="https://github.com/Weidows/Java/tree/master/JavaWeb/demo-0">点这里参考项目结构</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="IDEA-2">IDEA</h2><ul><li><p>IDEA 配置连接 Tomcat 需要在创建完 webapp 项目之后,否则连不上</p><ul><li>点’+'找到 Tomcat Server 并配置,如图</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVt5Lv.png" alt="20210325110519" /></li><li><p>现在 IDEA 已经认识 Tomcat 了,但还需要配置部署,否则 Tomcat 不知道运行哪里</p><ul><li>这些工件就是这个项目用 Maven 构建之后产生的</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVsyRu.png" alt="20210325110722" /></li><li><p>现在配置好了之后,IDEA 会自动完成项目<code>构建-&gt;部署-&gt;打开网页</code> (VScode 的话也可以手动做到)</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="虚拟主机-代理">虚拟主机/代理</h2><ul><li><p>通过修改 <code>Tomcat/conf/server.xml</code>和 hosts 文件实现虚拟主机.</p></li><li><p>修改 <code>name=&quot;localhost&quot;</code> 为目标主机名,比如改为<code>name=&quot;weidows.com&quot;</code>,下面注释处给标出了修改位置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> standalone=<span class="string">&quot;yes&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Server</span> <span class="attr">port</span>=<span class="string">&quot;8005&quot;</span> <span class="attr">shutdown</span>=<span class="string">&quot;SHUTDOWN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.startup.VersionLoggerListener&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.core.AprLifecycleListener&quot;</span> <span class="attr">SSLEngine</span>=<span class="string">&quot;on&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.core.JreMemoryLeakPreventionListener&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.core.ThreadLocalLeakPreventionListener&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">GlobalNamingResources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Resource</span> <span class="attr">name</span>=<span class="string">&quot;UserDatabase&quot;</span> <span class="attr">auth</span>=<span class="string">&quot;Container&quot;</span> <span class="attr">type</span>=<span class="string">&quot;org.apache.catalina.UserDatabase&quot;</span> <span class="attr">description</span>=<span class="string">&quot;User database that can be updated and saved&quot;</span> <span class="attr">factory</span>=<span class="string">&quot;org.apache.catalina.users.MemoryUserDatabaseFactory&quot;</span> <span class="attr">pathname</span>=<span class="string">&quot;conf/tomcat-users.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">GlobalNamingResources</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Service</span> <span class="attr">name</span>=<span class="string">&quot;Catalina&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span> <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span> <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Engine</span> <span class="attr">name</span>=<span class="string">&quot;Catalina&quot;</span> <span class="attr">defaultHost</span>=<span class="string">&quot;localhost&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Realm</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.realm.LockOutRealm&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Realm</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.realm.UserDatabaseRealm&quot;</span> <span class="attr">resourceName</span>=<span class="string">&quot;UserDatabase&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">Realm</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 修改这下面一行 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">&quot;localhost&quot;</span> <span class="attr">appBase</span>=<span class="string">&quot;webapps&quot;</span> <span class="attr">unpackWARs</span>=<span class="string">&quot;true&quot;</span> <span class="attr">autoDeploy</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.valves.AccessLogValve&quot;</span> <span class="attr">directory</span>=<span class="string">&quot;logs&quot;</span> <span class="attr">prefix</span>=<span class="string">&quot;localhost_access_log&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;.txt&quot;</span> <span class="attr">pattern</span>=<span class="string">&quot;%h %l %u %t <span class="symbol">&amp;quot;</span>%r<span class="symbol">&amp;quot;</span> %s %b&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Engine</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Service</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Server</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>然后修改 host,实现代理,如下图第二行即为需要添加的</p><img src="https://www.helloimg.com/images/2022/02/27/GVsLAE.png" alt="20210309161039" /><ul><li><p>含义就是: <code>在访问右边的主机时,将它指向左边的地址</code></p></li><li><p>比如浏览器访问 <code>localhost:8080</code> 时,实际上是访问的 <code>127.0.0.1:8080</code>,也就是本机地址</p></li></ul></li></ul><hr><ul><li><p>现在,打开 Tomcat 服务,他就会在本机 8080 端口监听,当在浏览器输入<code>weidows.com:8080</code>时,会被 host 指向到<code>127.0.0.1:8080</code>,Tomcat 服务器收到请求并回应</p><ul><li>结构如下图</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVsAGv.png" alt="20210309163300" /></li></ul><hr><ul><li><p>可能会存在的疑问: 同样是指向到 <code>127.0.0.1</code>,为什么 localhost:8080 或者直接 127.0.0.1:8080 无法访问到 <a href="http://weidows.com:8080">weidows.com:8080</a> 页面?</p><ul><li>这就像递归式问路,首先问 host 知不知道 <a href="http://weidows.com">weidows.com</a>,host 不直接知道,它让我们问 Tomcat,于是我们去 127.0.0.1:8080 问 Tomcat 知不知道 <a href="http://weidows.com">weidows.com</a>;</li><li>诶,Tomcat 它可以直接知道 <a href="http://weidows.com">weidows.com</a> 在哪里,于是浏览器就这么找到 <a href="http://weidows.com">weidows.com</a> 页面了!</li><li>页面在 <a href="http://weidows.com">weidows.com</a> 手里,你要是去找 localhost:8080 或者 127.0.0.1 的话,就是问错人了,肯定是 404</li></ul></li><li><p>最后附一张图,根据序号来看,条理比较清晰.</p><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVs8L1.png" alt="20210322100531" /></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="乱码问题">乱码问题</h2><h3 id="终端乱码">终端乱码</h3><ul><li><p>在启动 Tomcat 时,终端内中文乱码:</p><ul><li><p>虽然这个对程序运行没有影响,但是有些影响观瞻,一般只会在 Window 遇到,修改如下:</p></li><li><p>找到 <code>Tomcat/conf/logging.properties</code> 里面的-&gt; <code>java.util.logging.ConsoleHandler.encoding</code>这一行 ,把 <code>UTF-8</code>换为<code>GBK</code></p></li></ul></li><li><p>另一种方法: 把终端显示设置为 UTF-8</p><img src="https://www.helloimg.com/images/2022/02/27/GVteSR.png" alt="20210330125008" /></li></ul><hr><h3 id="网页中文乱码">网页中文乱码</h3><ul><li><p>我们开发的页面,无论是动/静态,只要不指定编码格式,中文肯定乱码</p></li><li><p>需要做的就是在开发网页时,指定 <code>CharacterEncoding = UTF-8</code></p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> vscode </tag>
            
            <tag> website </tag>
            
            <tag> 笔记 </tag>
            
            <tag> idea </tag>
            
            <tag> 服务器 </tag>
            
            <tag> maven </tag>
            
            <tag> tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥼JavaWeb~(壹)探索传输协议</title>
      <link href="/post/Java/Web/1/"/>
      <url>/post/Java/Web/1/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-05-22 10:40:55 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\Web\1.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81">笔记代码</a></li><li><a href="#%E5%8F%82%E7%85%A7">参照</a></li><li><a href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">基本概念</a><ul><li><a href="#%E5%8A%A8%E9%9D%99%E6%80%81-web">动/静态 Web</a></li><li><a href="#%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%AF%B9%E6%AF%94">后端技术对比</a></li><li><a href="#web-%E6%9C%8D%E5%8A%A1%E5%99%A8">Web 服务器</a></li></ul></li><li><a href="#http">HTTP</a><ul><li><a href="#%E8%AF%B7%E6%B1%82%E8%A1%8C">请求行</a></li><li><a href="#%E6%B6%88%E6%81%AF%E5%A4%B4">消息头</a></li><li><a href="#%E5%93%8D%E5%BA%94%E4%BD%93">响应体</a></li><li><a href="#%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81">响应状态码</a></li></ul></li><li><a href="#maventomcat">Maven+Tomcat</a></li><li><a href="#servlet">Servlet</a><ul><li><a href="#helloservlet">HelloServlet</a></li><li><a href="#%E6%9E%B6%E6%9E%84%E5%8E%9F%E7%90%86">架构原理</a></li><li><a href="#mapping">Mapping</a></li><li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%82%E6%95%B0%E4%BA%86%E8%A7%A3">初始化参数(了解)</a></li></ul></li></ul><h2 id="笔记代码-3"><a href="https://github.com/Weidows/Java/tree/master/JavaWeb">笔记代码</a></h2><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-20">借物表</h2><blockquote><p>在此文章记录了: <a href="../../../others/LearnWay#javaweb">😍Weidows-の成长路线#javaweb</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="基本概念">基本概念</h2><h3 id="动-静态-Web">动/静态 Web</h3><ul><li><p>静态 web</p><ul><li><p>比如 hexo 就是静态博客生成器,其生成的 HTML 页面文档树不会发生改变</p></li><li><p>会因为 js 发生内容性的变化,但也是预设性的,并非动态变化.</p></li><li><p>只能实现动画,不能实现动态;无后端,也就是无法与数据库交互,数据不能持久化,无法与用户进行信息交互</p></li></ul><hr></li><li><p>动态 web</p><ul><li><p>比如 WordPress,客户端加载的内容会随着客户端交互而产生变化</p></li><li><p>技术栈: Java Servlet/JSP,<a href="http://ASP.NET">ASP.NET</a>,PHP,Python,etc.</p></li><li><p>资源出现问题时可以停机维护,可以与用户交互,操作数据库持久化信息.</p></li></ul><hr></li><li><p>JavaWeb 应用包含多个部分</p><ul><li><p>html,sss,is</p></li><li><p>jsp,servlet</p></li><li><p>Java 程序</p></li><li><p>jar 包</p></li><li><p>配置文件（Properties)</p></li></ul><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVs8L1.png" alt="20210322100531" /></blockquote></li></ul><hr><h3 id="后端技术对比">后端技术对比</h3><ul><li><p>ASP</p><p>国内最早流行,业务代码错乱,维护成本高</p></li><li><p>php</p><p>开发速度很快，功能强大，跨平台，代码简单;但是无法承载大访问量的情况</p></li><li><p>JSP/Servlet</p><p>B/S 架构</p><p>语法像 ASP，ASP+Java-&gt;JSP</p><p>可以承载三高问题带来的影响</p></li></ul><hr><h3 id="Web-服务器">Web 服务器</h3><ul><li><p><a href="http://ASP.NET">ASP.NET</a></p><p>Windows 系统自带</p></li><li><p>Tomcat</p><p>Apache 基金会的项目,在中小型并发量场景下普遍使用</p><blockquote><p>之前有个文章介绍了 <a href="https://weidows.gitee.io/post/others/IDEs/#Tomcat">😁IDE 选用指北.#Tomcat</a></p></blockquote><blockquote><p>另外,推荐一篇文章: <a href="https://zhuanlan.zhihu.com/p/54121733">Tomcat 外传</a></p></blockquote><ul><li><p>Tomcat 项目层级结构</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> webapps ：Tomcat服务器的web目录</span><br><span class="line"><span class="bullet">  -</span> ROOT 网站的根目录</span><br><span class="line"><span class="bullet">  -</span> kuangstudy ：网站的目录名</span><br><span class="line"><span class="bullet">    -</span> WEB-INF</span><br><span class="line"><span class="bullet">      -</span> classes : java程序</span><br><span class="line"><span class="bullet">      -</span> lib : web应用所依赖的jar包</span><br><span class="line"><span class="bullet">      -</span> web.xml : 网站配置文件</span><br><span class="line"><span class="bullet">    -</span> index.html : 默认的首页</span><br><span class="line"><span class="bullet">    -</span> static</span><br><span class="line"><span class="bullet">      -</span> css</span><br><span class="line"><span class="bullet">        -</span> style.css</span><br><span class="line"><span class="bullet">      -</span> js</span><br><span class="line"><span class="bullet">      -</span> img</span><br><span class="line"><span class="bullet">    -</span> .....</span><br></pre></td></tr></table></figure></li><li><p>Tomcat 可以 run 的项目只能是<code>webapp</code>,可以通过 Maven 创建这种项目</p><ul><li><p>tomcat 可以直接跑起来 <code>root/src/main/webapp</code>这个目录, 或者用 maven package 打包后产生的.war 包</p></li><li><p>其他形式的都无法用 tomcat 运行.</p></li></ul></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="HTTP">HTTP</h2><p>(超文本传输协议）是一个简单的请求-响应协议，通常运行在 TCP 之上.</p><h3 id="请求行">请求行</h3><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Request URL:https:<span class="comment">//www.baidu.com/   请求地址</span></span><br><span class="line">Request <span class="keyword">Method</span>:GET    get方法/post方法</span><br><span class="line">Status Code:<span class="number">200</span> OK    状态码：<span class="number">200</span></span><br><span class="line">Remote Address:<span class="number">14.215</span>.<span class="number">177.39</span>:<span class="number">443</span></span><br></pre></td></tr></table></figure><ul><li><p>请求方式：Get,Post,HEAD,DELETE,PUT,TRACT.…</p><ul><li><p>get：请求能够携带的参数比较少，大小有限制，会在浏览器的 URL 地址栏显示数据内容，不安全，但高效</p></li><li><p>post: 请求能够携带的参数没有限制，大小没有限制，不会在浏览器的 URL 地址栏显示数据内容，安全，但不高效;只有表单才能使用.</p></li></ul></li></ul><hr><h3 id="消息头">消息头</h3><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Accept:<span class="built_in">text</span>/html  <span class="comment">// 告诉浏览器，它所支持的数据类型</span></span><br><span class="line">Accept-Encoding:gzip, deflate, br  <span class="comment">// 支持哪种编码格式  GBK   UTF-8   GB2312  ISO8859-1</span></span><br><span class="line">Accept-<span class="built_in">Language</span>:zh-CN,zh;q=<span class="number">0.9</span>    <span class="comment">// 告诉浏览器，它的语言环境</span></span><br><span class="line">Cache-Control:<span class="built_in">max</span>-age=<span class="number">0</span> <span class="comment">// 缓存控制</span></span><br><span class="line">Connection:keep-<span class="built_in">alive</span> <span class="comment">// 请求完成是断开还是保持连接</span></span><br></pre></td></tr></table></figure><hr><h3 id="响应体">响应体</h3><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">...</span></span><br><span class="line">跟请求相同</span><br><span class="line"><span class="meta prompt_">...</span></span><br><span class="line">Refresh：告诉客户端，多久刷新一次</span><br><span class="line">Location：让网页重新定位</span><br></pre></td></tr></table></figure><hr><h3 id="响应状态码">响应状态码</h3><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVs6RT.png" alt="20210323084728" /></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Maven-Tomcat">Maven+Tomcat</h2><blockquote><p><a href="../../../tools/Tomcat">🐱‍🏍Maven+Tomcat 开发 webapp.</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Servlet">Servlet</h2><ul><li><p>Servlet 是 sun 公司开发动态 web 的一门技术,开发 Servlet 程序有两个步骤:</p><ol><li><p>编写一个类，实现 Serlet 接口</p></li><li><p>把开发好 java 类部署到 web 服务器中。</p></li></ol></li><li><p>利用 maven 创建一个工程项目(project),在内部创建多个子模块(module)进行学习测试.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="HelloServlet">HelloServlet</h3><ul><li><p>现在,在 JavaWeb 项目中已经创建好子模块<code>demo-1</code>,我们在这个 demo-1 内练习 HelloServlet,项目结构如下:</p><img src="https://www.helloimg.com/images/2022/02/27/GVsVrS.png" alt="20210324163957" /></li><li><p>新建 <code>JavaWeb/demo-1/src/main/java/com/weidows/HelloServlet.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.weidows;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">6617893791621340358L</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//get或者post只是请求实现的不同的方式，可以相互调用，业务逻辑都一样</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//ServletOutputStream outputStream = resp.getOutputStream();</span></span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter(); <span class="comment">//响应流</span></span><br><span class="line">    writer.print(<span class="string">&quot;Hello,Servlet&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doGet(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>修改 <code>JavaWeb/demo-1/src/main/webapp/WEB-INF/web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--注册Servlet,使这个类可以产生动态页面--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.weidows.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--Servlet的请求路径映射,使路径映射对应类--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/weidows<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>连接 Tomcat</p><ul><li>我们用 tomcat 跑起来这个子模块 (注意跑的是子模块不是整个项目)</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVsrOD.png" alt="20210324164515" /></li><li><p>跑起来后</p><ul><li><p>我们可以通过<code>http://localhost:8080/demo_1_war/</code> 访问到 <code>index.jsp</code> 这个静态页面</p></li><li><p>也可以通过<code>http://localhost:8080/demo_1_war/weidows</code> 访问到我们用 Servlet 映射的动态页面</p><ul><li>注意末尾不能带’/', <code>http://localhost:8080/demo_1_war/weidows/</code> == <code>http://localhost:8080/demo_1_war/weidows/index.html</code> 因为并没有这个静态页面,会报 404</li></ul></li></ul></li><li><p>注意,无论是动态页面还是静态页面,都必须<code>指定编码</code>,否则中文会乱码.</p></li></ul><hr><h3 id="架构原理">架构原理</h3><img src="https://www.helloimg.com/images/2022/02/27/GVsj6t.png" alt="20210325090037" /><ul><li><p>Tomcat 做的就是接收请求并处理,然后返回响应</p></li><li><p>我们需要做的是实现 Servlet 接口,处理请求和响应信息</p></li></ul><hr><h3 id="Mapping">Mapping</h3><ul><li><p>一个 Servlet 可以映射一个或多个或正则匹配 url 路径</p><ul><li><code>映射固定地址的优先级最高</code></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello2<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello3<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><servlet-mapping>    <servlet-name>hello</servlet-name>    <url-pattern>/hello/*</url-pattern></servlet-mapping><!--可以自定义后缀实现请求映射    注意,*前面不能加项目映射的路径    hello/xxx.weidows    --><servlet-mapping>    <servlet-name>hello</servlet-name>    <url-pattern>*.weidows</url-pattern></servlet-mapping><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">- 例子: 把 <span class="number">404</span> 页面换为我们自定义的</span><br><span class="line"></span><br><span class="line">  - src/main/java/com/weidows/<span class="type">ErrorServlet</span>.java</span><br><span class="line"></span><br><span class="line">    ```<span class="type">Java</span></span><br><span class="line">    <span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line">    <span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line">    <span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line">    <span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line">    <span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"></span><br><span class="line">    public <span class="class"><span class="keyword">class</span> <span class="title">ErrorServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> req, <span class="type">HttpServletResponse</span> resp) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line">        resp.getWriter().print(<span class="string">&quot;&lt;h1&gt;404&lt;/h1&gt;&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> req, <span class="type">HttpServletResponse</span> resp) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 注册并映射 404 页面</span><br><span class="line"></span><br><span class="line">  - (注意上下顺序: ServletA MappingA ServletB MappingB 这样写会报错)</span><br><span class="line"></span><br><span class="line">  ```xml</span><br><span class="line">  <span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">      <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">      <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--注册Servlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.weidows.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ErrorServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.weidows.ErrorServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure><pre><code>&lt;!--Servlet的请求路径--&gt;&lt;servlet-mapping&gt;  &lt;servlet-name&gt;helloServlet&lt;/servlet-name&gt;  &lt;url-pattern&gt;/weidows&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;&lt;servlet-mapping&gt;  &lt;servlet-name&gt;ErrorServlet&lt;/servlet-name&gt;  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;</code></pre>  </web-app>  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="comment">### ServletContext</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="string">HttpServlet</span> <span class="string">对象中常用方法:</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="string">this.getInitParameter()</span> <span class="string">//</span> <span class="string">初始化参数</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="string">this.getServletConfig()</span> <span class="string">//</span> <span class="string">Servlet</span> <span class="string">配置</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="string">this.getServletContext()</span> <span class="string">//</span> <span class="string">Servlet</span> <span class="string">上下文,最常用,这里只介绍这个</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="string">Web</span> <span class="string">容器启动时,会创建对应的</span> <span class="string">ServletContext</span> <span class="string">对象,代表当前</span> <span class="string">web</span> <span class="string">应用,</span> <span class="string">`不同</span> <span class="string">Servlet</span> <span class="string">之间共享这个</span> <span class="string">ServletContext</span> <span class="string">对象`</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="bullet">-</span> <span class="string">例子:</span> <span class="string">当访问</span> <span class="string">`/helloServlet`</span> <span class="string">时在</span> <span class="string">servletContext</span> <span class="string">对象中设置</span> <span class="string">username</span> <span class="string">属性,然后访问</span> <span class="string">`/getServlet`</span> <span class="string">可以查看设置的</span> <span class="string">username</span> <span class="string">属性值.</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="string">`src/main/java/com/weidows/HelloServlet.java`</span></span><br><span class="line"></span><br><span class="line">    <span class="string">```Java</span></span><br><span class="line">    <span class="string">import</span> <span class="string">java.io.IOException;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">import</span> <span class="string">javax.servlet.ServletContext;</span></span><br><span class="line">    <span class="string">import</span> <span class="string">javax.servlet.ServletException;</span></span><br><span class="line">    <span class="string">import</span> <span class="string">javax.servlet.http.HttpServlet;</span></span><br><span class="line">    <span class="string">import</span> <span class="string">javax.servlet.http.HttpServletRequest;</span></span><br><span class="line">    <span class="string">import</span> <span class="string">javax.servlet.http.HttpServletResponse;</span></span><br></pre></td></tr></table></figure><p>public class HelloServlet extends HttpServlet {<br>@Override<br>protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>ServletContext context = this.getServletContext();<br>String username = “齐下无贰”; //数据<br>context.setAttribute(“username”, username); //将一个数据保存在了 ServletContext 中，名字为：username 。值 username<br>System.out.println(“username 属性已设置.”);<br>}<br>}</p>  <figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">***</span></span><br><span class="line"><span class="bullet"></span></span><br></pre></td></tr></table></figure><ul><li><p><code>src/main/java/com/weidows/GetServlet.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doGet(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> (String) <span class="built_in">this</span>.getServletContext().getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">    resp.setCharacterEncoding(<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line">    resp.getWriter().print(<span class="string">&quot;名字: &quot;</span> + username);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><ul><li><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.weidows.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>getServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.weidows.GetServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/helloServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>getServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/getServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="初始化参数-了解">初始化参数(了解)</h3><ul><li><p>初始化参数在 web.xml 中设置,用 getInitParameter()获取</p></li><li><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--配置一些web应用初始化参数--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>url<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/mybatis<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloParameter<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.weidows.HelloParameter<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloParameter<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/helloParameter<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><hr></li><li><p><code>src/main/java/com/weidows/HelloParameter.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloParameter</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> context.getInitParameter(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">    resp.getWriter().print(url);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 服务器 </tag>
            
            <tag> javaweb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🍔语段优选~(叁)</title>
      <link href="/post/life/nicer/3/"/>
      <url>/post/life/nicer/3/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-02-27 16:22:14 * @FilePath: \Blog-private\source\_posts\life\nicer\3.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E8%A1%A5%E7%95%AA%E5%96%BD">补番喽</a></li><li><a href="#%E4%B8%8D%E7%9F%A5%E8%B0%81%E8%AF%B4%E7%9A%84">不知谁说的~</a></li><li><a href="#%E6%B4%BB%E7%9D%80">《活着》​</a></li><li><a href="#%E6%B5%8B%E8%AF%95%E5%B7%A5%E7%A8%8B%E5%B8%88">测试工程师</a><ul><li><a href="#%E5%9D%8F%E4%BA%86%E8%BF%9B-dna-%E4%BA%86">坏了,进 DNA 了</a></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="补番喽">补番喽</h2><p>补番喽~</p><ol><li>新闻联播（强推）</li><li>焦点访谈（个人最喜欢）</li><li>海峡两岸（男主贼帅）</li><li>农经财政（贼好看）</li><li>中国地理（剧情紧凑）</li><li>开学第一课（女主好看）</li><li>感动中国（很感动）</li><li>今日说法（这个必须看）</li><li>法制在线（剧情张弛有度）</li><li>朝闻天下（情节跌宕起伏）</li></ol><hr><h2 id="不知谁说的">不知谁说的~</h2><p>当你只有别人的 1%时，他会嘲笑你。<br>当你不到别人的 45%时，他会鼓励你。<br>当你达到别人的 45%时，他便开始戒备你。<br>当你超过别人的 45%而又不足 80%时，他们到处诋毁你。<br>当你达到别人的 80%而又不 100%时，他会打击你。<br>当你达到别人的 100%时，他会忌惮你。<br>当你超过别人的 100%而又没到 110%时，他只会在角落默默诅咒你。<br>当你超过别人的 110%时，他会开始羡慕你。<br>当你超过别人的 120%时，他会开始赞美你。<br>当你超过 140%时，他会效仿你。<br>当你超过 150%时，他会信仰你。<br>当你超过 200%时，你就是他的一切。​</p><hr><h2 id="《活着》​">《活着》​</h2><p>「永远不要相信苦难是值得的，苦难就是苦难，苦难不会带来成功，苦难不值得追求，磨练意志是因为苦难无法躲开」 ——余华《活着》​</p><hr><h2 id="测试工程师">测试工程师</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡖⠒⠒⠤⢄⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠁⠀⠀⠀⡼⠀⠀⠀⠀ ⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢶⣲⡴⣗⣲⡦⢤⡏⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⠋⠉⠉⠓⠛⠿⢷⣶⣦⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⠇⠀⠀⠀⠀⠀⠀⠘⡇⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡞⠀⠀⠀⠀⠀⠀⠀⢰⠇⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⠀⡴⠊⠉⠳⡄⠀⢀⣀⣀⡀⠀⣸⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⢸⠃⠀⠰⠆⣿⡞⠉⠀⠀⠉⠲⡏⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⠈⢧⡀⣀⡴⠛⡇⠀⠈⠃⠀⠀⡗⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣱⠃⡴⠙⠢⠤⣀⠤⡾⠁⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⠀⢀⡇⣇⡼⠁⠀⠀⠀⠀⢰⠃⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⠀⣸⢠⣉⣀⡴⠙⠀⠀⠀⣼⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⠀⡏⠀⠈⠁⠀⠀⠀⠀⢀⡇⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⢸⠃⠀⠀⠀⠀⠀⠀⠀⡼⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⠀⠀⢸⠀⠀⠀⠀⠀⠀⠀⣰⠃⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⣀⠤⠚⣶⡀⢠⠄⡰⠃⣠⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⢀⣠⠔⣋⣷⣠⡞⠀⠉⠙⠛⠋⢩⡀⠈⠳⣄⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⡏⢴⠋⠁⠀⣸ 测试工程师⣹⢦⣶⡛⠳⣄⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠙⣌⠳⣄⠀⡇⠀⠀酒吧 ⠀⠀⡏⠀⠀⠈⠳⡌⣦⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠈⢳⣈⣻⡇⠀⠀炒饭⠀⢰⣇⣀⡠⠴⢊⡡⠋⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠳⢿⡇⠀⠀<span class="string">.txt</span> ⠀⢸⣻⣶⡶⠊⠁⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⠀⢠⠟⠙⠓⠒⠒⠒⠒⢾⡛⠋⠁⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⣠⠏⠀⣸⠏⠉⠉⠳⣄⠀⠙⢆⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⡰⠃⠀⡴⠃⠀⠀⠀⠀⠈⢦⡀⠈⠳⡄⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⣸⠳⣤⠎⠀⠀⠀⠀⠀⠀⠀⠀⠙⢄⡤⢯⡀⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠐⡇⠸⡅⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠹⡆⢳⠀⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠹⡄⠹⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣇⠸⡆⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠹⡄⢳⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢹⡀⣧⠀⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⠀⢹⡤⠳⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣷⠚⣆⠀⠀⠀⠀</span><br><span class="line">⠀⠀⠀⡠⠊⠉⠉⢹⡀⠀⠀⠀⠀⠀⠀⠀⠀⢸⡎⠉⠀⠙⢦⡀⠀</span><br><span class="line">⠀⠀⠾⠤⠤⠶⠒⠊⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠙⠒⠲⠤⠽⠀​</span><br></pre></td></tr></table></figure><hr><h3 id="坏了-进-DNA-了">坏了,进 DNA 了</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">名场面细品[W-哈哈]</span><br><span class="line"><span class="section">👨🏻: 🗡️？🥒？</span></span><br><span class="line"><span class="section">👩🏻: 🗡️🥒❌</span></span><br><span class="line"><span class="section">👨🏻: 10, 🗡️+🥒</span></span><br><span class="line"><span class="section">👩🏻: ！？</span></span><br><span class="line"><span class="section">👨🏻: 10，9，8 ……</span></span><br><span class="line"><span class="section">👩🏻: 。。。🥒（√）</span></span><br><span class="line"><span class="section">👨🏻: ？？ 🥒（×）🗡️（√）</span></span><br><span class="line"><span class="section">👩🏻: 💦💦！🥒❤🥒❤ 🥒❤</span></span><br><span class="line"><span class="section">👨🏻: 😏👌</span></span><br><span class="line"><span class="section">👩🏻: 😭😭😭</span></span><br><span class="line"><span class="section">👨🏻: 🥒 ☹️</span></span><br><span class="line"><span class="section">👩🏻: 👉📀 👉📀</span></span><br><span class="line"><span class="section">👨🏻: ☹️</span></span><br><span class="line"><span class="section">👩🏻: 🤟📀 🤟📀 🤟📀 💧💦🌊 ……</span></span><br><span class="line"><span class="section">👨🏻: 👀😆</span></span><br><span class="line">🥒📀 🥒📀 🥒📀 👏👏👏……</span><br><span class="line"><span class="section">👩🏻: 💦🙀💦🙀</span></span><br><span class="line"><span class="section">👨🏻: 🏹📀？</span></span><br><span class="line"><span class="section">👩🏻: ！！❌❌</span></span><br><span class="line"><span class="section">👨🏻: 😏🏹📀（√）</span></span><br><span class="line"><span class="section">👩🏻: 💦💦💦</span></span><br><span class="line"><span class="section">👨🏻: 🏹 ！！🎯</span></span><br><span class="line"><span class="section">👩🏻: [灵魂出窍]</span></span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> nicer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 哲学 </tag>
            
            <tag> 生活 </tag>
            
            <tag> 搞笑 </tag>
            
            <tag> 高能 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🚀进修MySQL~(伍)</title>
      <link href="/post/Java/SQL/5/"/>
      <url>/post/Java/SQL/5/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-09-12 15:44:34 * @FilePath: \Blog-private\source\_posts\Java\SQL\5.md * @Description: * @!: *********************************************************************--><ul><li><a href="#preparedstatement">PreparedStatement</a><ul><li><a href="#sql-%E6%B3%A8%E5%85%A5%E9%97%AE%E9%A2%98">SQL 注入问题</a></li><li><a href="#%E5%8C%BA%E5%88%AB%E7%94%A8%E6%B3%95">区别用法</a></li></ul></li><li><a href="#ideasql">IDEA+SQL</a></li><li><a href="#jdbc%E4%BA%8B%E5%8A%A1">JDBC+事务</a></li><li><a href="#%E8%BF%9E%E6%8E%A5%E6%B1%A0">连接池</a></li><li><a href="#%E5%90%84%E5%90%8D%E8%AF%8D%E5%8C%BA%E5%88%AB">各名词区别</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="PreparedStatement">PreparedStatement</h2><h3 id="SQL-注入问题">SQL 注入问题</h3><blockquote><p><a href="https://blog.csdn.net/rongxiang111/article/details/78228681">SQL 注入问题及解决</a></p></blockquote><ul><li><p>通过修改 SQL 指令字符串,使 SQL 服务器执行不正规或者恶意的 SQL 命令</p></li><li><p>比如客户端可以通过修改 SQL 字符串,可以使服务器传回原本不能显示的数据,或者修改非指定的数据.</p></li></ul><hr><h3 id="区别用法">区别用法</h3><blockquote><p>PreparedStatement 可以防止 SQL 注入,而且效率更高.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> twenty_one.jdbc.demo2.utils.JDBCUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPreparedStatement</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="comment">// 连接</span></span><br><span class="line">    connection = JDBCUtils.getConnection();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ! 插入</span></span><br><span class="line">    <span class="comment">// 问号&#x27;?&#x27;为占位符</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">insert</span> <span class="operator">=</span> <span class="string">&quot;INSERT INTO jdbcstudy.users(NAME, PASSWORD, email, birthday)  VALUES (?,?,?,?);&quot;</span>;</span><br><span class="line">    <span class="comment">//预编译sql</span></span><br><span class="line">    preparedStatement = connection.prepareStatement(insert);</span><br><span class="line">    <span class="comment">//手动赋值</span></span><br><span class="line">    preparedStatement.setString(<span class="number">1</span>, <span class="string">&quot;weidows&quot;</span>);</span><br><span class="line">    preparedStatement.setInt(<span class="number">2</span>, <span class="number">123456</span>);</span><br><span class="line">    preparedStatement.setString(<span class="number">3</span>, <span class="string">&quot;utsuko27@qq.com&quot;</span>);</span><br><span class="line">    preparedStatement.setDate(<span class="number">4</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="keyword">new</span> <span class="title class_">java</span>.util.Date().getTime()));</span><br><span class="line">    <span class="comment">// 执行</span></span><br><span class="line">    <span class="keyword">if</span> (preparedStatement.executeUpdate() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;成功.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ! 查询</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">query</span> <span class="operator">=</span> <span class="string">&quot;SELECT * From jdbcstudy.users where name = ?;&quot;</span>;</span><br><span class="line">    preparedStatement = connection.prepareStatement(query);</span><br><span class="line">    preparedStatement.setString(<span class="number">1</span>, <span class="string">&quot;weidows&quot;</span>);</span><br><span class="line">    resultSet = preparedStatement.executeQuery();</span><br><span class="line">    <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;id = &quot;</span> + resultSet.getObject(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;name = &quot;</span> + resultSet.getObject(<span class="string">&quot;NAME&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;password = &quot;</span> + resultSet.getObject(<span class="string">&quot;PASSWORD&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;email = &quot;</span> + resultSet.getObject(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;birthday = &quot;</span> + resultSet.getObject(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;===============================================================&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 断连</span></span><br><span class="line">    JDBCUtils.releaseConnection(connection, preparedStatement, resultSet);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="IDEA-SQL">IDEA+SQL</h2><ul><li><p>图形化的,摸索摸索就差不多会了.</p></li><li><p>在学这个 SQL 课程时,个人开始用的是 sqlyog,后来卸载了,直接用的 idea 内嵌的.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="JDBC-事务">JDBC+事务</h2><ul><li><p>创建表+插入数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">TABLE</span> jdbcstudy.account</span><br><span class="line">(</span><br><span class="line">  id    <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">  name  <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  money <span class="type">DECIMAL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> jdbcstudy.account(name, money)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;A&#x27;</span>, <span class="number">1000</span>),</span><br><span class="line">      (<span class="string">&#x27;B&#x27;</span>, <span class="number">1000</span>),</span><br><span class="line">      (<span class="string">&#x27;C&#x27;</span>, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><hr></li><li><p>事务</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> twenty_one.jdbc.demo2.utils.JDBCUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTransaction</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      connection = JDBCUtils.getConnection();</span><br><span class="line">      <span class="comment">//关闭数据库的自动提交功能,同时开启事务</span></span><br><span class="line">      connection.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">      <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update account set money = money-500 where id = 1&quot;</span>;</span><br><span class="line">      preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">      preparedStatement.executeUpdate();</span><br><span class="line"></span><br><span class="line">      <span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span> <span class="string">&quot;update account set money = money-500 where id = 2&quot;</span>;</span><br><span class="line">      preparedStatement = connection.prepareStatement(sql2);</span><br><span class="line">      preparedStatement.executeUpdate();</span><br><span class="line"></span><br><span class="line">      <span class="comment">//业务完毕，提交事务</span></span><br><span class="line">      connection.commit();</span><br><span class="line">      System.out.println(<span class="string">&quot;事务操作成功&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      <span class="comment">//如果失败，默认会回滚,也可以在这里自定义</span></span><br><span class="line">      connection.rollback();</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      JDBCUtils.releaseConnection(connection, preparedStatement, resultSet);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="连接池">连接池</h2><ul><li><p>概念上与线程池相同,因为频繁创建和断开连接耗费大量资源,利用池化技术来<code>减轻资源损耗.</code></p></li><li><p>数据库连接池接口 <code>DataSource</code> ,开源数据源实现类:</p><ul><li><p>DBCP</p></li><li><p>C3P0</p></li><li><p>Druid: 阿里巴巴</p></li></ul><blockquote><p>无论使用什么数据源，本质是不变的，DateSource 接口不会变，方法就不会变</p></blockquote></li></ul><hr><ul><li><p>用法区别就是 utils 类中,加载驱动,连接 connection 和读取 properties 配置文件不需要我们自己写了</p></li><li><p>db.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># DBCP的设置文件,属性名不能错</span></span><br><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/jdbcStudy?useUnicode = true &amp; characterEncoding = utf8 &amp; useSSL = true</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure></li><li><p>utils.DbcpUtils</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp.BasicDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DbcpUtils</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="comment">// 加载连接信息</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      properties.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;Java/src/main/java/twenty_one/jdbc/demo3/db.properties&quot;</span>));</span><br><span class="line">      dataSource = BasicDataSourceFactory.createDataSource(properties);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取连接</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="keyword">return</span> dataSource.getConnection();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 释放资源</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">releaseConnection</span><span class="params">(Connection connection, Statement statement, ResultSet resultSet)</span></span><br><span class="line">      <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="keyword">if</span> (resultSet != <span class="literal">null</span>) &#123;</span><br><span class="line">      resultSet.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (statement != <span class="literal">null</span>) &#123;</span><br><span class="line">      statement.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">      connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>TestDataSource</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> twenty_one.jdbc.demo3.utils.DbcpUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDataSource</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="comment">// 连接</span></span><br><span class="line">    connection = DbcpUtils.getConnection();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ! 插入</span></span><br><span class="line">    <span class="comment">// 问号&#x27;?&#x27;为占位符</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">insert</span> <span class="operator">=</span> <span class="string">&quot;INSERT INTO jdbcstudy.users(NAME, PASSWORD, email, birthday)  VALUES (?,?,?,?);&quot;</span>;</span><br><span class="line">    <span class="comment">//预编译sql</span></span><br><span class="line">    preparedStatement = connection.prepareStatement(insert);</span><br><span class="line">    <span class="comment">//手动赋值</span></span><br><span class="line">    preparedStatement.setString(<span class="number">1</span>, <span class="string">&quot;weidows&quot;</span>);</span><br><span class="line">    preparedStatement.setInt(<span class="number">2</span>, <span class="number">123456</span>);</span><br><span class="line">    preparedStatement.setString(<span class="number">3</span>, <span class="string">&quot;utsuko27@qq.com&quot;</span>);</span><br><span class="line">    preparedStatement.setDate(<span class="number">4</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="keyword">new</span> <span class="title class_">java</span>.util.Date().getTime()));</span><br><span class="line">    <span class="comment">// 执行</span></span><br><span class="line">    <span class="keyword">if</span> (preparedStatement.executeUpdate() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;成功.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ! 查询</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">query</span> <span class="operator">=</span> <span class="string">&quot;SELECT * From jdbcstudy.users where name = ?;&quot;</span>;</span><br><span class="line">    preparedStatement = connection.prepareStatement(query);</span><br><span class="line">    preparedStatement.setString(<span class="number">1</span>, <span class="string">&quot;weidows&quot;</span>);</span><br><span class="line">    resultSet = preparedStatement.executeQuery();</span><br><span class="line">    <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;id = &quot;</span> + resultSet.getObject(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;name = &quot;</span> + resultSet.getObject(<span class="string">&quot;NAME&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;password = &quot;</span> + resultSet.getObject(<span class="string">&quot;PASSWORD&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;email = &quot;</span> + resultSet.getObject(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;birthday = &quot;</span> + resultSet.getObject(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;===============================================================&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 断连</span></span><br><span class="line">    DbcpUtils.releaseConnection(connection, preparedStatement, resultSet);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="各名词区别">各名词区别</h2><blockquote><p><a href="https://blog.csdn.net/u013541707/article/details/113182157">简单分析jdbc、datasource数据源、数据库驱动，连接池，jdbcTemplate，mybatis、JPA、Hibernate的区别</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> mysql </tag>
            
            <tag> jdbc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🚀进修MySQL~(肆)</title>
      <link href="/post/Java/SQL/4/"/>
      <url>/post/Java/SQL/4/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-03-20 17:34:17 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\MySQL\4.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86">用户/权限管理</a><ul><li><a href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C">基本操作</a></li><li><a href="#%E6%9D%83%E9%99%90%E8%A7%A3%E9%87%8A">权限解释</a></li><li><a href="#%E8%A1%A8%E7%BB%B4%E6%8A%A4">表维护</a></li></ul></li><li><a href="#%E5%AF%BC%E5%87%BA%E5%AF%BC%E5%85%A5">导出&amp;导入</a></li><li><a href="#%E8%AE%BE%E8%AE%A1%E6%95%B0%E6%8D%AE%E5%BA%93">设计数据库</a></li><li><a href="#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F">三大范式</a><ul><li><a href="#%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F">第一范式</a></li><li><a href="#%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F">第二范式</a></li><li><a href="#%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F">第三范式</a></li><li><a href="#%E6%80%A7%E8%83%BD%E8%80%83%E9%87%8F">性能考量</a></li></ul></li><li><a href="#jdbc">JDBC</a><ul><li><a href="#helloworld">HelloWorld</a></li><li><a href="#%E5%AF%B9%E8%B1%A1%E6%93%8D%E4%BD%9C">对象操作</a></li><li><a href="#%E8%A7%A3%E8%80%A6%E6%A1%88%E4%BE%8B">解耦案例</a><ul><li><a href="#utils">Utils</a></li><li><a href="#curd">CRUD</a></li></ul></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="用户-权限管理">用户/权限管理</h2><h3 id="基本操作">基本操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  用户信息表：mysql.user</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 刷新权限</span></span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  增加用户</span></span><br><span class="line"><span class="comment">  必须拥有mysql数据库的全局CREATE USER权限，或拥有INSERT权限。</span></span><br><span class="line"><span class="comment">  用户名/密码注意加引号，如 &#x27;user_name&#x27;@&#x27;192.168.1.1&#x27;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> weidows IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 重命名用户</span></span><br><span class="line">RENAME <span class="keyword">USER</span> weidows <span class="keyword">TO</span> weidows2;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除用户</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> weidows2;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置密码</span></span><br><span class="line"><span class="comment">-- 为当前用户设置密码</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="operator">=</span> PASSWORD (<span class="string">&#x27;密码&#x27;</span>);</span><br><span class="line"><span class="comment">-- 为指定用户设置密码</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> 用户名 <span class="operator">=</span> PASSWORD (<span class="string">&#x27;密码&#x27;</span>);</span><br><span class="line"><span class="comment">-- 上面两种报错的话</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> root<span class="variable">@localhost</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;密码&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  授予权限</span></span><br><span class="line"><span class="comment">  GRANT 权限列表 ON 表名 TO 用户名 [IDENTIFIED BY [PASSWORD] &#x27;password&#x27;]</span></span><br><span class="line"><span class="comment">    all privileges 表示所有权限</span></span><br><span class="line"><span class="comment">    *.* 表示所有库的所有表</span></span><br><span class="line"><span class="comment">    库名.表名 表示某库下面的某表</span></span><br><span class="line"><span class="comment">  只有root用户拥有grant权限,其他用户无法开启.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> weidows IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看权限</span></span><br><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> root<span class="variable">@localhost</span>;</span><br><span class="line"><span class="comment">-- 查看当前用户权限</span></span><br><span class="line"><span class="keyword">SHOW</span> GRANTS;</span><br><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> <span class="built_in">CURRENT_USER</span>;</span><br><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> <span class="built_in">CURRENT_USER</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  撤消权限</span></span><br><span class="line"><span class="comment">  REVOKE 权限列表 ON 表名 FROM 用户名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">FROM</span> weidows;</span><br></pre></td></tr></table></figure><hr><h3 id="权限解释">权限解释</h3><ul><li>(查询用,不用硬记)</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALL</span> [<span class="keyword">PRIVILEGES</span>]    <span class="comment">-- 设置除GRANT OPTION之外的所有简单权限</span></span><br><span class="line"><span class="keyword">ALTER</span>    <span class="comment">-- 允许使用ALTER TABLE</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">ROUTINE</span>    <span class="comment">-- 更改或取消已存储的子程序</span></span><br><span class="line"><span class="keyword">CREATE</span>    <span class="comment">-- 允许使用CREATE TABLE</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">ROUTINE</span>    <span class="comment">-- 创建已存储的子程序</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TEMPORARY</span> <span class="keyword">TABLES</span>        <span class="comment">-- 允许使用CREATE TEMPORARY TABLE</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span>        <span class="comment">-- 允许使用CREATE USER, DROP USER, RENAME USER和REVOKE ALL PRIVILEGES。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span>        <span class="comment">-- 允许使用CREATE VIEW</span></span><br><span class="line"><span class="keyword">DELETE</span>    <span class="comment">-- 允许使用DELETE</span></span><br><span class="line"><span class="keyword">DROP</span>    <span class="comment">-- 允许使用DROP TABLE</span></span><br><span class="line"><span class="keyword">EXECUTE</span>        <span class="comment">-- 允许用户运行已存储的子程序</span></span><br><span class="line">FILE    <span class="comment">-- 允许使用SELECT...INTO OUTFILE和LOAD DATA INFILE</span></span><br><span class="line"><span class="keyword">INDEX</span>     <span class="comment">-- 允许使用CREATE INDEX和DROP INDEX</span></span><br><span class="line"><span class="keyword">INSERT</span>    <span class="comment">-- 允许使用INSERT</span></span><br><span class="line"><span class="keyword">LOCK</span> <span class="keyword">TABLES</span>        <span class="comment">-- 允许对您拥有SELECT权限的表使用LOCK TABLES</span></span><br><span class="line">PROCESS     <span class="comment">-- 允许使用SHOW FULL PROCESSLIST</span></span><br><span class="line"><span class="keyword">REFERENCES</span>    <span class="comment">-- 未被实施</span></span><br><span class="line">RELOAD    <span class="comment">-- 允许使用FLUSH</span></span><br><span class="line"><span class="keyword">REPLICATION</span> CLIENT    <span class="comment">-- 允许用户询问从属服务器或主服务器的地址</span></span><br><span class="line"><span class="keyword">REPLICATION</span> SLAVE    <span class="comment">-- 用于复制型从属服务器（从主服务器中读取二进制日志事件）</span></span><br><span class="line"><span class="keyword">SELECT</span>    <span class="comment">-- 允许使用SELECT</span></span><br><span class="line"><span class="keyword">SHOW</span> DATABASES    <span class="comment">-- 显示所有数据库</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VIEW</span>    <span class="comment">-- 允许使用SHOW CREATE VIEW</span></span><br><span class="line">SHUTDOWN    <span class="comment">-- 允许使用mysqladmin shutdown</span></span><br><span class="line">SUPER    <span class="comment">-- 允许使用CHANGE MASTER, KILL, PURGE MASTER LOGS和SET GLOBAL语句，mysqladmin debug命令；允许您连接（一次），即使已达到max_connections。</span></span><br><span class="line"><span class="keyword">UPDATE</span>    <span class="comment">-- 允许使用UPDATE</span></span><br><span class="line"><span class="keyword">USAGE</span>    <span class="comment">-- “无权限”的同义词</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">OPTION</span>    <span class="comment">-- 允许授予权限</span></span><br></pre></td></tr></table></figure><hr><h3 id="表维护">表维护</h3><ul><li><code>了解</code></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 分析和存储表的关键字分布</span></span><br><span class="line">ANALYZE [<span class="keyword">LOCAL</span> <span class="operator">|</span> NO_WRITE_TO_BINLOG] <span class="keyword">TABLE</span> 表名 ...</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检查一个或多个表是否有错误</span></span><br><span class="line"><span class="keyword">CHECK</span> <span class="keyword">TABLE</span> tbl_name [, tbl_name] ... [option] ...</span><br><span class="line">option <span class="operator">=</span> &#123;QUICK <span class="operator">|</span> FAST <span class="operator">|</span> MEDIUM <span class="operator">|</span> EXTENDED <span class="operator">|</span> CHANGED&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 整理数据文件的碎片</span></span><br><span class="line">OPTIMIZE [<span class="keyword">LOCAL</span> <span class="operator">|</span> NO_WRITE_TO_BINLOG] <span class="keyword">TABLE</span> tbl_name [, tbl_name] ...</span><br></pre></td></tr></table></figure><hr><h2 id="导出-导入">导出&amp;导入</h2><ul><li><p>可以用 SQL GUI 程序操作,下面介绍命令行操作</p></li><li><p>导出</p><ul><li>可以加上-w 携带备份条件</li><li>-xxx 后面不加空格,直接带上参数</li></ul><hr><ol><li>导出一张表 mysqldump -u 用户名 -p 密码 库名 表名 &gt; 文件名(D:/a.sql)</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p123456 school student &gt;D:/a.sql</span><br></pre></td></tr></table></figure><ol start="2"><li>导出多张表 mysqldump -u 用户名 -p 密码 库名 表 1 表 2 表 3 &gt; 文件名(D:/a.sql)</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p123456 school student <span class="built_in">result</span> &gt;D:/<span class="keyword">a</span>.sql</span><br></pre></td></tr></table></figure><ol start="3"><li>导出所有表 mysqldump -u 用户名 -p 密码 库名 &gt; 文件名(D:/a.sql)</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p123456 school &gt;D:/a.sql</span><br></pre></td></tr></table></figure><ol start="4"><li>导出一个库 mysqldump -u 用户名 -p 密码 -B 库名 &gt; 文件名(D:/a.sql)</li></ol><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">mysqldump</span> -uroot -p123456 -<span class="keyword">B</span> school &gt;D:/a.sql</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>导入</p><ol><li>在已经登录 mysql,切换到指定数据库的情况下: source 备份文件</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> D:/a.sql</span><br></pre></td></tr></table></figure><ol start="2"><li>在不登录的情况下: mysql -u 用户名 -p 密码 [库名] &lt; 备份文件 (如果导入一个库的话就不加库名)</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p123456 school &lt;D:/a.sql</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="设计数据库">设计数据库</h2><ul><li><p>目的:</p><ol><li>节省数据存储空间</li><li>保证数据的完整性</li><li>方便进行数据库应用系统的开发</li></ol><hr></li><li><p>阶段设计</p><ol><li><p>需求分析: 分析客户的业务和数据处理需求</p></li><li><p>概要设计: 设计数据库的 E-R 模型图 , 确认需求信息的正确和完整.</p></li><li><p>收集信息: 搜集与需求相关的信息需求.</p><ol><li>页面 A</li><li>功能 B</li><li>特殊需求 C</li><li>自定义 D</li><li>…</li></ol></li><li><p>标识实体: 标识数据库所要管理的对象,详细信息(Attribute)以及关系(Relationship)</p><ol><li>写博客 user -&gt; blog</li><li>分类 blog -&gt; category</li><li>评论 user(作者) -&gt; user(评论者) -&gt; blog(博客页面)</li><li>…</li></ol></li></ol></li></ul><hr><h2 id="三大范式">三大范式</h2><blockquote><p><a href="https://blog.csdn.net/scarecrow_fly/article/details/102170042">数据库设计的三大范式通俗讲解</a></p></blockquote><ul><li><p>三大范式出现为了解决一下四种问题</p><ul><li><p>信息重复</p></li><li><p>更新异常</p></li><li><p>插入异常</p></li><li><p>删除异常</p></li></ul></li></ul><hr><h3 id="第一范式">第一范式</h3><blockquote><p>确保每列的<code>原子性</code>,每列都是不可再分的最小数据单元</p></blockquote><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVsdNA.png" alt="20210317202650" /></blockquote><ul><li>上面家庭信息和学校信息都可以再拆分为两列</li></ul><hr><h3 id="第二范式">第二范式</h3><blockquote><p>必须在满足第一范式的条件下: 每个表只做一件事(<code>每行有唯一标识</code>,其他数据只依赖于此标识列)</p></blockquote><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVsvu5.png" alt="20210317203230" /></blockquote><ul><li><p>简单来讲就是标识列和其他列有共同重复数据行,那么<code>标识列</code>和<code>有重复数据的列</code>可以分到另一个表</p><img src="https://www.helloimg.com/images/2022/02/27/GVsNOm.png" alt="20210317203601" /></li></ul><hr><h3 id="第三范式">第三范式</h3><blockquote><p>在第二范式基础上,其他列数据必须与标识列数据有直接关系</p></blockquote><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVsQkh.png" alt="20210317204105" /></blockquote><ul><li><p>也就是说不存在标识列与其他列共同重复了,但还是可能存在多个其他列有共同重复(班主任的那三列有共同重复数据)</p></li><li><p>把班主任分出去</p><img src="https://www.helloimg.com/images/2022/02/27/GVs7lq.png" alt="20210317204341" /></li></ul><hr><h3 id="性能考量">性能考量</h3><blockquote><p><code>关联查询不能超过三张表</code>.</p></blockquote><ul><li><p>实际应用中需要考虑多表的额外开销</p></li><li><p>如果不规范程度低,而且性能需求高的场景,则需要考虑是否遵循范式.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="JDBC">JDBC</h2><h3 id="HelloWorld">HelloWorld</h3><img src="https://www.helloimg.com/images/2022/02/27/GVsz1c.png" alt="20210319102812" /><ul><li><p>工具类 (Java 自带)</p><ul><li>java.sql</li><li>javax.sql</li></ul></li><li><p>SQL 驱动需要导入(在 pom.xml 中)</p><ul><li>mysql-connector-java-版本号 jar</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>创建数据库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE jdbcStudy <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"></span><br><span class="line">USE jdbcStudy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `users`</span><br><span class="line">(</span><br><span class="line">  id       <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  NAME     <span class="type">VARCHAR</span>(<span class="number">40</span>),</span><br><span class="line">  PASSWORD <span class="type">VARCHAR</span>(<span class="number">40</span>),</span><br><span class="line">  email    <span class="type">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">  birthday <span class="type">DATE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `users`(id, NAME, PASSWORD, email, birthday)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;zhansan&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;zs@sina.com&#x27;</span>, <span class="string">&#x27;1980-12-04&#x27;</span>),</span><br><span class="line">      (<span class="number">2</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;lisi@sina.com&#x27;</span>, <span class="string">&#x27;1981-12-04&#x27;</span>),</span><br><span class="line">      (<span class="number">3</span>, <span class="string">&#x27;wangwu&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;wangwu@sina.com&#x27;</span>, <span class="string">&#x27;1979-12-04&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>连接,helloworld</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mysql.cj.jdbc.Driver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCFirstDemo</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1.设置用户信息</span></span><br><span class="line"><span class="comment">        useUnicode = true 支持中文编码</span></span><br><span class="line"><span class="comment">        characterEncoding = utf8 设定字符集</span></span><br><span class="line"><span class="comment">        useSSL = true 安全连接</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbcStudy?useUnicode = true &amp; characterEncoding = utf8 &amp; useSSL = true&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.加载驱动(固定写法,二选一)</span></span><br><span class="line">    <span class="comment">// Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span></span><br><span class="line">    DriverManager.registerDriver(<span class="keyword">new</span> <span class="title class_">Driver</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 3.连接，数据库对象 Connection 代表数据库</span></span><br><span class="line"><span class="comment">        //事务提交</span></span><br><span class="line"><span class="comment">        connection.commit();</span></span><br><span class="line"><span class="comment">        //事务回滚</span></span><br><span class="line"><span class="comment">        connection.rollback();</span></span><br><span class="line"><span class="comment">        //数据库设置自动提交</span></span><br><span class="line"><span class="comment">        connection.setAutoCommit(true);</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.创建SQL的对象</span></span><br><span class="line">    <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM users&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5.执行SQL的对象,查看返回结果</span></span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(sql); <span class="comment">//返回的结果集</span></span><br><span class="line">    <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;id = &quot;</span> + resultSet.getObject(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;name = &quot;</span> + resultSet.getObject(<span class="string">&quot;NAME&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;password = &quot;</span> + resultSet.getObject(<span class="string">&quot;PASSWORD&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;email = &quot;</span> + resultSet.getObject(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;birthday = &quot;</span> + resultSet.getObject(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;===============================================================&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//6.释放连接</span></span><br><span class="line">    resultSet.close();</span><br><span class="line">    statement.close();</span><br><span class="line">    connection.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p>执行结果</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">id = 1</span><br><span class="line">name = zhansan</span><br><span class="line">password = 123456</span><br><span class="line">email = zs@sina.com</span><br><span class="line"><span class="section">birthday = 1980-12-04</span></span><br><span class="line"><span class="section">===============================================================</span></span><br><span class="line">id = 2</span><br><span class="line">name = lisi</span><br><span class="line">password = 123456</span><br><span class="line">email = lisi@sina.com</span><br><span class="line"><span class="section">birthday = 1981-12-04</span></span><br><span class="line"><span class="section">===============================================================</span></span><br><span class="line">id = 3</span><br><span class="line">name = wangwu</span><br><span class="line">password = 123456</span><br><span class="line">email = wangwu@sina.com</span><br><span class="line"><span class="section">birthday = 1979-12-04</span></span><br><span class="line"><span class="section">===============================================================</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="对象操作">对象操作</h3><ul><li><p>connection</p><ul><li>connection.rollback();</li><li>connection.commit();</li><li>connection.setAutoCommit();</li></ul></li></ul><hr><ul><li><p>statement</p><ul><li>statement.executeQuery(); 执行查询 SQL</li><li>statement.execute(); 可以执行任何 SQL 指令</li><li>statement.executeUpdate(); 更新，插入，删除，返回受影响的行数</li><li>statement.executeBatch(); 执行一组 SQL</li></ul></li></ul><hr><ul><li><p>ResultSet</p><ul><li>resultSet.getObject(); 在不知道列类型下使用</li><li>resultSet.getString(); 如果知道则指定使用</li><li>resultSet.getInt();</li><li>…</li></ul><hr><ul><li>resultSet.next(); 移动到下一个</li><li>resultSet.previous(); 移动到上一个</li><li>resultSet.beforeFirst(); 移动到最前</li><li>resultSet.afterLast(); 移动到最后</li><li>resultSet.absolute(row); 移动到指定行</li></ul></li></ul><hr><h3 id="解耦案例">解耦案例</h3><ul><li><p>上面的 JDBC 包括加载连接,业务逻辑,状态转化都写到一个类中,导致扩展时很不方便,需要 <code>解耦</code></p></li><li><p>把加载连接分离到 <code>db.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/jdbcStudy?useUnicode = true &amp; characterEncoding = utf8 &amp; useSSL = true</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="Utils">Utils</h4><ul><li><p>把 SQL connect 和 release 分离到 <code>utils.JDBCUtils</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtils</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="comment">// 加载连接信息</span></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      properties.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;Java/src/main/java/twenty_one/jdbc/demo2/db.properties&quot;</span>));</span><br><span class="line"></span><br><span class="line">      driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">      url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">      username = properties.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">      password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">      Class.forName(driver);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException | ClassNotFoundException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取连接</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="keyword">return</span> DriverManager.getConnection(url, username, password);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 释放资源</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">releaseConnection</span><span class="params">(Connection connection,Statement statement,ResultSet resultSet)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="keyword">if</span> (resultSet != <span class="literal">null</span>) &#123;</span><br><span class="line">      resultSet.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (statement != <span class="literal">null</span>) &#123;</span><br><span class="line">      statement.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">      connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="CRUD-2">CRUD</h4><ul><li><p>业务类: 测试增删改查(CRUD)</p><ul><li>增删改用<code>.executeUpdate()</code>, 查用<code>.executeQuery()</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> twenty_one.jdbc.demo2.utils.JDBCUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="comment">// 连接</span></span><br><span class="line">    connection = JDBCUtils.getConnection();</span><br><span class="line">    statement = connection.createStatement();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 增</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">insert</span> <span class="operator">=</span> <span class="string">&quot;INSERT INTO jdbcstudy.users(NAME, PASSWORD, email, birthday)  VALUES (&#x27;weidows&#x27;, 123456, &#x27;utsuko27@qq.com&#x27;, &#x27;2020-07-28&#x27;);&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (statement.executeUpdate(insert) &gt; <span class="number">0</span>) &#123; <span class="comment">// 返回int:受影响的行数</span></span><br><span class="line">      System.out.println(<span class="string">&quot;插入成功. insert -&gt; weidows&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 改</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">update</span> <span class="operator">=</span> <span class="string">&quot;update jdbcstudy.users set password =654321 where name = &#x27;weidows&#x27;;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (statement.executeUpdate(update) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;修改成功. weidows.password -&gt; 654321&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">query</span> <span class="operator">=</span> <span class="string">&quot;SELECT * From jdbcstudy.users;&quot;</span>;</span><br><span class="line">    resultSet = statement.executeQuery(query);</span><br><span class="line">    <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;id = &quot;</span> + resultSet.getObject(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;name = &quot;</span> + resultSet.getObject(<span class="string">&quot;NAME&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;password = &quot;</span> + resultSet.getObject(<span class="string">&quot;PASSWORD&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;email = &quot;</span> + resultSet.getObject(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;birthday = &quot;</span> + resultSet.getObject(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot;===============================================================&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">delete</span> <span class="operator">=</span> <span class="string">&quot;delete from jdbcstudy.users where name = &#x27;weidows&#x27;;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (statement.executeUpdate(delete) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;删除成功.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 断连</span></span><br><span class="line">    JDBCUtils.releaseConnection(connection, statement, resultSet);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>执行结果</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">插入成功. insert -&gt; weidows</span><br><span class="line">修改成功. weidows.password -&gt; 654321</span><br><span class="line">id = 1</span><br><span class="line">name = zhansan</span><br><span class="line">password = 123456</span><br><span class="line">email = zs@sina.com</span><br><span class="line"><span class="section">birthday = 1980-12-04</span></span><br><span class="line"><span class="section">===============================================================</span></span><br><span class="line">id = 2</span><br><span class="line">name = lisi</span><br><span class="line">password = 123456</span><br><span class="line">email = lisi@sina.com</span><br><span class="line"><span class="section">birthday = 1981-12-04</span></span><br><span class="line"><span class="section">===============================================================</span></span><br><span class="line">id = 3</span><br><span class="line">name = wangwu</span><br><span class="line">password = 123456</span><br><span class="line">email = wangwu@sina.com</span><br><span class="line"><span class="section">birthday = 1979-12-04</span></span><br><span class="line"><span class="section">===============================================================</span></span><br><span class="line">id = 9</span><br><span class="line">name = weidows</span><br><span class="line">password = 654321</span><br><span class="line">email = utsuko27@qq.com</span><br><span class="line"><span class="section">birthday = 2020-07-28</span></span><br><span class="line"><span class="section">===============================================================</span></span><br><span class="line">删除成功.</span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> mysql </tag>
            
            <tag> jdbc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🚀进修MySQL~(叁)</title>
      <link href="/post/Java/SQL/3/"/>
      <url>/post/Java/SQL/3/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-03-21 10:58:41 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\MySQL\3.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%87%BD%E6%95%B0">函数</a><ul><li><a href="#%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0">数据函数</a><ul><li><a href="#%E4%BD%9C%E7%94%A8%E4%BA%8E%E8%AE%B0%E5%BD%95">作用于记录</a></li><li><a href="#%E4%BD%9C%E7%94%A8%E4%BA%8E%E5%AD%97%E6%AE%B5">作用于字段</a></li></ul></li><li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0">字符串函数</a></li><li><a href="#%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0">时间函数</a></li><li><a href="#%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF">系统信息</a></li><li><a href="#%E5%88%86%E7%BB%84">分组</a></li><li><a href="#md5-%E5%8A%A0%E5%AF%86">MD5 加密</a></li></ul></li><li><a href="#%E4%BA%8B%E5%8A%A1">事务</a><ul><li><a href="#acid-%E5%8E%9F%E5%88%99">ACID 原则</a></li><li><a href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">基本语法</a></li></ul></li><li><a href="#%E7%B4%A2%E5%BC%95">索引</a><ul><li><a href="#%E5%88%86%E7%B1%BB">分类</a></li><li><a href="#%E6%B7%BB%E5%8A%A0%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95">添加&amp;删除索引</a></li><li><a href="#explain">EXPLAIN</a></li><li><a href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90">性能分析</a></li><li><a href="#%E7%B4%A2%E5%BC%95%E8%A7%84%E7%9F%A9">索引规矩</a></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="函数">函数</h2><h3 id="数据函数">数据函数</h3><h4 id="作用于记录">作用于记录</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 绝对值</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">ABS</span>(<span class="number">-8</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向上取整</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">CEILING</span>(<span class="number">9.4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向下取整</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">FLOOR</span>(<span class="number">9.4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 随机数,返回一个0-1之间的随机数</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  RAND();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 符号函数: 负数返回-1,正数返回1,0返回0</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  SIGN(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><hr><h4 id="作用于字段">作用于字段</h4><ul><li>也叫 <code>聚合函数</code>(常用)</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  三种COUNT()用法及区别</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  count(1)和count(*)都会对全表进行扫描，统计所有记录的条数，包括那些为null的记录，因此，它们的效率可以说是相差无几;而count(字段)则与前两者不同，它会统计该字段不为null的记录条数。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  1）在表没有主键时，count(1)比count(*)快</span></span><br><span class="line"><span class="comment">  2）有主键时，主键作为计算条件，count(主键)效率最高；</span></span><br><span class="line"><span class="comment">  3）若表格只有一个字段，则count(*)效率较高。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">COUNT</span>(studentname) <span class="keyword">AS</span> `学生人数`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> `学生人数`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="number">1</span>) <span class="keyword">AS</span> `学生人数`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 和</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">SUM</span>(StudentResult) <span class="keyword">AS</span> `总 和`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">result</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 平均</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">AVG</span>(StudentResult) <span class="keyword">AS</span> `平 均 分`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">result</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 最高</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">MAX</span>(StudentResult) <span class="keyword">AS</span> `最 高 分`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">result</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 最低</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">MIN</span>(StudentResult) <span class="keyword">AS</span> `最 低 分`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">result</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="字符串函数">字符串函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 返回字符串包含的字符数</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">CHAR_LENGTH</span>(<span class="string">&#x27;狂神说坚持就能成功&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 合并字符串,参数可以有多个</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  CONCAT(<span class="string">&#x27;我&#x27;</span>, <span class="string">&#x27;爱&#x27;</span>, <span class="string">&#x27;程序&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 替换字符串,从某个位置开始替换某个长度</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">INSERT</span>(<span class="string">&#x27;我爱编程helloworld&#x27;</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="string">&#x27;超级热爱&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- toLowerCase小写</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">LOWER</span>(<span class="string">&#x27;KuangShen&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- toUpperCase大写</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">UPPER</span>(<span class="string">&#x27;KuangShen&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从左边截取</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">LEFT</span>(<span class="string">&#x27;hello,world&#x27;</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从右边截取</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">RIGHT</span>(<span class="string">&#x27;hello,world&#x27;</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 替换字符串</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  REPLACE(<span class="string">&#x27;狂神说坚持就能成功&#x27;</span>, <span class="string">&#x27;坚持&#x27;</span>, <span class="string">&#x27;努力&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 截取字符串,开始和长度</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  SUBSTR(<span class="string">&#x27;狂神说坚持就能成功&#x27;</span>, <span class="number">4</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 反转</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  REVERSE(<span class="string">&#x27;狂神说坚持就能成功&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询姓周的同学,改成邹 (采用子查询)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  studentname <span class="operator">=</span>(</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      REPLACE(studentname, <span class="string">&#x27;周&#x27;</span>, <span class="string">&#x27;邹&#x27;</span>)</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">      studentname <span class="keyword">LIKE</span> <span class="string">&#x27;周%&#x27;</span></span><br><span class="line">  );</span><br></pre></td></tr></table></figure><hr><h3 id="时间函数">时间函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 获取当前日期(两种一样)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">CURRENT_DATE</span>();</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  CRUDATE();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 获取当前日期和时间(三种一样)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  NOW();</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">LOCALTIME</span>();</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  SYSDATE();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 获取年月日,时分秒</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">YEAR</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">MONTH</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">DAY</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">HOUR</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">MINUTE</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">SECOND</span>(NOW());</span><br></pre></td></tr></table></figure><hr><h3 id="系统信息">系统信息</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 版本</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  VERSION();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户(MySQL的用户)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">USER</span>();</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">SYSTEM_USER</span>();</span><br></pre></td></tr></table></figure><hr><h3 id="分组">分组</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  查询 不同课程 的平均分,最高分,最低分 (根据不同的课程进行分组)</span></span><br><span class="line"><span class="comment">  分组后面的筛选,使用 `HAVING`</span></span><br><span class="line"><span class="comment">  having是从前面筛选的字段再筛选，而where是从数据表中的字段直接进行的筛选的</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  subjectname,</span><br><span class="line">  <span class="built_in">AVG</span>(studentresult) <span class="keyword">AS</span> `平 均 分`,</span><br><span class="line">  <span class="built_in">MAX</span>(StudentResult) <span class="keyword">AS</span> `最 高 分`,</span><br><span class="line">  <span class="built_in">MIN</span>(StudentResult) <span class="keyword">AS</span> `最 低 分`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">result</span> <span class="keyword">AS</span> r</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> s <span class="keyword">ON</span> r.subjectno <span class="operator">=</span> s.subjectno</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  r.subjectno</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">  `平 均 分` <span class="operator">&gt;</span> <span class="number">60</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="MD5-加密">MD5 加密</h3><blockquote><p>Message-Digest Algorithm 5（信息-摘要算法 5），用于确保信息传输完整一致。是计算机广泛使用的杂凑算法（摘要算法、哈希算法）.</p></blockquote><ul><li><p>初始化</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 新建表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `testmd5` (</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `pwd` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据(明文密码)</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span></span><br><span class="line">  testmd5</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">  (<span class="number">1</span>, <span class="string">&#x27;kuangshen&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>),(<span class="number">2</span>, <span class="string">&#x27;qinjiang&#x27;</span>, <span class="string">&#x27;456789&#x27;</span>);</span><br></pre></td></tr></table></figure><hr></li><li><p>加密</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 加密全列</span></span><br><span class="line"><span class="keyword">update</span></span><br><span class="line">  testmd5</span><br><span class="line"><span class="keyword">set</span></span><br><span class="line">  pwd <span class="operator">=</span> md5(pwd);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入时加密</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span></span><br><span class="line">  testmd5</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">4</span>, <span class="string">&#x27;kuangshen3&#x27;</span>, md5(<span class="string">&#x27;123456&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检查账号密码是否对应</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  testmd5</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  `name` <span class="operator">=</span> <span class="string">&#x27;kuangshen&#x27;</span></span><br><span class="line">  <span class="keyword">AND</span> `pwd` <span class="operator">=</span> MD5(<span class="string">&#x27;123456&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="事务">事务</h2><ul><li>一组遵循 ACID 原则的 SQL 指令</li></ul><h3 id="ACID-原则">ACID 原则</h3><ul><li><p>原子性(Atomic)</p><ul><li>同一批次的 SQL 指令,要么全通过,要么全取消,不存在中间态</li></ul></li><li><p>一致性(Consist)</p><ul><li>事务前后数据完整性一致</li></ul></li><li><p>隔离性(Isolated)</p><ul><li><p>多个用户并发执行多事务,会使其<code>串行化</code>执行,同一时间只能有一个请求作用于同一数据</p></li><li><p>有可能隔离失败导致一些问题(如下)</p></li></ul><hr><ol><li><p>脏读 : 一个事务读取了另一个没有提交的事务</p></li><li><p>不可重复读 : 在同一个事务内，再次读取表中的数据，表发生了改变</p></li><li><p>幻读(虚读) : 在一个事务内，读取到了别人插入的数据，导致前后读出来的结果不一致</p></li></ol></li><li><p>持久性(Durable)</p><ul><li>事务一旦提交成功,便不会被外界因素影响而导致回滚.</li></ul></li></ul><hr><h3 id="基本语法">基本语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  MySQL中默认是自动提交,使用事务时应先关闭自动提交</span></span><br><span class="line"><span class="comment">  关闭自动提交模式(0),开启(1)</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开始一个事务,标记事务的起始点</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 此处写业务代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  COMMIT; -- 提交一个事务给数据库</span></span><br><span class="line"><span class="comment">  ROLLBACK; -- 将事务回滚,数据回到本次事务的初始状态</span></span><br><span class="line"><span class="comment">  保存点(了解,不常用)</span></span><br><span class="line"><span class="comment">    SAVEPOINT `保 存 点 名 称`; -- 设置一个事务保存点</span></span><br><span class="line"><span class="comment">    ROLLBACK TO SAVEPOINT `保 存 点 名 称`; -- 回滚到保存点</span></span><br><span class="line"><span class="comment">    RELEASE SAVEPOINT `保 存 点 名 称`; -- 删除保存点</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 还原MySQL数据库的自动提交</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><ul><li><p>逻辑图</p><img src="https://www.helloimg.com/images/2022/02/27/GVs0E0.png" alt="20210316182445" /></li><li><p>例子</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE `shop` <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"></span><br><span class="line">USE `shop`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `account` (</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `name` <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `cash` <span class="type">DECIMAL</span>(<span class="number">9</span>, <span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span></span><br><span class="line">  account (`name`, `cash`)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&#x27;A&#x27;</span>, <span class="number">2000.00</span>),(<span class="string">&#x27;B&#x27;</span>, <span class="number">10000.00</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开始</span></span><br><span class="line"><span class="keyword">SET</span></span><br><span class="line">  autocommit <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span></span><br><span class="line">  account</span><br><span class="line"><span class="keyword">SET</span></span><br><span class="line">  cash <span class="operator">=</span> cash <span class="number">-500</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  `name` <span class="operator">=</span> <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span></span><br><span class="line">  account</span><br><span class="line"><span class="keyword">SET</span></span><br><span class="line">  cash <span class="operator">=</span> cash <span class="operator">+</span> <span class="number">500</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  `name` <span class="operator">=</span> <span class="string">&#x27;B&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span></span><br><span class="line">  autocommit <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="索引">索引</h2><blockquote><p>索引是帮助 MySQL 高校获取数据的数据结构.</p></blockquote><ul><li>提高查询,分组,全文搜索速度</li><li>表间参照&amp;数据唯一性功能.</li></ul><h3 id="分类">分类</h3><ol><li><p>主键索引 (Primary Key)</p><ul><li>最常见,唯一性(一个表只能有一个)</li></ul></li><li><p>唯一索引 (Unique)</p><ul><li>保证某列中记录值唯一,同一表可以有多个唯一索引</li></ul></li><li><p>常规索引 (Key/Index)</p><ul><li>默认的索引类型</li></ul></li><li><p>全文索引 (FullText)</p><ul><li>MyISAM/InnoDB 引擎下才能使用,对字段类型也有要求,适用于大型数据</li></ul></li></ol><hr><h3 id="添加-删除索引">添加&amp;删除索引</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">方法一：创建表时</span><br><span class="line">　<span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名 (</span><br><span class="line">    字段名<span class="number">1</span> 数据类型 [完整性约束条件…],</span><br><span class="line">    字段名<span class="number">2</span> 数据类型 [完整性约束条件…],</span><br><span class="line">    索引类型 [索引名] (字段名[(长度)] [<span class="keyword">ASC</span> |<span class="keyword">DESC</span>])</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">方法二：<span class="keyword">CREATE</span>在已存在的表上创建索引</span><br><span class="line">  <span class="keyword">CREATE</span> 索引类型 索引名</span><br><span class="line">  <span class="keyword">ON</span> 表名 (字段名[(长度)] [<span class="keyword">ASC</span> |<span class="keyword">DESC</span>]) ;</span><br><span class="line"></span><br><span class="line">方法三：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span>在已存在的表上创建索引</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名</span><br><span class="line">    <span class="keyword">ADD</span> 索引类型 索引名 (字段名[(长度)] [<span class="keyword">ASC</span> |<span class="keyword">DESC</span>]) ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例子:增加全文索引</span></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `school`.`student`</span><br><span class="line">    <span class="keyword">ADD</span> FULLTEXT <span class="keyword">INDEX</span> `studentname` (`studentName`);</span><br><span class="line"></span><br><span class="line">#删除索引：<span class="keyword">DROP</span> <span class="keyword">INDEX</span> 索引名 <span class="keyword">ON</span> 表名字;</span><br><span class="line">#删除主键索引: <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> <span class="keyword">PRIMARY KEY</span>;</span><br><span class="line"></span><br><span class="line">#显示索引信息: <span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure><hr><h3 id="EXPLAIN">EXPLAIN</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  EXPLAIN : 分析SQL语句执行性能</span></span><br><span class="line"><span class="comment">  常规索引</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">EXPLAIN</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> studentno <span class="operator">=</span> <span class="string">&#x27;1000&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  使用全文索引</span></span><br><span class="line"><span class="comment">  全文搜索通过 MATCH() 函数完成。</span></span><br><span class="line"><span class="comment">  搜索字符串作为 against() 的参数被给定。对于表中的每个记录行，MATCH() 返回一个相关性值。即搜索字符串与记录行在 MATCH() 列表中指定的列的文本之间的相似性尺度。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">EXPLAIN</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">MATCH</span>(studentname) AGAINST(<span class="string">&#x27;刘&#x27;</span>);</span><br></pre></td></tr></table></figure><hr><h3 id="性能分析">性能分析</h3><ul><li><p>建表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `app_user`</span><br><span class="line">(</span><br><span class="line">  `id`          <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `name`        <span class="type">varchar</span>(<span class="number">50</span>)              <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;用户昵称&#x27;</span>,</span><br><span class="line">  `email`       <span class="type">varchar</span>(<span class="number">50</span>)         <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户邮箱&#x27;</span>,</span><br><span class="line">  `phone`       <span class="type">varchar</span>(<span class="number">20</span>)              <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">  `gender`      tinyint(<span class="number">4</span>) unsigned      <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;性别（0:男；1：女）&#x27;</span>,</span><br><span class="line">  `password`    <span class="type">varchar</span>(<span class="number">100</span>)        <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `age`         tinyint(<span class="number">4</span>)               <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">  `create_time` datetime                 <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  `update_time` <span class="type">timestamp</span>           <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB</span><br><span class="line">  <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8mb4 COMMENT <span class="operator">=</span><span class="string">&#x27;app用户表&#x27;</span>;</span><br></pre></td></tr></table></figure><hr></li><li><p>生成随机数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> mock_data()</span><br><span class="line">  <span class="keyword">RETURNS</span> <span class="type">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">DECLARE</span> num <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1000000</span>;</span><br><span class="line">  <span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">  WHILE i <span class="operator">&lt;</span> num</span><br><span class="line">    DO</span><br><span class="line">      <span class="keyword">INSERT</span> <span class="keyword">INTO</span> app_user(`name`, `email`, `phone`, `gender`, `password`, `age`)</span><br><span class="line">      <span class="keyword">VALUES</span> (CONCAT(<span class="string">&#x27;用户&#x27;</span>, i), <span class="string">&#x27;24736743@qq.com&#x27;</span>, CONCAT(<span class="string">&#x27;18&#x27;</span>, <span class="built_in">FLOOR</span>(RAND() <span class="operator">*</span> (<span class="number">999999999</span> <span class="operator">-</span> <span class="number">100000000</span>) <span class="operator">+</span> <span class="number">100000000</span>)),</span><br><span class="line">              <span class="built_in">FLOOR</span>(RAND() <span class="operator">*</span> <span class="number">2</span>), UUID(), <span class="built_in">FLOOR</span>(RAND() <span class="operator">*</span> <span class="number">100</span>));</span><br><span class="line">      <span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">END</span> WHILE;</span><br><span class="line">  <span class="keyword">RETURN</span> i;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="keyword">SELECT</span> mock_data();</span><br></pre></td></tr></table></figure><ul><li>上面的有可能无效,可以用下面的</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;schema&quot;</span><span class="punctuation">:</span> <span class="string">&quot;study&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;table&quot;</span><span class="punctuation">:</span> <span class="string">&quot;app_user&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mockStartIndex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;auto&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mockCount&quot;</span><span class="punctuation">:</span> <span class="number">100000</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mockValueReference&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://mockjs.com/examples.html#DPD&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mock&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bigint&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$mockIndex&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;varchar&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;varchar&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;varchar&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tinyint&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@integer(0,1)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;varchar&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tinyint&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@integer(0,100)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;create_time&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;datetime&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@now(&#x27;yyyy-MM-dd HH:mm:ss&#x27;)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;update_time&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;timestamp&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@now(&#x27;yyyy-MM-dd HH:mm:ss&#x27;)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr></li><li><p>性能测试</p><ul><li><p>无索引下 select 耗时 &amp; 搜索行数</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">study&gt; <span class="keyword">SELECT</span></span><br><span class="line">        *</span><br><span class="line">      <span class="keyword">FROM</span></span><br><span class="line">        app_user</span><br><span class="line">      <span class="keyword">WHERE</span></span><br><span class="line">          <span class="type">name</span> = <span class="string">&#x27;wkjvo&#x27;</span></span><br><span class="line">[<span class="number">2021</span><span class="number">-03</span><span class="number">-17</span> <span class="number">12</span>:<span class="number">06</span>:<span class="number">29</span>] 在 <span class="number">202</span> ms (execution: <span class="number">72</span> ms, fetching: <span class="number">130</span> ms) 中从 <span class="number">1</span> 开始检索到<span class="number">1</span> 行</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">rows</span>: <span class="number">99946</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>添加索引</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX idx_app_user_name <span class="keyword">ON</span> app_user(name);</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>有索引的 select</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">study&gt; <span class="keyword">SELECT</span></span><br><span class="line">        *</span><br><span class="line">      <span class="keyword">FROM</span></span><br><span class="line">        app_user</span><br><span class="line">      <span class="keyword">WHERE</span></span><br><span class="line">          <span class="type">name</span> = <span class="string">&#x27;wkjvo&#x27;</span></span><br><span class="line">[<span class="number">2021</span><span class="number">-03</span><span class="number">-17</span> <span class="number">12</span>:<span class="number">12</span>:<span class="number">11</span>] 在 <span class="number">100</span> ms (execution: <span class="number">6</span> ms, fetching: <span class="number">94</span> ms) 中从 <span class="number">1</span> 开始检索到<span class="number">1</span> 行</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">rows</span>: <span class="number">1</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="索引规矩">索引规矩</h3><ul><li><p>无索引时是暴力遍历搜索,数据表越大越慢;有索引时是对特定数据结构索引,搜索速度快,但是在增删改时有额外性能开销.</p><ol><li>不要对<code>经常变动</code>的数据加索引</li><li><code>小数据量</code>的表建议不要加索引</li><li>一般只在查找条件的字段索引</li></ol></li><li><p>索引数据结构</p><ol><li>hash 单个索引快,范围索引慢</li><li>Btree</li></ol></li><li><p>不同的数据库引擎所支持的索引类型以及索引数据结构不同</p><ul><li>InnoDB 支持事务，支持行级别锁定，支持 B-tree、Full-text 等索引，不支持 Hash 索引</li><li>MyISAM 不支持事务，支持表级别锁定，支持 B-tree、Full-text 等索引，不支持 Hash 索引</li></ul></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😍妆容打扮.</title>
      <link href="/post/life/%E5%A6%86%E5%AE%B9%E6%89%93%E6%89%AE/"/>
      <url>/post/life/%E5%A6%86%E5%AE%B9%E6%89%93%E6%89%AE/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-02-27 16:26:53 * @FilePath: \Blog-private\source\_posts\life\妆容打扮.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%89%8D%E6%83%85%E6%8F%90%E8%A6%81">前情提要</a></li><li><a href="#%E9%9D%A2%E9%83%A8">面部</a></li><li><a href="#%E5%A4%B4%E5%8F%91">头发</a></li><li><a href="#%E7%89%99%E9%BD%BF">牙齿</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="前情提要">前情提要</h2><ul><li><p>回望大学之前,我对衣装打扮之类的并不在意,能穿就行那种;</p><ul><li><p>但随着个人追求和品味的提升,这方面好像也蠢蠢欲动哈</p></li><li><p>倒也并不止打扮好看点为了吸引谁,更多的像是<code>&quot;精致的利己主义者&quot;</code></p></li></ul></li></ul><hr><ul><li><p>我自认为并不是相貌出众,仅仅相貌平平吧 (不卑不亢挺好的)</p><ul><li><p>所以,至少为了不在这方面太差,需要下一点功夫提升提升.</p></li><li><p>其实也不用太过刻薄,这方面大家都耳闻目染的了解,妆容不错的人确实身上会带一点 buff</p></li></ul></li></ul><hr><ul><li><p>于是,谨以此篇概要个人所见所闻以及经验.</p></li><li><p>多数信息采集自课代表,质量较高的或者经人试用过的产品,<code>此篇绝不存在推销意向</code></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="面部">面部</h2><p>面部发黄爱出油、肤色不均 痘印难消、红色痘印变黑色痘印</p><ul><li><p>第一点：皮肤在受紫外线照射后，皮肤中的色素细胞会更活跃，导致皮肤黑和肤色不均</p></li><li><p>第二点：痘痘好了之后留下的红色痘印，验证过后由红色痘印转为黑色痘印</p></li><li><p>第三点：面部出油严重，油脂被氧化变成黄色后整个面部也会出现皮肤发黄暗沉</p><hr></li></ul><p>抑制黑色素、抗炎调节皮肤水油平衡 就可以达到有效美白<br>推荐产品：PMPM 白钻松露瓶</p><ul><li>① 白松露提取物（贵妇级成分）50 余种活性营养精华、8 种维生素和 18 种氨基酸<br>美白抑黑、提亮去黄的效果非常明显</li><li>② 复配了高浓度的的酵母菌发酵产物滤液<br>可以促进皮肤微生态平衡，抗炎、抗氧化、还能促进细胞新生，嫩肤。</li><li>③AA2G，作为高稳定性的 VC 衍生物（大牌常用成分）<br>通过抑制黑色素形成 还原已合成黑色素 实现安全且高效的提亮效果</li><li>④ 烟酰胺 美白提亮肤色</li><li>⑤ 柠檬酸 改善面部油脂平衡促进肌肤新陈代谢</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="头发">头发</h2><p>学生时代不注意打理头发,真菌感染了很久 (就是有<code>无穷无尽的头皮屑</code>,而且发痒结痂)</p><p>试过很多不同品牌的洗发膏,比如海飞丝,飘柔,清扬,康王等等…</p><p>如我所料,<code>都不奏效</code>… (甚至因为有刺激性因子,越洗头越多)</p><p>后来在网上听说&quot;<code>二硫化硒洗剂</code>&quot;,于是买了一瓶试了试,效果拔群,非常顶用! 如图:</p>  <img src="https://www.helloimg.com/images/2022/02/27/GVtpmY.png" alt="20210424225727" /><p>这是<code>药用洗剂</code>,所以只推荐和我一样存在头皮脂溢性皮炎或真菌感染的同胞患者,<code>很便宜</code>,跟正常洗发膏差不多价格 (就是看起来颜色怪怪的 🤣,土色)</p>  <img src="https://www.helloimg.com/images/2022/02/27/GVtvot.png" alt="20210424225827" /><p>上面是讲怎么治好头皮的,下面讲怎么护发生发</p><hr><p>都说<code>程序员</code>群体容易脱发,其实原因都知道,<code>熬夜,压力大</code>这两点影响力比较大,不止存在于程序员群体中.</p><p>平时在学校用清扬比较多,因为头发比较容易出油,清扬抗油相对还好</p><p>在家里时用了一些天<code>生姜洗发剂</code>,感觉头发确实长出来一些</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="牙齿">牙齿</h2><p>这个很重要,不只是看起来白不白的问题,补过牙就知道去看牙医有多噩梦了…</p><p>之前用过很多品牌的牙膏 (高露洁,冷酸灵,中华…)</p><p>直到接触到<code>狮王</code>的牙膏,我的天,价格并不贵(20多吧好像),效果好的离奇</p><p>明显感觉牙齿坚固度,口臭,牙齿敏感都有所改善 (不是夸张,真的有对比度)</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 生活 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>低成本-无线-VR解决方案</title>
      <link href="/post/others/%E4%BD%8E%E6%88%90%E6%9C%AC-%E6%97%A0%E7%BA%BF-VR%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/post/others/%E4%BD%8E%E6%88%90%E6%9C%AC-%E6%97%A0%E7%BA%BF-VR%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-03-21 17:10:31 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\others\低成本-无线-VR解决方案.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E8%BF%99%E6%98%AF%E5%95%A5%E5%AD%90">这是啥子?</a></li><li><a href="#%E9%9C%80%E6%B1%82%E8%A1%A8">需求表</a></li><li><a href="#%E8%BF%9E%E6%8E%A5%E5%B1%8F%E5%B9%95">连接屏幕</a></li><li><a href="#%E8%AE%BE%E7%BD%AE%E8%A7%86%E9%A2%91">设置视频</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="这是啥子">这是啥子?</h2><ul><li>这是一篇关于如何低成本满足 <code>VR 观影</code>体验的 <code>介绍/推荐</code> 方案教程.</li></ul><hr><h2 id="需求表">需求表</h2><ul><li><p>硬件: 手机,电脑,VR 眼镜 (网购几十元的放手机的那种)</p></li><li><p>软件: spacedesk(手机和电脑都要安装),potplayer(或者其他有 VR/3D 功能的播放器也行)</p><blockquote><p><a href="https://spacedesk.net/">spacedesk 官网</a></p></blockquote><blockquote><p><a href="https://potplayer.daum.net/">potplayer 官网</a></p></blockquote></li><li><p>这里插一句,其实不用电脑也行,手机上有些 app 支持 VR 播放功能,直接把电影传到手机上开 VR 播放更简单.</p></li></ul><hr><h2 id="连接屏幕">连接屏幕</h2><ul><li><p>安装完 spacedesk<code>必须重启</code>才能用手机扫描到并连接上 (注意电脑和手机需要在同一网络环境下才能扫描到)</p></li><li><p>一般情况不需要找电脑内网 IP 地址,手机可以自动扫描到,连接后可以有如下四种选择</p><ul><li>按<code>Fn + F8</code>进入投影,也可以在右下角通知中心找到</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVsHEX.png" alt="20210313183255" /><ul><li><code>推荐</code>用第二个&quot;复制&quot;,第三个&quot;扩展&quot;有可能会花屏</li></ul></li></ul><hr><h2 id="设置视频">设置视频</h2><img src="https://www.helloimg.com/images/2022/02/27/GVsTb6.png" alt="20210313183727" /><ul><li>然后没了,带上眼镜看就对了.</li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> vr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>💧摄影方面的细节收集.</title>
      <link href="/post/design/%E6%91%84%E5%BD%B1/"/>
      <url>/post/design/%E6%91%84%E5%BD%B1/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-02-27 16:21:59 * @FilePath: \Blog-private\source\_posts\design\摄影.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%85%89%E5%BD%B1">光影</a></li><li><a href="#%E8%A7%92%E5%BA%A6">角度</a><ul><li><a href="#%E4%BB%B0%E8%A7%92">仰角</a></li><li><a href="#%E6%88%91%E6%83%B3%E8%81%8A%E8%81%8A%E7%9A%84">我想聊聊的:</a></li></ul></li><li><a href="#%E8%B0%83%E8%89%B2">调色</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="光影">光影</h2><blockquote><p><a href="https://www.bilibili.com/video/BV18J411B7or">当一部电影少了灯光师会变成什么样？是时候让国内导演看看了</a></p></blockquote><blockquote><p>人眼本能就是第一眼看明暗对比最强烈的地方，紧跟着注意力放松，关注点逐渐往暗面涣散，被暗面中隐约的细节吸引。不使用任何一种构图法的情况下，优秀的灯光布置可以独立完成视觉引导的工作，对画面最终的展示效果大大增色。所有视觉设计相关的工作都能从学习灯光中获得裨益。​</p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="角度">角度</h2><h3 id="仰角">仰角</h3><blockquote><p>首先感谢摄影作者及搬运 up 的分享,图片左上角有 up 的名字.</p></blockquote><ul><li><p>拍摄人物时结合<code>仰角+宽镜头+一定距离</code>更能凸显出<code>人与景的融合</code></p><img src="https://www.helloimg.com/images/2022/02/27/GVEyRz.jpg" alt="Screenshot20210313171420" /><ul><li>给人以宏大的观感</li></ul><hr></li><li><p>另外还有有一张</p><img src="https://www.helloimg.com/images/2022/02/27/GVJBQ5.jpg" alt="Screenshot20210313171408" /><ul><li>这种照片国内并不是很流行,感觉国内一些摄影方式过于局限在<code>人</code>身上,宽泛却只包括<code>表情,动作</code>,而对于取景这方面没下太大功夫,这种有点<code>非主流</code>的摄影方式确实更能让人眼前一亮.</li></ul><hr></li><li><p>最后一张</p><img src="https://www.helloimg.com/images/2022/02/27/GVEj6R.jpg" alt="Screenshot20210313171427" /><ul><li><p>正如:<code>画自会说话</code>,一句;</p></li><li><p>也贴合另外一句:<code>一千个人看这个照片有一千种感受</code>,看到这个画面感受挺多,但说不出开具体是哪一种.</p></li><li><p>语文老师常说的: <code>融情于景</code></p></li></ul></li></ul><hr><h3 id="我想聊聊的">我想聊聊的:</h3><ul><li><p>我个人对国内大部分婚纱摄影(也不单单指婚纱摄影方面)不是很满意,不过想也自然,结婚方对此不是很感冒,婚办方也只想拿钱走人,于是衍生出了如今这种<code>半自动式婚纱摄影</code></p></li><li><p>我所向往的婚纱照,是两人最美好时刻的<code>时间刻印</code>,而非像是<code>任务打关</code>一样在摄影馆一进一出…</p><hr></li><li><p>具体而言,我个人对<code>华丽的西装裙摆,豪华的别墅房车,贵族样得风情庭院</code>,这种土老帽一样的 <code>scene</code> 有些抗拒 🤔</p><ul><li>来个例子(网图),这里打了马赛克了,对人物并无恶意,单单评价摄影方式</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVsb9g.png" alt="20210313180119" /><ul><li><p>一是,它真的不好看,还不如一件<code>白丝袜</code>让我鼻血来的刺激 (当然可能大部分女方向往这种的,我不是女生,没经验 🤣)</p></li><li><p>二是,它真的无法把<code>感情融入</code>相片里.你仔细瞅瞅周围亲戚们拍相片时的表情 (是不是略带僵硬?)</p></li><li><p>三是,它真的很难勾魂.谁看到自己的婚纱照会说&quot;我还想再跟你去一次?&quot;</p></li></ul><hr></li><li><p>所以,个人比较倾向的是 <code>双人游拍</code></p><ul><li><p><code>没有人比另一半更能发掘你的美</code> (别说不能 😂)</p></li><li><p>毕竟也不可能请一位摄影师天天守着拍两人秀恩爱的画面</p></li><li><p>最后,我想把对<code>她和景色</code> 的感情,掺杂进镜头,即使是演的,也要演的两人都信以为真,容不得第三人插足此时此刻此情此景.</p></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="调色">调色</h2><p>不知道把这个归到哪一类了,算到摄影里凑凑数吧…</p><ul><li><p>开局一张图,故事全靠编</p><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVA8Ln.png" alt="20210510230442" /></blockquote></li><li><p>比较风雅照片风格,感觉比较适合<code>人物日常</code>,印象中尤其是一些高档休闲店铺喜欢用的照片风格 (咖啡厅,甜品店)</p></li><li><p><code>很歉意的</code>,找不到原创作者地址了(因为是偶然刷到的)…他给的调色面板</p><img src="https://www.helloimg.com/images/2022/02/27/GVaSe1.png" alt="1620631630921" /></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计 </tag>
            
            <tag> 摄影 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🚀进修MySQL~(贰)</title>
      <link href="/post/Java/SQL/2/"/>
      <url>/post/Java/SQL/2/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-05-06 00:02:28 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\MySQL\2.md * @Description: * @!: *********************************************************************--><ul><li><a href="#dql-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2">DQL-数据查询</a><ul><li><a href="#%E6%80%BB%E8%A7%88">总览</a></li><li><a href="#select">SELECT</a></li><li><a href="#%E5%8E%BB%E9%87%8D-distinct">去重 DISTINCT</a></li><li><a href="#%E5%AF%B9%E5%88%97%E4%BD%BF%E7%94%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F">对列使用表达式</a></li><li><a href="#where">where</a><ul><li><a href="#%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C%E7%AC%A6">逻辑操作符</a></li><li><a href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2">模糊查询</a></li><li><a href="#%E9%80%9A%E9%85%8D%E7%AC%A6">通配符</a></li></ul></li><li><a href="#%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2">联表查询</a></li><li><a href="#%E8%87%AA%E8%BF%9E%E6%8E%A5">自连接</a></li><li><a href="#%E6%8E%92%E5%BA%8F">排序</a></li><li><a href="#%E5%88%86%E9%A1%B5">分页</a></li><li><a href="#%E5%AD%90%E6%9F%A5%E8%AF%A2">子查询</a><br><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></li></ul></li></ul><h2 id="DQL-数据查询">DQL-数据查询</h2><h3 id="总览">总览</h3><ul><li><p>语句顺序不能变</p><img src="https://www.helloimg.com/images/2022/02/27/GVscAz.png" alt="20210316194554" /></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span>]</span><br><span class="line">&#123;<span class="operator">*</span> <span class="operator">|</span> table.<span class="operator">*</span> <span class="operator">|</span> [table.field1[<span class="keyword">as</span> alias1][,table.field2[<span class="keyword">as</span> alias2]][,...]]&#125;</span><br><span class="line"><span class="keyword">FROM</span> table_name [<span class="keyword">as</span> table_alias]</span><br><span class="line">  [<span class="keyword">left</span> <span class="operator">|</span> <span class="keyword">right</span> <span class="operator">|</span> <span class="keyword">inner</span> <span class="keyword">join</span> table_name2]  <span class="comment">-- 联合查询</span></span><br><span class="line">  [<span class="keyword">WHERE</span> ...]  <span class="comment">-- 指定结果需满足的条件</span></span><br><span class="line">  [<span class="keyword">GROUP</span> <span class="keyword">BY</span> ...]  <span class="comment">-- 指定结果按照哪几个字段来分组</span></span><br><span class="line">  [<span class="keyword">HAVING</span>]  <span class="comment">-- 过滤分组的记录必须满足的次要条件</span></span><br><span class="line">  [<span class="keyword">ORDER</span> <span class="keyword">BY</span> ...]  <span class="comment">-- 指定查询记录按一个或多个条件排序</span></span><br><span class="line">  [LIMIT &#123;[<span class="keyword">offset</span>,]row_count <span class="operator">|</span> row_countOFFSET <span class="keyword">offset</span>&#125;]; <span class="comment">-- 指定查询的记录从哪条至哪条</span></span><br></pre></td></tr></table></figure><hr><h3 id="SELECT">SELECT</h3><blockquote><p>SELECT 列名 [AS 显示列名] FROM 表名 [AS 显示表名];</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询所有学生信息</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询指定列</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentid,</span><br><span class="line">  studentname</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 这里是为列取别名(as关键词可以省略)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentid <span class="keyword">AS</span> `学 号`,</span><br><span class="line">  studentname `姓 名`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- as也可以为表取别名(并不会显示出来)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentid <span class="keyword">AS</span> `学 号`,</span><br><span class="line">  studentname <span class="keyword">AS</span> `姓 名`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student <span class="keyword">AS</span> `表`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 通过CONCAT()函数拼接字符串</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  CONCAT(<span class="string">&#x27;姓名: &#x27;</span>, studentname) <span class="keyword">AS</span> `拼接后的名字`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student;</span><br></pre></td></tr></table></figure><h3 id="去重-DISTINCT">去重 DISTINCT</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student</span><br></pre></td></tr></table></figure><hr><h3 id="对列使用表达式">对列使用表达式</h3><ul><li>数据库中的表达式 : 一般由文本值 , 列值 , NULL , 函数和操作符等组成</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询自增步长</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  @<span class="variable">@auto</span>_increment_increment;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询版本号</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  VERSION();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 表达式</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="number">100</span> <span class="operator">*</span> <span class="number">3</span> <span class="number">-1</span> <span class="keyword">AS</span> `结果`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 学员考试成绩集体提分一分查看</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentid,</span><br><span class="line">  gradeid <span class="operator">+</span> <span class="number">1</span> <span class="keyword">AS</span> <span class="string">&#x27;升级后&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student;</span><br></pre></td></tr></table></figure><hr><h3 id="where">where</h3><blockquote><p>表达式结果必须是 <code>布尔值</code></p></blockquote><h4 id="逻辑操作符">逻辑操作符</h4><ul><li>AND &amp;&amp;</li><li>OR ||</li><li>NOT !</li></ul><hr><ul><li><p>例子</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 满足条件的查询</span></span><br><span class="line"><span class="keyword">SELECT</span> Studentno,StudentResult <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询考试成绩在95-100之间的</span></span><br><span class="line"><span class="keyword">SELECT</span> Studentno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> StudentResult<span class="operator">&gt;=</span><span class="number">95</span> <span class="operator">&amp;&amp;</span> StudentResult<span class="operator">&lt;=</span><span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 模糊查询</span></span><br><span class="line"><span class="keyword">SELECT</span> Studentno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> StudentResult <span class="keyword">BETWEEN</span> <span class="number">95</span> <span class="keyword">AND</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 除了1000号同学,要其他同学的成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentresult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> studentno<span class="operator">!=</span><span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用NOT</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentresult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="operator">!</span> studentno<span class="operator">=</span><span class="number">1000</span>;</span><br></pre></td></tr></table></figure></li></ul><hr><h4 id="模糊查询">模糊查询</h4>  <img src="https://www.helloimg.com/images/2022/02/27/GVsS0Y.png" alt="20210312120236" /><ul><li><p>例子</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- LIKE like结合使用的通配符:  % (代表0到任意个字符)   _ (一个字符)</span></span><br><span class="line"><span class="comment">-- =============================================</span></span><br><span class="line"><span class="comment">-- 查询姓刘的同学的学号及姓名</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentno,</span><br><span class="line">  studentname</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  studentname <span class="keyword">LIKE</span> <span class="string">&#x27;刘%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询姓刘的同学,后面只有一个字的</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentno,</span><br><span class="line">  studentname</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  studentname <span class="keyword">LIKE</span> <span class="string">&#x27;刘_&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询姓刘的同学,后面只有两个字的</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentno,</span><br><span class="line">  studentname</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  studentname <span class="keyword">LIKE</span> <span class="string">&#x27;刘__&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询姓名中含有 &#x27;嘉&#x27; 字的</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentno,</span><br><span class="line">  studentname</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  studentname <span class="keyword">LIKE</span> <span class="string">&#x27;%嘉%&#x27;</span>;</span><br><span class="line"><span class="comment">-- 查询姓名中含有特殊字符的需要使用转义符号 &#x27;\&#x27;</span></span><br><span class="line">  <span class="comment">-- 自定义转义符关键字: ESCAPE &#x27;:&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- IN</span></span><br><span class="line"><span class="comment">-- =============================================</span></span><br><span class="line"><span class="comment">-- 查询学号为1000,1001,1002的学生姓名</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentno,</span><br><span class="line">  studentname</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  studentno <span class="keyword">IN</span> (<span class="number">1000</span>, <span class="number">1001</span>, <span class="number">1002</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询地址在北京,南京,河南洛阳的学生</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  address</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  address <span class="keyword">IN</span> (<span class="string">&#x27;北京&#x27;</span>, <span class="string">&#x27;南京&#x27;</span>, <span class="string">&#x27;河南洛阳&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对NULL判断 不能直接写=NULL, 用 is null</span></span><br><span class="line"><span class="comment">-- =============================================</span></span><br><span class="line"><span class="comment">-- 查询出生日期没有填写的同学</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentname</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  BornDate <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询出生日期填写的同学</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentname</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  BornDate <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询没有写家庭住址的同学</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentname</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  Address <span class="operator">=</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">OR</span> Address <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure><hr></li></ul><h4 id="通配符">通配符</h4><p>比如有个表 user,有一个 <code>name</code> 数据为<code>张三</code>,需要通过’张’字模糊查询出来</p><ul><li><p>这样是查不出来的,这是全字匹配,换为’张三’可以查出来</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> <span class="keyword">user</span></span><br><span class="line"><span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;张&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>需要改成这样: 这样是作为通配符,name 中含有’张’字的都会被匹配出来.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> <span class="keyword">user</span></span><br><span class="line"><span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%张%&#x27;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="联表查询">联表查询</h3><ul><li><p>七种 SQL joins</p><img src="https://www.helloimg.com/images/2022/02/27/GVslkM.png" alt="20210313224946" /><ul><li><p>共有四种操作符 <code>inner,full outer,left,right</code></p></li><li><p>ON 后面跟的是 A 表与 B 表数据交叉列,是 join 成立的条件.</p></li></ul><hr></li><li><p>例子</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- student和result表中都有studentno,如不指定select那个表中的,会报错&quot;不明确&quot;</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  subjectno,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student s</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r <span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右连接</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  subjectno,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student s</span><br><span class="line">  <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r <span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 等值连接</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  subjectno,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student s,</span><br><span class="line">  <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 左连接 (查询了所有同学,不考试的也会查出来)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  subjectno,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student s</span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r <span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查一下缺考的同学(左连接应用场景)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  subjectno,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student s</span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r <span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  StudentResult <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询参加了考试的同学信息(学号,学生姓名,科目名,分数)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  subjectname,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  `student` s</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` r <span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub <span class="keyword">ON</span> sub.subjectno <span class="operator">=</span> r.subjectno</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="自连接">自连接</h3><ul><li><p>把一张表视作两张表,然后把<code>同一列</code>的不同数据筛选开<code>作为两列</code>输出</p></li><li><p>初始化数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一个表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `category` (</span><br><span class="line">  `categoryid` <span class="type">INT</span>(<span class="number">10</span>) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主题id&#x27;</span>,</span><br><span class="line">  `pid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;父id&#x27;</span>,</span><br><span class="line">  `categoryName` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;主题名字&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`categoryid`)</span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">9</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span></span><br><span class="line">  `category` (`categoryid`, `pid`, `categoryName`)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;信息技术&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;软件开发&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;数据库&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;美术设计&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;web开发&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;ps技术&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;办公信息&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>select 例子</p><ul><li>把同一张表中 categoryName 这一列 select 出父栏目和子栏目两列数据输出</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.categoryName <span class="keyword">AS</span> <span class="string">&#x27;父栏目&#x27;</span>,</span><br><span class="line">  b.categoryName <span class="keyword">AS</span> <span class="string">&#x27;子栏目&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  category <span class="keyword">AS</span> a,</span><br><span class="line">  category <span class="keyword">AS</span> b</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  a.`categoryid` <span class="operator">=</span> b.`pid`;</span><br></pre></td></tr></table></figure></li><li><p>输出</p><img src="https://www.helloimg.com/images/2022/02/27/GVsORR.png" alt="20210315112316" /></li><li><p>其他样例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 思考题:查询参加了考试的同学信息(学号,学生姓名,科目名,分数)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  subjectname,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student s</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r <span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub <span class="keyword">ON</span> sub.subjectno <span class="operator">=</span> r.subjectno;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询学员及所属的年级(学号,学生姓名,年级名)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentno <span class="keyword">AS</span> 学 号,</span><br><span class="line">  studentname <span class="keyword">AS</span> 学 生 姓 名,</span><br><span class="line">  gradename <span class="keyword">AS</span> 年 级 名 称</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student s</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> grade g <span class="keyword">ON</span> s.`GradeId` <span class="operator">=</span> g.`GradeID`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询科目及所属的年级(科目名称,年级名称)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  subjectname <span class="keyword">AS</span> 科 目 名 称,</span><br><span class="line">  gradename <span class="keyword">AS</span> 年 级 名 称</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  SUBJECT sub</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> grade g <span class="keyword">ON</span> sub.gradeid <span class="operator">=</span> g.gradeid;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询 数据库结构-1 的所有考试结果(学号 学生姓名 科目名称 成绩)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  subjectname,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student s</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r <span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub <span class="keyword">ON</span> r.subjectno <span class="operator">=</span> sub.subjectno</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  subjectname <span class="operator">=</span> <span class="string">&#x27;数据库结构-1&#x27;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="排序">排序</h3><blockquote><p>ORDER BY 列名 ASC/DESC(升序/降)</p></blockquote><ul><li><p>例子</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 按成绩降序排序</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  subjectname,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student s</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r <span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub <span class="keyword">ON</span> r.subjectno <span class="operator">=</span> sub.subjectno</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  subjectname <span class="operator">=</span> <span class="string">&#x27;数据库结构-1&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  StudentResult <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="分页-2">分页</h3><blockquote><p>LIMIT n,m</p></blockquote><ul><li><p>含义</p><ul><li><p>从第 n 条开始显示</p></li><li><p>每页显示 m 条数</p></li></ul><hr></li><li><p>比如需要每页显示 10 条数据,当前要看第一页</p><ul><li><p><code>LIMIT 0,10</code></p></li><li><p>第 n 页数据就是 <code>LIMIT 10(n-1),10</code></p></li></ul><hr></li><li><p>例子</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 每页显示5条数据</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  subjectname,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student s</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r <span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub <span class="keyword">ON</span> r.subjectno <span class="operator">=</span> sub.subjectno</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  subjectname <span class="operator">=</span> <span class="string">&#x27;数据库结构-1&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  StudentResult <span class="keyword">DESC</span>,</span><br><span class="line">  studentno</span><br><span class="line">LIMIT</span><br><span class="line">  <span class="number">0</span>, <span class="number">5</span> ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询 JAVA第一学年 课程成绩前10名并且分数大于80的学生信息(学号,姓名,课程名,分数)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.studentno,</span><br><span class="line">  studentname,</span><br><span class="line">  subjectname,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student s</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r <span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub <span class="keyword">ON</span> r.subjectno <span class="operator">=</span> sub.subjectno</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  subjectname <span class="operator">=</span> <span class="string">&#x27;JAVA第一学年&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  StudentResult <span class="keyword">DESC</span></span><br><span class="line">LIMIT</span><br><span class="line">  <span class="number">0</span>, <span class="number">10</span>;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="子查询">子查询</h3><p>查询语句中 where 中嵌套查询语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询 数据库结构-1 的考试结果(学号,科目编号,成绩),并且成绩降序排列</span></span><br><span class="line"><span class="comment">-- 方法一:使用连接查询</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentno,</span><br><span class="line">  r.subjectno,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">result</span> r</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub <span class="keyword">ON</span> r.`SubjectNo` <span class="operator">=</span> sub.`SubjectNo`</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  subjectname <span class="operator">=</span> <span class="string">&#x27;数据库结构-1&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  studentresult <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方法二:使用子查询(执行顺序:由里及外)</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  studentno,</span><br><span class="line">  subjectno,</span><br><span class="line">  StudentResult</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  subjectno <span class="operator">=</span>(</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      subjectno</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">      `subject`</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">      subjectname <span class="operator">=</span> <span class="string">&#x27;数据库结构-1&#x27;</span></span><br><span class="line">  )</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  studentresult <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🎇深入解析Window环境变量.</title>
      <link href="/post/system/%E6%B7%B1%E5%85%A5%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
      <url>/post/system/%E6%B7%B1%E5%85%A5%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-02-27 16:27:12 * @FilePath: \Blog-private\source\_posts\system\深入环境变量.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%8F%82%E7%85%A7">参照</a></li><li><a href="#%E5%90%AB%E4%B9%89">含义</a></li><li><a href="#%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">系统/用户环境变量</a></li><li><a href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E4%B8%8E-path">环境变量与 Path</a></li><li><a href="#%E4%B8%BE%E4%BE%8B">举例</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-14">借物表</h2><blockquote><p>无参照</p></blockquote><hr><h2 id="含义">含义</h2><ul><li><p>理解含义很大程度上就能明白自己到底错在哪里,有些问题靠百度很难搜出来,但是真正解决需要的时间可能<code>远小于百度搜的时间</code></p></li><li><p>Windows 系统上一般使用的终端 console 是 cmd(虽然很辣鸡但还是得用它)</p><ul><li><p>这个终端可以直接调用启动<code>.cmd</code>/<code>.bat</code>/<code>.exe</code>这种后缀名的文件</p><ul><li>(你可以在你配置的语言\bin\目录下轻易找到 XXX.exe 等等这种文件)</li></ul></li><li><p>如果不输入这种文件的具体路径,终端没法找到这个文件到底在哪里</p></li><li><p>于是环境变量就相当于在 cmd 上登了记,不写路径直接写名字就能启动,比如环境变量设置为<code>你的JDK\bin\</code>,然后在 cmd 输入<code>java</code>,cmd 就是去找这个目录下有没有<code>java.exe</code>这种文件,有的话,你就配置成功了!</p></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="系统-用户环境变量">系统/用户环境变量</h2><ul><li><p>这个区别在于你的电脑是否是<code>多用户</code></p><ul><li>如果你在用户环境变量配置好了编程环境,那么在 Windows 的另一个用户上无效</li></ul></li><li><p>所以,看个人选择,一般来说是在<code>用户区</code>添加.</p><ul><li>系统环境变量配置好之后需要<code>重启电脑生效</code>.</li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="环境变量与-Path">环境变量与 Path</h2><ul><li>这个是引用关系,比如 Path 里面的<code>%JAVA_HOME%</code>会引用名为<code>JAVA_HOME</code>的环境变量值</li><li>Path 里面从上到下为优先级,上面的优先级高.</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="举例">举例</h2><ul><li><p>这是华为的 DevEco,安装时会询问是否添加至环境变量,那,添加到环境变量有什么用呢?<br><img src="https://www.helloimg.com/images/2022/02/27/GVsqxD.png" alt="20210307160552" /></p></li><li><p>比如我安装了 VScode,并把 vscode 安装目录它添加环境变量,我们打开一个终端</p><ul><li><p>终端打开的路径是 <code>D:\Desktop\</code> ,在这里执行<code>code</code> 指令,终端首先去找 <code>D:\Desktop\</code> 这个目录下有没有叫 <code>Code</code>的程序,没有的话再去环境变量的路径找,直到找到箭头所指的 VScode 程序本体</p></li><li><p>命令后面可以跟一些参数,比如<code>code .</code>就是让 VScode 打开当前路径(就是划红线的<code>D:\Desktop\</code>)</p></li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVsmaQ.png" alt="20210307161139" /></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> 环境变量 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🤷‍♂️进程线程-CPU-并行并发大杂碎!</title>
      <link href="/post/system/process-thread/"/>
      <url>/post/system/process-thread/</url>
      
        <content type="html"><![CDATA[<h1>进程线程-CPU-并行并发大杂碎!</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:43:50 * @FilePath: \Blog-private\source\_posts\system\process-thread.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B-cpu-%E5%B9%B6%E8%A1%8C%E5%B9%B6%E5%8F%91%E5%A4%A7%E6%9D%82%E7%A2%8E">进程线程-CPU-并行并发大杂碎!</a><ul><li><a href="#%E5%BC%95%E5%AD%90">引子</a></li><li><a href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B">进程与线程</a><ul><li><a href="#%E8%BF%9B%E7%A8%8B">进程</a></li><li><a href="#%E7%BA%BF%E7%A8%8B">线程</a></li></ul></li><li><a href="#%E5%87%A0%E6%A0%B8%E5%87%A0%E7%BA%BF%E7%A8%8B">几核几线程</a></li><li><a href="#%E5%B9%B6%E8%A1%8C%E4%B8%8E%E5%B9%B6%E5%8F%91">并行与并发</a></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="引子">引子</h2><ul><li>谈操作系统会了解到<code>进程与线程</code></li><li>谈 CPU 会听到<code>几核几线程</code></li><li>谈 CPU 调度会存疑<code>并行与并发</code></li></ul><hr><h2 id="进程与线程">进程与线程</h2><ul><li>简单层级关系: <code>应用程序-&gt;一至多个进程-&gt;一至多个线程</code></li></ul><blockquote><p>线程是调度的基本单位，而进程则是资源拥有的基本单位。</p></blockquote><h3 id="进程">进程</h3><img src="https://www.helloimg.com/images/2022/02/27/GVsaG1.png" alt="20210305222645" /><hr><ul><li><p>在前台显示的(有图形窗口的)程序,叫做<code>&quot;应用&quot;</code></p><ul><li>比如 IDEA,酷狗,Edge,QQ 这些都是应用.</li><li>同一个程序,打开多个窗口,其产生的进程也会被归到一个应用下<ul><li>比如打开两个 VScode 窗口,其产生的新进程也会列在 VScode 栏下,并不会出现两个 VScode 栏</li><li>另外,新建窗口不一定会产生新进程(比如打开两个 IDEA 窗口,IDEA 栏下的进程数没变)</li></ul></li><li>关闭窗口后,应用要么被全然关闭,要么转入后台进程<ul><li>就比如 QQ 可以选择整个关掉或者后台挂着,后台挂着时 QQ 不会在<code>&quot;应用&quot;</code>列表出现,会被归到后台进程</li></ul></li></ul><hr></li><li><p>每个应用会有一个至多个进程</p><ul><li>至少有一个<code>&quot;应用&quot;</code>进程和若干<code>&quot;后台进程&quot;</code>.</li><li>比如 IDEA 下面的一排,六个进程</li><li>一个进程 = <code>.exe</code>之类的可执行文件 + 运行时数据<ul><li>也就是说同一个程序运行在不同数据环境下会产生不同进程(比如 IDEA 下的两个 TabNine 进程)</li></ul></li></ul><hr></li><li><p>不同进程之间数据隔离</p><ul><li>也就是说一个进程挂掉只影响这个进程,对其他进程无影响</li><li>比如浏览器,<code>一个页面就是一个进程</code>(如果两个页面相同会共享同一进程),脚本插件另行计算,一个页面崩溃一般只影响这个页面.</li></ul><hr></li><li><p>后台进程</p><ul><li>现在我们可以理解没有界面的程序运行时肯定会被归到<code>后台进程</code><ul><li>比如 <code>aria2c.exe</code>,没有界面,只可能出现在后台进程.</li></ul></li><li>但是,有些程序会<code>两面吃</code>,比如 vscode 运行时,<code>&quot;应用&quot;</code>栏有它,<code>后台进程</code>栏也有它!<ul><li>&quot;应用&quot;栏会归并对当前程序窗口有影响的进程,没影响的叫做<code>&quot;守护进程&quot;</code></li><li>也就是说这些后台进程有他们的作用,但是这作用并不依赖于程序运行(比如说发光发热,对程序没影响,但这个进程有它存在的意义),它们就被归到<code>后台进程</code>去了.</li></ul></li></ul></li></ul><hr><h3 id="线程">线程</h3><ul><li><p>轮到线程了:</p><img src="https://www.helloimg.com/images/2022/02/27/GVs14K.png" alt="20210305231739" /></li><li><p>这个比较简单了,线程是进程内部的,如上图两个 aria2c 进程中,分别有一个和三个线程</p></li><li><p>一个进程至少一个线程.</p><ul><li><p>不同线程之间共享同一个进程内的资源.</p></li><li><p>一个线程崩溃会牵连所有,整个进程会崩溃.</p></li></ul><hr></li><li><p>多线程主要为了<code>提升性能</code></p><ul><li><p>比如一个进程只有一个线程,那它只能同时靠一个 CPU 逻辑处理器处理</p></li><li><p>如果是多线程,比如 9 个线程,那么在 8 个逻辑处理器的 CPU 上,这个进程可以占有 8 个逻辑处理器的算力,提升运行速度</p></li></ul></li><li><p>如果线程数大于 CPU 逻辑处理器数,其他的线程排队等待.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="几核几线程">几核几线程</h2><img src="https://www.helloimg.com/images/2022/02/27/GVsFDT.png" alt="20210305210405" /><ul><li><p>如上图,一个插槽对应一块结结实实的 CPU</p><ul><li><p>这块 CPU 里面被划分出四个隔离的核心 -&gt; <code>四核</code></p></li><li><p>每个核心,又可以分为两个逻辑处理器,一个逻辑处理器只能同时处理一个任务(线程) -&gt; <code>八线程</code></p></li><li><p>上面八个线形图就是每个逻辑处理器的使用率</p></li></ul><hr></li><li><p>运行速度标的是每个核心(core)而非逻辑处理器(processor)的速度</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="并行与并发">并行与并发</h2><ul><li><p>实际上,网上对这两个词义一定程度上在混用~</p><img src="https://www.helloimg.com/images/2022/02/27/GVs30b.png" alt="20210306000528" /></li><li><p>有个词叫<code>&quot;并行不悖&quot;</code>,记住这个就不会弄混了.</p></li><li><p><code>多进程并发,多线程并行.</code></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-13">借物表</h2><blockquote><p><a href="https://mp.weixin.qq.com/s?__biz=Mzk0NzE4NTk4Ng==&amp;mid=2247486625&amp;idx=1&amp;sn=f35d340727b0e8e23f82ff7c5182c893&amp;chksm=c37bfc8cf40c759a084effb4c5b253ad50ad0be02b8b8dea073fa333ca6adefce6ef8cb6db9f&amp;mpshare=1&amp;scene=23&amp;srcid=0305mrfN5sGJ1jI9aPxUFqjU&amp;sharer_sharetime=1614936389002&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd">进程和线程基础知识全家桶，30 张图一套带走</a></p></blockquote><blockquote><p><a href="https://blog.csdn.net/cherrycheng_/article/details/51384657">基础知识：线程，进程。多进程，多线程。并发，并行的区别</a></p></blockquote><blockquote><p><a href="https://zhuanlan.zhihu.com/p/86855590">cpu 核心数与线程数</a></p></blockquote><blockquote><p><a href="https://blog.51cto.com/14462329/2427415">为什么 Chrome 在任务管理器里有 4 个进程？</a></p></blockquote><blockquote><p><a href="https://blog.csdn.net/a3192048/article/details/82085422?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_baidulandingword-1&amp;spm=1001.2101.3001.4242">程序，进程，线程的区别和联系</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 多线程 </tag>
            
            <tag> 操作系统 </tag>
            
            <tag> 进程 </tag>
            
            <tag> cpu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🚀进修MySQL~(壹)</title>
      <link href="/post/Java/SQL/1/"/>
      <url>/post/Java/SQL/1/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-08-17 17:27:53 * @FilePath: \Blog-private\source\_posts\Java\SQL\1.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%8F%82%E8%80%83">参考</a></li><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE">安装&amp;配置</a><ul><li><a href="#%E5%AE%89%E8%A3%85">安装</a></li><li><a href="#%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81">设置密码</a></li><li><a href="#%E9%85%8D%E7%BD%AE">配置</a></li></ul></li><li><a href="#%E8%BF%9E%E6%8E%A5-mysql">连接 MySQL</a><ul><li><a href="#vscode">VScode</a></li><li><a href="#sqlyog">SQLyog</a></li><li><a href="#dbeaver">DBeaver</a></li><li><a href="#%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C">常用操作</a></li></ul></li><li><a href="#ddl-%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89">DDL-数据定义</a><ul><li><a href="#%E5%88%97%E7%B1%BB%E5%9E%8B">列类型</a><ul><li><a href="#%E6%95%B0%E5%80%BC">数值</a></li><li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2">字符串</a></li><li><a href="#%E6%97%A5%E6%9C%9F">日期</a></li><li><a href="#null-%E5%80%BC">NULL 值</a></li></ul></li><li><a href="#%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7">字段属性</a><ul><li><a href="#%E9%98%BF%E9%87%8C%E8%A7%84%E8%8C%83">阿里规范</a></li><li><a href="#%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83">命名规范</a></li></ul></li><li><a href="#%E6%95%B0%E6%8D%AE%E8%A1%A8">数据表</a><ul><li><a href="#%E8%A1%A8%E7%B1%BB%E5%9E%8B">表类型</a></li><li><a href="#%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE">存放位置</a></li><li><a href="#%E7%BC%96%E7%A0%81">编码</a></li><li><a href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E8%A1%A8">操作数据表</a></li></ul></li><li><a href="#%E6%96%B0%E5%BB%BA%E8%A1%A8-%E4%BE%8B%E5%AD%90">新建表-例子</a></li></ul></li><li><a href="#dml-%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C">DML-数据操作</a><ul><li><a href="#%E5%A4%96%E9%94%AE">外键</a></li><li><a href="#%E6%B7%BB%E5%8A%A0-insert">添加 INSERT</a></li><li><a href="#%E4%BF%AE%E6%94%B9-update">修改 UPDATE</a></li><li><a href="#%E5%88%A0%E9%99%A4-deletetruncate">删除 DELETE/TRUNCATE</a></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-19">借物表</h2><blockquote><p><a href="https://csp1999.blog.csdn.net/article/details/109526825?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-6.control&amp;dist_request_id=&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-6.control">狂神说 MySQL 学习笔记</a></p></blockquote><h2 id="简介-8">简介</h2><ul><li><p><code>DB</code> 数据库 ( DataBase )</p><ul><li><p>关系型数据库 ( SQL ),比如 MySQL , Oracle , SQL Server , SQLite</p></li><li><p>非关系型数据库 ( NOSQL ),比如 Redis , MongoDB</p></li></ul><blockquote><p><a href="https://hellogithub.com/report/db-engines/">数据库排行榜</a></p></blockquote></li><li><p><code>DBA</code> 数据库管理员（Database Administrator)</p></li><li><p><code>DBMS</code> 数据库管理系统 ( DataBase Management System )</p></li><li><p>操作分类,对应下文的大标题</p><img src="https://www.helloimg.com/images/2022/02/27/GVmYDR.png" alt="20210305104453" /></li></ul><hr><h2 id="安装-配置-2">安装&amp;配置</h2><h3 id="安装-3">安装</h3><ul><li><p>使用 scoop 安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install mysql</span><br></pre></td></tr></table></figure></li><li><p>然后注册系统服务</p><ul><li>(这条信息在安装后会提示,需要<code>在管理员模式</code>的命令行下执行)</li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --<span class="keyword">install</span> MySQL --defaults-<span class="keyword">file</span>=<span class="string">&quot;D:\Game\Scoop\apps\mysql\current\my.ini&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>然后<code>重启电脑</code>,MySQL 服务会自己跑起来.</p></li></ul><hr><h3 id="设置密码-2">设置密码</h3><ul><li><p>(也可以不设置密码,跳过.)</p></li><li><p>在 <code>MySQL/bin/</code>下打开终端</p></li><li><p>进入 MySQL 管理</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql –u root –<span class="selector-tag">p</span></span><br></pre></td></tr></table></figure></li><li><p>更新密码</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> mysql.<span class="keyword">user</span> <span class="keyword">set</span> authentication_string=<span class="keyword">password</span>(<span class="string">&#x27;2333&#x27;</span>) <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">&#x27;root&#x27;</span><span class="keyword">and</span> Host = <span class="string">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p>刷新权限</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges<span class="comment">;</span></span><br></pre></td></tr></table></figure></li><li><p>重启 MySQL 服务</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">net</span> stop mysql</span><br><span class="line"><span class="built_in">net</span> <span class="built_in">start</span> mysql</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="配置-4">配置</h3><blockquote><p>找到 <code>MySQL/my.ini</code> ,这是 MySQL 配置文件</p></blockquote><blockquote><p><a href="https://www.cnblogs.com/ray-xujianguo/p/3322455.html">MySQL 配置文件-my.ini</a></p></blockquote><ul><li><p>我的配置</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#[client]和[mysql]都是客户端,[mysqld]是服务端</span></span><br><span class="line"></span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">datadir</span>=D:/Game/Scoop/persist/mysql/data</span><br><span class="line"><span class="attr">character-set-server</span>=utf8</span><br><span class="line"><span class="comment">#port=3306</span></span><br><span class="line"></span><br><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="attr">user</span>=root</span><br><span class="line"><span class="comment">#port=3306</span></span><br><span class="line"></span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br></pre></td></tr></table></figure></li></ul><blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p></blockquote><h2 id="连接-MySQL">连接 MySQL</h2><h3 id="VScode-3">VScode</h3><ul><li><p>VScode 连接,需要安装 SQL 扩展(随便选一个)</p></li><li><p>安装插件后只需要填写需要的信息,就可以连接上了.</p><img src="https://www.helloimg.com/images/2022/02/27/GVm6hX.png" alt="20210304094732" /></li></ul><hr><h3 id="SQLyog">SQLyog</h3><ul><li><p>跟上面一样</p><img src="https://www.helloimg.com/images/2022/02/27/GVmVHn.png" alt="20210304233850" /></li></ul><hr><h3 id="DBeaver">DBeaver</h3><ul><li><p>个人在后续学习中发现的数据库管理工具,比我用过的(包括 MYSQL workbench,IDEA,VScode,SQLYog) 都要好用,优点:</p><ul><li><p>社区版免费,没广告 (SQLYog 略带广告)</p></li><li><p>中文界面,很友好,操作手感好</p></li><li><p>有方便的 ER 图工具,这个<code>非常非常非常赞!!!</code></p></li><li><p>…不再赘述,建议用这个,如下图:</p></li></ul></li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVt43h.png" alt="20210405144227" /><hr><h3 id="常用操作">常用操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> password<span class="operator">=</span>password(<span class="string">&#x27;123456&#x27;</span>)<span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>; <span class="comment">--修改密码</span></span><br><span class="line">flush privileges; <span class="comment">--刷新数据库权限</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> databases; <span class="comment">--显示所有数据库</span></span><br><span class="line">use dbname; <span class="comment">--打开某个数据库</span></span><br><span class="line"><span class="keyword">create</span> database [if <span class="keyword">not</span> <span class="keyword">exists</span>] 数据库名; <span class="comment">--创建数据库</span></span><br><span class="line"><span class="keyword">drop</span> database [if <span class="keyword">exists</span>] 数据库名; <span class="comment">--删除数据库</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> tables; <span class="comment">--显示数据库 mysql 中所有的表</span></span><br><span class="line"><span class="keyword">desc</span> <span class="keyword">user</span>; <span class="comment">--显示表user 表的信息</span></span><br><span class="line"><span class="keyword">create</span> database name; <span class="comment">--创建数据库</span></span><br><span class="line">use databasename; <span class="comment">--选择数据库</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 单行注释</span></span><br><span class="line"><span class="comment">/* 多行注释 */</span></span><br></pre></td></tr></table></figure><ul><li><p>使用 SQLyog</p><img src="https://www.helloimg.com/images/2022/02/27/GVmj4A.png" alt="20210305111225" /><img src="https://www.helloimg.com/images/2022/02/27/GVmhCz.png" alt="20210305111244" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="DDL-数据定义">DDL-数据定义</h2><h3 id="列类型">列类型</h3><ul><li>标红的为常用的.</li></ul><h4 id="数值">数值</h4><img src="https://www.helloimg.com/images/2022/02/27/GVmu05.png" alt="20210305115939" /><h4 id="字符串">字符串</h4><img src="https://www.helloimg.com/images/2022/02/27/GVmyh0.png" alt="20210305115957" /><h4 id="日期">日期</h4><img src="https://www.helloimg.com/images/2022/02/27/GVsoHr.png" alt="20210305120011" /><h4 id="NULL-值">NULL 值</h4><ul><li>不要用 NULL 进行算术运算 , 结果仍为 NULL</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="字段属性">字段属性</h3><img src="https://www.helloimg.com/images/2022/02/27/GVsGgc.png" alt="20210305155250" /><ul><li><p>UnSigned</p><ul><li>无符号的</li><li>声明该数据列不允许负数 .</li></ul></li><li><p>ZEROFILL</p><ul><li>0 填充的</li><li>不足位数的用 0 来填充 , 如 int(3),5 则为 005</li></ul></li><li><p>Auto_InCrement</p><ul><li>自动增长的 , 每添加一条数据 , 自动在上一个记录数上加 1(默认)</li><li>通常用于设置主键 , 且为整数类型</li><li>可定义起始值和步长,当前表设置步长(AUTO_INCREMENT=100) : 只影响当前表</li><li>SET @@auto_increment_increment=5 ; 影响所有使用自增的表(全局)</li></ul></li><li><p>NOT NULL</p><ul><li>默认为 NULL , 即没有插入该列的数值</li><li>如果设置为 NOT NULL , 则该列必须有值</li></ul></li><li><p>DEFAULT</p><ul><li>默认的,用于设置默认值</li><li>例如,性别字段,默认为&quot;男&quot; , 否则为 “女” ; 若无指定该列的值 , 则默认值为&quot;男&quot;的值</li></ul></li></ul><hr><h4 id="阿里规范">阿里规范</h4><ul><li><p>每个表必须有的五个字段属性</p><ul><li>id 主键</li><li>version 乐观锁</li><li>is_delete 伪删除</li><li>gmt_create 创建时间</li><li>gmt_update 修改时间</li></ul></li></ul><hr><h4 id="命名规范">命名规范</h4><ul><li><p>为什么使用<code>下划线命名法</code>而非<code>驼峰命名法</code>?</p><p>早期的 Oracle 会把所有字段属性名变为大写: lastName -&gt; LASTNAME</p><p>这样就看不出来了,所以用下划线命名法: last_name -&gt; LAST_NAME</p><p>这个惯性一直延续至今,一些数据库/框架也发展处相应的使用规则,就成了一种规范</p></li></ul><hr><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="数据表">数据表</h3><h4 id="表类型">表类型</h4><blockquote><p><a href="https://www.cnblogs.com/EasonJim/p/7741164.html">MySQL 常用的七种表类型（转）</a></p></blockquote><ul><li><p>有十多种类型了,但常用的就两种:<code>MyISAM</code> 与 <code>InnoDB</code>,对比:</p><table><thead><tr><th style="text-align:center"></th><th>MyISAM</th><th>InnoDB</th></tr></thead><tbody><tr><td style="text-align:center">事务处理</td><td>不支持</td><td>支持</td></tr><tr><td style="text-align:center">数据行锁定</td><td>不支持</td><td>支持</td></tr><tr><td style="text-align:center">外键约束</td><td>不支持</td><td>支持</td></tr><tr><td style="text-align:center">全文索引</td><td>支持</td><td>不支持</td></tr><tr><td style="text-align:center">空间占用</td><td>较小</td><td>较大(约两倍)</td></tr></tbody></table><hr></li><li><p>适用场景:</p><ul><li>MyISAM : 节约空间及相应速度</li><li>InnoDB : 安全性 , 事务处理及多用户操作数据表</li></ul></li></ul><hr><h4 id="存放位置">存放位置</h4><blockquote><p>Mysql 安装目录/data/对应表名/</p></blockquote><hr><h4 id="编码">编码</h4><ul><li><p>默认是 Latin1 编码,不支持中文</p><ul><li>可以在 MySQL 配置文件中修改默认编码</li></ul></li><li><p>也可以在创建表时指定编码为 <code>utf8</code></p></li></ul><hr><h4 id="操作数据表">操作数据表</h4><ul><li><p>修改表名</p><ul><li>ALTER TABLE 旧表名 RENAME AS 新表名</li></ul></li><li><p>删除数据表</p><ul><li>DROP TABLE [IF EXISTS] 表名</li></ul><hr></li><li><p>添加字段</p><ul><li>ALTER TABLE 表名 ADD 字段名 列属性[属性值]</li></ul></li><li><p>修改字段</p><ul><li><p>ALTER TABLE 表名 MODIFY 字段名 列类型[属性值]</p></li><li><p>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 列属性[属性值]</p></li></ul></li><li><p>删除字段</p><ul><li>ALTER TABLE 表名 DROP 字段名</li></ul></li></ul><hr><h3 id="新建表-例子">新建表-例子</h3><ul><li><p>板栗</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `student`(</span><br><span class="line">  <span class="comment">-- CREATE TABLE [IF NOT EXISTS] `表名`(</span></span><br><span class="line">  id <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">primary</span> key AUTO_INCREMENT comment <span class="string">&#x27;primary key&#x27;</span>,</span><br><span class="line">  create_time DATETIME COMMENT <span class="string">&#x27;create time&#x27;</span>,</span><br><span class="line">  update_time DATETIME COMMENT <span class="string">&#x27;update time&#x27;</span>,</span><br><span class="line">  <span class="comment">-- `字段名` 列类型 [字段属性] [索引] [注释],</span></span><br><span class="line">  <span class="comment">-- `字段名` 列类型 [字段属性] [索引] [注释],</span></span><br><span class="line">  <span class="comment">-- `字段名` 列类型 [字段属性] [索引] [注释],</span></span><br><span class="line">) <span class="keyword">default</span> charset utf8 comment <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="comment">-- ) [表类型] [字符集] [注释];</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>举例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  创建一个school数据库-&gt;创建学生表(列,字段)</span></span><br><span class="line"><span class="comment">  学号int 登录密码varchar(20) 姓名,性别varchar(2),出生日期(datatime),家庭住址,email</span></span><br><span class="line"><span class="comment">  创建表之前 , 一定要先选择数据库</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">USE `school`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `stu_data` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;匿名&#x27;</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">  `pwd` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;123456&#x27;</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `sex` <span class="type">varchar</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;男&#x27;</span> COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">  `birthday` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;生日&#x27;</span>,</span><br><span class="line">  `address` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;地址&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="DML-数据操作">DML-数据操作</h2><h3 id="外键">外键</h3><ul><li><p>一个表内的某<code>列</code>引用另外一个表中的一<code>列</code>,被引用的表是<code>主表</code>,引用的表是<code>从表</code>,从表通过建立列的索引来引用另一个表的索引,这个关系叫做外键.</p><ul><li><p>主表中被引用的列必须有索引(比如 PRIMARY,KEY 类型)<br><img src="https://www.helloimg.com/images/2022/02/27/GVsXjo.png" alt="20210307123305" /></p></li><li><p>在外键存在的情况下,主表无法被删除,主从表的关联索引也无法被删除,但可以修改(类型).<br><img src="https://www.helloimg.com/images/2022/02/27/GVsx9S.png" alt="20210307124315" /></p></li></ul><hr></li><li><p>建立方法</p><ol><li>创建两张表</li><li>主从表各创建一个索引(PRIMARY 或者 KEY 都可以)</li><li>把从表的索引约束到主表的索引上</li><li>外键建立成功!</li></ol><hr></li><li><p>代码形式</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 年级表 (id,年级名称)</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `grade` (</span><br><span class="line">  `gradeid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;年级ID&#x27;</span>,</span><br><span class="line">  `gradename` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年级名称&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`gradeid`)</span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 学生信息表 (学号,姓名,性别,年级,手机,地址,出生日期,邮箱,身份证号)</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `student` (</span><br><span class="line">  `studentid` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">  `studentname` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;匿名&#x27;</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">  `sex` TINYINT(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">  `gradeid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年级&#x27;</span>,</span><br><span class="line">  `phoneNum` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;手机&#x27;</span>,</span><br><span class="line">  `address` <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;地址&#x27;</span>,</span><br><span class="line">  `borndate` DATETIME <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;生日&#x27;</span>,</span><br><span class="line">  `email` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">  `idCard` <span class="type">VARCHAR</span>(<span class="number">18</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;身份证号&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`studentid`),</span><br><span class="line">  <span class="comment">-- 创 建 外 键 的 方 式 一: 创 建 子 表 同 时 创 建 外 键</span></span><br><span class="line">  KEY `FK_gradeid` (`gradeid`), <span class="comment">-- 创建一个KEY类型的索引</span></span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `FK_gradeid` <span class="keyword">FOREIGN</span> KEY (`gradeid`) <span class="keyword">REFERENCES</span> `grade` (`gradeid`) <span class="comment">-- 把索引约束到主表索引</span></span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建外键方式二 : 创建子表完毕后,修改子表添加外键</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span></span><br><span class="line">  `student`</span><br><span class="line"><span class="keyword">ADD</span></span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `FK_gradeid` <span class="keyword">FOREIGN</span> KEY (`gradeid`) <span class="keyword">REFERENCES</span> `grade` (`gradeid`);</span><br></pre></td></tr></table></figure></li><li><p>以上是表的外键,不建议使用数据库级别的外键</p><ul><li><p>以后如需引用多表数据,常用程序实现</p></li><li><p>阿里规范:<code>不能使用外键和级联</code>,在 delete 或 update 时需要考虑外键因素,增加负担</p></li></ul></li></ul><hr><h3 id="添加-INSERT">添加 INSERT</h3><blockquote><p>语法 : INSERT INTO 表名[(字段 1,字段 2,字段 3,…)] VALUES (‘值 1’,‘值 2’,‘值 3’)</p></blockquote><ul><li><p>字段与值位置对应</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span></span><br><span class="line">  grade(gradename, gradeid)</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">  (<span class="string">&#x27;大一&#x27;</span>, <span class="string">&#x27;2&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>省略字段的话,值得顺序必须与数据表中的字段顺序一致</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span></span><br><span class="line">  grade</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">  (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;大二&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>一次插入多条数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span></span><br><span class="line">  grade(gradename)</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">  (<span class="string">&#x27;大三&#x27;</span>),(<span class="string">&#x27;大四&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="修改-UPDATE">修改 UPDATE</h3><blockquote><p>UPDATE <code>表名</code> SET <code>列名 1</code>=value <code>列名 2</code>=value [WHERE 条件];</p></blockquote><ul><li><p>value 为修改后的数据 , 可以为变量 , 具体值 , 表达式或者嵌套的 SELECT 结果</p></li><li><p>不指定 where 的话,会修改表内所有数据</p></li><li><p>注意 value 用单引号’引起来,不是飘`</p></li><li><p>例子(随机生成 20 条数据后多条件筛选)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span></span><br><span class="line">  `grade`</span><br><span class="line"><span class="keyword">SET</span></span><br><span class="line">  `gradename` <span class="operator">=</span> <span class="string">&#x27;大一&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  gradeid <span class="operator">&gt;</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">AND</span> gradeid <span class="operator">&lt;</span> <span class="number">10</span></span><br><span class="line">  <span class="keyword">OR</span> gradeid <span class="operator">=</span> <span class="number">15</span>;</span><br></pre></td></tr></table></figure></li><li><p>结果(json)</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lonrd&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;大一&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;大一&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;4&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;大一&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;大一&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;大一&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;7&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;大一&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;大一&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;9&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;大一&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;10&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fmtdq&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;11&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tvyoh&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;12&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ovhvu&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;13&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hipnh&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;14&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;kjdxr&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;15&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;大一&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;16&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xvlbp&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;17&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bgphq&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;18&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jcpmc&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;19&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gjuof&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gradeid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;20&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;owxri&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="删除-DELETE-TRUNCATE">删除 DELETE/TRUNCATE</h3><blockquote><p>DELETE FROM 表名 [WHERE condition];</p></blockquote><ul><li><p>如不指定 where,会删除表中所有数据</p></li><li><p>例子</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span></span><br><span class="line">  grade</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  gradeid <span class="operator">=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure></li></ul><hr><blockquote><p>TRUNCATE [TABLE] 表名;</p></blockquote><ul><li><p>清空表,表的结构和索引不变</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> `student`</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>二者都能删除数据,不影响表结构</p><ul><li>DELETE 删除数据后不影响<code>自动增量</code>,会记录日志.</li><li>TRUNCATE 清空表之后会把<code>自动增量</code>归零,不会记录日志.</li></ul><hr></li><li><p>使用 DELETE 清空不同引擎的数据库表数据.重启数据库服务后</p><ul><li><p>InnoDB : 自增列从初始值重新开始 (因为是存储在内存中,断电即失)</p></li><li><p>MyISAM : 自增列依然从上一个自增数据基础上开始 (存在文件中,不会丢失)</p></li></ul></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😁IDE选用指北.</title>
      <link href="/post/others/IDEs/"/>
      <url>/post/others/IDEs/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-03-25 11:00:54 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\others\IDEs.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%89%8D%E8%A8%80">前言</a></li><li><a href="#%E5%89%8D%E7%AB%AF">前端</a><ul><li><a href="#%E7%BD%91%E9%A1%B5%E6%9C%8D%E5%8A%A1%E5%99%A8">网页服务器</a></li><li><a href="#vscode">VScode</a></li><li><a href="#idea">IDEA</a></li></ul></li><li><a href="#markdown">Markdown</a></li><li><a href="#tomcat">Tomcat</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="前言-2">前言</h2><ul><li><p>开互联网前端课程了,对于工具的选用确实有些杂乱,五花八门</p></li><li><p>下面简单展示两款 IDE 吧–&gt; <code>VScode</code> 与 <code>IDEA</code></p><ul><li><p>VScode 全称 <code>Visual Studio Code</code>,是开源免费的,有编程界最丰富的插件市场</p></li><li><p>IDEA 全称 <code>IntelliJ IDEA</code>,有开源免费版,也有收费版(对大型项目有更好的支持),目前口评最好的 Java 开发工具.</p></li></ul></li></ul><hr><ul><li><p>工具跟随需求,首先我们先探讨下具体需要它做什么?</p><ul><li><p>方便编写前端(HTML,CSS,JavaScript,stylus,less),框架(React,Vue,Angular)等等</p></li><li><p>能架设起网页服务器(localhost:xxxx 可以访问)</p></li><li><p>最好具备一定的插件扩展性.</p></li><li><p>支持读写<code>.md</code>格式的 markdown 文件.</p></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="前端">前端</h2><ul><li>首先,编写方面没啥可说的,VScode 在前端/框架方面支持都是数一数二的,IDEA 的话,拿来写前端其实也相当出色.</li></ul><h3 id="网页服务器">网页服务器</h3><ul><li><p>教学老师用的是 MyEclipse+tomcat 架设的网页服务器,搭建时需要搞 MyEclipse,<s>破解</s>,配置 Tomcat(而且 Tomcat 需要 JDK)</p><ul><li>别提多头疼了!</li></ul><hr></li><li><p>我写这个文章就是为了解决这个问题</p><ul><li><p>VScode 很多优秀扩展开箱即用网页服务器!</p></li><li><p>IDEA 原生支持网页服务器!</p></li></ul></li><li><p>下面介绍怎么用:</p><ul><li>可供参考的测试 html 文件:</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#divMove</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ff0000</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--要求：获取鼠标当前的一个坐标--&gt;</span></span><br><span class="line">    Mouse <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;mouseMove&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;divMove&quot;</span>&gt;</span>在这里移动鼠标试试<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       * ! 当网页元素加载完毕之后，响应事件</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       * 原型: $(document).ready(function()&#123;&#125;);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       * 简化后的: $(function ()&#123;&#125;);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       */</span></span></span><br><span class="line"><span class="language-javascript">      $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#divMove&quot;</span>).<span class="title function_">mousemove</span>(<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          $(<span class="string">&quot;#mouseMove&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;X: &quot;</span> + e.<span class="property">pageX</span> + <span class="string">&quot;Y: &quot;</span> + e.<span class="property">pageY</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="VScode">VScode</h3><ul><li><p>安装,汉化,之后搜下面的插件,两个都非常不错,个人更推荐第二个</p><img src="https://www.helloimg.com/images/2022/02/27/GVmvWC.png" alt="20210302223844" /><hr><img src="https://www.helloimg.com/images/2022/02/27/GVmNPt.png" alt="20210302224003" /></li><li><p>然后随便打开一个.html 文件,按照文档使用就好了</p><ul><li>比如我用的第二款,右键菜单就可以直接打开网页服务器</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVmQnu.png" alt="20210302224353" /></li><li><p>效果如下</p><img src="https://www.helloimg.com/images/2022/02/27/GVmp7v.png" alt="20210302224509" /><img src="https://www.helloimg.com/images/2022/02/27/GVmDtY.png" alt="20210302224806" /></li></ul><hr><h3 id="IDEA">IDEA</h3><ul><li><p>直接打开一个 HTML 文件,右上角会出现开启网页服务器的小标志</p><ul><li>有什么浏览器点什么就好</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVmggP.png" alt="20210302225318" /></li><li><p>效果</p><img src="https://www.helloimg.com/images/2022/02/27/GVmIw9.png" alt="20210302225450" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Markdown">Markdown</h2><ul><li><p>废话不多说,先展示下我写博客时的样子</p><img src="https://www.helloimg.com/images/2022/02/27/GVmwUQ.png" alt="20210302220625" /><ul><li>VScode 与 IDEA 原生支持读写 markdown 文件,而且支持都很不错</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVm7CE.png" alt="20210302221020" /><hr></li><li><p>个人使用 VScode 写比较多,因为有很多提升效率的扩展</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Tomcat">Tomcat</h2><blockquote><p>此处抽离到另一篇文章了: <a href="../../tools/Tomcat">🐱‍🏍Maven+Tomcat 开发 webapp.</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> vscode </tag>
            
            <tag> idea </tag>
            
            <tag> html </tag>
            
            <tag> css </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🟢&lt;&lt;代码之外的生存指南&gt;&gt;读记.</title>
      <link href="/post/life/outside-of-code/"/>
      <url>/post/life/outside-of-code/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-12-31 22:59:28 * @FilePath: \Blog-private\source\_posts\life\outside-of-code.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%89%8D%E8%A8%80">前言</a></li><li><a href="#%E8%81%8C%E4%B8%9A">职业</a><ul><li><a href="#%E4%B8%8D%E8%A6%81%E5%81%9A%E4%BB%96%E4%BA%BA%E9%83%BD%E5%9C%A8%E5%81%9A%E7%9A%84%E4%BA%8B">不要做他人都在做的事</a></li><li><a href="#%E4%BD%A0%E7%9A%84%E7%9B%AE%E6%A0%87%E6%98%AF%E4%BB%80%E4%B9%88">你的目标是什么</a></li><li><a href="#%E4%BA%BA%E9%99%85%E4%BA%A4%E5%BE%80%E8%83%BD%E5%8A%9B%E8%BF%9C%E6%AF%94%E4%BD%A0%E6%83%B3%E8%B1%A1%E7%9A%84%E9%87%8D%E8%A6%81">人际交往能力：远比你想象的重要</a></li><li><a href="#%E7%A0%B4%E8%A7%A3%E9%9D%A2%E8%AF%95%E4%B9%8B%E9%81%93">破解面试之道</a></li><li><a href="#%E5%B0%B1%E4%B8%9A%E9%80%89%E6%8B%A9%E5%88%97%E5%87%BA%E4%BD%A0%E7%9A%84%E9%80%89%E6%8B%A9">就业选择：列出你的选择</a></li><li><a href="#%E4%BD%A0%E6%98%AF%E5%93%AA%E7%B1%BB%E7%A8%8B%E5%BA%8F%E5%91%98">你是哪类程序员</a></li><li><a href="#%E5%85%AC%E5%8F%B8%E4%B8%8E%E5%85%AC%E5%8F%B8%E6%98%AF%E4%B8%8D%E4%B8%80%E6%A0%B7%E7%9A%84">公司与公司是不一样的</a></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="前言">前言</h2><ul><li>网上很火的一本书,大佬们也很追捧,尝试读了一下,感觉很棒.</li></ul><hr><blockquote><p>当我说到“优秀的软件开发人员”时，我并不是说要精于编码之道，善于解决缺陷，通晓单元测试。相反，我所说的“优秀 的软件开发人员”，是那些能够把控自己的职业生涯、达成目标、享受生活的人。</p></blockquote><h2 id="职业">职业</h2><h3 id="不要做他人都在做的事">不要做他人都在做的事</h3><img src="https://www.helloimg.com/images/2022/02/27/GVmTBK.png" alt="20210228231643" /><blockquote><ul><li>不要被愚弄了，当你为了谋生一头扎进写代码的世界时，其实<code>你和中世纪小镇上开铁匠铺的铁匠没什么差别。</code></li><li>首先，要有一个产品或服务。不能 提供东西的企业是没办法赚钱的，因为没有东西可卖。你有什么可以卖？你的产品或服务是什么？</li></ul></blockquote><p>通常 软件开发人员售卖的就是他们把一个想法变成一个数字化的现实产品的能力。</p><p>作为一名软件开发人员，你提供的服务具备有形价值，你要传达的不仅是这款软件 的价值是什么，还有它与别的成千上万款软件开发人员提供的服务有何不同。</p><p>你需要认识到仅有 服务或产品是不够的。想赚到钱，你就必须能让潜在的客户了解该产品或服务。</p><img src="https://www.helloimg.com/images/2022/02/27/GVmKqg.png" alt="20210304114711" /><img src="https://www.helloimg.com/images/2022/02/27/GVmrP6.png" alt="20210304115641" /><hr><h3 id="你的目标是什么">你的目标是什么</h3><p>大多数人处于被安排,没有目的的自然状态</p><hr><ul><li><p>一些意识到这个问题的又会存在一些顾此失彼,殚精竭虑的状态:</p><blockquote><p>如果这条路错了我该怎么办呢？ 如果我不喜欢自己选的路又该怎么办呢？</p></blockquote></li><li><p>之前在 B 站评论区挖掘到的,感觉有所触动:</p><blockquote><p>不要光听别人说做什么好，做什么有前途，你现在做什么没前途。有多少人敢做一件事啊</p></blockquote></li></ul><hr><ul><li><p>为了安逸,我们很容易陷入 <code>被安排做事&lt;--&gt;被安排做人</code> 的圈套中,我感觉这与当代国内教育关系很大:</p><ul><li><p>在大学前,甚至即使是大学毕业前,我们一直处于老师,家长的安排之下,在牺牲孩子决策力培养的前提下,拉满学习能力</p></li><li><p>这不是学校,老师或者家长任何一方面的单一问题,是整个社会陷入了这个危机</p></li></ul></li><li><p>关联性的谈一下:</p><ul><li><p>WPS 每日点击调查中,出现了令我非常诧异的一个结果:</p><p>有 52%的人从事专业与所学专业不一致.</p><p>当然,这个数据很有局限性和偏差(WPS 的用户更偏向文管类),不过上万人的数据量挺大的,确确实实能反映一定问题</p></li></ul><blockquote><p>如果你被学校安排得明明白白,那么毕业时也会被社会安排得明明白白. --杨学&quot;安排定律&quot;</p></blockquote><hr></li><li><p>我个人目前也是个大学生,个人认为比起如何好好学习提升成绩,我们更需要首先<code>关注我们自身需求</code></p><ul><li><p>就像上面所说,我们很多人毕业之后,要么转行,要么不得不敷敷衍衍的干着&quot;本职工作&quot;</p></li><li><p>也许,如果大学时意识到这一点,会有所缓解 (不想用&quot;改变&quot;这个词,很虚缈)</p></li><li><p>问问你自己,<code>你需要什么,想要成为谁? </code>这是比盲目努力攀高更值得优先探索的高地.</p></li></ul><hr><p>制定目标非常重要,尤其是需要大目标和小目标结合起来,<code>前者是方向,后者是驱使.</code></p><p>一般大目标比较模糊,但是小目标需要具体一些,平时注意追踪更新自己的小目标,并做一些关键性调整和反思</p></li></ul><hr><ul><li><p>刚好遇到这种 scene:</p><p>一位学长拿了 offer 然后老师给我们提了嘴&quot;感受一下你们学长的风范，好好学习，天天向上&quot;</p><img src="https://www.helloimg.com/images/2022/02/27/GV4YDt.png" alt="20211125205822" /><p>这位老师人很好做的也没什么问题啦,而且那学长也是狠角色自然让人崇拜羡慕</p><p>可是,我们年纪轻轻,奋斗目标设定为进大厂拿高薪,真的好吗? 🤔</p></li></ul><hr><h3 id="人际交往能力：远比你想象的重要">人际交往能力：远比你想象的重要</h3><ul><li><p>我们,臭写代码的,好像比较容易进入一种状态:</p><blockquote><p>别管我，我只想一个人安静地写代码！</p></blockquote><p>实际上在学习上这么干没问题,但是转移到职场上的话,不进行社交,其他员工和老板都会觉得你在无作为,刚刚看到一个例子:</p><p>公众号@公子龙的一个好友,是 C9 级别的技术岗,也是纯走技术性流派的人,结果因为被认为价值不匹配被裁员了.</p><p>在这里写下这么个事件(例子)并不只是作为例证来引以为戒,而是这种隐患可能实实在在的存在于我们身上,所以,尽管可能很烦,还是需要跟同事老板吃吃饭,多沟通一下.</p><hr></li><li><p>另外,从编程方面解释,人际交往能力远比人机交互能力重要:</p><ul><li><p>大多数开发,是多人合作进行的任务,每个开发者只是片面的与机器沟通.</p></li><li><p>我们 coder 同事间,谁不写代码注释还得挨顿骂呢</p></li></ul><hr></li><li><p>如何与别人打交道?</p><blockquote><p>以自己为核心，每个人都希望自己很重要。</p></blockquote><p>这对于自己和他人都适用,把握好核心距离,尽量让别人认为<code>这个人对我很重要</code>,当然,要注意好,表现不是欺骗.</p><p>表现力在人际交往中可以说起到<code>决定性作用</code></p><hr></li><li><p>永远不要批评</p><blockquote><p>“批评” 是一项很少能够达成你期望结果的工具</p></blockquote><p>不出意外的话,这本书的读者,大多是 90/00 后,我们会发现我们经历的教育,大多是打击式教育 (少有通情达理的老师吧…尽管我们都知道这是所谓的为我们好)</p><p>有幸遇到过几位特别和蔼可亲的老师,灌溉了我们暗淡的少年,真的可以说是叫<code>灌溉</code>.</p><p>小学时,被批评我会颤抖哭泣;初中时,我会挺委屈的;高中时,竟是觉得不以为然了;到了大学,被批评就会感觉挺诙谐的 🤣</p><p>喰种上有句话,大意是: <code>任何不符合自己意向的事情发生,都是自己能力不足所致.</code></p><p>不用想这句话有没有道理,回想过去所有让我生气的事,好像大多数确实是能力不达导致的.</p><blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVtO2C.png" alt="20210416125110" /></blockquote><hr></li><li><p>换位思考</p><p>太过以个人为中心的话,就很有容易失去更多身外之物</p><p>个人更倾向以&quot;第三者&quot;身份生活,只要不触及我内心的事物,我会习惯性的用第三者眼光看待 (生活的参与者,灵魂的旁观者)</p><p>可以通过一个潜意识细节判断一个人的&quot;自我&quot;程度: <code>每句话中&quot;我&quot;这个字出现的频率</code> (比如&quot;我…,我…&quot;)</p><p>生活中留意的话,应该可以发现: 那些自我意识低,喜欢关注别人的人,更容易受到别人喜欢 (当然不是指互联网上的&quot;关注&quot;)</p><p>当双方意见有分歧时,我们经常面红耳赤的想要给对方输入自己的观点,而对方也是,这就是死锁,必须得有个人把注意力转移到对方身上,即使是假装,把对方的观点听完,再解释自己的</p><p>其实说来容易,做起来难,更多的情况是: <code>到那个节骨眼上,放不下</code></p><p>这样来看,见人说人话,见鬼说鬼话的能力,还是挺难的</p><blockquote><p>既然逻辑和纯粹的理性无助于说服一个尖声大叫的小孩明白睡觉能让他得到充分的休息，那么，你也不可能依此方法来说服一位备受轻视的同事接受 我做事的方式才是最好的 。<br>据我所知，普天之下解决争吵的灵丹妙药只有一个，那就是避免争吵，像躲避响尾蛇和地震一样地远离争吵。 --人性的弱点</p></blockquote><hr></li><li><p>看这本书之前,我还在认为金钱是社会上最通用的价值</p><blockquote><p>你会发现，当你学会了如何以令人愉悦的方式与他人互动和交往的时候，自己的生活也越来越愉快。通过习得这些技能，你积累了让自己获益终生的财富，它的价值无法用金钱衡量。</p></blockquote><p>还真是,交往能力直接关系到日常心情与生活,贯穿我们一生,而且无法以金钱来衡量.</p></li></ul><hr><h3 id="破解面试之道">破解面试之道</h3><blockquote><p>当许多技术过硬的开发人员都在竞争同一个工作岗位时，决定胜负的最大因素已经不再是技术能力了。</p></blockquote><ul><li><p>如何获得关注</p><blockquote><p>我花了一些时间研究这家公司，找出这个公司有哪些开发人员在写博客。我开始关注为这家公司工作的开发人员的所有博客，并开始在他们的博客文章下留下经过深思熟虑的评论。慢慢地，许多在这家公司供职的开发人员开始认识我了，并通过我给他们博客做出的评论知道了我是谁。他们中的一些人甚至开始读我的博客。</p></blockquote><p>一个很棒的思路,在条件允许的情况下可以试试 (其实国内的大环境都是海投简历,可以得到面试机会的也就几家)</p><p>确实,我们经常会在互联网上看到一些企业员工的内推信息,甚至有些企业直接做一些宣传片来推广企业招揽员工,我们可以通过这种方式来与企业内部进行沟通.</p></li><li><p>注重点:</p><p>我们面试者在面试场景下应该更加注重表现自己的<code>主动性</code></p><p>因为在 JD 上明码标价的技术栈和薪资,来的人水平一般不会差太多,这时主动性就是更能吸引面试官的法宝了.</p><p>无论现在是否有找工作的需求,<code>提前布局,营造技术影响力</code>,不同岗位的技术能力可能不容易解释,而影响力是互通的</p></li></ul><hr><h3 id="就业选择：列出你的选择">就业选择：列出你的选择</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">给自己贴上&quot;程序员&quot;标签对个人而言不是个好习惯.</span><br><span class="line"></span><br><span class="line">&quot;程序员&quot;只是个职业,并非是一个人所拥有的身份.</span><br></pre></td></tr></table></figure><hr><ul><li><p>一些程序员从合同式的劳务雇佣关系走向了<code>独立咨询师</code>或者<code>创业</code>路线</p><ul><li><p>独立开发有好处也有坏处</p><ul><li>好处比如说时薪比较高,相对自由</li><li>坏处比如说负责方面宽了;税务,运营,策划,销售,法律等方面都需要考虑</li></ul><hr></li><li><p>创业的话,风险有多大,收获有多大…不过现在卷得很,大厂垄断严重的情况下很难跑出来黑马了</p><ul><li>创业时,技术和点子往往不算是最重要的,反而是忽悠人的宣传能力和砸钱的能力.</li></ul></li></ul></li></ul><blockquote><p>对大多数软件开发人员而言，特别是在职业生涯的起步阶段，做一名雇员是明智的选择。</p></blockquote><hr><h3 id="你是哪类程序员">你是哪类程序员</h3><p><code>专业化发展是今后的趋势了</code></p><p>2010~2020 之间时,还可能会听说谁谁是全栈开发工程师,并且感觉应该特厉害.</p><p>但是,事到如今,大部分人应该会持有怀疑性的眼光.</p><p>如今技术迭代很快,前端,后端,运维,美工等等岗位;很多技术说不定还没来得及学,就已经过时了…</p><p>从社会需求上看,专才是要比通才更受欢迎 (<code>精通一门语言,要比熟悉三门语言价值高</code>)</p><blockquote><p>专业化的规则是：专业化程度越深，潜在的机会就越少，但获得这些机会的可能性越大。</p></blockquote><hr><h3 id="公司与公司是不一样的">公司与公司是不一样的</h3><blockquote><p>中等规模的公司往往要比大公司还稳定， 因为大公司往往还有大裁员或者周期性重组。如果你喜欢稳定，那你会发现中等规模的公司最适合你。</p></blockquote><ul><li><p>或许中等规模的公司才是我追求的归宿:</p><ol><li><p>我不是很喜欢条条框框</p></li><li><p>之前有幸在一个刚成立的创业公司带过一些时日,每日都得写日报…啊这,<code>自我 PUA</code>,每次写都感觉做了错事似的</p></li></ol><blockquote><p>在大公司工作时，你要遵守这里已有的做事方式。鲁莽和“变节者”在这种企业文化里不受欢迎。</p></blockquote><hr></li><li><p>不怕有人是内鬼,就怕有内鬼是人.</p><blockquote><p>作为软件开发人员的你可以尽量避开政治，但即便如此，<code>其他人的政治权谋也会以某种方式影响到你。</code></p></blockquote></li><li><p>软件开发公司/需要程序员的公司</p><ul><li><p>待遇,工作氛围,技术栈,发展前景…</p></li><li><p>任何角度看都是前者更好一些 (除非后者是国企之类的养老院)</p></li></ul></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 哲学 </tag>
            
            <tag> 生活 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🎶Java网络编程</title>
      <link href="/post/Java/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/1/"/>
      <url>/post/Java/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/1/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-05-22 10:47:37 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\网络编程\1.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%8F%82%E8%80%83">参考</a></li><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#ip">IP</a></li><li><a href="#%E7%AB%AF%E5%8F%A3">端口</a></li><li><a href="#%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE">通信协议</a><ul><li><a href="#tcp">TCP</a></li><li><a href="#udp">UDP</a></li></ul></li><li><a href="#tcp-%E8%BF%9E%E6%8E%A5">TCP 连接</a><ul><li><a href="#server-%E7%AB%AF">Server 端</a></li><li><a href="#client-%E7%AB%AF">Client 端</a></li></ul></li><li><a href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93">文件传输</a><ul><li><a href="#server">Server</a></li><li><a href="#client">Client</a></li></ul></li><li><a href="#udp-%E8%BF%9E%E6%8E%A5">UDP 连接</a><ul><li><a href="#server-1">Server</a></li><li><a href="#client-1">Client</a></li></ul></li><li><a href="#udp-%E5%BE%AA%E7%8E%AF%E5%8F%91%E9%80%81">UDP 循环发送</a><ul><li><a href="#server-2">Server</a></li><li><a href="#client-2">Client</a></li></ul></li><li><a href="#%E5%8F%8C%E5%90%91%E8%81%8A%E5%A4%A9">双向聊天</a><ul><li><a href="#%E5%8F%91%E9%80%81%E7%BA%BF%E7%A8%8B">发送线程</a></li><li><a href="#%E6%8E%A5%E6%94%B6%E7%BA%BF%E7%A8%8B">接收线程</a></li><li><a href="#%E8%80%81%E5%B8%88">老师</a></li><li><a href="#%E5%AD%A6%E7%94%9F">学生</a></li></ul></li><li><a href="#url">URL</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-21">借物表</h2><blockquote><p>在此文章记录了: <a href="../../../others/LearnWay#%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B">😍Weidows-の成长路线#网络编程</a></p></blockquote><hr><h2 id="简介-9">简介</h2><ul><li><p>架构区分</p><ul><li>网页编程: B/S</li><li>网络编程: C/S</li></ul><hr></li><li><p>通信要素(TCP/IP)</p><ul><li>IP</li><li>端口</li></ul><hr></li><li><p>协议参考</p><img src="https://www.helloimg.com/images/2022/02/27/GVmdqS.png" alt="20210228232437" /><blockquote><p>更为详细的: <a href="http://www.colasoft.com.cn/download/protocols_map.php">科来网络通讯协议图 2020 版</a></p></blockquote><ul><li>此处针对传输层 TCP/UDP 学习.</li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="IP">IP</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Ip</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// write your code here</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 获取本机内网IP地址</span></span><br><span class="line">      <span class="type">InetAddress</span> <span class="variable">inetAddress1</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">      System.out.println(inetAddress1);</span><br><span class="line">      <span class="type">InetAddress</span> <span class="variable">inetAddress2</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">      System.out.println(inetAddress2);</span><br><span class="line">      <span class="type">InetAddress</span> <span class="variable">inetAddress3</span> <span class="operator">=</span> InetAddress.getLocalHost();</span><br><span class="line">      System.out.println(inetAddress3);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//查询网站ip地址</span></span><br><span class="line">      <span class="type">InetAddress</span> <span class="variable">inetAddress4</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;www.bilibili.com&quot;</span>);</span><br><span class="line">      System.out.println(inetAddress4);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//常用方法</span></span><br><span class="line">      System.out.println(inetAddress4.getAddress());</span><br><span class="line">      System.out.println(inetAddress4.getCanonicalHostName()); <span class="comment">//规范的名字</span></span><br><span class="line">      System.out.println(inetAddress4.getHostAddress()); <span class="comment">//ip</span></span><br><span class="line">      System.out.println(inetAddress4.getHostName()); <span class="comment">//域名，或者自己电脑的名字</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    /127.0.0.1</span></span><br><span class="line"><span class="comment">    localhost/127.0.0.1</span></span><br><span class="line"><span class="comment">    DESKTOP-CTDDD3K/192.168.114.1</span></span><br><span class="line"><span class="comment">    www.bilibili.com/121.17.123.130</span></span><br><span class="line"><span class="comment">    [B@2a3046da</span></span><br><span class="line"><span class="comment">    121.17.123.130</span></span><br><span class="line"><span class="comment">    121.17.123.130</span></span><br><span class="line"><span class="comment">    www.bilibili.com</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="端口">端口</h2><ul><li><p>TCP 与 UDP 各有 65535 个端口</p><ul><li><p>两个协议间不冲突</p></li><li><p>但是一个协议下的一个端口只能同时被一个软件占用.</p></li></ul><hr></li><li><p>端口分类</p><ul><li><p>公有端口 0 ~ 1023</p><ul><li><p>HTTP：80</p></li><li><p>HTTPS：443</p></li><li><p>FTP：21</p></li><li><p>Telent：23</p></li></ul></li><li><p>程序注册端口：1024 ~ 49151，分配给用户或者程序</p><ul><li><p>Tomcat：8080</p></li><li><p>MySQL：3306</p></li><li><p>Oracle：1512</p></li></ul></li><li><p>动态、私有：49152 ~ 65535</p></li></ul><hr></li><li><p>常用 shell 指令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano #查看所有的端口</span><br><span class="line">netstat -ano | finstr &quot;5900&quot; #查看指定的端口</span><br><span class="line">tasklist | findstr &quot;8696&quot; #查看指定端口的进程</span><br></pre></td></tr></table></figure></li><li><p>InetSocketAddress</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.InetSocketAddress;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Port</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">InetSocketAddress</span> <span class="variable">socketAddress</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">8080</span>);</span><br><span class="line">    System.out.println(socketAddress);</span><br><span class="line"></span><br><span class="line">    System.out.println(socketAddress.getAddress());</span><br><span class="line">    System.out.println(socketAddress.getHostName());</span><br><span class="line">    System.out.println(socketAddress.getPort());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    localhost/127.0.0.1:8080</span></span><br><span class="line"><span class="comment">    localhost/127.0.0.1</span></span><br><span class="line"><span class="comment">    localhost</span></span><br><span class="line"><span class="comment">    8080</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="通信协议">通信协议</h2><ul><li><p>通过约定协议来管控通信的速率,码率等问题</p></li><li><p>并通过协议分层来简化复杂度</p><hr></li><li><p>几种协议</p><ul><li><p>TCP:用户传输协议</p></li><li><p>UDP:用户数据报协议</p></li><li><p>IP:网络互连协议</p></li><li><p>TCP/IP 协议簇:是一组协议 (四层概念模型)</p></li></ul></li></ul><hr><h3 id="TCP">TCP</h3><ul><li><p>TCP 是客户端&lt;–&gt;服务端双向的信息沟通,可长时间稳定连接</p></li><li><p>稳定连接最小验证<code>三次握手,四次挥手</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">最少需要三次，保证稳定连接！</span><br><span class="line"><span class="selector-tag">A</span>：你瞅啥？</span><br><span class="line"><span class="selector-tag">B</span>：瞅你咋地？</span><br><span class="line"><span class="selector-tag">A</span>：干一场！</span><br><span class="line"></span><br><span class="line">至少四次,双方才能都断开连接</span><br><span class="line"><span class="selector-tag">A</span>：我要走了</span><br><span class="line"><span class="selector-tag">B</span>：你真的要走了吗？</span><br><span class="line"><span class="selector-tag">B</span>：你真的真的要走了吗？</span><br><span class="line"><span class="selector-tag">A</span>：我真的要走了</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="UDP">UDP</h3><ul><li><p>单向的信息传递</p></li><li><p>没有客户端与服务端界限</p></li><li><p>无论有没有接收方,无论接收方是否接收,发送方只管发送</p></li><li><p>常见的<code>DDOS攻击</code>,让大量垃圾信息污染服务器接收端口,使其瘫痪.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="TCP-连接">TCP 连接</h2><ul><li>Server 服务端与 Client 客户端通过 TCP 方式创建数据连接.</li></ul><h3 id="Server-端">Server 端</h3><ul><li><p>建立服务的端口 ServerScoket</p></li><li><p>等待用户的连接 accept</p></li><li><p>接收用户的消息</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//1、我得有一个地址</span></span><br><span class="line">    <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123; <span class="comment">// 连续接收数据</span></span><br><span class="line">      <span class="comment">//2、等待客户端连接过来</span></span><br><span class="line">      <span class="type">Socket</span> <span class="variable">accept</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line"></span><br><span class="line">      <span class="comment">//3、读取客户端的消息</span></span><br><span class="line">      <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> accept.getInputStream();</span><br><span class="line"></span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * 通常IO方式,如果是长数据传输,会导致出错</span></span><br><span class="line"><span class="comment">       *</span></span><br><span class="line"><span class="comment">        byte[] buffer = new byte[1024];</span></span><br><span class="line"><span class="comment">        int length;</span></span><br><span class="line"><span class="comment">        while ((length = inputStream.read(buffer)) != -1) &#123;</span></span><br><span class="line"><span class="comment">        String s = new String(buffer, 0, length);</span></span><br><span class="line"><span class="comment">        System.out.println(s);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//4. 管道流接收数据</span></span><br><span class="line">      <span class="type">ByteArrayOutputStream</span> <span class="variable">byteArrayOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">      <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">      <span class="type">int</span> length;</span><br><span class="line">      <span class="keyword">while</span> ((length = inputStream.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">        byteArrayOutputStream.write(buffer, <span class="number">0</span>, length);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (byteArrayOutputStream.toString().matches(<span class="string">&quot;quit&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(byteArrayOutputStream.toString());</span><br><span class="line">        byteArrayOutputStream.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">        accept.close();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5. 最后关闭</span></span><br><span class="line">    serverSocket.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Client-端">Client 端</h3><ul><li><p>连接服务器 Socket</p></li><li><p>发送消息</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">//1、要知道服务器的地址，端口号</span></span><br><span class="line">    <span class="type">InetAddress</span> <span class="variable">address</span> <span class="operator">=</span> InetAddress.getLocalHost();</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">port</span> <span class="operator">=</span> <span class="number">9999</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、创建一个socket连接</span></span><br><span class="line">    <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(address, port);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3、发送消息 IO流</span></span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">    outputStream.write(<span class="string">&quot;Weidows connecting here.&quot;</span>.getBytes());</span><br><span class="line">    <span class="comment">// outputStream.write(&quot;quit&quot;.getBytes());</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.关闭通道</span></span><br><span class="line">    outputStream.close();</span><br><span class="line">    socket.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="文件传输-2">文件传输</h2><h3 id="Server">Server</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">//1、创建服务</span></span><br><span class="line">    <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、监听客户端的连接</span></span><br><span class="line">    <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept(); <span class="comment">//阻塞式监听，会一直等待客户端连接</span></span><br><span class="line">    System.out.println(<span class="string">&quot;Server开始监听.&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3、获取输入流</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4、文件输出</span></span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;Java/src/main/java/twenty_one/net/file_upload/receive.png&quot;</span>));</span><br><span class="line">    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">int</span> len;</span><br><span class="line">    <span class="keyword">while</span> ((len = is.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      fos.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;Server接收完毕.&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通知客户端我接收完毕了</span></span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">    os.write(<span class="string">&quot;Server通知:接受完毕，Client可以断开了&quot;</span>.getBytes());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5、关闭资源</span></span><br><span class="line">    fos.close();</span><br><span class="line">    is.close();</span><br><span class="line">    socket.close();</span><br><span class="line">    serverSocket.close();</span><br><span class="line">    System.out.println(<span class="string">&quot;Server已发送验证并断开连接.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    Server开始监听.</span></span><br><span class="line"><span class="comment">    Server接收完毕.</span></span><br><span class="line"><span class="comment">    Server已发送验证并断开连接.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Client">Client</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">//1、创建一个Socket连接</span></span><br><span class="line">    <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(InetAddress.getByName(<span class="string">&quot;localhost&quot;</span>), <span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、创建一个输出流</span></span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3、读取文件</span></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;Java/src/main/java/twenty_one/net/file_upload/upload.png&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4、写出文件</span></span><br><span class="line">    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">int</span> len;</span><br><span class="line">    <span class="keyword">while</span> ((len = fis.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      os.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;Client传输完毕.&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通知服务器，我已经结束了</span></span><br><span class="line">    socket.shutdownOutput(); <span class="comment">//我已经传输完了！</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//确定服务器接收完毕，才能够断开连接</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">    <span class="comment">//String byte[]</span></span><br><span class="line">    <span class="type">ByteArrayOutputStream</span> <span class="variable">baos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">    <span class="type">byte</span>[] buffer2 = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">int</span> len2;</span><br><span class="line">    <span class="keyword">while</span> ((len2 = inputStream.read(buffer2)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      baos.write(buffer2, <span class="number">0</span>, len2);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(baos.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5、关闭资源</span></span><br><span class="line">    baos.close();</span><br><span class="line">    inputStream.close();</span><br><span class="line">    fis.close();</span><br><span class="line">    os.close();</span><br><span class="line">    socket.close();</span><br><span class="line">    System.out.println(<span class="string">&quot;Client已接收到验证并断开连接&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    Client传输完毕.</span></span><br><span class="line"><span class="comment">    Server通知:接受完毕，Client可以断开了</span></span><br><span class="line"><span class="comment">    Client已接收到验证并断开连接</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="UDP-连接">UDP 连接</h2><h3 id="Server-2">Server</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 1.开放端口</span></span><br><span class="line">    <span class="type">DatagramSocket</span> <span class="variable">datagramSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">9999</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;等待数据传入中...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.接收数据</span></span><br><span class="line">    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">DatagramPacket</span> <span class="variable">datagramPacket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(buffer, buffer.length);</span><br><span class="line">    datagramSocket.receive(datagramPacket); <span class="comment">//阻塞接收</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.输出</span></span><br><span class="line">    System.out.println(<span class="string">&quot;Server接收到数据:&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(datagramPacket.getData()));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.关闭</span></span><br><span class="line">    datagramSocket.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Client-2">Client</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 1.创建数据包</span></span><br><span class="line">    <span class="type">InetAddress</span> <span class="variable">localHost</span> <span class="operator">=</span> InetAddress.getLocalHost();</span><br><span class="line">    <span class="type">int</span> <span class="variable">port</span> <span class="operator">=</span> <span class="number">9999</span>;</span><br><span class="line">    <span class="type">byte</span>[] data = <span class="string">&quot;这是Client发送的数据.&quot;</span>.getBytes();</span><br><span class="line">    <span class="type">DatagramPacket</span> <span class="variable">datagramPacket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(data, data.length, localHost, port);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.创建Socket</span></span><br><span class="line">    <span class="type">DatagramSocket</span> <span class="variable">datagramSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.发送数据</span></span><br><span class="line">    datagramSocket.send(datagramPacket);</span><br><span class="line">    System.out.println(<span class="string">&quot;传输成功.&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.关闭连接</span></span><br><span class="line">    datagramSocket.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="UDP-循环发送">UDP 循环发送</h2><h3 id="Server-3">Server</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server2</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 1.准备连接</span></span><br><span class="line">    <span class="type">DatagramSocket</span> <span class="variable">datagramSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">9999</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">      <span class="type">DatagramPacket</span> <span class="variable">datagramPacket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bytes, bytes.length);</span><br><span class="line">      System.out.println(<span class="string">&quot;Server准备接收数据中.&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 2.接收数据</span></span><br><span class="line">      datagramSocket.receive(datagramPacket);</span><br><span class="line">      <span class="type">String</span> <span class="variable">string</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(datagramPacket.getData());</span><br><span class="line">      System.out.println(<span class="string">&quot;接收到数据:\t&quot;</span> + datagramPacket.getAddress() + <span class="string">&quot;:&quot;</span> + datagramPacket.getPort() + <span class="string">&quot;\t&quot;</span> + string);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 这里的string=&quot;quitxxxxxxxxxxxxxx&quot;,总长为上面的1024,用.equals()无法判断.</span></span><br><span class="line">      <span class="keyword">if</span> (string.contains(<span class="string">&quot;quit&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.断开连接</span></span><br><span class="line">    datagramSocket.close();</span><br><span class="line">    System.out.println(<span class="string">&quot;Server已关闭连接.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Client-3">Client</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetSocketAddress;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client2</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 0.准备连接</span></span><br><span class="line">    <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(System.in));</span><br><span class="line">    <span class="type">DatagramSocket</span> <span class="variable">datagramSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="comment">// 1.准备数据</span></span><br><span class="line">      System.out.println(<span class="string">&quot;Client准备读取Terminal数据:&quot;</span>);</span><br><span class="line">      <span class="type">String</span> <span class="variable">readLine</span> <span class="operator">=</span> bufferedReader.readLine();</span><br><span class="line">      <span class="type">byte</span>[] bytes = readLine.getBytes();</span><br><span class="line">      <span class="type">DatagramPacket</span> <span class="variable">datagramPacket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bytes, bytes.length, <span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>));</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 2.发送数据</span></span><br><span class="line">      datagramSocket.send(datagramPacket);</span><br><span class="line">      System.out.println(<span class="string">&quot;Client已经发送数据.&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (readLine.equals(<span class="string">&quot;quit&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.断开连接</span></span><br><span class="line">    datagramSocket.close();</span><br><span class="line">    System.out.println(<span class="string">&quot;Client已关闭连接.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="双向聊天">双向聊天</h2><ul><li><p>实现<code>发送</code>,<code>接收</code>两个线程类</p></li><li><p>老师和学生各开上面两个线程,实现<code>发,收</code>功能.</p></li></ul><h3 id="发送线程">发送线程</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetSocketAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.SocketException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TalkSend</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">  <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="type">DatagramSocket</span> <span class="variable">datagramSocket</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String targetIP;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> targetPort;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">TalkSend</span><span class="params">(String targetIP, <span class="type">int</span> targetPort)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.targetIP = targetIP;</span><br><span class="line">    <span class="built_in">this</span>.targetPort = targetPort;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 0.准备连接</span></span><br><span class="line">      bufferedReader = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(System.in));</span><br><span class="line">      datagramSocket = <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="comment">// 1.准备数据</span></span><br><span class="line">      System.out.println(<span class="string">&quot;Client准备读取Terminal数据:&quot;</span>);</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">readLine</span> <span class="operator">=</span> bufferedReader.readLine();</span><br><span class="line">        <span class="type">byte</span>[] bytes = readLine.getBytes();</span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">datagramPacket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bytes, bytes.length,</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(targetIP, targetPort));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.发送数据</span></span><br><span class="line">        datagramSocket.send(datagramPacket);</span><br><span class="line">        System.out.println(<span class="string">&quot;Client已经发送数据.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (readLine.equals(<span class="string">&quot;quit&quot;</span>)) &#123;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.断开连接</span></span><br><span class="line">    datagramSocket.close();</span><br><span class="line">    System.out.println(<span class="string">&quot;Client已关闭连接.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="接收线程">接收线程</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.SocketException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TalkReceive</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">  <span class="type">DatagramSocket</span> <span class="variable">datagramSocket</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> localPort;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">TalkReceive</span><span class="params">(<span class="type">int</span> localPort)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.localPort = localPort;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      datagramSocket = <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="built_in">this</span>.localPort);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.准备连接</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">datagramPacket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bytes, bytes.length);</span><br><span class="line">        System.out.println(<span class="string">&quot;Server准备接收数据中.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.接收数据</span></span><br><span class="line">        datagramSocket.receive(datagramPacket);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">string</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(datagramPacket.getData());</span><br><span class="line">        System.out.println(<span class="string">&quot;接收到数据:\t&quot;</span> + datagramPacket.getAddress() + <span class="string">&quot;:&quot;</span> + datagramPacket.getPort() + <span class="string">&quot;\t&quot;</span> + string);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 这里的string=&quot;quitxxxxxxxxxxxxxx&quot;,总长为上面的1024,用.equals()无法判断.</span></span><br><span class="line">        <span class="keyword">if</span> (string.contains(<span class="string">&quot;quit&quot;</span>)) &#123;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.断开连接</span></span><br><span class="line">    datagramSocket.close();</span><br><span class="line">    System.out.println(<span class="string">&quot;Server已关闭连接.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="老师">老师</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 老师</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">TalkReceive</span>(<span class="number">7777</span>)).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">TalkSend</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">8888</span>)).start();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    Server准备接收数据中.</span></span><br><span class="line"><span class="comment">    Client准备读取Terminal数据:</span></span><br><span class="line"><span class="comment">    接收到数据:     /127.0.0.1:50277        15465</span></span><br><span class="line"><span class="comment">    Server准备接收数据中.</span></span><br><span class="line"><span class="comment">    123456</span></span><br><span class="line"><span class="comment">    Client已经发送数据.</span></span><br><span class="line"><span class="comment">    Client准备读取Terminal数据:</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="学生">学生</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 学生</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">TalkReceive</span>(<span class="number">8888</span>)).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">TalkSend</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">7777</span>)).start();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    Server准备接收数据中.</span></span><br><span class="line"><span class="comment">    Client准备读取Terminal数据:</span></span><br><span class="line"><span class="comment">    15465</span></span><br><span class="line"><span class="comment">    Client已经发送数据.</span></span><br><span class="line"><span class="comment">    Client准备读取Terminal数据:</span></span><br><span class="line"><span class="comment">    接收到数据:     /127.0.0.1:50279        123456</span></span><br><span class="line"><span class="comment">    Server准备接收数据中.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="URL">URL</h2><ul><li>文件下载</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetURL</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 1.设置URL和文件路径</span></span><br><span class="line">    <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="string">&quot;Java/src/main/java/twenty_one/net/&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> url.getPath().substring(url.getPath().lastIndexOf(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ! URL类用法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">      System.out.println(url.getProtocol());</span></span><br><span class="line"><span class="comment">      System.out.println(url.getHost());</span></span><br><span class="line"><span class="comment">      System.out.println(url.getPort());</span></span><br><span class="line"><span class="comment">      System.out.println(url.getPath());</span></span><br><span class="line"><span class="comment">      System.out.println(url.getFile());</span></span><br><span class="line"><span class="comment">      System.out.println(url.getQuery());</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">      https</span></span><br><span class="line"><span class="comment">      cdn.jsdelivr.net</span></span><br><span class="line"><span class="comment">      /gh/Weidows/Images@master/img/divider.png</span></span><br><span class="line"><span class="comment">      /gh/Weidows/Images@master/img/divider.png</span></span><br><span class="line"><span class="comment">      null</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.输入输出流</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">openStream</span> <span class="operator">=</span> url.openStream();</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(path + fileName));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.传输数据</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">int</span> length;</span><br><span class="line">    <span class="keyword">while</span> ((length = openStream.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      fileOutputStream.write(bytes, <span class="number">0</span>, length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.关闭连接</span></span><br><span class="line">    fileOutputStream.close();</span><br><span class="line">    openStream.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 网络编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🔥Java注解与反射复习~(贰)</title>
      <link href="/post/Java/%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%8F%8D%E5%B0%84/2/"/>
      <url>/post/Java/%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%8F%8D%E5%B0%84/2/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-02-27 16:27:36 * @FilePath: \Blog-private\source\_posts\Java\注解与反射\2.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E6%93%8D%E4%BD%9C-class-%E5%AF%B9%E8%B1%A1">操作 Class 对象</a></li><li><a href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90">性能分析</a></li><li><a href="#%E5%8F%8D%E5%B0%84%E6%93%8D%E4%BD%9C%E6%B3%9B%E5%9E%8B">反射操作泛型</a></li><li><a href="#%E5%8F%8D%E5%B0%84%E6%93%8D%E4%BD%9C%E6%B3%A8%E8%A7%A3">反射操作注解</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="操作-Class-对象">操作 Class 对象</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo6</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">//获得class对象</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c1</span> <span class="operator">=</span> User.class;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建一个对象</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) c1.newInstance();<span class="comment">//本质是调用了类的无参构造器</span></span><br><span class="line">    System.out.println(user);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过构造器创建对象</span></span><br><span class="line">    System.out.println(<span class="string">&quot;============================&quot;</span>);</span><br><span class="line">    <span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> c1.getDeclaredConstructor(String.class, <span class="type">int</span>.class);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> (User) constructor.newInstance(<span class="string">&quot;打爆&quot;</span>, <span class="number">22</span>);</span><br><span class="line">    System.out.println(user2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过反射获取一个方法</span></span><br><span class="line">    System.out.println(<span class="string">&quot;============================&quot;</span>);</span><br><span class="line">    <span class="type">Method</span> <span class="variable">setName</span> <span class="operator">=</span> c1.getDeclaredMethod(<span class="string">&quot;setName&quot;</span>, String.class);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * invoke: 激活</span></span><br><span class="line"><span class="comment">     * invoke(执行方法的对象+原方法的参数1+原方法的参数2+...)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    setName.invoke(user, <span class="string">&quot;Weidows&quot;</span>);</span><br><span class="line">    System.out.println(user.getName());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过反射操作属性</span></span><br><span class="line">    System.out.println(<span class="string">&quot;============================&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> (User) c1.newInstance();</span><br><span class="line">    <span class="type">Field</span> <span class="variable">name</span> <span class="operator">=</span> c1.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    <span class="comment">//不能直接操作私有属性，我们需要关闭程序的安全监测，属性或方法的setAccessible(true)</span></span><br><span class="line">    name.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    name.set(user3, <span class="string">&quot;齐下无贰&quot;</span>);</span><br><span class="line">    System.out.println(user3.getName());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      twenty_one.reflection.User@59f95c5d</span></span><br><span class="line"><span class="comment">      ============================</span></span><br><span class="line"><span class="comment">      twenty_one.reflection.User@5c8da962</span></span><br><span class="line"><span class="comment">      ============================</span></span><br><span class="line"><span class="comment">      Weidows</span></span><br><span class="line"><span class="comment">      ============================</span></span><br><span class="line"><span class="comment">      齐下无贰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="性能分析-2">性能分析</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PerformanceInfluence</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    test1();</span><br><span class="line">    test2();</span><br><span class="line">    test3();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      普通方式执行4ms</span></span><br><span class="line"><span class="comment">      反射方式,开启检测执行2794ms</span></span><br><span class="line"><span class="comment">      反射方式,关闭检测执行1771ms</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000000000</span>; i++) &#123;</span><br><span class="line">      user.getName();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;普通方式执行&quot;</span> + (end - start) + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    <span class="type">Class</span> <span class="variable">c1</span> <span class="operator">=</span> user.getClass();</span><br><span class="line">    <span class="type">Method</span> <span class="variable">getName</span> <span class="operator">=</span> c1.getDeclaredMethod(<span class="string">&quot;getName&quot;</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000000000</span>; i++) &#123;</span><br><span class="line">      getName.invoke(user, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;反射方式,开启检测执行&quot;</span> + (end - start) + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    <span class="type">Class</span> <span class="variable">c1</span> <span class="operator">=</span> user.getClass();</span><br><span class="line">    <span class="type">Method</span> <span class="variable">getName</span> <span class="operator">=</span> c1.getDeclaredMethod(<span class="string">&quot;getName&quot;</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    getName.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000000000</span>; i++) &#123;</span><br><span class="line">      getName.invoke(user, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;反射方式,关闭检测执行&quot;</span> + (end - start) + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>可见使用<code>反射方式执行效率远远远远低于正常执行</code>,关闭访问权限检测也只能降低部分性能损耗</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="反射操作泛型">反射操作泛型</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Generic</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">(Map&lt;String, User&gt; map, List&lt;User&gt; list)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Map&lt;String, User&gt; <span class="title function_">test02</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchMethodException &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取参数(map,list)的泛型参数(String,User)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> Generic.class.getMethod(<span class="string">&quot;test01&quot;</span>, Map.class, List.class);</span><br><span class="line">    Type[] genericParameterTypes = method.getGenericParameterTypes();</span><br><span class="line">    <span class="keyword">for</span> (Type genericParameterType : genericParameterTypes) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;范型参数&quot;</span> + genericParameterType);</span><br><span class="line">      <span class="keyword">if</span> (genericParameterType <span class="keyword">instanceof</span> ParameterizedType) &#123;</span><br><span class="line">        Type[] actualTypeAnguments = ((ParameterizedType) genericParameterType).getActualTypeArguments();</span><br><span class="line">        <span class="keyword">for</span> (Type actualTypeAngument : actualTypeAnguments) &#123;</span><br><span class="line">          System.out.println(<span class="string">&quot;  实际参数范型&quot;</span> + actualTypeAngument);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;--------------------------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取返回值的泛型参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">method1</span> <span class="operator">=</span> Generic.class.getMethod(<span class="string">&quot;test02&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="type">Type</span> <span class="variable">getGenericReturnType</span> <span class="operator">=</span> method1.getGenericReturnType();</span><br><span class="line">    <span class="keyword">if</span> (getGenericReturnType <span class="keyword">instanceof</span> ParameterizedType) &#123;</span><br><span class="line">      Type[] actualTypeArguments = ((ParameterizedType) getGenericReturnType).getActualTypeArguments();</span><br><span class="line">      <span class="keyword">for</span> (Type actualTypeArgument : actualTypeArguments) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;返回值范型&quot;</span> + actualTypeArgument);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    范型参数java.util.Map&lt;java.lang.String, twenty_one.reflection.User&gt;</span></span><br><span class="line"><span class="comment">    实际参数范型class java.lang.String</span></span><br><span class="line"><span class="comment">    实际参数范型class twenty_one.reflection.User</span></span><br><span class="line"><span class="comment">    范型参数java.util.List&lt;twenty_one.reflection.User&gt;</span></span><br><span class="line"><span class="comment">    实际参数范型class twenty_one.reflection.User</span></span><br><span class="line"><span class="comment">    --------------------------------------------</span></span><br><span class="line"><span class="comment">    返回值范型class java.lang.String</span></span><br><span class="line"><span class="comment">    返回值范型class twenty_one.reflection.User</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="反射操作注解">反射操作注解</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Annotation</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchFieldException, SecurityException &#123;</span><br><span class="line">    <span class="comment">// * 通过反射获取注解</span></span><br><span class="line">    java.lang.annotation.Annotation[] annotations = Student1.class.getAnnotations();</span><br><span class="line">    <span class="keyword">for</span> (java.lang.annotation.Annotation annotation : annotations) &#123;</span><br><span class="line">      System.out.println(annotation);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// * 获取注解的value</span></span><br><span class="line">    <span class="type">Table</span> <span class="variable">annotation</span> <span class="operator">=</span> Student1.class.getAnnotation(Table.class); <span class="comment">//获取Student1类上Table类型的注解</span></span><br><span class="line">    System.out.println(annotation.value());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// * 获取指定的value</span></span><br><span class="line">    java.lang.reflect.<span class="type">Field</span> <span class="variable">f</span> <span class="operator">=</span> Student1.class.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    <span class="type">Field</span> <span class="variable">annotation1</span> <span class="operator">=</span> f.getAnnotation(Field.class);</span><br><span class="line">    System.out.println(annotation1.columnName() + <span class="string">&quot;\t&quot;</span> + annotation1.type() + <span class="string">&quot;\t&quot;</span> + annotation1.length());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    <span class="doctag">@twenty</span>_one.reflection.Table(value=&quot;db_student&quot;)</span></span><br><span class="line"><span class="comment">    db_student</span></span><br><span class="line"><span class="comment">    db_name varchar 3</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Table(value = &quot;db_student&quot;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student1</span> &#123;</span><br><span class="line">  <span class="meta">@Field(columnName = &quot;db_id&quot;, type = &quot;int&quot;, length = 10)</span></span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">  <span class="meta">@Field(columnName = &quot;db_age&quot;, type = &quot;int&quot;, length = 10)</span></span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">  <span class="meta">@Field(columnName = &quot;db_name&quot;, type = &quot;varchar&quot;, length = 3)</span></span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Student1</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Student1</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> age, String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.id = id;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.id = id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Student [age=&quot;</span> + age + <span class="string">&quot;, id=&quot;</span> + id + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ! 类名的注解</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> Table &#123;</span><br><span class="line">  String <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ! 属性的注解</span></span><br><span class="line"><span class="meta">@Target(ElementType.FIELD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> Field &#123;</span><br><span class="line">  String <span class="title function_">columnName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  String <span class="title function_">type</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> <span class="title function_">length</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 注解与反射 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 注解 </tag>
            
            <tag> 反射 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🔥Java注解与反射复习~(壹)</title>
      <link href="/post/Java/%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%8F%8D%E5%B0%84/1/"/>
      <url>/post/Java/%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%8F%8D%E5%B0%84/1/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-02-27 16:27:42 * @FilePath: \Blog-private\source\_posts\Java\注解与反射\1.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%86%85%E7%BD%AE%E6%B3%A8%E8%A7%A3">内置注解</a></li><li><a href="#%E5%85%83%E6%B3%A8%E8%A7%A3">元注解</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3">自定义注解</a></li><li><a href="#%E5%8F%8D%E5%B0%84">反射</a><ul><li><a href="#class-%E7%B1%BB">Class 类</a></li><li><a href="#%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B">类的加载过程</a></li></ul></li><li><a href="#%E5%AE%9E%E4%BE%8B%E5%8C%96%E4%B8%8E-static-%E5%8A%A0%E8%BD%BD">实例化与 static 加载</a><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E5%8F%91%E7%94%9F%E7%B1%BB%E5%88%9D%E5%A7%8B%E5%8C%96">什么时候会发生类初始化?</a></li></ul></li><li><a href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8">类加载器</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="内置注解">内置注解</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Anno1</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span> <span class="comment">//重写方法</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">super</span>.toString();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Deprecated</span> <span class="comment">//表示弃用方法,但仍可使用</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@SuppressWarnings(&quot;all&quot;)</span> <span class="comment">//抑制警告</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    test();</span><br><span class="line">    test01();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="元注解">元注解</h2><ul><li><p><code>作用于其他注解的注解</code></p></li><li><p>在 java.lang.annotation 包中可以找到.( @ Target , @Retention，@Documented , @Inherited )</p><ul><li>@Target :用于描述注解的使用范围(即:被描述的注解可以用在什么地方)</li><li>@Retention :表示需要在什么级别保存该注释信息,用于描述注解的生命周期(SOURCE &lt; CLASS &lt; RUNTIME)</li><li>@Document:说明该注解将被包含在 javadoc 中</li><li>@Inherited: 说明子类可以继承父类中的该注解</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MyAnnotation</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Anno2</span> &#123;</span><br><span class="line">  <span class="meta">@MyAnnotation</span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Target 表示我们的注解可以用在哪些地方.</span></span><br><span class="line"><span class="meta">@Target(value = &#123; ElementType.METHOD, ElementType.TYPE &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Retention表示我们的注解在什么地方还有效。runtime&gt;class&gt;sources</span></span><br><span class="line"><span class="meta">@Retention(value = RetentionPolicy.RUNTIME)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Documented表示是否将我们的注解生成在Javadoc中</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Inherited子类可以继承父类的注解</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="自定义注解">自定义注解</h2><ul><li>使用@interface 自定义注解时,自动继承了 java.lang .annotation.Annotation 接口</li><li>@interface 用来声明一个注解,格式: public @ interface 注解名{定义内容}<ol><li>其中的每一个方法实际上是声明了一个配置参数.</li><li>方法的名称就是参数的名称.</li><li>返回值类型就是参数的类型(返回值只能是基本类型,Class , String , enum ).</li><li>可以通过 default 来声明参数的默认值</li><li>如果只有一个参数成员, 一般参数名为 value</li><li>注解元素必须要有值，我们定义注解元素时,经常使用空字符串，0 作为默认值.</li></ol></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Anno3</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//注解可以显示赋值，如果没有默认值 ，我们就必须给注解赋值</span></span><br><span class="line">  <span class="meta">@MyAnnotation2(name = &#123;&quot;Weidows&quot;, &quot;齐下无贰&quot;&#125;, age = 21)</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@MyAnnotation3(&quot;Weidows&quot;)</span> <span class="comment">//参数只有一个，且参数名为value</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD, ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> MyAnnotation2 &#123;</span><br><span class="line">  <span class="comment">//注解的参数:参数类型+参数名();</span></span><br><span class="line">  String[] name() <span class="keyword">default</span> &#123;<span class="string">&quot;&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> <span class="title function_">age</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> <span class="title function_">id</span><span class="params">()</span> <span class="keyword">default</span> -<span class="number">1</span>; <span class="comment">// 如果默认值为-1,代表不存在。</span></span><br><span class="line"></span><br><span class="line">  String <span class="title function_">schools</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;家里蹲大学&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Target</span>(value = &#123; ElementType.TYPE, ElementType.METHOD &#125;)</span></span><br><span class="line"><span class="comment"> * 只有一个参数时可以省略参数名,多个参数时不可省略</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> MyAnnotation3 &#123;</span><br><span class="line">  <span class="comment">//只有一个参数时，参数名为value时，使用时不需参数名</span></span><br><span class="line">  String <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>现在,注解定义和使用结束了,下面结合反射来读取注解数据.</p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="反射">反射</h2><ul><li>可以在运行时实现动态创建对象和编译,有很大的灵活性,但会影响一定性能</li></ul><h3 id="Class-类">Class 类</h3><ul><li><p>Class 类时反射机制的根源,常用方法如下:</p><img src="https://www.helloimg.com/images/2022/02/27/GVmAfm.png" alt="20210226151038" /></li><li><p>获取 Class 类的对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">    <span class="comment">//方式一：通过对象获取</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>().getClass();</span><br><span class="line">    System.out.println(c1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方式二：通过forname获取</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c2</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;twenty_one.reflection.Person&quot;</span>);</span><br><span class="line">    System.out.println(c2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过类名.class获得(最可靠,高效)</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c3</span> <span class="operator">=</span> Student.class;</span><br><span class="line">    System.out.println(c3);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方式四：基本内置类型的包装类都有一个TYPE属性</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c4</span> <span class="operator">=</span> Integer.TYPE;</span><br><span class="line">    System.out.println(c4);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span> + <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> + <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&quot;Student&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&quot;Teacher&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p>Class 对象类型</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">c1</span> <span class="operator">=</span> Object.class; <span class="comment">//类</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c2</span> <span class="operator">=</span> Runnable.class; <span class="comment">//接口</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c3</span> <span class="operator">=</span> String[].class; <span class="comment">//- -维数组</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c4</span> <span class="operator">=</span> <span class="type">int</span>[][].class; <span class="comment">//二维数组</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c5</span> <span class="operator">=</span> Override.class; <span class="comment">//注解</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c6</span> <span class="operator">=</span> ElementType.class; <span class="comment">//枚举</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c7</span> <span class="operator">=</span> Integer.class; <span class="comment">//基本数据类型</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c8</span> <span class="operator">=</span> <span class="keyword">void</span>.class; <span class="comment">//void</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c9</span> <span class="operator">=</span> Class.class; <span class="comment">//Class</span></span><br><span class="line">    System.out.println(c1);<span class="comment">//class java.lang.Object</span></span><br><span class="line">    System.out.println(c2);<span class="comment">//interface java.lang.Comparable</span></span><br><span class="line">    System.out.println(c3);<span class="comment">//class [Ljava.lang.String;</span></span><br><span class="line">    System.out.println(c4);<span class="comment">//class [[I</span></span><br><span class="line">    System.out.println(c5);<span class="comment">//interface java.lang.Override</span></span><br><span class="line">    System.out.println(c6);<span class="comment">//class java.lang.annotation.ElementType</span></span><br><span class="line">    System.out.println(c7);<span class="comment">//class java.lang.Integer</span></span><br><span class="line">    System.out.println(c8);<span class="comment">//void</span></span><br><span class="line">    System.out.println(c9);<span class="comment">//class java.lang.Class</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="类的加载过程">类的加载过程</h3><ol><li><p>加载: 首先类加载器读取.class 字节码文件到方法区内存,转换数据结构为运行时,并生成 java.lang.Class 对象.</p><ul><li>在反射中获取 Class 对象并不是创建,而是从内存中获取.</li></ul></li><li><p>链接:将 Java 类的二进制代码合并到 JVM 的运行状态之中的过程。</p><ul><li>验证:确保加载的类信息符合 JVM 规范，没有安全方面的问题</li><li>准备:正式为类变量(static) 分配内存并设置类变量默认初始值的阶段,这些内存都将在方法区中进行分配。</li><li>解析:虚拟机常量池内的符号引用(常量名)替换为直接引用(地址)的过程。</li></ul></li><li><p>初始化:</p><ul><li>执行类构造器&lt; clinit&gt; ()方法的过程。<code>类构造器&lt; clinit&gt; ()方法是由编译期自动收集类中所有类变量的赋值动作和静态代码块中的语句合并产生的。</code>(类构造 器是构造类信息的，不是构造该类对象的构造器)。</li><li>当初始化一个类的时候，如果发现其父类还没有进行初始化，则需要先触发其父类的初始化。</li><li>虚拟机会保证一 个类的 ()方法在多线程环境中被正确加锁和同步。</li></ul><hr></li></ol><ul><li><p>例子</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">    System.out.println(A.m);<span class="comment">//300</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      1.加载到内存，产生一个类对应Class对象</span></span><br><span class="line"><span class="comment">      2.链接，链接结束后m=◎</span></span><br><span class="line"><span class="comment">      3.初始化</span></span><br><span class="line"><span class="comment">      &lt;clinit&gt;()&#123;</span></span><br><span class="line"><span class="comment">          m=100;</span></span><br><span class="line"><span class="comment">          System.out.println( &quot;A类静态代码块初始化&quot;);</span></span><br><span class="line"><span class="comment">          m = 300;</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  <span class="comment">// * 1.1</span></span><br><span class="line">  <span class="keyword">static</span> <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// * 1.2</span></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;A类静态代码块初始化&quot;</span>);</span><br><span class="line">    m = <span class="number">300</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// * 2</span></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">A</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;A类的构造初始化&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="https://www.helloimg.com/images/2022/02/27/GVmSeh.png" alt="20210226172346" /></li></ul><hr><h2 id="实例化与-static-加载">实例化与 static 加载</h2><ul><li><p>尝试下实例化与否对 static 资源调用的影响</p></li><li><p>实例化+调用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">    System.out.println(A.m);<span class="comment">//300</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">A</span>类静态代码块初始化</span><br><span class="line"><span class="selector-tag">A</span>类的构造初始化</span><br><span class="line"><span class="number">300</span></span><br></pre></td></tr></table></figure><hr></li><li><p>实例化+不调用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">    <span class="comment">// System.out.println(A.m);//300</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">A</span>类静态代码块初始化</span><br><span class="line"><span class="selector-tag">A</span>类的构造初始化</span><br></pre></td></tr></table></figure><hr></li><li><p>不实例化+调用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// A a = new A();</span></span><br><span class="line">    System.out.println(A.m);<span class="comment">//300</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">A</span>类静态代码块初始化</span><br><span class="line"><span class="number">300</span></span><br></pre></td></tr></table></figure></li><li><p>可以发现在实例化对象之后调用 static 资源,并不会再次执行静态代码块</p><ul><li>如果没实例化的情况下调取 static 资源,类会加载,但不会执行构造器</li></ul></li></ul><hr><h3 id="什么时候会发生类初始化">什么时候会发生类初始化?</h3><img src="https://www.helloimg.com/images/2022/02/27/GVmbFr.png" alt="20210226172913" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;main类被加载&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">    <span class="comment">//1.主动引用</span></span><br><span class="line">    <span class="comment">// Son son = new Son();</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * main类被加载</span></span><br><span class="line"><span class="comment">    * 父类被加载</span></span><br><span class="line"><span class="comment">    * 子类被加载</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//反射也会产生主动引用</span></span><br><span class="line">    <span class="comment">// Class.forName(&quot;twenty_one.reflection.Son&quot;);</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * main类被加载</span></span><br><span class="line"><span class="comment">     * 父类被加载</span></span><br><span class="line"><span class="comment">     * 子类被加载</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//不会产生类的引用的方法</span></span><br><span class="line">    <span class="comment">// System.out.println(Son.b);</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * main类被加载</span></span><br><span class="line"><span class="comment">    * 父类被加载</span></span><br><span class="line"><span class="comment">    * 2</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//只会main类被加载</span></span><br><span class="line">    <span class="comment">// System.out.println(Son.M);</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * main类被加载</span></span><br><span class="line"><span class="comment">     * 1</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//全加载</span></span><br><span class="line">    System.out.println(Son.m);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * main类被加载</span></span><br><span class="line"><span class="comment">     * 父类被加载</span></span><br><span class="line"><span class="comment">     * 子类被加载</span></span><br><span class="line"><span class="comment">     * 100</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;父类被加载&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;子类被加载&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">M</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="类加载器">类加载器</h2><ul><li><p>作用</p><img src="https://www.helloimg.com/images/2022/02/27/GVmlnT.png" alt="20210227171646" /></li><li><p>分类</p><img src="https://www.helloimg.com/images/2022/02/27/GVmM71.png" alt="20210227172006" /><hr></li><li><p>操作类加载器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">    <span class="comment">//获取系统的类加载器</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">systemClassLoader</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader();</span><br><span class="line">    System.out.println(systemClassLoader);<span class="comment">//jdk.internal.loader.ClassLoaders$AppClassLoader@4459eb14</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取系统类加载器的父类加载器--&gt;扩展类加载器</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">parent</span> <span class="operator">=</span> systemClassLoader.getParent();</span><br><span class="line">    System.out.println(parent);<span class="comment">//jdk.internal.loader.ClassLoaders$PlatformClassLoader@7960847b</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取扩展类加载器的父类加载器--&gt;根加载器(C/C++)</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">grantparent</span> <span class="operator">=</span> parent.getParent();</span><br><span class="line">    System.out.println(grantparent);<span class="comment">//null</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//测试当前类是哪个加载器加载的</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> Demo5.class.getClassLoader();</span><br><span class="line">    System.out.println(classLoader);<span class="comment">//jdk.internal.loader.ClassLoaders$AppClassLoader@4459eb14</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//测试JDK内置的类是谁加载的</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">classLoader1</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;java.lang.Object&quot;</span>).getClassLoader();</span><br><span class="line">    System.out.println(classLoader1);<span class="comment">//null</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//如何获得系统类加载器可以加载的路径</span></span><br><span class="line">    System.out.println(System.getProperty(<span class="string">&quot;java.class.path&quot;</span>));<span class="comment">//D:\Game\Weidows\Java\target\classes;D:\Game\Scoop\persist\maven\mvn-repository\commons-io\commons-io\2.8.0\commons-io-2.8.0.jar</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 注解与反射 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 注解 </tag>
            
            <tag> 反射 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🌭回顾一下多线程-贰</title>
      <link href="/post/Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/2/"/>
      <url>/post/Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/2/</url>
      
        <content type="html"><![CDATA[<h1>回顾一下多线程-贰</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:41:35 * @FilePath: \Blog-private\source\_posts\Java\多线程\2.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E5%9B%9E%E9%A1%BE%E4%B8%80%E4%B8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E8%B4%B0">回顾一下多线程-贰</a><ul><li><a href="#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5-synchronized">线程同步-synchronized</a><ul><li><a href="#%E4%B9%B0%E7%A5%A8">买票</a></li><li><a href="#%E9%93%B6%E8%A1%8C%E5%8F%96%E6%AC%BE">银行取款</a></li><li><a href="#%E5%85%B3%E4%BA%8E%E8%AF%95%E9%94%99%E6%8A%80%E5%B7%A7">关于试错技巧</a></li></ul></li><li><a href="#%E9%9B%86%E5%90%88%E4%B8%8E%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8">集合与线程安全</a><ul><li><a href="#%E9%9D%9E%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5">非线程同步</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5">线程同步</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%9B%86%E5%90%88">线程安全集合</a></li></ul></li><li><a href="#%E6%AD%BB%E9%94%81">死锁</a><ul><li><a href="#%E4%BA%A7%E7%94%9F%E6%9D%A1%E4%BB%B6">产生条件</a></li><li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">解决方案</a></li></ul></li><li><a href="#%E5%8F%AF%E9%87%8D%E5%85%A5%E9%94%81-reentrantlock">可重入锁-ReentrantLock</a></li><li><a href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6">多线程与循环控制</a></li><li><a href="#%E5%BB%B6%E8%BF%9F%E5%AF%B9%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%BD%B1%E5%93%8D">延迟对多线程的影响</a><ul><li><a href="#%E4%B8%80">一</a></li><li><a href="#%E4%BA%8C">二</a></li><li><a href="#%E4%B8%89">三</a></li></ul></li><li><a href="#%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1-wait-notify">线程通信-wait-notify</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0">线程池</a></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="线程同步-synchronized">线程同步-synchronized</h2><ul><li><p>多个线程操作同一资源时会有问题出现,用 <code>synchronized</code> 同步.</p><p>线程同步的形成条件: <code>队列+锁</code></p><p>实现形式有 同步方法 和 同步代码块</p><hr></li></ul><ol><li><p>同步方法, 锁的是方法所属对象 this</p><p>如下买票例子中 buy 方法锁的是 <code>Ticket ticket</code> 这个对象</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="type">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p>同步代码块, 锁 obj</p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">synchronized</span> (<span class="variable">obj</span>) &#123;</span><br><span class="line">  <span class="comment">// 操作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="买票">买票</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Ticket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> <span class="variable">ticketNums</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">//票数</span></span><br><span class="line">  <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>; <span class="comment">//外部停止方法</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (flag) &#123;</span><br><span class="line">      buy();</span><br><span class="line">      <span class="comment">//模拟延时</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">200</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">buy</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//判断是否有票</span></span><br><span class="line">    <span class="keyword">if</span> (ticketNums &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      flag = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;得到倒数第&quot;</span> + ticketNums-- + <span class="string">&quot;票&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Ticket</span> <span class="variable">ticket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(ticket, <span class="string">&quot;小明&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(ticket, <span class="string">&quot;老师&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(ticket, <span class="string">&quot;黄牛&quot;</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>结果</p><p>不加锁: 有错误</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">小明<span class="comment">--&gt;得到倒数第10票</span></span><br><span class="line">老师<span class="comment">--&gt;得到倒数第9票</span></span><br><span class="line">黄牛<span class="comment">--&gt;得到倒数第8票</span></span><br><span class="line">老师<span class="comment">--&gt;得到倒数第7票</span></span><br><span class="line">小明<span class="comment">--&gt;得到倒数第6票</span></span><br><span class="line">黄牛<span class="comment">--&gt;得到倒数第5票</span></span><br><span class="line">老师<span class="comment">--&gt;得到倒数第4票</span></span><br><span class="line">小明<span class="comment">--&gt;得到倒数第3票</span></span><br><span class="line">黄牛<span class="comment">--&gt;得到倒数第3票</span></span><br><span class="line">老师<span class="comment">--&gt;得到倒数第2票</span></span><br><span class="line">小明<span class="comment">--&gt;得到倒数第1票</span></span><br><span class="line">黄牛<span class="comment">--&gt;得到倒数第1票</span></span><br></pre></td></tr></table></figure><p>加锁: 无误</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">小明<span class="comment">--&gt;得到倒数第10票</span></span><br><span class="line">黄牛<span class="comment">--&gt;得到倒数第9票</span></span><br><span class="line">老师<span class="comment">--&gt;得到倒数第8票</span></span><br><span class="line">小明<span class="comment">--&gt;得到倒数第7票</span></span><br><span class="line">黄牛<span class="comment">--&gt;得到倒数第6票</span></span><br><span class="line">老师<span class="comment">--&gt;得到倒数第5票</span></span><br><span class="line">黄牛<span class="comment">--&gt;得到倒数第4票</span></span><br><span class="line">小明<span class="comment">--&gt;得到倒数第3票</span></span><br><span class="line">老师<span class="comment">--&gt;得到倒数第2票</span></span><br><span class="line">黄牛<span class="comment">--&gt;得到倒数第1票</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="银行取款">银行取款</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bank</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">100</span>), <span class="string">&quot;我的账户&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">DrawingChannel</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DrawingChannel</span>(account, <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">50</span>), <span class="string">&quot;A&quot;</span>);</span><br><span class="line">    <span class="type">DrawingChannel</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DrawingChannel</span>(account, <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">100</span>), <span class="string">&quot;B&quot;</span>);</span><br><span class="line"></span><br><span class="line">    a.start();</span><br><span class="line">    b.start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//账户</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Account</span> &#123;</span><br><span class="line">  BigDecimal balance;<span class="comment">//余额</span></span><br><span class="line">  <span class="keyword">final</span> String name; <span class="comment">//卡名</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">(BigDecimal balance, String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.balance = balance;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 银行：模拟取款</span></span><br><span class="line"><span class="comment"> * * 这里之所以没用实现Runnable接口的方式是为了调用Thread类中一些方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DrawingChannel</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">  <span class="keyword">final</span> Account account; <span class="comment">//账户</span></span><br><span class="line">  BigDecimal drawingMoney; <span class="comment">//取了多少钱</span></span><br><span class="line">  BigDecimal nowMoney; <span class="comment">//现在手里有多少钱</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">DrawingChannel</span><span class="params">(Account account, BigDecimal drawingMoney, String name)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(name);</span><br><span class="line">    <span class="built_in">this</span>.account = account;</span><br><span class="line">    <span class="built_in">this</span>.drawingMoney = drawingMoney;</span><br><span class="line">    <span class="built_in">this</span>.nowMoney = <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (account) &#123;</span><br><span class="line">      <span class="comment">//判断有没有钱</span></span><br><span class="line">      <span class="keyword">if</span> (account.balance.compareTo(drawingMoney) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(account.name + <span class="string">&quot;钱不够&quot;</span> + drawingMoney + <span class="string">&quot;,&quot;</span> + <span class="built_in">this</span>.getName() + <span class="string">&quot;无法取走&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 放大错误</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        sleep(<span class="number">1000</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">      draw();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//卡内余额 = 余额 - 取的钱</span></span><br><span class="line">    account.balance = account.balance.subtract(drawingMoney);</span><br><span class="line">    System.out.println(<span class="built_in">this</span>.getName() + <span class="string">&quot;取走&quot;</span> + drawingMoney);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//手里的钱</span></span><br><span class="line">    nowMoney = nowMoney.add(drawingMoney);</span><br><span class="line"></span><br><span class="line">    System.out.println(account.name + <span class="string">&quot;余额为：&quot;</span> + account.balance);</span><br><span class="line">    System.out.println(<span class="built_in">this</span>.getName() + <span class="string">&quot;手里的钱：&quot;</span> + nowMoney);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>预期结果</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">A</span>取走<span class="number">50</span></span><br><span class="line">我的账户余额为：<span class="number">50</span></span><br><span class="line"><span class="selector-tag">A</span>手里的钱：<span class="number">50</span></span><br><span class="line">我的账户钱不够<span class="number">100</span>,<span class="selector-tag">B</span>无法取走</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="关于试错技巧">关于试错技巧</h3><ul><li><p>熟练使用.sleep()试错</p><ul><li><p>试错前</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">我的账户钱不够<span class="number">100</span>,<span class="selector-tag">B</span>无法取走</span><br><span class="line">我的账户余额为：<span class="number">50</span></span><br><span class="line"><span class="selector-tag">A</span>手里的钱：<span class="number">50</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>试错后</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">B</span> 取走 <span class="number">100</span></span><br><span class="line"><span class="selector-tag">A</span> 取走 <span class="number">50</span></span><br><span class="line">我的账户余额为：<span class="number">50</span></span><br><span class="line">我的账户余额为：<span class="number">50</span></span><br><span class="line"><span class="selector-tag">A</span> 手里的钱：<span class="number">50</span></span><br><span class="line"><span class="selector-tag">B</span> 手里的钱：<span class="number">100</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="集合与线程安全">集合与线程安全</h2><p>多个线程同时操作集合对象时可能会存在覆写(线程不安全)</p><h3 id="非线程同步">非线程同步</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestList</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">        list.add(Thread.currentThread().getName());</span><br><span class="line">      &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">    Thread.sleep(<span class="number">3000</span>); <span class="comment">// 延时,为了等上面执行完毕</span></span><br><span class="line">    System.out.println(list.size());<span class="comment">//输出：9992</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="线程同步">线程同步</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestList</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (list) &#123;</span><br><span class="line">          list.add(Thread.currentThread().getName());</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">    Thread.sleep(<span class="number">3000</span>); <span class="comment">// 延时,为了等上面执行完毕</span></span><br><span class="line">    System.out.println(list.size());<span class="comment">//输出：10000</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="线程安全集合">线程安全集合</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JUC</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">CopyOnWriteArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">        list.add(Thread.currentThread().getName());</span><br><span class="line">      &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">    System.out.println(list.size());<span class="comment">//输出：10000</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="死锁">死锁</h2><p>两线程在各自拥有一个对象的锁时都等待对方线程释放对象的锁 ; 也有可能很多线程产生环形/网状死锁.</p><ul><li><p>如下例子就会产生死锁</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//死锁：多个线程互相抱着对方需要的资源</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeadLock</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Makeup</span> <span class="variable">m1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Makeup</span>(<span class="number">0</span>, <span class="string">&quot;小黑&quot;</span>);</span><br><span class="line">    <span class="type">Makeup</span> <span class="variable">m2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Makeup</span>(<span class="number">1</span>, <span class="string">&quot;小白&quot;</span>);</span><br><span class="line"></span><br><span class="line">    m1.start();</span><br><span class="line">    m2.start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//口红</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lipstick</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//镜子</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mirror</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//化妆</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Makeup</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">  <span class="comment">//需要的资源只有一份，用static来保证只有一份</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Lipstick</span> <span class="variable">lipstick</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Lipstick</span>();</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Mirror</span> <span class="variable">mirror</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Mirror</span>();</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> choice; <span class="comment">//选择</span></span><br><span class="line">  String name; <span class="comment">//使用化妆品的人</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Makeup</span><span class="params">(<span class="type">int</span> choice, String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.choice = choice;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//化妆</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      makeup();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//化妆，互相持有对方的锁，就是需要拿到对方的资源</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">makeup</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="keyword">if</span> (choice == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (lipstick) &#123; <span class="comment">//获得口红的锁</span></span><br><span class="line">        System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;获得口红的锁&quot;</span>);</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">synchronized</span> (mirror) &#123; <span class="comment">//一秒钟后想获得镜子的锁</span></span><br><span class="line">          System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;获得镜子的锁&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (mirror) &#123; <span class="comment">//获得镜子的锁</span></span><br><span class="line">        System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;获得镜子的锁&quot;</span>);</span><br><span class="line">        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        <span class="keyword">synchronized</span> (lipstick) &#123; <span class="comment">//两秒钟后想获得口红的锁</span></span><br><span class="line">          System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;获得口红的锁&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="产生条件">产生条件</h3><ul><li><p>四个必要条件:</p><ol><li>互斥条件：一个资源每次只能被一个进程使用。</li><li>请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放。</li><li>不剥夺条件：进程已获得的资源，在未使用完之前不能强行剥夺。</li><li>循环等待条件：若干进程之间形成一种头尾相接的循环等待资源关系。</li></ol></li></ul><hr><h3 id="解决方案-2">解决方案</h3><ul><li><p>使用完同步对象后立即释放</p><ul><li>比如上面的例子中使用完<code>口红</code>或者<code>镜子</code>后未释放,再去获取另一个对象的锁,就会产生死锁了</li><li>修改: 把 makeup 改为如下</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">makeup</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">  <span class="keyword">if</span> (choice == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (lipstick) &#123; <span class="comment">// 获得口红的锁</span></span><br><span class="line">      System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;获得口红的锁&quot;</span>);</span><br><span class="line">      Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">synchronized</span> (mirror) &#123; <span class="comment">// 一秒钟后想获得镜子的锁</span></span><br><span class="line">      System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;获得镜子的锁&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (mirror) &#123; <span class="comment">// 获得镜子的锁</span></span><br><span class="line">      System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;获得镜子的锁&quot;</span>);</span><br><span class="line">      Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">synchronized</span> (lipstick) &#123; <span class="comment">// 两秒钟后想获得口红的锁</span></span><br><span class="line">      System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;获得口红的锁&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="可重入锁-ReentrantLock">可重入锁-ReentrantLock</h2><ul><li><p>ReentrantLock (也叫 RT-Lock) 类实现了 java.util.concurrent.locks.Lock 接口</p><p>与 synchronized 区别:</p><ol><li><p>ReentrantLock 是显式加解锁,它只能锁代码块</p></li><li><p>性能比 synchronized 好</p></li></ol></li><li><p>使用优先度: ReentrantLock &gt; 同步代码块(已经进入了方法体，分配了相应资源) &gt; 同步方法(在方法体之外)</p></li><li><p>注意点: 加解锁最好要在 try-finally 里</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  lock.lock();</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ( ) &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (InterruptedException ignored) &#123;</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    lock.unlock();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>例子</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLock</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">  <span class="type">int</span> <span class="variable">ticketNums</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>(); <span class="comment">// 定义Lock锁</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        lock.lock(); <span class="comment">// 加锁</span></span><br><span class="line">        <span class="keyword">if</span> (ticketNums &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;拿到了第&quot;</span> + ticketNums-- + <span class="string">&quot;票&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock(); <span class="comment">// 解锁</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          Thread.sleep(<span class="number">500</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">TestLock</span> <span class="variable">testLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock, <span class="string">&quot;a&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock, <span class="string">&quot;b&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock, <span class="string">&quot;c&quot;</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>结果</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">a</span>--&gt;</span>拿到了第<span class="number">10</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">9</span>票</span><br><span class="line"><span class="function"><span class="title">b</span>--&gt;</span>拿到了第<span class="number">8</span>票</span><br><span class="line"><span class="function"><span class="title">b</span>--&gt;</span>拿到了第<span class="number">7</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">6</span>票</span><br><span class="line"><span class="function"><span class="title">a</span>--&gt;</span>拿到了第<span class="number">5</span>票</span><br><span class="line"><span class="function"><span class="title">b</span>--&gt;</span>拿到了第<span class="number">4</span>票</span><br><span class="line"><span class="function"><span class="title">a</span>--&gt;</span>拿到了第<span class="number">3</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">2</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">1</span>票</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="多线程与循环控制">多线程与循环控制</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLock</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">  <span class="type">int</span> <span class="variable">ticketNums</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>(); <span class="comment">// 定义Lock锁</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (ticketNums &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        lock.lock(); <span class="comment">// 加锁</span></span><br><span class="line">        Thread.sleep(<span class="number">500</span>);</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;拿到了第&quot;</span> + ticketNums-- + <span class="string">&quot;票&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock(); <span class="comment">// 解锁</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">TestLock</span> <span class="variable">testLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock, <span class="string">&quot;a&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock, <span class="string">&quot;b&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock, <span class="string">&quot;c&quot;</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>上面代码 while 循环会存在判断失误</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">10</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">9</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">8</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">7</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">6</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">5</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">4</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">3</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">2</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">1</span>票</span><br><span class="line"><span class="function"><span class="title">b</span>--&gt;</span>拿到了第<span class="number">0</span>票</span><br><span class="line"><span class="function"><span class="title">a</span>--&gt;</span>拿到了第-<span class="number">1</span>票</span><br></pre></td></tr></table></figure></li><li><p>ticketNums 在判断之后被多次修改</p><p>上面 10~1 次都是 c 线程执行的,它执行后轮到 b 和 a</p><p>但是 b 与 a 线程实际上是在<code>ticketNums=10</code>时进入的循环,所以会导致<code>-1</code>出现</p><p>所以建议遇到多线程循环控制时,直接<code>while(true)</code>,然后在内部用<code>if</code></p><p>(反过来想: 是因为 lock 不能在循环之外加)</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="延迟对多线程的影响">延迟对多线程的影响</h2><blockquote><p>下面三个例子数据都没错,关键看并发数量和执行时间</p></blockquote><h3 id="一-2">一</h3><ul><li><p>瞬间执行完,资源被单一线程全部抢占 (并非不合理,只不过是处理器没分配到 B,C)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLock</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">  <span class="type">int</span> <span class="variable">ticketNums</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>(); <span class="comment">// 定义Lock锁</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        lock.lock(); <span class="comment">// 加锁</span></span><br><span class="line">        <span class="keyword">if</span> (ticketNums &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;拿到了第&quot;</span> + ticketNums-- + <span class="string">&quot;票&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock(); <span class="comment">// 解锁</span></span><br><span class="line">        <span class="comment">// try &#123;</span></span><br><span class="line">        <span class="comment">//   Thread.sleep(500);</span></span><br><span class="line">        <span class="comment">// &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line">        <span class="comment">//   e.printStackTrace();</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">TestLock</span> <span class="variable">testLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock, <span class="string">&quot;a&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock, <span class="string">&quot;b&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(testLock, <span class="string">&quot;c&quot;</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">9</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">8</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">7</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">6</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">5</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">4</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">3</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">2</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">1</span>票</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="二-2">二</h3><ul><li><p>给他加个延迟试试: 三线程并行,资源分配合理</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      lock.lock(); <span class="comment">// 加锁</span></span><br><span class="line">      <span class="keyword">if</span> (ticketNums &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;拿到了第&quot;</span> + ticketNums-- + <span class="string">&quot;票&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      lock.unlock(); <span class="comment">// 解锁</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">500</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">b</span>--&gt;</span>拿到了第<span class="number">10</span>票</span><br><span class="line"><span class="function"><span class="title">a</span>--&gt;</span>拿到了第<span class="number">9</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">8</span>票</span><br><span class="line"><span class="function"><span class="title">b</span>--&gt;</span>拿到了第<span class="number">7</span>票</span><br><span class="line"><span class="function"><span class="title">a</span>--&gt;</span>拿到了第<span class="number">6</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">5</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">4</span>票</span><br><span class="line"><span class="function"><span class="title">a</span>--&gt;</span>拿到了第<span class="number">3</span>票</span><br><span class="line"><span class="function"><span class="title">b</span>--&gt;</span>拿到了第<span class="number">2</span>票</span><br><span class="line"><span class="function"><span class="title">b</span>--&gt;</span>拿到了第<span class="number">1</span>票</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="三">三</h3><ul><li><p>再试试延迟之后解开同步锁: 单线执行,资源分配不平衡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      lock.lock(); <span class="comment">// 加锁</span></span><br><span class="line">      <span class="keyword">if</span> (ticketNums &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;拿到了第&quot;</span> + ticketNums-- + <span class="string">&quot;票&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">500</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">      lock.unlock(); <span class="comment">// 解锁</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">a</span>--&gt;</span>拿到了第<span class="number">10</span>票</span><br><span class="line"><span class="function"><span class="title">a</span>--&gt;</span>拿到了第<span class="number">9</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">8</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">7</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">6</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">5</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">4</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">3</span>票</span><br><span class="line"><span class="function"><span class="title">c</span>--&gt;</span>拿到了第<span class="number">2</span>票</span><br><span class="line"><span class="function"><span class="title">b</span>--&gt;</span>拿到了第<span class="number">1</span>票</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="线程通信-wait-notify">线程通信-wait-notify</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Clerk</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> productNumber; <span class="comment">// 售货员手中的商品数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProducterAndCustomer</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Clerk</span> <span class="variable">clerk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Clerk</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">      <span class="keyword">while</span> (<span class="literal">true</span>) &#123; <span class="comment">//一直生产</span></span><br><span class="line">        <span class="keyword">synchronized</span> (clerk) &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (clerk.productNumber == <span class="number">0</span>) &#123;</span><br><span class="line">              System.out.println(<span class="string">&quot;产品为0, 开始生产&quot;</span>);</span><br><span class="line">              <span class="keyword">while</span> (clerk.productNumber &lt; <span class="number">5</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;库存: &quot;</span> + clerk.productNumber++);</span><br><span class="line">                Thread.sleep(<span class="number">500</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              clerk.notifyAll();</span><br><span class="line">              <span class="comment">//商品数不为0时让clerk等待</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">// clerk.wait();</span></span><br><span class="line">              clerk.wait();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="string">&quot;生产者&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">      <span class="keyword">while</span> (<span class="literal">true</span>) &#123; <span class="comment">//一直消费</span></span><br><span class="line">        <span class="keyword">synchronized</span> (clerk) &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (clerk.productNumber == <span class="number">5</span>) &#123;</span><br><span class="line">              System.out.println(<span class="string">&quot;产品为5,开始消费&quot;</span>);</span><br><span class="line">              <span class="keyword">while</span> (clerk.productNumber &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;库存: &quot;</span> + clerk.productNumber--);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                  Thread.sleep(<span class="number">500</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                  e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              clerk.notifyAll();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">// clerk.wait();</span></span><br><span class="line">              clerk.wait();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="string">&quot;消费者&quot;</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>结果</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">产品为0, 开始生产</span><br><span class="line"><span class="section">库存: 0</span></span><br><span class="line"><span class="section">库存: 1</span></span><br><span class="line"><span class="section">库存: 2</span></span><br><span class="line"><span class="section">库存: 3</span></span><br><span class="line"><span class="section">库存: 4</span></span><br><span class="line">产品为5,开始消费</span><br><span class="line"><span class="section">库存: 5</span></span><br><span class="line"><span class="section">库存: 4</span></span><br><span class="line"><span class="section">库存: 3</span></span><br><span class="line"><span class="section">库存: 2</span></span><br><span class="line"><span class="section">库存: 1</span></span><br><span class="line">产品为0, 开始生产</span><br><span class="line"><span class="section">库存: 0</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="线程池">线程池</h2><ul><li><p>线程池的出现是为了方便大量的线程创建,回收和管理</p></li><li><p>需要了解 <code>ExecutorService</code> 线程池接口;以及 <code>Executors</code> 线程池工具类.</p><ul><li><p>corePoolSize: 核心池的大小</p></li><li><p>maximumPoolSize:最大线程数</p></li><li><p>keepAliveTime: 线程没有任务时最多保持多长时间后会终止</p></li><li><p>void execute(Runnable command) :执行任务/命令,没有返回值，一般用来执 Runnable</p></li><li><p><T> Future<T> submit(Callable<T> task) :执行任务,有返回值，一般用来执行 Callable</p></li></ul></li><li><p>例子</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestThreadPool</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">    <span class="comment">// 1.创建服务，创建线程池</span></span><br><span class="line">    <span class="type">ExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">      System.out.println(Thread.currentThread().getName() + <span class="string">&quot; runnable&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    Callable&lt;String&gt; callable = () -&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> Thread.currentThread().getName() + <span class="string">&quot; callable&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 执行</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">      service.execute(runnable);</span><br><span class="line">      System.out.println(service.submit(callable).get());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.关闭连接</span></span><br><span class="line">    service.shutdown();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  pool-1-thread-1 runnable</span></span><br><span class="line"><span class="comment">  pool-1-thread-2 callable</span></span><br><span class="line"><span class="comment">  pool-1-thread-3 runnable</span></span><br><span class="line"><span class="comment">  pool-1-thread-4 callable</span></span><br><span class="line"><span class="comment">  pool-1-thread-5 runnable</span></span><br><span class="line"><span class="comment">  pool-1-thread-6 callable</span></span><br><span class="line"><span class="comment">  pool-1-thread-7 runnable</span></span><br><span class="line"><span class="comment">  pool-1-thread-8 callable</span></span><br><span class="line"><span class="comment">  pool-1-thread-9 runnable</span></span><br><span class="line"><span class="comment">  pool-1-thread-10 callable</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 多线程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 多线程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大学wangke&lt;--&gt;Coder</title>
      <link href="/post/others/%E7%BD%91%E8%AF%BE/"/>
      <url>/post/others/%E7%BD%91%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-03-21 17:10:39 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\others\网课.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%A3%B0%E6%98%8E">声明</a></li><li><a href="#%E9%9C%80%E8%A6%81">需要</a></li><li><a href="#%E5%AE%89%E8%A3%85-tampermonkey">安装 Tampermonkey</a></li><li><a href="#%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC">安装脚本</a></li><li><a href="#%E5%A5%BD%E5%95%A6">好啦</a></li><li><a href="#%E5%B0%8F%E5%B0%BE%E5%B7%B4">小尾巴</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="声明">声明</h2><ul><li><p>特意叫<code>wangke</code>是因为不想被 SEO 索引量太高,避免惹上一些麻烦事</p></li><li><p>这篇文章可能会影响到一些<code>二道贩子</code>的生意,希望别太生气…</p></li><li><p>对于脚本开发者来说,用户量提升显然是更好,所以此文章<code>对脚本开发者抱有支持肯定态度</code>,崇尚技术是我们的本分.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="需要">需要</h2><ul><li><p>电脑或者笔记本一个</p></li><li><p>浏览器一个</p><ul><li><p>(比如 Chrome,Edge,360,QQ,火狐浏览器都行)</p></li><li><p><code>IE浏览器不行!</code></p></li><li><p><code>最好是 Edge</code>,Windows 自带,而且安装插件不需要梯子.</p></li></ul></li></ul><hr><h2 id="安装-Tampermonkey">安装 Tampermonkey</h2><img src="https://www.helloimg.com/images/2022/02/27/GVmEnR.png" alt="20210220172439" /><ul><li><p>点扩展,进去搜<code>tampermonkey</code></p><img src="https://www.helloimg.com/images/2022/02/27/GVm4v0.png" alt="20210220172533" /></li><li><p>第一个就是,点获取</p></li></ul><hr><h2 id="安装脚本">安装脚本</h2><ul><li>上面的 tampermonkey 是脚本管理器,然后需要找脚本来安装</li></ul><blockquote><p><a href="https://greasyfork.org/zh-CN">Greasy Fork</a></p></blockquote><ul><li><p>进入上面的链接,直接搜需要的脚本,比如<code>超*</code>,<code>学x通</code></p></li><li><p>然后随便找随便试,有很多脚本是失效的或者开发中的,有 bug,具体用哪个看个人喜好了,此处不做推荐.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="好啦">好啦</h2><ul><li>装好了就打开对应 wangke 页面试试,可以的话就好,不行的话再换其他的脚本再试.</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="小尾巴">小尾巴</h2><ul><li>其实…对于做技术的写这么个文章是非常羞耻の…</li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> javascript </tag>
            
            <tag> 网课 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🍔Lambda表达式</title>
      <link href="/post/Java/lambda/"/>
      <url>/post/Java/lambda/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-02-27 16:24:21 * @FilePath: \Blog-private\source\_posts\Java\lambda.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%8F%82%E7%85%A7">参照</a></li><li><a href="#%E7%AE%80%E5%8D%95%E8%AE%B2%E8%A7%A3">简单讲解</a></li><li><a href="#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">快速上手</a></li><li><a href="#%E8%BF%9B%E4%B8%80%E6%AD%A5">进一步</a></li><li><a href="#%E4%BD%9C%E7%94%A8%E5%9F%9F">作用域</a></li><li><a href="#foreach">forEach</a></li><li><a href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B">多线程</a><ul><li><a href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E7%B1%BB">创建新类</a></li><li><a href="#%E5%8C%BF%E5%90%8D%E5%86%85%E9%83%A8%E7%B1%BB">匿名内部类</a></li><li><a href="#lambda">Lambda</a></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-3">借物表</h2><blockquote><p>在此文章记录了: <a href="../../others/LearnWay#lambda">😍Weidows-の成长路线#lambda</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="简单讲解">简单讲解</h2><ul><li><p>Lambda 是函数话编程,Java8 引入的特性,有广泛使用.</p></li><li><p>主要是用作解决匿名内部类 <code>overwrite</code> 的问题,替代可函数化的 <code>interface</code> 作为参数进行传递</p></li></ul><hr><h2 id="快速上手">快速上手</h2><ul><li><p>比如这里有如下代码,写线程时很常见,Runnable 是一个函数化的接口,可以用 Lambda 简化</p><ul><li><code>函数化接口,就是内部只有一个抽象方法的接口.</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123; <span class="comment">// 接口名</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123; <span class="comment">// 方法名</span></span><br><span class="line">    System.out.println(<span class="string">&quot;Thread run()&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).start();</span><br></pre></td></tr></table></figure></li><li><p>如下</p><ul><li>省略接口名和方法名</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; System.out.println(<span class="string">&quot;新的线程&quot;</span>)).start();</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="进一步">进一步</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Lambda</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Lambda</span> <span class="variable">tester</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Lambda</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 类型声明</span></span><br><span class="line">    <span class="type">MathOperation</span> <span class="variable">addition</span> <span class="operator">=</span> (<span class="type">int</span> a, <span class="type">int</span> b) -&gt; a + b;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 不用类型声明</span></span><br><span class="line">    <span class="type">MathOperation</span> <span class="variable">subtraction</span> <span class="operator">=</span> (a, b) -&gt; a - b;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 大括号中的返回语句</span></span><br><span class="line">    <span class="type">MathOperation</span> <span class="variable">multiplication</span> <span class="operator">=</span> (<span class="type">int</span> a, <span class="type">int</span> b) -&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> a * b;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 没有大括号及返回语句</span></span><br><span class="line">    <span class="type">MathOperation</span> <span class="variable">division</span> <span class="operator">=</span> (<span class="type">int</span> a, <span class="type">int</span> b) -&gt; a / b;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;10 + 5 = &quot;</span> + tester.operate(<span class="number">10</span>, <span class="number">5</span>, addition));</span><br><span class="line">    System.out.println(<span class="string">&quot;10 - 5 = &quot;</span> + tester.operate(<span class="number">10</span>, <span class="number">5</span>, subtraction));</span><br><span class="line">    System.out.println(<span class="string">&quot;10 x 5 = &quot;</span> + tester.operate(<span class="number">10</span>, <span class="number">5</span>, multiplication));</span><br><span class="line">    System.out.println(<span class="string">&quot;10 / 5 = &quot;</span> + tester.operate(<span class="number">10</span>, <span class="number">5</span>, division));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 不用括号</span></span><br><span class="line">    <span class="type">GreetingService</span> <span class="variable">greetService1</span> <span class="operator">=</span> message -&gt; System.out.println(<span class="string">&quot;Hello &quot;</span> + message);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用括号</span></span><br><span class="line">    <span class="type">GreetingService</span> <span class="variable">greetService2</span> <span class="operator">=</span> (message) -&gt; System.out.println(<span class="string">&quot;Hello &quot;</span> + message);</span><br><span class="line"></span><br><span class="line">    greetService1.sayMessage(<span class="string">&quot;Runoob&quot;</span>);</span><br><span class="line">    greetService2.sayMessage(<span class="string">&quot;Google&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">operate</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, MathOperation mathOperation)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> mathOperation.operation(a, b);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    10 + 5 = 15</span></span><br><span class="line"><span class="comment">    10 - 5 = 5</span></span><br><span class="line"><span class="comment">    10 x 5 = 50</span></span><br><span class="line"><span class="comment">    10 / 5 = 2</span></span><br><span class="line"><span class="comment">    Hello Runoob</span></span><br><span class="line"><span class="comment">    Hello Google</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MathOperation</span> &#123;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">operation</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">GreetingService</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">sayMessage</span><span class="params">(String message)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// void sayMessage1(String message, String message1); // 比如这里出现第二个抽象方法,这个接口就不是函数化接口了.无法使用lambda表达式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="作用域">作用域</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Lambda2</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 这里的局部变量就算不声明final也可以被Lambda表达式引用</span></span><br><span class="line"><span class="comment">     * 但是无论声不声明,被引用后后续都不可修改,会报错</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    Converter&lt;Integer, String&gt; s = (param) -&gt; System.out.println(String.valueOf(param + num));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Lambda表达式参数不能与外部变量同名,编译报错</span></span><br><span class="line">    <span class="comment">// Converter&lt;Integer, String&gt; s1 = (num) -&gt; System.out.println(num);</span></span><br><span class="line"></span><br><span class="line">    s.convert(<span class="number">2</span>); <span class="comment">// 输出结果为 3</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Converter</span>&lt;T1, T2&gt; &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">convert</span><span class="params">(<span class="type">int</span> i)</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="forEach">forEach</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForEach</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="string">&quot;I&quot;</span>, <span class="string">&quot;love&quot;</span>, <span class="string">&quot;you&quot;</span>, <span class="string">&quot;too&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用增强for循环迭代</span></span><br><span class="line">    <span class="keyword">for</span> (String str : list) &#123;</span><br><span class="line">      <span class="keyword">if</span> (str.length() &gt; <span class="number">3</span>)</span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// implement Consumer interface</span></span><br><span class="line">    list.forEach(<span class="keyword">new</span> <span class="title class_">Consumer</span>&lt;String&gt;() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(String t)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t.length() &gt; <span class="number">3</span>)</span><br><span class="line">          System.out.println(t);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Lambda implement Consumer</span></span><br><span class="line">    list.forEach(s -&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (s.length() &gt; <span class="number">3</span>)</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="多线程">多线程</h2><ul><li><p>例如我们需要一个实现 Runnable 接口的名为 <code>myYield</code>的对象</p></li><li><p>下面是三种方法:</p></li></ul><hr><h3 id="创建新类">创建新类</h3><ul><li>复杂,对于像是 Runnable 这种函数化接口,这样实现起来麻烦</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestYield</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">MyYield</span> <span class="variable">myYield</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyYield</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(myYield, <span class="string">&quot;a&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(myYield, <span class="string">&quot;b&quot;</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyYield</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;线程开始执行&quot;</span>);</span><br><span class="line">    Thread.yield(); <span class="comment">//礼让</span></span><br><span class="line">    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;线程停止执行&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="匿名内部类">匿名内部类</h3><ul><li>比上面的简单些,但还可以用 Lambda 更简化</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestYield</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">myYield</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;线程开始执行&quot;</span>);</span><br><span class="line">        Thread.yield(); <span class="comment">//礼让</span></span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;线程停止执行&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(myYield, <span class="string">&quot;a&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(myYield, <span class="string">&quot;b&quot;</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Lambda">Lambda</h3><ul><li>在会用 Lambda 情况下,代码可读性和简洁度大于匿名内部类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestYield</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">myYield</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">      System.out.println(Thread.currentThread().getName() + <span class="string">&quot;线程开始执行&quot;</span>);</span><br><span class="line">      Thread.yield(); <span class="comment">//礼让</span></span><br><span class="line">      System.out.println(Thread.currentThread().getName() + <span class="string">&quot;线程停止执行&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(myYield, <span class="string">&quot;a&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(myYield, <span class="string">&quot;b&quot;</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> lambda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😎日常健身小技巧</title>
      <link href="/post/life/%E5%81%A5%E8%BA%AB/"/>
      <url>/post/life/%E5%81%A5%E8%BA%AB/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-02-17 16:55:58 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\life\健身.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E8%B5%B7%E5%9B%A0">起因</a></li><li><a href="#%E7%AE%80%E8%BF%B0">简述</a></li><li><a href="#%E5%86%85%E9%83%A8%E5%9B%A0%E7%B4%A0">内部因素</a></li><li><a href="#%E8%A1%94%E6%8E%A5">衔接</a></li><li><a href="#%E5%A4%96%E9%83%A8%E5%9B%A0%E7%B4%A0">外部因素</a></li><li><a href="#%E7%BB%93%E5%B0%BE">结尾</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="起因">起因</h2><ul><li><p>我们为甚么要<code>健身</code>?</p><ol><li><p>为了增肌塑形</p></li><li><p>为了保持身材</p></li><li><p>为了减肥</p></li><li><p>为了理想和追求</p></li><li><p>为了吃饭</p></li></ol><hr></li></ul><blockquote><p>发展体育运动，增强人民体质。体育于吾人占第一之位置。体育之效，在于强筋骨，增知识，调感情，强意志。体育者，人类自养生之道，是身体平均发达，而有规则次序之可言者也。德志皆寄予体，无体是无德志也。文明其精神，野蛮其体魄。——毛泽东</p></blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVmeK6.png" alt="20210217155546" /><hr><h2 id="简述">简述</h2><ul><li><p>我身材是第一与第二种中间的,身材在<code>走形</code>与<code>塑形</code>之间摇摆~,不过是为了第四种健身.</p><img src="https://www.helloimg.com/images/2022/02/27/GVP6Mb.gif" alt="25b219760d8fe18a" /></li><li><p>刚刚锻炼完,跟打了鸡血一样,看时间是不到十二点,晚上.</p><ul><li>于是寻思随随便便写一篇小文章,或许对别人有帮助.</li></ul></li><li><p>ummmm,粗略来算的话,从放假第二天到今天,<code>连续 50 多天</code>了,其实也有<code>想偷懒</code>或者<code>退缩</code>的时候</p><ul><li><p>对我个人而言其实没啥,这个日常锻炼是我由心而发的,并没有什么<code>外部要求</code>或者<code>计划</code>.</p></li><li><p>每天锻炼时间,强度,动作都是有变化的</p></li></ul></li><li><p>这里可没有什么<code>特殊动作</code>能让你一下子爱上健身或者快速减肥.<br><img src="https://www.helloimg.com/images/2022/02/27/GVmXTP.png" alt="20210217155428" /></p></li><li><p>下面说说我是怎么坚持下来的,也不能说是坚持,应该说是<code>融入</code>进来的吧:</p><img src="https://www.helloimg.com/images/2022/02/27/GVmxFn.png" alt="20210217155403" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="内部因素">内部因素</h2><blockquote><p>多多少少人是受思想控制的生物,控制不好的话还是先学学怎么<code>静心</code>好啦~</p></blockquote><ul><li><p>就比如我们健身初期很容易遇到</p><ol><li><p><code>啊,今天好累,算了吧</code></p></li><li><p><code>这辈子也练不出来腹肌了...</code></p></li><li><p><code>健身干啥?我身材还行啊?</code></p></li></ol><img src="https://www.helloimg.com/images/2022/02/27/GVmaYg.png" alt="20210217155331" /></li></ul><hr><ul><li><p>比如第一条,也是几乎<code>百分之百的人</code>会遇到的<code>瓶颈</code>,其实反过来讲,出现这种状况不是偶然,是因为今天完全没给健身做铺垫.</p><blockquote><p>我们所经历的比较顺利的事情大多是铺垫比较好的,无论这个垫是自己铺的还是别人铺的.</p></blockquote><ul><li><p>如今这个时代,我感觉身体就像是打工人,自己的思想就像是主任,我们被别人压榨后还要无止尽作贱自己的身体,哈哈哈,恶性循环</p></li><li><p>所以,多多少少给身体留出点时间吧!我在这替你身子球球你了 😝</p></li></ul><blockquote><p><code>你需要做的,不必逼迫今天的自己,好好休息就好,也别放过明天的你,合理安排,空出半小时!</code></p></blockquote><hr></li><li><p>不知道您对第二条的态度如何,我是认为这是没有认真健身:</p><ul><li><p>健身会给人一种<code>人格性</code>的魅力,不只是在别人看来,对自己也是一样,要是说的话应该叫<code>&quot;内外兼修&quot;</code></p></li><li><p>能坚持健身的人绝不会怠惰和自卑至此,喜欢运动的人笑起来都很灿烂.</p></li><li><p>可以在周围的圈子找找,那些单纯喜欢运动的人,无论美丑,都自带一种<code>魅力气场</code>😎</p></li><li><p>啊,褒贬有些过度了…(我不是体育生啊)</p></li><li><p>认认真真的走进这个道门,你会发现自己的仙力与美丽的!</p></li></ul><hr></li><li><p>其实,我感觉第三条这种是最要命的…</p><ul><li><p>好的来说是&quot;满足于现状&quot;,不好来说是&quot;不思进取&quot;</p></li><li><p>当然,没人会这样明说的,不过多多少少会有这种人,这种人在身边要么你投奔他去,要么你被他拉去…</p></li></ul><blockquote><p><code>想健身或者减肥最快的方法,应该是陪着喜欢健身的人吃吃玩玩,适应与同化过程就是蜕变过程.</code></p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="衔接">衔接</h2><ul><li><p>上面好一大段字,可是读完了还是不知道怎么做才好</p><img src="https://www.helloimg.com/images/2022/02/27/GVm3eM.png" alt="20210217155255" /></li><li><p>别怕,怎么做下面再娓娓道来~</p></li></ul><hr><h2 id="外部因素">外部因素</h2><blockquote><p>假舆马者，非利足也，而致千里；假舟楫者，非能水也，而绝江河。君子非生异也，善假于物也</p></blockquote><ul><li><p>合理的利用身体,也是健身的一大要素.</p><hr></li><li><p>健身前务必花几分钟做一下全身热身!<code>很重要很重要很重要!</code></p><ul><li>其实,上面那句话没啥用,没人会注意这种唠叨~我推荐的是戴上耳机,播放个比较带感的音乐,全身<code>扭一扭</code>,<code>舔一舔</code>,<code>泡~</code> 啊跑题了 🤣</li></ul><hr></li><li><p>然后,我个人非常推荐的是:<code>拳击</code></p><ul><li>没错,就是拳击,为啥呢?</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVmFs9.png" alt="20210217155139" /><ul><li><p>举个例子:大家都跑过步,拿三千米来说,应该是 1~2 千米时感觉最累了,为啥呢?</p></li><li><p>前一千米会把体内二氧化碳浓度基本拉满了,氧气不够,大脑会抑制你运动,发出<code>好累啊</code>的信号,肾上腺素浓度还没太高,不会致使你太过兴奋</p></li><li><p>过了两千米,基本身体适应了,肾上腺素浓度上来了,就感觉<code>我好兴奋,能跑十公里</code></p></li><li><p>所以说有个阶段性,一公里和二公里差别很大,三公里和四公里差别就没那么大了</p></li><li><p>一定程度上得益于<code>肾上腺素</code>.</p></li></ul><hr></li><li><p>回归正题,为啥是<code>拳击</code>?</p><ul><li><p><code>拳击可以利用相对较小的能量激发很猛烈的肾上腺素</code></p></li><li><p>一是刚热身后最好不要太过猛烈的运动,而且多数人也不会选择用猛烈运动健身</p></li><li><p>二是拳击简单有效,不依赖场地设备.打上几个重拳就能做到一个百米冲刺的心跳感,你选哪个?</p></li></ul><hr></li><li><p>打几组拳击,鸡血上头了!</p><ul><li><p>这时你会发现,就算你不喜欢运动,自己也会想动动身体</p></li><li><p>注意这个鸡血其实是有时效性的,效果下降很快,所以带好耳机,最好不要中途拿起手机玩起来,热血劲儿下去了就不想动了.</p></li><li><p>这是<code>我最推荐</code>的健身方式,有些原始和小野蛮,毕竟人也是兽啊.</p></li></ul><blockquote><p>失去人性,失去很多;失去兽性,失去一切.</p></blockquote></li><li><p>另外,其实对于大多数人来讲,<code>不建议磕蛋白粉</code>,运动量绝对不够,会长肉肉的~,有条件的话可以试试<code>氮泵</code>,或者直接红牛也可以,都是兴奋剂.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="结尾">结尾</h2><ul><li>偷懒真香( 🤣</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVmPvX.png" alt="20210217155228" /><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 健身 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>💯Vue.log~(壹)</title>
      <link href="/post/Web/Vue/Vue-1/"/>
      <url>/post/Web/Vue/Vue-1/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-03-17 23:48:29 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Web\Vue\Vue-1.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%89%8D%E7%AB%AF%E5%88%86%E7%A6%BB">前端分离</a><ul><li><a href="#%E9%80%BB%E8%BE%91">逻辑</a></li><li><a href="#%E4%BA%8B%E4%BB%B6">事件</a></li></ul></li><li><a href="#%E8%A7%86%E5%9B%BE">视图</a></li><li><a href="#%E9%80%9A%E4%BF%A1">通信</a></li><li><a href="#vue-%E7%AE%80%E6%9E%90">Vue 简析</a><ul><li><a href="#%E8%A7%86%E5%9B%BE-1">视图</a></li><li><a href="#%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1">网络通信</a></li><li><a href="#%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC">页面跳转</a></li><li><a href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86">状态管理</a></li><li><a href="#vue-ui">Vue-UI</a></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="前端分离">前端分离</h2><h3 id="逻辑">逻辑</h3><ul><li>判断</li><li>循环</li></ul><hr><h3 id="事件-2">事件</h3><ul><li><p>浏览器事件</p><ul><li>window</li><li>document</li></ul></li><li><p>dom 事件</p><ul><li>增删,遍历,修改等元素</li></ul><hr></li><li><p>JQuery</p></li><li><p>Vue</p></li><li><p>React</p></li></ul><hr><h2 id="视图">视图</h2><blockquote><p>HTML + CSS</p></blockquote><ul><li>BootStrap</li><li>LayUI</li></ul><hr><h2 id="通信">通信</h2><ul><li>xhr</li><li>JQuery-&gt;Ajax</li><li>Vue-&gt;axios</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Vue-简析">Vue 简析</h2><blockquote><p>SOC 关注点分离原则.</p></blockquote><h3 id="视图-2">视图</h3><ul><li>HTML+css+js</li></ul><hr><h3 id="网络通信">网络通信</h3><ul><li>axios</li></ul><hr><h3 id="页面跳转">页面跳转</h3><ul><li>vue-router</li></ul><hr><h3 id="状态管理">状态管理</h3><ul><li>vuex</li></ul><hr><h3 id="Vue-UI">Vue-UI</h3><ul><li>飞冰 ice (阿里)</li></ul><blockquote><p>搁置 ing</p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> javascript </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🌭回顾一下多线程-壹</title>
      <link href="/post/Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/1/"/>
      <url>/post/Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/1/</url>
      
        <content type="html"><![CDATA[<h1>回顾一下多线程-壹</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-02-08 18:59:13 * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:42:18 * @FilePath: \Blog-private\source\_posts\Java\多线程\1.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E5%9B%9E%E9%A1%BE%E4%B8%80%E4%B8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E5%A3%B9">回顾一下多线程-壹</a><ul><li><a href="#maven-%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5-jar-%E5%8C%85">Maven 自动导入 jar 包</a></li><li><a href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0-%E5%B9%B6%E8%A1%8C%E4%B8%8B%E8%BD%BD">多线程实现-并行下载</a><ul><li><a href="#extends-thread">extends-Thread</a></li><li><a href="#implements-runnable-%E6%9C%80%E5%B8%B8%E7%94%A8">implements-Runnable-最常用</a></li><li><a href="#implements-callable">implements-Callable</a></li></ul></li><li><a href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86">静态代理</a></li><li><a href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81">生命周期-线程状态</a></li><li><a href="#thread-%E6%93%8D%E4%BD%9C">Thread-操作</a><ul><li><a href="#%E5%A6%82%E4%BD%95%E5%81%9C%E6%AD%A2%E7%BA%BF%E7%A8%8B">如何停止线程</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E4%BC%91%E7%9C%A0-sleep">线程休眠-sleep</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E8%AE%A9%E6%AD%A5-yield">线程让步-yield</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E6%8F%92%E9%98%9F-join">线程插队-Join</a></li><li><a href="#%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7-priority">线程优先级-Priority</a></li><li><a href="#%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B-daemon">守护线程-daemon</a></li></ul></li></ul></li></ul></blockquote><ul><li><p>main()为主线程，系统的入口</p></li><li><p>一个进程中，如果开辟了多个线程，线程的运行由调度器安排，调度器是与操作系统紧密相关的，先后顺序是不能认为干预的(无法预测线程运行顺序)</p></li><li><p>程序运行时,默认会有多个线程,比如 main 和 gc(垃圾回收器) 等等</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Maven-自动导入-jar-包">Maven 自动导入 jar 包</h2><ul><li><p>比如我们要用 Maven 导入 <a href="https://mvnrepository.com/artifact/commons-io/commons-io">Apache 的 commons-io</a></p><p>然后选择一个版本点进去</p><img src="https://www.helloimg.com/images/2022/02/27/GVP0Qc.png" alt="20210211010341" /><p>复制框里的内容,找到 Java 项目<code>pom.xml</code>文件,粘贴到如下地方</p><img src="https://www.helloimg.com/images/2022/02/27/GV4ttE.png" alt="20210211010614" /><p>然后右键<code>pom.xml</code>-&gt;Maven-&gt;重新加载项目.</p><img src="https://www.helloimg.com/images/2022/02/27/GVSRz6.png" alt="20210211010920" /><p>在 VScode 内的话也有这种操作:</p><img src="https://www.helloimg.com/images/2022/02/27/GVS7C6.png" alt="20210211011109" /><p>当然关闭然后重新打开 IDE 也是可以的,Maven 会自动更新,更新后如下,包就导进来了:</p><img src="https://www.helloimg.com/images/2022/02/27/GVAD6P.png" alt="20210211011240" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="多线程实现-并行下载">多线程实现-并行下载</h2><h3 id="extends-Thread">extends-Thread</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Downloader1</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String url;</span><br><span class="line">  <span class="keyword">private</span> String fileName;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Downloader1</span><span class="params">(String url, String fileName)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.url = url;</span><br><span class="line">    <span class="built_in">this</span>.fileName = fileName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      FileUtils.copyURLToFile(<span class="keyword">new</span> <span class="title class_">URL</span>(url), <span class="keyword">new</span> <span class="title class_">File</span>(fileName));</span><br><span class="line">      System.out.println(<span class="string">&quot;Downloader1 is running&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Downloader1</span>(<span class="string">&quot;https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png&quot;</span>, <span class="string">&quot;divider.png&quot;</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="implements-Runnable-最常用">implements-Runnable-最常用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> twenty.november.thread.downloader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.MalformedURLException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Downloader</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String url;</span><br><span class="line">  <span class="keyword">private</span> String fileName;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Downloader</span><span class="params">(String url, String fileName)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.url = url;</span><br><span class="line">    <span class="built_in">this</span>.fileName = fileName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      FileUtils.copyURLToFile(<span class="keyword">new</span> <span class="title class_">URL</span>(url), <span class="keyword">new</span> <span class="title class_">File</span>(fileName));</span><br><span class="line">      System.out.println(<span class="string">&quot;Download finished.&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Downloader</span>(<span class="string">&quot;https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png&quot;</span>,</span><br><span class="line">        <span class="string">&quot;./1.png&quot;</span>)).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Downloader</span>(<span class="string">&quot;https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png&quot;</span>,</span><br><span class="line">        <span class="string">&quot;./2.png&quot;</span>)).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="implements-Callable">implements-Callable</h3><p>Callable 与 Runnable 区别为它可以带有返回值类型,可以抛出异常</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> twenty.november.thread.downloader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.MalformedURLException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Future;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Downloader2</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;Object&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> String url;</span><br><span class="line">  <span class="keyword">private</span> String fileName;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> MalformedURLException, IOException &#123;</span><br><span class="line">    FileUtils.copyURLToFile(<span class="keyword">new</span> <span class="title class_">URL</span>(url), <span class="keyword">new</span> <span class="title class_">File</span>(fileName));</span><br><span class="line">    System.out.println(fileName + <span class="string">&quot;下载完成&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Downloader2</span><span class="params">(String url, String fileName)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.url = url;</span><br><span class="line">    <span class="built_in">this</span>.fileName = fileName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 创建线程池</span></span><br><span class="line">    <span class="type">ExecutorService</span> <span class="variable">ser</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提交执行</span></span><br><span class="line">    Future&lt;Object&gt; submit1 = ser</span><br><span class="line">        .submit(<span class="keyword">new</span> <span class="title class_">Downloader2</span>(<span class="string">&quot;https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;./1.png&quot;</span>));</span><br><span class="line">    Future&lt;Object&gt; submit2 = ser</span><br><span class="line">        .submit(<span class="keyword">new</span> <span class="title class_">Downloader2</span>(<span class="string">&quot;https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;./2.png&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取结果</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="type">Object</span> <span class="variable">result1</span> <span class="operator">=</span> submit1.get();</span><br><span class="line">      <span class="type">Object</span> <span class="variable">result2</span> <span class="operator">=</span> submit2.get();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException | ExecutionException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭服务</span></span><br><span class="line">    ser.shutdown();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="静态代理">静态代理</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> twenty.november.proxy.static_proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StaticProxy</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">MarryProxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MarryProxy</span>(<span class="keyword">new</span> <span class="title class_">Me</span>(<span class="string">&quot;Weidows&quot;</span>));</span><br><span class="line">    proxy.Marry();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ! 代理和被代理类都实现Marry接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Marry</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">Marry</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ! 被代理者</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Me</span> <span class="keyword">implements</span> <span class="title class_">Marry</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Marry</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(name + <span class="string">&quot;结婚了&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Me</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ! 代理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MarryProxy</span> <span class="keyword">implements</span> <span class="title class_">Marry</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> Me target;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Marry</span><span class="params">()</span> &#123;</span><br><span class="line">    before();</span><br><span class="line">    target.Marry();</span><br><span class="line">    after();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(target.name + <span class="string">&quot;结婚后&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(target.name + <span class="string">&quot;结婚前&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">MarryProxy</span><span class="params">(Me target)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.target = target;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="生命周期-线程状态">生命周期-线程状态</h2><img src="https://www.helloimg.com/images/2022/02/27/GVmsBA.png" alt="20210219173514" /><img src="https://www.helloimg.com/images/2022/02/27/GVmJzz.png" alt="20210221232406" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestState</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(<span class="string">&quot;///&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//观察状态</span></span><br><span class="line">    Thread.<span class="type">State</span> <span class="variable">state</span> <span class="operator">=</span> thread.getState();</span><br><span class="line">    System.out.println(state); <span class="comment">//NEW</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//观察后启动</span></span><br><span class="line">    thread.start(); <span class="comment">//启动线程</span></span><br><span class="line">    state = thread.getState();</span><br><span class="line">    System.out.println(); <span class="comment">//Run</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (state != Thread.State.TERMINATED) &#123; <span class="comment">//只要线程不停止，就一直输出状态</span></span><br><span class="line">      Thread.sleep(<span class="number">100</span>);</span><br><span class="line">      state = thread.getState(); <span class="comment">//更新线程状态</span></span><br><span class="line">      System.out.println(state); <span class="comment">//输出状态</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//thread.start();   报错，因为已经死亡的线程不能再启动</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Thread-操作">Thread-操作</h2><h3 id="如何停止线程">如何停止线程</h3><ol><li>利用循环计数，不建议死循环</li><li>使用标志位——&gt;设置一个标志位</li><li><code>不要用</code> stop 或者 destroy 等 JDK-deprecated 的方法</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStop</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">  <span class="comment">//1.设置一个标志位</span></span><br><span class="line">  <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// 运行次数</span></span><br><span class="line">    <span class="keyword">while</span> (flag) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Thread.run()运行次数: &quot;</span> + i++);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//2.设置一个公开的方法停止线程，转换标志位</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stop</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.flag = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">TestStop</span> <span class="variable">testStop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestStop</span>();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(testStop).start();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;main: &quot;</span> + i);</span><br><span class="line">      <span class="keyword">if</span> (i == <span class="number">90</span>) &#123;</span><br><span class="line">        testStop.stop();</span><br><span class="line">        System.out.println(<span class="string">&quot;testStop线程停止了,main线程还在运行&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="线程休眠-sleep">线程休眠-sleep</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSleep</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 十秒倒计时</span></span><br><span class="line">      tenSecondsDown();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 每秒输出系统当前时间</span></span><br><span class="line">      countTime();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">tenSecondsDown</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">      System.out.println(num--);</span><br><span class="line">      <span class="keyword">if</span> (num == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">countTime</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Date</span> <span class="variable">startTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()); <span class="comment">//获取系统当前时间</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;HH:mm:ss&quot;</span>).format(startTime));</span><br><span class="line">        startTime = <span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()); <span class="comment">//更新当前时间</span></span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>测试数据时可以通过延时来放大线程问题的发生性.</li></ul><hr><h3 id="线程让步-yield">线程让步-yield</h3><ul><li>令当前线程<code>暂停但并不阻塞</code>,有可能让步并不成功.</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestYield</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// MyYield myYield = new MyYield();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// * 匿名内部类的方式</span></span><br><span class="line">    <span class="comment">// Runnable myYield = new Runnable() &#123;</span></span><br><span class="line">    <span class="comment">//   @Override</span></span><br><span class="line">    <span class="comment">//   public void run() &#123;</span></span><br><span class="line">    <span class="comment">//     System.out.println(Thread.currentThread().getName() + &quot;线程开始执行&quot;);</span></span><br><span class="line">    <span class="comment">//     Thread.yield(); //礼让</span></span><br><span class="line">    <span class="comment">//     System.out.println(Thread.currentThread().getName() + &quot;线程停止执行&quot;);</span></span><br><span class="line">    <span class="comment">//   &#125;</span></span><br><span class="line">    <span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// * Lambda表达式方式</span></span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">myYield</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">      System.out.println(Thread.currentThread().getName() + <span class="string">&quot;线程开始执行&quot;</span>);</span><br><span class="line">      Thread.yield(); <span class="comment">//礼让</span></span><br><span class="line">      System.out.println(Thread.currentThread().getName() + <span class="string">&quot;线程停止执行&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(myYield, <span class="string">&quot;a&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(myYield, <span class="string">&quot;b&quot;</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// * 新建类的方式实现接口</span></span><br><span class="line"><span class="comment">// class MyYield implements Runnable &#123;</span></span><br><span class="line"><span class="comment">//   @Override</span></span><br><span class="line"><span class="comment">//   public void run() &#123;</span></span><br><span class="line"><span class="comment">//     System.out.println(Thread.currentThread().getName() + &quot;线程开始执行&quot;);</span></span><br><span class="line"><span class="comment">//     Thread.yield(); //礼让</span></span><br><span class="line"><span class="comment">//     System.out.println(Thread.currentThread().getName() + &quot;线程停止执行&quot;);</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><ul><li><p>结果</p><ul><li>预期结果,让步成功</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>线程开始执行</span><br><span class="line"><span class="selector-tag">b</span>线程开始执行</span><br><span class="line"><span class="selector-tag">a</span>线程停止执行</span><br><span class="line"><span class="selector-tag">b</span>线程停止执行</span><br></pre></td></tr></table></figure><ul><li>让步未成功(但也并不能认为是失败,确确实实让了一下)</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>线程开始执行</span><br><span class="line"><span class="selector-tag">a</span>线程停止执行</span><br><span class="line"><span class="selector-tag">b</span>线程开始执行</span><br><span class="line"><span class="selector-tag">b</span>线程停止执行</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="线程插队-Join">线程插队-Join</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestJoin</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">testJoin</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;vipThread&quot;</span> + i);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">vipThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(testJoin);</span><br><span class="line">    vipThread.start();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//主线程</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i == <span class="number">50</span>) &#123;</span><br><span class="line">        vipThread.join(); <span class="comment">//插队</span></span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(<span class="string">&quot;main&quot;</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>结果<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line">mai<span class="symbol">n0</span></span><br><span class="line">vipThread<span class="number">0</span></span><br><span class="line">mai<span class="symbol">n1</span></span><br><span class="line">vipThread<span class="number">1</span></span><br><span class="line">vipThread<span class="number">2</span></span><br><span class="line">mai<span class="symbol">n2</span></span><br><span class="line">mai<span class="symbol">n3</span></span><br><span class="line">vipThread<span class="number">3</span></span><br><span class="line">mai<span class="symbol">n4</span></span><br><span class="line">vipThread<span class="number">4</span></span><br><span class="line">mai<span class="symbol">n5</span></span><br><span class="line">vipThread<span class="number">5</span></span><br><span class="line">mai<span class="symbol">n6</span></span><br><span class="line">vipThread<span class="number">6</span></span><br><span class="line">mai<span class="symbol">n7</span></span><br><span class="line">vipThread<span class="number">7</span></span><br><span class="line">mai<span class="symbol">n8</span></span><br><span class="line">vipThread<span class="number">8</span></span><br><span class="line">mai<span class="symbol">n9</span></span><br><span class="line">vipThread<span class="number">9</span></span><br><span class="line">mai<span class="symbol">n10</span></span><br><span class="line">vipThread<span class="number">10</span></span><br><span class="line">mai<span class="symbol">n11</span></span><br><span class="line">vipThread<span class="number">11</span></span><br><span class="line">mai<span class="symbol">n12</span></span><br><span class="line">vipThread<span class="number">12</span></span><br><span class="line">mai<span class="symbol">n13</span></span><br><span class="line">vipThread<span class="number">13</span></span><br><span class="line">mai<span class="symbol">n14</span></span><br><span class="line">vipThread<span class="number">14</span></span><br><span class="line">mai<span class="symbol">n15</span></span><br><span class="line">vipThread<span class="number">15</span></span><br><span class="line">mai<span class="symbol">n16</span></span><br><span class="line">vipThread<span class="number">16</span></span><br><span class="line">mai<span class="symbol">n17</span></span><br><span class="line">vipThread<span class="number">17</span></span><br><span class="line">mai<span class="symbol">n18</span></span><br><span class="line">vipThread<span class="number">18</span></span><br><span class="line">mai<span class="symbol">n19</span></span><br><span class="line">mai<span class="symbol">n20</span></span><br><span class="line">vipThread<span class="number">19</span></span><br><span class="line">mai<span class="symbol">n21</span></span><br><span class="line">vipThread<span class="number">20</span></span><br><span class="line">vipThread<span class="number">21</span></span><br><span class="line">mai<span class="symbol">n22</span></span><br><span class="line">vipThread<span class="number">22</span></span><br><span class="line">mai<span class="symbol">n23</span></span><br><span class="line">vipThread<span class="number">23</span></span><br><span class="line">mai<span class="symbol">n24</span></span><br><span class="line">mai<span class="symbol">n25</span></span><br><span class="line">vipThread<span class="number">24</span></span><br><span class="line">mai<span class="symbol">n26</span></span><br><span class="line">mai<span class="symbol">n27</span></span><br><span class="line">vipThread<span class="number">25</span></span><br><span class="line">vipThread<span class="number">26</span></span><br><span class="line">mai<span class="symbol">n28</span></span><br><span class="line">mai<span class="symbol">n29</span></span><br><span class="line">vipThread<span class="number">27</span></span><br><span class="line">mai<span class="symbol">n30</span></span><br><span class="line">vipThread<span class="number">28</span></span><br><span class="line">mai<span class="symbol">n31</span></span><br><span class="line">mai<span class="symbol">n32</span></span><br><span class="line">vipThread<span class="number">29</span></span><br><span class="line">vipThread<span class="number">30</span></span><br><span class="line">mai<span class="symbol">n33</span></span><br><span class="line">vipThread<span class="number">31</span></span><br><span class="line">vipThread<span class="number">32</span></span><br><span class="line">vipThread<span class="number">33</span></span><br><span class="line">mai<span class="symbol">n34</span></span><br><span class="line">vipThread<span class="number">34</span></span><br><span class="line">mai<span class="symbol">n35</span></span><br><span class="line">mai<span class="symbol">n36</span></span><br><span class="line">vipThread<span class="number">35</span></span><br><span class="line">vipThread<span class="number">36</span></span><br><span class="line">mai<span class="symbol">n37</span></span><br><span class="line">vipThread<span class="number">37</span></span><br><span class="line">mai<span class="symbol">n38</span></span><br><span class="line">vipThread<span class="number">38</span></span><br><span class="line">mai<span class="symbol">n39</span></span><br><span class="line">vipThread<span class="number">39</span></span><br><span class="line">vipThread<span class="number">40</span></span><br><span class="line">mai<span class="symbol">n40</span></span><br><span class="line">vipThread<span class="number">41</span></span><br><span class="line">mai<span class="symbol">n41</span></span><br><span class="line">vipThread<span class="number">42</span></span><br><span class="line">mai<span class="symbol">n42</span></span><br><span class="line">vipThread<span class="number">43</span></span><br><span class="line">mai<span class="symbol">n43</span></span><br><span class="line">vipThread<span class="number">44</span></span><br><span class="line">mai<span class="symbol">n44</span></span><br><span class="line">vipThread<span class="number">45</span></span><br><span class="line">mai<span class="symbol">n45</span></span><br><span class="line">vipThread<span class="number">46</span></span><br><span class="line">mai<span class="symbol">n46</span></span><br><span class="line">vipThread<span class="number">47</span></span><br><span class="line">mai<span class="symbol">n47</span></span><br><span class="line">vipThread<span class="number">48</span></span><br><span class="line">mai<span class="symbol">n48</span></span><br><span class="line">vipThread<span class="number">49</span></span><br><span class="line">mai<span class="symbol">n49</span></span><br><span class="line">vipThread<span class="number">50</span></span><br><span class="line">vipThread<span class="number">51</span></span><br><span class="line">vipThread<span class="number">52</span></span><br><span class="line">vipThread<span class="number">53</span></span><br><span class="line">vipThread<span class="number">54</span></span><br><span class="line">vipThread<span class="number">55</span></span><br><span class="line">vipThread<span class="number">56</span></span><br><span class="line">vipThread<span class="number">57</span></span><br><span class="line">vipThread<span class="number">58</span></span><br><span class="line">vipThread<span class="number">59</span></span><br><span class="line">vipThread<span class="number">60</span></span><br><span class="line">vipThread<span class="number">61</span></span><br><span class="line">vipThread<span class="number">62</span></span><br><span class="line">vipThread<span class="number">63</span></span><br><span class="line">vipThread<span class="number">64</span></span><br><span class="line">vipThread<span class="number">65</span></span><br><span class="line">vipThread<span class="number">66</span></span><br><span class="line">vipThread<span class="number">67</span></span><br><span class="line">vipThread<span class="number">68</span></span><br><span class="line">vipThread<span class="number">69</span></span><br><span class="line">vipThread<span class="number">70</span></span><br><span class="line">vipThread<span class="number">71</span></span><br><span class="line">vipThread<span class="number">72</span></span><br><span class="line">vipThread<span class="number">73</span></span><br><span class="line">vipThread<span class="number">74</span></span><br><span class="line">vipThread<span class="number">75</span></span><br><span class="line">vipThread<span class="number">76</span></span><br><span class="line">vipThread<span class="number">77</span></span><br><span class="line">vipThread<span class="number">78</span></span><br><span class="line">vipThread<span class="number">79</span></span><br><span class="line">vipThread<span class="number">80</span></span><br><span class="line">vipThread<span class="number">81</span></span><br><span class="line">vipThread<span class="number">82</span></span><br><span class="line">vipThread<span class="number">83</span></span><br><span class="line">vipThread<span class="number">84</span></span><br><span class="line">vipThread<span class="number">85</span></span><br><span class="line">vipThread<span class="number">86</span></span><br><span class="line">vipThread<span class="number">87</span></span><br><span class="line">vipThread<span class="number">88</span></span><br><span class="line">vipThread<span class="number">89</span></span><br><span class="line">vipThread<span class="number">90</span></span><br><span class="line">vipThread<span class="number">91</span></span><br><span class="line">vipThread<span class="number">92</span></span><br><span class="line">vipThread<span class="number">93</span></span><br><span class="line">vipThread<span class="number">94</span></span><br><span class="line">vipThread<span class="number">95</span></span><br><span class="line">vipThread<span class="number">96</span></span><br><span class="line">vipThread<span class="number">97</span></span><br><span class="line">vipThread<span class="number">98</span></span><br><span class="line">vipThread<span class="number">99</span></span><br><span class="line">mai<span class="symbol">n50</span></span><br><span class="line">mai<span class="symbol">n51</span></span><br><span class="line">mai<span class="symbol">n52</span></span><br><span class="line">mai<span class="symbol">n53</span></span><br><span class="line">mai<span class="symbol">n54</span></span><br><span class="line">mai<span class="symbol">n55</span></span><br><span class="line">mai<span class="symbol">n56</span></span><br><span class="line">mai<span class="symbol">n57</span></span><br><span class="line">mai<span class="symbol">n58</span></span><br><span class="line">mai<span class="symbol">n59</span></span><br><span class="line">mai<span class="symbol">n60</span></span><br><span class="line">mai<span class="symbol">n61</span></span><br><span class="line">mai<span class="symbol">n62</span></span><br><span class="line">mai<span class="symbol">n63</span></span><br><span class="line">mai<span class="symbol">n64</span></span><br><span class="line">mai<span class="symbol">n65</span></span><br><span class="line">mai<span class="symbol">n66</span></span><br><span class="line">mai<span class="symbol">n67</span></span><br><span class="line">mai<span class="symbol">n68</span></span><br><span class="line">mai<span class="symbol">n69</span></span><br><span class="line">mai<span class="symbol">n70</span></span><br><span class="line">mai<span class="symbol">n71</span></span><br><span class="line">mai<span class="symbol">n72</span></span><br><span class="line">mai<span class="symbol">n73</span></span><br><span class="line">mai<span class="symbol">n74</span></span><br><span class="line">mai<span class="symbol">n75</span></span><br><span class="line">mai<span class="symbol">n76</span></span><br><span class="line">mai<span class="symbol">n77</span></span><br><span class="line">mai<span class="symbol">n78</span></span><br><span class="line">mai<span class="symbol">n79</span></span><br><span class="line">mai<span class="symbol">n80</span></span><br><span class="line">mai<span class="symbol">n81</span></span><br><span class="line">mai<span class="symbol">n82</span></span><br><span class="line">mai<span class="symbol">n83</span></span><br><span class="line">mai<span class="symbol">n84</span></span><br><span class="line">mai<span class="symbol">n85</span></span><br><span class="line">mai<span class="symbol">n86</span></span><br><span class="line">mai<span class="symbol">n87</span></span><br><span class="line">mai<span class="symbol">n88</span></span><br><span class="line">mai<span class="symbol">n89</span></span><br><span class="line">mai<span class="symbol">n90</span></span><br><span class="line">mai<span class="symbol">n91</span></span><br><span class="line">mai<span class="symbol">n92</span></span><br><span class="line">mai<span class="symbol">n93</span></span><br><span class="line">mai<span class="symbol">n94</span></span><br><span class="line">mai<span class="symbol">n95</span></span><br><span class="line">mai<span class="symbol">n96</span></span><br><span class="line">mai<span class="symbol">n97</span></span><br><span class="line">mai<span class="symbol">n98</span></span><br><span class="line">mai<span class="symbol">n99</span></span><br></pre></td></tr></table></figure></li><li>可以见到 main 和 vipThread 两个线程几乎同步执行,到了 main49 时,vipThread 会主动插队,这时 vipThread 之外的线程阻塞.</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="线程优先级-Priority">线程优先级-Priority</h3><ul><li><p>线程的优先级用数字表示，范围从 1~10.</p><ul><li>Thread.MIN_PRIORITY = 1;</li><li>Thread.MAX_PRIORITY = 10;</li><li>Thread.NORM_PRIORITY = 5;</li></ul></li><li><p>使用一下方法改变或获取优先级</p><ul><li>​.getPriority()</li><li>.setPriority(int xxx)</li></ul><p>不做举例了.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="守护线程-daemon">守护线程-daemon</h3><ul><li><p>线程分为<code>用户线程</code>和<code>守护线程</code>,用户线程必须执行完毕程序才终止,而守护线程不做要求.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDaemon</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// ! 上帝</span></span><br><span class="line">    <span class="type">Thread</span> <span class="variable">godThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">      <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;上帝保佑你&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//默认false表示是用户线程，正常的线程都是用户线程</span></span><br><span class="line">    godThread.setDaemon(<span class="literal">true</span>);</span><br><span class="line">    godThread.start();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ! 你</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;你一生都开心的活着&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(<span class="string">&quot;GoodBye World&quot;</span>);</span><br><span class="line">    &#125;).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>结果: &quot;you&quot;线程终止后 daemon 线程仍执行了一段时间</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">...</span></span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">你一生都开心的活着</span><br><span class="line">你一生都开心的活着</span><br><span class="line">你一生都开心的活着</span><br><span class="line">你一生都开心的活着</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br><span class="line">GoodBye World</span><br><span class="line">上帝保佑你</span><br><span class="line">上帝保佑你</span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 多线程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 笔记 </tag>
            
            <tag> 多线程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>‼Reason for music,roaring my song!</title>
      <link href="/post/life/music/"/>
      <url>/post/life/music/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-02-08 12:30:24 * @LastEditors: Weidows * @LastEditTime: 2021-02-27 12:46:01 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\life\music.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%BA%8F%E7%AB%A0">序章</a></li><li><a href="#%E7%AB%AF%E5%80%AA">端倪</a></li><li><a href="#%E8%B0%83%E7%94%A8">调用</a></li><li><a href="#%E6%94%B6%E5%B0%BE">收尾</a></li><li><a href="#%E6%89%A9%E5%85%85">扩充</a></li><li><a href="#%E6%91%98%E5%BD%95">摘录</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="序章">序章</h2><ul><li><p>关于我为什么更喜欢<code>日文歌</code>而非中文,我自身也一直在寻找答案.</p></li><li><p>直到…</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="端倪">端倪</h2><ul><li><p>今天刷 B 站,像往常一样,看到了崩坏三的 MV-&gt;周深唱的<code>Rubia</code></p></li><li><p>听着听着就很有感触,突然想到以上的问题!</p></li></ul><hr><ul><li><p>我是偏爱日文歌吗?</p><ul><li>也不是</li><li>中文和英文也听,但是没多少能唱到心里去.</li></ul></li><li><p>这首<code>Rubia</code>,我喜欢她的气息连贯,顿挫自然,与是不是英文歌、我是不是能听懂无关.</p></li><li><p>于是思考到我听日文歌也不是全然能听懂,也是喜欢日文歌那种<code>平滑顿挫性</code></p></li></ul><hr><ul><li><p><em>Found it !</em></p></li><li><p>原来,我是比较喜欢这种<code>连续性</code>与<code>结合性</code>:</p><ul><li><p>看这张图,字符连接<code>很灵性</code>,就像是曲子,每个字与前后的字都有联系,连接紧密性低的话就会略失美感</p><img src="https://www.helloimg.com/images/2022/02/27/GVSpDP.png" alt="code" /></li><li><p>再如这一张</p><img src="https://www.helloimg.com/images/2022/02/27/GV46hb.png" alt="code" /></li></ul></li></ul><hr><ul><li><p>对比上面两个图可以看出来,虽然审美有差异吧,但是我认为上面的图更具美感</p><ul><li><p>每一个字节对前后两字节的美感做了补充和衬托</p></li><li><p>图下面的符号连接起来成为一个整体,比单调排列更强调<code>组合之美</code></p></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="调用">调用</h2><ul><li><p>回归正题,结合实际音乐来谈一下~</p></li><li><p>就比如<code>Rubia</code>,歌中单词连接非常紧密,<code>歌词语言脱离实际意义,就像是本身就是旋律</code></p><ul><li><p>每个音节承前启后,在<code>音调</code>与<code>节奏变换</code>上很<code>平滑</code></p></li><li><p>通俗点讲就像是<code>妈妈唱的儿歌</code>,无论歌词是啥,唱的怎么样都特舒心,让人想睡觉.</p></li></ul></li></ul><hr><ul><li><p>音乐嘛,倒也不是那么单调,有些歌就不能联系紧密,比如摇滚</p><ul><li><p>我特喜欢的一个英+日文歌<code>Re:make</code></p></li><li><p>一个字是一个字,一个词是一个词,这样打击感和对耳膜的冲击感强烈</p></li><li><p>我认为<code>中文在这方面很牛掰</code>,因为中文字节音分辨明显,在 Rap 和摇滚之列的上面更能直击灵魂,就比如<code>野狼Disco</code>,日文在这方面就很…唱出来不是那个味!</p></li></ul></li><li><p>英文在脱离意义的歌词上优势很明显,比如电音时不时拽一句英文,那叫锦上添花.</p><ul><li><p>反观要是拽一句中文,哈哈哈哈哈,不敢想象有多尴尬.</p></li><li><p>日语在这方面也不是很强,不过在假音伴奏方面有一套.</p></li><li><p>中文因为气息变换大,连贯性低,假以伴奏的话,ummm 简单说起来就是抢戏,无论你多大声</p></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="收尾">收尾</h2><ul><li><p>到这里该收束一下了,我更喜欢日文歌的原因:</p></li><li><p><code>气息感</code></p></li><li><p>就是<code>脱离歌词意义演绎旋律的能力.</code></p></li></ul><hr><ul><li><p>国内我知道的气息感强的比如<code>周杰伦</code>和<code>封茗囧菌</code></p><ul><li><p>简单来说就比如他俩都唱过<code>我的地盘</code>,都是中文,每个字都认识,就是听不出来唱的啥,嘴秃噜皮了也学不会!</p></li><li><p>试试就知道了,这种节奏感和气息把控很难</p></li><li><p>其实说来俄语在气息把控上更加巅峰,难的离谱儿~</p></li></ul></li></ul><hr><ul><li>emmm 英文歌嘛,说实话那种曲律我是欣赏不来,有喜欢的,但大多数不喜欢,没错,就是直接的不喜欢.</li></ul><hr><ul><li><p>我听动漫类型的歌多,这种大多是柔情的,来个对比:</p><ul><li><p><code>田井中彩智 - 一番星(最亮的星)</code></p></li><li><p><code>我的一个道姑朋友</code></p></li><li><p>虽然不是动漫歌哈,但是对比应该挺明显的,汉语在抒情方面确实略逊一筹,因为音节分辨太明显,顿挫更大</p></li></ul></li></ul><hr><ul><li>当然,找到合适的路就对了,比如<code>安静的午后</code>,中文抒情歌,就很舒心.</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="扩充">扩充</h2><ul><li>我发现我对于<code>作曲家</code>的执著大于歌手的执著.</li><li>我喜欢的作曲家创作的很多曲子都很合我胃口,当然这话跟放屁一样,同一个作曲家的作品风格当然是差不多的啦!</li></ul><hr><ul><li><p>比如,我很喜欢日本的<code>飞内将大</code>,他创作的<code>蝴蝶结</code>和<code>Ref:rain(恋如雨止)</code>是我的最爱</p></li><li><p>还有像是<code>高梨康治</code>的纯音乐,非常热血;<code>泽野弘之</code>的电音和作曲等等也都十分好听.</p><hr></li><li><p>倒也不能说这么偏爱日本的,确确实实在国内找遍了没有像是这几位类型的大神~</p></li><li><p>国内电音的话,出名的比如<code>徐梦圆</code>,听他的电音确实很舒服,但是没有<code>上瘾</code>的感觉,毕竟这方面我也是位<code>瘾君子</code>了…</p></li></ul><hr><ul><li>国内特喜欢的作曲家是婚前的<code>李荣浩</code>,这也不是贬低,那个阶段他的歌很能触动我的内心,现阶段很难了…<ul><li>比如我最喜欢他的<code>老街</code>,味道太纯正了! 很有岁月感和代入感,<code>煽情不浓郁,回味还无穷.</code></li></ul></li></ul><hr><ul><li>其他的应该还有,没注意到.</li><li><code>酱紫吧</code>.</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="摘录">摘录</h2><blockquote><p>“人，是会思考的芦苇。” ——帕斯卡，《思想录》</p></blockquote><blockquote><p>高晓松说的没错，日本音乐的精髓是旋律，中国音乐的精髓是歌词，欧美音乐的精髓是节奏<br>来自于起风了在歌曲&lt;&lt; Refrain &gt;&gt;的酷狗评论</p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 音乐 </tag>
            
            <tag> 哲学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🚀网站优化记录.</title>
      <link href="/post/Web/Node/Hexo/optimize/"/>
      <url>/post/Web/Node/Hexo/optimize/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-02-07 01:11:24 * @LastEditors: Weidows * @LastEditTime: 2021-08-29 15:15:38 * @FilePath: \Blog-private\source\_posts\Web\Node\Hexo\optimize.md * @Description: * @!: *********************************************************************--><ul><li><a href="#why">Why?</a><ul><li><a href="#why-do-this"><code>Why do this?</code></a></li></ul></li><li><a href="#%E6%A6%82%E8%A7%88">概览</a></li><li><a href="#%E5%A5%91%E5%90%88">契合</a></li><li><a href="#%E4%BC%98%E5%8C%96-css">优化 css</a></li><li><a href="#%E4%BC%98%E5%8C%96-js">优化 js</a><ul><li><a href="#%E5%86%8D%E6%AC%A1%E9%AD%94%E6%94%B9">再次魔改</a></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Why">Why?</h2><h3 id="Why-do-this"><code>Why do this?</code></h3><ul><li><p>这网站有太多需要简化的东西了,很多样式是<code>直接引入的css和js</code></p></li><li><p>巨耗费渲染性能和时间(可以感觉出来加载这网站挺费劲的)</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="概览">概览</h2><ul><li><p>对于 css 的所有修改,全部整合进<code>mine.styl</code></p><ul><li><p>编译时就已经做好美化,额外资源负载几乎降为 0</p></li><li><p>注入到<code>index.styl</code>末尾.</p></li></ul><hr></li><li><p>js 的美化,全部整合到 <code>utils.js</code></p><ul><li><p>请求数加 0,加载策略优化,时间降低; Weidows对象直接全局加载生效且不被GC.</p></li><li><p>把 js 代码全堆在最后,暴露 <code>Weidows.re()</code> 供 pjax 调用.</p></li></ul><hr></li><li><p>pug 的修改降低为 3 处,方便升级换代,都在此目录下: <code>themes\butterfly\layout\includes\</code></p><ul><li><p><code>additional-js.pug</code> - 末尾追加樱花特效</p></li><li><p><code>footer.pug</code>- 页脚标签+改注脚样式</p></li><li><p><code>third-party\pjax.pug</code> - 调用 <a href="http://Weidows.re">Weidows.re</a>(),适配 pjax 刷新</p></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="契合">契合</h2><blockquote><p>结合 <a href="./butterfly_modify">butterfly 内部魔改记录</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="优化-css">优化 css</h2><ul><li><p>以往的 css 是直接引入的文件,在客户端加载时还是会耗费一些不菲时间加载+渲染出来</p></li><li><p>优化思路就是把 css 变成<code>styl</code>,使之在编译生成 HTML 文件时就把样式改了,节省客户端耗费.</p></li></ul><hr><ul><li><p>如下:</p><ul><li><p>新建一个名为 <code>mine.styl</code> 的文件.</p></li><li><p>原 css 文件就是<code>mine.css</code>,用<a href="https://html5beta.com/tools/css2stylus.html"><code>css2styl</code></a>转换为 styl 格式,粘贴到 <code>mine.styl</code></p></li><li><p>注意这个网站转换成的 styl 有很多 bug(包括缩进和括号,需要人工检验)</p></li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVFlgb.png" alt="20210207134449" /></li><li><p>包括原先<code>source/css/_global/function.styl</code>之类的内添加或修改的样式,也可以转入 mine.styl.</p></li><li><p>然后在<code>index.styl</code>中引入:</p><ul><li>在末尾加上</li></ul><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mine</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_mine/mine.styl&#x27;</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>用 <code>hexo server</code> 测试一下,应该没问题~</p></li><li><p>这样 css 优化就完成了</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="优化-js">优化 js</h2><ul><li><p>跟 css 一样,我原先也是直接一个<code>mine.js</code>引入的</p></li><li><p>虽然没啥问题,但是会导致页面第二次加载渲染,而且多了一个请求数</p></li><li><p>于是,我想直接把它淦进<code>main.js</code>中!</p><ul><li>操作不复杂,直接复制<code>mine.js</code>内容,粘贴进<code>main.js</code>最后</li><li>注意不是最末尾</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 粘贴到这里</span></span><br><span class="line">  <span class="title function_">refreshFn</span>();</span><br><span class="line">  <span class="title function_">unRefreshFn</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h3 id="再次魔改">再次魔改</h3><ul><li><p>因为某些美化函数会被 pjax 功能搞失效,直接把函数放进 main.js 的话,pjax 无法再次使用</p></li><li><p>所以我把美化 js 打包并弄进 <code>butterfly/layout/head.pug</code> 中,在页面编译时就会被添加到 <code>&lt;head&gt;</code> 内,加载时间和请求数不增加!</p><p>现在,加载逻辑是: js 美化代码在 HTML 文件的 head 中,然后在 main.js 最后写一句调用命令; 在页面用了 pjax 加载时,pjax.pug 中的重渲染函数会被调用.</p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> Node </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> website </tag>
            
            <tag> hexo </tag>
            
            <tag> 优化 </tag>
            
            <tag> 魔改 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😍Manjaro虚拟机充当服务器记录.</title>
      <link href="/post/system/Manjaro-Server/"/>
      <url>/post/system/Manjaro-Server/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-02-03 14:00:21 * @LastEditors: Weidows * @LastEditTime: 2021-09-08 20:07:37 * @FilePath: \Blog-private\source\_posts\system\Manjaro-Server.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%B3%BB%E7%BB%9F%E9%80%89%E6%8B%A9">系统选择</a><ul><li><a href="#%E6%88%91%E7%9A%84%E9%9C%80%E6%B1%82">我的需求</a></li></ul></li><li><a href="#%E5%90%AF%E7%94%A8-ssh-%E6%9C%8D%E5%8A%A1">启用 ssh 服务</a><ul><li><a href="#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4">故障排除</a></li></ul></li><li><a href="#%E6%8D%A2%E6%BA%90">换源</a><ul><li><a href="#%E8%87%AA%E5%8A%A8">自动</a></li><li><a href="#%E6%89%8B%E5%8A%A8">手动</a></li><li><a href="#%E6%9B%B4%E6%96%B0">更新</a></li></ul></li><li><a href="#%E9%85%8D%E7%BD%AE-docker">配置 docker</a></li><li><a href="#%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85">软件安装</a></li><li><a href="#%E6%9B%B4%E6%96%B0%E5%A4%B1%E8%B4%A5">更新失败</a><ul><li><a href="#%E6%96%87%E4%BB%B6%E5%86%B2%E7%AA%81">文件冲突</a></li></ul></li><li><a href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BB%A3%E7%90%86">虚拟机代理</a></li></ul><h2 id="系统选择">系统选择</h2><ul><li>关于我为什么最后选择了作为 Server 来说比较冷门的 <code>Manjaro</code></li></ul><table><thead><tr><th style="text-align:center">系统</th><th style="text-align:center">特性</th></tr></thead><tbody><tr><td style="text-align:center">CentOS</td><td style="text-align:center">系统特别稳健,bug 少,出了问题解决方案多,服务型软件丰富;标准 server,不怎么需要特殊配置,维护难度低</td></tr><tr><td style="text-align:center">Ubuntu</td><td style="text-align:center">跟 CentOS 差不多,但是因为生态惯性问题确实比 CentOS 用得少,现在由 CentOS 转向 Ubuntu 的很多;server 安装后需要做很多配置才能使用,维护性难度中等;server 安装后默认没有 root 用户</td></tr><tr><td style="text-align:center">Manjaro</td><td style="text-align:center">Arch 分支的 Linux 发行版,desktop-KDE,内核滚动更新很快,更新比 Arch 慢但更稳定,软件生态很丰富,图形化好维护;定位并非 Server,是桌面操作系统所以功耗稍大;默认不启用 ssh 服务</td></tr><tr><td style="text-align:center">RaspberryPi</td><td style="text-align:center">树莓派定制化系统,可以说啥都干得了,但是啥都干不好</td></tr><tr><td style="text-align:center">Deepin</td><td style="text-align:center">生态正在逐步扩大,但是对于服务器端还是太差了,毕竟它的定位也是桌面操作系统;图形化卡顿比较严重,有些无解决方案的 bug;不开放 root 用户</td></tr></tbody></table><hr><h3 id="我的需求">我的需求</h3><ul><li><p>我想让服务器比较稳定,因为在主机上用<code>VMware</code> 开的虚拟机,所以性能消耗要求不高.</p></li><li><p>最好是带有图形界面,这样维护比较方便</p></li><li><p>与<code>VScode-ssh</code>连接必须稳定!</p><ul><li>有些服务需要把代码拉到服务器上</li></ul><blockquote><p>已经有解决方案了,参见 <a href="../../experience/SSH#VScode-ssh-%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5">✨SSH 远程连接.#VScode-ssh-断开连接</a></p></blockquote></li><li><p>有且要开放 root</p><ul><li>有的系统不带 root 账户,有的不开放.</li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="启用-ssh-服务">启用 ssh 服务</h2><blockquote><p><a href="https://blog.csdn.net/SUDDEV/article/details/85314469">Manjaro Linux 系统 ssh：connect to host localhost port 22: Connection refused 解决方法</a></p></blockquote><ul><li><p>默认情况下 manjaro 有 ssh 但是不开启.</p></li><li><p>用 ssh 连接它会出现以下报错:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">connect</span> <span class="keyword">to</span> host localhost port <span class="number">22</span>: <span class="keyword">Connection</span> refused</span><br></pre></td></tr></table></figure></li><li><p>开启 ssh 服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable sshd.service</span><br></pre></td></tr></table></figure></li><li><p>开启后需要<code>重启</code>下才能生效.</p></li></ul><hr><h3 id="故障排除">故障排除</h3><ul><li><p>如果 ssh 服务开启了,连接步骤也没错,但是就是连不上,有可能是 ssh 旧记录的问题</p></li><li><p>报错信息包含如下</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     <span class="comment">@</span></span><br><span class="line"><span class="comment">&gt; @</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span></span><br></pre></td></tr></table></figure></li><li><p>去主机电脑上找到<code>~/.ssh/known_hosts</code>,这里面有过去连接的 ip 记录和公钥,删除对应的就可.</p><ul><li>Windows 上那个位置就是<code>C:\Users\你的用户名\.ssh</code></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="换源">换源</h2><blockquote><p><a href="https://blog.csdn.net/weixin_43968923/article/details/86349914">arch/Manjaro 添加国内源以及社区源</a></p></blockquote><h3 id="自动">自动</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman-mirrors -<span class="selector-tag">i</span> -c China -m rank</span><br></pre></td></tr></table></figure><hr><h3 id="手动">手动</h3><ul><li><p>找到<code>/etc/pacman.d/mirrorlist</code>,备份之后修改:</p><ul><li>越靠上优先级越高.</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 中科大</span></span><br><span class="line">Server = https:<span class="regexp">//mi</span>rrors.ustc.edu.cn<span class="regexp">/manjaro/</span>stable<span class="regexp">/$repo/</span><span class="variable">$arch</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  清华大学</span></span><br><span class="line">Server = https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/manjaro/</span>stable<span class="regexp">/$repo/</span><span class="variable">$arch</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 上海交通大学</span></span><br><span class="line">Server = https:<span class="regexp">//mi</span>rrors.sjtug.sjtu.edu.cn<span class="regexp">/manjaro/</span>stable<span class="regexp">/$repo/</span><span class="variable">$arch</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 浙江大学</span></span><br><span class="line">Server = https:<span class="regexp">//mi</span>rrors.zju.edu.cn<span class="regexp">/manjaro/</span>stable<span class="regexp">/$repo/</span><span class="variable">$arch</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="更新">更新</h3><p>换源后执行一下,更新本地软件包数据库.</p><ul><li><p>更新软件包</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman -Sy</span></span><br></pre></td></tr></table></figure></li><li><p>更新所有</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman -Syyu</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="配置-docker">配置 docker</h2><blockquote><p>详见 <a href="../../system/docker">🌈 初探 Docker.</a></p></blockquote><blockquote><p><a href="https://blog.huangz.me/2020/docker-on-linux.html">在 Manjaro Linux 系统使用 Docker</a></p></blockquote><h2 id="软件安装">软件安装</h2><blockquote><p><a href="https://blog.csdn.net/john_bh/article/details/104652224">msys2 pacman 常用命令以及添加国内源加速 pacman</a></p></blockquote><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -S docker</span></span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="更新失败">更新失败</h2><h3 id="文件冲突">文件冲突</h3><ul><li><p>这种删掉它提示的文件就好了,可能会报好多个,如下:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">有冲突的文件:</span><br><span class="line">- plasma-workspace：<span class="regexp">/usr/</span>lib<span class="regexp">/qt/</span>plugins/kcm_formats.so 已经存在于文件系统中（所有者为plasma-desktop-primex）</span><br><span class="line">- plasma-workspace：<span class="regexp">/usr/</span>lib<span class="regexp">/qt/</span>plugins<span class="regexp">/kcms/</span>kcm_autostart.so 已经存在于文件系统中（所有者为plasma-desktop-primex）</span><br><span class="line">- plasma-workspace：<span class="regexp">/usr/</span>lib<span class="regexp">/qt/</span>plugins<span class="regexp">/kcms/</span>kcm_nightcolor.so 已经存在于文件系统中（所有者为plasma-desktop-primex）</span><br><span class="line">- plasma-workspace：<span class="regexp">/usr/</span>lib<span class="regexp">/qt/</span>plugins<span class="regexp">/kcms/</span>kcm_notifications.so 已经存在于文件系统中（所有者为plasma-desktop-primex）</span><br><span class="line">- plasma-workspace：<span class="regexp">/usr/</span>share<span class="regexp">/doc/</span>HTML<span class="regexp">/ca/</span>kcontrol<span class="regexp">/autostart/i</span>ndex.cache.bz2 已经存在于文件系统中（所有者为plasma-desktop-primex）</span><br><span class="line">- plasma-workspace：<span class="regexp">/usr/</span>share<span class="regexp">/doc/</span>HTML<span class="regexp">/ca/</span>kcontrol<span class="regexp">/autostart/i</span>ndex.docbook 已经存在于文件系统中（所有者为plasma-desktop-primex）</span><br><span class="line">- plasma-workspace：<span class="regexp">/usr/</span>share<span class="regexp">/doc/</span>HTML<span class="regexp">/ca/</span>kcontrol<span class="regexp">/formats/i</span>ndex.cache.bz2 已经存在于文件系统中（所有者为plasma-desktop-primex）</span><br><span class="line">- plasma-workspace：<span class="regexp">/usr/</span>share<span class="regexp">/doc/</span>HTML<span class="regexp">/ca/</span>kcontrol<span class="regexp">/formats/i</span>ndex.docbook 已经存在于文件系统中（所有者为plasma-desktop-primex）</span><br><span class="line">- plasma-workspace：<span class="regexp">/usr/</span>share<span class="regexp">/doc/</span>HTML<span class="regexp">/ca/</span>kcontrol<span class="regexp">/notifications/i</span>ndex.cache.bz2 已经存在于文件系统中（所有者为plasma-desktop-primex）</span><br></pre></td></tr></table></figure></li><li><p>把提示的内容复制进文本编辑器 (比如 VScode)</p><p><code>- plasma-workspace：</code> 和 <code>已经存在于文件系统中（所有者为plasma-desktop-primex）</code> 都是重复的,按 <code>Ctrl + shift + L</code> 可以选中全部,然后删掉,再去掉换行符整合到一行,结果如下:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm <span class="regexp">/usr/</span>lib<span class="regexp">/qt/</span>plugins<span class="regexp">/kcm_formats.so /u</span>sr<span class="regexp">/lib/</span>qt<span class="regexp">/plugins/</span>kcms<span class="regexp">/kcm_autostart.so /u</span>sr<span class="regexp">/lib/</span>qt<span class="regexp">/plugins/</span>kcms<span class="regexp">/kcm_nightcolor.so /u</span>sr<span class="regexp">/lib/</span>qt<span class="regexp">/plugins/</span>kcms<span class="regexp">/kcm_notifications.so /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>ca<span class="regexp">/kcontrol/</span>autostart<span class="regexp">/index.cache.bz2 /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>ca<span class="regexp">/kcontrol/</span>autostart<span class="regexp">/index.docbook /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>ca<span class="regexp">/kcontrol/</span>formats<span class="regexp">/index.cache.bz2 /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>ca<span class="regexp">/kcontrol/</span>formats<span class="regexp">/index.docbook /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>ca<span class="regexp">/kcontrol/</span>notifications<span class="regexp">/index.cache.bz2 /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>ca<span class="regexp">/kcontrol/</span>notifications<span class="regexp">/index.docbook /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>de<span class="regexp">/kcontrol/</span>autostart<span class="regexp">/index.cache.bz2 /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>de<span class="regexp">/kcontrol/</span>autostart<span class="regexp">/index.docbook /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>de<span class="regexp">/kcontrol/</span>formats<span class="regexp">/index.cache.bz2 /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>de<span class="regexp">/kcontrol/</span>formats<span class="regexp">/index.docbook /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>en<span class="regexp">/kcontrol/</span>autostart<span class="regexp">/index.cache.bz2 /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>en<span class="regexp">/kcontrol/</span>autostart<span class="regexp">/index.docbook /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>en<span class="regexp">/kcontrol/</span>formats<span class="regexp">/index.cache.bz2 /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>en<span class="regexp">/kcontrol/</span>formats<span class="regexp">/index.docbook /u</span>sr<span class="regexp">/share/</span>doc<span class="regexp">/HTML/</span>en<span class="regexp">/kcontrol/</span>notifications/index.cache.bz2</span><br></pre></td></tr></table></figure></li><li><p>然后复制进 console 执行-&gt;再次更新-&gt;成功!</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="虚拟机代理">虚拟机代理</h2><p><s>好久没更新这篇了,冲冲水</s></p><ul><li><p>服务器端当安装某些软件时也会有 <code>访问-国外</code> 的需求,在服务器再安装一个软件的话,也可以</p><p>但是节点维护会烦人一些,我想的是: 直接让虚拟机服务器用主机开的代理</p><hr></li><li><p>首先需要主机 &lt;–&gt; 虚拟机 可实现互通,这过程中遇到了几个弯</p><ol><li><p>首先,虚拟机网络<code>不要用桥接模式</code>,这个模式下,每次主机换 WIFI 都需要虚拟机端重新配置主机的 IP(麻烦得很)</p></li><li><p><code>用NAT模式!</code> 这种模式下主机地址(192.168.114.1) ,路由地址(192.168.114.2) ,虚拟机地址(<a href="http://192.168.114.xxx">192.168.114.xxx</a>) 不手动改的话都<code>固定</code>,而且主机换网络环境也不会变. (提一嘴,必须开启 DHCP 虚拟机才能连上主机,默认是开启的不用动)</p></li></ol></li><li><p>实际操作的话</p><p>比如我主机端代理是: localhost:7890</p><p>虚拟机里代理填 192.168.114.1:7890</p></li><li><p>重启.(<s>灵药</s>)</p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> manjaro </tag>
            
            <tag> 操作系统 </tag>
            
            <tag> 服务器 </tag>
            
            <tag> 虚拟机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🟡Ubuntu-Server搞机记录.</title>
      <link href="/post/system/virtual-server/"/>
      <url>/post/system/virtual-server/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-02-02 02:04:38 * @LastEditors: Weidows * @LastEditTime: 2021-09-02 15:47:06 * @FilePath: \Blog-private\source\_posts\system\virtual-server.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85">下载安装</a></li><li><a href="#%E6%8D%A2%E6%BA%90">换源</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81-ip">配置静态 IP</a></li><li><a href="#%E8%BD%AF%E4%BB%B6%E5%A4%87%E4%BB%BD">软件备份</a></li></ul><h2 id="下载安装">下载安装</h2><ul><li><p>官网上下载 ISO 文件就行,挺快的</p><ul><li><p>desktop 是桌面版,有图形界面</p></li><li><p>server 是服务器版,没有图形界面(也就是只有命令行界面)</p></li></ul><hr></li><li><p>我用的<code>VMware</code>安装的,用其他软件也可,个人比较喜欢这个.</p><ul><li>安装时可以选择附带的服务软件,比如<code>docker</code>,<code>k8s</code>等等…</li></ul><hr></li><li><p>安装完成后长这样</p><img src="https://www.helloimg.com/images/2022/02/27/GV4SqX.png" alt="20210202144325" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="换源-2">换源</h2><blockquote><p><a href="https://blog.csdn.net/xiangxianghehe/article/details/105688062">Ubuntu 20.04 换国内源 清华源 阿里源 中科大源 163 源</a></p></blockquote><ul><li>安装系统过程中就有换源选项.</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="配置静态-IP">配置静态 IP</h2><blockquote><p><a href="https://www.cnblogs.com/yaohong/p/11593989.html">ubuntu 18.04 设置静态 ip 方法</a></p></blockquote><ul><li><p>初始的 Ubuntu-Server 没有<code>net-tools</code>,需要<a href="#%E8%BD%AF%E4%BB%B6%E5%A4%87%E4%BB%BD">安装</a></p></li><li><p>默认情况下使用<code>DHCP</code>,连接网络会自动分配一个 IP,使用<code>ifconfig</code>查看(这个 ifconfig 就是上面 net-tools 里面的)</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">weidows</span>@ubuntu-server:~/Code$ ifconfig</span><br><span class="line"><span class="attribute">ens33</span>: flags=<span class="number">4163</span>&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="number">1500</span></span><br><span class="line">        <span class="attribute">inet</span> <span class="number">192.168.2.122</span>  netmask <span class="number">255.255.255.0</span>  broadcast <span class="number">192.168.2.255</span></span><br><span class="line">        <span class="attribute">inet6</span> fe80::<span class="number">20</span>c:<span class="number">29</span>ff:fe28:c082  prefixlen <span class="number">64</span>  scopeid <span class="number">0</span>x20&lt;link&gt;</span><br><span class="line">        <span class="attribute">ether</span> <span class="number">00</span>:<span class="number">0</span>c:<span class="number">29</span>:<span class="number">28</span>:c0:<span class="number">82</span>  txqueuelen <span class="number">1000</span>  (Ethernet)</span><br><span class="line">        <span class="attribute">RX</span> packets <span class="number">114664</span>  bytes <span class="number">143722941</span> (<span class="number">143</span>.<span class="number">7</span> MB)</span><br><span class="line">        <span class="attribute">RX</span> errors <span class="number">0</span>  dropped <span class="number">0</span>  overruns <span class="number">0</span>  frame <span class="number">0</span></span><br><span class="line">        <span class="attribute">TX</span> packets <span class="number">52086</span>  bytes <span class="number">37199464</span> (<span class="number">37</span>.<span class="number">1</span> MB)</span><br><span class="line">        <span class="attribute">TX</span> errors <span class="number">0</span>  dropped <span class="number">0</span> overruns <span class="number">0</span>  carrier <span class="number">0</span>  collisions <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">lo</span>: flags=<span class="number">73</span>&lt;UP,LOOPBACK,RUNNING&gt;  mtu <span class="number">65536</span></span><br><span class="line">        <span class="attribute">inet</span> <span class="number">127.0.0.1</span>  netmask <span class="number">255.0.0.0</span></span><br><span class="line">        <span class="attribute">inet6</span> ::<span class="number">1</span>  prefixlen <span class="number">128</span>  scopeid <span class="number">0</span>x10&lt;host&gt;</span><br><span class="line">        <span class="attribute">loop</span>  txqueuelen <span class="number">1000</span>  (Local Loopback)</span><br><span class="line">        <span class="attribute">RX</span> packets <span class="number">14643</span>  bytes <span class="number">53874531</span> (<span class="number">53</span>.<span class="number">8</span> MB)</span><br><span class="line">        <span class="attribute">RX</span> errors <span class="number">0</span>  dropped <span class="number">0</span>  overruns <span class="number">0</span>  frame <span class="number">0</span></span><br><span class="line">        <span class="attribute">TX</span> packets <span class="number">14643</span>  bytes <span class="number">53874531</span> (<span class="number">53</span>.<span class="number">8</span> MB)</span><br><span class="line">        <span class="attribute">TX</span> errors <span class="number">0</span>  dropped <span class="number">0</span> overruns <span class="number">0</span>  carrier <span class="number">0</span>  collisions <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">weidows</span>@ubuntu-server:~/Code$</span><br></pre></td></tr></table></figure></li><li><p>可以看到第三行<code>192.168.2.122</code>就是分配的 ip 了,用它就行.</p></li><li><p>进入<code>/etc/netplan/</code>这个目录,使用<code>ll</code>查看内部有啥东西</p><ul><li><p>发现第六行<code>00-installer-config.yaml</code>这个文件是我们要找的(可能名字不一样,后缀是.yaml 就对了)</p></li><li><p>使用<code>cat</code>查看文件内容,核实没错,然后修改它!</p></li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">weidows@ubuntu-server:~<span class="regexp">/Code$ cd /</span>etc<span class="regexp">/netplan/</span></span><br><span class="line">weidows@ubuntu-server:<span class="regexp">/etc/</span>netplan$ ll</span><br><span class="line">total <span class="number">12</span></span><br><span class="line">drwxr-xr-x  <span class="number">2</span> root root <span class="number">4096</span> Feb  <span class="number">1</span> <span class="number">17</span>:<span class="number">55</span> ./</span><br><span class="line">drwxr-xr-x <span class="number">92</span> root root <span class="number">4096</span> Feb  <span class="number">2</span> <span class="number">06</span>:<span class="number">25</span> ../</span><br><span class="line">-rw-r--r--  <span class="number">1</span> root root  <span class="number">116</span> Feb  <span class="number">1</span> <span class="number">17</span>:<span class="number">55</span> <span class="number">00</span>-installer-config.yaml</span><br><span class="line">weidows@ubuntu-server:<span class="regexp">/etc/</span>netplan$ cat <span class="number">00</span>-installer-config.yaml</span><br><span class="line"># <span class="keyword">This</span> is the network config written by <span class="string">&#x27;subiquity&#x27;</span></span><br><span class="line">network:</span><br><span class="line">  ethernets:</span><br><span class="line">    ens33:</span><br><span class="line">      dhcp4: <span class="keyword">true</span></span><br><span class="line">  version: <span class="number">2</span></span><br><span class="line">weidows@ubuntu-server:<span class="regexp">/etc/</span>netplan$</span><br></pre></td></tr></table></figure></li><li><p>使用<code>vi</code>修改<code> sudo vi /etc/netplan/00-installer-config.yaml</code></p><ul><li>地址啥的按照规则设</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## This is the network config written by &#x27;subiquity&#x27;</span></span><br><span class="line"><span class="attr">network:</span></span><br><span class="line">  <span class="attr">ethernets:</span></span><br><span class="line">    <span class="attr">ens33:</span></span><br><span class="line">      <span class="attr">dhcp4:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">addresses:</span> [<span class="number">192.168</span><span class="number">.2</span><span class="number">.122</span><span class="string">/24</span>]</span><br><span class="line">      <span class="attr">gateway4:</span> <span class="number">192.168</span><span class="number">.2</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">nameservers:</span></span><br><span class="line">        <span class="attr">addresses:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="number">192.168</span><span class="number">.2</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure></li><li><p>然后应用<code>sudo netplan apply</code>设置,完事!</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="软件备份">软件备份</h2><ul><li><p>找软件的话可以用<code>apt search XXX</code>来找</p></li><li><p>个人安装的一些服务型软件(在主机上做的开发,用这个 Server 跑服务)</p></li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> docker</span><br><span class="line">sudo apt <span class="keyword">install</span> net-tools</span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> 服务器 </tag>
            
            <tag> 虚拟机 </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🎇尝试转投wsl生态.</title>
      <link href="/post/system/wsl2/"/>
      <url>/post/system/wsl2/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-02-01 13:54:10 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:20:29 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\system\wsl2.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%B0%8F%E5%90%90%E6%A7%BD">小吐槽</a></li><li><a href="#%E6%8C%87%E5%8D%97">指南</a><ul><li><a href="#%E5%AE%98%E6%96%B9%E7%9A%84">官方的</a></li><li><a href="#%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A">名词解释</a></li></ul></li><li><a href="#%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4">安装步骤</a><ul><li><a href="#%E7%B3%BB%E7%BB%9F">系统</a></li><li><a href="#%E5%8A%9F%E8%83%BD">功能</a></li><li><a href="#%E9%85%8D%E7%BD%AE">配置</a></li></ul></li><li><a href="#%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90">安装完成</a></li><li><a href="#vscodewsl">VScode+wsl</a><ul><li><a href="#terminal">Terminal</a></li><li><a href="#remote-%E5%BC%80%E5%8F%91">Remote 开发</a></li></ul></li><li><a href="#%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84">地址映射</a></li><li><a href="#ideawsl">IDEA+wsl</a><ul><li><a href="#terminal-1">terminal</a></li></ul></li><li><a href="#%E5%90%8E%E8%AE%B0">后记</a></li><li><a href="#wsl-%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85">wsl 软件安装</a><ul><li><a href="#apt">apt?</a></li><li><a href="#dpkg">dpkg</a></li></ul></li><li><a href="#%E7%97%9B%E7%82%B9%E8%A7%A3%E5%86%B3">痛点解决</a></li></ul><h2 id="小吐槽">小吐槽</h2><ul><li><p>搜文章头图时发现…百度和谷歌差距有点大…</p></li><li><p>我用谷歌时间肯定没百度长,看起来谷歌更了解我 🤣</p><img src="https://www.helloimg.com/images/2022/02/27/GVLAMg.png" alt="20210201140021" /><img src="https://www.helloimg.com/images/2022/02/27/GVSAfK.png" alt="20210201140048" /></li><li><p>虽然并不想吹捧或贬低哪个,但是这…(看来我是老双标怪了~)</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="指南">指南</h2><h3 id="官方的">官方的</h3><ul><li><p>这个微软是官方的,讲的很详细.</p><blockquote><p><a href="https://docs.microsoft.com/zh-cn/windows/wsl/install-win10#update-to-wsl-2">适用于 Linux 的 Windows 子系统安装指南 (Windows 10)</a></p></blockquote></li></ul><hr><h3 id="名词解释">名词解释</h3><ul><li><p>下面牵扯到很多名词,乍一看会<code>蒙圈</code>.</p></li><li><p>放一个关系网络</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- hyper-v</span><br><span class="line">  <span class="string">|- Docker(hype-v引擎)</span></span><br><span class="line">  <span class="string">|- Windows</span></span><br><span class="line">    <span class="string">|- wsl2</span></span><br><span class="line">      <span class="string">|- wsl-linux</span></span><br><span class="line">      <span class="string">|- Docker(wsl引擎)</span></span><br><span class="line">        <span class="string">|- Nginx</span></span><br><span class="line">        <span class="string">|- Node.js</span></span><br><span class="line">        <span class="string">|- 各种系统和服务</span></span><br></pre></td></tr></table></figure></li><li><p><code>hyper-v</code>是微软家的虚拟机平台,定位于<code>VMware</code>相同,虽然它看起来是 Windows 内部的软件,但是开启 hyper-v 后 Windows 本身也会成为其内部的虚拟机.</p></li><li><p>wsl 是基于 Windows 下实现的 Linux 虚拟化技术,全称<code>Windows Subsystem for Linux</code>,所以这里面装的系统肯定是各种 linux,<code>2</code>只是版本号,一般 wsl2 简称 wsl,两个版本功能上有些差别.</p><ul><li><code>wsl-linux</code>就是指在 Store 里面像是 Ubuntu,Debian 等等的 linux 系统</li></ul></li></ul><blockquote><p>Docker 的话详见 <a href="../docker">🌈 初探 Docker.</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="安装步骤">安装步骤</h2><h3 id="系统">系统</h3><ul><li><p>首先 Windows64 位系统版本号必须大于等于 <code>1903</code>.</p></li><li><p>系统类型只有专业版(好像家庭版和企业版不行)</p></li></ul><hr><h3 id="功能">功能</h3><ul><li><p>[x] 启用适用于 Linux 的 Windows 子系统</p></li><li><p>[x] 启用虚拟机功能</p><hr></li><li><p>如图上面两个<code>必须开启</code>,其他的您看着来~</p><img src="https://www.helloimg.com/images/2022/02/27/GVtzd9.png" alt="20210201160810" /></li></ul><hr><h3 id="配置">配置</h3><ul><li><p>下载并安装</p><blockquote><p><a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi">下载适用于 x64 计算机的 WSL2 Linux 内核更新包</a></p></blockquote></li><li><p>然后,将 WSL 2 设置为默认版本</p><ul><li><p>在 PowerShell 输入</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --<span class="keyword">set</span>-<span class="keyword">default</span>-version <span class="number">2</span></span><br></pre></td></tr></table></figure></li><li><p>没出问题的话会提示 <code>有关与 WSL 2 的主要区别的信息，请访问 https://aka.ms/wsl2</code></p></li></ul></li><li><p><code>最后</code>,打开<code>Microsoft Store</code>,安装想安装的 Linux 系统</p><ul><li><p>Ubuntu 16.04 LTS</p></li><li><p>Ubuntu 18.04 LTS</p></li><li><p>Ubuntu 20.04 LTS (主流推荐)</p></li><li><p>openSUSE Leap 15.1</p></li><li><p>SUSE Linux Enterprise Server 12 SP5</p></li><li><p>SUSE Linux Enterprise Server 15 SP1</p></li><li><p>Kali Linux</p></li><li><p>Debian GNU/Linux</p></li><li><p>Fedora Remix for WSL</p></li><li><p>Pengwin</p></li><li><p>Pengwin Enterprise</p></li><li><p>Alpine WSL</p></li></ul></li><li><p>小插曲,如果 Store 加载不出来数据,报错<code>0x80131500</code>,那么,请关掉你的科学上网软件 🤣</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="安装完成">安装完成</h2><ul><li><p>第一次打开时他会先安装一小会儿,然后让你输入用户名和密码,创建新用户</p><ul><li>注意 Linux 系统输入密码时不会显示<code>****</code></li></ul><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Installing, this may <span class="keyword">take</span> a few minutes<span class="params">...</span></span><br><span class="line">Please create a default UNIX user account. The username does <span class="literal">not</span> need <span class="keyword">to</span> <span class="keyword">match</span> your Windows username.</span><br><span class="line">For more information visit: https:<span class="comment">//aka.ms/wslusers</span></span><br><span class="line">Enter <span class="literal">new</span> UNIX username: weidows</span><br><span class="line"><span class="literal">New</span> password:</span><br><span class="line">Retype <span class="literal">new</span> password:</span><br><span class="line">passwd: password updated successfully</span><br><span class="line">Installation successful!</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="VScode-wsl">VScode+wsl</h2><h3 id="Terminal">Terminal</h3><ul><li><p>网上大多数人推荐<code>Windows Terminal</code>,我觉得也不错,不过没用,直接用的<code>VScode</code></p></li><li><p>如图,点<code>选择默认shell</code>里面就可以选择<code>wsl</code>了</p><img src="https://www.helloimg.com/images/2022/02/27/GVPXRS.png" alt="20210201165532" /></li></ul><hr><h3 id="Remote-开发">Remote 开发</h3><ul><li><p>wsl 相当于在内网开了一台电脑,会有一个<code>内网ip</code></p></li><li><p>我们不需要获取这个 IP,直接在 VScode 里安装<code>Remote - WSL</code>这个插件</p></li><li><p>甚至都不需要配置,直接点左下角打开就行了</p><img src="https://www.helloimg.com/images/2022/02/27/GVAtIq.png" alt="20210201173024" /></li><li><p>当然,如果不嫌麻烦拿 ssh 连接 wsl 也可以,需要在 wsl 系统内配置静态 ip,但是很多功能性上不如上面那个插件.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="地址映射">地址映射</h2><ul><li><p>安装 wsl 之后就可以通过<code>\\wsl$</code>访问到自己的虚拟机</p><img src="https://www.helloimg.com/images/2022/02/27/GV4XTS.png" alt="20210201173448" /></li><li><p>映射</p><img src="https://www.helloimg.com/images/2022/02/27/GVSOhE.png" alt="20210201174422" /></li><li><p>映射之后出现新盘符</p><img src="https://www.helloimg.com/images/2022/02/27/GVAEkm.png" alt="20210201174646" /></li><li><p>有个奇妙的事是<code>mnt/</code>目录下会反过来映射你的所有本地盘符</p><ul><li><p>看上面那个图,我有四个盘符,然后 mnt 目录下就有<code>c,d,e,f</code>四个文件夹</p></li><li><p>这几个映射文件夹在 Windows 文件管理器无法打开,但是在终端里可以进入</p></li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVLfvE.png" alt="20210201174957" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="IDEA-wsl">IDEA+wsl</h2><h3 id="terminal">terminal</h3><ul><li><p>设置里打开 <code>File -&gt; Settings -&gt; Tools -&gt; Terminal</code></p></li><li><p>shell path 填上</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;cmd.exe&quot;</span> /k <span class="string">&quot;wsl.exe&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>如图</p><img src="https://www.helloimg.com/images/2022/02/27/GVLc8h.png" alt="20210201221447" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="后记">后记</h2><ul><li><p>本来开始想的是开发环境转到 wsl 内部</p></li><li><p>折腾了大半天发现 wsl 生态并不很讨喜,只有部分特性值得使用</p><ul><li><p>比如跑 <code>Docker</code>,<code>zsh</code> 终端,<code>SQL</code> 服务等等…</p></li><li><p>尝试了一下,直白点说,<code>用它做开发不行!</code></p></li><li><p>但是拿它来<code>替代虚拟机</code>倒是还可以,它的 CPU 闲时占用很低(不到 1%),内存占用半个 G,还好~</p></li></ul><hr></li><li><p>为啥呢? 说一下我遇到的痛点:</p><ul><li><p>首先,<code>生态问题</code>,下图是我的开发环境,想要移植到 Linux 难度很大,肯定要放弃一些,所以我放弃移植了…</p><img src="https://www.helloimg.com/images/2022/02/27/GVS9wv.png" alt="20210201215547" /></li><li><p>其次,有些小问题需要解决,比如路径问题<code>&quot;/&quot;与&quot;\&quot;</code>不一样,还有换行符问题,会导致 git 认为你的项目全绿<code>(就是所有文件的所有行都有修改)</code>,令人窒息…</p></li><li><p>再次,<code>性能问题</code>,这个虚拟化毕竟是虚拟,上手试了一下会有迟钝(CPU 和网络问题都有),另外,开启了虚拟后就连 Windows 多多少少也会损耗一些性能.</p></li><li><p>其实我认为最难受的是<code>IDE适配</code>,我用的<code>IntelliJ IDEA</code>和<code>VScode</code>,它们需要<code>Git,Node.js,openjdk,maven,python</code>等等,这些并不能通过 wsl 直通,除非直接用 linux 系统把这些全装进 linux 里面.</p></li></ul></li></ul><hr><ul><li><p>不过倒也没有白安装,一些东西还是需要 wsl 的</p><ul><li><p>比如<code>bash</code>,<code>zsh</code>,<code>docker</code>等等…</p></li><li><p>害,算了,<code>VMware</code>真香!</p></li></ul></li></ul><hr><ul><li><p>还有一个比较上头的问题:</p><ul><li>开启 wsl 后因为虚拟化,window 系统开机后<code>无法自动连接 WiFi</code>,可能是个 bug,但是劝退了!</li><li>经测试,开启 hyper-v 也会造成这后果.</li><li>有可能只是我这么一个个例,硬件兼容性问题.</li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="wsl-软件安装">wsl 软件安装</h2><h3 id="apt">apt?</h3><blockquote><p><a href="https://www.sysgeek.cn/apt-vs-apt-get/">Linux 中 apt 与 apt-get 命令的区别与解释</a></p></blockquote><blockquote><p>简单来说就是：apt = apt-get、apt-cache 和 apt-config 中最常用命令选项的集合。</p></blockquote><hr><h3 id="dpkg">dpkg</h3><blockquote><p><a href="https://blog.csdn.net/LEON1741/article/details/85127000">怎么理解 ubuntu 中的软件包管理器 apt 和 dpkg</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="痛点解决">痛点解决</h2><blockquote><p><a href="https://www.cnblogs.com/kuangdaoyizhimei/p/14175143.html#_label2_0">本篇文章会介绍 win10 中 wsl2 的安装和使用以及遇到的常见问题比如如何固定 wsl2 地址等问题的总结。</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> windows </tag>
            
            <tag> wsl2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🍔语段优选~(贰)</title>
      <link href="/post/life/nicer/2/"/>
      <url>/post/life/nicer/2/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-31 22:02:04 * @LastEditors: Weidows * @LastEditTime: 2021-03-21 16:42:20 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\life\nicer\2.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%87%A0%E5%8F%A5%E9%AA%9A%E8%AF%9D">几句骚话</a></li><li><a href="#%E5%A4%A7%E4%BD%AC%E7%94%9F%E6%B4%BB%E7%BB%8F%E9%AA%8C">大佬生活经验</a></li><li><a href="#%E5%A7%93%E5%90%8D">姓名</a></li><li><a href="#%E5%87%BA%E8%B7%AF">&lt;&lt;出路&gt;&gt;</a></li><li><a href="#%E6%91%B8%E9%B1%BC">摸鱼</a></li><li><a href="#%E4%BB%96%E4%B9%9F%E5%B9%B2%E8%BF%99%E4%B8%AA">他也干这个?</a></li><li><a href="#%E4%BD%9C%E7%94%BB">作画</a></li><li><a href="#%E7%84%A6%E8%99%91">焦虑</a></li><li><a href="#%E6%97%A0%E9%A2%98">无题</a></li><li><a href="#%E9%82%A3%E4%BA%9B-40-%E5%B2%81%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%91%98%E9%83%BD%E5%8E%BB%E5%93%AA%E4%BA%86">那些 40 岁的程序员都去哪了?</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="几句骚话">几句骚话</h2><p>雪花们是无辜的,但它们都死了.</p><p>男孩子小时候喜欢玩电动玩具，女孩子小时候喜欢玩娃娃。<br>长大后，<br>男孩子喜欢玩娃娃，女孩子喜欢玩电动玩具。<br>或许，这就是这就是成长吧。​</p><p>骗我感情可以，骗我钱请去世[OK]这一辈子我可以爱很多人，但我能挣几个钱？[微笑][跪了]​</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="大佬生活经验">大佬生活经验</h2><blockquote><p><a href="https://mp.weixin.qq.com/s?__biz=MzU4NjIxODMyOQ==&amp;mid=2247494759&amp;idx=1&amp;sn=798ea150d4f4744d1796c92e83690552&amp;chksm=fdfc0251ca8b8b47a1e7b3f3b4d559082bc50dfa747cecf088bd8f976dad7cd4618a9f8353d9&amp;mpshare=1&amp;scene=23&amp;srcid=0131UNZyzkK6IJ65Fo9xbeqV&amp;sharer_sharetime=1612068450736&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd">摘自: 一个中科大差生的 8 年程序员工作总结</a></p></blockquote><p>如果你的亲人是普通阶层，那对于人生中一些大事来说，他们给的建议往往就是普通阶层的思维，他们的阶层就是他们一生思维决策的结果，如果你的目标是跳出本阶层，那最好只把他们的建议当成参考。</p><p>不要和你的同事比工资，没有意义，比工资总会有人受伤，更多的是负面影响，并且很多时候受伤的会是你。</p><p>人很难挣到他认知之外的财富，就算偶然拿到了，也可能很快失去。所以不要羡慕别人投机获得的财富，努力提升你的思维，财商才是正道。</p><hr><ul><li>虽然每个人生活环境不一样,各有各的精彩,但是有些生活方式确实值得我们学习~</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="姓名">姓名</h2><p>圣·璃莹殇·安洁莉娜·樱雪羽晗灵·血丽魑·魅·安塔利亚·伤梦薰魅·海瑟薇·蔷薇玫瑰泪·羽灵·邪儿·凡多姆海威恩·夏影·琉璃舞·雅·蕾玥瑷雅·曦梦月·玥蓝·岚樱·紫蝶·丽馨·蕾琦洛·凤·颜鸢·希洛·玖兮·雨烟·叶洛莉兰·凝羽冰·泪伊如冰落·殇心樱语冰凌伊娜·洛丽塔紫·蝶梦如璃紫陌悠千艳·优花梦冰玫瑰灵伤如爱·晶泪墨阳云筱残伤雅·琉璃爱梦莲泪·冰雪殇璃陌梦·爱樱沫渺·落璃琴依语·千梦然丝伤·可薇·茉殇黎·幽幻紫银·泪如韵影倾乐兰慕·冰雅泪落冰紫蝶梦·璃紫陌悠千艳优墨阳云筱残·雪莲茉·伊文思·蕊夏清·碎墨音·芊乐梦黛怡·墨丽莎·梦灵苏魅香·紫蓝幽幻倾城萌美迷离·茉莉白嫩爱凤风魑·殇泪花如霜梦兰·萝莉心梦妖丽百千艳·瑰百合香珠合梦喃·泪伤梦雅爱之瑰·墨艳黎幻殇雪倩梦·情娜血清恋沫幽弥千月绯心丝梦灵蓝千月筱雪殇·希羽岚梦心殇雨樱琉璃舞韵倾雅·芸茜殇樱雪梦·曦魂梦月澪瑷琪欣泪·殇紫乐蝶雨·苏丽落雅馨瑷魅·蠫赬飖·风璃殇·沫血伤·月冰灵希洛梦·恋琴爱</p><ul><li>真 tm 好听~</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="出路">&lt;&lt;出路&gt;&gt;</h2><blockquote><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg4NjUxMzg5MA==&amp;mid=2247488256&amp;idx=1&amp;sn=a78b6d9847b8ed14aae4fd598eb4c1de&amp;chksm=cf99da8df8ee539bfd633765a051a0c8bc1dc28912621f4ec6d7de7368ca51fb07ff74ebc732&amp;mpshare=1&amp;scene=23&amp;srcid=0218w4FckiZHX9wH52SrTrtx&amp;sharer_sharetime=1613655574537&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd">《出路》</a></p></blockquote><ul><li><p><code>局内人,观测者,局外人</code>的三方博弈</p></li><li><p>纪录片很客观,反应出来的事实也很客观,看完之后感觉自己竟与局内人无二</p></li><li><p>我应该也是跟里面的男生一样,<code>小镇做题家</code>,噩梦的 HeBei,比妈还亲的五三,hhh,到了大学也是需要看网课自学竞争,只不过竞争范围大了=&gt;全国化了</p></li><li><p><code>作为局外的观测者,我感觉观测的并不局限在视频里的角色,反而更加聚焦在我自己身上,我,观测的是我对社会的观测角度.</code></p></li><li><p>我倒是并不认为这三人谁悲惨谁成功,我,谁的人生都没经历过,只知自己躯体上挂载着二十多光阴.</p></li></ul><hr><p>有些感慨,来一点题外话:</p><ol><li><p>小时候特喜欢喜剧,比如周星驰,小沈阳他们拍的,不理解为什么有的人喜欢悲情剧.</p></li><li><p>后来大一些,感觉部分喜剧已经笑不出来了,悲情剧比喜剧更加精彩,戏剧本身更加耐人寻味</p></li><li><p>现在,连<code>德云社</code>也不容易让我做到<code>笑喷</code>,只有<code>芳文社</code>能让我很会心的笑了.</p></li></ol><hr><p>写到这里,大致我也在写的过程中明白了一些…</p><ul><li><p>我在上学,包括去社会打拼过程中被磨损了很大部分的<code>喜怒哀乐</code></p></li><li><p>这是可悲的,生活能不能过出喜怒哀乐先不说,至少我不想丢失那份<code>人之常情</code>.</p></li><li><p>我到现在还不是特崇拜所谓的<code>有钱人</code>和<code>大神</code>,bro,自身做到让别人有利可图也是挺累的</p><ul><li><p>或许这也是<code>大人</code>口中的&quot;你还太年轻,长大了你就明白了&quot;</p></li><li><p>yare yare,可恶,不想长大!</p></li></ul></li></ul><hr><h2 id="摸鱼">摸鱼</h2><p>特地换了电脑来回复下我的感受 今年刚好 30，我今年总算学会摸鱼和闭嘴了</p><ol><li>你想做成一件事 不是单纯靠你自己一个人就能推动 在公司里 企业文化有老板自身决定</li><li>你积极你努力了 身边人会害怕 而且你自己一个人精力也有限会累 做对了是你应该的 做错了 就是你的问题</li><li>人生如戏 有时候不能太认真 也不能不认真 几年前看不起 那些闲鱼同行（程序员） 为什么他们不一次性把事情做好 为什么给他们活 会有这么有疑问 推三阻四<br>我今年才明白 他们是活的明白太早了 能者多劳 多劳多累 我现在也学会了 像他们一样当咸鱼 有啥好积极的</li><li>不要一根筋的以为你想解决问题 大家都是出来混口饭吃的 你这么积极 别人心里很厌恶你的 混口饭吃而已 ​</li></ol><hr><h2 id="他也干这个">他也干这个?</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[doge]“你认识苍山有井名为空吗？”</span><br><span class="line">[妙啊]“不认识。”</span><br><span class="line">[doge]“你认识水泽之地的萝拉吗？”</span><br><span class="line">[妙啊]“不认识。”</span><br><span class="line">[doge]“你认识半佛吗？”</span><br><span class="line">[妙啊]“什么？他也干这个了！？​</span><br></pre></td></tr></table></figure><hr><h2 id="作画">作画</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">*.　　°　　　　☀️·　　　　🛸　　　 　🌏　°　　🌓　•　　.°•　　　🚀 ✯✯</span></span><br><span class="line"><span class="strong">　　　★　*</span>°　　　　🛰　°·　　</span><br><span class="line"><span class="bullet">.　　　</span>•　°★　•</span><br><span class="line">▁▂▃▄▅▆▇▇▆▅▄▃▁▂▃.​</span><br></pre></td></tr></table></figure><ul><li>可以复制给朋友发过去</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="焦虑">焦虑</h2><ul><li><p>下方一大坨关于人生未来的考量(看起来可能有些荒谬)</p><hr></li><li><p>其一</p><p>人均薪资是日本的 1/4，房价物价可不止 1/4，人家日本打工 5 天买一台 ps5，10 天一台 iphone，购买力也是天差地别，别比了 ​</p><p>回复 @随便 87653 :房价比的是房价收入比。日本房价收入比在正常范围。我们房价收入比破天了，世界前十我们独占七个。三四线城市房价收入比比纽约都高。<br>汽车，即使不考虑收入，直接价格就是日本便宜。电器这个半斤八两吧，差距不是很大。服装也差不多的价格。餐饮日本要贵。</p><p>总的来说，总消费差距不大（中国主要是房价拉高了），但收入差了几倍 ​</p><hr></li><li><p>其二</p><p>其实吧，说句很心凉的话，我们都是韭菜，中国的年轻人被房子困的死死的，其实也就是被国家困的死死的，您们不买房，国家哪里有那么多钱呢？哪怕是租房，都不会让你安心，因为租房你小孩上不了学，这招够狠吧，看你还买不买房，所有政策都是逼我们这些年轻人赶紧买房，把钱交给国家。我们又能怎么办呢？结婚要买房，小孩上学要有房，我预测以后领养老金肯定也要看房产了，你房产在哪你才能领什么地方标准的养老金。😂😰😢​</p><hr></li><li><p>其三</p><p>北上广深没点现实基础谁敢去啊[笑哭]，都想逆袭走上人生巅峰吗？别逗了，作为一名男性，在 22 岁到以后可能 65 岁退休的 43 年工作时间里有的是坎坷不平。​</p><hr></li><li><p>其四</p><p>本科航海，双控研究生，现在月薪 2.2w.建议年轻的朋友趁年轻一定要静下心来多读书，多出去闯一闯，年轻是你们最大的资本。以后实在没办法了再出海。​</p><hr></li><li><p>其五</p><p>捋一捋思绪</p><p>最近一直在思考换工作的问题，从跳槽到想再跳槽只用了半年的时间，倒不是因为年轻人工作变动太大不抗压这些东西，而是我开始从整个人生去考虑问题。</p><p>那天我想到了死，就是想到自己最终会死掉，从自我意识的觉醒，到认识世界，最终落叶归根，我直面了死亡这件事，然后发现我自己现在所做的一些事情是没有意义的。</p><p>我一个人，离群索居，在天津给资本家卖命。挣的钱一部分给了房租，一部分给了医院，还有一部分给了外卖和打车。</p><p>攒下来的那部分，要拿来承担巨额的房价。</p><p>激流勇进，大城市的房子虽然贵，却因为其金融属性，带有投资的价值，所以是有必要买的。</p><p>但是回归到一个最根本的问题上，几十年的人生就是给房贷打工，其实，是资本吸了我的血。</p><p>在买房这件事上，看似是资本家占据强势地位，因为居高不下的房价让人望而却步。但是仔细一想，其实，人口才是最关键的资源。</p><p>东北的房子不值钱，北上广深的房子涨得离谱，因为北上广深聚集的不仅仅是所谓的医疗教育，它掌握的是真正的财政密码，人口。</p><p>人口本就是最重要的资源，只有人活着，一切附着其上的东西才有了价值。不然人死如灯灭，所有的医疗教育房产基础设施等一系列的东西都失去了意义。</p><p>我想过一个问题，我把户口迁来天津，为的是孩子以后的高考资源。但是有一个致命问题，我在天津生不出孩子。​</p><hr></li><li><p>其六</p><p>特别喜欢刘晓艳老师一个观点：不要光听别人说做什么好，做什么有前途，你现在做什么没前途。有多少人敢做一件事啊 ​</p><hr></li><li><p>其七</p><p>他们这群人，又想吃人，又是鬼鬼祟祟，想法子遮掩，不敢直截下手，真要令我笑死。我忍不住，便放声大笑起来，十分快活。自己晓得这笑声里面，有的是义勇和正气。</p><p>——鲁迅 ​</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="无题">无题</h2><p>如果尖锐的批评完全消失，温和的批评将会变得刺耳。如果温和的批评也不被允许，沉默将被认为居心叵测。如果沉默也不再允许，赞扬不够卖力将是一种罪行。如果只允许一种声音存在，那么，唯一存在的那个声音就是谎言。​</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="那些-40-岁的程序员都去哪了">那些 40 岁的程序员都去哪了?</h2><blockquote><p><a href="https://mp.weixin.qq.com/s?__biz=MzA3MzA5MTU4NA==&amp;mid=2247490495&amp;idx=1&amp;sn=8c55ca44101eaffef419eed9142e7868&amp;chksm=9f1504d0a8628dc6b87d3f037c0396d2a35b14c2d9e879d47cabb7e21ad6cc2c60e0bc6da8f3&amp;mpshare=1&amp;scene=23&amp;srcid=0316j4PqBKk4KgzksHdHW63w&amp;sharer_sharetime=1615901427232&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd">那些 40 岁的程序员都去哪了</a></p></blockquote><ul><li><p>最近感觉<s>我们</s><code>年轻人</code>挺像<code>叶子</code>的,离开树枝四处漂泊,来一阵风就会被动翻身</p><ul><li><p>有人乘风高飞,有人随风散落</p></li><li><p>并没有感觉那种结局是好是坏,只是感觉我们总需要这么一片文章使我们心境沉淀些许</p></li><li><p><code>或许那样飘起来不是那么累,落脚点也不会像看似那么远.</code></p></li></ul></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> nicer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 哲学 </tag>
            
            <tag> 生活 </tag>
            
            <tag> 搞笑 </tag>
            
            <tag> 高能 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🌈初探Docker.</title>
      <link href="/post/system/docker/"/>
      <url>/post/system/docker/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-31 00:08:20 * @LastEditors: Weidows * @LastEditTime: 2021-10-12 15:47:09 * @FilePath: \Blog-private\source\_posts\system\docker.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%90%8D%E8%AF%8D%E5%BC%95%E5%85%A5">名词引入</a><ul><li><a href="#docker-dockerfile">docker-Dockerfile</a></li><li><a href="#docker-compose">docker-compose</a></li><li><a href="#docker-machine">docker-machine</a></li></ul></li><li><a href="#%E5%AE%89%E8%A3%85%E5%90%AF%E5%8A%A8">安装启动</a><ul><li><a href="#the-best-manjaro">the-best-Manjaro</a></li><li><a href="#windows">Windows</a></li><li><a href="#ubuntu-server">Ubuntu-Server</a></li><li><a href="#%E8%A7%A3%E5%86%B3%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98">解决权限问题</a></li></ul></li><li><a href="#%E5%8A%A0%E9%80%9F">加速</a><ul><li><a href="#%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F">镜像加速</a><ul><li><a href="#windows-1">Windows</a></li><li><a href="#manjaro">Manjaro</a></li></ul></li><li><a href="#%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86">设置代理</a></li></ul></li><li><a href="#docker-%E7%AE%A1%E7%90%86">docker 管理</a><ul><li><a href="#vscode-docker">VScode-docker</a></li><li><a href="#portainer">Portainer</a></li></ul></li><li><a href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4">常用命令</a><ul><li><a href="#docker-%E8%87%AA%E5%90%AF">docker 自启</a></li><li><a href="#%E5%AE%B9%E5%99%A8%E8%87%AA%E5%90%AF">容器自启</a></li></ul></li><li><a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%89%A7%E8%A1%8C">命令行执行</a></li><li><a href="#%E5%A4%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86">多数据库管理</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="名词引入">名词引入</h2><ul><li><p>首先<code>Docker</code>是啥就不解释了.</p></li><li><p>初探尝试安装时出现下面好几个选择,于是搜了搜~</p><img src="https://www.helloimg.com/images/2022/02/27/GVA30z.png" alt="20210131002505" /></li><li><p>找到 docker 家族有几个特殊的工具<code>docker-Dockerfile</code>, <code>docker-compose</code>, <code>docker-machine</code></p><img src="https://www.helloimg.com/images/2022/02/27/GVSvW9.png" alt="20210131004332" /></li></ul><hr><h3 id="docker-Dockerfile">docker-Dockerfile</h3><blockquote><p><a href="https://www.runoob.com/docker/docker-dockerfile.html">Docker Dockerfile</a> <br>Dockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。</p></blockquote><hr><h3 id="docker-compose">docker-compose</h3><blockquote><p><a href="https://blog.csdn.net/weixin_43165750/article/details/106108234">docker 与 docker-compose 区别</a> <br>docker 是一个容器，你如果要是安装服务也是要单独一个一个的安装，如果你使用了 docker-compose 的话 就可以使用一个 docker-compose.yml 脚本一键安装<br>说来其是管理同一个 docker 下多个服务的.</p></blockquote><hr><h3 id="docker-machine">docker-machine</h3><blockquote><p><a href="https://zhuanlan.zhihu.com/p/93459073">Docker 三剑客之 docker-machine</a> <br>这个是用来管理多个 docker 的.</p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="安装启动">安装启动</h2><h3 id="the-best-Manjaro">the-best-Manjaro</h3><ul><li><p>manjaro 里搜 <code>docker</code> 和 <code>docker-compose</code> 安装,然后配置下面的 <a href="#manjaro">镜像加速</a> 和 <a href="#docker-%E8%87%AA%E5%90%AF">docker 自启</a></p></li><li><p>ok, Manjaro 没有其他任何坑!</p></li></ul><hr><h3 id="Windows">Windows</h3><ul><li><p>在 <code>Windows</code> 上安装就比较复杂了,牵扯到很多东西.</p></li><li><p>Docker 基于 Linux 系统实现,所以无法直接安装在 Windows 上,需要虚拟化支持.</p><ul><li>这就需要借助<code>wsl</code>或者<code>Virtual box</code>或者<code>hyper-v</code>了(建议用 wsl)</li></ul><blockquote><p>详见 <a href="../wsl2#%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A">🎇 尝试转投 wsl 生态.#名词解释</a></p></blockquote><ul><li>这里提一下,如果想用 hyper-v 引擎,只需要勾选<code>hyper-v</code>功能就行,wsl 的那两个不用开(当然开了对 docker 也没影响)</li></ul></li></ul><hr><ul><li><p>安装 docker 前,需要装好 wsl,下面文章到<code>最后</code>安装系统之前,都需要过一遍才能装好 wsl2</p><blockquote><p><a href="../wsl2#%E9%85%8D%E7%BD%AE">🎇 尝试转投 wsl 生态.#配置</a></p></blockquote></li><li><p>装好 wsl 后去 docker 官网下载 <code>Docker desktop for window</code>,安装.</p></li><li><p>装好 docker 之后 <code>重启</code> 才能正常使用!</p></li></ul><hr><h3 id="Ubuntu-Server">Ubuntu-Server</h3><ul><li><p><code>Ubuntu-Server</code>装系统时就带有<code>Docker</code>安装选项,直接安装即可,但是会遇到下面<a href="#%E8%A7%A3%E5%86%B3%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98">权限问题及解决办法</a></p></li><li><details>  <summary>安装后开机检测</summary><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">weidows@ubuntu-server:~$ docker</span><br><span class="line"></span><br><span class="line">Usage: docker [OPTIONS] COMMAND</span><br><span class="line"></span><br><span class="line">A self-sufficient runtime <span class="keyword">for</span> containers</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">--config string Location of client config files (default <span class="string">&quot;/home/weidows/snap/docker/471/.docker&quot;</span>)</span><br><span class="line">-c, --context string Name of the context to <span class="keyword">use</span> to connect to the daemon (overrides DOCKER_HOST env <span class="keyword">var</span> and default context <span class="keyword">set</span> with <span class="string">&quot;docker context use&quot;</span>)</span><br><span class="line">-<span class="keyword">D</span>, --debug Enable debug mode</span><br><span class="line">-<span class="keyword">H</span>, --host <span class="keyword">list</span> Daemon socket(s) to connect to</span><br><span class="line">-<span class="keyword">l</span>, --<span class="keyword">log</span>-level string <span class="keyword">Set</span> the logging level (<span class="string">&quot;debug&quot;</span>|<span class="string">&quot;info&quot;</span>|<span class="string">&quot;warn&quot;</span>|<span class="string">&quot;error&quot;</span>|<span class="string">&quot;fatal&quot;</span>) (default <span class="string">&quot;info&quot;</span>)</span><br><span class="line">--tls <span class="keyword">Use</span> TLS; implied <span class="keyword">by</span> --tlsverify</span><br><span class="line">--tlscacert string Trust certs signed only <span class="keyword">by</span> this <span class="keyword">CA</span> (default <span class="string">&quot;/home/weidows/snap/docker/471/.docker/ca.pem&quot;</span>)</span><br><span class="line">--tlscert string Path to TLS certificate <span class="keyword">file</span> (default <span class="string">&quot;/home/weidows/snap/docker/471/.docker/cert.pem&quot;</span>)</span><br><span class="line">--tlskey string Path to TLS key <span class="keyword">file</span> (default <span class="string">&quot;/home/weidows/snap/docker/471/.docker/key.pem&quot;</span>)</span><br><span class="line">--tlsverify <span class="keyword">Use</span> TLS and verify the remote</span><br><span class="line">-v, --<span class="keyword">version</span> <span class="keyword">Print</span> <span class="keyword">version</span> information and quit</span><br><span class="line"></span><br><span class="line">Management Commands:</span><br><span class="line">builder Manage builds</span><br><span class="line">config Manage Docker configs</span><br><span class="line">container Manage containers</span><br><span class="line">context Manage contexts</span><br><span class="line">engine Manage the docker engine</span><br><span class="line">image Manage images</span><br><span class="line">network Manage networks</span><br><span class="line">node Manage Swarm nodes</span><br><span class="line"><span class="keyword">plugin</span> Manage plugins</span><br><span class="line">secret Manage Docker secrets</span><br><span class="line">service Manage services</span><br><span class="line"><span class="keyword">stack</span> Manage Docker stacks</span><br><span class="line">swarm Manage Swarm</span><br><span class="line">system Manage Docker</span><br><span class="line">trust Manage trust <span class="keyword">on</span> Docker images</span><br><span class="line">volume Manage volumes</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">attach Attach <span class="keyword">local</span> standard <span class="keyword">input</span>, output, and <span class="keyword">error</span> streams to a running container</span><br><span class="line">build Build <span class="keyword">an</span> image from a Dockerfile</span><br><span class="line">commit Create a new image from a container&#x27;s changes</span><br><span class="line">cp <span class="keyword">Copy</span> files/folders between a container and the <span class="keyword">local</span> filesystem</span><br><span class="line">create Create a new container</span><br><span class="line">deploy Deploy a new <span class="keyword">stack</span> or <span class="keyword">update</span> <span class="keyword">an</span> existing <span class="keyword">stack</span></span><br><span class="line">diff <span class="keyword">Inspect</span> changes to files or directories <span class="keyword">on</span> a container&#x27;s filesystem</span><br><span class="line">events Get real time events from the server</span><br><span class="line">exec <span class="keyword">Run</span> a command <span class="keyword">in</span> a running container</span><br><span class="line">export Export a container&#x27;s filesystem <span class="keyword">as</span> a tar archive</span><br><span class="line">history Show the history of <span class="keyword">an</span> image</span><br><span class="line">images <span class="keyword">List</span> images</span><br><span class="line">import Import the contents from a tarball to create a filesystem image</span><br><span class="line">info <span class="keyword">Display</span> system-wide information</span><br><span class="line"><span class="keyword">inspect</span> <span class="keyword">Return</span> low-level information <span class="keyword">on</span> Docker objects</span><br><span class="line">kill Kill <span class="keyword">one</span> or <span class="keyword">more</span> running containers</span><br><span class="line">load Load <span class="keyword">an</span> image from a tar archive or STDIN</span><br><span class="line">login <span class="keyword">Log</span> <span class="keyword">in</span> to a Docker registry</span><br><span class="line">logout <span class="keyword">Log</span> <span class="keyword">out</span> from a Docker registry</span><br><span class="line">logs Fetch the logs of a container</span><br><span class="line"><span class="keyword">pause</span> <span class="keyword">Pause</span> all processes within <span class="keyword">one</span> or <span class="keyword">more</span> containers</span><br><span class="line">port <span class="keyword">List</span> port mappings or a specific mapping <span class="keyword">for</span> the container</span><br><span class="line">ps <span class="keyword">List</span> containers</span><br><span class="line">pull Pull <span class="keyword">an</span> image or a repository from a registry</span><br><span class="line">push Push <span class="keyword">an</span> image or a repository to a registry</span><br><span class="line"><span class="keyword">rename</span> <span class="keyword">Rename</span> a container</span><br><span class="line">restart Restart <span class="keyword">one</span> or <span class="keyword">more</span> containers</span><br><span class="line"><span class="keyword">rm</span> Remove <span class="keyword">one</span> or <span class="keyword">more</span> containers</span><br><span class="line">rmi Remove <span class="keyword">one</span> or <span class="keyword">more</span> images</span><br><span class="line"><span class="keyword">run</span> <span class="keyword">Run</span> a command <span class="keyword">in</span> a new container</span><br><span class="line"><span class="keyword">save</span> <span class="keyword">Save</span> <span class="keyword">one</span> or <span class="keyword">more</span> images to a tar archive (streamed to STDOUT <span class="keyword">by</span> default)</span><br><span class="line"><span class="keyword">search</span> <span class="keyword">Search</span> the Docker Hub <span class="keyword">for</span> images</span><br><span class="line">start Start <span class="keyword">one</span> or <span class="keyword">more</span> stopped containers</span><br><span class="line">stats <span class="keyword">Display</span> a live stream of container(s) resource usage statistics</span><br><span class="line">stop Stop <span class="keyword">one</span> or <span class="keyword">more</span> running containers</span><br><span class="line">tag Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE</span><br><span class="line">top <span class="keyword">Display</span> the running processes of a container</span><br><span class="line">unpause Unpause all processes within <span class="keyword">one</span> or <span class="keyword">more</span> containers</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">Update</span> configuration of <span class="keyword">one</span> or <span class="keyword">more</span> containers</span><br><span class="line"><span class="keyword">version</span> Show the Docker <span class="keyword">version</span> information</span><br><span class="line">wait Block until <span class="keyword">one</span> or <span class="keyword">more</span> containers stop, then <span class="keyword">print</span> their <span class="keyword">exit</span> codes</span><br><span class="line"></span><br><span class="line"><span class="keyword">Run</span> &#x27;docker COMMAND --<span class="keyword">help</span>&#x27; <span class="keyword">for</span> <span class="keyword">more</span> information <span class="keyword">on</span> a command.</span><br><span class="line">weidows@ubuntu-server:~$</span><br><span class="line"></span><br></pre></td></tr></table></figure></details></li></ul><hr><h3 id="解决权限问题">解决权限问题</h3><blockquote><p><a href="https://blog.csdn.net/liangllhahaha/article/details/92077065">解决 Ubuntu18.04 启动 Docker“Got permission denied while trying to connect to the Docker daemon socket“问题</a></p></blockquote><ul><li><p>我安装的<code>Ubuntu-Server</code>没有<code>root</code>用户,会导致 docker 启动异常.</p></li><li><p>用<code>docker version</code>检查</p><ul><li>最后一行会报错这样</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Got permission denied <span class="keyword">while</span> trying to connect to the Docker daemon socket at unix:<span class="regexp">//</span><span class="regexp">/var/</span>run<span class="regexp">/docker.sock: Get http:/</span><span class="regexp">/%2Fvar%2Frun%2Fdocker.sock/</span>v1.<span class="number">26</span><span class="regexp">/images/</span>json: dial unix <span class="regexp">/var/</span>run/docker.sock: connect: permission denied</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>解决方案</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd docker          <span class="comment">#添加docker用户组</span></span><br><span class="line">sudo gpasswd -a $<span class="keyword">USER</span> <span class="title">docker</span>  <span class="comment">#将当前用户添加至docker用户组</span></span><br><span class="line">newgrp docker                 <span class="comment">#更新docker用户组</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="加速">加速</h2><h3 id="镜像加速">镜像加速</h3><ul><li><p>登录阿里云并找到<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors"><code>容器镜像服务</code></a></p></li><li><p>阿里会给一个加速地址,把地址复制到 Docker 设置里就可.</p></li></ul><h4 id="Windows-2">Windows</h4>  <img src="https://www.helloimg.com/images/2022/02/27/GVS4w1.png" alt="20210205010825" /><hr><h4 id="Manjaro">Manjaro</h4><ul><li><p>新建或者修改<code>/etc/docker/daemon.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>然后重启 docker 服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="设置代理">设置代理</h3><blockquote><p>参考: <a href="https://docs.docker.com/config/daemon/systemd/">docker docs</a></p></blockquote><ul><li><p>国内网络环境拉取镜像非常慢,挂代理可以快很多. (不过一般配置了上面的镜像加速就用不着配置代理了)</p></li><li><p>1.新建文件夹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p <span class="regexp">/etc/</span>systemd<span class="regexp">/system/</span>docker.service.d</span><br></pre></td></tr></table></figure></li><li><p>2.新建文件 <code>/etc/systemd/system/docker.service.d/http-proxy.conf</code>,添加内容:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Service]</span><br><span class="line">Environment=&quot;HTTP_PROXY=http://192.168.2.109:7890&quot;</span><br></pre></td></tr></table></figure></li><li><p>3.如果需要其他协议的代理,可以再添加,如下:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Service]</span><br><span class="line">Environment=&quot;HTTP_PROXY=http://192.168.2.109:7890&quot;</span><br><span class="line">Environment=&quot;HTTPS_PROXY=https://192.168.2.109:7890&quot;</span><br></pre></td></tr></table></figure></li></ul><ol start="4"><li><a href="#docker-%E8%87%AA%E5%90%AF">重新载入配置 &amp; 重启 docker</a></li></ol><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="docker-管理">docker 管理</h2><h3 id="VScode-docker">VScode-docker</h3><ul><li><p>在 Manjaro 虚拟机中启动 docker 服务,然后用 vscode-ssh 连接 manjaro</p></li><li><p>安装 docker 插件,就可以享受比较方便的可视化了(个人非常喜欢这种方式)</p><img src="https://www.helloimg.com/images/2022/02/27/GVt7YX.png" alt="20210206153528" /></li><li><p>另外再安装<code>Resource Monitor</code>这个插件可以监控远程机资源消耗(如上图最下方)</p></li></ul><hr><h3 id="Portainer">Portainer</h3><blockquote><p><a href="https://blog.csdn.net/tian330726/article/details/102987572">Docker 安装管理面板–Portainer</a></p></blockquote><ul><li><p>docker 的可视化工具,可连接本地和远程,支持集群,有很多部署方式,这里选择直接在 docker 部署.</p></li><li><p>首先它需要一个<code>volume(数据卷)</code>,新建</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">volume</span> <span class="keyword">create</span> portainer_data</span><br></pre></td></tr></table></figure></li><li><p>然后拉取并运行</p><ul><li>需要保证 9000 端口没被占用,不然无法运行</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name portainer --restart always -p <span class="number">9000</span>:<span class="number">9000</span> -v <span class="regexp">/var/</span>run<span class="regexp">/docker.sock:/</span>var<span class="regexp">/run/</span>docker.sock -v portainer_data:<span class="regexp">/data portainer/</span>portainer</span><br></pre></td></tr></table></figure></li><li><p>浏览器打开 <code>localhost:9000</code></p></li><li><p>官网上的版本要比 github 的 tag 慢一些,左下角提示更新可以无视~</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="常用命令">常用命令</h2><blockquote><p><a href="../../experience/shell/shell#docker">💧 一些常用终端命令.#docker</a></p></blockquote><h3 id="docker-自启">docker 自启</h3><ul><li><p>启动服务</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="literal">start</span> docker.service</span><br></pre></td></tr></table></figure></li><li><p>开机自动启动 docker 服务</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> docker.service</span><br></pre></td></tr></table></figure></li><li><p>重新载入配置</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo systemctl daemon-reload</span></span><br></pre></td></tr></table></figure></li><li><p>重启 docker</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo systemctl restart docker</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="容器自启">容器自启</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启</span></span><br><span class="line">docker update <span class="attribute">--restart</span>=always &lt;CONTAINER ID&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">docker update <span class="attribute">--restart</span>=<span class="literal">no</span> &lt;CONTAINER ID&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="命令行执行">命令行执行</h2><ul><li><p>有些文档为了观看性写成如下格式,有的终端无法直接执行,需要弄成一行.</p><ul><li><p>前</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  -p <span class="number">8088</span>:<span class="number">8088</span> \</span><br><span class="line">  --name <span class="keyword">next</span>-terminal \</span><br><span class="line">  --restart always ghcr.io<span class="regexp">/dushixiang/</span><span class="keyword">next</span>-terminal:latest</span><br></pre></td></tr></table></figure></li><li><p>后</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p <span class="number">8088</span>:<span class="number">8088</span> --name <span class="keyword">next</span>-terminal --restart always ghcr.io<span class="regexp">/dushixiang/</span><span class="keyword">next</span>-terminal:latest</span><br></pre></td></tr></table></figure></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="多数据库管理">多数据库管理</h2><ul><li><p>开发时需要好几个不同的数据库</p><ol><li><p>在 win 主机上安装配置的话,必然各种 bug,大部分时间还空浪费性能</p></li><li><p>于是考虑在虚拟机上装,但是鉴于各种系统环境还不一样,每个数据库挨个配置和解决 bug 都废手</p></li><li><p>于是让数据库进入 docker</p></li></ol></li><li><p>通过 <code>docker-compose.yml</code> 一条龙管理 (免去了每个数据库安装,开通远程连接,配置账户这些麻烦)</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.1&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="comment"># redis 无密码</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:latest</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">&quot;redis-app&quot;</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">redis-server</span> <span class="string">/usr/local/etc/redis/redis.conf</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">6379</span><span class="string">:6379</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./redis.conf:/usr/local/etc/redis/redis.conf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/data/redis:/data</span></span><br><span class="line">  <span class="comment"># mongo root-2333</span></span><br><span class="line">  <span class="attr">mongo:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mongo:latest</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">&quot;mongo-app&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MONGO_INITDB_ROOT_USERNAME:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">MONGO_INITDB_ROOT_PASSWORD:</span> <span class="number">2333</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">27017</span><span class="string">:27017</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/data/mongo:/etc/mongo</span></span><br><span class="line">  <span class="comment"># mariadb root-2333</span></span><br><span class="line">  <span class="attr">mariadb:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mariadb:latest</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">&quot;mariadb-app&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="comment"># 端口映射</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">3306</span><span class="string">:3306</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="comment"># 容器与宿主机时间同步</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/etc/localtime:/etc/localtime</span></span><br><span class="line">      <span class="comment"># 数据库目录映射</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./config/mariadb:/var/lib/mysql</span></span><br><span class="line">      <span class="comment"># （推荐）如果要使用自定义的MySQL配置，则可以在主机上的目录中创建备用配置文件，然后将该目录位置/etc/mysql/conf.d安装在mariadb容器内。自己所需的配置文件可以放在自己服务器./config/data/mariadb-config里面</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./config/mariadb-config:/etc/mysql/conf.d</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TIME_ZONE:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="number">2333</span></span><br></pre></td></tr></table></figure></li><li><p>进此配置目录执行 <code>docker-compose up</code></p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🙌UI平面设计.</title>
      <link href="/post/design/UI-design/"/>
      <url>/post/design/UI-design/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-30 18:40:45 * @LastEditors: Weidows * @LastEditTime: 2021-03-13 17:19:50 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\design\UI-design.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%A4%B4%E5%9B%BE%E8%AE%BE%E8%AE%A1">头图设计</a></li><li><a href="#%E5%91%88%E7%8E%B0%E6%96%B9%E5%BC%8F">呈现方式</a><ul><li><a href="#%E5%9B%BE%E5%AD%97">图&gt;字</a></li><li><a href="#%E9%9D%9E%E6%A0%87%E5%87%86%E4%B8%8E%E7%95%99%E7%99%BD">非标准与留白</a></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="头图设计">头图设计</h2><ul><li><p>一张好看的图片能有啥效果?</p><ul><li>[x] 吊起胃口</li><li>[x] 引人入胜</li><li>[x] 图片养眼</li><li>[x] 吟唱施法</li></ul></li><li><p>于是,找到个比较<code>中肯</code>的知乎问答:</p><blockquote><p><a href="https://www.zhihu.com/question/313933884">微信公众号推送封面如何设计制作？</a></p></blockquote></li></ul><hr><ul><li><p>从博客文章头图无从下手切入的,以往就是百度谷歌搜关键词,找一个好看的图,但是耦合性太差,想找个流水线式解决方案.</p></li><li><p>起初是因为看到 <code>@小康博客</code> 的文章头图,感觉很好看,于是去找的方案.</p><img src="https://www.helloimg.com/images/2022/02/27/GV49wA.png" alt="20210127191714" /></li></ul><hr><ul><li><p>我发现并没有太过快速的生成器(哈哈哈不能一口吃个胖子)</p><ul><li><p>但是找到了不少好模板网站.</p></li><li><p>推荐下,我这篇文章用的是<a href="https://www.canva.cn/"><code>可画</code></a> 网做出来的,我改了改字就可以使用了.</p></li></ul></li><li><p>上手时间成本几乎没有,现阶段可以说是最直接有效的解决方案了.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="呈现方式">呈现方式</h2><h3 id="图-字">图&gt;字</h3><ul><li>有些情况下,同样的内容,同样的格式性,图片效果还是会更显著</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVmbFr.png" alt="20210226172913" /><img src="https://www.helloimg.com/images/2022/02/27/GVmnUq.png" alt="20210226173119" /><hr><h3 id="非标准与留白">非标准与留白</h3><ul><li><p>比如上面的两张图,有毛边效果,用的好的话可以让人眼前一亮(我截的图比较差)</p></li><li><p>还有留白(padding),下图的留白就不是很好,略小了</p><img src="https://www.helloimg.com/images/2022/02/27/GVmiTc.png" alt="20210226173845" /></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>✨炒鸡好用的下载器-Aria2</title>
      <link href="/post/tools/Aria2/"/>
      <url>/post/tools/Aria2/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-29 12:59:50 * @LastEditors: Weidows * @LastEditTime: 2022-02-09 01:41:08 * @FilePath: \Blog-private\source\_posts\tools\Aria2.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#%E9%9C%80%E6%B1%82">需求</a></li><li><a href="#%E6%A8%AA%E5%90%91%E5%AF%B9%E6%AF%94">横向对比</a><ul><li><a href="#idm">IDM</a></li><li><a href="#motrix">Motrix</a></li><li><a href="#%E8%BF%85%E9%9B%B7">迅雷</a></li><li><a href="#ffmpeg">FFmpeg</a></li><li><a href="#aria2-ariang">Aria2-AriaNg</a></li></ul></li><li><a href="#%E9%85%8D%E7%BD%AE">配置</a><ul><li><a href="#%E9%85%8D%E7%BD%AE-aria2">配置 Aria2</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E6%B5%8F%E8%A7%88%E5%99%A8">配置浏览器</a></li></ul></li><li><a href="#%E9%97%AE%E9%A2%98-%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%B7%B2%E9%9B%86%E6%88%90%E8%A7%A3%E5%86%B3">问题-配置中已集成解决</a><ul><li><a href="#%E5%90%AF%E5%8A%A8-aria2-rpc">启动 Aria2-RPC</a></li><li><a href="#%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C">开机自启/后台运行</a></li><li><a href="#%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0-tracker">自动更新 tracker</a></li></ul></li><li><a href="#%E5%8F%82%E8%80%83">参考</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="简介-5">简介</h2><ul><li><p><code>Aria2</code>是一个命令行下载器,没有 UI 界面</p></li><li><p>支持多线程下载,各种协议导入.</p></li><li><p>通过下面知乎问答可以了解下下载协议和目前主流下载器运行方式.</p></li></ul><blockquote><p><a href="https://www.zhihu.com/question/61896660">为什么很多人都推荐 IDM 下载 说这才是下载神器 不限速的 比迅雷下载和百度网盘下载好多了？</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="需求">需求</h2><ol><li><p>个人需要一个<code>多线程</code>下载器,其实也不用强调,因为目前大多数下载器都是多线程的</p></li><li><p>可以替换掉浏览器默认下载(浏览器默认下载太反人类了)</p></li><li><p>个人比较看重的一点,我有时会需要<code>批量下载</code>B 站上的分 P 视频以防止视频下架 (<s>已弃用</s>)</p></li></ol><ul><li><p>我用的脚本只能导出如下几个下载方式</p><img src="https://www.helloimg.com/images/2022/02/27/GVSM7Q.png" alt="20210129155515" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="横向对比">横向对比</h2><h3 id="IDM">IDM</h3><ul><li>支持的协议太少了,而且不太好用,优点是它可以抓取网页中的音视频下载,但是对于我来说,下载音乐并不靠这个,下载视频(B 站和油管的),它都不支持,不过倒是支持个上面的批量下载.</li><li>总的来说是我的第二选择.</li></ul><hr><h3 id="Motrix">Motrix</h3><ul><li><p>底层就是用的 Aria2,所以说支持的协议挺多的,确实不错但是奈何我用不着…</p><p>现在<code>Aria2+AriaNg</code>已经足够满足我了.</p></li></ul><hr><h3 id="迅雷">迅雷</h3><ul><li><p>Emmm <s>跟我的需求有点不一样,排除.</s></p><p>后来用了一下,发现它下载 p2p 资源还是比 aria2 强不少的; 于是我两个都用~</p></li></ul><hr><h3 id="FFmpeg">FFmpeg</h3><ul><li>这个主业是音视频处理,比如 B 站视频源格式是 <code>flv</code>, 可以通过 FFmpeg 转为 <code>mp4</code></li></ul><hr><h3 id="Aria2-AriaNg">Aria2-AriaNg</h3><ul><li><p>这个就是主角,也就是我正在用的.</p></li><li><p>Aria2 可以通过 Scoop 安装,而且 Scoop 可以通过调用 aria2 实现加速下载.</p></li><li><p>我需要做的就是安装浏览器插件:<code>Aria2 for Chrome</code>或者<code>Aria Manager</code>之类的,让他连通作为 Aria2 的 UI 界面</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="配置-2">配置</h2><h3 id="配置-Aria2">配置 Aria2</h3><ul><li><p>用过 Scoop 的应该都知道 Aria2,一般安装 Scoop 时都会装上</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">scoop </span><span class="keyword">install </span>aria2</span><br></pre></td></tr></table></figure><hr></li><li><p>如果你有幸折腾过这家伙,那么下面应该是全网最精简/完美的配置方案了:</p><ol><li><p>新建一个 <code>随意名称.bat</code> 复制下面东西粘贴进去,每次需要启动时点一下 (或者直接弄进开机启动项)</p></li><li><p>aria2 所需要的 conf 配置,任务连接 session,启动脚本 vbs,tracker; 全都~堆进这里面了,不需要任何其他配置,想配置的话可以修改一下第二行的 <code>BACKUP_DIR</code></p></li></ol><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">@REM aria2: 直接通过shell启动会被它占用,所以另开</span></span><br><span class="line"><span class="built_in">set</span> BACKUP_DIR=</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">defined</span> BACKUP_DIR <span class="built_in">set</span> BACKUP_DIR=%~dp0Programming-Configuration</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">@REM 下载目录, 默认为 D:\Download</span></span><br><span class="line"><span class="built_in">set</span> DOWNLOAD_DIR=</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">defined</span> DOWNLOAD_DIR <span class="built_in">set</span> DOWNLOAD_DIR=D:\Download</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">@REM 调用链: utils.bat -&gt; aria2.vbs -&gt; aria2.exe -&gt; aria2.conf -&gt; aria2.session</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">@REM aria2.session</span></span><br><span class="line">touch <span class="variable">%BACKUP_DIR%</span>\others\aria2\aria2.session</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">@REM 括号内命令的标准输出会重定向到 aria2.conf</span></span><br><span class="line">(</span><br><span class="line">  <span class="built_in">echo</span> ## # 开头为注释内容, 选项都有相应的注释说明, 根据需要修改 ##</span><br><span class="line">  <span class="built_in">echo</span> ## 被注释的选项填写的是默认值, 建议在需要修改时再取消注释  ##</span><br><span class="line">  <span class="built_in">echo</span>.</span><br><span class="line">  <span class="built_in">echo</span> ## 文件保存相关 ##</span><br><span class="line">  <span class="built_in">echo</span>.</span><br><span class="line">  <span class="built_in">echo</span> # 文件的保存路径 （可使用绝对路径或相对路径）, 默认: 当前启动位置</span><br><span class="line">  <span class="built_in">echo</span> <span class="built_in">dir</span>=<span class="variable">%DOWNLOAD_DIR%</span></span><br><span class="line">  <span class="built_in">echo</span> # 启用磁盘缓存, <span class="number">0</span> 为禁用缓存, 需 <span class="number">1</span>.<span class="number">16</span> 以上版本, 默认:<span class="number">16</span>M</span><br><span class="line">  <span class="built_in">echo</span> #disk-cache=</span><br><span class="line">  <span class="built_in">echo</span> # 文件预分配方式, 能有效降低磁盘碎片, 默认:prealloc</span><br><span class="line">  <span class="built_in">echo</span> # 预分配所需时间: none 《 falloc ? trunc 《 prealloc</span><br><span class="line">  <span class="built_in">echo</span> # falloc 和 trunc 则需要文件系统和内核支持</span><br><span class="line">  <span class="built_in">echo</span> # NTFS 建议使用 falloc, EXT3/<span class="number">4</span> 建议 trunc, MAC 下需要注释此项</span><br><span class="line">  <span class="built_in">echo</span> file-allocation=none</span><br><span class="line">  <span class="built_in">echo</span> # 断点续传</span><br><span class="line">  <span class="built_in">echo</span> continue=true</span><br><span class="line">  <span class="built_in">echo</span>.</span><br><span class="line">  <span class="built_in">echo</span> ## 下载连接相关 ##</span><br><span class="line">  <span class="built_in">echo</span>.</span><br><span class="line">  <span class="built_in">echo</span> # 最大同时下载任务数, 运行时可修改, 默认:<span class="number">5</span></span><br><span class="line">  <span class="built_in">echo</span> max-concurrent-downloads=<span class="number">5</span></span><br><span class="line">  <span class="built_in">echo</span> # 同一服务器连接数, 添加时可指定, 默认:<span class="number">1</span></span><br><span class="line">  <span class="built_in">echo</span> max-connection-per-server=<span class="number">16</span></span><br><span class="line">  <span class="built_in">echo</span> # 最小文件分片大小, 添加时可指定, 取值范围 <span class="number">1</span>M -<span class="number">1024</span>M, 默认:<span class="number">20</span>M</span><br><span class="line">  <span class="built_in">echo</span> # 假定 size=<span class="number">10</span>M, 文件为 <span class="number">20</span>MiB 则使用两个来源下载; 文件为 <span class="number">15</span>MiB 则使用一个来源下载</span><br><span class="line">  <span class="built_in">echo</span> # min-split-size=<span class="number">1</span>M</span><br><span class="line">  <span class="built_in">echo</span> # 单个任务最大线程数, 添加时可指定, 默认:<span class="number">5</span></span><br><span class="line">  <span class="built_in">echo</span> # split=<span class="number">32</span></span><br><span class="line">  <span class="built_in">echo</span> # 整体下载速度限制, 运行时可修改, 默认:<span class="number">0</span></span><br><span class="line">  <span class="built_in">echo</span> #max-overall-download-limit=<span class="number">0</span></span><br><span class="line">  <span class="built_in">echo</span> # 单个任务下载速度限制, 默认:<span class="number">0</span></span><br><span class="line">  <span class="built_in">echo</span> #max-download-limit=<span class="number">0</span></span><br><span class="line">  <span class="built_in">echo</span> # 整体上传速度限制, 运行时可修改, 默认:<span class="number">0</span></span><br><span class="line">  <span class="built_in">echo</span> #max-overall-upload-limit=<span class="number">0</span></span><br><span class="line">  <span class="built_in">echo</span> # 单个任务上传速度限制, 默认:<span class="number">0</span></span><br><span class="line">  <span class="built_in">echo</span> #max-upload-limit=<span class="number">0</span></span><br><span class="line">  <span class="built_in">echo</span> # 禁用 IPv6, 默认:false</span><br><span class="line">  <span class="built_in">echo</span> # disable-ipv6=true</span><br><span class="line">  <span class="built_in">echo</span>.</span><br><span class="line">  <span class="built_in">echo</span> ## 进度保存相关 ##</span><br><span class="line">  <span class="built_in">echo</span>.</span><br><span class="line">  <span class="built_in">echo</span> # 从会话文件中读取下载任务</span><br><span class="line">  <span class="built_in">echo</span> input-file=<span class="variable">%BACKUP_DIR%</span>\others\aria2\aria2.session</span><br><span class="line">  <span class="built_in">echo</span> # 在 Aria2 退出时保存 ` 错误 / 未完成 ` 的下载任务到会话文件</span><br><span class="line">  <span class="built_in">echo</span> save-session=<span class="variable">%BACKUP_DIR%</span>\others\aria2\aria2.session</span><br><span class="line">  <span class="built_in">echo</span> # 定时保存会话, <span class="number">0</span> 为退出时才保存, 需 <span class="number">1</span>.<span class="number">16</span>.<span class="number">1</span> 以上版本, 默认:<span class="number">0</span></span><br><span class="line">  <span class="built_in">echo</span> save-session-interval=<span class="number">60</span></span><br><span class="line">  <span class="built_in">echo</span>.</span><br><span class="line">  <span class="built_in">echo</span> ## RPC 相关设置 ##</span><br><span class="line">  <span class="built_in">echo</span>.</span><br><span class="line">  <span class="built_in">echo</span> # 启用 RPC, 默认:false</span><br><span class="line">  <span class="built_in">echo</span> enable-rpc=true</span><br><span class="line">  <span class="built_in">echo</span> # 允许所有来源, 默认:false</span><br><span class="line">  <span class="built_in">echo</span> rpc-allow-origin-all=true</span><br><span class="line">  <span class="built_in">echo</span> # 允许非外部访问, 默认:false</span><br><span class="line">  <span class="built_in">echo</span> rpc-listen-all=true</span><br><span class="line">  <span class="built_in">echo</span> # 事件轮询方式, 取值:[epoll, kqueue, port, poll, select], 不同系统默认值不同</span><br><span class="line">  <span class="built_in">echo</span> #event-poll=select</span><br><span class="line">  <span class="built_in">echo</span> # RPC 监听端口, 端口被占用时可以修改, 默认:<span class="number">6800</span></span><br><span class="line">  <span class="built_in">echo</span> #rpc-listen-port=<span class="number">6800</span></span><br><span class="line">  <span class="built_in">echo</span> # 设置的 RPC 授权令牌, v1.<span class="number">18</span>.<span class="number">4</span> 新增功能, 取代 --rpc-user 和 --rpc-passwd 选项</span><br><span class="line">  <span class="built_in">echo</span> #rpc-secret=<span class="number">12345678</span></span><br><span class="line">  <span class="built_in">echo</span> # 设置的 RPC 访问用户名, 此选项新版已废弃, 建议改用 --rpc-secret 选项</span><br><span class="line">  <span class="built_in">echo</span> #rpc-user=《USER》</span><br><span class="line">  <span class="built_in">echo</span> #rpc-passwd=《PASSWD》</span><br><span class="line">  <span class="built_in">echo</span>.</span><br><span class="line">  <span class="built_in">echo</span> ## BT/PT 下载相关 ##</span><br><span class="line">  <span class="built_in">echo</span>.</span><br><span class="line">  <span class="built_in">echo</span> # 当下载的是一个种子（以.torrent 结尾） 时, 自动开始 BT 任务, 默认:true</span><br><span class="line">  <span class="built_in">echo</span> #follow-torrent=true</span><br><span class="line">  <span class="built_in">echo</span> # BT 监听端口, 当端口被屏蔽时使用, 默认:<span class="number">6881</span>-<span class="number">6999</span></span><br><span class="line">  <span class="built_in">echo</span> listen-port=<span class="number">51413</span></span><br><span class="line">  <span class="built_in">echo</span> # 单个种子最大连接数, 默认:<span class="number">55</span></span><br><span class="line">  <span class="built_in">echo</span> #bt-max-peers=<span class="number">55</span></span><br><span class="line">  <span class="built_in">echo</span> # 打开 DHT 功能, PT 需要禁用, 默认:true</span><br><span class="line">  <span class="built_in">echo</span> enable-dht=false</span><br><span class="line">  <span class="built_in">echo</span> # 打开 IPv6 DHT 功能, PT 需要禁用</span><br><span class="line">  <span class="built_in">echo</span> #enable-dht6=false</span><br><span class="line">  <span class="built_in">echo</span> # DHT 网络监听端口, 默认:<span class="number">6881</span>-<span class="number">6999</span></span><br><span class="line">  <span class="built_in">echo</span> #dht-listen-port=<span class="number">6881</span>-<span class="number">6999</span></span><br><span class="line">  <span class="built_in">echo</span> # 本地节点查找, PT 需要禁用, 默认:false</span><br><span class="line">  <span class="built_in">echo</span> #bt-enable-lpd=false</span><br><span class="line">  <span class="built_in">echo</span> # 种子交换, PT 需要禁用, 默认:true</span><br><span class="line">  <span class="built_in">echo</span> enable-peer-exchange=false</span><br><span class="line">  <span class="built_in">echo</span> # 每个种子限速, 对少种的 PT 很有用, 默认:<span class="number">50</span>K</span><br><span class="line">  <span class="built_in">echo</span> #bt-request-peer-speed-limit=<span class="number">50</span>K</span><br><span class="line">  <span class="built_in">echo</span> # 客户端伪装, PT 需要</span><br><span class="line">  <span class="built_in">echo</span> peer-id-prefix=-TR2770-</span><br><span class="line">  <span class="built_in">echo</span> user-agent=Transmission/<span class="number">2</span>.<span class="number">77</span></span><br><span class="line">  <span class="built_in">echo</span> # 当种子的分享率达到这个数时, 自动停止做种, <span class="number">0</span> 为一直做种, 默认:<span class="number">1</span>.<span class="number">0</span></span><br><span class="line">  <span class="built_in">echo</span> seed-ratio=<span class="number">0</span></span><br><span class="line">  <span class="built_in">echo</span> # 强制保存会话, 即使任务已经完成, 默认:false</span><br><span class="line">  <span class="built_in">echo</span> # 较新的版本开启后会在任务完成后依然保留.aria2 文件</span><br><span class="line">  <span class="built_in">echo</span> #force-save=false</span><br><span class="line">  <span class="built_in">echo</span> # BT 校验相关, 默认:true</span><br><span class="line">  <span class="built_in">echo</span> #bt-hash-check-seed=true</span><br><span class="line">  <span class="built_in">echo</span> # 继续之前的 BT 任务时, 无需再次校验, 默认:false</span><br><span class="line">  <span class="built_in">echo</span> bt-seed-unverified=true</span><br><span class="line">  <span class="built_in">echo</span> # 保存磁力链接元数据为种子文件（.torrent 文件）, 默认:false</span><br><span class="line">  <span class="built_in">echo</span> bt-save-metadata=true</span><br><span class="line">)&gt; <span class="variable">%BACKUP_DIR%</span>\others\aria2\aria2.conf</span><br><span class="line">  <span class="keyword">call</span> curl -s https://trackerslist.com/best_aria2.txt&gt;<span class="variable">%BACKUP_DIR%</span>\others\aria2\trackerslist.txt</span><br><span class="line">  <span class="built_in">set</span> /p trackerslist=&lt;<span class="variable">%BACKUP_DIR%</span>\others\aria2\trackerslist.txt</span><br><span class="line">  <span class="built_in">echo</span> bt-tracker=<span class="variable">%trackerslist%</span>&gt;&gt;<span class="variable">%BACKUP_DIR%</span>\others\aria2\aria2.conf</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">@REM aria2.vbs</span></span><br><span class="line"><span class="built_in">echo</span> CreateObject(&quot;WScript.Shell&quot;).Run &quot;aria2c --conf-<span class="built_in">path</span>=<span class="variable">%BACKUP_DIR%</span>\others\aria2\aria2.conf&quot;,<span class="number">0</span> &gt; <span class="variable">%BACKUP_DIR%</span>\others\aria2\aria2.vbs</span><br><span class="line">cscript //Nologo <span class="variable">%BACKUP_DIR%</span>\others\aria2\aria2.vbs</span><br></pre></td></tr></table></figure></li></ul><blockquote><p><a href="https://github.com/Weidows-projects/Keeper/blob/main/utils.bat">我的日常启动脚本</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="配置浏览器">配置浏览器</h3><ul><li><p>上面提到了,需要安装<code>Aria2 for Chrome</code>或者<code>Aria Manager</code>之类的插件</p></li><li><p>安装完之后出现插件设置界面</p><img src="https://www.helloimg.com/images/2022/02/27/GVPHQP.png" alt="20210129162937" /></li><li><p>或者在<code>AriaNg</code>管理页面,这两个页面一样</p><img src="https://www.helloimg.com/images/2022/02/27/GVtkzR.png" alt="20210129164251" /></li><li><p>必须填写的是画圈的部分,也就是上面<code>conf</code>文件第 62 行填的,我写的是<code>12345678</code></p></li><li><p>其他的配置随意,这样,浏览器就配置好了.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="问题-配置中已集成解决">问题-配置中已集成解决</h2><h3 id="启动-Aria2-RPC">启动 Aria2-RPC</h3><ul><li><p>实现原理是让<code>Aria2.exe</code>程序读取<code>conf</code>文件跑起来<code>RPC服务</code>,然后浏览器插件连接这个 RPC 实现界面化管理.</p></li><li><p>运行程序</p><ul><li>没配置环境变量的话需要指定<code>aria2.exe</code>路径,用 Scoop 安装的不用配置.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aria2c --conf-path=&quot;D:\Game\Scoop\persist\aria2\conf&quot;</span><br></pre></td></tr></table></figure></li><li><p>在命令行中服务跑起来了,显示如下</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">❯ aria2c <span class="attr">--conf-path</span>=<span class="string">&quot;D:\Game\Scoop\persist\aria2\conf&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="number">01</span>/<span class="number">29</span> <span class="number">16</span>:<span class="number">38</span>:<span class="number">59</span> <span class="selector-attr">[WARN]</span> Neither <span class="attr">--rpc-secret</span> nor <span class="selector-tag">a</span> combination of <span class="attr">--rpc-user</span> and <span class="attr">--rpc-passwd</span> is set. This is insecure. It is extremely recommended to specify <span class="attr">--rpc-secret</span> with the adequate secrecy or now deprecated <span class="attr">--rpc-user</span> and <span class="attr">--rpc-passwd</span>.</span><br><span class="line"></span><br><span class="line"><span class="number">01</span>/<span class="number">29</span> <span class="number">16</span>:<span class="number">38</span>:<span class="number">59</span> <span class="selector-attr">[NOTICE]</span> IPv4 RPC: listening on TCP port <span class="number">6800</span></span><br></pre></td></tr></table></figure><img src="https://www.helloimg.com/images/2022/02/27/GVLP3D.png" alt="20210129164430" /></li><li><p>但是有个问题,一旦这个终端关闭,aria.exe 也会跟着被关闭,这个服务就会断了(连接失败)</p><ul><li><p>通俗来说任务管理器中必须有个<code>aria.exe</code>在运行着.</p></li><li><p>解决办法如下.</p></li></ul></li></ul><hr><h3 id="开机自启-后台运行">开机自启/后台运行</h3><ul><li><p>Aria2 本身特别小,后台一直开着没影响,我们让他开机自启,在后台一直挂着.</p></li><li><p>新建一个<code>start.vbs</code>,内容如下</p><figure class="highlight vbs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CreateObject</span>(<span class="string">&quot;WScript.Shell&quot;</span>).Run <span class="string">&quot;aria2c --conf-path=D:\Game\Scoop\persist\aria2\conf&quot;</span>,<span class="number">0</span></span><br></pre></td></tr></table></figure></li><li><p>把这个 vbs 文件想个法挂到开机启动程序中,相信你能办到!</p></li><li><p><code>搞腚!</code></p></li></ul><hr><h3 id="自动更新-tracker">自动更新 tracker</h3><ul><li><p>时不时需要网上找 tracker 然后复制进 config 里</p><p>实在不够优雅,直接上 bat 脚本</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> curl -s https://trackerslist.com/best_aria2.txt&gt;<span class="variable">%BACKUP_DIR%</span>\others\aria2\trackerslist.txt</span><br><span class="line"><span class="built_in">set</span> /p trackerslist=&lt;<span class="variable">%BACKUP_DIR%</span>\others\aria2\trackerslist.txt</span><br><span class="line"><span class="built_in">echo</span> bt-tracker=<span class="variable">%trackerslist%</span>&gt;&gt;<span class="variable">%BACKUP_DIR%</span>\others\aria2\aria2.conf</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-15">借物表</h2><ul><li><p>本篇文章介绍不是很平滑,建议结合参照文章一同食用.</p><blockquote><p><a href="https://p3terx.com/archives/aria2-started-guide.html">Aria2 新手入门教程</a> <br><a href="https://www.jianshu.com/p/7c030484ac90">下载工具系列——Aria2 (几乎全能的下载神器)</a> <br><a href="https://blog.csdn.net/jeefchen/article/details/5644450?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control">几种隐藏批处理运行窗口的方法</a></p></blockquote></li></ul><blockquote><p><a href="https://github.com/XIU2/TrackersListCollection/">https://github.com/XIU2/TrackersListCollection/</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具 </tag>
            
            <tag> aria2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥱所爱之言-所感之箴</title>
      <link href="/post/life/%E6%84%9F%E8%A8%80/1/"/>
      <url>/post/life/%E6%84%9F%E8%A8%80/1/</url>
      
        <content type="html"><![CDATA[<h1>所爱之言-所感之箴</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-27 00:54:04 * @LastEditors: Weidows * @LastEditTime: 2022-05-31 00:25:18 * @FilePath: \Blog-private\source\_posts\life\感言\1.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E6%89%80%E7%88%B1%E4%B9%8B%E8%A8%80-%E6%89%80%E6%84%9F%E4%B9%8B%E7%AE%B4">所爱之言-所感之箴</a><ul><li><a href="#%E5%BF%83%E8%A6%81%E9%87%8E">心要野</a></li><li><a href="#%E8%87%AA%E7%94%B1%E6%84%8F%E5%BF%97%E7%9A%84%E4%BA%A7%E7%94%9F">自由意志的产生</a></li></ul></li></ul></blockquote><h2 id="心要野">心要野</h2><blockquote><p>原文链接: <a href="https://www.ihewro.com/archives/1117/">心要野</a></p></blockquote><ul><li><p><code>@友人c</code>写的博客文章,大半夜看得我也是心有感触.</p></li><li><p>Emmmm 静下心来写写作确实需要些<code>灵感</code> + <code>心境</code>,咱想表达啥却写不出来…</p><hr></li></ul><p>从自身谈起吧…</p><hr><p>高中时,一直…也不能说一直吧,反正<code>60%目标</code>聚焦在高考之上,至于快乐之源嘛,现在想想是<code>真的真的怀念!!!</code></p><p>罗列下吧,不为的给别人看,只是想多年后的自己仍能被这份爱打动.</p><p>那时候特喜欢看天文书,关于太阳系,银河系,黑洞啥的,还研究了一些物理知识(当然只是浅尝辄止)</p><p>最喜欢的是<code>罗杰·彭罗斯</code>的书,虽然那书比我岁数都大 2333,他是谁呢?</p><blockquote><p>彭罗斯教授是已故英国物理学家霍金的导师。</p></blockquote><p>刚刚才知道的,原来他和他的学生都这么厉害~</p><p>那时候大课间跑操,跑完操再抽出来寥寥几分钟跑去图书馆(害,这军事化管理…何必呢),还经常遇到不开门的情况(毕竟三个年级统一管理,谁都没时间去啊),一进门偌大的图书馆,人头数手指头都数得过来…</p><p>兴匆匆的拿本<code>天文或者IT</code>的书,不过那时候 IT 的书太老了,我也知道,就没咋看,后来在网上找的 VBS 入的门</p><p>没用多长,图书馆关于天文学的书差不多摸遍了,自己还整了个<code>奇葩笔记</code>,封皮自己印的<code>DUELYST</code>的海报,贼漂亮的笔记本,记了很多学习之外的东东,记得还在语文课给班上讲过一次天文 hhh,王老师面色铁青,差点把我轰下来.</p><hr><p>高中时宿舍关系是真的好,现在来看来说,人与人之间友谊的绊脚石,也许不是手机,也许是.</p><p>嘿嘿,卖了个关子.其实我感觉,<code>朋友</code>对我的定义是:</p><p><code>彼此乐意在对方身上浪费时间,还乐此不疲的人</code></p><p>就我们 335 宿舍,人人都有个性,但是晚上回到宿舍,谁都在干谁的事,啥事呢? 活在 335 氛围中.</p><p>或许这话让<code>她们</code>觉得俺是大傻 X,但是,我会绞尽脑汁の对损他们的话添油加醋.🤔</p><hr><p>手机让我们没有时间可浪费 - 这是好事还是坏事呢?</p><p>对我来说没答案,本来也不是个命题.</p><p>我只是希望多个能放下手机聊得来的人,说来,这里手机其实指的是一种偏见和隔阂.</p><p>我和我爸从小就合不来,我到不是因为啥小心眼记恨他,只是跟他真的没法说话,聊出不了第三句话我就跟吃了屎一样 ex,反而,我跟我爸的弟弟,我伯伯(读作 bai bai),脾气特合得来</p><hr><p>写到这里,大师,我悟了!</p><p>原来我追求的是<code>氛围</code>.</p><p>朋友或对象之间都是在塑造氛围,昨儿我去大姨家吃饭,还没去就一肚子气不想去,寻思给个面子去呗,匆忙间只带了耳机,手机却快没电了…(危)</p><p>到那里,哎呦我去~! 迎面而来的一大股<code>不融洽感</code>淦我脸上,戴上耳机装睡,还轮番到我面前说这说那,隔壁屋喝酒的那几位老古董也是各种议论这臧否那,不堪入耳…</p><p>可能是我任性,我只想在<code>所谓的亲戚</code>面前<code>隐形</code></p><p>我跟我姐最亲了,世界第一喜欢!我爸妈待我不说是虐待吧,反正是让人贼烦,怎么说呢,他俩作为父母不合格,特自我.</p><p>我从小任何事都没想依靠他俩,包括衣食住行都像是借他们的钱,要是有工资,他俩安排我干的活应该能支付起我自己的抚养费 🤣</p><p>最烦扯啥淡的养育之恩,我从小让我姐带大,吃我奶奶的饭,这两位才都是我最亲的人</p><p>害,过激了,过去吧.往事随风而去?哈哈哈那太理想化了,只不过这黑锅底被岁月掏了罢了.</p><hr><p>大学里面,社交确实萎缩了,诶,还是说猥琐了?!</p><p>人人都在忙自己的,想在 335 时,放个屁还能听个响呢,可事到如今,我连屁都不想放了呢,嘤嘤嘤.</p><hr><p>好像有些消极了,转折!</p><p>最近才发现,<code>我</code></p><p>没错,最近我才认识了自我,用了二十来年.</p><p><code>我</code>追求的不是父母期望的高大上の样子,也不是高中时我眼中<code>高材生</code>の样子,也不是同学同事眼中<code>大佬</code>の样子(虽然确实不是吧…)</p><p><code>我</code>也不追名逐利,我才发现我追求的是<code>幸福感/满足感.</code></p><p>这是很难察觉的,以往的教育中只交给我们怎么竞争,怎么打倒强大的敌人,可,你达到那个高度后会发现<code>你存在的本身</code>就是<code>你想打败的敌人</code>.</p><p><code>我不想成为那种人!</code></p><hr><p>开始追求自我.</p><p>回到家后我每天晚上坚持锻炼一小时,到现在快一个月了,一天没断.</p><p>退缩过,而且也没抱着认真的态度.</p><p>如今,我发现健身真的能改变一个人,无论是从外在或者内在.</p><p>这是跟自己灵魂的较量,你会发现很有愉悦感,这是其他任何游戏无法获取的,而且锻炼时会有很多想法,毕竟大脑会自己瞎想,会整理和悟出很多东西</p><blockquote><p>在这里插个小曲吧,如果你现在有任何迟疑,不自信,焦虑,压力等等,不用考虑任何因素,去趟体育馆或者健身馆! 嫌麻烦也可以直接在家里,拿个被子,冲着它拳击!</p></blockquote><p>这是个不亲自体验就不知道有多大作用的行为.</p><p>如果上述症状没减轻,那就坚持下去,直到你感觉你一拳能打碎大石头为止!</p><p>对我而言,我感觉拳击能很大程度上增强自信,这并不是盲目,这种自信对宽慰消极心理很有效果,而且这个运动并不很消耗精力.</p><hr><p>之前的我一直在盲目<code>追求技术</code>,现在我发现与我自己背道而驰了,就算成为世界第一技术员,也换不来<code>爷开颜</code>.</p><p><code>做好现在就好,做好自己就好~</code></p><p>沉浸在过去或者渴望美好未来都是极其<code>傻傻の行为</code>.</p><p>因为,你,我,现在都在活着.</p><hr><ul><li><p>没想用这篇文章输出什么知识,只是,希望这个文章成为你我之间 - 小小的蝴蝶结.</p><img src="https://www.helloimg.com/images/2022/02/27/GVFOGC.png" alt="20210127030515" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="自由意志的产生">自由意志的产生</h2><blockquote><p>群友问的 <br><img src="https://www.helloimg.com/images/2022/05/31/Zeg0nz.jpg" alt=""></p></blockquote><p>自由意志应该能理解为信息熵，人类大脑足够支撑起所谓的自由意志熵，猪脑按硬件性能来说也行，但它的大脑算法在这方面并没有人脑强</p><p>可以看看元胞自动机，人类大脑的规模和设计应该是在心理方面最强的，很多大型生物规模比人大，但设计不足，猴脑比人小但是瞬时记忆吊打人类，海豚一些判断能力也比人强</p><p>从元胞自动机角度看，自由意志类似新大陆，人类大脑的自动机恰好能发射并激活到那片区域，其他生物还没抵达，或者抵达了但规模只能达到情绪级别，没到意志</p><p>把情绪看做一个人的话，多人组成的文明就是意志</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> 感言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 哲学 </tag>
            
            <tag> 生活 </tag>
            
            <tag> 神经学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😎上手Emmet.</title>
      <link href="/post/tools/vscode/Emmet/"/>
      <url>/post/tools/vscode/Emmet/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-27 00:10:59 * @LastEditors: Weidows * @LastEditTime: 2021-03-21 17:09:14 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\tools\vscode\Emmet.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#%E7%AE%80%E5%8D%95%E4%B8%8A%E6%89%8B">简单上手</a></li><li><a href="#%E8%AF%A6%E7%BB%86">详细</a></li></ul><h2 id="简介-13">简介</h2><blockquote><p>Emmet 的前身就是 Zen Coding。 它是一组专门用来提高编写 HTML 和 CSS 代码速度的便利工具。将它整合进文本编辑器，可以提供一些功能和快捷方式，加快开发速度。</p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="简单上手-2">简单上手</h2><ul><li>如图<br><img src="https://www.helloimg.com/images/2022/02/27/GVSQHM.png" alt="20210127001432" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="详细">详细</h2><blockquote><p><a href="https://blog.csdn.net/qq_33744228/article/details/80910377">【Emmet】HTML 速写之 Emmet 语法规则</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
          <category> vscode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
            <tag> 工具 </tag>
            
            <tag> emmet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>👌JavaScript学习笔记-(肆)</title>
      <link href="/post/Web/JavaScript/study-4/"/>
      <url>/post/Web/JavaScript/study-4/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-26 21:19:27 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:23:10 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Web\JavaScript\study-4.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%BC%80%E5%A4%B4">开头</a></li><li><a href="#jquery">JQuery</a><ul><li><a href="#%E4%BD%BF%E7%94%A8">使用</a></li><li><a href="#%E9%80%89%E6%8B%A9%E5%99%A8">选择器</a></li><li><a href="#%E4%BA%8B%E4%BB%B6">事件</a></li><li><a href="#%E6%93%8D%E4%BD%9C-dom">操作 DOM</a></li><li><a href="#ajax">Ajax</a></li></ul></li><li><a href="#%E5%B7%A9%E5%9B%BA">巩固</a></li></ul><h2 id="开头">开头</h2><ul><li>写在一开始.</li><li>批判思维开场 - <code>JQuery</code> 过时了吗?</li><li>于是找了篇文章看看…</li></ul><blockquote><p><a href="https://blog.csdn.net/wojiushiwo945you/article/details/90719714">2019 年了 ，jQuery 过时了吗？</a></p></blockquote><ul><li>多看文章就是好,hh,这次又收获了个<code>美美哒分割线</code>,如下</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="JQuery">JQuery</h2><blockquote><p><a href="https://jquery.cuishifeng.cn/">JQuery API 中文文档</a></p></blockquote><h3 id="使用-2">使用</h3><ul><li>JQuery 是个 JavaScript 函数库,使用方法:<ul><li><code>$(selector).action()</code></li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../lib/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">id</span>=<span class="string">&quot;test-jquery&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//选择器就是css选择器</span></span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;#test-jquery&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;hello,jQuery!&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="选择器">选择器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原生js，选择器少，麻烦不好记</span></span><br><span class="line"><span class="comment">//标签</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementByTagName</span>();</span><br><span class="line"><span class="comment">//id</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>();</span><br><span class="line"><span class="comment">//class</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementByClassName</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//jQuery css中的选择器它全部都能用！</span></span><br><span class="line"><span class="comment">//标签选择器</span></span><br><span class="line">$(<span class="string">&quot;p&quot;</span>).<span class="title function_">click</span>();</span><br><span class="line"><span class="comment">//id选择器</span></span><br><span class="line">$(<span class="string">&quot;#id1&quot;</span>).<span class="title function_">click</span>();</span><br><span class="line"><span class="comment">//class选择器</span></span><br><span class="line">$(<span class="string">&quot;.class1&quot;</span>).<span class="property">click</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="事件">事件</h3><ul><li><p>鼠标事件</p><img src="https://www.helloimg.com/images/2022/02/27/GV4FsK.png" alt="20210126224938" /></li><li><p>案例</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../lib/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#divMove</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--要求：获取鼠标当前的一个坐标--&gt;</span></span><br><span class="line">    Mouse <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;mouseMove&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;divMove&quot;</span>&gt;</span>在这里移动鼠标试试<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       * ! 当网页元素加载完毕之后，响应事件</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       * 原型: $(document).ready(function()&#123;&#125;);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       * 简化后的: $(function ()&#123;&#125;);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       */</span></span></span><br><span class="line"><span class="language-javascript">      $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#divMove&quot;</span>).<span class="title function_">mousemove</span>(<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          $(<span class="string">&quot;#mouseMove&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;X: &quot;</span> + e.<span class="property">pageX</span> + <span class="string">&quot;Y: &quot;</span> + e.<span class="property">pageY</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>展示</p><img src="https://www.helloimg.com/images/2022/02/27/GViWIh.png" alt="20210127000346" /></li></ul><hr><h3 id="操作-DOM">操作 DOM</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../lib/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;test-ul&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;js&quot;</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">name</span>=<span class="string">&quot;python&quot;</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 操作DOM文本</span></span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;#test-ul li[class=js]&quot;</span>).<span class="title function_">text</span>(); <span class="comment">//获得值</span></span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;#test-ul li[class=js]&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;设置值&quot;</span>); <span class="comment">//设置值</span></span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;#test-ul&quot;</span>).<span class="title function_">html</span>(); <span class="comment">//获得值</span></span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;#test-ul li[name=python&quot;</span>).<span class="title function_">html</span>(<span class="string">&quot;&lt;strong&gt;123&lt;/strong&gt;&quot;</span>); <span class="comment">//设置值</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 操作css</span></span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;#test-ul li&quot;</span>).<span class="title function_">css</span>(&#123; <span class="attr">color</span>: <span class="string">&quot;red&quot;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 控制元素显示,本质display:none</span></span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;#test-ul li[name=python]&quot;</span>).<span class="title function_">hide</span>();</span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;#test-ul li[name=python]&quot;</span>).<span class="title function_">show</span>();</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="Ajax">Ajax</h3><p>后面有后端对接时再讲.</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="巩固">巩固</h2><ol><li><p>找一些美化比较好的网站,扒下来 HTML</p></li><li><p><code>源码之家</code> 找一些小游戏,瞅瞅源码.</p></li></ol><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> javascript </tag>
            
            <tag> jquery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>💔JavaScript学习笔记-(叁)</title>
      <link href="/post/Web/JavaScript/study-3/"/>
      <url>/post/Web/JavaScript/study-3/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-20 01:47:21 * @LastEditors: Weidows * @LastEditTime: 2021-03-01 22:55:35 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Web\JavaScript\study-3.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%AF%B9%E8%B1%A1">对象</a><ul><li><a href="#date">Date</a></li><li><a href="#json">Json</a></li><li><a href="#ajax">AJAX</a></li></ul></li><li><a href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1">面向对象</a><ul><li><a href="#%E5%8E%9F%E5%9E%8B">原型</a></li><li><a href="#%E7%B1%BB%E5%92%8C%E7%BB%A7%E6%89%BF">类和继承</a></li></ul></li><li><a href="#bom-%E5%AF%B9%E8%B1%A1">BOM 对象</a><ul><li><a href="#window">window</a></li><li><a href="#navigator"><s>Navigator</s></a></li><li><a href="#screen">screen</a></li><li><a href="#location"><code>location</code></a></li><li><a href="#document">document</a></li></ul></li><li><a href="#dom-%E5%AF%B9%E8%B1%A1">DOM 对象‼</a><ul><li><a href="#%E8%8E%B7%E5%BE%97%E8%8A%82%E7%82%B9">获得节点</a></li><li><a href="#%E6%9B%B4%E6%96%B0%E8%8A%82%E7%82%B9">更新节点</a></li><li><a href="#%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9">删除节点</a></li><li><a href="#%E6%8F%92%E5%85%A5%E8%8A%82%E7%82%B9">插入节点</a></li><li><a href="#%E6%8E%92%E5%88%97%E8%8A%82%E7%82%B9">排列节点</a></li></ul></li><li><a href="#%E6%93%8D%E4%BD%9C%E8%A1%A8%E5%8D%95">操作表单</a><ul><li><a href="#%E8%8E%B7%E5%BE%97%E8%A1%A8%E5%8D%95%E4%BF%A1%E6%81%AF">获得表单信息</a></li><li><a href="#%E6%8F%90%E4%BA%A4%E8%A1%A8%E5%8D%95">提交表单</a></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="对象-3">对象</h2><ul><li>几种标准对象</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="number">123</span>); <span class="comment">// number</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="string">&quot;123&quot;</span>); <span class="comment">// string</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">true</span>); <span class="comment">// boolean</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="title class_">NaN</span>); <span class="comment">// number</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> []); <span class="comment">// object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> &#123;&#125;); <span class="comment">// object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="title class_">Math</span>.<span class="property">max</span>); <span class="comment">// function</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">undefined</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><hr><h3 id="Date">Date</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> time = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(time); <span class="comment">//  Wed Jan 20 2021 21:21:32 GMT+0800 (中国标准时间)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(time.<span class="title function_">getFullYear</span>()); <span class="comment">// 2021</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(time.<span class="title function_">getMonth</span>()); <span class="comment">// 0  (注意这个月份是0~11,不是1~12)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(time.<span class="title function_">getDate</span>()); <span class="comment">// 20</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(time.<span class="title function_">getHours</span>()); <span class="comment">// 21</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(time.<span class="title function_">getMinutes</span>()); <span class="comment">// 19</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(time.<span class="title function_">getSeconds</span>()); <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1611148746727</span></span><br><span class="line"><span class="comment"> * 返回的是自1970年开始计时,到现在为止的毫秒数</span></span><br><span class="line"><span class="comment"> * 这就产生了2038问题,因为到那时候这个计数单位就溢出了,成为无效的负数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(time.<span class="title function_">getTime</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//记录时间,通过时间戳转换.</span></span><br><span class="line"><span class="keyword">var</span> log_time = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">1611148746727</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(log_time); <span class="comment">//  Wed Jan 20 2021 21:19:06 GMT+0800 (中国标准时间)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 转换格式</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(log_time.<span class="title function_">toLocaleString</span>()); <span class="comment">//  2021/1/20下午9:19:06</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(log_time.<span class="title function_">toUTCString</span>()); <span class="comment">//  Wed, 20 Jan 2021 13:19:06 GMT</span></span><br></pre></td></tr></table></figure><hr><h3 id="Json">Json</h3><ul><li><p>目前网络数据传输最主要格式.</p><img src="https://www.helloimg.com/images/2022/02/27/GV4Gir.png" alt="20210120222429" /></li><li><p>Json 的使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Weidows</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Weidows&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">  <span class="attr">gender</span>: <span class="string">&quot;男&quot;</span>,</span><br><span class="line">  <span class="attr">work</span>: <span class="string">&quot;student&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 转换为Json格式</span></span><br><span class="line"><span class="comment"> *  &#123;&quot;name&quot;:&quot;Weidows&quot;,&quot;age&quot;:21,&quot;gender&quot;:&quot;男&quot;,&quot;work&quot;:&quot;student&quot;&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">JsonWeidows</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title class_">Weidows</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JsonWeidows</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解析Json</span></span><br><span class="line"><span class="comment"> *  &#123; name: &#x27;Weidows&#x27;, age: 21, gender: &#x27;男&#x27;, work: &#x27;student&#x27; &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Weidows</span>_2 = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JsonWeidows</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Weidows</span>_2);</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="AJAX">AJAX</h3><ul><li><p>三种请求方法:</p><ul><li><p>原生的 js 写法 xhr 异步请求</p></li><li><p>jQuery 封装好的方法$(#name).ajax(“”)</p></li><li><p>axios 请求</p></li></ul></li><li><p>挂起,后期学.</p></li></ul><hr><h2 id="面向对象">面向对象</h2><ul><li>与 Java 中<code>类-对象</code>有些不同.</li></ul><h3 id="原型">原型</h3><ul><li><p>通过原型创建对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> people = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;people&quot;</span>,</span><br><span class="line">    <span class="attr">run</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;Running...&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  bird = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;bird&quot;</span>,</span><br><span class="line">    <span class="attr">fly</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;Flying...&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  xiaoming = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小明&quot;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">xiaoming.<span class="property">__proto__</span> = people;</span><br><span class="line">xiaoming.<span class="title function_">run</span>(); <span class="comment">//  小明Running...</span></span><br><span class="line">xiaoming.<span class="property">__proto__</span> = bird;</span><br><span class="line">xiaoming.<span class="title function_">fly</span>(); <span class="comment">//  小明Flying...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 给原型新增方法</span></span><br><span class="line">xiaoming.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hello</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello.&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>太恶心了,所以 ES6 引入 <code>class</code>,参下.</p></li></ul><hr><h3 id="类和继承">类和继承</h3><ul><li>跟 Java 几乎一模一样了!</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">hello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">XiaoStudent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Student</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name, grade</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">grade</span> = grade;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getGrade</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">grade</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;xiaoming&quot;</span>),</span><br><span class="line">  xiaohong = <span class="keyword">new</span> <span class="title class_">XiaoStudent</span>(<span class="string">&quot;xiaohong&quot;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(xiaoming); <span class="comment">//  Student &#123; name: &#x27;xiaoming&#x27; &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(xiaohong); <span class="comment">//  XiaoStudent &#123; name: &#x27;xiaohong&#x27;, grade: 1 &#125;</span></span><br></pre></td></tr></table></figure><ul><li><p>原理上还是利用原型</p><ul><li>原型链结构</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVAHEb.png" alt="20210120233527" /></li></ul><hr><h2 id="BOM-对象">BOM 对象</h2><ul><li><code>browser object model</code></li></ul><h3 id="window">window</h3><ul><li><p>这个对象代表浏览器窗口</p><img src="https://www.helloimg.com/images/2022/02/27/GVPiRg.png" alt="20210120234923" /></li></ul><hr><h3 id="Navigator"><s>Navigator</s></h3><ul><li><p>Navigator 封装了浏览器的信息</p></li><li><p>可用来判断平台和浏览器信息,但是不建议使用,这个信息<u>可被修改/伪造.</u></p></li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVi7lD.png" alt="20210120235844" /><hr><h3 id="screen">screen</h3><ul><li>屏幕信息</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">screen.<span class="property">width</span>; <span class="comment">// 1920</span></span><br><span class="line">screen.<span class="property">height</span>; <span class="comment">// 1080</span></span><br></pre></td></tr></table></figure><hr><h3 id="location"><code>location</code></h3><ul><li>location 代表当前页面的 URL 信息</li><li>重要,常用!</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVPI3K.png" alt="20210121000604" /><hr><h3 id="document">document</h3><ul><li><p>document 代表当前的页面，HTML DOM 文档树</p></li><li><p>获取/更改标题</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">title</span>; <span class="comment">// &quot;【狂神说Java】JavaScript学习笔记_pan_h1995的博客-CSDN博客&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&quot;Weidows&quot;</span>; <span class="comment">// &quot;Weidows&quot;</span></span><br></pre></td></tr></table></figure><hr></li><li><p>获取具体的文档树节点</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br></pre></td></tr></table></figure><hr></li><li><p>获取 cookie</p><img src="https://www.helloimg.com/images/2022/02/27/GVSGnP.png" alt="20210121101945" /><ul><li>劫持 cookie<ul><li>通过获取 cookie 就可以在另一台机器上在不输密码的情况下登录</li><li>比如<code>Bilibili-helper</code>,获取一些 cookie 就可以伪造登录(确认安全情况下妥善利用)</li></ul></li></ul><hr></li><li><p>history</p><ul><li>前进 history.forward()</li><li>后退 history.back()</li></ul></li></ul><hr><h2 id="DOM-对象‼">DOM 对象‼</h2><ul><li><p><code>document object model</code> 浏览器网页就是一个 Dom 树形结构！</p></li><li><p>常用操作</p><ul><li>遍历 Dom 节点：得到 Dom 节点</li><li>更新：更新 Dom 节点</li><li>删除：删除一个 Dom 节点</li><li>添加：添加一个新的节点</li></ul><hr></li></ul><h3 id="获得节点">获得节点</h3><ul><li>要操作一个 Dom 节点，必须要先获得这个 Dom 节点.</li><li>之后尽量都使用 jQuery()</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> h1 = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;h1&quot;</span>),</span><br><span class="line">  class_1 = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;class-1&quot;</span>),</span><br><span class="line">  app = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> children = app.<span class="property">children</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="更新节点">更新节点</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span> <span class="attr">id</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> body = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;body&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 会覆盖掉所有文档树,比如上面的div被覆写</span></span></span><br><span class="line"><span class="language-javascript">      body.<span class="property">innerHTML</span> = <span class="string">&quot;&lt;em&gt;这里是body标签.&lt;/em&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 修改css样式</span></span></span><br><span class="line"><span class="language-javascript">      body.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;red&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      body.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="string">&quot;20px&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="删除节点">删除节点</h3><ul><li>需要先获取父节点,在通过父节点删除目标子节点.</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 删除这个 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;here&quot;</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> self = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;here&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> father = self.<span class="property">parentElement</span>;</span></span><br><span class="line"><span class="language-javascript">      father.<span class="title function_">removeChild</span>(self);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 动态删除,删除后子节点index会自动改变.</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(father.<span class="property">children</span>[<span class="number">0</span>]); <span class="comment">// &lt;div&gt;1&lt;/div&gt;</span></span></span><br><span class="line"><span class="language-javascript">      father.<span class="title function_">removeChild</span>(father.<span class="property">children</span>[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(father.<span class="property">children</span>[<span class="number">0</span>]); <span class="comment">// &lt;div&gt;2&lt;/div&gt;</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="插入节点">插入节点</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span> <span class="attr">id</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// var body = document.getElementById(&quot;body&quot;);</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// ByTagName返回的是数组,这句等同于上面</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> body = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;body&quot;</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//创建一个新的节点</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> newP = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;p&quot;</span>); <span class="comment">//创建一个p标签</span></span></span><br><span class="line"><span class="language-javascript">      newP.<span class="property">id</span> = <span class="string">&quot;newP&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      newP.<span class="property">innerText</span> = <span class="string">&quot;Hello World&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      body.<span class="title function_">appendChild</span>(newP);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//创建一个script标签</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> myScript = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      myScript.<span class="title function_">setAttribute</span>(<span class="string">&quot;type&quot;</span>, <span class="string">&quot;text/javascript&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//创建一个style标签</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> myStyle = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;style&quot;</span>); <span class="comment">//创建了一个空style标签</span></span></span><br><span class="line"><span class="language-javascript">      myStyle.<span class="title function_">setAttribute</span>(<span class="string">&quot;type&quot;</span>, <span class="string">&quot;text/css&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      myStyle.<span class="property">innerHTML</span> = <span class="string">&quot;body&#123;background-color:chartreuse;&#125;&quot;</span>; <span class="comment">//设置标签内容</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//多种方法注入</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// body.appendChild(myStyle);</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// body.style.backgroundColor = &quot;chartreuse&quot;;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// document.getElementByTagName(&quot;body&quot;)[0].appendChild(myStyle);</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(myStyle);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="排列节点">排列节点</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span> <span class="attr">id</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div-1&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div-2&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> div1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div-1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> div2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div-2&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">insertBefore</span>(div2, div1);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 这样就把div2插到div1前面了.</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>除此之外还有.replace 等等,不再赘述,用时看文档就行.</li></ul><hr><h2 id="操作表单">操作表单</h2><ul><li>表单主要用来提交信息<ul><li>文本框----text</li><li>下拉框----select</li><li>单选框----radio</li><li>多选框----checkbox</li><li>隐藏域----hidden</li><li>密码框----password</li></ul></li></ul><hr><h3 id="获得表单信息">获得表单信息</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>用户名：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--多选框的值就是定义好的value--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>性别：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;man&quot;</span> <span class="attr">id</span>=<span class="string">&quot;boy&quot;</span> /&gt;</span>男</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;woman&quot;</span> <span class="attr">id</span>=<span class="string">&quot;girl&quot;</span> /&gt;</span>女</span><br><span class="line">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> input_text = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> boy_radio = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;boy&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> girl_radio = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;girl&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//获取输入框的值</span></span></span><br><span class="line"><span class="language-javascript">      input_text.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//修改输入框的值</span></span></span><br><span class="line"><span class="language-javascript">      input_text.<span class="property">value</span> = <span class="string">&quot;Weidows&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//对于单选框，多选框等等固定的值，boy_radio.value只能取到当前的值man/woman</span></span></span><br><span class="line"><span class="language-javascript">      boy_radio.<span class="property">checked</span>; <span class="comment">//查看返回的结果，是否为true，如果为true，则被选中。</span></span></span><br><span class="line"><span class="language-javascript">      girl_radio.<span class="property">checked</span> = <span class="literal">true</span>; <span class="comment">//赋值</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>效果</p><img src="https://www.helloimg.com/images/2022/02/27/GVLJmE.png" alt="20210124093813" /></li></ul><hr><h3 id="提交表单">提交表单</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--MD5加密工具类--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      表单绑定提交事件</span></span><br><span class="line"><span class="comment">      οnsubmit= 绑定一个提交检测的函数:true，false</span></span><br><span class="line"><span class="comment">      将这个结果返回给表单，使用onsubmit接收</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">onsubmit</span>=<span class="string">&quot;return aaa()&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        表单提交抓取的是带有name属性的input标签的value,不带的不会抓</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>用户名：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>密码：<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">id</span>=<span class="string">&quot;md5-password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        &lt;button type=&quot;submit&quot;&gt;提交&lt;/button&gt; 与下面等效</span></span><br><span class="line"><span class="comment">        绑定事件 onclick 被点击</span></span><br><span class="line"><span class="comment">        &lt;input type=&quot;submit&quot; onclick=&quot;aaa()&quot; /&gt;</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">aaa</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> username = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> pwd = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;password&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> md5pwd = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;md5-password&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         * 这里可以校验判断或处理表单内容，true就是通过提交，false就是阻止提交</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         * 上面username是用required来判空</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         * password是用下面的if判空</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         */</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (pwd.<span class="property">value</span> === <span class="string">&quot;&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">alert</span>(<span class="string">&quot;请填写全.&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          md5pwd.<span class="property">value</span> = <span class="title function_">md5</span>(pwd.<span class="property">value</span>); <span class="comment">// 加密</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>效果</p><img src="https://www.helloimg.com/images/2022/02/27/GVS5Kg.png" alt="20210126211616" /><img src="https://www.helloimg.com/images/2022/02/27/GVSNPg.png" alt="20210126211801" /></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🙌Windows平台软件包管理器选择-Scoop</title>
      <link href="/post/tools/Scoop/"/>
      <url>/post/tools/Scoop/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-14 23:09:52 * @LastEditors: Weidows * @LastEditTime: 2022-01-14 16:50:24 * @FilePath: \Blog-private\source\_posts\tools\Scoop.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%BC%95%E5%85%A5%E5%8F%98%E9%87%8F">引入变量</a></li><li><a href="#%E5%90%84%E4%B8%AA%E4%BC%98%E7%BC%BA%E7%82%B9">各个优缺点</a></li><li><a href="#%E5%AE%89%E8%A3%85">安装</a><ul><li><a href="#scoop">Scoop</a></li><li><a href="#chocolatey">Chocolatey</a></li></ul></li><li><a href="#%E5%8A%9F%E8%83%BD%E6%8F%90%E5%8D%87">功能提升</a><ul><li><a href="#scoop-completion">scoop-completion</a></li><li><a href="#%E5%8A%A0%E9%80%9F%E4%B8%8B%E8%BD%BD">加速下载</a></li></ul></li><li><a href="#scoop-%E7%BB%9D%E6%B4%BB">Scoop 绝活</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">配置文件</a><ul><li><a href="#scoop-1">Scoop</a></li><li><a href="#chocolatey-1">Chocolatey</a></li></ul></li><li><a href="#%E5%A5%BD%E6%96%87%E4%BC%A0%E9%80%81">好文传送</a></li><li><a href="#%E6%8A%A5%E9%94%99%E5%BC%82%E5%B8%B8">报错异常</a><ul><li><a href="#%E7%BD%91%E7%BB%9C%E5%8E%9F%E5%9B%A0">网络原因</a></li><li><a href="#%E7%8E%AF%E5%A2%83%E5%8E%9F%E5%9B%A0">环境原因</a></li><li><a href="#%E5%86%85%E6%A0%B8%E6%9B%B4%E6%8D%A2%E6%8A%A5%E9%94%99">内核更换报错</a></li><li><a href="#scoop-search">scoop-search</a></li></ul></li><li><a href="#%E6%9B%B4%E6%96%B0%E5%A4%87%E4%BB%BD%E6%8E%A8%E8%8D%90">更新&amp;备份&amp;推荐</a></li></ul><h2 id="引入变量">引入变量</h2><ul><li><p>软件包管理器: 就像是 360 软件管家,腾讯软件管家之类的</p></li><li><p>此文章要介绍的是<code>Scoop</code>- 横向简单对比<code>Chocolatey</code>和<code>WinGet</code></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="各个优缺点">各个优缺点</h2><ul><li><p>Scoop</p><ul><li>软件少</li><li>安装它需要<code>科学上网</code></li><li>官方只收留非 GUI 软件(不带图形界面的),但是有第三方拓展库</li><li>安装/卸载干净,可指定性,可拓展第三方软件仓库</li><li>不污染环境变量,软件目录清晰</li><li><em>面向程序员</em>.</li></ul></li><li><p>Chocolatey</p><ul><li>软件多</li><li>有的软件安装位置不定</li><li>面向大众.</li></ul><blockquote><p><a href="https://www.cnbeta.com/articles/tech/874537.htm?utm_source=tuicool&amp;utm_medium=referral">软件包管理工具选 Scoop 还是 Chocolatey？看完这篇就知道了</a></p></blockquote></li><li><p>WinGet</p><ul><li>preview 中(2021 年初为止)</li><li><code>只能安装不能卸载</code></li><li>只能装.exe,.msi 等,差不多就是个下载+安装的工具</li><li>还非常青涩,<strong>不推荐!</strong></li></ul><blockquote><p><a href="https://sspai.com/post/60592">WinGet 介绍</a></p></blockquote></li><li><p>个人选择了 <code>Scoop</code>,下面主要讲 Scoop.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="安装-2">安装</h2><h3 id="Scoop-2">Scoop</h3><ul><li><p>安装前先设置下 Scoop 的<code>安装路径</code></p></li><li><p>下面操作需要在 pwsh 中进行,没有的话可以手动操作.</p></li><li><p>如下,在 user 栏新建<code>SCOOP</code>,值为<code>D:\Game\Scoop</code></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$env:SCOOP</span>=<span class="string">&#x27;D:\Game\Scoop&#x27;</span></span><br><span class="line">[<span class="type">Environment</span>]::SetEnvironmentVariable(<span class="string">&#x27;SCOOP&#x27;</span>, <span class="variable">$env:SCOOP</span>, <span class="string">&#x27;User&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>另外,如果想添加到系统环境变量栏,只需把<code>User</code>修改为<code>Machine</code></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Environment</span>]::SetEnvironmentVariable(<span class="string">&#x27;SCOOP&#x27;</span>, <span class="variable">$env:SCOOP</span>, <span class="string">&#x27;Machine&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>配置好了如下</p><img src="https://www.helloimg.com/images/2022/02/27/GVSttT.png" alt="20210115232840" /></li><li><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iwr -useb get.scoop.sh | iex</span><br></pre></td></tr></table></figure></li><li><p>测试</p><ul><li><p>终端输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop</span><br></pre></td></tr></table></figure></li><li><p>输出</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">❯ scoop</span><br><span class="line">Usage: scoop &lt;command&gt; [&lt;<span class="keyword">args</span>&gt;]</span><br><span class="line"></span><br><span class="line">Some useful commands are:</span><br><span class="line"></span><br><span class="line">alias       Manage scoop aliases</span><br><span class="line">bucket      Manage Scoop buckets</span><br><span class="line">cache       Show or <span class="keyword">clear</span> the download cache</span><br><span class="line">checkup     Check <span class="keyword">for</span> potential problems</span><br><span class="line">cleanup     Cleanup apps <span class="keyword">by</span> removing old versions</span><br><span class="line">config      Get or <span class="keyword">set</span> configuration values</span><br><span class="line">create      Create a custom <span class="keyword">app</span> manifest</span><br><span class="line">depends     <span class="keyword">List</span> dependencies <span class="keyword">for</span> <span class="keyword">an</span> <span class="keyword">app</span></span><br><span class="line">export      Exports (<span class="keyword">an</span> importable) <span class="keyword">list</span> of installed apps</span><br><span class="line"><span class="keyword">help</span>        Show <span class="keyword">help</span> <span class="keyword">for</span> a command</span><br><span class="line">hold        Hold <span class="keyword">an</span> <span class="keyword">app</span> to disable updates</span><br><span class="line">home        Opens the <span class="keyword">app</span> homepage</span><br><span class="line">info        <span class="keyword">Display</span> information <span class="keyword">about</span> <span class="keyword">an</span> <span class="keyword">app</span></span><br><span class="line">install     Install apps</span><br><span class="line"><span class="keyword">list</span>        <span class="keyword">List</span> installed apps</span><br><span class="line">prefix      Returns the path to the specified <span class="keyword">app</span></span><br><span class="line">reset       Reset <span class="keyword">an</span> <span class="keyword">app</span> to resolve conflicts</span><br><span class="line"><span class="keyword">search</span>      <span class="keyword">Search</span> available apps</span><br><span class="line">status      Show status and check <span class="keyword">for</span> new <span class="keyword">app</span> versions</span><br><span class="line">unhold      Unhold <span class="keyword">an</span> <span class="keyword">app</span> to enable updates</span><br><span class="line">uninstall   Uninstall <span class="keyword">an</span> <span class="keyword">app</span></span><br><span class="line"><span class="keyword">update</span>      <span class="keyword">Update</span> apps, or Scoop itself</span><br><span class="line">virustotal  Look <span class="keyword">for</span> <span class="keyword">app</span>&#x27;s hash <span class="keyword">on</span> virustotal.com</span><br><span class="line"><span class="keyword">which</span>       Locate a shim/executable (similar to &#x27;<span class="keyword">which</span>&#x27; <span class="keyword">on</span> Linux)</span><br><span class="line"></span><br><span class="line"><span class="keyword">Type</span> &#x27;scoop <span class="keyword">help</span> &lt;command&gt;&#x27; to get <span class="keyword">help</span> <span class="keyword">for</span> a specific command.</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="Chocolatey">Chocolatey</h3><ul><li><p>首先设置环境变量 <code>ChocolateyInstall</code> ,值为要安装的位置,如下</p><ul><li><p>如果不设置的话 Chocolatey 会自动安装进 C 盘</p></li><li><p>设置完环境变量后一定要<code>重启</code>,否则不会生效,还是跟没设置一样.</p></li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVsWIn.png" alt="20210314001245" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="功能提升">功能提升</h2><h3 id="scoop-completion">scoop-completion</h3><ul><li><p>scoop 命令按 tab 自动补全</p></li><li><p>安装</p><ul><li>需要先添加 dorado 库<a href="#%E5%A4%87%E4%BB%BD&amp;%E6%8E%A8%E8%8D%90">(备份&amp;推荐)</a>,然后才能安装.</li></ul><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">scoop </span><span class="keyword">install </span><span class="keyword">scoop-completion</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="加速下载">加速下载</h3><ul><li><p>通过 aria2,配置:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scoop config aria2-split 32</span><br><span class="line">scoop config aria2-max-connection-per-server 16</span><br><span class="line">scoop config aria2-min-split-size 1M</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>通过代理:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scoop<span class="built_in"> config proxy </span>localhost:7890</span><br><span class="line">choco<span class="built_in"> config </span><span class="built_in">set</span><span class="built_in"> proxy </span>localhost:7890</span><br></pre></td></tr></table></figure><p>移除代理:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">scoop </span><span class="built_in">config</span> rm proxy</span><br><span class="line">choco <span class="built_in">config</span> unset proxy</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Scoop-绝活">Scoop 绝活</h2><ul><li><p>他把当前版本的目录创建了一个<code>伪目录:current</code>,这个伪目录指向当前版本号的目录</p></li><li><p>比如这里的<code>current/node.exe</code>实际上指向<code>15.5.1/node.exe</code></p><img src="https://www.helloimg.com/images/2022/02/27/GVL62D.png" alt="20210115011742" /></li><li><p>这就类似 URL 永久化,使得软件更新后即使目录版本号变更,你的路径引用也不会失效!</p></li><li><p>这个功能太赞了!</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="配置文件">配置文件</h2><h3 id="Scoop-3">Scoop</h3><blockquote><p>在 <code>C:\Users\用户名\.config\scoop\config.json</code> 这个文件里.</p></blockquote><hr><h3 id="Chocolatey-2">Chocolatey</h3><blockquote><p>在 <code>Chocolatey\config\chocolatey.config</code> 这个文件里.</p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="好文传送">好文传送</h2><blockquote><p><a href="https://blog.csdn.net/luoyooi/article/details/102990113">Windows 下 Scoop 安装、配置与使用</a></p></blockquote><blockquote><p><a href="https://www.jianshu.com/p/50993df76b1c">scoop——强大的 Windows 命令行包管理工具</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="报错异常">报错异常</h2><h3 id="网络原因">网络原因</h3><ul><li>比如我在用 scoop 安装 pwsh 时,会遇到 MD5 不匹配或者与 GitHub 连接异常的情况,安装失败</li><li>举例:<ul><li>我安装<code>gitkraken</code>时,不开 aria2 下载出错,开了的话下载特慢,而且下载时间趋近无穷…</li><li>于是我采用方案一,直接用浏览器下载的,带宽跑满,几秒就下载好了.</li><li>然后改文件名-&gt;复制进 cache-&gt;install-&gt;successfully.</li></ul></li><li>另外还有一种情况,比如我安装<code>gcc</code>时遇到 scoop 提供的 URL 是 404 状态,这是服务器的问题了,无法解决.</li></ul><blockquote><p>注意,如果安装失败,在 Scoop 内部记录实际是<code>已安装</code>,所以需要卸载再重新安装</p></blockquote><hr><ul><li><p>解决方案一</p><ul><li><p>安装失败报错时会显示下载地址,去那里手动下载目标文件</p><ul><li><p>或者进入 cache,找到有个叫<code>(要安装的软件名).txt</code>这个文件,比如我要安装<code>gitkraken</code>,就去找到<code>cache/gitkraken.txt</code></p></li><li><p>内容如下</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">https</span>://release.gitkraken.com/win64/gitkraken-<span class="number">7</span>.<span class="number">4</span>.<span class="number">1</span>-full.nupkg</span><br><span class="line"><span class="attribute">referer</span>=https://release.gitkraken.com/win64/</span><br><span class="line"><span class="attribute">dir</span>=D:\Game\Scoop\cache</span><br><span class="line"><span class="attribute">out</span>=gitkraken#<span class="number">7</span>.<span class="number">4</span>.<span class="number">1</span>#https_release.gitkraken.com_win64_gitkraken-<span class="number">7</span>.<span class="number">4</span>.<span class="number">1</span>-full.nupkg</span><br></pre></td></tr></table></figure></li><li><p>第一行就是<code>下载地址</code>,最后一行<code>out=</code>后面是目标文件名</p></li></ul></li><li><p>进入 cache,按照他的命名,把我们自己下载的重命名后复制进来</p></li><li><p>再进行 install,安装时 scoop 首先检查 cache 中是否有符合的包,没有才会去下载.</p></li></ul><hr></li><li><p>解决方案二</p><ul><li>把 aria2 关闭以下就好</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop config aria2-enabled false</span><br></pre></td></tr></table></figure><ul><li>事后再开启(毕竟它对于某些下载速度提升非常高)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop config aria2-enabled true</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="环境原因">环境原因</h3><ul><li><p>这是个让人费解的报错,什么都没告诉你还怼了句不明不白的话.</p><blockquote><p>ERROR Shovel flavour of scoop is required</p></blockquote></li><li><p>去看看这个项目:</p><blockquote><p><a href="https://github.com/Ash258/Scoop-Core">https://github.com/Ash258/Scoop-Core</a></p></blockquote><p>大概意思: shovel 是 scoop-core 替换增强版,你需要安装这家伙 (虽然用的人并不是很多)</p></li></ul><h3 id="内核更换报错">内核更换报错</h3><ul><li><p>把内核换成了 Gitee 上的,出现了报错:</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Updating Scoop...</span><br><span class="line">Your configuration specifies to merge with the ref &#x27;refs/heads/main&#x27;</span><br><span class="line">from the remote, but no such ref was fetched.</span><br><span class="line"><span class="keyword">ERROR </span>Update failed.</span><br></pre></td></tr></table></figure></li><li><p>仔细检查了下是分支问题</p><p>远程上是 master 分支,而本地配置为 main 分支 (配置文件在 ~/.config/scoop/config.yml)</p></li></ul><h3 id="scoop-search">scoop-search</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">╰─ scoop search 7 ─╯</span><br><span class="line">panic: runtime error: index out of range [1] with length 1</span><br><span class="line"></span><br><span class="line">goroutine 20 [running]:</span><br><span class="line">main.matchingManifests(0xc000102060, 0x21, 0xf1b3b8, 0x1, 0xc000052000, 0x10, 0x10)</span><br><span class="line">        /home/runner/work/scoop-search/scoop-search/main.go:133 +0x106b</span><br><span class="line">main.main.func1(0xc000092140, 0x15, 0xf1b3b8, 0x1, 0x0, 0xc000088270, 0xc000094150, 0xe92f00, 0xc0000d6070)</span><br><span class="line">        /home/runner/work/scoop-search/scoop-search/main.go:70 +0x185</span><br><span class="line">created by main.main</span><br><span class="line">        /home/runner/work/scoop-search/scoop-search/main.go:63 +0x253</span><br></pre></td></tr></table></figure><p>排查了一遍,出现这种问题一般是因为<code>软件库有问题</code>, 而不是 scoop/scoop-search 的问题</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="更新-备份-推荐">更新&amp;备份&amp;推荐</h2><ul><li><p>备份方法可见: <a href="../backuper">🎃backuper~开发环境备份.</a></p><blockquote><ul><li>库: <a href="https://github.com/Weidows-projects/Programming-Configuration/blob/master/lists/scoop/scoop-buckets.bak">https://github.com/Weidows-projects/Programming-Configuration/blob/master/lists/scoop/scoop-buckets.bak</a></li><li>软件: <a href="https://github.com/Weidows-projects/Programming-Configuration/blob/master/lists/scoop/scoop-apps.bak">https://github.com/Weidows-projects/Programming-Configuration/blob/master/lists/scoop/scoop-apps.bak</a></li></ul></blockquote></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> 工具 </tag>
            
            <tag> windows </tag>
            
            <tag> scoop </tag>
            
            <tag> package </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😂我所喜的小语句儿,所爱的小语气儿~(壹)</title>
      <link href="/post/life/nicer/1/"/>
      <url>/post/life/nicer/1/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-03 16:59:56 * @LastEditors: Weidows * @LastEditTime: 2021-03-21 16:44:55 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\life\nicer\1.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E4%BD%95"><code>何?</code></a></li><li><a href="#%E6%B3%A8%E9%87%8A">注释</a></li><li><a href="#%E4%B9%B1%E7%A0%81">乱码</a></li><li><a href="#%E9%AB%98%E8%83%BD%E8%AF%8D%E6%B1%87">高能词汇</a></li><li><a href="#%E5%87%A1%E5%B0%94%E8%B5%9B">凡尔赛</a></li><li><a href="#%E8%B7%91%E8%B7%AF">跑路</a></li><li><a href="#%E6%80%9D%E6%83%B3%E5%A2%83%E7%95%8C">思想境界</a></li><li><a href="#%E4%BD%A0%E6%83%B3%E5%88%B0%E5%93%AA%E5%8E%BB%E4%BA%86">你想到哪去了?</a></li><li><a href="#%E7%BB%8F%E9%AA%8C%E4%B9%8B%E8%B0%88">经验之谈</a></li><li><a href="#%E8%81%86%E5%90%AC%E8%8E%B7%E5%BE%97%E5%B9%B8%E7%A6%8F%E6%84%9F%E7%9A%84%E5%9B%9B%E7%A7%8D%E6%96%B9%E5%BC%8F">【聆听】获得幸福感的四种方式</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="何"><code>何?</code></h2><ul><li>总是在各种平台看到喜欢的话,在这里记录一下<ul><li>在说说里发感觉怪怪的.</li></ul></li><li>有冒犯的话…请原谅,我也没法 🤣</li></ul><hr><h2 id="注释">注释</h2><p>//在我写这个程序的时候，只有我和老天知道它是什么意思<br>//好了，现在只有老天才知道了 ​</p><hr><p>解决问题的方法就是解决提出问题的人</p><h2 id="乱码">乱码</h2><p>手持两把锟斤拷<br>口中疾呼烫烫烫<br>脚踏千朵屯屯屯<br>笑看万物锘锘锘 ​</p><hr><h2 id="高能词汇">高能词汇</h2><p>复盘，赋能，抓手，对标，沉淀，对齐，拉通，倒逼，颗粒度，落地，中台，方法论，漏斗，组合拳，闭环，生命周期，打法，履约，引爆点，串联，价值转化，纽带，矩阵，协同，反哺，点线面，认知，强化认知，强化心智，交互，兼容，包装，响应，刺激，规模，重组，量化，宽松，资源倾斜，完善逻辑，抽离透传、抽象，复用打法，发力，精细化，布局，商业模式，联动，场景，聚焦，快速响应，影响力，价值，细分，垂直领域，维度，定性定量，聚焦，去中心化，关键路径，接地气，梳理，输出，格局，生态 ​</p><hr><h2 id="凡尔赛">凡尔赛</h2><p>悔创阿里杰克马，一无所有王健林。<br>不知妻美刘强东，普通家庭马化腾。<br>北大还行撒贝宁，会打一点张继科。<br>平平无奇古天乐，家里最丑刘亦菲。​</p><hr><h2 id="跑路">跑路</h2><p>一拍脑袋有了，一拍胸脯准了，一拍屁股坏了，一拍大腿跑了 ​</p><hr><h2 id="思想境界">思想境界</h2><ul><li>读了很多遍,感触很深…</li></ul><p>我虽然不是小姐姐北大这样的国内 top 高校，但是我感觉我能强烈共情和理解她说的东西。我自己是普通一本然后去英国读了硕士，专业计算机，这个专业你们懂得。</p><p>之前也找到了 BAT 的实习，但是问题就是感觉我强烈的被催着走，不能停，你必须每一个关卡都顺利，让自己简历漂漂亮亮。</p><p>我后来手里拿到了大家眼里都觉得&quot;光鲜亮丽&quot;的那种工作 offer，薪资真的不错，然而我却痛苦，因为我实习过了解真正职场的工作状态，真的让我窒息。我慎重考虑后，放弃了这个 offer，然而很少有人能理解你的选择，你说你觉得 996 不合理，你不认同这种提前透支自己身体健康的工作模式，却有人说这种&quot;福报&quot;他们巴不得自己修，007 都接受。</p><p>我想我太理想主义了，我尊重每个人的选择，因此我只说我个人观点，对于我个人而言，我就是不想 996，我就是认为这种职场模式不健康，我就是不想干到 35 被优化，冒着内分泌紊乱的风险，透支未来赚 💰。</p><p>其实最难受的还是父母不理解，我拒掉了 BAT 的 offer，我母亲就跑到我床前大声呵斥我，&quot;你要是不去你当初说服我和你爸【投资】你出国干嘛?你学了这个专业不用，你想干嘛?&quot;对啊，我还背着 15 万贷款呢？是啊，看起来我放弃高薪工作简直就是疯了!可他们没有理解为什么我要冒这么大的风险都不愿意去接这个 offer 呢？</p><p>在我们这个小县城，一个从小学习不错，海外留学硕士，从小到大不用母亲费心教的孩子还培养的这么&quot;优秀&quot;对给她涨面子。但我深深感觉到自己就被锁在这个枷锁里，计算机专业好呀，代表着我就得码代码去互联网，海外硕士棒呀，意味着得去一线去做&quot;光鲜亮丽&quot;的工作。</p><p>Bro，那太难受了，&quot;我&quot;呢?然而在这么多年的竞争中我只学会了抓住一切机会往上爬，选热门的专业，选高回报率的工作，却从来不问自己真正喜欢什么？或者向往什么？也许我心里曾经有过一个热爱某个事情的灵魂，但是为了在残酷是竞争中活下来，或者说不被卷下来，我早就亲手杀掉了她。</p><p>不过现在我家里蹲的过程中也想明白了，我就一普通人，什么面子，光鲜，都蛮虚无，只要在劳动就了不起，也尝试去挖掘更多潜能，大环境 996，我不喜欢，我选择用我自己的方式反抗，我知道目前这种职场状态是不会变的，我能做的只有自救。​</p><hr><h2 id="你想到哪去了">你想到哪去了?</h2><p>语文老师:细节呢?</p><p>英语老师:发音呢?</p><p>数学老师:过程呢?</p><p>音乐老师:音调呢?</p><p>地理老师:位置呢?</p><p>美术老师:画面呢?</p><p>物理老师:实践呢?</p><p>化学老师:反应呢?</p><p>政治老师:思想呢?</p><p>历史老师:记录呢?</p><p>实践老师:体会呢?</p><p>体育老师:力度呢?</p><p>舞蹈老师:动作呢?</p><p>班主任老师:结果呢?</p><p>生物老师:孩子呢?</p><hr><h2 id="经验之谈">经验之谈</h2><p>看到这个，我想说说个人折腾经历</p><p>开始的时候，用 Github Pages 来托管，那肯定用 jekyll，方便不折腾</p><p>后来因为编译略慢，投奔到 Hugo 的怀抱去了，还顺便折腾一下自动 commit 到 github 自动编译部署的实现。那个时候是真心喜欢 Hugo，虽然不怎么写 Golang，但还是各种折腾给 Hugo commit 过一段代码，release note 现在都还能看到我的名字</p><p>再后来，有个几万篇文章的小项目，心想 Hugo 这么牛逼，那干脆用 Hugo 静态部署好了，不试试不知道，一试就扑街，1.5 万左右篇文章，Hugo 在我的双核四线程 8GB 内存的笔记本上，CPU 满载 build 了四分钟多，让我顿时间怀疑人生</p><p>看来静态博客生成器，即使速度快如 golang 编写的 Hugo 真的不过如此。倒不是因为 Hugo 的代码有性能问题，而是静态博客根本不适合大量的文章生成的场景</p><p>自己折腾一遍，也终于算是懂得了为何如此多的项目后面为什么带着个 MySQL，因为这需求实在是太普遍了。对比与静态博客，带着 MySQL 的意义是显而易见的，不用重新 build 整个站点</p><p>技术没有什么绝对好与差，只有适用的场景，抛开上下文讨论技术是不明智的</p><p>Ruby 圈有句话叫 You will end up reinventing Rails, in a horrible way.</p><p>后来我发现这句话真是放之四海而皆准，总结起来，blog 圈也可以有句话叫 You will end up reinventing Wordpress, in a horrible way.</p><p>好好写作，你的目的并不是折腾写作软件</p><hr><h2 id="【聆听】获得幸福感的四种方式">【聆听】获得幸福感的四种方式</h2><blockquote><p><a href="https://mp.weixin.qq.com/s?__biz=Mzk0NzE4NTk4Ng==&amp;mid=2247486664&amp;idx=1&amp;sn=3e115e5ee33948846819321536705e8c&amp;chksm=c37bfce5f40c75f333ad90fe707dc89d17e0d914ca2db338f04fca451e63756930aac749777c&amp;mpshare=1&amp;scene=23&amp;srcid=0307vCilCgxIE2HcQDkmFUuR&amp;sharer_sharetime=1615085382218&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd">【聆听】获得幸福感的四种方式</a></p></blockquote><ul><li>很有实体感受的一片情感类文章,<code>推荐聆听而非阅读</code>.</li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> nicer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 哲学 </tag>
            
            <tag> 生活 </tag>
            
            <tag> 搞笑 </tag>
            
            <tag> 高能 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>♻VScode插件开发流程.</title>
      <link href="/post/tools/vscode/extension-develop/"/>
      <url>/post/tools/vscode/extension-develop/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-03 15:18:46 * @LastEditors: Weidows * @LastEditTime: 2021-06-26 02:06:38 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\tools\vscode\extension-develop.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87">前期准备</a></li><li><a href="#%E5%BC%80%E5%8F%91">开发</a></li><li><a href="#%E6%89%93%E5%8C%85">打包</a></li><li><a href="#%E5%8F%91%E5%B8%83">发布</a><ul><li><a href="#%E7%BD%91%E9%A1%B5%E5%8F%91%E5%B8%83">网页发布</a></li><li><a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%91%E5%B8%83">命令行发布</a></li></ul></li><li><a href="#%E7%BB%93%E5%90%88-github">结合 GitHub</a></li><li><a href="#%E5%89%96%E6%9E%90-packagejson">剖析 package.json</a></li><li><a href="#%E6%96%87%E7%AB%A0%E6%8E%A8%E8%8D%90">文章推荐</a></li></ul><h2 id="前期准备">前期准备</h2><blockquote><p>首先准备好点子(扩展,主题啥的)具体是想要做啥.</p></blockquote><blockquote><p>推荐借鉴一下的简单项目: <a href="https://github.com/Weidows-projects/vscode-weidows-theme">https://github.com/Weidows-projects/vscode-weidows-theme</a></p></blockquote><hr><h2 id="开发">开发</h2><ul><li><p>可以照葫芦画瓢,反正基本都是开源的,别乱复制粘贴就好.</p></li><li><p>vscode 插件开发可以用<code>Yeoman</code>:</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">npm</span> install -g yo generator-<span class="meta">code</span></span><br></pre></td></tr></table></figure></li><li><p>使用:</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">yo</span> <span class="meta">code</span></span><br></pre></td></tr></table></figure></li><li><p>具体怎么使用,暂时不造,先记着.</p></li></ul><hr><h2 id="打包">打包</h2><ul><li><p>安装<code>vsce</code></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g vsce</span><br></pre></td></tr></table></figure></li><li><p>使用</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vsce <span class="keyword">package</span></span><br></pre></td></tr></table></figure></li><li><p>使用后会把当前目录下所有东西打包成<code>*.vsix</code></p></li></ul><hr><h2 id="发布">发布</h2><h3 id="网页发布">网页发布</h3><ul><li><p>进入<a href="https://marketplace.visualstudio.com/VSCode">https://marketplace.visualstudio.com/VSCode</a></p></li><li><p>右上角有个<code>publish extension</code>,注册登录账号</p><ul><li><p>之后你的账号应该有一个组织,在组织下新建一个<code>publisher</code></p></li><li><p>然后摸索摸索,把<code>*.vsix</code>这个文件传上去就 OK 了.</p></li></ul></li></ul><blockquote><p>也可以看一下<a href="https://github.com/marketplace/actions/vscode-plugin-release-action">这个地方</a>,介绍了怎么注册账号和 获取 PAT(Personal Access Token)</p></blockquote><hr><h3 id="命令行发布">命令行发布</h3><ul><li><p>这种发布方法比较适合结合 GitHub 使用,自动化流程.</p><blockquote><p>访问: <a href="https://aka.ms/SignupAzureDevOps">https://aka.ms/SignupAzureDevOps</a></p></blockquote></li><li><p>按着图操作</p><img src="https://www.helloimg.com/images/2022/02/27/GVPwLh.png" alt="20210514153423" /><img src="https://www.helloimg.com/images/2022/02/27/GVtfv5.png" alt="20210514153615" /></li><li><p>然后复制获得的 token,下面就可以发布了</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vsce publish -<span class="selector-tag">p</span> 这里写复制的token</span><br></pre></td></tr></table></figure><p>发布失败的话检查一下 token 是否有效.</p></li><li><p>这个可以结合 GitHub Action,实现自动发布.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="结合-GitHub">结合 GitHub</h2><ul><li><p>发现 package.json 中必须用 https 协议传输数据,于是 local 的 images<code>无法显示</code></p><ul><li>意思就是<code>./xxx.jpg</code>根本显示不出来.</li><li>必须使用<code>https://xxx.jpg</code>才行.</li></ul></li><li><p>这导致一些图片并不需要打包在插件里(因为是引用的 URL)</p><ul><li>而且这些图片要是想显示,必须有个图床.</li></ul><hr></li><li><p>那还想啥? 肯定是 GitHub 啊!</p><ul><li><p>我的方案是本地 Git 开发 -&gt; GitHub</p></li><li><p>把项目中引用的图片放在 GitHub 上,通过 <code>.vscodeignore</code> 文件排除插件需要打包的内容(图片)</p></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="剖析-package-json">剖析 package.json</h2><ul><li><p>借用<code>Git Graph</code>插件简单分析一下 package 中的配置 (因为文件过长,已删掉一部分)</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// 插件注册名</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;git-graph&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 插件显示的名字</span></span><br><span class="line">  <span class="attr">&quot;displayName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Git Graph&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 版本</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.29.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 发布者(只能一人)</span></span><br><span class="line">  <span class="attr">&quot;publisher&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mhutchie&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 作者(多人)</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Michael Hutchison&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mhutchie@16right.com&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 插件描述</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;View a Git Graph of your repository, and perform Git actions from the graph.&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 关键词(供搜索用)</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;git&quot;</span><span class="punctuation">,</span> <span class="string">&quot;graph&quot;</span><span class="punctuation">,</span> <span class="string">&quot;visualise&quot;</span><span class="punctuation">,</span> <span class="string">&quot;diff&quot;</span><span class="punctuation">,</span> <span class="string">&quot;action&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;Other&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;homepage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/mhutchie/vscode-git-graph&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;repository&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;git&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/mhutchie/vscode-git-graph.git&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bugs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/mhutchie/vscode-git-graph/issues&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// Question &amp; answer</span></span><br><span class="line">  <span class="attr">&quot;qna&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/mhutchie/vscode-git-graph/wiki/Support-Resources&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SEE LICENSE IN &#x27;LICENSE&#x27;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 插件图标</span></span><br><span class="line">  <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;resources/icon.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;engines&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;vscode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.38.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;extensionKind&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;workspace&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;activationEvents&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./out/extension.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 对接vscode接口</span></span><br><span class="line">  <span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 命令面板的命令</span></span><br><span class="line">    <span class="attr">&quot;commands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Git Graph&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;git-graph.view&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;View Git Graph (git log)&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;light&quot;</span><span class="punctuation">:</span> <span class="string">&quot;resources/cmd-icon-light.svg&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;dark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;resources/cmd-icon-dark.svg&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Git Graph&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;git-graph.addGitRepository&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Add Git Repository...&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 插件的设置</span></span><br><span class="line">    <span class="attr">&quot;configuration&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;object&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Git Graph&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;git-graph.commitDetailsView.autoCenter&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;boolean&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;default&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Automatically center the Commit Details View when it is opened.&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;git-graph.commitDetailsView.fileView.fileTree.compactFolders&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;boolean&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;default&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Render the File Tree in the Commit Details View in a compacted form, such that folders with a single child folder are compressed into a single combined folder element.&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 插件在vscode界面的显示</span></span><br><span class="line">    <span class="attr">&quot;menus&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;scm/title&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;when&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scmProvider == git &amp;&amp; config.git-graph.sourceCodeProviderIntegrationLocation == &#x27;Inline&#x27;&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;git-graph.view&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;navigation&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;when&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scmProvider == git &amp;&amp; config.git-graph.sourceCodeProviderIntegrationLocation == &#x27;More Actions&#x27;&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;git-graph.view&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;inline&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 开发用的脚本</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jest --verbose&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test-and-report-coverage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jest --verbose --coverage&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 运行依赖</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;iconv-lite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.5.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 开发依赖</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;typescript&quot;</span><span class="punctuation">:</span> <span class="string">&quot;4.0.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;uglify-js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3.10.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;__metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;438221f8-1107-4ccd-a6fe-f3b7fe0856b7&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;publisherId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;996496dc-099f-469d-b89c-0d7713179365&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;publisherDisplayName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mhutchie&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="文章推荐">文章推荐</h2><blockquote><p><a href="https://mp.weixin.qq.com/s?__biz=MzI0MzIyMDM5Ng==&amp;mid=2649833093&amp;idx=1&amp;sn=27bc83c81db8490d52b169ab3ef3fa67&amp;chksm=f175f446c6027d509e9ecdba48271efd51c3c057fd04d90fe8cee0720f01cf3e275d7b25df6c&amp;mpshare=1&amp;scene=23&amp;srcid=0312NhWlH2sedoutfqkNpB7j&amp;sharer_sharetime=1615557271958&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd">VS Code 插件开发入门教程</a></p></blockquote><blockquote><p><a href="https://github.com/sxei/vscode-plugin-demo">sxei/vscode-plugin-demo</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
          <category> vscode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
            <tag> 插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🎉IDEA魔改记录.</title>
      <link href="/post/tools/Jetbrains/Modification/"/>
      <url>/post/tools/Jetbrains/Modification/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2021-01-01 11:06:59 * @LastEditors: Weidows * @LastEditTime: 2021-10-28 15:44:16 * @FilePath: \Blog-private\source\_posts\tools\Jetbrains\Modification.md * @Description: * @!: *********************************************************************--><ul><li><a href="#maven">Maven</a><ul><li><a href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">环境变量</a></li><li><a href="#%E6%8D%A2%E9%98%BF%E9%87%8C%E6%BA%90">换阿里源</a></li><li><a href="#%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E8%B7%AF%E5%BE%84">本地仓库路径</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E5%A4%96%E9%83%A8-maven">使用外部 Maven</a></li></ul></li></ul><h2 id="Maven-2">Maven</h2><ul><li><p>在我发现 Scoop 安装和配置 Maven 有多么便利前,我是这样想的:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 发现 IDEA 是自带 Maven 的,没必要自己再安装一个,直接白嫖她的!</span><br><span class="line"></span><br><span class="line">- 路径是 `IDEA<span class="regexp">/plugins/m</span>aven<span class="regexp">/lib/m</span>aven3`</span><br></pre></td></tr></table></figure></li><li><p>后来发现随着 IDEA 更新,每次配置文件都需要改,环境变量也需要自己配,总之很麻烦…</p></li><li><p>于是,直接 Scoop 安装吧!</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install maven</span><br></pre></td></tr></table></figure></li><li><p>它抽离出 Maven 的内部用户配置文件<code>conf/settings.xml</code>在<code>persist</code>里面,不会被更新覆写.</p><blockquote><p><a href="https://github.com/Weidows-projects/Programming-Configuration/blob/master/others/maven/conf/settings.xml">附上已换源和配置本地仓库的配置文件</a></p></blockquote></li></ul><h3 id="环境变量">环境变量</h3><blockquote><p>参照<a href="../../../system/system_variable#Maven">💥 系统开发环境配置</a></p></blockquote><hr><h3 id="换阿里源">换阿里源</h3><ul><li><p>找到 <code>~/conf/settings.xml</code></p><ul><li>修改为下面依赖:</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- mirror</span></span><br><span class="line"><span class="comment">  | Specifies a repository mirror site to use instead of a given repository. The repository that</span></span><br><span class="line"><span class="comment">  | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used</span></span><br><span class="line"><span class="comment">  | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.</span></span><br><span class="line"><span class="comment">  |</span></span><br><span class="line"><span class="comment">  &lt;mirror&gt;</span></span><br><span class="line"><span class="comment">    &lt;id&gt;mirrorId&lt;/id&gt;</span></span><br><span class="line"><span class="comment">    &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt;</span></span><br><span class="line"><span class="comment">    &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;</span></span><br><span class="line"><span class="comment">    &lt;url&gt;http://my.repository.com/repo/path&lt;/url&gt;</span></span><br><span class="line"><span class="comment">  &lt;/mirror&gt;</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 阿里云仓库 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/repositories/central/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 阿里云仓库2 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>mirrorId<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 中央仓库1 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;mirror&gt;</span></span><br><span class="line"><span class="comment">    &lt;id&gt;repo1&lt;/id&gt;</span></span><br><span class="line"><span class="comment">    &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span></span><br><span class="line"><span class="comment">    &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;</span></span><br><span class="line"><span class="comment">    &lt;url&gt;http://repo1.maven.org/maven2/&lt;/url&gt;</span></span><br><span class="line"><span class="comment">  &lt;/mirror&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 中央仓库2 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;mirror&gt;</span></span><br><span class="line"><span class="comment">    &lt;id&gt;repo2&lt;/id&gt;</span></span><br><span class="line"><span class="comment">    &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span></span><br><span class="line"><span class="comment">    &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;</span></span><br><span class="line"><span class="comment">    &lt;url&gt;http://repo2.maven.org/maven2/&lt;/url&gt;</span></span><br><span class="line"><span class="comment">  &lt;/mirror&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="本地仓库路径">本地仓库路径</h3><ul><li><p>同上</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span> D:/Game/Scoop/persist/maven/conf/settings.xml<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="使用外部-Maven">使用外部 Maven</h3><ul><li><p>IDEA 是自带捆绑 Maven 的,因为上面原因,我们使用 Scoop 又安装了一个,所以需要在 IDEA 里修改下设置</p><img src="https://www.helloimg.com/images/2022/02/27/GVLTY5.png" alt="20210128033817" /></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
          <category> Jetbrains </category>
          
      </categories>
      
      
        <tags>
            
            <tag> idea </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🐱‍JavaScript学习笔记-(贰)</title>
      <link href="/post/Web/JavaScript/study-2/"/>
      <url>/post/Web/JavaScript/study-2/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2020-12-30 18:09:38 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:22:44 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Web\JavaScript\study-2.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E7%BB%AD">续</a></li><li><a href="#%E5%AF%B9%E8%B1%A1">对象</a><ul><li><a href="#%E8%B0%83%E7%94%A8">调用</a></li><li><a href="#%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E6%B7%BB%E5%8A%A0">对象属性赋值/添加</a></li><li><a href="#%E5%88%A0%E9%99%A4%E5%B1%9E%E6%80%A7">删除属性</a></li><li><a href="#%E5%88%A4%E6%96%AD%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E6%9C%89%E6%9F%90%E5%B1%9E%E6%80%A7">判断对象是否有某属性</a></li></ul></li><li><a href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6">流程控制</a><ul><li><a href="#%E5%9F%BA%E6%9C%AC">基本</a></li><li><a href="#foreach-%E5%BE%AA%E7%8E%AF">forEach 循环</a></li><li><a href="#for-in-%E5%BE%AA%E7%8E%AF">for-in 循环</a></li><li><a href="#for-of-%E5%BE%AA%E7%8E%AF">for-of 循环</a></li></ul></li><li><a href="#map--set">Map &amp; Set</a><ul><li><a href="#map">Map</a></li><li><a href="#set">Set</a></li></ul></li><li><a href="#%E5%87%BD%E6%95%B0">函数</a><ul><li><a href="#%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%E4%B8%80">定义方式一</a></li><li><a href="#%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%E4%BA%8C">定义方式二</a></li><li><a href="#%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E9%97%AE%E9%A2%98">参数传递问题</a></li><li><a href="#%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F">变量作用域</a></li><li><a href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%87%BD%E6%95%B0">全局变量/函数</a></li><li><a href="#%E5%87%BD%E6%95%B0%E4%BC%A0%E9%80%92">函数传递</a></li><li><a href="#%E6%96%B9%E6%B3%95">方法</a></li></ul></li></ul><h2 id="续">续</h2><blockquote><p>上接<a href="../study-1">🐱‍🏍JavaScript 学习笔记-(壹)</a></p></blockquote><hr><h2 id="对象-2">对象</h2><ul><li>JavaScript 中的所有的键都是<code>字符串</code>，值是任意对象！</li><li>JavaScript 中定义对象用<code>&#123;&#125;</code>,定义数组用<code>[]</code>.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">email</span>: <span class="string">&quot;123456798@QQ.com&quot;</span>,</span><br><span class="line">  <span class="attr">score</span>: <span class="number">66</span>,</span><br><span class="line">  <span class="attr">eat</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h3 id="调用-2">调用</h3><ul><li>调用并不存在的属性,会提示 undefined,并不会报错.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">age</span>); <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">work</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><hr><h3 id="对象属性赋值-添加">对象属性赋值/添加</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">person.<span class="property">age</span> = <span class="number">4</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">age</span>); <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加一个并没有的work属性.</span></span><br><span class="line">person.<span class="property">work</span> = <span class="string">&quot;student&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">work</span>); <span class="comment">// student</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//添加函数</span></span><br><span class="line">person.<span class="property">run</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// person.run() = function ()这样写不对</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;run&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h3 id="删除属性">删除属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> person.<span class="property">age</span>;</span><br><span class="line"><span class="comment">// delete person.eat(); 这样写是错的</span></span><br><span class="line"><span class="keyword">delete</span> person.<span class="property">eat</span>;</span><br><span class="line"></span><br><span class="line">person; <span class="comment">/**</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;Tom&#x27;, </span></span><br><span class="line"><span class="comment">  email: &#x27;123456798<span class="doctag">@QQ</span>.com&#x27;, </span></span><br><span class="line"><span class="comment">  score: 66, </span></span><br><span class="line"><span class="comment">  work: &#x27;student&#x27;, </span></span><br><span class="line"><span class="comment">  run: [λ] &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><hr><h3 id="判断对象是否有某属性">判断对象是否有某属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;email&quot;</span> <span class="keyword">in</span> person); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;toString&quot;</span> <span class="keyword">in</span> person); <span class="comment">//true 继承自父类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断属性是否真正属于本对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;toString&quot;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><hr><h2 id="流程控制">流程控制</h2><h3 id="基本">基本</h3><ul><li><p>像是 if-else,for,while 跟 Java 一模一样.</p></li><li><p>遍历<code>对象用for-in</code>,遍历<code>数组用for-of</code></p><blockquote><p>具体分析参见 <a href="https://segmentfault.com/q/1010000006658882">javascript 总 for of 和 for in 的区别？</a></p></blockquote></li><li><p>初始化数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age = [<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="forEach-循环">forEach 循环</h3><ul><li>内部是匿名函数.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">age.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">element, index, array</span>) &#123;</span><br><span class="line">  <span class="comment">// element: 指向当前元素的值</span></span><br><span class="line">  <span class="comment">// index:   指向当前索引</span></span><br><span class="line">  <span class="comment">// array:   指向Array对象本身</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(element);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// [9, 8, 7, 6, 5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure><hr><h3 id="for-in-循环">for-in 循环</h3><ul><li>与 Java 不同,java 给的是数组内指定元素的克隆体,JavaScript 给的是指定元素的索引下标.</li><li>跟 for 循环差别只在于数组大小是否可知.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">in</span> age) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(age[index]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [9, 8, 7, 6, 5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure><hr><h3 id="for-of-循环">for-of 循环</h3><ul><li>与 Java 的 for-each 循环一样.</li><li>遍历数据而非 index.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> age) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// 9, 8, 7, 6, 5, 4, 3, 2, 1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Map-Set">Map &amp; Set</h2><h3 id="Map">Map</h3><ul><li>通过 key-value 存储数据<ul><li>key 是字符串,value 是任意数据.</li><li>跟 Java 类似.</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var name = [&quot;Tom&quot;, &quot;Jack&quot;, &quot;haha&quot;],</span></span><br><span class="line"><span class="comment">//   score = [100, 90, 80];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 适用于创建这种索引关系</span></span><br><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">  [<span class="string">&quot;Tom&quot;</span>, <span class="number">100</span>],</span><br><span class="line">  [<span class="string">&quot;Jack&quot;</span>, <span class="number">90</span>],</span><br><span class="line">  [<span class="string">&quot;haha&quot;</span>, <span class="number">80</span>],</span><br><span class="line">]); <span class="comment">// Map &#123; &#x27;Tom&#x27; =&gt; 99, &#x27;Jack&#x27; =&gt; 90, &#x27;haha&#x27; =&gt; 80 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取value</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(<span class="string">&quot;Tom&quot;</span>)); <span class="comment">// 100</span></span><br><span class="line"><span class="comment">// set() 新增或修改value</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">set</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">99</span>).<span class="title function_">get</span>(<span class="string">&quot;Tom&quot;</span>)); <span class="comment">// 99</span></span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line">map.<span class="title function_">delete</span>(<span class="string">&quot;Tom&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="comment">// has</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">has</span>(<span class="string">&quot;Tom&quot;</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map); <span class="comment">// Map &#123; &#x27;Jack&#x27; =&gt; 90, &#x27;haha&#x27; =&gt; 80 &#125;</span></span><br></pre></td></tr></table></figure><hr><h3 id="Set">Set</h3><ul><li>无序不重复,Set 和 Map 类似，Set 只存储 key，且 key 不重复。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([</span><br><span class="line">  [<span class="string">&quot;Tom&quot;</span>, <span class="number">100</span>],</span><br><span class="line">  [<span class="string">&quot;haha&quot;</span>, <span class="number">80</span>],</span><br><span class="line">  [<span class="string">&quot;haha&quot;</span>, <span class="number">80</span>],</span><br><span class="line">  [],</span><br><span class="line">  [],</span><br><span class="line">  <span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;1&quot;</span>,</span><br><span class="line">  <span class="number">2</span>,</span><br><span class="line">  <span class="title class_">NaN</span>,</span><br><span class="line">  <span class="title class_">NaN</span>,</span><br><span class="line">  &#123;&#125;,</span><br><span class="line">  &#123;&#125;,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">set; <span class="comment">/*</span></span><br><span class="line"><span class="comment">  Set &#123;</span></span><br><span class="line"><span class="comment">    [ &#x27;Tom&#x27;, 100 ], </span></span><br><span class="line"><span class="comment">    [ &#x27;haha&#x27;, 80 ], </span></span><br><span class="line"><span class="comment">    [ &#x27;haha&#x27;, 80 ], </span></span><br><span class="line"><span class="comment">    [], </span></span><br><span class="line"><span class="comment">    [],               // 即使数组内部内容一样或为空,也会视为不同key</span></span><br><span class="line"><span class="comment">    1, </span></span><br><span class="line"><span class="comment">    &#x27;1&#x27;,              // 数值与字符串不同</span></span><br><span class="line"><span class="comment">    2, </span></span><br><span class="line"><span class="comment">    NaN,              // Set 内 NaN===NaN</span></span><br><span class="line"><span class="comment">    &#123;&#125;, </span></span><br><span class="line"><span class="comment">    &#123;&#125;,               // 跟数组一样,视为不同对象</span></span><br><span class="line"><span class="comment">    ... &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">set.<span class="title function_">add</span>(<span class="number">3</span>).<span class="title function_">delete</span>(<span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="title function_">has</span>(<span class="number">3</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><hr><h2 id="函数-2">函数</h2><p>如果没有执行 return，函数执行完也会返回结果，结果是 <code>undefined</code></p><h3 id="定义方式一">定义方式一</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">abs</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> ret;</span><br><span class="line">  <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    ret = x;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ret = -x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">abs</span>(-<span class="number">10</span>)); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure><hr><h3 id="定义方式二">定义方式二</h3><ul><li><p>好怪哦,不过跟上面等价(推荐用上面那种)</p></li><li><p>这是 Js 一个特性,函数体与函数名分离,函数名实际上就是那个变量<code>abs</code>,它指向后面的函数体</p><ul><li>关键字<code>function</code>是用来定义函数体的,<code>var</code>用来定义变量</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> abs = <span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> ret;</span><br><span class="line">  <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    ret = x;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ret = -x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">abs</span>(-<span class="number">10</span>)); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure><ul><li>function(x){…}是一个匿名函数,把结果赋值给 abs，通过 abs 间接取函数返回值.</li></ul><hr><h3 id="参数传递问题">参数传递问题</h3><ul><li><p>利用关键字 argument ,它是函数传入的参数数组</p></li><li><p>比如传入的参数为空或者非法.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> abs = <span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">arguments</span>.<span class="property">length</span> === <span class="number">0</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;无参数传入.&quot;</span>);</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> x != <span class="string">&quot;number&quot;</span>) <span class="keyword">throw</span> <span class="string">&quot;参数不对.&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> ret;</span><br><span class="line">  <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    ret = x;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ret = -x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 无参数传入.</span></span><br><span class="line"><span class="comment"> * NaN</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">abs</span>());</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 参数不对.</span></span><br><span class="line"><span class="comment"> * 函数和程序直接停止,&quot;参数不对&quot;是报错,不是输出</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">abs</span>(<span class="string">&quot;123&quot;</span>));</span><br></pre></td></tr></table></figure></li><li><p>有时传入的参数不定,缺失的话可以通过上面方法解决,如果多余呢?</p><ul><li>通过<code>...</code>解决(Java 也有类似的)</li><li>可变参数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">a, b, ...c</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a + b);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 123456</span></span><br><span class="line"><span class="comment"> * [ 7, 8, 9 ]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title function_">func</span>(<span class="string">&quot;123&quot;</span>, <span class="string">&quot;456&quot;</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>);</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="变量作用域">变量作用域</h3><ul><li><p>跟 Java 一模一样.</p></li><li><p>比如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">A</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">B</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">2</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 2</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">B</span>();</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">A</span>();</span><br></pre></td></tr></table></figure><hr></li><li><p>自动提升作用域</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="string">&quot;x&quot;</span> + y;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// xundefined</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="string">&quot;y&quot;</span>;</span><br></pre></td></tr></table></figure><ul><li>相当于下面的,程序自动提升了 y 的定义,但无法提升 y 的赋值,所以 x 也无法定义.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> y;</span><br><span class="line"><span class="keyword">var</span> x = <span class="string">&quot;x&quot;</span> + y;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// xundefined</span></span><br><span class="line">y = <span class="string">&quot;y&quot;</span>;</span><br></pre></td></tr></table></figure><hr></li><li><p>另外,<code>const</code>也是 ES6 才引入的</p><ul><li>定义常量,不可更改.</li></ul><hr></li><li><p>局部作用域</p><ul><li>ES6 引入,建议用<code>let</code>定义局部作用域的变量以免冲突.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index_1 = <span class="number">0</span>; index_1 &lt; <span class="number">10</span>; index_1++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index_1);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index_2 = <span class="number">0</span>; index_2 &lt; <span class="number">10</span>; index_2++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index_2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(index_1); <span class="comment">// 10</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(index_2); <span class="comment">// index_1 is not defined</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="全局变量-函数">全局变量/函数</h3><ul><li><p>所有的全局变量/函数是绑定在 windows 对象上的(浏览器中,如果是 node 中就不行)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局变量</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">x</span>);</span><br><span class="line"><span class="title function_">alert</span>(x);</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">alert</span>(x);</span><br></pre></td></tr></table></figure></li><li><p>这就会导致一个问题:多 Js 文件执行时使用了同名的全局变量会产生冲突</p><ul><li>为了解决这冲突,我们把代码放进自己的命名空间中</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局命名空间</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Weidows</span> = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用命名空间定义全局变量(实际概念就是套了层壳)</span></span><br><span class="line"><span class="title class_">Weidows</span>.<span class="property">name</span> = <span class="string">&quot;Weidows&quot;</span>;</span><br><span class="line"><span class="title class_">Weidows</span>.<span class="property">age</span> = <span class="string">&quot;21&quot;</span>;</span><br></pre></td></tr></table></figure><ul><li>后面 <code>JQuery</code> 就是做这个用的.</li></ul></li></ul><hr><h3 id="函数传递">函数传递</h3><ul><li><p>通过<a href="#%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%E4%BA%8C">定义方法二</a>这种,了解到函数和变量实际是互通的</p></li><li><p>与 Java 不同,像是 C 里面的函数指针,函数名与函数体是分离的.</p></li><li><p>所以以下赋值成立</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">func_1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这里是func.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> func_2 = func_1;</span><br><span class="line"><span class="title function_">func_2</span>(); <span class="comment">// 这里是func.</span></span><br></pre></td></tr></table></figure><hr><h3 id="方法">方法</h3><ul><li><p>定义在对象里的函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Weidows</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Weidows&quot;</span>,</span><br><span class="line">  <span class="attr">birth</span>: <span class="number">2000</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getFullYear</span>();</span><br><span class="line">    <span class="keyword">return</span> now - <span class="variable language_">this</span>.<span class="property">birth</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * [λ: age]</span></span><br><span class="line"><span class="comment"> * 注意调用方法的格式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Weidows</span>.<span class="property">age</span>); <span class="comment">// [λ: age]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Weidows</span>.<span class="title function_">age</span>()); <span class="comment">// 21</span></span><br></pre></td></tr></table></figure></li><li><p>利用<code>this</code>和<code>apply()</code>实现函数和方法的恰当调用.</p><ul><li>JS 中可以通过<code>apply()</code>控制 this 的指向</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getAge</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getFullYear</span>();</span><br><span class="line">  <span class="keyword">return</span> now - <span class="variable language_">this</span>.<span class="property">birth</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Weidows</span>_1 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Weidows&quot;</span>,</span><br><span class="line">  <span class="attr">birth</span>: <span class="number">2000</span>,</span><br><span class="line">  <span class="comment">// age: getAge(),  这样写实质age是getAge()执行后的返回值</span></span><br><span class="line">  <span class="attr">age</span>: getAge, <span class="comment">// 这样含义是age指向getAge()函数体</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Weidows</span>_2 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Weidows&quot;</span>,</span><br><span class="line">  <span class="attr">birth</span>: <span class="number">2000</span>,</span><br><span class="line">  <span class="attr">age</span>: getAge,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Weidows</span>_1.<span class="title function_">age</span>()); <span class="comment">// 21</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Weidows</span>_2.<span class="title function_">age</span>()); <span class="comment">// 21</span></span><br><span class="line"><span class="comment">// console.log(getAge()); // Cannot read property &#x27;birth&#x27; of undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(getAge.<span class="title function_">apply</span>(<span class="title class_">Weidows</span>_1, [])); <span class="comment">// 21</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(getAge.<span class="title function_">apply</span>(<span class="title class_">Weidows</span>_2, [])); <span class="comment">// 21</span></span><br><span class="line"><span class="comment">// 这里apply含义就是调用getAge()函数,并让this指向Weidows_2对象,传入getAge的参数在[]数组里,为空.</span></span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😍Weidows-の成长路线</title>
      <link href="/post/others/LearnWay/"/>
      <url>/post/others/LearnWay/</url>
      
        <content type="html"><![CDATA[<h1>Weidows-の成长路线</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2020-12-30 11:42:22 * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:41:02 * @FilePath: \Blog-private\source\_posts\others\LearnWay.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#weidows-%E3%81%AE%E6%88%90%E9%95%BF%E8%B7%AF%E7%BA%BF">Weidows-の成长路线</a><ul><li><a href="#java">Java</a></li><li><a href="#%E5%89%8D%E7%AB%AF">前端</a></li><li><a href="#cc">C/C++</a></li><li><a href="#python">Python</a></li><li><a href="#%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7">开发工具</a></li><li><a href="#%E6%B3%9B%E5%9F%9F">泛域</a></li><li><a href="#%E8%AE%BE%E8%AE%A1">设计</a></li><li><a href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">基础知识</a></li><li><a href="#%E9%9D%A2%E8%AF%95">面试</a></li></ul></li></ul></blockquote><div class="tabs" id="关于"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#关于-1">关于</button></li><li class="tab"><button type="button" data-href="#关于-2"><i class="fab fa-apple-pay"></i>为什么写这篇文章</button></li><li class="tab"><button type="button" data-href="#关于-3"><i class="fas fa-bomb"></i>注意</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="关于-1"><ul><li><p>有些指引确实有参考价值,需要结合自身能力和需求体系学习.</p></li><li><p>这个只是个人路线,并非普遍最优解 (况且很多技术<code>已经过时</code>了)</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="关于-2"><ul><li><p>学习平台比较多,涉猎范围在<code>单方面无法收藏齐全</code>,这个文章算是概览,方便寻找.</p><ul><li>比如我在中国大学 MOOC 起步,在 B 站刷视频课程,在 CSDN 水技术资料,在 github 爬高星项目,在逼乎看技术走向方面的回答.</li></ul></li><li><p><code>此文章只做推荐,不牵扯任何利益关系.</code></p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="关于-3"><ul><li><p><code>学习编程是非线性成长</code>,也就是说在能看懂的情况下都可以学</p><ul><li><p>想速成的话往往效率和方式比较低下,注意规避.</p></li><li><p>一个技术很大可能会牵扯其他多个技术栈,能力提升一般呈辐射性网状的.</p></li></ul></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Java">Java</h2><blockquote class="pullquote mindmap mindmap-lg"><ul><li>Java<ul><li>阶段<ul><li>入门<ul><li><a href="https://www.icourse163.org/course/0809ZJU013-1001541001?outvandor=zw_mooc_pclszykctj_">零基础学 Java 语言</a></li></ul></li><li>进阶<ul><li><a href="https://www.icourse163.org/course/0809ZJU012-1001542001?outvandor=zw_mooc_pclszykctj_">面向对象程序设计——Java 语言</a></li></ul></li><li>就业级<ul><li><a href="https://www.bilibili.com/video/BV1CJ411m7gg">求知讲堂零基础 Java 入门编程视频教程 学完可就业</a><ul><li>个人记录,不推荐再学习!</li></ul></li></ul></li><li>阶段回顾<ul><li><a href="https://www.bilibili.com/video/BV1MJ411v7tJ?from=search&amp;seid=6413568957300849811">【狂神说 Java】JavaSE 阶段回顾总结</a><ul><li>很不错的复习!</li></ul></li></ul></li><li>网络编程<ul><li><a href="https://www.bilibili.com/video/BV1LJ411z7vY">【狂神说 Java】网络编程实战讲解</a></li><li><a href="https://blog.csdn.net/weixin_45717355/article/details/110945343">【狂神说 Java】网络编程</a></li></ul></li><li>JavaWeb<ul><li><a href="https://www.bilibili.com/video/BV12J411M7Sj">【狂神说 Java】JavaWeb 入门到实战</a></li><li><a href="https://blog.csdn.net/bell_love/article/details/105667638">B 站—【狂神说 Java】JavaWeb 入门到实战—笔记</a></li></ul></li></ul></li><li>特性<ul><li>文档注释<ul><li><a href="https://blog.csdn.net/lsy0903/article/details/89893934">Java 文档注释用法+JavaDoc 的使用详解</a></li></ul></li><li>Lambda<ul><li><a href="https://www.runoob.com/java/java8-lambda-expressions.html">Java Lambda 表达式</a></li><li><a href="https://objcoding.com/2019/03/04/lambda/">关于 Java Lambda 表达式看这一篇就够了</a></li></ul></li><li>多线程<ul><li><a href="https://www.bilibili.com/video/BV1V4411p7EF">【狂神说 Java】多线程详解</a></li><li><a href="https://blog.csdn.net/weixin_41963554/article/details/108808824">狂神说多线程笔记</a></li></ul></li><li>深/浅 clone<ul><li><a href="https://blog.csdn.net/zhangjg_blog/article/details/18369201">详解 Java 中的 clone 方法 – 原型模式</a></li><li><a href="https://zhidao.baidu.com/question/123775480.html">java 中深克隆与浅克隆的区别</a></li></ul></li><li>GUI<ul><li><a href="https://blog.csdn.net/qq_42035966/article/details/82258199">Java-GUI 快速入门</a></li></ul></li></ul></li><li>框架<ul><li>MyBatis<ul><li><a href="https://www.bilibili.com/video/BV1NE411Q7Nx">【狂神说 Java】Mybatis 最新完整教程 IDEA 版通俗易懂</a></li><li><a href="https://blog.csdn.net/DDDDeng_/article/details/106927021">狂神说 Java Mybatis 笔记</a></li></ul></li><li>Spring<ul><li><a href="https://blog.csdn.net/qq_42453117/article/details/104758942">什么？搞 Java 的你还不会 Spring？一篇文章带你掌握</a></li><li><a href="https://www.bilibili.com/video/BV1WE411d7Dv">【狂神说 Java】Spring5 最新完整教程 IDEA 版通俗易懂</a></li></ul></li><li>Spring MVC<ul><li><a href="https://blog.csdn.net/weixin_44635198/article/details/107444925">SpringMVC 笔记（狂神）</a></li><li><a href="https://www.bilibili.com/video/BV1aE41167Tu">【狂神说 Java】SpringMVC 最新教程 IDEA 版通俗易懂</a></li><li><a href="https://www.cnblogs.com/clwydjgs/p/9255046.html">@Controller 和@RestController 的区别？</a></li><li><a href="https://www.bilibili.com/video/BV1RE41127rv">【狂神说 Java】SSM 框架最新整合教学 IDEA 版</a></li></ul></li><li>Spring Boot<ul><li><a href="https://blog.csdn.net/guorui_java/article/details/107379648">Spring Boot 常用注解（绝对经典）</a></li></ul></li><li>日志<ul><li><a href="https://blog.csdn.net/u013068377/article/details/107239878">Java 最详细常用日志框架介绍</a></li></ul></li></ul></li><li>工具类<ul><li>I/O 序列化/ObjectOutputStream<ul><li><a href="https://blog.csdn.net/cc1969281777/article/details/87068106">对象操作流 ObjectOutputStream</a></li></ul></li><li>OPTIONAL<ul><li><a href="https://www.cnblogs.com/zhangboyu/p/7580262.html">理解、学习与使用 JAVA 中的 OPTIONAL</a></li></ul></li><li>URL<ul><li><a href="https://www.cnblogs.com/kissdodog/archive/2013/04/22/3034898.html">System.Uri 类 - 获取 Url 的各种属性，文件名，参数，域名，端口等等</a></li></ul></li><li>Stream<ul><li><a href="https://blog.csdn.net/happyheng/article/details/52832313">Java8 Stream 详解</a></li></ul></li><li>单元测试 Junit<ul><li><a href="https://mp.weixin.qq.com/s?__biz=MzIxNzQwNjM3NA==&amp;mid=2247490821&amp;idx=1&amp;sn=855b8ede1287dd95787a010c3245c8e7&amp;chksm=97fb13cca08c9ada0af423bc4e94ba359d810c32c23ab2a546abaaf30e152c92b826efc1c01f&amp;xtrack=1&amp;scene=90&amp;subscene=93&amp;sessionid=1609292024&amp;clicktime=1609292488&amp;enterid=1609292488&amp;ascene=56&amp;devicetype=android-29&amp;version=27001637&amp;nettype=WIFI&amp;abtest_cookie=AAACAA%3D%3D&amp;lang=zh_CN&amp;exportkey=Af%2BuVL395LWe0DRJ%2Fc8R%2FbA%3D&amp;pass_ticket=6zFqmo%2F%2Fh%2B276SfQuaklQyBIbfcB0rcAk2nXRgO9SV%2FEeTr8pGbFXbfRhR%2FDXMx%2F&amp;wx_header=1">JUnit：别再用 main 方法测试了，好吗？</a></li></ul></li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="前端-2">前端</h2><blockquote class="pullquote mindmap mindmap-md"><ul><li>前端<ul><li>HTML/CSS<ul><li>注意<ul><li>一般这俩是合在一起学的,相关性较强.</li><li>都是<code>前端基础</code>,但是后端也必须要会.</li></ul></li><li>入门<ul><li><a href="https://www.bilibili.com/video/BV14J4114768">黑马程序员 pink 老师前端入门视频教程 HTML5+CSS3+移动端布局-flex 布局 rem 布局响应式布局摹客蓝湖使用-简单有趣好玩</a><ul><li>全网最知名的,应该没有之一</li><li>视频贼多,把基础趟完跑路.</li></ul></li></ul></li><li>进阶<ul><li><a href="https://www.bilibili.com/video/BV1YJ411a7dy">【狂神说 Java】CSS3 最新教程快速入门通俗易懂</a></li></ul></li><li>Markdown<ul><li>这个没有什么特效课程,需要循序渐进的使用 markdown 记笔记</li><li>把一些关键词用熟悉,渐渐地文章就变得好起来了</li><li>markdown 这种归档式,目录式以及层级递进式的笔记方式,能很好地锻炼表达思维</li><li>而且对学习效果有显著提升.</li></ul></li></ul></li><li>JavaScript<ul><li>进阶<ul><li><a href="https://www.bilibili.com/video/BV1JJ41177di">【狂神说 Java】JavaScript 最新教程通俗易懂</a><ul><li>因为有 Java 基础,入门阶段直接过去了.</li></ul></li></ul></li><li>异步<ul><li><a href="https://segmentfault.com/a/1190000007535316">理解 JavaScript 的 async/await</a></li></ul></li><li>Console<ul><li>可以在网站中做一些有意思的事,比如在我的博客这里,按 F12 可以看到.</li><li><a href="http://cn.voidcc.com/question/p-nyquxitt-dn.html">如何在控制台中隐藏日志消息的来源？</a></li><li><a href="https://www.cnblogs.com/suwanbin/p/13383064.html">js 控制台 console 骚操作-打印图片-自定义样式-字符画</a></li></ul></li><li>闭包<ul><li><a href="https://www.jb51.net/article/166905.htm">JS 自执行函数原理及用法</a></li></ul></li><li>Ajax<ul><li><a href="https://www.bilibili.com/video/BV1Kt411u7BV">【狂神说 Java】一小时掌握 Ajax</a></li></ul></li></ul></li><li>大前端<ul><li>Vue.js<ul><li><a href="https://blog.csdn.net/DDDDeng_/article/details/107475920">狂神说 Vue 笔记</a><ul><li>有一段时间没跟着视频学习了,光看文章的话,学起来还挺快</li></ul></li></ul></li><li>跨域<ul><li><a href="../../Web/JavaScript/CORS">😡 一次解决 CORS 经验记录.</a></li></ul></li><li>工具类<ul><li><a href="../../experience/dev/sql-problem">🚚 开发之旅~</a></li></ul></li><li>其他<ul><li><a href="https://mp.weixin.qq.com/s/qNJPkSkMTWNYjjKMp4rwmA">如何做到修改 node_module 中的包，却不受重新安装的影响</a></li></ul></li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="C-C">C/C++</h2><ul><li><p>个人比较喜欢把 C 和 C++放在一起,虽然 C++并没学过(不过倒是能看懂).</p></li><li><p>全程学的<code>翁凯</code>老师的,讲的很好.</p></li></ul><blockquote class="pullquote mindmap mindmap-md"><ul><li>C/C++<ul><li>入门课程<ul><li><a href="https://www.icourse163.org/course/0809ZJU007A-199001?outvandor=zw_mooc_pclszykctj_">程序设计入门——C 语言</a></li></ul></li><li>进阶课程<ul><li><a href="https://www.icourse163.org/course/ZJU-200001">C 语言程序设计进阶</a></li></ul></li><li>链表<ul><li><a href="https://www.bilibili.com/video/BV1Rb411F738">1 个小时学会单链表，C 语言数据结构专题</a></li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Python">Python</h2><p>用的比学得多…很多时候现学现用</p><blockquote class="pullquote mindmap mindmap-md"><ul><li>Python<ul><li>基础<ul><li><a href="https://www.runoob.com/python3/python3-tutorial.html">Python 3 教程</a></li></ul></li><li>文章<ul><li><a href="../python/anaconda">👍Anaconda-Python-水漂浅探池深浅.</a></li></ul></li><li>工具<ul><li><a href="https://www.cnblogs.com/wanglvtao/p/11140025.html">Python 配置管理的几种方式</a></li><li><a href="https://blog.csdn.net/qq_42967398/article/details/88078788">Python 类型强制转换和字符串的操作</a></li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="开发工具">开发工具</h2><blockquote class="pullquote mindmap mindmap-md"><ul><li>开发工具<ul><li>Git<ul><li>简介<ul><li>这应该是所有程序员必会的技能了,没有保留的余地.</li><li>装上 git 之后结合 github 摸索摸索就会了.</li></ul></li><li>Git push<ul><li><a href="https://www.cnblogs.com/qianqiannian/p/6008140.html">Git push 常见用法</a></li></ul></li><li>多远程<ul><li><a href="https://segmentfault.com/a/1190000011294144">一个项目 push 到多个远程 Git 仓库</a></li></ul></li></ul></li><li>VScode<ul><li>主题适配<ul><li><a href="https://blog.csdn.net/weixin_45599654/article/details/109306462">VScode 自定义主题 界面 UI 配色 语法配色</a></li></ul></li><li>插件(包)开发/发布<ul><li><a href="https://segmentfault.com/a/1190000020435312">VScode 插件开发（五）插件包</a></li><li><a href="https://github.com/Weidows-projects/VScode-Extension-Tamplate">vscode 插件开发模板</a></li></ul></li><li>Emmet<ul><li><a href="https://blog.csdn.net/qq_33744228/article/details/80910377">【Emmet】HTML 速写之 Emmet 语法规则</a></li></ul></li></ul></li><li>Docker<ul><li><a href="https://www.bilibili.com/video/BV1vD4y1X7ce">初探 Docker</a></li></ul></li><li>正则表达式<ul><li><a href="https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md">ziishaned/learn-regex</a><ul><li>标星超高的项目,必须一刷!</li></ul></li><li><a href="../../experience/regex">🙉 修为突破灵药-正则表达式</a></li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="泛域">泛域</h2><blockquote class="pullquote mindmap mindmap-md"><ul><li>泛域<ul><li>2038 问题<ul><li><a href="https://baike.baidu.com/item/2038%E5%B9%B4%E9%97%AE%E9%A2%98/10578442?fr=aladdin">2038 年问题</a></li><li>问题不大不小,Windows 平台与 linux 平台都有相应的推迟解决方案了.</li></ul></li><li>自信<ul><li><a href="https://blog.csdn.net/m0_46163918/article/details/114883501?utm_source=app&amp;app_version=4.5.4">上班 4 年，现在却只会调工具包，AI 程序员崩溃了</a><ul><li>我发现我好想也有点文中提到的“冒名顶替综合征”,文中也有我认为很好的解决办法:<ul><li>多多交流和分享</li><li>记录做过的事情</li><li>保持学习者心态</li></ul></li></ul></li><li>随着年龄的增大,越发发现自信的重要性.</li><li>初中时就被体育老师鼓动,直到现在仍然感觉带有自信头衔的人有独特的美丽.</li><li>当然,自信不是自负,是合理的外向+阳光+乐观的态度,在社交,职场和情感方面都有一定作用.</li></ul></li><li>编码习惯<ul><li><a href="https://mp.weixin.qq.com/s?__biz=MzA5NDIzNzY1OQ==&amp;mid=2735619936&amp;idx=1&amp;sn=56562e359badd5afb27529ebc41d77b9&amp;chksm=b6ab39d481dcb0c21f5696373b0882fdfc0a06cbce7e4cf45529847012a1990b0758d45e6244&amp;mpshare=1&amp;scene=23&amp;srcid=0505Bype3cbVTtcSBVgUS3Ed&amp;sharer_sharetime=1620190642862&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd">优秀程序员都在注意的 10 个点</a></li></ul></li><li>文档编写<ul><li>emmm,Ummm…这是个如何优雅拉屎的艺术</li><li><a href="https://www.jianshu.com/p/a7984927cfb9">最全！软件开发类项目关键文档内容要求</a></li><li><a href="https://www.jianshu.com/p/a52fe78962f0">软件需求，概要设计，详细设计（文档）怎么做，做什么？</a></li><li><a href="https://wenku.baidu.com/view/1e0708f41611cc7931b765ce05087632311274cf.html">一个挺像样的项目文档: 软件项目开发文档</a></li></ul></li><li>代理<ul><li><a href="https://congcong0806.github.io/2018/04/20/SS/">SS/SSR/V2Ray/Clash 简介和客户端软件下载</a></li></ul></li><li>图灵测试<ul><li><a href="https://mathpix.com/">问题来自于 mathpix 这个官网首页,玩梗 😂</a><ul><li><a href="https://www.helloimg.com/images/2022/02/27/GViz3o.png">QQ 截图 20210626151150</a></li></ul></li><li><a href="https://zh.wikipedia.org/wiki/%E5%9B%BE%E7%81%B5%E6%B5%8B%E8%AF%95">维基百科:图灵测试</a></li><li><a href="https://www.helloimg.com/images/2022/04/11/RtEo1t.png">新版图灵测试</a></li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="设计">设计</h2><h2 id="基础知识">基础知识</h2><ul><li><p>这两个跳到新文章吧,写在这太长:</p><p><a href="../../design/UI-design">🙌UI 平面设计.</a></p><p><a href="../../experience/basic/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.mmd">🌈 基础知识</a></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="面试">面试</h2><ol><li><p><a href="https://blog.csdn.net/weixin_38607253/article/details/114154414">MetaAPP 部分笔试题</a></p></li><li><p><a href="https://www.cnblogs.com/guoxiaoyan/p/8664150.html">什么是“堆”,“栈”,“堆栈”,“队列”,它们的区别</a></p></li><li><p><a href="https://www.cnblogs.com/timecloud/p/6555868.html">到底产生几个 String 对象</a></p></li><li><p><a href="https://www.cnblogs.com/dolphin0520/p/3592500.html">浅谈 Java 中的 equals 和==</a></p></li><li><p><a href="https://mp.weixin.qq.com/s/SytfnrsYqequ2M7CnSY-IA">字节终面：两个文件的公共 url 怎么找？</a> / <a href="https://mp.weixin.qq.com/s/TdJWFxrDAadK9UXar4WiRA">小米面试：孔融找梨</a></p><p>通过 hash 降低时间复杂度, 以及通过 hash 分治降低空间复杂度</p></li></ol><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 备忘录 </tag>
            
            <tag> 推荐 </tag>
            
            <tag> 设计 </tag>
            
            <tag> vscode </tag>
            
            <tag> 成长路线 </tag>
            
            <tag> 基础知识 </tag>
            
            <tag> cpp </tag>
            
            <tag> python </tag>
            
            <tag> 工具 </tag>
            
            <tag> 大前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>💢Windows-一些奇怪逸事</title>
      <link href="/post/system/Windows/"/>
      <url>/post/system/Windows/</url>
      
        <content type="html"><![CDATA[<h1>Windows-一些奇怪逸事</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2020-12-28 13:49:19 * @LastEditors: Weidows * @LastEditTime: 2022-05-17 17:39:38 * @FilePath: \Blog-private\source\_posts\system\Windows.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#windows-%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E9%80%B8%E4%BA%8B">Windows-一些奇怪逸事</a><ul><li><a href="#%E7%AA%97%E5%8F%A3%E9%80%B8%E5%87%BA">窗口逸出</a></li><li><a href="#%E7%BB%88%E7%AB%AF">终端</a><ul><li><a href="#%E6%89%93%E5%BC%80%E6%96%B9%E5%BC%8F">打开方式</a><ul><li><a href="#%E6%96%B9%E6%B3%95%E4%B8%80">方法一</a></li><li><a href="#%E6%96%B9%E6%B3%95%E4%BA%8C">方法二</a></li><li><a href="#%E6%96%B9%E6%B3%95%E4%B8%89">方法三</a></li></ul></li><li><a href="#%E5%88%87%E6%8D%A2%E8%B7%AF%E5%BE%84">切换路径</a></li></ul></li><li><a href="#%E5%8E%8B%E7%BC%A9%E5%8C%85%E5%86%85%E5%AE%B9%E5%BC%82%E5%B8%B8">压缩包内容异常</a></li><li><a href="#office-%E5%A5%97%E4%BB%B6">office-套件</a><ul><li><a href="#diff-office2019-office365">diff-office2019-office365</a></li><li><a href="#%E7%BD%91%E9%A1%B5%E7%89%88-office">网页版-office</a></li><li><a href="#%E4%B8%BE%E6%A0%97%E4%B8%8E%E6%8E%A8%E8%8D%90">举栗与推荐</a></li><li><a href="#onedrive">OneDrive</a><ul><li><a href="#%E6%89%93%E4%B8%8D%E5%BC%80">打不开</a></li><li><a href="#%E7%A1%AC%E7%9B%98%E9%94%99%E8%AF%AF">硬盘错误</a></li><li><a href="#%E6%97%A0%E6%B3%95%E7%99%BB%E9%99%86">无法登陆</a></li></ul></li><li><a href="#onenote">OneNote</a></li></ul></li><li><a href="#%E5%90%84%E7%A7%8D%E8%B7%AF%E5%BE%84">各种路径</a></li><li><a href="#%E9%A2%9C%E8%89%B2%E9%85%8D%E7%BD%AE">颜色配置</a><ul><li><a href="#nvidia">NVIDIA</a></li><li><a href="#amd">AMD</a></li></ul></li><li><a href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BB%A3%E7%90%86%E4%B8%8D%E9%80%9A">虚拟机代理不通</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB">数据迁移</a></li><li><a href="#%E5%A3%B0%E9%9F%B3%E9%85%8D%E7%BD%AE">声音配置</a><ul><li><a href="#%E9%A9%B1%E5%8A%A8">驱动</a></li><li><a href="#%E9%85%B7%E7%8B%97">酷狗</a></li><li><a href="#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE">系统设置</a></li></ul></li><li><a href="#windows-%E9%98%B2%E7%81%AB%E5%A2%99%E9%80%9A%E7%9F%A5">windows-防火墙通知</a></li><li><a href="#utools">utools</a><ul><li><a href="#%E5%89%AA%E5%88%87%E6%9D%BF%E6%89%93%E4%B8%8D%E5%BC%80">剪切板打不开</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><h2 id="窗口逸出">窗口逸出</h2><ul><li><p>之前弄了个副屏,有些应用窗口在副屏中打开</p></li><li><p>于是,在不装副屏时,那些窗口打开时还是在那个位置,而且摸不到他们没法拖过来…</p></li><li><p>解决方案</p><ol><li><p><kbd>alt</kbd> + <kbd>Tab</kbd> 切换到那个窗口.</p></li><li><p><kbd>alt</kbd> + <kbd>space</kbd> 切出窗口菜单,选择最大化</p></li><li><p>=&gt; <code>解决</code>!</p></li></ol></li></ul><hr><h2 id="终端">终端</h2><h3 id="打开方式">打开方式</h3><h4 id="方法一">方法一</h4><p><code>Windows + R</code>,输入 cmd,回车就出来了.</p><h4 id="方法二">方法二</h4><p>在文件夹空白处按住<code>shift + 右键</code>,会出来<code>在此处打开PowerShell窗口</code></p><img src="https://www.helloimg.com/images/2022/02/27/GVP1ID.png" alt="20210103142309" /><h4 id="方法三">方法三</h4><p>直接在路径栏中输入 cmd 回车.</p><img src="https://www.helloimg.com/images/2022/02/27/GVAaGn.png" alt="20210103142458" /><hr><h3 id="切换路径">切换路径</h3><ul><li><p>秃然一天,发现 cmd 路径无法切换??!!</p><blockquote><p>百度了一下找到了原因: <a href="https://blog.csdn.net/weixin_38089515/article/details/76339030">cmd 下无法切换路径问题</a></p></blockquote><p>如下,需要先切换一下盘符…</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\29845&gt;<span class="title">cd</span> <span class="title">D</span>:\<span class="title">Game</span>\<span class="title">Github</span>\<span class="title">Programming</span>-<span class="title">Configuration</span>\<span class="title">lists</span></span></span><br><span class="line"><span class="function"><span class="title">C</span>:\<span class="title">Users</span>\29845&gt;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">C</span>:\<span class="title">Users</span>\29845&gt;<span class="title">cd</span> <span class="title">D</span>:</span></span><br><span class="line"><span class="function"><span class="title">D</span>:\</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">C</span>:\<span class="title">Users</span>\29845&gt;<span class="title">d</span>:</span></span><br><span class="line"><span class="function"><span class="title">D</span>:\&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>再次找了一下,发现 powershell 不会遇到这问题,cmd 有另一个方法: 加上 <code>/d</code></p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">D:<span class="string">\Game\Github\Blog-private&gt;cd</span> /d C:<span class="string">\Users</span></span><br><span class="line">C:<span class="string">\Users&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="压缩包内容异常">压缩包内容异常</h2><ul><li><p>今天下载了一个压缩包(原本大小 163M,带密码),打开之后是这样：</p><img src="https://www.helloimg.com/images/2022/02/27/GVAmah.png" alt="20210627201846" /></li><li><p>尝试解压,没问我密码,解压出来也是长这样的,我以为是下载时数据传输错误,重新下载了一遍,结果仍然是这样…</p></li><li><p>于是尝试换软件打开压缩包 -&gt; <code>7z</code>,太对了,正常打开了!(所以应该是系统自带的解压功能有问题)</p><img src="https://www.helloimg.com/images/2022/02/27/GVm5Kt.png" alt="20210627202415" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="office-套件">office-套件</h2><h3 id="diff-office2019-office365">diff-office2019-office365</h3><ol><li><p>像是 office2015,office2017,office2019 这种的一般是买电脑时就预装在电脑里的</p><p>这种是一次性购买激活码(算在买电脑的钱里了),是正版的话可以登录微软账号,把 office2019 绑定到账号上.</p><p>会更新修复一些 bug 但并不会更新功能,简单讲就是随着电脑购买这个 office 也是买死的.</p></li><li><p>office365 是按年续订购买的套餐</p><p>分为家庭版/个人版/商业版/教育版(需要学校购买),不同版本其中还含有不同价位的套餐</p><p>根据版本和套餐的不同,office 提供不同的服务(比如 office 桌面应用使用权,5T OneDrive 空间等等)</p></li><li><p>服务性的差别:</p><p>office2019 锁死在一台电脑上,只有 word,Excel,PowerPoint 等桌面软件的永久使用权,没有云服务.</p><p>office365 使用权限有订阅期,可提供的权限比 office2019 更多; 根据订阅套餐不同,有的不如 office2019,有的远超 office2019</p></li></ol><hr><h3 id="网页版-office">网页版-office</h3><p>网页版 office 任何 Microsoft 账号都可以免费使用,域名也一样: <code>www.office.com</code> ,但是分为 office 和 office365 两种界面</p><ul><li><p>如下图是 office: <a href="https://www.office.com/?auth=1">https://www.office.com/?auth=1</a></p><img src="https://www.helloimg.com/images/2022/02/27/GVALAT.png" alt="20210704100501" /></li><li><p>office365: <a href="https://www.office.com/?auth=2">https://www.office.com/?auth=2</a></p><img src="https://www.helloimg.com/images/2022/02/27/GVAobP.png" alt="20210704100827" /></li></ul><hr><h3 id="举栗与推荐">举栗与推荐</h3><ul><li><p>我的一个微软账号订阅是 <code>Microsoft Office365 A1</code> ,就是最普通的教育版,学校通过申请但没购买更高级的服务.</p><ol><li><p>并没有桌面 office 使用权,只能用上图那种网页版的 (A1 pro 可以用桌面版)</p></li><li><p>有 1~5T OneDrive 空间(具体多大没试过),上面有管理员管着,账号好坏存亡得看管理员和母账号是否安稳.</p></li></ol></li></ul><blockquote><p><a href="https://baijiahao.baidu.com/s?id=1629077774897211140&amp;wfr=spider&amp;for=pc">Office2019 与 office365 有什么区别？有些人还蒙在鼓里！</a></p></blockquote><blockquote><p><a href="https://shikey.com/2019/12/24/office365-versions-a1-a1p-e3-etc.html">OFFICE365 各版本、A1、A1P、E3、E5 等版本科普</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="OneDrive">OneDrive</h3><blockquote><p>官网下载: <a href="https://www.microsoft.com/zh-cn/microsoft-365/onedrive/download">https://www.microsoft.com/zh-cn/microsoft-365/onedrive/download</a></p></blockquote><h4 id="打不开">打不开</h4><blockquote><p><a href="https://zhuanlan.zhihu.com/p/343335173">OneDrive 无法打开的原因</a></p></blockquote><hr><h4 id="硬盘错误">硬盘错误</h4><blockquote><p>在重分析点缓冲区中的标记无效 0x80071129</p></blockquote><ul><li><p>在 OneDrive 同步时网咯出了问题,然后这个文件夹就卡 bug 了,尝试过一下方法删除:</p><ul><li><p>直接删</p></li><li><p>垃圾清理</p></li><li><p>各种解除占用,文件夹粉碎</p></li><li><p>右键硬盘 -&gt; 属性 -&gt; 工具 -&gt; 查错 -&gt; 重启 (<a href="https://blog.csdn.net/COCO56/article/details/108634554">win10 系统在重分析点缓冲区中的标记无效 的解决方法</a>)</p></li><li><p>进安全模式删除</p></li><li><p>进 PE 删除</p></li><li><p>修复模式命令行删除</p></li></ul><hr></li><li><p>通通不行,后来发现 Windows 有自带修复命令,试了试:</p><blockquote><p><a href="https://www.disktool.cn/content-center/command-prompt-check-disk-6540.html">在 Windows 中使用磁盘修复命令 CHKDSK 检查并修复磁盘错误</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkdsk E: /f</span><br></pre></td></tr></table></figure><p>然后会问占用问题,直接输 Y,很快就好了!</p></li></ul><hr><h4 id="无法登陆">无法登陆</h4><blockquote><p>我们无法连接你。我们似乎无法立即连接到其中一项服务。请稍后再试</p></blockquote><blockquote><p>只要 <a href="http://login.microsoftonline.com">login.microsoftonline.com</a> 经过代理软件了，无论是直连 还是走代理，都会出错 <sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p></blockquote><p>里面所说的修改注册表之类的无效, 亲测有效的是在绕过列表里添加此域名:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bypass:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;login.microsoftonline.com&quot;</span></span><br></pre></td></tr></table></figure><hr><h3 id="OneNote">OneNote</h3><blockquote><p>官网下载: <a href="https://www.onenote.com/download?omkt=zh-CN">https://www.onenote.com/download?omkt=zh-CN</a></p></blockquote><p>单独安装的, 不会装上 office 全家桶.</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="各种路径">各种路径</h2><table><thead><tr><th style="text-align:center">名称</th><th style="text-align:center">路径</th></tr></thead><tbody><tr><td style="text-align:center">字体</td><td style="text-align:center"><code>~\AppData\Local\Microsoft\Windows\Fonts</code></td></tr><tr><td style="text-align:center">壁纸/主题</td><td style="text-align:center"><code>~\AppData\Local\Microsoft\Windows\Themes</code></td></tr><tr><td style="text-align:center">开始菜单</td><td style="text-align:center"><code>C:\ProgramData\Microsoft\Windows\Start Menu\Programs</code></td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="颜色配置">颜色配置</h2><p>LSP mode : on</p><p>改进多次的色板 (HDR:OFF，开了的话色彩很怪</p><p>离人类默认视角越来越远了。。</p><h3 id="NVIDIA">NVIDIA</h3><ul><li><details>  <summary> 前后对比一下 </summary><hr><img src="https://www.helloimg.com/images/2022/02/27/GVaEim.png" alt="1633272756273" /><img src="https://www.helloimg.com/images/2022/02/27/GV3431.png" alt="1633272761799" /></details></li><li><p>面板</p><img src="https://www.helloimg.com/images/2022/02/27/GVJ43Q.png" alt="1633272772176" /></li></ul><hr><h3 id="AMD">AMD</h3><img src="https://www.helloimg.com/images/2022/02/27/GVLhYY.png" alt="20220126193700" /><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="虚拟机代理不通">虚拟机代理不通</h2><ul><li><p>win 下开了个虚拟机,本想着让本机代理虚拟机网络,结果不知为什么一直不通:</p><p>本机能连到虚拟机,但是虚拟机连不到本机,一直 ping 不通</p></li><li><p>那么,有可能是下面这个问题:</p><img src="https://www.helloimg.com/images/2022/02/27/GVAUuz.png" alt="20210805182546" /></li><li><p>坑了好久啊!!!</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="数据迁移">数据迁移</h2><ul><li><p>想把电脑里的歌复制进手机里,拿数据线连上了之后复制</p><p>总是会卡死在某个进度,还得重新开始</p><img src="https://www.helloimg.com/images/2022/02/27/GVLQ5T.png" alt="20211012102328" /><p>一番查找发现是因为歌名有的含有特殊字符</p><p>在<code>跨设备迁移</code>或者<code>压缩(Win自带)</code>时文件名无法被正常解析</p><hr></li><li><p>这样的话可以试试换个压缩软件 (7z)</p><p>在电脑上压缩后复制到手机,然后手机解压就可以获取到这种怪名文件了.</p><p>或者使用一些支持的软件,比如用 Anlink 传输</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="声音配置">声音配置</h2><p>关于如何获得动听的声音…</p><h3 id="驱动">驱动</h3><ul><li><p>如果你更新了一下驱动或者换了个耳机后,音效不堪入耳,那么检查一下这里是不是 <code>耳机</code></p><img src="https://www.helloimg.com/images/2022/02/27/GVP93A.png" alt="20211126204114" /></li></ul><h3 id="酷狗">酷狗</h3><ul><li><p>这个品牌当然会有很多诟病的地方,但是它的音效增强是在是强,尤其可以全局</p><img src="https://www.helloimg.com/images/2022/02/27/GV4RzT.png" alt="20211126204303" /></li></ul><h3 id="系统设置">系统设置</h3><img src="https://www.helloimg.com/images/2022/02/27/GVLzdK.png" alt="20211126204420" /><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="windows-防火墙通知">windows-防火墙通知</h2><ul><li><p>关掉防火墙后总是弹出通知让我打开它,没完没了</p><p>下面两方法亲测无效… 可惜还没找到可行的方法.</p><p><img src="https://www.helloimg.com/images/2022/03/12/RFnI9E.png" alt="RFnI9E.png"><br><img src="https://www.helloimg.com/images/2022/03/04/GhEgqX.png" alt=""><br><img src="https://www.helloimg.com/images/2022/03/04/GhEYPP.png" alt=""></p><hr><p><img src="https://www.helloimg.com/images/2022/03/04/GhJ9bP.png" alt=""></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="utools">utools</h2><h3 id="剪切板打不开">剪切板打不开</h3><p>个人是在重装系统后,恢复数据遇到的此问题</p><p>删掉里面所欲东西 <code>$env:APPDATA\uTools\clipboard-data\</code></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-12">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://github.com/Fndroid/clash_for_windows_pkg/issues/2876">[Bug]: 开启 clash 后无法登录 onedrive #2876</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> windows </tag>
            
            <tag> office </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🐱JavaScript学习笔记-(壹)</title>
      <link href="/post/Web/JavaScript/study-1/"/>
      <url>/post/Web/JavaScript/study-1/</url>
      
        <content type="html"><![CDATA[<h1>JavaScript 学习笔记-(壹)</h1><!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2020-12-20 21:26:24 * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:48:13 * @FilePath: \Blog-private\source\_posts\Web\JavaScript\study-1.md * @Description: * @!: *********************************************************************--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#javascript-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%A3%B9">JavaScript 学习笔记-(壹)</a><ul><li><a href="#%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB">前端知识体系</a><ul><li><a href="#css-%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8">css 预处理器</a></li><li><a href="#javascript-%E6%A1%86%E6%9E%B6">JavaScript 框架</a></li><li><a href="#ui-%E6%A1%86%E6%9E%B6">UI 框架</a></li><li><a href="#javascript-%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7">JavaScript 构建工具</a></li><li><a href="#%E4%B8%89%E7%AB%AF%E7%BB%9F%E4%B8%80">三端统一</a></li></ul></li><li><a href="#hello-world">Hello-World</a><ul><li><a href="#%E5%86%85%E9%83%A8%E5%BC%80%E6%92%B8">内部开撸</a></li><li><a href="#%E5%A4%96%E9%83%A8%E5%BC%95%E5%85%A5">外部引入</a></li><li><a href="#type">type</a></li><li><a href="#demo">demo</a></li></ul></li><li><a href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B0%83%E8%AF%95">浏览器调试</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">数据类型</a><ul><li><a href="#%E5%8F%98%E9%87%8F">变量</a></li><li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2">字符串</a></li><li><a href="#%E5%B8%83%E5%B0%94%E5%80%BC">布尔值</a></li><li><a href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97">逻辑运算</a></li><li><a href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6">比较运算符</a></li><li><a href="#%E6%B5%AE%E7%82%B9%E6%95%B0">浮点数</a></li><li><a href="#null--undefined">null &amp;&amp; undefined</a></li><li><a href="#%E6%95%B0%E7%BB%84">数组</a></li><li><a href="#%E5%AF%B9%E8%B1%A1">对象</a></li><li><a href="#%E4%B8%A5%E6%A0%BC%E6%A3%80%E6%9F%A5%E6%A8%A1%E5%BC%8F">严格检查模式</a></li></ul></li><li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2-1">字符串</a><ul><li><a href="#%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6">转义字符</a></li><li><a href="#%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2">多行字符串</a></li><li><a href="#%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2">模板字符串</a></li><li><a href="#%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8">函数调用</a></li><li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%8F%AF%E5%8F%98%E6%80%A7">字符串的可变性</a></li><li><a href="#%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2">大小写转换</a></li><li><a href="#%E5%AD%90%E4%B8%B2">子串</a></li></ul></li><li><a href="#%E6%95%B0%E7%BB%84-1">数组</a><ul><li><a href="#%E9%95%BF%E5%BA%A6">长度</a></li><li><a href="#indexof">indexOf()</a></li><li><a href="#slice">slice()</a></li><li><a href="#pushpopunshiftshift">push(),pop(),unshift(),shift()</a></li><li><a href="#reversesort">reverse(),sort()</a></li><li><a href="#concat">concat()</a></li><li><a href="#join">join()</a></li><li><a href="#%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84">多维数组</a></li><li><a href="#fill">fill()</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><h2 id="前端知识体系">前端知识体系</h2><p>想要成为真正的“互联网 Java 全栈工程师”还有很长的一段路要走，其中前端是绕不开的一门必修课。</p><ul><li><p>HTML（结构）：决定网页的结构和内容</p></li><li><p>CSS（表现）：设定网页的表现样式。</p></li><li><p>JavaScript（行为）：是一种弱类型脚本语言，其源码不需经过编译，而是由浏览器解释运行，用于控制网页的行为.</p><hr></li></ul><h3 id="css-预处理器">css 预处理器</h3><ul><li><p>SASS：基于 Ruby ，通过服务端处理，功能强大。解析效率高。需要学习 Ruby 语言，上手难度高于 LESS。</p></li><li><p>LESS：基于 NodeJS，通过客户端处理，使用简单。功能比 SASS 简单，解析效率也低于 SASS，但在实际开发中足够了，所以如果我们后台人员如果需要的话，<code>建议使用 LESS。</code></p><hr></li></ul><h3 id="JavaScript-框架">JavaScript 框架</h3><ul><li><p><code>JQuery</code>:大家熟知的 JavaScript 库，优点就是简化了 DOM 操作，缺点就是 DOM 操作太频繁，影响前端性能；在前端眼里使用它<code>仅仅是为了兼容 IE6，7，8</code></p></li><li><p><code>Angular</code>:Google 收购的前端框架，由一群 Java 程序员开发，其特点是将后台的 MVC 模式搬到了前端并增加了模块化开发的理念，与微软合作，采用了 TypeScript 语法开发；对后台程序员友好，对前端程序员不太友好；最大的缺点是版本迭代不合理（如 1 代–&gt;2 代，除了名字，基本就是两个东西</p></li><li><p><code>React</code>:Facebook 出品，一款高性能的 JS 前端框架；特点是提出了新概念 【虚拟 DOM】用于减少真实 DOM 操作，在内存中模拟 DOM 操作，有效的提升了前端渲染效率；缺点是使用复杂，因为需要额外学习一门【JSX】语言；</p></li><li><p><code>Vue</code>:一款渐进式 JavaScript 框架，所谓渐进式就是逐步实现新特性的意思，如实现模块化开发、路由、状态管理等新特性。其特点是综合了 Angular（模块化）和 React(虚拟 DOM) 的优点；</p></li><li><p><code>Axios</code>:前端通信框架；因为 Vue 的边界很明确，就是为了处理 DOM，所以并不具备通信能力，此时就需要额外使用一个通信框架与服务器交互；当然也可以直接选择使用 jQuery 提供的 AJAX 通信功能</p><hr></li></ul><h3 id="UI-框架">UI 框架</h3><ul><li><p><code>Ant-Design</code>：阿里巴巴出品，基于 React 的 UI 框架</p></li><li><p><code>ElementUI、iview、ice</code>：饿了么出品，基于 Vue 的 UI 框架</p></li><li><p><code>BootStrap</code>：Teitter 推出的一个用于前端开发的开源工具包</p></li><li><p><code>AmazeUI</code>：又叫“妹子 UI”，一款 HTML5 跨屏前端框架</p><hr></li></ul><h3 id="JavaScript-构建工具">JavaScript 构建工具</h3><ul><li><p><code>Babel</code>：JS 编译工具，主要用于浏览器不支持的 ES 新特性，比如用于编译 TypeScript</p></li><li><p><code>WebPack</code>：模块打包器，主要作用就是打包、压缩、合并及按序加载</p><hr></li></ul><h3 id="三端统一">三端统一</h3><ul><li>混合开发（Hybrid App）<ul><li>云打包：HBuild -&gt; HBuildX，DCloud 出品；API Cloud</li><li>本地打包： Cordova（前身是 PhoneGap）</li></ul></li><li>微信小程序:微信小程序 UI 开发的框架：WeUI</li></ul><hr><h2 id="Hello-World">Hello-World</h2><h3 id="内部开撸">内部开撸</h3><ul><li>放在 head 或者 body 里面都可以,一般放在 head 中.<ul><li>需要注意如果 js 对 DOM 进行操作,标签位置会影响加载顺序以导致对 DOM 的操作可能无效.</li><li>比如要对 body 里的内容进行修改,js 放在 head 里就会无效(因为先加载的 js 后加载的 body),这种情况就需要 js 放在 body 的末尾.</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">alert</span>(<span class="string">&quot;HelloWorld&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="外部引入">外部引入</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>注意 script 不是单标签,<code>&lt;script src=&quot;js/1.js&quot; /&gt;</code>这样写会出错.</p></blockquote><hr><h3 id="type">type</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--不用显示定义type，也默认就是javaScript--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="demo">demo</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--! JavaScript严格区分大小写--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 1. 定义变量   变量类型 变量名 = 变量值</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> score = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//alert(num);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 2. 条件控制</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// if (score &gt; 60 &amp;&amp; score &lt; 70) &#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   alert(&quot;60~70&quot;);</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// &#125; else if (score &gt; 70 &amp;&amp; score &lt; 80) &#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   alert(&quot;70~80&quot;);</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// &#125; else &#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   alert(&quot;other&quot;);</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="浏览器调试">浏览器调试</h2><img src="https://www.helloimg.com/images/2022/02/27/GVLL8M.png" alt="20201220232055" /><ul><li>调试 HTML 和 css 一般在 Element</li><li>console 控制台一般用来调试 JavaScript.</li><li>检查文件和网络连接分别用 Source 和 Network</li><li>最后的 Application 用来存储网络数据.</li></ul><blockquote><p>摸摸就会了,不同特意学习.</p></blockquote><hr><h2 id="数据类型">数据类型</h2><h3 id="变量">变量</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123</span>       <span class="regexp">//</span>整数<span class="number">123</span></span><br><span class="line"><span class="number">123.1</span>     <span class="regexp">//</span>浮点数<span class="number">123.1</span></span><br><span class="line"><span class="number">1.123</span>e3   <span class="regexp">//</span>科学计数法</span><br><span class="line">-<span class="number">99</span>       <span class="regexp">//</span>负数</span><br><span class="line">NaN      <span class="regexp">//</span>not a number</span><br><span class="line">Infinity  <span class="regexp">//</span> 表示无限大</span><br></pre></td></tr></table></figure><hr><h3 id="字符串-2">字符串</h3><p>‘abc’ “abc”</p><hr><h3 id="布尔值">布尔值</h3><p>true，false</p><hr><h3 id="逻辑运算">逻辑运算</h3><ul><li><p>&amp;&amp; 两个都为真，结果为真</p></li><li><p>|| 一个为真，结果为真</p></li><li><p>! 真即假，假即真</p></li></ul><hr><h3 id="比较运算符">比较运算符</h3><ul><li><p>= 赋值</p></li><li><p>== 等于（类型不一样，值一样比如:<code>1 与&quot;1&quot;</code>，也会判断为 true）</p><blockquote><p>这是一个 JS 的缺陷，坚持不要使用 == 比较</p></blockquote></li><li><p>=== 绝对等于（类型一样，值一样，结果为 true）</p><hr></li><li><p>NaN === NaN</p><ul><li>// false</li><li>只能通过 isNaN（NaN）来判断这个数是否是 NaN</li></ul></li></ul><hr><h3 id="浮点数">浮点数</h3><ul><li><p>跟 C 语言一样,某些浮点数运算存在一定的精度损失.</p><ul><li>尽量避免使用浮点数运算.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span> / <span class="number">3</span> === <span class="number">1</span> - <span class="number">2</span> / <span class="number">3</span>);</span><br></pre></td></tr></table></figure></li><li><p>函数调用类似 Java</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="number">1</span> / <span class="number">3</span> - (<span class="number">1</span> - <span class="number">2</span> / <span class="number">3</span>)) &lt; <span class="number">0.00000001</span>;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="null-undefined">null &amp;&amp; undefined</h3><ul><li>null 定义了但是事空的</li><li>undefined 未定义的</li></ul><hr><h3 id="数组">数组</h3><ul><li><p>定义,跟 Java 异曲同工.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//保证代码的可读性，尽量使用[]</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="string">&quot;hello&quot;</span>, <span class="literal">null</span>, <span class="literal">true</span>];</span><br><span class="line"><span class="comment">//第二种定义方法</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="string">&quot;hello&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p>差别</p><ul><li>JavaScript 的数组内可以存放不同类型的数据.</li><li>数组越界报错 undefined</li></ul></li></ul><hr><h3 id="对象">对象</h3><ul><li><p>对象是大括号，数组是中括号</p></li><li><p>每个属性之间使用逗号隔开，最后一个属性不需要逗号</p></li><li><p>与 Java 相同,变量和对象名完全可以用中文(但是不建议).</p></li><li><p>定义</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Person person = new Person(1,2,3,4,5);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">tags</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;java&quot;</span>, <span class="string">&quot;web&quot;</span>, <span class="string">&quot;...&quot;</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>取值</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">person.name</span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript"><span class="string">&quot;Tom&quot;</span></span></span><br><span class="line"></span><br><span class="line">person.age</span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript"><span class="number">3</span></span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="严格检查模式">严格检查模式</h3><ul><li><p>js 里定义变量几种方法:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认全局变量(严禁这样写)</span></span><br><span class="line">i1 = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 全局变量(不建议写法,可能引发问题)</span></span><br><span class="line"><span class="keyword">var</span> i2 = <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 局部变量(建议)</span></span><br><span class="line"><span class="keyword">let</span> i3 = <span class="number">3</span>;</span><br></pre></td></tr></table></figure></li><li><p>严格检查</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="comment">//全局变量 (严格检查,会报错)</span></span><br><span class="line">i = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="字符串-3">字符串</h2><h3 id="转义字符">转义字符</h3><ul><li>(基本跟 Java 一样)</li></ul><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">\&#x27;</span></span><br><span class="line"><span class="string">\n</span></span><br><span class="line"><span class="string">\t</span></span><br><span class="line"><span class="string">\u4e2d</span>    <span class="string">\u***</span> Unicode字符</span><br><span class="line"><span class="string">\x41</span>Ascall字符</span><br></pre></td></tr></table></figure><hr><h3 id="多行字符串">多行字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//tab上面 esc下面</span></span><br><span class="line"><span class="keyword">var</span> msg = <span class="string">`hello</span></span><br><span class="line"><span class="string">            world</span></span><br><span class="line"><span class="string">            你好呀</span></span><br><span class="line"><span class="string">            nihao</span></span><br><span class="line"><span class="string">            `</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="模板字符串">模板字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;Tom&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">var</span> msg = <span class="string">`你好，<span class="subst">$&#123;name&#125;</span> + <span class="subst">$&#123;age&#125;</span>`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br></pre></td></tr></table></figure><hr><h3 id="函数调用">函数调用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">`123`</span>;</span><br><span class="line"><span class="comment">// str.函数名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 例如</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="property">length</span>); <span class="comment">//字符串长度 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">indexOf</span>(<span class="number">2</span>)); <span class="comment">//2的下标 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str[<span class="number">1</span>]); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><hr><h3 id="字符串的可变性">字符串的可变性</h3><ul><li>同 Java 的 String 对象,其本身不可变</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str[<span class="number">1</span>] <span class="operator">=</span> <span class="number">0</span><span class="comment">; // 这样会报错,因为字符串是read-only的.</span></span><br></pre></td></tr></table></figure><hr><h3 id="大小写转换">大小写转换</h3><ul><li>跟 Java 一样</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str.<span class="title function_">toUpperCase</span>();</span><br><span class="line">str.<span class="title function_">toLowerCase</span>();</span><br></pre></td></tr></table></figure><hr><h3 id="子串">子串</h3><ul><li><code>[)</code> 左闭右开区间</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">student.<span class="title function_">substring</span>(<span class="number">1</span>); <span class="comment">//从第一个字符串截取到最后一个字符串</span></span><br><span class="line">student.<span class="title function_">substring</span>(<span class="number">1</span>, <span class="number">3</span>); <span class="comment">//[1,3)</span></span><br></pre></td></tr></table></figure><hr><h2 id="数组-2">数组</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]; <span class="comment">//通过下标取值和赋值</span></span><br></pre></td></tr></table></figure><h3 id="长度">长度</h3><ul><li>支持动态扩容,扩出来的元素位置是 undefined,如果缩小 length 的话,超出部分元素会丢失.</li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">arr.length</span> = <span class="number">1</span><span class="comment">;</span></span><br><span class="line"><span class="attr">arr.length</span> = <span class="number">2</span><span class="comment">; // 扩容</span></span><br><span class="line"><span class="attr">arr.length</span> = <span class="number">0</span><span class="comment">; // 缩小</span></span><br></pre></td></tr></table></figure><hr><h3 id="indexOf">indexOf()</h3><ul><li>获取元素位置</li><li><code>1</code> 与 <code>&quot;1&quot;</code> 是不同元素.</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr.indexOf(<span class="number">1</span>)<span class="comment">;</span></span><br><span class="line">arr.indexOf(<span class="string">&quot;1&quot;</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure><hr><h3 id="slice">slice()</h3><ul><li>等同于 subString()</li><li>截取数组并返回子数组</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">arr = arr.<span class="title function_">slice</span>(<span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [ 2, 3, 4, 5 ]</span></span><br></pre></td></tr></table></figure><hr><h3 id="push-pop-unshift-shift">push(),pop(),unshift(),shift()</h3><ul><li>分别是尾部添加/删除,头部添加/删除.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">push</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [1, 2, 3, 4, 5, 6, &quot;a&quot;];</span></span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">pop</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [ 1, 2, 3, 4, 5, 6 ]</span></span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">unshift</span>(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [ &#x27;b&#x27;, 1, 2, 3, 4, 5, 6 ]</span></span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">shift</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [ 1, 2, 3, 4, 5, 6 ]</span></span><br></pre></td></tr></table></figure><hr><h3 id="reverse-sort">reverse(),sort()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">reverse</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [ 6, 5, 4, 3, 2, 1 ]</span></span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">sort</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [ 1, 2, 3, 4, 5, 6 ]</span></span><br></pre></td></tr></table></figure><hr><h3 id="concat">concat()</h3><ul><li>数组连接</li><li>并没有修改原来的数组,只是返回了一个新的数组.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>],</span><br><span class="line">  arr2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1.<span class="title function_">concat</span>(arr2)); <span class="comment">// [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, 1, 2, 3 ]</span></span><br></pre></td></tr></table></figure><hr><h3 id="join">join()</h3><ul><li>打印拼接数组，使用特定的字符串连接</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line">arr.<span class="title function_">join</span>(<span class="string">&quot;-&quot;</span>); <span class="comment">// 并无效果</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">join</span>(<span class="string">&quot;-&quot;</span>)); <span class="comment">// a-b-c</span></span><br></pre></td></tr></table></figure><hr><h3 id="多维数组">多维数组</h3><ul><li>没啥花活.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [</span><br><span class="line">  [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">arr; <span class="comment">// [ [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27; ], [ 1, 2, 3 ] ]</span></span><br></pre></td></tr></table></figure><hr><h3 id="fill">fill()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line">arr.<span class="property">length</span> = <span class="number">10</span>;</span><br><span class="line">arr.<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line">arr; <span class="comment">// [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ]</span></span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-22">借物表</h2><blockquote><p><a href="https://blog.csdn.net/pan_h1995/article/details/105974385">【狂神说 Java】JavaScript 学习笔记</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🟢CSS学习笔记-(二)</title>
      <link href="/post/Web/css/css-2/"/>
      <url>/post/Web/css/css-2/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2020-12-20 10:22:30 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:22:23 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Web\css\css-2.md * @Description: * @!: *********************************************************************--><ul><li><a href="#github-%E6%BA%90%E7%A0%81">GitHub 源码</a></li><li><a href="#%E6%B5%AE%E5%8A%A8">浮动</a><ul><li><a href="#%E5%85%83%E7%B4%A0%E5%B1%82%E7%BA%A7%E5%88%86%E7%B1%BB">元素层级分类</a></li><li><a href="#display">display</a></li><li><a href="#float">float</a></li><li><a href="#clear">Clear</a></li><li><a href="#overflow">Overflow</a></li><li><a href="#%E7%88%B6%E7%BA%A7%E8%BE%B9%E6%A1%86%E5%A1%8C%E9%99%B7%E9%97%AE%E9%A2%98">父级边框塌陷问题</a><ul><li><a href="#%E9%97%AE%E9%A2%98">问题</a></li><li><a href="#%E6%89%A9%E5%A4%A7%E7%88%B6%E7%BA%A7%E5%85%83%E7%B4%A0">扩大父级元素</a></li><li><a href="#%E5%A2%9E%E6%B7%BB%E7%A9%BA-div">增添空 div</a></li><li><a href="#%E8%87%AA%E5%8A%A8%E6%BA%A2%E5%87%BA">自动溢出</a></li><li><a href="#%E6%B7%BB%E5%8A%A0%E4%BC%AA%E7%B1%BB%E4%BC%98">添加伪类(优)</a></li><li><a href="#%E5%B0%8F%E7%BB%93">小结</a></li></ul></li></ul></li><li><a href="#%E5%AE%9A%E4%BD%8D">定位</a><ul><li><a href="#%E7%9B%B8%E5%AF%B9%E5%AE%9A%E4%BD%8D">相对定位</a></li><li><a href="#%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D">绝对定位</a></li><li><a href="#%E5%9B%BA%E5%AE%9A%E5%AE%9A%E4%BD%8D">固定定位</a></li><li><a href="#z-index">z-index</a></li></ul></li><li><a href="#%E5%8A%A8%E7%94%BB">动画</a></li><li><a href="#%E6%80%BB%E7%BB%93">总结</a></li></ul><h2 id="GitHub-源码-2"><a href="https://github.com/Weidows/Java/tree/master/Web/css">GitHub 源码</a></h2><h2 id="浮动">浮动</h2><h3 id="元素层级分类">元素层级分类</h3><ul><li><p>块级元素</p><ul><li>h1~h6(markdown 中不是 )</li><li>p</li><li>div</li><li>ui li</li></ul></li><li><p>行内元素</p><ul><li>span</li><li>a</li><li>img</li><li>strong</li></ul></li><li><p>块级元素可以包含行内元素,但反之不行.</p></li></ul><hr><h3 id="display">display</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      display</span></span><br><span class="line"><span class="comment">        block 块元素</span></span><br><span class="line"><span class="comment">        inline 行内元素</span></span><br><span class="line"><span class="comment">        inline-block 行内块元素</span></span><br><span class="line"><span class="comment">        none 不显示</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: inline;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>div块元素<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>span行内元素<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>效果图<br><img src="https://www.helloimg.com/images/2022/02/27/GVJRJm.png" alt="e2tclC5Vkqm1b74"></li></ul><hr><h3 id="float">float</h3><ul><li><p>float</p><ul><li>left</li><li>right</li></ul></li><li><p>浮动效果</p><ul><li>(可以让元素自动排版,但是可能会使结构错位塌陷)</li><li><code>在标准文档流之外.</code></li></ul></li><li><p><code>html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./style.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer01&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/3086109-ab66333e049109fc.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer02&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/3086109-e073f9a39c4bafe1.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer03&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/f0bcea9ca2acb59b4e97e3f9830d9c44.gif&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer04&quot;</span>&gt;</span></span><br><span class="line">        浮动的盒子可以向左浮动,也可以向右浮动,直到它的外边缘碰到外层边界.</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>style.css</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#father</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.layer01</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.layer02</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#00f</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.layer03</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#0f0</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.layer04</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#666</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">23px</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>效果图</p><p><img src="https://www.helloimg.com/images/2022/02/27/GV3L6b.png" alt="20201126004246"></p></li></ul><hr><h3 id="Clear">Clear</h3><ul><li>清除(左/右)浮动效果,使元素像是标准文档流一样向下排布(但是并不在标准文档流).</li><li>right</li><li>left</li><li>both 两侧</li><li>none 不清除</li><li>两边都不能有浮动元素(图四样式)<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.layer04</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="https://www.helloimg.com/images/2022/02/27/GVLps1.png" alt="20201205215331" /></li></ul><hr><h3 id="Overflow">Overflow</h3><ul><li>溢出</li><li>hidden 越界部分隐藏(使用多)</li><li>scroll 越界的话显示滚动条</li><li>auto</li></ul><hr><h3 id="父级边框塌陷问题">父级边框塌陷问题</h3><h4 id="问题-4">问题</h4><ul><li><p>问题就是内部的元素超出父级的边框(越界).</p></li><li><p>float 导致漂浮元素另成一层,即使 clear 也不按照标准文档流排布.</p></li><li><p>像是下面这种,父级的框圈不住子级 float 的元素.</p><img src="https://www.helloimg.com/images/2022/02/27/GVPCjr.png" alt="20201205221642" /></li><li><p>几种解决方案参下:</p></li></ul><hr><h4 id="扩大父级元素">扩大父级元素</h4><ul><li>简单粗暴,直接把父级元素拉大,但是很拉胯.</li></ul><hr><h4 id="增添空-div">增添空 div</h4><ul><li>在漂浮元素下面(一定要是下面)添加空 div,然后设置属性 clear.</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer01&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/3086109-ab66333e049109fc.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer02&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/3086109-e073f9a39c4bafe1.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer03&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/f0bcea9ca2acb59b4e97e3f9830d9c44.gif&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer04&quot;</span>&gt;</span></span><br><span class="line">    浮动的盒子可以向左浮动,也可以向右浮动,直到它的外边缘碰到外层边界.</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 方案二 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;clear&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 方案二 */</span></span><br><span class="line"><span class="selector-id">#clear</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>原理就是在箭头这里设置了没有边框的空元素,然后让它的两边都不能有 float 元素,所以父级的边框框住这个空 div 的同时也框住了 float 元素.</p><img src="https://www.helloimg.com/images/2022/02/27/GVPTrz.png" alt="ADVVKXK0V6MX4O0GI8BE03M" /><hr></li></ul><h4 id="自动溢出">自动溢出</h4><ul><li>在父类里添加 <code>overflow</code> 属性</li><li>(因为父级边框并没有设边界大小,所以其大小就是 div 可容纳的包括浮动内部元素的范围大小)</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#father</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>效果:<br><img src="https://www.helloimg.com/images/2022/02/27/GVSTCt.png" alt="20201206001209" /></p><hr></li></ul><h4 id="添加伪类-优">添加伪类(优)</h4><ul><li><p>此方法类似第二个添加空 div,就是利用伪类在父类后面添加空标签后 clear</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 方案四 */</span></span><br><span class="line"><span class="selector-id">#father</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li></ul><h4 id="小结">小结</h4><img src="https://www.helloimg.com/images/2022/02/27/GV4nUM.png" alt="20201206002751" /><hr><h2 id="定位">定位</h2><ul><li><code>position</code><ul><li>relative</li><li>absolute</li><li>fix</li></ul></li></ul><h3 id="相对定位">相对定位</h3><ul><li><code>position: relative;</code><ul><li>left</li><li>right</li><li>bottom</li><li>top</li></ul></li><li>注意偏移是相对那个边来说,而不是偏移向那个方向.</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#first</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="built_in">rgb</span>(<span class="number">172</span>, <span class="number">96</span>, <span class="number">96</span>);</span><br><span class="line">  <span class="attribute">position</span>: relative; <span class="comment">/* 相对定位 */</span></span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">20px</span>; <span class="comment">/* 向上偏移20px */</span></span><br><span class="line">  <span class="attribute">left</span>: <span class="number">20px</span>; <span class="comment">/* 向左偏移20px */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>元素仍在标准文档中,只不过相对原先位置做了偏移</p><ul><li><p>此元素的信息仍为原先位置的信息(呈现与数据不同)</p></li><li><p>比如这里偏移后父级边框框的仍然是先前位置的那个元素.</p><img src="https://www.helloimg.com/images/2022/02/27/GVSlHC.png" alt="20201218235557" /></li></ul></li><li><p>例子</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#box</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid currentColor;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: violet;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">line-height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: blue;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.a2</span>,<span class="selector-class">.a4</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: -<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.a5</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: -<span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;a1&quot;</span>&gt;</span>链接1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;a2&quot;</span>&gt;</span>链接2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;a3&quot;</span>&gt;</span>链接3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;a4&quot;</span>&gt;</span>链接4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;a5&quot;</span>&gt;</span>链接5<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="https://www.helloimg.com/images/2022/02/27/GVSPvz.png" alt="20201220001521" /></li></ul><hr><h3 id="绝对定位">绝对定位</h3><ul><li><p><code>position:absolute;</code></p></li><li><p>基于上下左右进行定位.</p><ul><li>父级元素没有定位时,是相对于浏览器进行定位.</li><li>父级元素定位时,是相对于父级元素进行定位.(会用到)</li></ul></li><li><p>在<code>父级范围内偏移</code>(超出父级的内容不会显示)</p></li><li><p>原来位置不会被保留,而且不在标准文档流中.</p><hr></li><li><p>例子</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#father</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#666</span>;</span><br><span class="line">  <span class="comment">/* 这里父级元素虽然用了相对定位了,但是并没动,子级元素用来作绝对定位. */</span></span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#first</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="built_in">rgb</span>(<span class="number">172</span>, <span class="number">96</span>, <span class="number">96</span>);</span><br><span class="line">  <span class="comment">/* 相对于父级元素左端定位 */</span></span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="固定定位">固定定位</h3><ul><li><p><code>position:fix;</code></p></li><li><p>把元素固定到浏览器某个位置不动.</p></li><li><p>例子</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">2000px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: tomato;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 绝对定位 */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: springgreen;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 固定定位 */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>div1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>div2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>绝对定位会随着页面滚动而移动,固定定位则不会.</p><img src="https://www.helloimg.com/images/2022/02/27/GV4IwK.png" alt="20201220093438" /></li></ul><hr><h3 id="z-index">z-index</h3><ul><li><p><code>z-index: 0;</code></p></li><li><p>默认是 0,最高无限,类似 PS 的图层堆叠效果.</p><ul><li>(只有使用定位效果的元素才有层级)</li></ul></li><li><p>例子</p><ul><li><p>HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css/index.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/1.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;tip-text&quot;</span>&gt;</span>Weidows-学习中...<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;tip-bg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>时间: 2020年12月20日09:51:29<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>地点: Hebau<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">720px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span>,</span><br><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 这个的目的是让下面的子元素相对这个父级元素定位 */</span></span><br><span class="line"><span class="selector-id">#content</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tip-text</span>,</span><br><span class="line"><span class="selector-class">.tip-bg</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tip-text</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: aqua;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tip-bg</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>样式</p><img src="https://www.helloimg.com/images/2022/02/27/GVLvoc.png" alt="20201220102125" /></li></ul></li></ul><hr><h2 id="动画">动画</h2><ul><li>css 一般只用来做小型动画或者渐变,复杂的一般用 JS.</li><li>稍作了解,需要的话网上找代码.</li></ul><hr><h2 id="总结">总结</h2><img src="https://www.helloimg.com/images/2022/02/27/GV3165.png" alt="20200507153758833" /><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>👌Hexo-SEO 搜索引擎优化</title>
      <link href="/post/Web/Node/Hexo/Hexo-SEO/"/>
      <url>/post/Web/Node/Hexo/Hexo-SEO/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2020-12-18 16:39:24 * @LastEditors: Weidows * @LastEditTime: 2021-09-10 15:04:46 * @FilePath: \Blog-private\source\_posts\Web\Node\Hexo\Hexo-SEO.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6">安装插件</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">配置文件</a></li><li><a href="#%E7%AB%99%E9%95%BF%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%AB%99">站长添加网站</a><ul><li><a href="#%E6%B3%A8%E6%84%8F">注意</a></li><li><a href="#hexo-%E6%A0%87%E7%AD%BE%E9%AA%8C%E8%AF%81%E7%BD%91%E7%AB%99">Hexo 标签验证网站</a></li></ul></li><li><a href="#%E6%B7%BB%E5%8A%A0%E7%AB%99%E7%82%B9%E5%9C%B0%E5%9B%BE">添加站点地图</a></li><li><a href="#%E6%B3%A8%E6%84%8F%E7%82%B9">注意点</a></li></ul><h2 id="安装插件-2">安装插件</h2><ul><li><p>分别是生成百度和谷歌站点地图的插件.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="配置文件-2">配置文件</h2><ul><li><p>根目录的<code>_config.yml</code>中添加以下:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br><span class="line"><span class="attr">baidusitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidusitemap.xml</span></span><br></pre></td></tr></table></figure></li><li><p>xml 文件存放路径看着来,一般放在网站根目录.</p></li><li><p>现在<code>hexo generate</code>就会出现<code>public/sitemap.xml 和 baidusitemap.xml</code></p><ul><li>sitemap.xml 样式如下:</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">urlset</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">loc</span>&gt;</span>https://weidows.github.io/post/Hexo/butterfly_modify/<span class="tag">&lt;/<span class="name">loc</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">lastmod</span>&gt;</span>2020-12-18<span class="tag">&lt;/<span class="name">lastmod</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">loc</span>&gt;</span>https://weidows.github.io/post/experience/markdown/<span class="tag">&lt;/<span class="name">loc</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">lastmod</span>&gt;</span>2020-12-14<span class="tag">&lt;/<span class="name">lastmod</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">loc</span>&gt;</span>https://weidows.github.io/post/backup/%E5%BF%AB%E6%8D%B7%E9%94%AE/<span class="tag">&lt;/<span class="name">loc</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">lastmod</span>&gt;</span>2020-12-12<span class="tag">&lt;/<span class="name">lastmod</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="站长添加网站">站长添加网站</h2><h3 id="注意">注意</h3><ul><li>因为 <code>Hexo</code> 会对 HTML 文件进行修改,所以<code>无法通过文件验证添加网站</code><ul><li>可以通过 HTML 标签方式,比较方便.</li></ul></li></ul><h3 id="Hexo-标签验证网站">Hexo 标签验证网站</h3><ul><li><p>我使用的是 Butterfly 主题,主体间会有所不同,定位如下文件:</p><ul><li>themes/butterfly/layout/includes/layout.pug</li></ul></li><li><p>在<code>body</code>行上方添加验证标签(注意需要转换成 pug 格式)</p><ul><li><a href="https://html2pug.com/">HTML=&gt;pug 格式转换</a></li></ul></li><li><p>添加之后如下:</p><img src="https://www.helloimg.com/images/2022/02/27/GV4iTg.png" alt="20201218170353" /></li><li><p>最后</p><ul><li>hexo generate</li><li>hexo deploy</li><li>page 部署才能验证</li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="添加站点地图">添加站点地图</h2><ul><li><p>百度</p><img src="https://www.helloimg.com/images/2022/02/27/GVAsbc.png" alt="20201218173033" /></li><li><p>谷歌简单,略.</p></li><li><p>另外</p><ul><li>百度添加 sitemap 后一直处于等待状态是正常的,别在意…</li><li>谷歌添加 sitemap 一般第一次会失败,删掉重新添加就好了(立即生效)</li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="注意点-2">注意点</h2><ul><li><p>不推荐文章目录使用: <code>&lt;h1&gt;</code> 标签也就是 <code>#</code></p><ul><li><p>多个一级标题对 SEO 不友好</p></li><li><p>建议使用 <code>&lt;h1&gt;</code> 也就是 <code>##</code></p></li></ul></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> Node </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> website </tag>
            
            <tag> hexo </tag>
            
            <tag> seo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>✨SSH远程连接.</title>
      <link href="/post/experience/SSH/"/>
      <url>/post/experience/SSH/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-12-07 00:12:52 * @LastEditors: Weidows * @LastEditTime: 2021-09-02 15:46:56 * @FilePath: \Blog-private\source\_posts\experience\SSH.md * @Description:--><ul><li><a href="#%E6%89%8B%E5%8A%A8%E6%8C%A1">手动挡</a><ul><li><a href="#%E7%94%9F%E6%88%90%E5%85%AC%E7%A7%81%E7%A7%98%E9%92%A5">生成公私秘钥</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E8%BF%9E%E9%80%9A">配置连通</a></li><li><a href="#%E6%B5%8B%E8%AF%95%E5%91%BD%E4%BB%A4">测试命令</a></li></ul></li><li><a href="#%E8%87%AA%E5%8A%A8%E6%8C%A1">自动挡</a><ul><li><a href="#finalshell">FinalShell</a></li><li><a href="#vscode-%E8%BF%9E%E6%8E%A5">VScode 连接</a></li></ul></li><li><a href="#%E5%AD%98%E5%9C%A8%E3%81%AE%E9%97%AE%E9%A2%98">存在の问题</a><ul><li><a href="#root-denied">root-denied</a></li><li><a href="#vscode-ssh-%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5">VScode-ssh-断开连接</a></li></ul></li><li><a href="#tcp-%E4%BF%9D%E6%B4%BB">TCP 保活</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="手动挡">手动挡</h2><h3 id="生成公私秘钥">生成公私秘钥</h3><ul><li><p>比如</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;utsuko27@qq.com&quot; -f ~/.ssh/Gitee_rsa</span><br></pre></td></tr></table></figure></li><li><p>生成后<code>.ssh/</code>文件夹下面就会出现两个文件</p><ul><li><code>Gitee_rsa</code> 私钥</li><li><code>Gitee_rsa.pub</code> 公钥</li></ul></li><li><p>通过<code>cd ~/.ssh</code>或者<code>cat ~/.ssh/Gitee_rsa.pub</code>的方式获取公钥</p><ul><li>一般.ssh 路径为<code>C:\Users\username\.ssh</code></li><li>把公钥复制到远程机上.</li></ul></li></ul><hr><h3 id="配置连通">配置连通</h3><ul><li><p>在.ssh 下新建<code>config</code>文件,参照以下模板:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gitee</span></span><br><span class="line">Host gitee.com</span><br><span class="line">HostName gitee.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~<span class="regexp">/.ssh/</span>Gitee_rsa</span><br></pre></td></tr></table></figure></li><li><p>多个 ssh 秘钥在这个 config 文件里配置.</p></li><li><p>如果不想让它确认输入 yes,可以在这个文件里加上一行:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">StrictHostKeyChecking</span> <span class="literal">no</span></span><br></pre></td></tr></table></figure></li><li><p>配置文件完成,现在应该是这样子:</p><img src="https://www.helloimg.com/images/2022/02/27/GVPqNQ.png" alt="20201207100813" /></li></ul><hr><h3 id="测试命令">测试命令</h3><ul><li><p>终端进入这个.ssh 文件夹(不在这个文件夹下无法导通)</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ssh</span> -T git<span class="variable">@gitee</span>.com</span><br></pre></td></tr></table></figure></li><li><p>出现<code>git@gitee.com: Permission denied (publickey).</code>,说明哪里没配置好出问题了.</p></li><li><p>出现<code>Hi Weidows! You've successfully authenticated, but GITEE.COM does not provide shell access.</code>说明配置好了.</p></li><li><p>测试完成,两机处于连通状态!</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="自动挡">自动挡</h2><h3 id="FinalShell">FinalShell</h3><ul><li><p>连接树莓派,ip 为<code>192.168.43.119</code>,用户名为<code>pi</code>,密码为默认的<code>raspberry</code></p><img src="https://www.helloimg.com/images/2022/02/27/GVPzcT.png" alt="20201203113101" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="VScode-连接">VScode 连接</h3><ul><li><p>安装插件<code>Remote-SSH</code></p><img src="https://www.helloimg.com/images/2022/02/27/GVmGiv.png" alt="20201204202003" /></li><li><p>安装后侧边栏出现<code>远程资源管理器</code>,然后点新建,出现下面东东~</p><img src="https://www.helloimg.com/images/2022/02/27/GVSxFh.png" alt="20210128005600" /></li><li><p>照着他的提示输入就行,比如我以<code>pi</code>用户登录,树莓派<code>内网ip</code>是<code>192.168.2.116</code>,那么应该输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh pi@192.168.2.116 -A</span><br></pre></td></tr></table></figure></li><li><p>打开 <code>ssh 配置文件</code>查看一下,可以自定义修改配置,如下.</p><ul><li>我把 Host 后面的名字改成了树莓派,其他没动.</li></ul><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host 树莓派</span><br><span class="line">  HostName <span class="number">192.168</span>.<span class="number">2.116</span></span><br><span class="line">  <span class="keyword">User</span> <span class="title">pi</span></span><br><span class="line">  ForwardAgent yes</span><br></pre></td></tr></table></figure></li><li><p>打开输入对应用户的密码就可以登录了.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="存在の问题">存在の问题</h2><h3 id="root-denied">root-denied</h3><ul><li>某些系统对 ssh 不开放 root,比如<code>Deepin</code>,网上有开放方法</li></ul><blockquote><p><a href="https://blog.csdn.net/weixin_42408060/article/details/102952986">深度（deepin）系统不能 ssh root 用户登录</a></p></blockquote><hr><h3 id="VScode-ssh-断开连接">VScode-ssh-断开连接</h3><ul><li><p>按照上面配合后使用完全没有问题,但是 ssh 连接后一段时间你没有跟远程机传输数据的话,连接就会断开</p></li><li><p>网上搜了一大顿,有些解决办法,比如<code>修改ssh_config</code>,<code>卸载Chinese插件</code>,<code>TCP保活</code>,<code>定时唤醒</code>等等…</p></li></ul><hr><ul><li><p>最终,我用二分法查出了问题所在:</p><img src="https://www.helloimg.com/images/2022/02/27/GVFWDS.png" alt="20210206124525" /></li><li><p>问题出自于一个叫<code>code time</code>的插件,它的<code>issue</code>里面也提了这个 bug,还没解决.</p><ul><li>可以用<code>wakatime</code>替代,这个插件没事.</li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="TCP-保活">TCP 保活</h2><ul><li><p>没特殊需求的话不需要配置.</p><blockquote><p><a href="https://blog.fdawei.club/2018/03/04/47759cbac5b96ea23e90e57200b84274/">SSH 连接保活</a></p></blockquote></li><li><p>在<code>~/.ssh/config</code>里添加如下:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ClientAliveInterval</span> <span class="number">10</span></span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>💥系统开发环境配置</title>
      <link href="/post/system/system_variable/"/>
      <url>/post/system/system_variable/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-12-04 11:38:58 * @LastEditors: Weidows * @LastEditTime: 2022-02-07 01:05:13 * @FilePath: \Blog-private\source\_posts\system\system_variable.md * @Description:--><ul><li><a href="#%E6%B7%B1%E5%85%A5%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">深入环境变量</a></li><li><a href="#scoop">Scoop</a></li><li><a href="#jdk">JDK</a></li><li><a href="#maven">Maven</a></li><li><a href="#git">Git</a></li><li><a href="#python">Python</a></li><li><a href="#nodejs">Node.js</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="深入环境变量">深入环境变量</h2><blockquote><p><a href="../%E6%B7%B1%E5%85%A5%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">🎇 深入解析 Window 环境变量.</a></p></blockquote><h2 id="Scoop">Scoop</h2><blockquote><p>详见<a href="../../tools/Scoop">🙌Windows 平台软件包管理器选择-Scoop</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="JDK">JDK</h2><blockquote><p>通过 Scoop 安装会自动设置</p></blockquote><ul><li><p>新建<code>JAVA_HOME</code>环境变量值</p><ul><li><code>D:\Game\Demo\AdoptOpenJDK\</code></li></ul></li><li><p>Path 里面添加</p><ul><li><code>%JAVA_HOME%\bin</code></li></ul></li><li><p>JDK 创建 jre: 进入 JDK 根目录管理员模式输入(正常 JDK 自带)</p><ul><li><code>bin\jlink.exe --module-path jmods --add-modules java.desktop --output jre</code></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Maven">Maven</h2><blockquote><p>内部修改耦合 <a href="../../tools/IDEA/Modification#maven">🎉IDEA 魔改记录.</a></p></blockquote><ul><li><p>环境变量: 用 Scoop 安装不需要手动配置!</p></li><li><p>检查</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -v</span><br></pre></td></tr></table></figure></li><li><p>VScode 中设置:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;java.configuration.maven.globalSettings&quot;</span><span class="punctuation">:</span> <span class="string">&quot;D:/Game/Scoop/persist/maven/conf/settings.xml&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li><li><p>IDEA 中设置也需要覆盖</p><img src="https://www.helloimg.com/images/2022/02/27/GVshlQ.png" alt="20210325105220" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Git">Git</h2><blockquote><p>用 Scoop 安装自带环境变量,不用配置.</p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Python-2">Python</h2><blockquote><p>通过 Scoop 安装会自动设置</p></blockquote><ul><li>Path 中+<figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="name">D</span>:\Game\Scoop\apps\python</span><br><span class="line"><span class="name">D</span>:\Game\Scoop\apps\python\Scripts\</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>建议通过 Anaconda 安装有关 Python 的所有编程环境.</p><blockquote><p><a href="../../others/python/anaconda">👍Anaconda-Python-水漂浅探池深浅.</a></p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Node-js">Node.js</h2><blockquote><p>详见<a href="../../Web/Node/node">⬆ Node.js 环境配置 &amp;&amp; 使用</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> python </tag>
            
            <tag> 操作系统 </tag>
            
            <tag> scoop </tag>
            
            <tag> maven </tag>
            
            <tag> git </tag>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>树莓派酱の吃灰日常.</title>
      <link href="/post/system/RaspberryPi/"/>
      <url>/post/system/RaspberryPi/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-12-03 10:44:06 * @LastEditors: Weidows * @LastEditTime: 2022-02-27 16:19:11 * @FilePath: \Blog-private\source\_posts\system\RaspberryPi.md * @Description:--><ul><li><a href="#%E6%97%A0%E5%B1%8F%E5%B9%95%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97">无屏幕操作指南</a></li><li><a href="#ssh-%E8%BF%9E%E6%8E%A5">SSH 连接</a></li><li><a href="#%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81">设置密码</a></li><li><a href="#%E6%A0%91%E8%8E%93%E6%B4%BE%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE">树莓派系统设置</a></li><li><a href="#vnc-%E8%BF%9E%E6%8E%A5">VNC 连接</a></li><li><a href="#screenfetch">Screenfetch</a></li><li><a href="#%E5%BD%A9%E8%89%B2%E7%81%AF%E5%B8%A6">彩色灯带</a><ul><li><a href="#%E7%A1%AC%E4%BB%B6%E8%BF%9E%E6%8E%A5">硬件连接</a></li><li><a href="#%E5%AE%89%E8%A3%85%E5%B7%A5%E5%85%B7%E9%93%BE">安装工具链</a></li><li><a href="#%E5%AE%89%E8%A3%85%E9%A9%B1%E5%8A%A8">安装驱动</a></li><li><a href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">修改配置文件</a></li><li><a href="#%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8C">测试运行</a></li><li><a href="#%E5%A2%9E%E5%BC%BA-%E9%9F%B3%E4%B9%90%E9%A2%91%E8%B0%B1">增强-音乐频谱</a><ul><li><a href="#%E8%A3%85%E7%8E%AF%E5%A2%83">装环境</a></li><li><a href="#%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8C-1">测试运行</a></li></ul></li><li><a href="#%E7%81%AF%E5%B8%A6%E6%A3%80%E6%B5%8B">灯带检测</a></li></ul></li><li><a href="#%E8%8A%B1%E6%A0%B7%E7%8E%A9%E6%B3%95">花样玩法</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="无屏幕操作指南">无屏幕操作指南</h2><ul><li><p>刚到手的树莓派裸机没屏幕和 Mini-HDMI 线,用 ssh 连接.</p></li><li><p>首先,用手机或者电脑开热点</p><ul><li>(注意 电脑的 5G 频段的可能无法连接)</li><li>我的树莓派 4B-4G 版这种方法连不上 电脑的 5G 频段的 WiFi,但是手机的热点可以.</li></ul></li><li><p>然后在桌面新建文件夹<code>树莓派</code>,存放今后需要的数据文件.</p><ul><li>新建文件命名为<code>ssh</code>,注意它没有后缀名和文件数据.</li><li>新建文件命名为 <code>wpa_supplicant.conf</code> ,文件数据如下:</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">country</span><span class="operator">=</span>GB</span><br><span class="line"></span><br><span class="line">ctrl_interface<span class="operator">=</span>DIR<span class="operator">=/</span>var/run/wpa_supplicant GROUP<span class="operator">=</span>netdev</span><br><span class="line"></span><br><span class="line">update_config<span class="operator">=</span><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">network</span><span class="operator">=</span>&#123;</span><br><span class="line"></span><br><span class="line">    ssid<span class="operator">=</span><span class="string">&quot;你的Wifi名称，注意大小写&quot;</span></span><br><span class="line"></span><br><span class="line">    psk<span class="operator">=</span><span class="string">&quot;你的Wifi密码&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><a href="https://github.com/Weidows/Programming-Configuration/tree/master/raspberryPi/boot">文件链接</a></p></blockquote><ul><li>预览</li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVAZaM.png" alt="20201203110651" /></li><li><p>用读卡器把树莓派系统 TF 卡插进电脑,把这两个文件复制进内存卡里名叫 <code>boot</code> 的盘符根目录里.</p></li><li><p>开鸡,等会应该就会发现电脑或者手机连接上了,如下:</p><img src="https://www.helloimg.com/images/2022/02/27/GV4wUh.png" alt="20201203110842" /><img src="https://www.helloimg.com/images/2022/02/27/GVEkEg.png" alt="Screenshot20201203112505" width="50%" /></li><li><p>然后就可以用 ssh 连接这个 IP 地址了.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="SSH-连接">SSH 连接</h2><ul><li><p>用 ssh 软件连接,我用的是 <code>FinalShell</code>与<code>VScode</code></p></li><li><p>连接三要素是<code>IP地址 + 用户名 + 密码</code></p></li><li><p>树莓派系统默认账号是 <code>pi</code>，密码是 <code>raspberry</code></p></li></ul><blockquote><p>可参照 <a href="../../experience/SSH#%E8%87%AA%E5%8A%A8%E6%8C%A1">✨SSH 远程连接.</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="设置密码">设置密码</h2><ul><li><p>连接成功后设置 root 账户密码</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo passwd root</span></span><br></pre></td></tr></table></figure></li><li><p>之后 <code>su root(切换到root用户)</code> 就需要密码验证了.</p></li><li><p>解锁用户密码设置</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd <span class="comment">--unlock root</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="树莓派系统设置">树莓派系统设置</h2><ul><li>(可在 ssh 中显示)<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo raspi-config</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="VNC-连接">VNC 连接</h2><ul><li>没屏幕或者没 Mini-HDMI 线时最佳方案.</li><li>首先<a href="https://www.realvnc.com/en/connect/download/viewer">下载 VNC 软件</a></li><li>安装后打开搜索树莓派的内网 ip,输入用户名连接<br><img src="https://www.helloimg.com/images/2022/02/27/GVLgiQ.png" alt="20201204103758" /><br><img src="https://www.helloimg.com/images/2022/02/27/GV4eUC.png" alt="20201204103843" /></li><li>OK.</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Screenfetch">Screenfetch</h2><ul><li>显示系统、主题信息<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt <span class="keyword">install </span><span class="keyword">screenfetch</span></span><br><span class="line"><span class="keyword"></span><span class="keyword">screenfetch</span></span><br></pre></td></tr></table></figure><blockquote><p>这里不用 Neofetch 是因为树莓派 Debian8 系统的 repo 地址需要更新,安装还需要其他操作,怪麻烦~</p></blockquote></li><li>显示 Linux 系统及版本信息,如下:<br><img src="https://www.helloimg.com/images/2022/02/27/GVSdqY.png" alt="20201205143342" /><br><img src="https://www.helloimg.com/images/2022/02/27/GVAC9X.png" alt="20201203115807" /></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="彩色灯带">彩色灯带</h2><h3 id="硬件连接">硬件连接</h3><p>本人用的 派 4B, WS2812B 型号灯带,分三根线(颜色可能并不一致,红黑绿白)</p><p>有能力的话可以改成杜邦母口,我没有,直接拿小刀豁开绝缘皮插的,也行</p><ul><li><p>这里只是做的临时序号,GPIO 并不是这么排的,<code>此处只用第一排</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">_____________________</span><br><span class="line">| 1 2 3 4 5 6 7 ....</span><br><span class="line">| 1 2 3 4 5 6 7 ....</span><br><span class="line">|</span><br><span class="line">|        CPU</span><br><span class="line">|</span><br><span class="line">_____________________</span><br></pre></td></tr></table></figure></li><li><p>接线</p><p>一般都有红线,+5V, 接 1</p><p>中间的线是信号线,接 6</p><p>另一根是 GND,接 3</p></li></ul><hr><h3 id="安装工具链">安装工具链</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt -y <span class="keyword">install </span><span class="keyword">scons </span><span class="keyword">swig</span></span><br></pre></td></tr></table></figure><h3 id="安装驱动">安装驱动</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 <span class="keyword">install</span> rpi_ws281x</span><br></pre></td></tr></table></figure><ul><li><p>很有可能并不能生效 (ModuleNotFoundError: No module named ‘rpi_ws281x’),需要下载编译源码</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/jgarff/</span>rpi_ws281x.git</span><br><span class="line">cd rpi_ws281x</span><br><span class="line">scons</span><br><span class="line">cd .<span class="regexp">/python/</span></span><br><span class="line">sudo python3 ./setup.py install</span><br></pre></td></tr></table></figure><hr><ul><li><p>上面不要这样写,会报错 : <s>sudo python ./python/setup.py install</s></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">running install</span><br><span class="line">running bdist_egg</span><br><span class="line">running egg_info</span><br><span class="line">creating rpi_ws281x.egg-info</span><br><span class="line">writing rpi_ws281x.egg-info/PKG-INFO</span><br><span class="line">writing top-level names <span class="keyword">to</span> rpi_ws281x.egg-info/top_level.txt</span><br><span class="line">writing dependency_links <span class="keyword">to</span> rpi_ws281x.egg-info/dependency_links.txt</span><br><span class="line">writing manifest <span class="keyword">file</span> <span class="string">&#x27;rpi_ws281x.egg-info/SOURCES.txt&#x27;</span></span><br><span class="line"><span class="keyword">file</span> neopixel.<span class="keyword">py</span> (<span class="keyword">for</span> module neopixel) not found</span><br><span class="line">reading manifest <span class="keyword">file</span> <span class="string">&#x27;rpi_ws281x.egg-info/SOURCES.txt&#x27;</span></span><br><span class="line">writing manifest <span class="keyword">file</span> <span class="string">&#x27;rpi_ws281x.egg-info/SOURCES.txt&#x27;</span></span><br><span class="line">installing library code <span class="keyword">to</span> build/bdist.linux-armv7l/egg</span><br><span class="line">running install_lib</span><br><span class="line">running build_py</span><br><span class="line"><span class="keyword">file</span> neopixel.<span class="keyword">py</span> (<span class="keyword">for</span> module neopixel) not found</span><br><span class="line"><span class="keyword">file</span> neopixel.<span class="keyword">py</span> (<span class="keyword">for</span> module neopixel) not found</span><br><span class="line">running build_ext</span><br><span class="line">building <span class="string">&#x27;_rpi_ws281x&#x27;</span> extension</span><br><span class="line">swigging rpi_ws281x.i <span class="keyword">to</span> rpi_ws281x_wrap.<span class="keyword">c</span></span><br><span class="line">swig -<span class="keyword">python</span> -<span class="keyword">o</span> rpi_ws281x_wrap.<span class="keyword">c</span> rpi_ws281x.i</span><br><span class="line">Unable <span class="keyword">to</span> <span class="keyword">find</span> <span class="keyword">file</span> <span class="string">&#x27;rpi_ws281x.i&#x27;</span>.</span><br><span class="line">error: <span class="keyword">command</span> <span class="string">&#x27;swig&#x27;</span> failed with <span class="keyword">exit</span> status <span class="number">1</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="修改配置文件">修改配置文件</h3><ul><li><p>用 nano/vim 或者 Kate 打开修改</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano .<span class="regexp">/examples/</span>strandtest.py</span><br></pre></td></tr></table></figure><p>需要改两处:</p><ol><li>依赖 import 处添加</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> neopixel <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure><ol start="2"><li>LED 灯珠数(根据灯带实际数量)</li></ol><hr></li><li><p>把这个文件复制出来 (不然不能运行)</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp .<span class="regexp">/examples/</span>strandtest.py .</span><br></pre></td></tr></table></figure></li></ul><h3 id="测试运行">测试运行</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="keyword">python3</span> ./strandtest.<span class="keyword">py</span></span><br></pre></td></tr></table></figure><ul><li><p>在公司第一次跑起来的样子</p><img src="https://www.helloimg.com/images/2022/02/27/GV3c6Y.png" alt="1632587136736" /></li></ul><hr><h3 id="增强-音乐频谱">增强-音乐频谱</h3><p>首先搞一下硬件: 树莓派没有板载输入声卡,<code>需要 USB 免驱声卡 + 3.5mm有线可录音耳机</code> (调查了一番没有替代方案)</p><p>可以去买一个拓展坞,有的会附带 (当时我都缺,正好可以一刀切)</p><h4 id="装环境">装环境</h4><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install portaudio19-<span class="built_in">dev</span> libatlas-base-<span class="built_in">dev</span></span><br><span class="line"><span class="comment">// 一定注意是pip3安装! 不是pip; 运行时也必须是 python3</span></span><br><span class="line">sudo pip3 install numpy scipy pyqtgraph pyaudio</span><br></pre></td></tr></table></figure><h4 id="测试运行-2">测试运行</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/scottlawsonbc/</span>audio-reactive-led-strip.git</span><br><span class="line">sudo python3 audio-reactive-led-strip<span class="regexp">/python/</span>visualization.py</span><br></pre></td></tr></table></figure><hr><h3 id="灯带检测">灯带检测</h3><p>灯带是否损坏可以一头接上+5V + GND, 在另一头短接试试</p><p>如果树莓派重启,则说明灯带电源没问题,要是不能亮的话就是信号线有问题或者电压不足</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="花样玩法">花样玩法</h2><ol start="0"><li>可以参考一下,防止吃灰</li><li>声控可视化乐谱</li><li>宝塔 Linux</li><li>旁路由器</li><li>作为双屏驱动器(需要一块触控屏幕)</li><li>硬件:无线键盘(鼠标不用了)\摄像头(或加指纹识别)\语音识别(+AI)</li><li>个人网站搭建</li><li>虚拟机/远程 docker</li><li>尝试多系统</li><li>OpenWrt</li><li>当梯子 NAT</li><li>文件服务器</li><li>内网穿透</li></ol><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 树莓派 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自用 &amp;&amp; 收藏的一些API</title>
      <link href="/post/Web/API/"/>
      <url>/post/Web/API/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:38:41 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Web\API.md--><ul><li><a href="#my-url-%E5%89%8D%E7%BC%80-gitee--github-%E6%97%81%E4%BA%BA%E6%B2%A1%E5%95%A5%E7%94%A8">My URL 前缀: Gitee &amp;&amp; GitHub (旁人没啥用…)</a><ul><li><a href="#gitee">Gitee</a></li><li><a href="#jsdelivr">JsDelivr</a></li><li><a href="#github">GitHub</a></li></ul></li><li><a href="#%E6%A8%AA%E5%B1%8F-api">横屏 API</a><ul><li><a href="#%E5%BF%85%E5%BA%94%E5%A3%81%E7%BA%B8">必应壁纸</a></li><li><a href="#%E9%A3%8E%E6%99%AF%E5%9B%BE">风景图</a></li><li><a href="#%E4%BA%8C%E6%AC%A1%E5%85%83-coser">二次元 coser</a></li><li><a href="#%E5%B0%8F%E5%BF%83%E8%BA%AB%E4%BD%93-%E6%8E%A8%E5%A5%B3%E9%83%8E">小心身体-推女郎</a></li></ul></li><li><a href="#%E7%AB%96%E5%B1%8F">竖屏</a><ul><li><a href="#%E4%BA%8C%E5%88%BA%E8%9E%88%E6%B6%A9%E5%9B%BE">二刺螈涩图</a></li></ul></li><li><a href="#%E6%9C%AA%E7%9F%A5%E5%9B%BE">未知图</a></li><li><a href="#%E5%9C%A8%E7%BA%BF%E7%94%9F%E6%88%90%E4%BA%8C%E7%BB%B4%E7%A0%81">在线生成二维码</a><ul><li><a href="#%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E5%8F%AF%E4%BD%BF%E7%94%A8-https">百度网盘(可使用 https)</a></li><li><a href="#iclick-%E6%8E%A5%E5%8F%A3-%E6%97%A0-https">iClick 接口 (无 https)</a></li><li><a href="#jiathis-%E6%8E%A5%E5%8F%A3%E6%97%A0-https">JiaThis 接口(无 https)</a></li><li><a href="#%E8%81%94%E5%9B%BE%E7%BD%91%E6%97%A0-https">联图网(无 https)</a></li><li><a href="#k780-%E6%95%B0%E6%8D%AE%E7%BD%91%E6%94%AF%E6%8C%81-https-%E5%92%8C-http">K780 数据网(支持 https 和 http)</a></li><li><a href="#qr-code-generatorhttps-%E6%8E%A5%E5%8F%A3">QR Code Generator(https 接口)</a></li></ul></li><li><a href="#%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E8%B7%9F%E9%9A%8F%E7%89%B9%E6%95%88-js">鼠标点击/跟随特效 js</a><ul><li><a href="#%E5%B0%8F%E5%BF%83%E5%BF%83%E7%89%B9%E6%95%88">小心心特效</a></li><li><a href="#%E7%A4%BE%E4%BC%9A%E4%B8%BB%E4%B9%89%E6%A0%B8%E5%BF%83%E4%BB%B7%E5%80%BC%E8%A7%82">社会主义核心价值观</a></li><li><a href="#%E8%8A%B1%E8%8A%B1%E7%89%B9%E6%95%88">花花特效</a></li><li><a href="#%E8%B7%9F%E9%9A%8F%E7%89%B9%E6%95%88">跟随特效</a></li></ul></li><li><a href="#%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5%E6%88%AA%E5%9B%BE">获取网页截图</a></li><li><a href="#%E8%8E%B7%E5%8F%96%E5%8C%BA%E5%9F%9F%E6%97%B6%E9%97%B4">获取区域时间</a></li></ul><h2 id="My-URL-前缀-Gitee-GitHub-旁人没啥用…">My URL 前缀: Gitee &amp;&amp; GitHub (旁人没啥用…)</h2><h3 id="Gitee">Gitee</h3><ul><li>图/文件: <code>https://gitee.com/Weidows/Weidows/raw/master/Website/public</code></li><li>链接: <code>https://gitee.com/Weidows/Weidows/blob/master</code></li><li>博客: <code>https://weidows.gitee.io</code></li></ul><h3 id="JsDelivr">JsDelivr</h3><ul><li>GitHub 图床 CDN: <code>https://fastly.jsdelivr.net/gh/Weidows/Images/</code></li></ul><h3 id="GitHub">GitHub</h3><ul><li>链接: <code>https://github.com/Weidows/Weidows/tree/master</code></li><li>图片: <code>https://raw.githubusercontent.com/Weidows/Weidows.github.io/master/</code></li><li>GitHub Chart API: <code>http://ghchart.rshah.org/409ba5/Weidows</code><ul><li>其中<code>/409ba5/</code>是颜色的十六进制表示,#409ba5(使格子颜色变为蓝色)如下图<br><img src="http://ghchart.rshah.org/409ba5/Weidows" alt="GitHub Chart"></li></ul></li></ul><hr><h2 id="横屏-API">横屏 API</h2><h3 id="必应壁纸">必应壁纸</h3><ul><li>一位大佬写的接口,必应返回图片需要用户数据授权,URL 不固定,所以这个大佬当中介做了个 PHP 接口.<br><code>http://fly.atlinker.cn/api/bing/1920.php</code><br><img src="http://fly.atlinker.cn/api/bing/1920.php" alt=""></li></ul><hr><ul><li>必应官方 API</li></ul><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cn.bing.com/HPImageArchive.aspx?<span class="keyword">format</span>=js<span class="variable">&amp;idx</span>=0<span class="variable">&amp;n</span>=1<span class="variable">&amp;mkt</span>=zh-CN</span><br></pre></td></tr></table></figure><ul><li>返回数据参下,需要浏览器处理才可呈现图像.</li></ul><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;images&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;startdate&quot;</span>: <span class="string">&quot;20201201&quot;</span>,</span><br><span class="line">      <span class="string">&quot;fullstartdate&quot;</span>: <span class="string">&quot;202012011600&quot;</span>,</span><br><span class="line">      <span class="string">&quot;enddate&quot;</span>: <span class="string">&quot;20201202&quot;</span>,</span><br><span class="line">      <span class="string">&quot;url&quot;</span>: <span class="string">&quot;/th?id=OHR.PorcupineBay_ZH-CN2252758146_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp&quot;</span>,</span><br><span class="line">      <span class="string">&quot;urlbase&quot;</span>: <span class="string">&quot;/th?id=OHR.PorcupineBay_ZH-CN2252758146&quot;</span>,</span><br><span class="line">      <span class="string">&quot;copyright&quot;</span>: <span class="string">&quot;基奈峡湾国家公园的尖顶湾，阿拉斯加 (© Sekar B/Shutterstock)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;copyrightlink&quot;</span>: <span class="string">&quot;https://www.bing.com/search?q=%E5%9F%BA%E5%A5%88%E5%B3%A1%E6%B9%BE%E5%9B%BD%E5%AE%B6%E5%85%AC%E5%9B%AD&amp;form=hpcapt&amp;mkt=zh-cn&quot;</span>,</span><br><span class="line">      <span class="string">&quot;title&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;quiz&quot;</span>: <span class="string">&quot;/search?q=Bing+homepage+quiz&amp;filters=WQOskey:%22HPQuiz_20201201_PorcupineBay%22&amp;FORM=HPQUIZ&quot;</span>,</span><br><span class="line">      <span class="string">&quot;wp&quot;</span>: true,</span><br><span class="line">      <span class="string">&quot;hsh&quot;</span>: <span class="string">&quot;4b729291a1259dbc3355d68efe6de423&quot;</span>,</span><br><span class="line">      <span class="string">&quot;drk&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;top&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;bot&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;hs&quot;</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;tooltips&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;loading&quot;</span>: <span class="string">&quot;正在加载...&quot;</span>,</span><br><span class="line">    <span class="string">&quot;previous&quot;</span>: <span class="string">&quot;上一个图像&quot;</span>,</span><br><span class="line">    <span class="string">&quot;next&quot;</span>: <span class="string">&quot;下一个图像&quot;</span>,</span><br><span class="line">    <span class="string">&quot;walle&quot;</span>: <span class="string">&quot;此图片不能下载用作壁纸。&quot;</span>,</span><br><span class="line">    <span class="string">&quot;walls&quot;</span>: <span class="string">&quot;下载今日美图。仅限用作桌面壁纸。&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cn.bing.com/HPImageArchive.aspx?format=js&amp;idx=0&amp;n=1&amp;mkt=zh-CN" alt=""></p><hr><h3 id="风景图">风景图</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">api.ixiaowai.cn<span class="regexp">/gqapi/g</span>qapi.php</span><br></pre></td></tr></table></figure><h3 id="二次元-coser">二次元 coser</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//u</span>ploadbeta.com<span class="regexp">/api/</span>pictures<span class="regexp">/random/</span>?key=二次元</span><br><span class="line">https:<span class="regexp">//u</span>ploadbeta.com<span class="regexp">/api/</span>pictures<span class="regexp">/random/</span>?key=动漫</span><br></pre></td></tr></table></figure><h3 id="小心身体-推女郎">小心身体-推女郎</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//u</span>ploadbeta.com<span class="regexp">/api/</span>pictures<span class="regexp">/random/</span>?key=推女郎</span><br></pre></td></tr></table></figure><hr><h2 id="竖屏">竖屏</h2><h3 id="二刺螈涩图">二刺螈涩图</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>setu.awsl.ee/setu</span><br></pre></td></tr></table></figure><hr><!-- TODO --><h2 id="未知图">未知图</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">风景随机图：http:<span class="regexp">//</span>pic.tsmp4.net<span class="regexp">/api/</span>fengjing/img.php</span><br><span class="line">女神随机图：http:<span class="regexp">//</span>pic.tsmp4.net<span class="regexp">/api/</span>nvsheng/img.php</span><br><span class="line">影视随机图：http:<span class="regexp">//</span>pic.tsmp4.net<span class="regexp">/api/yi</span>ngshi/img.php</span><br><span class="line">二次元随机图：http:<span class="regexp">//</span>pic.tsmp4.net<span class="regexp">/api/</span>erciyuan/img.php</span><br><span class="line">二次元随机图:http:<span class="regexp">//</span>www.dmoe.cc/random.php</span><br></pre></td></tr></table></figure><hr><h2 id="在线生成二维码">在线生成二维码</h2><h3 id="百度网盘-可使用-https">百度网盘(可使用 https)</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>pan.baidu.com<span class="regexp">/share/</span>qrcode?w=<span class="number">150</span>&amp;h=<span class="number">150</span>&amp;url=</span><br></pre></td></tr></table></figure><h3 id="iClick-接口-无-https">iClick 接口 (无 https)</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>bshare.optimix.asia/barCode?site=weixin&amp;url=</span><br></pre></td></tr></table></figure><h3 id="JiaThis-接口-无-https">JiaThis 接口(无 https)</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>s.jiathis.com/qrcode.php?url=</span><br></pre></td></tr></table></figure><h3 id="联图网-无-https">联图网(无 https)</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>qr.liantu.com/api.php?text=</span><br></pre></td></tr></table></figure><h3 id="K780-数据网-支持-https-和-http">K780 数据网(支持 https 和 http)</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>api.k780.com:<span class="number">88</span>/?app=qr.get&amp;data=</span><br></pre></td></tr></table></figure><h3 id="QR-Code-Generator-https-接口">QR Code Generator(https 接口)</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>api.qrserver.com<span class="regexp">/v1/</span>create-qr-code/?size=<span class="number">150</span>x150&amp;data=</span><br></pre></td></tr></table></figure><hr><h2 id="鼠标点击-跟随特效-js">鼠标点击/跟随特效 js</h2><h3 id="小心心特效">小心心特效</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>fastly.jsdelivr.net<span class="regexp">/gh/</span>Sanarous<span class="regexp">/files@1.151/</span>js/clicklove.js</span><br></pre></td></tr></table></figure><h3 id="社会主义核心价值观">社会主义核心价值观</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>fastly.jsdelivr.net<span class="regexp">/gh/</span>Sanarous<span class="regexp">/files@1.151/</span>js/clicksocialvalue.js</span><br></pre></td></tr></table></figure><h3 id="花花特效">花花特效</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>fastly.jsdelivr.net<span class="regexp">/gh/</span>Sanarous<span class="regexp">/files@1.151/</span>js/click.min.js</span><br></pre></td></tr></table></figure><h3 id="跟随特效">跟随特效</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>fastly.jsdelivr.net<span class="regexp">/gh/</span>sviptzk<span class="regexp">/HexoStaticFile@latest/</span>Hexo<span class="regexp">/js/m</span>ouse_snow.min.js</span><br></pre></td></tr></table></figure><hr><h2 id="获取网页截图">获取网页截图</h2><ul><li>链接<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//im</span>age.thum.io<span class="regexp">/get/</span>width<span class="regexp">/1024/</span>crop<span class="regexp">/768/</span>https:<span class="regexp">//gi</span>thub.com/Weidows</span><br></pre></td></tr></table></figure></li><li>展示<br><img src="https://image.thum.io/get/width/1024/crop/768/https://github.com/Weidows" alt=""></li></ul><hr><h2 id="获取区域时间">获取区域时间</h2><ul><li>time.js<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>time.is</span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> api </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😵青年大学习跳过学习视频</title>
      <link href="/post/others/TeenagersLearning/"/>
      <url>/post/others/TeenagersLearning/</url>
      
        <content type="html"><![CDATA[<h1>青年大学习跳过学习视频</h1><!-- * @Author: Weidows * @Date: 2020-11-30 17:50:20 * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:43:05 * @FilePath: \Blog-private\source\_posts\others\TeenagersLearning.md * @Description:青年大学习--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E9%9D%92%E5%B9%B4%E5%A4%A7%E5%AD%A6%E4%B9%A0%E8%B7%B3%E8%BF%87%E5%AD%A6%E4%B9%A0%E8%A7%86%E9%A2%91">青年大学习跳过学习视频</a><ul><li><a href="#%E5%89%8D%E8%A8%80">前言</a></li><li><a href="#debugx5-%E6%B3%95">debugx5-法</a><ul><li><a href="#%E5%AE%89%E8%A3%85%E6%A0%B8%E5%BF%83">安装核心</a></li><li><a href="#%E8%BF%9B%E5%85%A5%E8%A7%86%E9%A2%91">进入视频</a></li></ul></li><li><a href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%A7%E6%B3%95">浏览器大法</a><ul><li><a href="#%E5%B7%B2%E5%A4%B1%E6%95%88">已失效</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><h2 id="前言-3">前言</h2><ul><li><p>只是可以跳过视频播放,题还是需要自己做</p><p>(瞎点就行反正就只要个截图,不计成绩)</p></li><li><p>复制保存好下面的代码段,或者收藏网址,免得丢失下次不知道怎么做</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="debugx5-法">debugx5-法</h2><p>debugx5 对于微信 8.0.16 后的版本失效了(2022.2) <sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p><p>但是还是有骚方法让它起死回生:</p><style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style><div class="bbplayer"><iframe class="bbplayer" id="mmedia-zNgBlWJVjnpNJHbH" src="https://player.bilibili.com/player.html?bvid=BV1tP4y1u7ZX&page=1&high_quality=1&danmaku=true" allowfullscreen="allowfullscreen" scrolling="no" border="0" frameborder="0" framespacing="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe></div><script> document.getElementById("mmedia-zNgBlWJVjnpNJHbH").style.height=document.getElementById("mmedia-zNgBlWJVjnpNJHbH").scrollWidth*0.76+"px";    window.onresize = function(){      document.getElementById("mmedia-zNgBlWJVjnpNJHbH").style.height=document.getElementById("mmedia-zNgBlWJVjnpNJHbH").scrollWidth*0.76+"px";    }; </script><h3 id="安装核心">安装核心</h3><ol><li><p>视频中给出了 <code>tbs.apk</code>, 下载+移动到 <code>/sdcard/Android/data/com.tencent.mm/files/tbs/</code></p><p>有可能略有不同,有的是: <code>/storage/emulated/0/Android/data/com.tencent.mm/files/tbs/</code></p></li><li><p>随便找个人/群给他发下面这段代码:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">debugmm.qq.com/?forcex5=true;</span><br><span class="line"></span><br><span class="line">http:<span class="regexp">//</span>debugtbs.qq.com</span><br><span class="line"></span><br><span class="line">http:<span class="regexp">//</span>debugx5.qq.com</span><br></pre></td></tr></table></figure><p><img src="https://www.helloimg.com/images/2022/02/27/GVJiZv.png" alt="Screenshot20201130175729"></p></li><li><p>然后从上到下把链接点开一下(<code>点开然后关掉</code>就行)</p><p>第三个链接需要打开一个东西,如下:</p><p><img src="https://www.helloimg.com/images/2022/02/27/GVJxyo.png" alt="Screenshot20201130184015"></p></li><li><p>安装完成!</p></li></ol><hr><h3 id="进入视频">进入视频</h3><ul><li><p><code>照常打开学习视频</code>,右下角会出现上面图中那个<code>小绿格</code></p><blockquote><p>那就说明你成功了! 如果没成的话再重新试试.</p></blockquote></li><li><p>点开<code>小绿格vConsole</code>,输入下面指令:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(<span class="string">&#x27;Bvideo&#x27;</span>).<span class="attribute">currentTime</span>=1000;</span><br></pre></td></tr></table></figure><p><img src="https://www.helloimg.com/images/2022/02/27/GVJ5LA.png" alt="Screenshot20201130185325"></p></li><li><p>点 ok</p><p>没了,如果答完题还有视频的话,再输一遍这命令 ok 一下</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="浏览器大法">浏览器大法</h2><h3 id="已失效">已失效</h3><style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style><div class="bbplayer"><iframe class="bbplayer" id="mmedia-ebhhGuLuAIYMgwMu" src="https://player.bilibili.com/player.html?bvid=BV1Ba411h7HJ&page=1&high_quality=1&danmaku=true" allowfullscreen="allowfullscreen" scrolling="no" border="0" frameborder="0" framespacing="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe></div><script> document.getElementById("mmedia-ebhhGuLuAIYMgwMu").style.height=document.getElementById("mmedia-ebhhGuLuAIYMgwMu").scrollWidth*0.76+"px";    window.onresize = function(){      document.getElementById("mmedia-ebhhGuLuAIYMgwMu").style.height=document.getElementById("mmedia-ebhhGuLuAIYMgwMu").scrollWidth*0.76+"px";    }; </script><p>新版本微信可用,需要有一个可以拖动进度条的浏览器 (比如 QQ 浏览器, Edge 浏览器不行)</p><p>浏览器拖动看完后能计入学习记录</p><ol><li>在微信进入学习视频</li><li>右上角 -&gt; 在浏览器打开</li><li>拖条</li><li>截图走人</li></ol><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-10">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://developers.weixin.qq.com/community/develop/doc/00064efd0a472086dc5d3e44e5ac00">微信更新后无法打开 debug</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😶‍🌫️Markdown-中一些新奇写法.</title>
      <link href="/post/others/markdown/markdown/"/>
      <url>/post/others/markdown/markdown/</url>
      
        <content type="html"><![CDATA[<h1>Markdown-中一些新奇写法.</h1><!-- * @Author: Weidows * @Date: 2020-11-30 00:09:37 * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:47:48 * @FilePath: \Blog-private\source\_posts\others\markdown\markdown.md * @Description:--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#markdown-%E4%B8%AD%E4%B8%80%E4%BA%9B%E6%96%B0%E5%A5%87%E5%86%99%E6%B3%95">Markdown-中一些新奇写法.</a><ul><li><a href="#%E6%B3%A8%E6%84%8F%E7%82%B9">注意点</a></li><li><a href="#%E5%9F%BA%E6%9C%AC%E7%9A%84">基本的</a></li><li><a href="#%E6%96%B0%E5%A5%87%E5%86%99%E6%B3%95">新奇写法</a><ul><li><a href="#"><code>![]()</code></a></li><li><a href="#-url"><code>[]: URL</code></a></li><li><a href="#%E5%AF%B9%E8%AF%9D">对话</a></li><li><a href="#%E5%BC%95%E7%94%A8%E6%9D%A1%E7%9B%AE">引用+条目</a></li><li><a href="#%E5%A4%9A%E8%A1%8C%E5%BC%95%E7%94%A8">多行引用</a></li><li><a href="#%E5%B7%A8%E5%8F%B7%E5%AD%97%E4%BD%93">巨号字体</a></li></ul></li><li><a href="#%E6%96%87%E5%AD%97%E6%A0%B7%E5%BC%8F">文字样式</a></li><li><a href="#html-%E6%A0%87%E7%AD%BE">HTML 标签</a><ul><li><a href="#%E6%94%B6%E7%BC%A9%E6%A1%86">收缩框</a></li><li><a href="#%E4%B8%8B%E5%88%92%E7%BA%BF">下划线</a></li><li><a href="#%E9%94%AE%E7%9B%98%E6%A0%B7%E5%BC%8F">键盘样式</a></li><li><a href="#%E6%96%87%E5%AD%97%E9%81%AE%E7%9B%96">文字遮盖</a></li><li><a href="#%E8%AE%BA%E6%96%87%E8%84%9A%E6%B3%A8">论文脚注</a></li><li><a href="#%E4%B8%AD%E8%8B%B1%E6%96%87%E5%88%87%E6%8D%A2">中英文切换</a></li><li><a href="#markdown-%E8%A1%A8%E6%A0%BC%E5%86%85%E6%8D%A2%E8%A1%8C">markdown-表格内换行</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><h2 id="注意点">注意点</h2><ol><li><p>markdown 文件写的超过 1K 行后,每次格式化/页面加载的性能损耗是恐怖的,而且不利于观看,所以尽量控制 markdown 行数别太多 (我是超过 500~600 行会分页)</p></li><li><p>不同平台对 markdown 渲染不同,有可能会产生格式不对称问题. (例如 GitHub / Gitee / CSDN 对 README 渲染就不一样)</p></li><li><p>严格统一格式,不然以后重构时复杂度极其之高,甚至比写的时候还难; <code>食之无味,弃之可惜</code></p></li></ol><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="基本的">基本的</h2><ul><li><p><code>&gt; 内容</code></p><ul><li>展示:</li></ul><blockquote><p>在这里做个展示.</p></blockquote></li></ul><hr><ul><li><p><code>- ### 内容</code></p><ul><li><p>段落形式的标题,如下</p></li><li><h4 id="这是一个段落标题-h3-字号">这是一个段落标题,h3 字号</h4></li></ul></li></ul><hr><ul><li><p>模拟 console 输出</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">```console</span><br><span class="line">╰─ ls</span><br><span class="line">        Directory: D:\Repo\Weidows\Blog-<span class="keyword">private</span></span><br><span class="line"></span><br><span class="line">Mode                LastWriteTime         Length Name</span><br><span class="line">----                -------------         ------ ----</span><br><span class="line">d----         <span class="number">2021</span><span class="regexp">/2/</span><span class="number">13</span>     <span class="number">16</span>:<span class="number">16</span>                  .github</span><br><span class="line">d----        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">21</span>     <span class="number">14</span>:<span class="number">32</span>                  .vscode</span><br><span class="line">d----        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">25</span>      <span class="number">0</span>:<span class="number">30</span>                  node_modules</span><br><span class="line">d----        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">30</span>     <span class="number">14</span>:<span class="number">45</span>                  Others</span><br><span class="line">d----        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">26</span>     <span class="number">21</span>:<span class="number">00</span>                  out</span><br><span class="line">d----        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">25</span>      <span class="number">0</span>:<span class="number">17</span>                  <span class="keyword">public</span></span><br><span class="line">d----         <span class="number">2021</span><span class="regexp">/5/</span><span class="number">23</span>      <span class="number">0</span>:<span class="number">07</span>                  scaffolds</span><br><span class="line">d----         <span class="number">2021</span><span class="regexp">/11/</span><span class="number">6</span>     <span class="number">10</span>:<span class="number">33</span>                  <span class="keyword">source</span></span><br><span class="line">d----        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">25</span>      <span class="number">9</span>:<span class="number">46</span>                  themes</span><br><span class="line">-a---        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">24</span>     <span class="number">16</span>:<span class="number">04</span>           <span class="number">8324</span>   _config.yml</span><br><span class="line">-a---        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">25</span>      <span class="number">0</span>:<span class="number">28</span>             <span class="number">87</span>   .gitignore</span><br><span class="line">-a---        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">25</span>      <span class="number">9</span>:<span class="number">46</span>            <span class="number">436</span>   .gitmodules</span><br><span class="line">-a---        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">25</span>      <span class="number">0</span>:<span class="number">19</span>       <span class="number">55039465</span>   db.json</span><br><span class="line">-a---         <span class="number">2020</span><span class="regexp">/9/</span><span class="number">16</span>     <span class="number">23</span>:<span class="number">32</span>          <span class="number">35184</span>   LICENSE</span><br><span class="line">-a---        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">25</span>      <span class="number">0</span>:<span class="number">30</span>         <span class="number">544859</span>   <span class="keyword">package</span>-lock.json</span><br><span class="line">-a---        <span class="number">2021</span><span class="regexp">/11/</span><span class="number">25</span>      <span class="number">0</span>:<span class="number">09</span>           <span class="number">1168</span>   <span class="keyword">package</span>.json</span><br><span class="line">```</span><br></pre></td></tr></table></figure><p>样式:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">╰─ ls</span><br><span class="line">        Directory: D:\Repo\Weidows\Blog-private</span><br><span class="line"></span><br><span class="line">Mode                LastWriteTime         Length Name</span><br><span class="line">----                -------------         ------ ----</span><br><span class="line">d----         2021/2/13     16:16                  .github</span><br><span class="line">d----        2021/11/21     14:32                  .vscode</span><br><span class="line">d----        2021/11/25      0:30                  node_modules</span><br><span class="line">d----        2021/11/30     14:45                  Others</span><br><span class="line">d----        2021/11/26     21:00                  out</span><br><span class="line">d----        2021/11/25      0:17                  public</span><br><span class="line">d----         2021/5/23      0:07                  scaffolds</span><br><span class="line">d----         2021/11/6     10:33                  source</span><br><span class="line">d----        2021/11/25      9:46                  themes</span><br><span class="line">-a---        2021/11/24     16:04           8324   _config.yml</span><br><span class="line">-a---        2021/11/25      0:28             87   .gitignore</span><br><span class="line">-a---        2021/11/25      9:46            436   .gitmodules</span><br><span class="line">-a---        2021/11/25      0:19       55039465   db.json</span><br><span class="line">-a---         2020/9/16     23:32          35184   LICENSE</span><br><span class="line">-a---        2021/11/25      0:30         544859   package-lock.json</span><br><span class="line">-a---        2021/11/25      0:09           1168   package.json</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="新奇写法">新奇写法</h2><h3 id=""><code>[![]()]()</code></h3><ul><li><p>这样写是把图片嵌套进了链接里,如下:</p><p><a href="https://www.helloimg.com/images/2022/02/27/GVENOC.png"><img src="https://www.helloimg.com/images/2022/02/27/GVENOC.png" alt="图片"></a></p></li><li><p>本来只是展示图片,现在点击图片跳转了.</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">![图片</span>](<span class="link">https://www.helloimg.com/images/2022/02/27/GVENOC.png</span>)](<span class="link">https://www.helloimg.com/images/2022/02/27/GVENOC.png</span>)</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="URL-2"><code>[]: URL</code></h3><ul><li><p>类似定义变量(引用)</p></li><li><p>上面指定,下面可以引用.</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">github-shield</span>]: <span class="link">https://img.shields.io/github/stars/Weidows/vscode-weidows-theme?style=social</span></span><br><span class="line">[<span class="symbol">github-url</span>]: <span class="link">https://github.com/Weidows/vscode-weidows-theme</span></span><br><span class="line">[<span class="symbol">vscode-shield</span>]: <span class="link">https://img.shields.io/visual-studio-marketplace/r/TabNine.tabnine-vscode?logo=visual-studio-code&amp;style=social</span></span><br><span class="line">[<span class="symbol">vscode-url</span>]: <span class="link">https://bit.ly/3pqj7o2</span></span><br><span class="line"></span><br><span class="line">[<span class="string">![Github Repo</span>][<span class="symbol">github-shield</span>]][<span class="symbol">github-url</span>]</span><br><span class="line">[<span class="string">![VSCode Plugin</span>][<span class="symbol">vscode-shield</span>]][<span class="symbol">vscode-url</span>]</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="对话">对话</h3><blockquote><p>发现自: <a href="http://blog.2baxb.me/">Axb 的自我修养</a>,样式如下:</p></blockquote><img src="https://www.helloimg.com/images/2022/02/27/GVtaMP.png" alt="20210329091216" /><ul><li><p>写法:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">比如某天...</span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; 喂?是....</span></span><br></pre></td></tr></table></figure></li><li><p>样式:</p><p>比如某天…</p><blockquote><p>喂?是…</p></blockquote></li></ul><hr><h3 id="引用-条目">引用+条目</h3><ul><li><p>样式:</p><blockquote><ul><li>对应不同业务需求,存在 N 中不同的监听器接口可供实现.</li><li>监听器经常在 GUI 编程中使用.</li></ul></blockquote><blockquote><ol><li>对应不同业务需求,存在 N 中不同的监听器接口可供实现.</li><li>监听器经常在 GUI 编程中使用.</li></ol></blockquote><hr></li><li><p>写法:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; - 对应不同业务需求,存在 N 中不同的监听器接口可供实现.</span></span><br><span class="line"><span class="quote">&gt; - 监听器经常在 GUI 编程中使用.</span></span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; 1. 对应不同业务需求,存在 N 中不同的监听器接口可供实现.</span></span><br><span class="line"><span class="quote">&gt; 2. 监听器经常在 GUI 编程中使用.</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="多行引用">多行引用</h3><p>偶然发现的,挺实用的</p><ul><li><p>一般引用只能一行,多行引用写成这样的话</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; asdfghjkl</span></span><br><span class="line"><span class="quote">&gt; zxcvbnm</span></span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; asdfghjkl zxcvbnm</span></span><br></pre></td></tr></table></figure><p>实际上长得一样</p><blockquote><p>asdfghjkl<br>zxcvbnm</p></blockquote><blockquote><p>asdfghjkl zxcvbnm</p></blockquote><hr></li><li><p>改成这样就对了:</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; asdfghjkl \</span></span><br><span class="line"><span class="quote">&gt; zxcvbnm</span></span><br></pre></td></tr></table></figure><blockquote><p>asdfghjkl <br>zxcvbnm</p></blockquote></li></ul><hr><h3 id="巨号字体">巨号字体</h3><ul><li><p>上面的是巨号,下面的是一号标题,怎样,够大吧?</p><img src="https://www.helloimg.com/images/2022/02/27/GV4CFq.png" alt="20211009171608" /></li><li><p>写法: <code>h1 标签 + 列表 + 一级标题</code></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> # 🌈Keeper</span><br><span class="line"></span><br><span class="line">基于 [<span class="string">`GitHub-Action`</span>](<span class="link">./.github/workflows/daily.yml</span>) 的定时任务集合.</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="文字样式">文字样式</h2><table><thead><tr><th style="text-align:center">样式</th><th style="text-align:left">写法</th></tr></thead><tbody><tr><td style="text-align:center"><em>斜体</em></td><td style="text-align:left">*斜体* 或 _斜体_</td></tr><tr><td style="text-align:center"><strong>粗体</strong></td><td style="text-align:left">**粗体**</td></tr><tr><td style="text-align:center"><code>标识字</code></td><td style="text-align:left">`标识字`</td></tr><tr><td style="text-align:center"><s>中划线</s></td><td style="text-align:left">~~中划线~~</td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="HTML-标签">HTML 标签</h2><p><span style="background: grey; color: grey">遮盖体-select</span><br><span style="background: grey; color: grey" onmouseout="this.style.background='grey';this.style.color='grey'" onmouseover="this.style=''">遮盖体-hove</span></p><h3 id="收缩框">收缩框</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">summary</span>&gt;</span>收缩框标题<span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">  这里写内容</span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><details>  <summary>演示: 收缩框标题</summary>  这里写内容</details></li></ul><hr><h3 id="下划线">下划线</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">u</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">u</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>样式 <u>文字</u></li></ul><hr><h3 id="键盘样式">键盘样式</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span>Ctrl + shift + [<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>样式 <kbd>Ctrl + shift + [</kbd></li></ul><hr><h3 id="文字遮盖">文字遮盖</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;span <span class="attribute">style</span>=<span class="string">&quot;background: grey; color: grey&quot;</span>&gt;遮盖体-select&lt;/span&gt;</span><br><span class="line">&lt;span <span class="attribute">style</span>=<span class="string">&quot;background: grey; color: grey&quot;</span> <span class="attribute">onmouseout</span>=<span class="string">&quot;this.style.background=&#x27;grey&#x27;;this.style.color=&#x27;grey&#x27;&quot;</span> <span class="attribute">onmouseover</span>=<span class="string">&quot;this.style=&#x27;&#x27;&quot;</span>&gt;遮盖体-hove&lt;/span&gt;</span><br></pre></td></tr></table></figure><ul><li><p>样式:</p><p><span style="background: grey; color: grey">遮盖体-select</span><br><span style="background: grey; color: grey" onmouseout="this.style.background='grey';this.style.color='grey'" onmouseover="this.style=''">遮盖体-hove</span></p></li></ul><hr><h3 id="论文脚注">论文脚注</h3><ul><li><p>可正反双向跳转</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sup</span> <span class="attr">id</span>=<span class="string">&quot;cite_ref-01&quot;</span>&gt;</span>[\[1\]](#cite_note-01)<span class="tag">&lt;/<span class="name">sup</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;cite_note-01&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#cite_ref-01&quot;</span>&gt;</span>[1]<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><hr></li></ul><p>论文脚注测试处 <sup id="cite_ref-01"><a href="#cite_note-01">[1]</a></sup>。 <code>&lt;sup id=&quot;cite_ref-01&quot;&gt;[\[1\]](#cite_note-01)&lt;/sup&gt;</code></p><pre><code>00000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000</code></pre><p>论文脚注测试处 <sup id="cite_ref-02"><a href="#cite_note-02">[2]</a></sup>。 <code>&lt;sup id=&quot;cite_ref-02&quot;&gt;[\[2\]](#cite_note-02)&lt;/sup&gt;</code></p><pre><code>00000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000</code></pre><hr><h3 id="中英文切换">中英文切换</h3><ul><li><p>Repo-README 中常常需要中英文切换 <sup id='cite_ref-03'><a href="#cite_note-03">[3]</a></sup></p><div align="right"><p>Language: 🇺🇸 | <a href="/README_CN.md">cn</a></p></div><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">div</span> <span class="meta">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">Language:</span> 🇺🇸 | [cn](/README_CN<span class="number">.</span>md)</span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="markdown-表格内换行">markdown-表格内换行</h3><ul><li><p>找了很多办法来实现换行,后来发现实现原理简单粗暴: <code>&lt;br&gt;</code></p><table><thead><tr><th>列 1</th><th>列 2</th><th>列 3</th></tr></thead><tbody><tr><td>列 1 <br> 列 1.1</td><td>列 2 <br> 列 2.1</td><td>列 3 <br> 列 3.1</td></tr><tr><td>列 1 <br> 列 1.2</td><td>列 2 <br> 列 2.2</td><td>列 3 <br> 列 3.2</td></tr></tbody></table></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-31">借物表</h2><p><a name="cite_note-01" href="#cite_ref-01">[1]</a>：<code>&lt;a name=&quot;cite_note-01&quot; href=&quot;#cite_ref-01&quot;&gt;[1]&lt;/a&gt;</code> (测试)</p><p><a name="cite_note-02" href="#cite_ref-02">[2]</a>：<code>&lt;a name=&quot;cite_note-02&quot; href=&quot;#cite_ref-02&quot;&gt;[2]&lt;/a&gt;</code> (测试)</p><p><a name='cite_note-03' href='#cite_ref-03'>[3]</a>: <a href="https://raw.githubusercontent.com/jerryc127/hexo-theme-butterfly/dev/README.md">https://raw.githubusercontent.com/jerryc127/hexo-theme-butterfly/dev/README.md</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
          <category> markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😵‍💫PS中一些小用法</title>
      <link href="/post/design/PS/"/>
      <url>/post/design/PS/</url>
      
        <content type="html"><![CDATA[<h1>PS 中一些小用法</h1><!-- * @Author: Weidows * @Date: 2020-11-29 12:05:07 * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:47:27 * @FilePath: \Blog-private\source\_posts\design\PS.md * @Description:--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#ps-%E4%B8%AD%E4%B8%80%E4%BA%9B%E5%B0%8F%E7%94%A8%E6%B3%95">PS 中一些小用法</a><ul><li><a href="#%E5%BF%AB%E6%8D%B7%E9%94%AE">快捷键</a></li><li><a href="#%E8%A7%A3%E9%94%81%E5%9B%BE%E5%B1%82">解锁图层</a></li><li><a href="#%E9%80%8F%E6%98%8E%E8%83%8C%E6%99%AF">透明背景</a></li><li><a href="#%E5%AE%9A%E5%90%91%E5%8F%98%E8%89%B2">定向变色</a></li><li><a href="#%E5%8E%BB%E6%B0%B4%E5%8D%B0">去水印</a></li><li><a href="#%E8%BD%AE%E5%BB%93-%E5%9B%BE%E7%89%87%E5%A1%AB%E5%85%85">轮廓-图片填充</a></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="快捷键">快捷键</h2><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">复制图层</td><td style="text-align:center"><code>Ctrl + J</code></td></tr><tr><td style="text-align:center">调整图层位置和大小</td><td style="text-align:center"><code>Ctrl + T</code></td></tr></tbody></table><hr><h2 id="解锁图层">解锁图层</h2><ul><li><p>索引模式无法解锁</p><ul><li>图像-&gt;模式-&gt;(索引颜色-&gt;RGB 颜色)</li></ul><p><img src="https://www.helloimg.com/images/2022/02/27/GV393v.png" alt="20201129120716"></p></li><li><p>解锁</p><ul><li>双击图层</li><li>把锁拖进垃圾桶图标</li></ul></li></ul><hr><h2 id="透明背景">透明背景</h2><ul><li>选择-&gt;色彩范围，点击取色<br><img src="https://www.helloimg.com/images/2022/02/27/GVErOM.png" alt="20201129121309"></li><li>选中后按 Delete</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="定向变色">定向变色</h2><ul><li><p>变色前后对比</p><img src="https://www.helloimg.com/images/2022/02/27/GVLV5u.png" alt="20210210193706" /></li><li><p>首先选择颜色范围,参考<a href="#%E9%80%8F%E6%98%8E%E8%83%8C%E6%99%AF">透明背景</a></p></li><li><p>然后右键选择<code>填充</code>,或者在菜单里找<code>【图像】——【调整】——【替换颜色】</code></p><img src="https://www.helloimg.com/images/2022/02/27/GV4sBv.png" alt="20210210193939" /></li><li><p>填入目标色即可.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="去水印">去水印</h2><blockquote><p><a href="https://zhuanlan.zhihu.com/p/45458379">PS 去水印的方法和技巧</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="轮廓-图片填充">轮廓-图片填充</h2><ul><li><p>用一张图的内容轮廓+另一张图的内容填充<sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p><p>如视频中的这样:</p><p><img src="https://www.helloimg.com/images/2022/03/06/Gh21vg.png" alt=""></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-5">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://www.bilibili.com/video/BV12p4y1z7FZ?spm_id_from=..search-card.all.click">【ps 小技巧/教程】 快速做出“文字用图片内容作填充”的效果，图片生成特定文字的轮廓效果|新手向|图片文字</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> ps </tag>
            
            <tag> 设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🍗各种地方用到的快捷键</title>
      <link href="/post/others/backup/%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
      <url>/post/others/backup/%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-11-24 22:33:53 * @LastEditors: Weidows * @LastEditTime: 2021-07-27 14:43:21 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\others\backup\快捷键.md * @Description:--><ul><li><a href="#%E9%80%9A%E7%94%A8">通用</a><ul><li><a href="#%E4%BF%AE%E6%94%B9%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE">修改的快捷键</a></li></ul></li><li><a href="#vscode">VScode</a><ul><li><a href="#%E9%9D%9E%E4%BF%AE%E6%94%B9%E9%94%AE%E4%BD%8D%E6%8F%92%E4%BB%B6%E9%94%AE%E4%BD%8D">非修改键位/插件键位</a></li><li><a href="#mover-%E9%9D%9E%E4%BF%AE%E6%94%B9%E5%B7%B2%E5%BC%83%E7%94%A8"><s>Mover 非修改</s>(已弃用)</a></li><li><a href="#%E9%94%AE%E4%BD%8D%E4%BF%AE%E6%94%B9%E5%90%8E">键位修改后.</a></li></ul></li><li><a href="#jetbrains">JetBrains</a><ul><li><a href="#%E5%8E%9F%E7%94%9F">原生</a></li><li><a href="#%E7%BB%A7%E6%89%BF-vscode-%E9%94%AE%E4%BD%8D%E4%BF%AE%E6%94%B9">继承 VScode 键位修改</a></li><li><a href="#%E6%99%BA%E8%83%BD%E8%A1%A5%E5%85%A8">智能补全</a></li></ul></li><li><a href="#%E6%B5%8F%E8%A7%88%E5%99%A8">浏览器</a><ul><li><a href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%B8%A6">浏览器自带</a></li><li><a href="#%E4%BF%AE%E6%94%B9">修改</a></li></ul></li><li><a href="#git">Git</a></li><li><a href="#qq">QQ</a></li><li><a href="#%E6%90%9C%E7%8B%97">搜狗</a><ul><li><a href="#%E9%97%AE%E9%A2%98">问题</a></li></ul></li><li><a href="#windows">Windows</a><ul><li><a href="#%E5%9F%BA%E6%9C%AC">基本</a></li><li><a href="#windows-%E5%BE%BD%E6%A0%87%E9%94%AE">Windows 徽标键</a></li><li><a href="#%E8%A7%A6%E6%91%B8%E6%9D%BF">触摸板</a><ul><li><a href="#%E5%8E%9F%E9%85%8D">原配</a></li><li><a href="#%E4%BF%AE%E6%94%B9%E5%90%8E">修改后</a></li></ul></li></ul></li><li><a href="#utools">Utools</a><ul><li><a href="#%E5%BF%AB%E6%8D%B7%E9%94%AE">快捷键</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB">数据迁移</a></li></ul></li><li><a href="#%E9%94%AE%E7%9B%98">键盘</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="通用-2">通用</h2><ul><li><p><code>IDEA</code> 与 <code>VScode</code>与 <code>浏览器</code>(某些部分) 通用性的非修改的快捷键</p><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">全屏</td><td style="text-align:center"><code>F11</code></td></tr><tr><td style="text-align:center">关闭标签 // 后台打开链接</td><td style="text-align:center"><code>中键</code></td></tr><tr><td style="text-align:center">搜索 // 新建标签 // 关闭标签 // 保存</td><td style="text-align:center"><code>Ctrl + F // T // W(F4) // S</code></td></tr><tr><td style="text-align:center">恢复刚关闭的标签</td><td style="text-align:center"><code>Ctrl + shift + T</code></td></tr><tr><td style="text-align:center">切换左右标签 // 转到第 N 编辑器块</td><td style="text-align:center"><code>Ctrl + PageUp/PageDown //~ / 1 / 2 / 3 ...</code></td></tr><tr><td style="text-align:center">放大/缩小</td><td style="text-align:center"><code>Ctrl + +(=) / -(-)</code></td></tr><tr><td style="text-align:center">行//块注释</td><td style="text-align:center"><code>shift + alt + A</code>//<code>Ctrl + /</code></td></tr><tr><td style="text-align:center">撤销 / 重做</td><td style="text-align:center"><code>Ctrl + Z</code> / <code>Ctrl + shift + Z</code></td></tr><tr><td style="text-align:center">查找(替换) / 全局查找(替换) / 文件内逐词遍历(方便)</td><td style="text-align:center"><code>Ctrl + F(H)</code> / <code>Ctrl + shift + F(H)</code> / <code>F3</code></td></tr><tr><td style="text-align:center">在多个列上添加光标 // 多个行尾添加光标</td><td style="text-align:center"><code>Ctrl + alt + ↑ / ↓</code>/<code>(中键)</code> // <code>在行首添加完再转行尾</code></td></tr><tr><td style="text-align:center">移动编辑器组</td><td style="text-align:center"><code>Ctrl + K + ←/↑/↓/→</code></td></tr><tr><td style="text-align:center">把当前行上/下移 // 向下/上复制一行</td><td style="text-align:center"><code>alt + ↑ / ↓</code> // <code>shift + alt + ↓ / ↑</code></td></tr><tr><td style="text-align:center">格式化</td><td style="text-align:center"><code>shift + alt + F</code></td></tr><tr><td style="text-align:center">跳转</td><td style="text-align:center"><code>Ctrl/alt + G</code></td></tr><tr><td style="text-align:center">向右拆分编辑器</td><td style="text-align:center"><code>Ctrl + \</code></td></tr><tr><td style="text-align:center">功能键区</td><td style="text-align:center"><code>shift + 小键盘数字</code></td></tr><tr><td style="text-align:center">源代码操作(生成)</td><td style="text-align:center"><code>alt + insert</code> / <code>shift + alt + Num0</code></td></tr><tr><td style="text-align:center">快速修复</td><td style="text-align:center"><code>alt + \</code></td></tr></tbody></table><hr></li></ul><h3 id="修改的快捷键">修改的快捷键</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">上 / 下 / 左 / 右移</td><td style="text-align:center"><code>Alt + I / K / J(U) / L(O)</code></td></tr><tr><td style="text-align:center">转到行首/尾 // 选中到行首/尾(不包含缩进)</td><td style="text-align:center"><code>alt + N(home) / M(end)</code> // <code>shift + Alt + N / M</code></td></tr><tr><td style="text-align:center">换行//向上扩展行</td><td style="text-align:center"><code>alt + ,</code> / <code>Ctrl + enter</code> // <code>Ctrl + Shift + Enter</code></td></tr><tr><td style="text-align:center">删除行</td><td style="text-align:center"><code>alt + ;</code></td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="VScode-4">VScode</h2><h3 id="非修改键位-插件键位">非修改键位/插件键位</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">选中当前行 / 返回上一个光标位置</td><td style="text-align:center"><code>Ctrl + L</code> / <code>Ctrl + U</code></td></tr><tr><td style="text-align:center">非调试运行/运行</td><td style="text-align:center"><code>(Ctrl) + F5</code></td></tr><tr><td style="text-align:center">收缩/扩展选择</td><td style="text-align:center"><code>shift + alt + ←</code> / <code>→</code></td></tr><tr><td style="text-align:center">快速选择引号内容</td><td style="text-align:center"><code>alt + A</code></td></tr><tr><td style="text-align:center">资源管理器 / 项目管理器</td><td style="text-align:center"><code>Ctrl + shift + E</code> / <code>shift + alt + P</code></td></tr><tr><td style="text-align:center">保持打开状态 / 固定标签</td><td style="text-align:center"><code>Ctrl + K &amp;&amp; Enter</code> / <code>Ctrl + K &amp;&amp; shift + Enter</code></td></tr><tr><td style="text-align:center">插入文件头 / 函数注释 / Code Runner</td><td style="text-align:center"><code>Ctrl+ alt + I</code> / <code>T</code> / <code>N</code></td></tr><tr><td style="text-align:center">开关侧边栏 / 开关 Console / 新建终端</td><td style="text-align:center"><code>Ctrl + B</code> / <code>Ctrl + ~</code> / <code>Ctrl + shift + ~</code></td></tr><tr><td style="text-align:center">​​​​​Quokka 运行 JS</td><td style="text-align:center"><code>Ctrl + K + Q</code></td></tr><tr><td style="text-align:center">Find all Reference</td><td style="text-align:center"><code>Ctrl + alt + F12</code></td></tr><tr><td style="text-align:center">上/下页跳转光标 // 视图上/下滚动(翻页)</td><td style="text-align:center"><code>PageUp / PageDown</code> / <code>alt + ↑(PageUp) / ↓(PageDown)</code></td></tr><tr><td style="text-align:center">markdown 预览 / picgo 插入/粘贴图片 / 插入书签</td><td style="text-align:center"><code>Ctrl + Shift + V</code> / <code>E/U</code> / <code>K</code></td></tr><tr><td style="text-align:center">匹配文本后面出现光标(贼重要) / 全文匹配文本逐一遍历选择(好用)</td><td style="text-align:center"><code>Ctrl + shift + L</code> / <code>Ctrl + D</code></td></tr><tr><td style="text-align:center">Java 重构 // Debug</td><td style="text-align:center"><code>Ctrl + shift + R</code> // <code>Ctrl + alt + N</code></td></tr><tr><td style="text-align:center">copilot 上一个/下一个</td><td style="text-align:center"><code>alt + [ / ]</code></td></tr><tr><td style="text-align:center"><code>Ctrl + shift + N</code> + <code>Ctrl + R</code></td><td style="text-align:center">打开之前的工作区</td></tr></tbody></table><p><img src="https://www.helloimg.com/images/2022/02/27/GVa4dr.png" alt="tjT21PGqH5xQNwz"></p><hr><h3 id="Mover-非修改-已弃用"><s>Mover 非修改</s>(已弃用)</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">剪切/复制/粘贴</td><td style="text-align:center"><code>alt + X / C / V</code></td></tr><tr><td style="text-align:center">跳行</td><td style="text-align:center"><code>alt + 数字 + ↑ / ↓</code></td></tr><tr><td style="text-align:center">上下左右移动视图</td><td style="text-align:center"><code>alt + E / D / S / F</code></td></tr></tbody></table><hr><h3 id="键位修改后">键位修改后.</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">触发代码补全 /</td><td style="text-align:center"><code>Ctrl + I</code></td></tr><tr><td style="text-align:center">向左/右缩进 // 全折叠/全展开</td><td style="text-align:center"><code>(shift + tab) Ctrl + [ / ]</code> // <code>Ctrl + shift + [ / ]</code></td></tr><tr><td style="text-align:center">markdown 创建文章目录</td><td style="text-align:center"><code>alt + '</code></td></tr><tr><td style="text-align:center">打开 Live Server / 关闭 Server</td><td style="text-align:center"><code>shift + alt + [</code> / <code>]</code></td></tr><tr><td style="text-align:center">终止//最大化终端</td><td style="text-align:center"><code>alt + . // /</code></td></tr><tr><td style="text-align:center">打开 copilot</td><td style="text-align:center"><code>shift + alt + Enter</code></td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="JetBrains">JetBrains</h2><h3 id="原生">原生</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">引入变量(右键-&gt;重构-&gt;也可以)</td><td style="text-align:center"><code>Ctrl + alt + V</code></td></tr><tr><td style="text-align:center">生成代码</td><td style="text-align:center"><code>alt + insert(shift + Num0)</code></td></tr><tr><td style="text-align:center">类图表</td><td style="text-align:center"><code>Ctrl + alt + U</code></td></tr><tr><td style="text-align:center">运行类</td><td style="text-align:center"><code>Ctrl + shift + F10</code></td></tr><tr><td style="text-align:center">上/下一个窗口</td><td style="text-align:center"><code>Ctrl + alt + [</code> / <code>]</code></td></tr></tbody></table><h3 id="继承-VScode-键位修改">继承 VScode 键位修改</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">基本快捷键</td><td style="text-align:center"><code>VScode keyboard map</code></td></tr><tr><td style="text-align:center">Mover</td><td style="text-align:center"><code>已手动适配</code></td></tr></tbody></table><hr><h3 id="智能补全">智能补全</h3><table><thead><tr><th style="text-align:center">输入</th><th style="text-align:center">补全</th></tr></thead><tbody><tr><td style="text-align:center">fori</td><td style="text-align:center">for(int i = 0;i &lt; ;i++){}</td></tr><tr><td style="text-align:center">100.for</td><td style="text-align:center">for(int i = 0;i &lt; ;i++){}</td></tr><tr><td style="text-align:center">数组对象 a.for</td><td style="text-align:center">for (int i : a) {}</td></tr><tr><td style="text-align:center">foreach</td><td style="text-align:center">for(:){}</td></tr><tr><td style="text-align:center">ifn</td><td style="text-align:center">if(args == null)</td></tr><tr><td style="text-align:center">sout</td><td style="text-align:center">System.out.println()</td></tr><tr><td style="text-align:center">xxx.sout</td><td style="text-align:center">System.out.println(xxx)</td></tr><tr><td style="text-align:center">st</td><td style="text-align:center">String</td></tr><tr><td style="text-align:center">main/psvm</td><td style="text-align:center">public static void main(String[] args) {}</td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="浏览器">浏览器</h2><h3 id="浏览器自带">浏览器自带</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">选中地址栏</td><td style="text-align:center"><code>alt + D</code> / <code>Ctrl + L</code></td></tr><tr><td style="text-align:center">新建标签</td><td style="text-align:center"><code>Ctrl + T</code></td></tr><tr><td style="text-align:center">打开下载管理器</td><td style="text-align:center"><code>shift + X</code></td></tr><tr><td style="text-align:center">刷新</td><td style="text-align:center"><code>Ctrl + R</code></td></tr><tr><td style="text-align:center">添加收藏夹</td><td style="text-align:center"><code>Ctrl + D</code></td></tr><tr><td style="text-align:center">下载管理器</td><td style="text-align:center"><code>Ctrl + J</code></td></tr><tr><td style="text-align:center">开关 Dark Reader</td><td style="text-align:center"><code>shift + alt + D</code></td></tr><tr><td style="text-align:center">后台跳转链接</td><td style="text-align:center"><code>Ctrl + 左键</code></td></tr><tr><td style="text-align:center">检查元素</td><td style="text-align:center"><code>Ctrl + shift + C</code></td></tr></tbody></table><hr><h3 id="修改">修改</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">暂无</td><td style="text-align:center"></td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Git-3">Git</h2><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">提交+推送</td><td style="text-align:center"><code>Ctrl + Enter</code></td></tr><tr><td style="text-align:center">Git 暂存</td><td style="text-align:center"><code>Ctrl + alt + A</code></td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="QQ">QQ</h2><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">打开消息面板</td><td style="text-align:center"><code>Ctrl + alt + Z</code></td></tr><tr><td style="text-align:center">截图</td><td style="text-align:center"><code>Ctrl + alt + ScrLK</code></td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="搜狗">搜狗</h2><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">暂无</td><td style="text-align:center"></td></tr></tbody></table><h3 id="问题-5">问题</h3><ul><li><p>有时候会遇到上传配置失败的情况</p><img src="https://www.helloimg.com/images/2022/02/27/GVLIeo.png" alt="20210206124107" /></li><li><p>可能是系统设置了代理,比如 clash 会<code>开启代理</code>,暂时关掉就好了.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Windows-3">Windows</h2><h3 id="基本-2">基本</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">任务管理器</td><td style="text-align:center"><code>Ctrl + shift + Esc</code></td></tr></tbody></table><hr><h3 id="Windows-徽标键">Windows 徽标键</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">emoji 输入面板</td><td style="text-align:center"><code>win + . / ;</code></td></tr><tr><td style="text-align:center">最小化除了当前窗口的所有窗口//所有窗口</td><td style="text-align:center"><code>win + home // D</code></td></tr><tr><td style="text-align:center">预览桌面</td><td style="text-align:center"><code>win + ,</code></td></tr><tr><td style="text-align:center">打开我的电脑//运行//控制中心</td><td style="text-align:center"><code>win + E//R//A</code></td></tr><tr><td style="text-align:center">window 语音听写</td><td style="text-align:center"><code>win + H(hear)</code></td></tr><tr><td style="text-align:center">锁屏</td><td style="text-align:center"><code>win + L(Lock)</code></td></tr><tr><td style="text-align:center">电脑基本信息</td><td style="text-align:center"><code>win + pausebreak</code></td></tr></tbody></table><hr><h3 id="触摸板">触摸板</h3><h4 id="原配">原配</h4><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">视频前进/后退</td><td style="text-align:center"><code>双指左/右拖</code></td></tr></tbody></table><p><img src="https://www.helloimg.com/images/2022/02/27/GVE8AY.png" alt="ygIOkb9ur1cdpMe"></p><h4 id="修改后">修改后</h4>  <img src="https://www.helloimg.com/images/2022/02/27/GVicLq.png" alt="20201227104041" /><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Utools">Utools</h2><h3 id="快捷键-2">快捷键</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">打开</td><td style="text-align:center"><code>alt + space</code></td></tr><tr><td style="text-align:center">面板上下选择//快捷选择</td><td style="text-align:center"><code>alt + J/K</code> // <code>alt + 1/2/3...</code></td></tr></tbody></table><hr><h3 id="数据迁移-2">数据迁移</h3><ul><li><p>退出程序,把数据目录剪切过来,然后执行:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mklink /d <span class="string">&quot;C:\Users\29845\AppData\Roaming\uTools&quot;</span> <span class="string">&quot;D:\Game\Scoop\persist\uTools&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>会生成一个映射文件夹.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="键盘">键盘</h2><ul><li><p>狼蛛-收割者 Fn 功能键位</p><img src="https://www.helloimg.com/images/2022/02/27/GVF2ao.png" alt="Fn功能键位" /></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
          <category> backup </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> 推荐 </tag>
            
            <tag> 浏览器 </tag>
            
            <tag> vscode </tag>
            
            <tag> idea </tag>
            
            <tag> 工具 </tag>
            
            <tag> 快捷键 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>⬆ Node.js-环境配置-使用</title>
      <link href="/post/Web/Node/node/"/>
      <url>/post/Web/Node/node/</url>
      
        <content type="html"><![CDATA[<h1>Node.js-环境配置-使用</h1><!-- * @Author: Weidows * @Date: 2020-11-24 21:59:29 * @LastEditors: Weidows * @LastEditTime: 2022-05-23 10:05:34 * @FilePath: \Blog-private\source\_posts\Web\Node\node.md * @Description:--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#nodejs-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-%E4%BD%BF%E7%94%A8">Node.js-环境配置-使用</a><ul><li><a href="#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">环境配置</a></li><li><a href="#%E5%AE%89%E8%A3%85-yarn">安装 yarn</a></li><li><a href="#%E5%8A%A0%E9%80%9F">加速</a><ul><li><a href="#%E6%8D%A2%E6%BA%90">换源</a></li><li><a href="#%E4%BB%A3%E7%90%86">代理</a></li></ul></li><li><a href="#%E4%BE%9D%E8%B5%96%E5%8D%87%E7%BA%A7">依赖升级</a></li><li><a href="#%E5%8F%82%E6%95%B0%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4">参数及常用命令</a><ul><li><a href="#-gglobal"><code>-g(global)</code></a></li><li><a href="#-save"><code>-save</code></a></li></ul></li><li><a href="#local-%E5%85%A8%E5%B1%80%E4%BE%9D%E8%B5%96">local 全局依赖</a></li><li><a href="#%E8%BF%90%E8%A1%8C%E6%8A%A5%E9%94%99">运行报错</a><ul><li><a href="#%E4%BE%9D%E8%B5%96%E5%87%BA%E9%94%99">依赖出错</a></li><li><a href="#%E6%B2%A1%E8%A3%85%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96">没装项目依赖</a></li></ul></li><li><a href="#%E6%8E%A8%E8%8D%90%E6%96%87%E7%AB%A0">推荐文章</a></li><li><a href="#node-%E5%A4%9A%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86">node-多版本管理</a><ul><li><a href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%8E%9F%E5%9B%A0%E6%8A%A5%E9%94%99">环境变量原因报错</a></li><li><a href="#%E5%88%87%E6%8D%A2%E7%89%88%E6%9C%AC%E6%8A%A5%E9%94%99">切换版本报错</a></li></ul></li><li><a href="#%E7%89%88%E6%9C%AC%E6%8B%9F%E5%AE%9A">版本拟定</a></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="环境配置-2">环境配置</h2><ul><li><p>之前一直在乐此不疲的修改 npm 和 yarn 的 global 路径,因为每次 Node.js 更新会导致目录索引失效…</p></li><li><p>后来发现,Scoop 完美解决了这个问题! 它使用<code>Scoop/persist</code>这个文件夹来挂载数据,不影响程序本身,即使更新也不会影响.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="安装-yarn">安装 yarn</h2><ul><li><p>Node.js 是 JavaScript 运行环境,某个项目运行起来会需要一些依赖</p></li><li><p><code>npm/yarn/cnpm</code> 就是管理这些依赖的, 安装 node.js 后自带 npm,不会带 yarn/cnpm, 这三个中我比较推荐用 <code>yarn</code></p><ol><li><p>yarn 比 npm 更快一些</p></li><li><p>默认锁定版本.</p></li></ol></li></ul><hr><ul><li><p>虽然 npm 与 yarn 是同一类东西,但是可以用 npm 安装 yarn (也可以去官网下载安装,不过那样更复杂麻烦)</p><p>神不神奇,因为 npm 和 yarn 本身也是依赖,但是这样安装的话需要进行一些目录配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g  yarn</span><br></pre></td></tr></table></figure></li><li><p><code>强烈推荐</code>: 用 Scoop 安装(<code>零配置</code>)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install yarn</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="加速-2">加速</h2><h3 id="换源-3">换源</h3><ul><li><p>推荐: 使用 <a href="https://www.npmjs.com/package/yrm"><code>yrm</code></a>, 会同时将你的 npm 和 yarn 一起切换 <sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yrm add njupt https:<span class="regexp">//mi</span>rrors.njupt.edu.cn<span class="regexp">/nexus/</span>repository<span class="regexp">/npm/</span> https:<span class="regexp">//mi</span>rrors.njupt.edu.cn<span class="regexp">/help/</span>npm/</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">╰─ yrm test</span><br><span class="line"></span><br><span class="line">  npm ---- 1311ms</span><br><span class="line">* cnpm --- Fetch Error</span><br><span class="line">  taobao - 470ms</span><br><span class="line">  nj ----- Fetch Error</span><br><span class="line">  rednpm - 221ms</span><br><span class="line">  npmMirror  1204ms</span><br><span class="line">  edunpm - 1408ms</span><br><span class="line">  yarn --- Fetch Error</span><br></pre></td></tr></table></figure><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yrm <span class="keyword">use</span> taobao</span><br></pre></td></tr></table></figure></li><li><p>当然不嫌麻烦可以手动修改</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br><span class="line">yarn config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>也可以直接定位 npm 和 yarn 的配置文件 -&gt; <code>~/.npmrc和.yarnrc</code></p><hr></li><li><p>检查</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm<span class="built_in"> config </span><span class="built_in">get</span> registry</span><br><span class="line">yarn<span class="built_in"> config </span><span class="built_in">get</span> registry</span><br></pre></td></tr></table></figure><hr></li><li><p>问题: 有时会遇到淘宝源某个文件验证失败问题 (Integrity check failed for “@types/body-parser” (computed integrity doesn’t match our records)</p><p>解决办法是: 换回官方的源,用完之后再换成淘宝源.</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https:<span class="comment">//registry.npmjs.org</span></span><br><span class="line">yarn config set registry https:<span class="comment">//registry.npmjs.org</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="代理">代理</h3><ul><li><p>设置代理</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm config set proxy http://127.0.0.1:7890</span><br><span class="line">npm config set https-proxy http://127.0.0.1:7890</span><br><span class="line">yarn config set proxy http://127.0.0.1:7890</span><br><span class="line">yarn config set https-proxy http://127.0.0.1:7890</span><br></pre></td></tr></table></figure></li><li><p>删除代理</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm config delete proxy</span><br><span class="line">npm config delete https-proxy</span><br><span class="line">yarn config delete proxy</span><br><span class="line">yarn config delete https-proxy</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="依赖升级">依赖升级</h2><ul><li><p>package path 简介</p><ul><li>Node.Js 的包管理器有<code>npm,cnpm,yarn</code>等,通过上面操作后咱就用<code>npm</code></li><li>Node.Js 通过 npm 可以安装 hexo 模块,hexo 里面的插件也是通过 npm 安装</li><li>npm 安装/升级/移除的模块都在<code>node_modules/</code>里面,不会影响外面的东西</li></ul></li><li><p>npm check &amp;&amp; upgrade(node 插件)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g npm-check</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g npm-upgrade</span><br></pre></td></tr></table></figure><ul><li>使用:直接<code>npm-check</code>/<code>npm-upgrade</code></li></ul></li><li><p>缓存清理</p><ul><li>会清空 node_cache</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm cache clean --force</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="参数及常用命令">参数及常用命令</h2><blockquote><p><a href="https://www.cnblogs.com/lililia/p/10482169.html">详见 yarn 的常用命令</a></p></blockquote><ul><li>按照 package.json 文件的配置安装 module 到 node_modules/里面</li></ul><h3 id="g-global"><code>-g(global)</code></h3><ul><li>全局安装/卸载</li><li>注意脚手架如果是全局安装的话,卸载也要加上<code>-g</code>才能全局卸载.</li></ul><hr><h3 id="save"><code>-save</code></h3><ul><li>默认直接 install 会安装进那个目录,但是不会修改 package.json 文件</li><li>加上-save 会修改文件,使下次 npm install 也会安装</li><li>写在前面和后面都可以<ul><li><code>npm install --save hexo-tag-aplayer</code></li><li><code>npm install hexo-tag-aplayer --save</code></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="local-全局依赖">local 全局依赖</h2><ul><li><p>npm</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g eslint</span><br></pre></td></tr></table></figure></li><li><p>yarn</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn global add hexo-cli</span><br><span class="line">yarn global add vsce</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p><code>全局依赖路径</code>: 用 Scoop 安装的,其数据挂载<code>摆脱了C盘!</code>, npm 与 yarn 管理方式并不全然一样</p><ul><li><p>node-npm: <code>Scoop\persist\nodejs\bin</code></p></li><li><p>yarn: <code>Scoop\persist\yarn\global</code></p></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="运行报错">运行报错</h2><h3 id="依赖出错">依赖出错</h3><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node_modules\<span class="keyword">pascal</span>-<span class="keyword">case</span>\dist\<span class="keyword">index</span>.js:<span class="number">21</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><ul><li><p>有可能是依赖有故障了,其实用不着挨个排除是哪个依赖有问题</p></li><li><p>直接把<code>node_modules</code>整个删掉,然后<code>npm install</code>就好了.</p></li></ul><hr><h3 id="没装项目依赖">没装项目依赖</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">live2d-moc3@1.0.0 uglifyjs</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">uglifyjs src/live2d.js -o dist/live2d.min.js</span></span><br><span class="line"></span><br><span class="line">Parse error at src/live2d.js:2,6</span><br><span class="line">class Live2dLoader &#123;</span><br><span class="line">      ^</span><br><span class="line">ERROR: Unexpected token: name «Live2dLoader», expected: punc «;»</span><br><span class="line">    at JS_Parse_Error.get (eval at &lt;anonymous&gt; (D:\Repos\Weidows\Blog-private\node_modules\uglify-js\tools\node.js:18:1), &lt;anonymous&gt;:71:23)</span><br><span class="line">    at fatal (D:\Repos\Weidows\Blog-private\node_modules\uglify-js\bin\uglifyjs:394:27)</span><br><span class="line">    at run (D:\Repos\Weidows\Blog-private\node_modules\uglify-js\bin\uglifyjs:343:9)</span><br><span class="line">    at Object.&lt;anonymous&gt; (D:\Repos\Weidows\Blog-private\node_modules\uglify-js\bin\uglifyjs:259:5)</span><br><span class="line">    at Module._compile (node:internal/modules/cjs/loader:1097:14)</span><br><span class="line">    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1151:10)</span><br><span class="line">    at Module.load (node:internal/modules/cjs/loader:975:32)</span><br><span class="line">    at Function.Module._load (node:internal/modules/cjs/loader:822:12)</span><br><span class="line">    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:77:12)</span><br><span class="line">    at node:internal/main/run_main_module:17:47</span><br><span class="line">终端进程“D:\Scoop\shims\pwsh.exe -Command npm run uglifyjs”已终止，退出代码: 1。</span><br></pre></td></tr></table></figure><p>如上, uglifyjs 已经装了 global 依赖, 但是项目并没装 (没 node_modules),仍会报错</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="推荐文章">推荐文章</h2><blockquote><p><a href="https://mp.weixin.qq.com/s?__biz=MzIyMDkwODczNw==&amp;mid=2247496886&amp;idx=1&amp;sn=513b863b8468fcfaf8c8e750ce266899&amp;chksm=97c66918a0b1e00eb920d278ae03b10ebe1d765db0e17cb8fe5bc60b737fb3c6af1d96fcf724&amp;mpshare=1&amp;scene=23&amp;srcid=0327cIro7WXAp1jgObHXuKCE&amp;sharer_sharetime=1616807246544&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd">很多人上来就删除的 package-lock.json，还有这么多你不知道的（深度内容）</a></p></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="node-多版本管理">node-多版本管理</h2><ul><li><p>主流的有 nvm / n 两种</p><ul><li>n 在 mac 和 linux 上比较好装,在 win 上就别想了.</li></ul></li><li><p>安装 nvm</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">scoop </span><span class="keyword">install </span>nvm</span><br></pre></td></tr></table></figure></li><li><p>使用 nvm</p><blockquote><p><a href="https://segmentfault.com/a/1190000021690038">node 多版本管理工具——nvm</a></p></blockquote></li></ul><h3 id="环境变量原因报错">环境变量原因报错</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ERROR </span>open \settings.txt: The system cannot find the file specified.</span><br></pre></td></tr></table></figure><p>遇到这个报错的话,是因为环境变量还没起效,重启电脑</p><hr><h3 id="切换版本报错">切换版本报错</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">exit</span> status <span class="number">145</span>: The directory is not empty.</span><br></pre></td></tr></table></figure><ul><li><p>有可能是在安装/切换 node 版本时退出了终端导致非正常终止, 解决办法为重装/排查 <code>nvm/settings.txt</code></p><p>看到下面 origin 开头的两行了吗? 直接删掉</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root: D:\Game\Scoop\persist\nvm\nodejs</span><br><span class="line">arch: <span class="number">64</span></span><br><span class="line">proxy: http:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">7890</span></span><br><span class="line">originalpath: .</span><br><span class="line">originalversion:</span><br><span class="line">node_mirror: https:<span class="regexp">//</span>npm.taobao.org<span class="regexp">/mirrors/</span>node/</span><br><span class="line">npm_mirror: https:<span class="regexp">//</span>npm.taobao.org<span class="regexp">/mirrors/</span>npm/</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="版本拟定">版本拟定</h2><ul><li><p>之前一直手动起草 package.json 中的 version,略显笨拙</p><p>不知道 npm 自带 version 管理功能</p></li><li><p><code>npm version</code></p><blockquote><p>npm version [<newversion> | major | minor | patch | premajor | preminor | prepatch | prerelease [–preid=<prerelease-id>] | from-git]</p></blockquote><p>喏,可以拟定大小版本.</p><p>一般用这三个: major(大) -&gt; minor(小) -&gt; patch(补丁)</p><p>另外需要注意,使用之前要 <code>git commit</code>,不然没法使用.</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-23">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://www.jianshu.com/p/dbe3cda1ac11">yarn 源管理工具 yrm</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> Node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
            <tag> package </tag>
            
            <tag> npm </tag>
            
            <tag> yarn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😒Git-GitHub-操作问题和经验</title>
      <link href="/post/tools/Git/matters.mmd/"/>
      <url>/post/tools/Git/matters.mmd/</url>
      
        <content type="html"><![CDATA[<h1>Git-GitHub-操作问题和经验</h1><!-- * @Author: Weidows * @Date: 2020-11-21 19:28:51 * @LastEditors: Weidows * @LastEditTime: 2022-06-06 01:20:37 * @FilePath: \Blog-private\source\_posts\tools\Git\matters.mmd.md * @Description:--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#git-github-%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E5%92%8C%E7%BB%8F%E9%AA%8C">Git-GitHub-操作问题和经验</a><ul><li><a href="#%E5%AE%9E%E7%94%A8%E6%93%8D%E4%BD%9C">实用操作</a><ul><li><a href="#%E4%B8%89%E7%A7%8D-merge">三种-merge</a><ul><li><a href="#common-merge">common-merge</a></li><li><a href="#squash-merge">squash-merge</a></li><li><a href="#rebase-merge">rebase-merge</a></li></ul></li><li><a href="#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86">配置代理</a></li><li><a href="#%E7%89%88%E6%9C%AC%E5%9B%9E%E9%80%80">版本回退</a></li><li><a href="#%E5%88%9B%E5%BB%BA%E7%8B%AC%E7%AB%8B%E5%88%86%E6%94%AF">创建独立分支</a></li><li><a href="#%E7%BC%A9%E5%B0%8F%E4%BB%93%E5%BA%93%E4%BD%93%E7%A7%AF">缩小仓库体积</a><ul><li><a href="#%E5%88%A0%E9%99%A4%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95">删除提交记录</a></li><li><a href="#%E5%88%86%E6%94%AF%E7%8B%AC%E7%AB%8B%E6%B3%95">分支独立法</a></li></ul></li><li><a href="#%E6%8B%89%E5%8F%96%E5%AD%90%E6%A8%A1%E5%9D%97">拉取子模块</a></li></ul></li><li><a href="#github">GitHub</a><ul><li><a href="#%E9%A6%96%E9%A1%B5%E7%BB%BF%E6%A0%BC%E5%AD%90">首页绿格子</a></li><li><a href="#license-%E9%80%89%E6%8B%A9">License 选择</a></li><li><a href="#pages-%E5%9F%9F%E5%90%8D">pages-域名</a></li><li><a href="#%E5%88%A0%E9%99%A4%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF">删除远程分支</a></li><li><a href="#github-action">github-action</a><ul><li><a href="#checkout">checkout</a></li><li><a href="#%E5%9B%BD%E5%86%85%E6%97%B6%E5%8C%BA%E9%94%99%E4%BD%8D%E9%97%AE%E9%A2%98">国内时区错位问题</a></li></ul></li><li><a href="#jsdelivr-%E5%88%B7%E6%96%B0%E7%BC%93%E5%AD%98">JsDelivr-刷新缓存</a></li></ul></li><li><a href="#%E5%87%AD%E8%AF%81%E5%92%8C%E6%9D%83%E9%99%90">凭证和权限</a><ul><li><a href="#%E9%97%AE%E9%A2%98%E4%B8%80">问题一</a></li><li><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C">问题二</a></li><li><a href="#%E9%97%AE%E9%A2%98%E4%B8%89">问题三</a></li><li><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B">问题四</a></li></ul></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="实用操作">实用操作</h2><h3 id="三种-merge">三种-merge</h3><p><img src="https://www.helloimg.com/images/2022/03/06/GhMkF1.png" alt=""></p><ul><li>设当前 git-status:<div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR    A --&gt; B    B --master--&gt; C --&gt; D --&gt; E --&gt; F --&gt; G    B -.dev.-&gt; C1    subgraph merge-target      C1 --&gt; D1 --&gt; E1 --&gt; F1    end  </pre></div></li></ul><hr><h4 id="common-merge">common-merge</h4><p>默认的 merge,保留所有 commit 信息,merge 操作生成一个 merge-commit<div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR  A --&gt; B  B --master--&gt; C  B -.dev.-&gt; C1  C --&gt; D --&gt; E --&gt; F --&gt; C1&#39;  subgraph before-merge    C1 --&gt; D1 --&gt; E1 --&gt; F1  end  F1 .-&gt; C1&#39;  subgraph after-merge    C1&#39;[C1] --&gt; D1&#39;[D1] --&gt; E1&#39;[E1] --&gt; F1&#39;[F1]  end  F1&#39; --&gt; G  </pre></div></p><h4 id="squash-merge">squash-merge</h4><p>压缩合并,将几次提交的信息合并; 需手动提交所以会改变 commit-user<sup id='cite_ref-01'><a href="#cite_note-01">[1]</a></sup></p><p>适用场景为: 同一开发者负责合与被合两 branch, 并且被合并的 branch 记录并不重要<div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR  A --&gt; B  B --master--&gt; C  B -.dev.-&gt; C1  subgraph before-merge    C1 --&gt; D1 --&gt; E1 --&gt; F1  end  F1 .-&gt; C1-F1  C --&gt; D --&gt; E --&gt; F --&gt; G  subgraph after-merge    C1-F1  end  G --&gt; C1-F1  </pre></div></p><h4 id="rebase-merge">rebase-merge</h4><p>rebase 变基不会像 squash 那样变更 commit-user 信息,而且 commit 的合并是手动选择性的</p><p>比如下面合并 commit D1 和 E1,然后 branch-merge</p><ul><li><p>总图<div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR    A --&gt; B --master--&gt; C --&gt; D --&gt; E --&gt; F    F -.dev.-&gt; C1&#39;    B -.dev.-&gt; C1    subgraph before-merge      C1 --&gt; D1 --&gt; E1 --&gt; F1    end    F1 .-&gt; C1&#39;    subgraph rebase      C1&#39;[C1] --&gt; D1-E1 --&gt; F1&#39;[F1]    end    F --master--&gt; C1&#39;&#39;    F1&#39; .-&gt; C1&#39;&#39;    subgraph after-merge      C1&#39;&#39;[C1] --&gt; D1-E1&#39;[D1-E1] --&gt; F1&#39;&#39;[F1]    end    F1&#39;&#39; --&gt; G  </pre></div></p><hr></li><li><p>分三步图<div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR    A --&gt; B    B --master--&gt; C --&gt; D --&gt; E --&gt; F    B -.dev.-&gt; C1    subgraph before-merge      C1 --&gt; D1 --&gt; E1 --&gt; F1    end    F --&gt; G  </pre></div></p></li></ul><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR    A --&gt; B --master--&gt; C --&gt; D --&gt; E --&gt; F    F -.dev.-&gt; C1&#39;    B -.dev.-&gt; C1    subgraph before-merge      C1 --&gt; D1 --&gt; E1 --&gt; F1    end    F1 .-&gt; C1&#39;    subgraph rebase      C1&#39;[C1] --&gt; D1-E1 --&gt; F1&#39;[F1]    end    F --master--&gt; G  </pre></div><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR    A --&gt; B --master--&gt; C --&gt; D --&gt; E --&gt; F    F --&gt; C1&#39;    B -.dev.-&gt; C1    subgraph before-merge      C1 --&gt; D1 --&gt; E1 --&gt; F1    end    subgraph after-merge      C1&#39; --&gt; D1-E1 --&gt; F1&#39;    end    F1&#39; --&gt; G  </pre></div><hr><h3 id="配置代理">配置代理</h3><ul><li><p>有时候 github 会被墙,导致无法推送,需要挂代理</p></li><li><p>方案:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global https.proxy http://127.0.0.1:1080</span><br></pre></td></tr></table></figure></li><li><p>或者直接修改<code>~/.gitconfig</code>文件</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[core]</span></span><br><span class="line">  <span class="attr">autocrlf</span> = <span class="literal">true</span></span><br><span class="line">  <span class="attr">longpaths</span> = <span class="literal">true</span></span><br><span class="line">  <span class="attr">editor</span> = code.exe</span><br><span class="line"><span class="section">[user]</span></span><br><span class="line">  <span class="attr">name</span> = Weidows</span><br><span class="line">  <span class="attr">email</span> = utsuko27@qq.com</span><br><span class="line"><span class="section">[http]</span></span><br><span class="line">  <span class="attr">proxy</span> = localhost://<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">7890</span></span><br><span class="line"><span class="section">[https]</span></span><br><span class="line">  <span class="attr">proxy</span> = localhost://<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">7890</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="版本回退">版本回退</h3><p>不小心把 ssh 私钥 copy 到了 git 库里提到了 github 上,差点 GG</p><blockquote><p><a href="https://blog.csdn.net/yxlshk/article/details/79944535">Git 恢复之前版本的两种方法 reset、revert（图文详解）</a></p></blockquote><ol><li>reset 到出错提交的前一个提交</li><li>修改,提交</li><li>强制提交(不强制的话不行): git push origin master -f</li></ol><hr><h3 id="创建独立分支">创建独立分支</h3><blockquote><p>git checkout --orphan 新分支名</p></blockquote><hr><h3 id="缩小仓库体积">缩小仓库体积</h3><h4 id="删除提交记录">删除提交记录</h4><p>有的仓库因为有时候会提交图片,导致仓库体积格外的庞大</p><p>而且大到一定程度会被平台检查 (所以要想办法缩小)</p><hr><ul><li><p>我要压缩的是 <a href="https://github.com/Weidows-projects/Keeper">Keeper</a> 项目</p><p>因为每天都要提交一张必应壁纸,所以一年下来体积到了 400+ MB</p><p>我想把壁纸拿走,并且把 git 中提交记录也删掉以抹除体积</p><hr></li><li><p>开始我想的是把现有文件复制到一个新建的库,再把这个库 force push 到 github</p><p>出乎意料,旧的提交并没有消失; 可以看到强推 <code>重构</code> 前面有一个断档,那之前的就是旧提交</p><img src="https://www.helloimg.com/images/2022/02/27/GVLue9.png" alt="20211102134046" /><hr></li><li><p>为什么出现这情况? 我给画了个图</p><img src="https://www.helloimg.com/images/2022/02/27/GVt8KP.png" alt="20211102144127" /><p>所以,原因是没删除 github 上的 tags,删掉就没了捏</p></li></ul><hr><h4 id="分支独立法">分支独立法</h4><ul><li><p>起初使用的是上面的方法,后来突然想到把这些大文件独立分支</p><p>当需要减小体积时,本地保留好当前内容然后直接删除分支</p><p>再重新拉起一个同名分支 force push</p></li><li><p>这个方法应该更好些,避免删除不必要内容.</p></li></ul><hr><h3 id="拉取子模块">拉取子模块</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">git submodule update</span> <span class="literal">--</span><span class="comment">init</span> <span class="literal">--</span><span class="comment">recursive</span></span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="GitHub-2">GitHub</h2><h3 id="首页绿格子">首页绿格子</h3><ul><li>Github 不显示 fork 仓库的 commit, 需要独立出来</li></ul><hr><h3 id="License-选择">License 选择</h3><p><img src="https://www.helloimg.com/images/2022/02/27/GVao5P.png" alt="License"></p><p>一般盲怼 <code>MIT</code> 就好,不过上图没给出</p><blockquote><p>感觉菜鸟教程的文章最详细: <a href="https://www.runoob.com/w3cnote/open-source-license.html">各种开源协议介绍</a></p></blockquote><hr><h3 id="pages-域名">pages-域名</h3><ul><li><p>GitHub 与 Gitee-pages 部署域名规则不同.</p></li><li><p>github 上当且仅当 Repo 名字为<code>userName.github.io</code>时,域名为<code>userName.github.io</code></p><ul><li>其他 Repo 名字为<code>userName.github.io/repoName/</code></li></ul></li><li><p>Gitee 是当且仅当 Repo 名字为<code>userName.gitee.io</code>时,域名为<code>userName.gitee.io</code></p><ul><li>否则类似上面</li></ul></li></ul><hr><h3 id="删除远程分支">删除远程分支</h3><ul><li>不能删除当前默认分支.</li></ul><hr><h3 id="github-action">github-action</h3><h4 id="checkout">checkout</h4><img src="https://www.helloimg.com/images/2022/02/27/GVtV5z.png" alt="20211124165145" /><ul><li><p>checkout 默认下只会检出默认分支,不会 clone submodules,可以设置自定义</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Clone</span> <span class="string">repository</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">ref:</span> <span class="string">dev</span> <span class="comment"># checkout dev branch</span></span><br><span class="line">    <span class="attr">submodules:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ul><hr><h4 id="国内时区错位问题">国内时区错位问题</h4><ul><li>我在东八区,布置的 GitHub Action 是 0 点执行<ul><li>结果是在早上八点多才执行的(大概是八点半左右,误差&lt;5min)</li><li>因为 GitHub 服务器不是在国内,时区不同,其对应的大概是欧洲伦敦那块的标准时区.</li></ul></li><li><code>结论</code>:布置 Action 定时任务时,设置的时间要早八个小时(对应东八区)</li></ul><hr><h3 id="JsDelivr-刷新缓存">JsDelivr-刷新缓存</h3><blockquote><p>把 <code>cdn.jsdelivr.net</code> 换为 <code>purge.jsdelivr.net</code> 访问几次 <sup id='cite_ref-2'><a href="#cite_note-2">[2]</a></sup></p></blockquote><ul><li><p>返回的 JSON 显示 cdn 更新时间戳</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0p2xZacfrSQPrdsO&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;finished&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2022-03-26T05:31:48.172Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;/gh/Weidows-projects/live2d-moc3/dist/live2d.min.js&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;throttled&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;throttlingReset&quot;</span><span class="punctuation">:</span> <span class="number">3554</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>最近测试似乎失效了…</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="凭证和权限">凭证和权限</h2><h3 id="问题一">问题一</h3><ul><li><p>本地 git 有时候会遇到 github 凭证失效问题</p></li><li><p>在 VScode 里的 git 仓库失效后会老是催你登陆,没完没了</p><ul><li>(VScode 让你登录后只是暂时性的,你关闭后就还是会失效)</li></ul><hr></li><li><p>解决办法: VScode 让登录时一次,然后保存凭证就好了!</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="keyword">global</span> credential.helper <span class="keyword">store</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="问题二">问题二</h3><ul><li><p>推送时报:“无权限推送到 xxx 仓库”</p><p>问题原因是<code>本地的认证失效了</code>,但是 Git 并不会自动清除让你重新认证</p></li><li><p>我遇到这个问题是在 Git 某次更新后, <code>credential.helper store</code> 情况下.</p><p>解决办法: 删掉 <code>~/.git-credentials</code> 这个文件,它失效了,重新认证一下就好</p></li></ul><hr><h3 id="问题三">问题三</h3><ul><li><p>push 本地仓库到 github 时遇到:</p><blockquote><p>refusing to allow an OAuth App to create or update workflow `.github/workflo</p></blockquote><p>这是由于仓库中更改了 workflow(github-action) 的内容,而且本地 git 仓库是用 OAuth 方式认证的</p><hr></li><li><p>解决办法的话,网上其他文章是一水的改凭据 (我不想这么干)</p><p>两种办法,配置 ssh-key 或者可以试着安装 <code>github-cli</code> ,然后用 PTA (personal access token) 认证登录 (如果已经登录过就再次刷新登录)</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gh auth login</span><br><span class="line"></span><br><span class="line">是否用<span class="function"><span class="title">github</span>-cli来认证github网站 -&gt;</span> 是</span><br><span class="line">HTTPS/SS<span class="function"><span class="title">h</span> -&gt;</span> 选HTTPS</span><br><span class="line">填入PTA登录成功</span><br></pre></td></tr></table></figure><hr></li><li><p>成功后可以看到 ~/.gitconfig 多了几行</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[credential &quot;https://github.com&quot;]</span><br><span class="line">  helper = !D:<span class="symbol">\\</span>Game<span class="symbol">\\</span>Scoop<span class="symbol">\\</span>apps<span class="symbol">\\</span>Github-CLI<span class="symbol">\\</span>current<span class="symbol">\\</span>bin<span class="symbol">\\</span>gh.exe auth git-credential</span><br></pre></td></tr></table></figure><p>现在再次推送应该没问题了.</p></li></ul><hr><h3 id="问题四">问题四</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; git pull <span class="comment">--tags origin master</span></span><br><span class="line">From <span class="keyword">https</span>://github.com/Weidows-projects/Programming-Configuration</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line">hint: You have divergent branches <span class="keyword">and</span> need <span class="built_in">to</span> specify how <span class="built_in">to</span> reconcile them.</span><br><span class="line">hint: You can <span class="built_in">do</span> so <span class="keyword">by</span> running <span class="literal">one</span> <span class="keyword">of</span> <span class="keyword">the</span> following commands sometime <span class="keyword">before</span></span><br><span class="line">hint: your next pull:</span><br><span class="line">hint:</span><br><span class="line">hint:   git config pull.rebase <span class="literal">false</span>  <span class="comment"># merge (the default strategy)</span></span><br><span class="line">hint:   git config pull.rebase <span class="literal">true</span>   <span class="comment"># rebase</span></span><br><span class="line">hint:   git config pull.ff only       <span class="comment"># fast-forward only</span></span><br><span class="line">hint:</span><br><span class="line">hint: You can <span class="built_in">replace</span> <span class="string">&quot;git config&quot;</span> <span class="keyword">with</span> <span class="string">&quot;git config --global&quot;</span> <span class="built_in">to</span> <span class="built_in">set</span> <span class="keyword">a</span> default</span><br><span class="line">hint: preference <span class="keyword">for</span> all repositories. You can also pass <span class="comment">--rebase, --no-rebase,</span></span><br><span class="line">hint: <span class="keyword">or</span> <span class="comment">--ff-only on the command line to override the configured default per</span></span><br><span class="line">hint: invocation.</span><br><span class="line">fatal: Need <span class="built_in">to</span> specify how <span class="built_in">to</span> reconcile divergent branches.</span><br></pre></td></tr></table></figure><ul><li><p>解决:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config pull.ff <span class="literal">false</span></span><br><span class="line">git config --global pull.rebase <span class="literal">false</span></span><br></pre></td></tr></table></figure><blockquote><p><a href="https://www.fenovice.com/">https://www.fenovice.com/</a></p></blockquote><p><code>更好的办法是换一个Git版本</code></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-38">借物表</h2><p><a name='cite_note-01' href='#cite_ref-01'>[1]</a>: <a href="https://www.jianshu.com/p/ff1877c5864e">git merge 的三种操作 merge, squash merge, 和 rebase merge</a></p><p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href="https://github.com/wayne0926/jsd">https://github.com/wayne0926/jsd</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> github </tag>
            
            <tag> gitee </tag>
            
            <tag> action </tag>
            
            <tag> branch </tag>
            
            <tag> release </tag>
            
            <tag> pages </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>成长路线(倒叙)</title>
      <link href="/post/others/Lord_road/"/>
      <url>/post/others/Lord_road/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-11-17 11:06:25 * @LastEditors: Weidows * @LastEditTime: 2021-07-04 11:07:21 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\others\Lord_road.md * @Description:成长路线--><ul><li><a href="#2021-07-04">2021-07-04</a></li><li><a href="#2021-03-14">2021-03-14</a><ul><li><a href="#%E6%B5%81%E9%87%8F%E5%BC%95%E5%85%A5">流量引入</a></li><li><a href="#%E7%94%9F%E5%AD%98%E5%91%A8%E6%9C%9F">生存周期</a></li><li><a href="#%E5%91%88%E7%8E%B0%E9%9A%BE%E5%BA%A6">呈现难度</a></li><li><a href="#%E4%BA%8E%E6%98%AF">于是</a></li></ul></li><li><a href="#2020-11-17">2020-11-17</a></li></ul><h2 id="2021-07-04">2021-07-04</h2><p>我犯了一个很大的错误</p><ul><li><p>我向来总是喜欢&quot;堡垒化学习&quot;,什么意思呢?</p><p>学到某一方面时不再走出这个小领域,并且企图把这块领域盖起很扎实的堡垒</p><p>看似没问题,打基础确实重要啊?</p></li></ul><p>但这导致我眼界受限,看东西很死,不到某个阶段就感觉学不会某个东西,而且学东西很喜欢时效化 (那种按部就班的学习)</p><p>走到现在我发现,大多数技术栈是从了解-&gt;熟悉-&gt;精通这么发展的</p><ul><li><p>我需要走理念性通吃道路:</p><p>最近在学 Spring,看到很多教程按照 Spring-&gt;SpringMVC-&gt;SpringBoot 这么来教的,并没有错误,我也感觉很正确</p><p>但现在我认为最适合我的道路是并行吃,把 IoC/AOP 理念弄懂 -&gt; 熟悉操作 -&gt; 研究源码 这么个道路更合适我</p></li></ul><blockquote><p>知识深度的价值在学习某个子进程中并没有知识广度高</p></blockquote><p>通俗点讲就是我在某一个小区域花死劲了.</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="2021-03-14">2021-03-14</h2><p>再寻信息流向.log 理理头绪</p><p>不得不说我这专业吃流量和用户量，个人并不想通过恶意营销和广告形式引流。<br>博客开了一段日子了，结合实际来看发现很多问题。此处与主流的视频媒体和公众号横向对比下。</p><h3 id="流量引入">流量引入</h3><p>不大不小的问题，通过 SEO 可以解决一部分弊病，品牌 IP 塑造前期格外艰难，即使有优秀的作品，在成相当的体量之前，用户量提升很小。<br>SEO 方面，谷歌＞必应＞百度，准确度和收录速度差好几条街</p><h3 id="生存周期">生存周期</h3><p>个人发现博客和网站的生存周期远远大于视频媒体。比如写个博客发在 CSDN 上，一般来说价值有效期在三年范围内。而同样的内容在视频媒体呈现上，价值生存周期比较难突破三个月。而最后的公众号，更是惨，点赞－收藏－之后没了，SEO 收录不到，推荐系统更是辣鸡。</p><h3 id="呈现难度">呈现难度</h3><p>视频＞公众号＞博客<br>也有一种现象，有的人视频做的贼好，但是内容吸引度低，上不高大上，下不接地气，精力收成比低。<br>公众号很容易上手，但是流量吸引极其靠人脉 IP，只能从其他平台已有 IP 进行横向迁移，其他途径，男上加男。<br>博客的话，更像是插排，它的功能用处和价值体现靠开发者本身，单说内容呈现难度来说很低，精力收成比较高，但是很大程度上不为大多数人所接受。</p><h3 id="于是">于是</h3><p>写到这里，就是为了记录一下，整理下思路，并寻找下一代内容呈现方式。<br>这或许是二十一世纪二十年代的风口，不知会被谁打破当局。</p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="2020-11-17">2020-11-17</h2><ul><li><p>JAVA 初级工程师 9k-15k 一般是 1-3 年的经验<br>要求：掌握<br>JAVA 基础，spring springmvc mybatis servlet restful，webservice，h5 css3 JavaScript jquery angular vue。<br>常用的服务器技术：tomcat，apache nginx。<br>git maven redis dubbo zookeeper<br>同时还有 多线程，设计模式，JAVA io nio<br>网络方面：tcp，udp，netty</p></li><li><p>JAVA 中级工程师 15k-25k 一般是 3-5 年的经验<br>要求：精通<br>springcloud dubbo。<br>还得熟悉一些中间件技术：分布式技术，rpc 技术，缓存，消息系统。<br>懂互联网业务，要求有大规模高并发访问 web 应用的经验。<br>熟悉一些虚拟化技术：docker，vmware，openstack。<br>深入理解数据结构和算法。<br>精通设计模式（至少常用的七八种设计模式必须达到精通的水平），就是能用到设计模式到项目中，让项目的代码更规范。</p></li><li><p>JAVA 高级工程师 25k-35k 一般是 3-5 年<br>得会开发，设计还得有领导能力，必须能带领一个团队，分析产品技术设计，负责新功能的技术开发，参与平台的需求分析，业务规划，帮助团队成员解决技术问题。决定技术方向和业务选型。<br>有些公司还会要求你了解大数据的一些技术；hadoop impala spark flink 主流的大数据框架<br>精通 jvm 内存管理，要会 jvm 调优<br>熟悉分布式常用技术，</p></li><li><p>JAVA 架构师（研发经理）40k-60k 一般是 5-10 年<br>参与微服务架构的设计和落地。要发觉和解决复杂问题，关键技术的公关和改进现有的架构。<br>就是着重于优化和架构设计的工作。要精通多线程，要有高并发，大数据处理的经验。可能会要求主导过大型高可用，高并发，分布式，自动化的项目经验。熟悉自动化部署技术比如 k8s</p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> 成长路线 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS学习笔记-(一)</title>
      <link href="/post/Web/css/css-1/"/>
      <url>/post/Web/css/css-1/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-11-10 00:49:54 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:22:11 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Web\css\css-1.md * @Description:CSS学习笔记--><ul><li><a href="#github-%E6%BA%90%E7%A0%81">GitHub 源码</a></li><li><a href="#%E9%9C%80%E8%A6%81%E4%BA%86%E8%A7%A3%E7%9A%84">需要了解的</a></li><li><a href="#%E6%A0%B7%E5%BC%8F%E5%BC%95%E5%85%A5">样式引入</a><ul><li><a href="#%E5%86%85%E9%83%A8%E6%A0%B7%E5%BC%8F">内部样式</a></li><li><a href="#%E5%A4%96%E9%83%A8%E6%A0%B7%E5%BC%8F">外部样式</a></li><li><a href="#%E8%A1%8C%E5%86%85%E6%A0%B7%E5%BC%8F">行内样式</a></li></ul></li><li><a href="#%E9%80%89%E6%8B%A9%E5%99%A8">选择器</a><ul><li><a href="#%E5%9F%BA%E6%9C%AC%E9%80%89%E6%8B%A9%E5%99%A8">基本选择器</a><ul><li><a href="#%E6%A0%87%E7%AD%BE%E9%80%89%E6%8B%A9%E5%99%A8">标签选择器</a></li><li><a href="#%E7%B1%BB%E9%80%89%E6%8B%A9%E5%99%A8">类选择器</a></li><li><a href="#id-%E9%80%89%E6%8B%A9%E5%99%A8">id 选择器</a></li></ul></li><li><a href="#%E5%B1%82%E6%AC%A1%E9%80%89%E6%8B%A9%E5%99%A8">层次选择器</a><ul><li><a href="#%E5%90%8E%E4%BB%A3%E9%80%89%E6%8B%A9%E5%99%A8">后代选择器</a></li><li><a href="#%E5%AD%90%E9%80%89%E6%8B%A9%E5%99%A8">子选择器</a></li><li><a href="#%E7%9B%B8%E9%82%BB%E5%85%84%E5%BC%9F%E9%80%89%E6%8B%A9%E5%99%A8">相邻(兄弟)选择器</a></li><li><a href="#%E9%80%9A%E7%94%A8%E5%85%84%E5%BC%9F%E9%80%89%E6%8B%A9%E5%99%A8">通用(兄弟)选择器</a></li></ul></li><li><a href="#%E7%BB%93%E6%9E%84%E4%BC%AA%E7%B1%BB%E9%80%89%E6%8B%A9%E5%99%A8">结构伪类选择器</a></li><li><a href="#%E5%B1%9E%E6%80%A7%E9%80%89%E6%8B%A9%E5%99%A8%E5%B8%B8%E7%94%A8">属性选择器(常用)</a></li></ul></li><li><a href="#%E7%BD%91%E9%A1%B5%E7%BE%8E%E5%8C%96">网页美化</a><ul><li><a href="#%E5%AD%97%E4%BD%93%E6%A0%B7%E5%BC%8F">字体样式</a></li><li><a href="#%E6%96%87%E6%9C%AC%E6%A0%B7%E5%BC%8F">文本样式</a></li><li><a href="#%E8%B6%85%E9%93%BE%E6%8E%A5%E4%BC%AA%E7%B1%BB">超链接伪类</a></li><li><a href="#%E5%88%97%E8%A1%A8">列表</a></li><li><a href="#%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B">盒子模型</a></li><li><a href="#%E5%9C%86%E8%A7%92%E8%BE%B9%E6%A1%86">圆角边框</a></li><li><a href="#%E9%98%B4%E5%BD%B1">阴影</a></li></ul></li></ul><h2 id="GitHub-源码"><a href="https://github.com/Weidows/Java/tree/master/Web/css">GitHub 源码</a></h2><h2 id="需要了解的">需要了解的</h2><ul><li>前端分离有利于 SEO 优化,便于搜索引擎收录<ul><li>Vue 框架极其难被收录</li><li>因为 Vue 框架加载时需要执行 JavaScript 来引入 HTML,CSS 或者 JavaScript,而搜索引擎的爬虫并不会执行,所以像是这种框架写出来的页面,本身就是个空壳,爬虫爬不到关键性的内容,所以 SEO 比较弱.</li></ul></li></ul><hr><h2 id="样式引入">样式引入</h2><ul><li>优先级: 行内样式&gt;内部样式&gt;外部样式</li></ul><h3 id="内部样式">内部样式</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><hr><h3 id="外部样式">外部样式</h3><ul><li>链接式(css3)</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;CSS/<span class="number">1</span><span class="selector-class">.css</span>&quot; /&gt;</span><br></pre></td></tr></table></figure><ul><li>导入式(不建议使用,css2 中的)</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="keyword">@import</span> url(<span class="string">&quot;CSS/1.css&quot;</span>);</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="行内样式">行内样式</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">h1</span> style=&quot;<span class="attribute">color</span>:aqua<span class="string">&quot;&gt;行内样式&lt;/h1&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="选择器-2">选择器</h2><h3 id="基本选择器">基本选择器</h3><ul><li>优先级: id &gt; class &gt; 标签</li></ul><h4 id="标签选择器">标签选择器</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: aqua;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="类选择器">类选择器</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.Span</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: chartreuse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="id-选择器">id 选择器</h4><ul><li>id 必须保证全局唯一</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#Div-3</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blueviolet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="层次选择器">层次选择器</h3><h4 id="后代选择器">后代选择器</h4><ul><li>在某个元素的后面所有</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 对于ul后面的所有p标签 */</span></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="子选择器">子选择器</h4><ul><li>只选择后面的一代</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 对于body里面第一代的p标签 */</span></span><br><span class="line"><span class="selector-tag">body</span> &gt; <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="相邻-兄弟-选择器">相邻(兄弟)选择器</h4><ul><li>对于选中的标签的下一个同级标签</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#action</span> + <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>类似上面,这个是选择后面所有的同级标签</li></ul><h4 id="通用-兄弟-选择器">通用(兄弟)选择器</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#action</span> ~ <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="结构伪类选择器">结构伪类选择器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 避免使用class,id选择器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* ul的第一个子元素 */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: violet;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* ul的最后一个子元素 */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 选中父级第一个元素(p1) */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">p</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">255</span>);</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 选中父级第二个类型为p的元素 */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">p</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: wheat;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 鼠标悬浮 */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">p</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: black;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>p1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>p2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>p3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>li1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>li2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>li3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="属性选择器-常用">属性选择器(常用)</h3><ul><li>相当于 class + id 选择器</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 选中demo类下的a标签</span></span></span><br><span class="line"><span class="comment"><span class="language-css">      这个不是讲解,这个只是页面初始化,好看些 */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.demo</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: violet;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: gainsboro;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font</span>: bold <span class="number">20px</span>/<span class="number">50px</span> Arial;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-css">      = 是绝对等于</span></span></span><br><span class="line"><span class="comment"><span class="language-css">      *= 是包含</span></span></span><br><span class="line"><span class="comment"><span class="language-css">      ^= 以这个开头</span></span></span><br><span class="line"><span class="comment"><span class="language-css">      $= 以这个结尾</span></span></span><br><span class="line"><span class="comment"><span class="language-css">      */</span></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 选中存在id属性的元素 */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">a</span><span class="selector-attr">[id]</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* background: yellow; */</span></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 选中对应属性的元素(属性值可以使用正则表达式!!!) */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">a</span><span class="selector-attr">[id=<span class="string">&quot;first&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* background: yellow; */</span></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 选中class中有links的元素 */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">a</span><span class="selector-attr">[class*=<span class="string">&quot;links&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* background: yellow; */</span></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 以http开头的元素 */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">a</span><span class="selector-attr">[herf^=<span class="string">&quot;http&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* background: yellow; */</span></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 以pdf结尾 */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">a</span><span class="selector-attr">[herf$=<span class="string">&quot;pdf&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* background: yellow; */</span></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item first&quot;</span> <span class="attr">id</span>=<span class="string">&quot;first&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">        <span class="attr">href</span>=<span class="string">&quot;http://blog.kuangstudy.com&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;links item active&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">title</span>=<span class="string">&quot;test&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span>2&lt;/a</span><br><span class="line">      &gt;</span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">here</span>=<span class="string">&quot;images/123.html&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">here</span>=<span class="string">&quot;images/123.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">here</span>=<span class="string">&quot;images/123.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">here</span>=<span class="string">&quot;abc&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item&quot;</span>&gt;</span>6<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">here</span>=<span class="string">&quot;/a.pdf&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item&quot;</span>&gt;</span>7<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">here</span>=<span class="string">&quot;/abc.pdf&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item&quot;</span>&gt;</span>8<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">here</span>=<span class="string">&quot;abc.doc&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item&quot;</span>&gt;</span>9<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">here</span>=<span class="string">&quot;abcd.doc&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="网页美化">网页美化</h2><h3 id="字体样式">字体样式</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="comment">/* 从左到右依次检查是否有指定字体,有的话就使用.注意像是第一个T罗马字体这种分段的要用单引号括起来,常用字体一般是微软雅黑,宋体,T罗马 */</span></span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Times New Roman&quot;</span>, Times, serif;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 谷歌浏览器字体默认16px(会根据屏幕大小略有变动) */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 跟VScode一样,实际开发中常用实际数字表示加粗/变细(100-900)m默认宽度是400/normal,bold是加粗(700),不用常变细 */</span></span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 文字样式 正常/斜体italic,一般不给文字加倾斜,常用的是把倾斜字体(em,i)正过来*/</span></span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 行高 */</span></span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*复合属性font:font-style font-weight font-size/line-height font-family,中间空格分隔开,顺序不能颠倒,除了font-size和-family之外其他的可以省略取默认值 */</span></span><br><span class="line">  <span class="attribute">font</span>: italic <span class="number">700</span> <span class="number">16px</span>/<span class="number">20px</span> <span class="string">&quot;Times New Roman&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="文本样式">文本样式</h3><ul><li>颜色 <code>color</code></li><li>对齐方式 <code>text-align</code></li><li>首行缩进 <code>text-indent</code></li><li>行高 <code>line-height</code></li><li>装饰 <code>text-decoration</code></li></ul><blockquote><p><a href="https://www.cnblogs.com/xiaocaiyuxiaoniao/p/10407830.html">CSS 总结 div 中的内容垂直居中的五种方法</a></p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>textStyle<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 约定俗成的,把比较重点的内容一般用span修饰便于修改 */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#span1</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        color指定方法:</span></span></span><br><span class="line"><span class="comment"><span class="language-css">          1.red</span></span></span><br><span class="line"><span class="comment"><span class="language-css">          2.#FF0000</span></span></span><br><span class="line"><span class="comment"><span class="language-css">          3.rgb(255,0,0)/rgb(100%,0%,0%)</span></span></span><br><span class="line"><span class="comment"><span class="language-css">          4.rgba(255,0,0,0.9)</span></span></span><br><span class="line"><span class="comment"><span class="language-css">          开发中最常用的是2.十六进制方式</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.p1</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 首行缩进2字符 */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-indent</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 居中对齐 */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 块高 &amp;&amp; 行高(这两个高度一致就可以上下居中) */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">line-height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: green;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 上中下划线(这三个只能同时生效一个) */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* text-decoration: overline; */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* text-decoration: line-through; */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: underline;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* 文本相对图片垂直居中 */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">img</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#span2</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">vertical-align</span>: middle;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>欢迎学习<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;span1&quot;</span>&gt;</span>Java<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./assets/2020-11-17-22-38-18.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;span2&quot;</span>&gt;</span>djaowidjalwdjaoidj<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="超链接伪类">超链接伪类</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: black;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: orange;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#QQ</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 文字阴影,水平偏移,垂直偏移,阴影半径 */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-shadow</span>: aqua <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>秦疆老师的CSS教程，快速上手CSS必备<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>从基础到进阶，每一个小知识都带有小案例，学习不枯燥<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>狂神说Java系列，努力打造通俗易懂的教程<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;QQ&quot;</span>&gt;</span>QQ交流群 : 664386224<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="列表">列表</h3><ul><li><p>HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>列表样式<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>全部商品分类<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>图书<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>音像<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>数字商品<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>家用电器<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>手机<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>数码<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>电脑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>办公<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>家居<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>家装<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>厨具<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>服饰鞋帽<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>个性化妆<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>礼品箱包<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>钟表<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>珠宝<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>食品饮料<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>保健食品<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>彩票<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>旅行<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>充值<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>票务<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">245</span>, <span class="number">245</span>, <span class="number">245</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">text-indent</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="comment">/* list-style</span></span><br><span class="line"><span class="comment">    none 去掉圆点</span></span><br><span class="line"><span class="comment">    circle 空心圆</span></span><br><span class="line"><span class="comment">    decimal 序号</span></span><br><span class="line"><span class="comment">    square 正方形</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">text-indent</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">  <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="盒子模型">盒子模型</h3><p><img src="https://www.helloimg.com/images/2022/02/27/GVaJph.png" alt="RaeLiJknrlFpfYQ"></p><h3 id="圆角边框">圆角边框</h3><ul><li>美化常用,比如头像都是方形的图片,用这个来把头像框变成圆形</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">5px</span> solid red;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span> <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 顺序: 左上,右上,右下,左下(顺时针方向) */</span></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./image/8096a62be4c90b28aac3b3c59333a81e.gif&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>效果图</p><p><img src="https://www.helloimg.com/images/2022/02/27/GVE6RE.png" alt="coJYANqxg8vXuM2"><br><img src="https://www.helloimg.com/images/2022/02/27/GVJJJD.png" alt="NniKVFIq9AuBhts"></p></li></ul><hr><h3 id="阴影">阴影</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">10px</span> solid red;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">100px</span> yellow;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">100px</span> yellow;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./image/8096a62be4c90b28aac3b3c59333a81e.gif&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>效果图<br><img src="https://www.helloimg.com/images/2022/02/27/GV3alA.png" alt="tNEI4Mk93qx5HCv"></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字符编码转换器</title>
      <link href="/post/Java/TransformCharset/"/>
      <url>/post/Java/TransformCharset/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:15:08 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\TransformCharset.md--><ul><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#%E6%BA%90%E7%A0%81">源码</a></li></ul><h2 id="简介-3">简介</h2><ul><li>这是个文件字符编码转换程序</li><li>只能支持文本文件,比如<code>.txt</code>/<code>.cpp</code>/<code>.java</code>等等,不支持二进制文件(二进制文件也用不到这个 2333)</li><li>OK ,上源码,具体使用下面<code>main方法</code>里有简介</li></ul><hr><h2 id="源码">源码</h2><ul><li><code>TransformCharset.java</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @?: *********************************************************************</span></span><br><span class="line"><span class="comment"> * @Author: Weidows</span></span><br><span class="line"><span class="comment"> * @Date: 2020-10-31 14:49:51</span></span><br><span class="line"><span class="comment"> * @LastEditors: Weidows</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2021-01-02 13:33:25</span></span><br><span class="line"><span class="comment"> * @FilePath: \Weidows\Java\src\main\java\twenty\october\stream\TransformCharset.java</span></span><br><span class="line"><span class="comment"> * @Description:转换文件编码格式</span></span><br><span class="line"><span class="comment"> * 原理:</span></span><br><span class="line"><span class="comment"> *    1.把文件读入并转换格式,输出到./bufferFile这个中间文件内</span></span><br><span class="line"><span class="comment"> *    2.把原文件删除并把中间文件回传</span></span><br><span class="line"><span class="comment"> * Java对象层面的操作使单一文件改写困难,而且多对象同时操作同一文件会覆写.</span></span><br><span class="line"><span class="comment"> * @!: *********************************************************************</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// package twenty.october.stream;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransformCharset</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="literal">null</span>, charsetName_input = <span class="literal">null</span>, charsetName_output = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ifFile</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">    <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;File/Path not found: &quot;</span> + path);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      runCircle(file);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>: 通过递归获取所有文件</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;File&#125; file</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> &#123;*&#125;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">runCircle</span><span class="params">(File file)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="keyword">if</span> (file.isFile()) &#123;</span><br><span class="line">      transformCharset(file);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      File[] files = file.listFiles(); <span class="comment">//获取目录下的东西</span></span><br><span class="line">      <span class="keyword">if</span> (files != <span class="literal">null</span> &amp;&amp; files.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">          runCircle(f);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">transformCharset</span><span class="params">(File file)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">BufferedReader</span> <span class="variable">bufferReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file.getPath()), charsetName_input));</span><br><span class="line">    <span class="type">BufferedWriter</span> <span class="variable">bufferWriteFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;./bufferFile&quot;</span>), charsetName_output));</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// 中间变量</span></span><br><span class="line">    <span class="type">char</span>[] string = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// 把字符格式转换并传入中间文件</span></span><br><span class="line">    <span class="keyword">while</span> ((length = bufferReader.read(string)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      bufferWriteFile.write(string, <span class="number">0</span>, length);</span><br><span class="line">    &#125;</span><br><span class="line">    bufferReader.close();</span><br><span class="line">    bufferWriteFile.flush();</span><br><span class="line">    bufferWriteFile.close();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// 把中间文件再回传</span></span><br><span class="line">    <span class="type">BufferedReader</span> <span class="variable">bufferReadFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;./bufferFile&quot;</span>), charsetName_output));</span><br><span class="line">    <span class="type">BufferedWriter</span> <span class="variable">bufferWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file.getPath()), charsetName_output));</span><br><span class="line">    <span class="keyword">while</span> ((length = bufferReadFile.read(string)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      bufferWriter.write(string, <span class="number">0</span>, length);</span><br><span class="line">    &#125;</span><br><span class="line">    bufferReadFile.close();</span><br><span class="line">    bufferWriter.flush();</span><br><span class="line">    bufferWriter.close();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;./bufferFile&quot;</span>).delete();</span><br><span class="line">    System.out.println(<span class="string">&quot;TransformCharset done:\t&quot;</span> + file.getPath());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">TransformCharset</span><span class="params">(String path, String charsetName_input, String charsetName_output)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.path = path;</span><br><span class="line">    <span class="built_in">this</span>.charsetName_input = charsetName_input;</span><br><span class="line">    <span class="built_in">this</span>.charsetName_output = charsetName_output;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 程序入口:</span></span><br><span class="line"><span class="comment">     * path是文件/文件夹路径</span></span><br><span class="line"><span class="comment">     * TransformCharset()构造器第一个参数是path,第二个是文件原编码形式,第三个参数是想要改成的编码形式.</span></span><br><span class="line"><span class="comment">     * 对象只有一个可供调用的入口方法.isFile()</span></span><br><span class="line"><span class="comment">     * 完全可以有多个path,多个对象,随便玩~</span></span><br><span class="line"><span class="comment">     * 因为涉及IO操作,必须有try-catch,这个不能删去.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="string">&quot;./Java/src/main/java/twenty/october/stream/1&quot;</span>;</span><br><span class="line">    <span class="type">TransformCharset</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TransformCharset</span>(path, <span class="string">&quot;GB2312&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      t.ifFile();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ! 附:</span></span><br><span class="line"><span class="comment"> * Java中。GBK和GB2312都是1个汉字占2个字节，UTF-8是1个汉字占3个字节。而ISO编码则是1上汉字1个字节。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 测试成功:</span></span><br><span class="line"><span class="comment"> *    UTF-8转GBK/GB2312没有问题</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 实际转化中会存在很多问题:</span></span><br><span class="line"><span class="comment"> *    比如UTF-8 -&gt; GBK/GB2312 -&gt; UTF-8 回转会有问题(或需要中间编码中转)</span></span><br><span class="line"><span class="comment"> *    想要转为GBK有些文件却识别为为GB2312</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 详见参考:https://www.cnblogs.com/clnchanpin/p/6892870.html</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 编码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javadoc使用 &amp;&amp; 命名规范</title>
      <link href="/post/Java/Javadoc/"/>
      <url>/post/Java/Javadoc/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:08:44 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\Javadoc.md--><ul><li><a href="#%E6%96%87%E6%A1%A3%E6%B3%A8%E9%87%8A%E6%96%B9%E6%B3%95">文档注释方法</a></li><li><a href="#%E5%B8%B8%E7%94%A8%E6%A0%87%E7%AD%BE">常用标签</a></li><li><a href="#%E5%B8%B8%E7%94%A8">常用@</a></li><li><a href="#generate">Generate</a><ul><li><a href="#%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BD%93%E5%89%8D%E7%9B%AE%E5%BD%95%E7%94%9F%E6%88%90-javadoc-%E6%96%87%E6%A1%A3%E6%B3%A8%E6%84%8F%E5%AD%98%E6%94%BE%E7%9B%AE%E5%BD%95%E6%9C%80%E5%A5%BD%E6%98%AF%E7%A9%BA%E7%9A%84%E4%B8%8D%E7%84%B6%E4%BC%9A%E4%B8%80%E5%9B%A2%E4%B9%B1%E9%BA%BB">在命令行当前目录生成 JavaDoc 文档,注意存放目录最好是空的,不然会…一团乱麻!</a></li></ul></li><li><a href="#java-%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83">Java 命名规范</a></li></ul><h2 id="文档注释方法">文档注释方法</h2><ul><li>在类/方法上面写个<code>/**</code>就会出来</li><li>文档注释会在代码提示中显示,也可以用 Javadoc 生成文档</li><li>其中的标签不用闭合,比如写<code>&lt;p&gt;</code>的话用不着写<code>&lt;/p&gt;</code>,但是写上也不会错</li></ul><hr><h2 id="常用标签">常用标签</h2><ul><li><code>&lt;p&gt;</code> Passage 段落标签</li></ul><hr><h2 id="常用">常用@</h2><ul><li><code>@author</code></li><li><code>@version</code></li><li><code>@since</code></li><li><code>@see</code></li><li><code>@link</code></li><li><code>@code</code></li><li><code>@param</code></li><li><code>@return</code></li><li><code>@exception</code></li><li><code>@throws</code></li></ul><hr><h2 id="Generate">Generate</h2><h4 id="在命令行当前目录生成-JavaDoc-文档-注意存放目录最好是空的-不然会…一团乱麻">在命令行当前目录生成 JavaDoc 文档,注意存放目录最好是空的,不然会…一团乱麻!</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">javadoc</span> -encoding UTF-<span class="number">8</span> -charset UTF-<span class="number">8</span> Path/文件名</span><br></pre></td></tr></table></figure><hr><h2 id="Java-命名规范">Java 命名规范</h2><ol><li><p>见名知意</p><ol><li><p>不要用中文/拼音命名</p></li><li><p>即使命名不规范也可能不会出 bug,但是问题很大!</p></li></ol></li><li><p>驼峰命名(变量,方法)</p></li><li><p>类,首字母大写,驼峰命名</p></li><li><p>包,全小写命名+下划线</p></li><li><p>常量/枚举,全大写命名+下划线</p></li></ol><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> javadoc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些字体和VScode字体设置</title>
      <link href="/post/others/font/"/>
      <url>/post/others/font/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-03-21 17:10:56 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\others\font.md--><ul><li><a href="#%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93">等宽字体</a></li><li><a href="#%E9%9D%9E%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93">非等宽字体</a></li><li><a href="#%E4%B8%AD%E6%96%87%E5%AD%97%E4%BD%93">中文字体</a></li><li><a href="#vscode-%E4%B8%AD%E5%AD%97%E4%BD%93%E7%B3%BB%E5%88%97%E8%AE%BE%E7%BD%AE">VScode 中字体系列设置</a></li><li><a href="#vscode-%E4%B8%AD%E5%AE%9A%E4%B9%89%E5%85%B3%E9%94%AE%E5%AD%97%E4%BD%93%E6%A0%B7%E5%BC%8F">VScode 中定义关键字体样式</a></li><li><a href="#%E8%BF%9E%E5%AD%97%E6%95%88%E6%9E%9C"><code>连字效果</code></a><ul><li><a href="#%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D">简单介绍</a></li><li><a href="#vscode-%E4%B8%AD%E5%BC%80%E5%90%AF%E8%BF%9E%E5%AD%97">VScode 中开启连字</a></li></ul></li></ul><h2 id="等宽字体">等宽字体</h2><ul><li><p><code>Fira Code</code>(Most popular)</p></li><li><p><code>Operator Mono</code>(Very strange &amp;&amp; beautiful)</p></li><li><p><code>Victor Mono</code></p></li><li><p><code>Hactor</code>(Operator+Victor)</p></li><li><p><code>Dank Mono</code>(Operator Like)</p></li><li><p><code>Jetbrains Mono</code></p></li><li><p><code>Source Code Pro</code></p></li><li><p><code>Consolas</code>(Windows 自带,备用货)</p><hr></li><li><p>Operator Mono 字体<br><img src="https://www.helloimg.com/images/2022/02/27/GV3OME.png" alt="jhKmYOnMX1pecEI"></p></li></ul><h2 id="非等宽字体">非等宽字体</h2><ul><li><p><code>Comic Sans MS</code></p></li><li><p><code>Candara</code></p></li><li><p><code>Lemon</code></p></li><li><p><code>Gen Jyuu Gothic Normal</code>(思源柔黑)</p><hr></li></ul><h2 id="中文字体">中文字体</h2><ul><li><code>问藏书房</code></li><li><code>汉仪楷体简</code></li><li><code>米开飘逸行楷</code></li><li><code>思源柔黑</code></li></ul><hr><h2 id="VScode-中字体系列设置">VScode 中字体系列设置</h2><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;editor.fontFamily&quot;</span>: <span class="type"></span>&quot;<span class="string">&#x27;Operator Mono Lig&#x27;</span>,<span class="string">&#x27;问藏书房&#x27;</span><span class="string">&quot;</span></span><br></pre></td></tr></table></figure><ul><li>字体系列从左到右依次为显示优先级,比如上面<code>Operator Mono Lig</code>为英文字体,而<code>问藏书房</code>为中文字体,这样设置后,VScode 英文显示为前者,中文显示为后者</li><li>如果某类型字体重复设置,则优先取左边的(比如字体系列为<code>Operator Mono Lig</code>和<code>Fira Code</code>,则优先选择显示<code>Operator Mono Lig</code>)</li><li>字体系列只能填入字体集的名字,比如<code>Fira Code</code>,不能填其中的某个分类,如<code>Fira Code Bold</code><ul><li>另外,VScode 默认选择使用的是字体集里面<code>Book</code>/<code>Medium</code>类型字体,如果在系统字体库中没安装这种默认类型的,VScode 才会去找<code>Bold</code>/<code>Italic</code>类型的</li><li>所以,如果想要把 VScode 默认字体改成<code>Italic(斜体)</code>,需要把对应字体集中的<code>Book</code>/<code>Medium</code>等默认类型字体删除.</li></ul></li></ul><hr><h2 id="VScode-中定义关键字体样式">VScode 中定义关键字体样式</h2><ul><li>在 VScode 设置中加入如下配置(可以根据需要酌情调整)</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;editor.tokenColorCustomizations&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;textMateRules&quot;</span>: [</span><br><span class="line">    &#123;<span class="regexp">//</span>监视下面关键词换成斜体字</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;italic font&quot;</span>,</span><br><span class="line">      <span class="string">&quot;scope&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;keyword&quot;</span>,</span><br><span class="line">        <span class="string">&quot;storage&quot;</span>,</span><br><span class="line">        <span class="string">&quot;keyword.control.import&quot;</span>,</span><br><span class="line">        <span class="string">&quot;keyword.control.default&quot;</span>,</span><br><span class="line">        <span class="string">&quot;keyword.control.from&quot;</span>,</span><br><span class="line">        <span class="string">&quot;keyword.operator.new&quot;</span>,</span><br><span class="line">        <span class="string">&quot;keyword.control.export&quot;</span>,</span><br><span class="line">        <span class="string">&quot;keyword.control.flow&quot;</span>,</span><br><span class="line">        <span class="string">&quot;storage.type.class&quot;</span>,</span><br><span class="line">        <span class="string">&quot;storage.type.function&quot;</span>,</span><br><span class="line">        <span class="string">&quot;storage.type&quot;</span>,</span><br><span class="line">        <span class="string">&quot;storage.type.class&quot;</span>,</span><br><span class="line">        <span class="string">&quot;variable.language&quot;</span>,</span><br><span class="line">        <span class="string">&quot;variable.language.super&quot;</span>,</span><br><span class="line">        <span class="string">&quot;variable.language.this&quot;</span>,</span><br><span class="line">        <span class="string">&quot;meta.class&quot;</span>,</span><br><span class="line">        <span class="string">&quot;meta.var.expr&quot;</span>,</span><br><span class="line">        <span class="string">&quot;constant.language.null&quot;</span>,</span><br><span class="line">        <span class="string">&quot;support.type.primitive&quot;</span>,</span><br><span class="line">        <span class="string">&quot;entity.name.method.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;entity.other.attribute-name&quot;</span>,</span><br><span class="line">        <span class="string">&quot;punctuation.definition.comment&quot;</span>,</span><br><span class="line">        <span class="string">&quot;text.html.basic entity.other.attribute-name.html&quot;</span>,</span><br><span class="line">        <span class="string">&quot;text.html.basic entity.other.attribute-name&quot;</span>,</span><br><span class="line">        <span class="string">&quot;tag.decorator.js entity.name.tag.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;tag.decorator.js punctuation.definition.tag.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;source.js constant.other.object.key.js string.unquoted.label.js&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;fontStyle&quot;</span>: <span class="string">&quot;italic&quot;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;<span class="regexp">//</span>监视下面关键词换成粗体字</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;bold font&quot;</span>,</span><br><span class="line">      <span class="string">&quot;scope&quot;</span>: [</span><br><span class="line">      <span class="regexp">//</span> <span class="string">&quot;text&quot;</span>,</span><br><span class="line">        <span class="string">&quot;comment&quot;</span>,</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;fontStyle&quot;</span>: <span class="string">&quot;bold&quot;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="连字效果"><code>连字效果</code></h2><h3 id="简单介绍">简单介绍</h3><ul><li>连字效果是将<code>&gt;=</code>,<code>&lt;=</code>,<code>==</code>等等连接起来的效果,编程方面比较好看,<code>需要使用的字体支持</code>.</li><li>下载的字体文件一般有<code>.ttf</code> / <code>.otf</code>,分别对应 True Type Font 和 Open Type Font<ul><li>其中只有 otf 支持开启连字效果(它支持,但是.otf 的字体不一定带有连字效果)</li><li>.ttf 肯定打不开,.otf 有的字体支持有的不支持(而且同一种字体的.otf 有可能也存在&quot;带有连字效果和不带有连字效果&quot;两种文件)</li><li>font 文件带有<code>Lig</code>/<code>Ligatures</code>的话<code>有可能</code>是带有连字效果的字体</li></ul></li></ul><h3 id="VScode-中开启连字">VScode 中开启连字</h3><ul><li>“editor.fontLigatures”: true</li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> vscode </tag>
            
            <tag> font </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VScode撞上赛博朋克风!赛高!</title>
      <link href="/post/tools/vscode/custom_css/"/>
      <url>/post/tools/vscode/custom_css/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-03-21 17:03:29 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\tools\vscode\custom_css.md--><ul><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#%E9%9C%80%E8%A6%81%E7%9A%84%E4%B8%9C%E8%A5%BF">需要的东西</a></li><li><a href="#css-%E5%BC%95%E5%85%A5">CSS 引入</a></li><li><a href="#%E6%BA%90%E7%A0%81%E9%93%BE%E6%8E%A5">源码链接</a></li></ul><h2 id="简介-14">简介</h2><ul><li>大半夜水群,发现群友扯皮发了一张美照(就是代码)</li><li>惊艳老夫一整天! 赶紧想办法把他整出来!<br><img src="https://www.helloimg.com/images/2022/02/27/GV3srT.png" alt="23XdzqSlUGZPcym"></li><li>这种荧光效果是 CSS 渲染成的,VScode 插件商店有现成的主题可供使用<ul><li>想广泛了解可以搜索关键词<code>SynthWave</code>,会有不少主题可供使用,但是需要注意如果你想应用这种荧光主题必须舍弃现在你所喜欢的某个主题了…</li><li>于是,对我们魔改狂来说,这只是开始!</li></ul></li></ul><hr><h2 id="需要的东西">需要的东西</h2><ul><li><p><code>Custom CSS and JS Loader</code></p><ul><li>这是 VScode 商店里的一个插件,用来引入用户想引入的 CSS/JS 文件</li><li>这篇文章只需要下载这一个插件,其他的用不着~~~</li></ul><hr></li><li><p>我们想引入的 CSS 渲染文件</p><ul><li>这个由于不同人,不同审美,在此只放下我个人的 CSS 源码</li><li>如果你想找其他版本可以搜<code>SynthWave</code>来寻找符合心意的主题,并定位其中的 CSS,拿过来供自己使用(不违法:)</li></ul></li></ul><hr><h2 id="CSS-引入">CSS 引入</h2><ul><li><p>在 VScode 设置文件里加入下面的代码</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;vscode_custom_css.imports&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;[file:///D:/Game/Demo/Weidows/.vscode/lights-on.css](https://fastly.jsdelivr.net/gh/Weidows/Weidows/.vscode/lights-on.css)&quot;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure></li><li><p>注意<code>路径</code>和<code>文件名</code>对应好,<code>必须修改</code></p></li><li><p>上面步骤完成并引入下面 CSS 后,就会产生如下效果:</p><ul><li><p>初版</p><p><img src="https://www.helloimg.com/images/2022/02/27/GV32ct.png" alt="20201124011913"></p></li><li><p>二版</p><img src="https://www.helloimg.com/images/2022/02/27/GVstDu.png" alt="20210308184630" /></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="源码链接">源码链接</h2><blockquote><p><a href="https://github.com/Weidows-projects/weidows-beautify-pack/blob/main/css/lights-on.css">源码链接</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
          <category> vscode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
            <tag> css </tag>
            
            <tag> 美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VScode中Java出现&quot;none-project&quot;错误(无法识别Java-Maven项目)</title>
      <link href="/post/Java/deprecated/VScode_project_errors/"/>
      <url>/post/Java/deprecated/VScode_project_errors/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-09-02 15:30:55 * @FilePath: \Blog-private\source\_posts\Java\VScode_project_errors.md--><ul><li><a href="#%E9%97%AE%E9%A2%98">问题</a></li><li><a href="#%E8%A7%A3%E5%86%B3">解决</a></li></ul><h2 id="问题-3">问题</h2><ul><li>在打开 VScode 后 Java 虚拟机已经启动,但是并没有识别工作区里面 Maven 的项目</li><li>所以 Java 只能提供语法上的错误检查,无法基于项目提供开发环境(包括编译)</li><li>总之就是—&gt;<code>报错(none-project)</code>,而且大部分功能无法使用</li></ul><h2 id="解决">解决</h2><ul><li>经过一番折腾发现这是 Project 检测机制的问题,如下</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 工作区文件夹</span><br><span class="line"><span class="bullet">  -</span> 文件夹A</span><br><span class="line"><span class="bullet">    -</span> Maven项目A</span><br><span class="line"><span class="bullet">  -</span> 文件夹B</span><br><span class="line"><span class="bullet">    -</span> Maven项目B</span><br></pre></td></tr></table></figure><ul><li>上面那种层级结构会使得 Java 虚拟机在启动构建时 <code>Maven 项目不被识别</code>.</li></ul><hr><ul><li><p>VScode 只能识别<code>工作区本身</code>或者<code>工作区向内一层目录</code>是 Maven 项目,这样才能使 Java 项目运行环境成功构建启动.</p></li><li><p>按照以下方法可以解决此问题:</p><ul><li>解决方案层级一</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 工作区文件夹<span class="selector-tag">A</span></span><br><span class="line">  - Maven项目<span class="selector-tag">A</span></span><br><span class="line">- 工作区文件夹<span class="selector-tag">B</span></span><br><span class="line">  - Maven项目<span class="selector-tag">B</span></span><br></pre></td></tr></table></figure><ul><li>解决方案层级二</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 工作区文件夹</span><br><span class="line"><span class="bullet">  -</span> Maven项目A</span><br><span class="line"><span class="bullet">  -</span> Maven项目B</span><br></pre></td></tr></table></figure><ul><li>解决方案层级三</li></ul><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>工作区为Maven项目A</span><br><span class="line"><span class="bullet">- </span>工作区为Maven项目B</span><br></pre></td></tr></table></figure></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> deprecated </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> vscode </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🉑pwsh极致专攻</title>
      <link href="/post/experience/shell/pwsh/"/>
      <url>/post/experience/shell/pwsh/</url>
      
        <content type="html"><![CDATA[<h1>pwsh 极致专攻</h1><!-- * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:48:59 * @FilePath: \Blog-private\source\_posts\experience\shell\pwsh.md--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#pwsh-%E6%9E%81%E8%87%B4%E4%B8%93%E6%94%BB">pwsh 极致专攻</a><ul><li><a href="#%E9%A2%84%E8%A7%88">预览</a></li><li><a href="#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">环境配置</a></li><li><a href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6">安装插件</a></li><li><a href="#%E5%90%AF%E7%94%A8%E4%B8%BB%E9%A2%98%E5%8F%8A%E6%8F%92%E4%BB%B6">启用主题及插件</a></li><li><a href="#oh-my-posh">oh-my-posh</a></li><li><a href="#%E5%90%AF%E7%94%A8%E7%AE%A1%E7%90%86%E5%91%98%E6%A8%A1%E5%BC%8F">启用管理员模式</a></li></ul></li></ul></blockquote><h2 id="预览">预览</h2><p><img src="https://www.helloimg.com/images/2022/02/27/GV3nLD.png" alt="siDz8M1QlGIanE3"></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="环境配置-3">环境配置</h2><ul><li><p>不同于 Windows 自带的 Windows PowerShell,这个 PowerShell(也叫 posh/pwsh) 需要另行安装(百度搜,安装上就行)</p><ul><li><p>配置环境变量:Path 里面+ <code>D:\Game\Demo\PowerShell\</code></p></li><li><p>如果用 VScode 的话,实际上不设置环境变量也行,因为在 VScode 内需要指定 powershell 路径</p></li></ul></li><li><p>Scoop 安装全自动,不需要配置.</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">scoop </span><span class="keyword">install </span>pwsh</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="安装插件">安装插件</h2><ul><li><p><code>oh-my-posh</code> (Posh 增强主题)</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install</span><span class="operator">-</span><span class="built_in">Module</span> <span class="variable">oh</span><span class="operator">-</span><span class="variable">my</span><span class="operator">-</span><span class="variable">posh</span></span><br></pre></td></tr></table></figure><img src="https://www.helloimg.com/images/2022/02/27/GVFbWK.png" alt="20211029164044" /><hr></li><li><p><code>PoshFuck</code></p><p>不必在意格式,复制就行</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Set-ExecutionPolicy RemoteSigned</span><br><span class="line">  iex ((<span class="keyword">new</span>-<span class="keyword">object</span> net.webclient).<span class="constructor">DownloadString(&#x27;<span class="params">https</span>:<span class="operator">/</span><span class="operator">/</span><span class="params">raw</span>.<span class="params">githubusercontent</span>.<span class="params">com</span><span class="operator">/</span><span class="params">mattparkes</span><span class="operator">/</span>PoShFuck<span class="operator">/</span><span class="params">master</span><span class="operator">/</span>Install-TheFucker.<span class="params">ps1</span>&#x27;)</span>)</span><br></pre></td></tr></table></figure><img src="https://www.helloimg.com/images/2022/02/27/GVA1AR.png" alt="20211029164014" /><hr></li><li><p><code>posh-git</code> (用于扩展 Posh 里的 Git 自动补全)</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install</span><span class="operator">-</span><span class="built_in">Module</span> <span class="variable">posh</span><span class="operator">-</span><span class="variable">git</span></span><br></pre></td></tr></table></figure><img src="https://www.helloimg.com/images/2022/02/27/GVP41Y.png" alt="20211029163651" /><hr></li><li><p><code>PSReadline</code> (Windows 自带,可以直接使用)</p><ul><li><p>预测显示历史命令</p></li><li><p>上下左右高级补全</p></li></ul><img src="https://www.helloimg.com/images/2022/02/27/GVLnS6.png" alt="20210703123813" /></li></ul><hr><h2 id="启用主题及插件">启用主题及插件</h2><blockquote><p><a href="https://github.com/Weidows-projects/Programming-Configuration/blob/master/others/PowerShell/Microsoft.PowerShell_profile.ps1">我的配置文件链接</a></p></blockquote><ul><li><p><code>启用主题</code>: ~/文档/PowerShell/Microsoft.PowerShell_profile.ps1 / $profile 加上以下字段</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> oh-my-posh</span><br><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> posh-git</span><br><span class="line"><span class="keyword">Set</span>-PoshPrompt -Theme powerlevel10k_classic</span><br></pre></td></tr></table></figure></li><li><p><code>Posh中类似Linux形式补全</code> (按 Tab 自动补,非常实用)</p><img src="https://www.helloimg.com/images/2022/02/27/GVLO2m.png" alt="MouseInc 122640" /><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set</span><span class="operator">-</span><span class="variable">PSReadlineKeyHandler</span> <span class="operator">-</span><span class="built_in">Key</span> <span class="built_in">Tab</span> <span class="operator">-</span><span class="built_in">Function</span> <span class="variable">MenuComplete</span></span><br></pre></td></tr></table></figure><hr></li><li><p><code>Posh-Fuck</code>,类似<code>Zsh-theFuck</code></p><ul><li>用法: <code>fuck</code> / <code>fuck!</code> / <code>WTF</code> / <code>Get-Fucked</code></li></ul><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> PoShFuck</span><br></pre></td></tr></table></figure><hr></li><li><p><code>PSReadline</code></p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">#</span> <span class="variable">Enable</span> <span class="variable">Prediction</span> <span class="variable">History</span></span><br><span class="line"><span class="built_in">Set</span><span class="operator">-</span><span class="variable">PSReadLineOption</span> <span class="operator">-</span><span class="variable">PredictionSource</span> <span class="variable">History</span></span><br><span class="line"><span class="type">##</span> <span class="variable">Advanced</span> <span class="variable">Autocompletion</span> <span class="variable">for</span> <span class="variable">arrow</span> <span class="variable">keys</span></span><br><span class="line"><span class="built_in">Set</span><span class="operator">-</span><span class="variable">PSReadlineKeyHandler</span> <span class="operator">-</span><span class="built_in">Key</span> <span class="built_in">UpArrow</span> <span class="operator">-</span><span class="built_in">Function</span> <span class="variable">HistorySearchBackward</span></span><br><span class="line"><span class="built_in">Set</span><span class="operator">-</span><span class="variable">PSReadlineKeyHandler</span> <span class="operator">-</span><span class="built_in">Key</span> <span class="built_in">DownArrow</span> <span class="operator">-</span><span class="built_in">Function</span> <span class="variable">HistorySearchForward</span></span><br></pre></td></tr></table></figure></li><li><p>这个文件实际上是 PowerShell 打开时默认加载的指令集,可以自定义添加命令,如:</p><ul><li>清除打开时的版本信息,在最后一行添加: <code>clear</code></li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="oh-my-posh">oh-my-posh</h2><ul><li><p>查看所有主题</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-PoshThemes</span><br></pre></td></tr></table></figure></li><li><p>用法:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-PoshPrompt -Theme xxx</span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="启用管理员模式">启用管理员模式</h2><ul><li>作用就是让右键文件时出现管理员权限<ul><li>实际上没啥用,并不太推荐使用.</li><li>这个东西与上面 PowerShell 没啥关系</li></ul></li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg <span class="keyword">add</span><span class="language-bash"> <span class="string">&quot;HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Kernel&quot;</span> /v DisableTsx /t REG_DWORD /d 0 /f</span></span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
          <category> shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> shell </tag>
            
            <tag> powershell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>👌茅塞顿开之C/C++-VScode-xmake</title>
      <link href="/post/others/cpp/C_Configuration/"/>
      <url>/post/others/cpp/C_Configuration/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2022-02-07 01:04:03 * @FilePath: \Blog-private\source\_posts\others\cpp\C_Configuration.md--><ul><li><a href="#%E7%BC%96%E8%AF%91%E5%99%A8%E4%BB%8B%E7%BB%8D">编译器介绍</a></li><li><a href="#%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85">环境安装</a></li><li><a href="#%E5%A4%9A%E7%A7%8D%E8%BF%90%E8%A1%8C%E6%96%B9%E5%BC%8F">多种运行方式</a><ul><li><a href="#%E6%89%80%E7%94%A8%E4%BB%A3%E7%A0%81">所用代码</a></li><li><a href="#%E6%96%B9%E6%B3%95%E4%B8%80">方法一</a></li><li><a href="#%E6%96%B9%E6%B3%95%E4%BA%8C">方法二</a></li><li><a href="#%E6%96%B9%E6%B3%95%E4%B8%89">方法三</a></li><li><a href="#%E6%96%B9%E6%B3%95%E5%9B%9B">方法四</a></li></ul></li><li><a href="#%E5%8F%82%E8%80%83-%E6%8E%A8%E8%8D%90">参考-推荐</a><ul><li><a href="#cc%E5%BC%80%E5%8F%91%E6%A8%A1%E6%9D%BF">C/C++开发模板</a></li></ul></li></ul><h2 id="编译器介绍">编译器介绍</h2><p>C/C++编译器好多种(因为编译依赖平台),而且名字起得特别扭,列几个常见的理理思路.</p><blockquote><p>有一定基础的话可以根据此网页了解,并且推荐下此编译器集合: <a href="https://winlibs.com/">WinLibs standalone build of GCC and MinGW-w64 for Windows</a></p></blockquote><ul><li><p>gcc + MinGW-w64</p><ul><li><p><code>gcc</code>(GNU Compiler Collection),多种语言(C/C++,Object-c,Fortran,D)的编译器</p></li><li><p>gdb(GNU Project debugger),调试器</p></li><li><p>MinGW , <code>MinGW-w64</code> (常叫做 <code>MinGW64</code>),win 平台的 C 库</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MinGW-w64是一套可自由使用和自由发布的Windows特定头文件和使用GNU工具集导入库的集合，它支持GCC编译器在Windows系统上创建的。它有分叉的。<span class="number">2007</span>年，为了支持<span class="number">64</span>位和新的api，此后被广泛使用和分布。</span><br><span class="line"></span><br><span class="line">MinGW 的全称是：Minimalist GNU <span class="keyword">on</span> Windows 。它实际上是将经典的开源 C语言 编译器 GCC 移植到了 Windows 平台下，并且包含了 Win32API ，因此可以将源代码编译为可在 Windows 中运行的可执行程序。而且还可以使用一些 Windows 不具备的，Linux平台下的开发工具。一句话来概括：MinGW 就是 GCC 的 Windows 版本</span><br><span class="line"></span><br><span class="line">以上是 MinGW 的介绍，MinGW-w64 与 MinGW 的区别在于 MinGW 只能编译生成<span class="number">32</span>位可执行程序，而 MinGW-w64 则可以编译生成 <span class="number">64</span>位 或 <span class="number">32</span>位 可执行程序。</span><br><span class="line"></span><br><span class="line">正因为如此，MinGW 现已被 MinGW-w64 所取代，且 MinGW 也早已停止了更新</span><br></pre></td></tr></table></figure></li><li><p>这几个结合起来就是 win 平台的 gcc 编译器了,一般在网上找的 mingw64 编译器会包含上面的三个 (你可以在 Dev C++中找到 mingw64 编译器)</p></li></ul></li></ul><hr><ul><li><p>llvm</p><ul><li>Clang</li><li>LLDB</li><li>OpenMP</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">LLVM 是伊利诺伊大学的一个开源项目，LLVM 提供了完整的 C<span class="regexp">/C++工具链，Clang 属于其中的一个子项目，是 LLVM 原生的 ” C/</span>C++/Objective-C” 编译器前端，Clang 负责完成词法分析和语法分析，并将分析结果转换为 Abstract Syntax Tree ( 抽象语法树 ) ，最后使用 LLVM 作为后端代码的生成器。</span><br><span class="line"></span><br><span class="line">Clang 的开发目标是提供一个可以替代 GCC 的前端编译器。与 GCC 相比，Clang 是一个重新设计的编译器前端，具有一系列优点，例如模块化，代码简单易懂，占用内存小以及容易扩展和重用等。由于 Clang 在设计上的优异性，使得 Clang 非常适合用于设计源代码级别的分析和转化工具。Clang 也已经被应用到一些重要的开发领域，如 Static Analysis 是一个基于 Clang 的静态代码分析工具。还有 vim 中的插件 YouCompleteMe 就是利用 Clang 完成语法分析并给出精确的自动补全和语法错误提示（即静态分析）。</span><br><span class="line"></span><br><span class="line">作者：衣介书生</span><br><span class="line">链接：https:<span class="regexp">//</span>www.jianshu.com<span class="regexp">/p/</span><span class="number">861</span>c1a630059</span><br><span class="line">来源：简书</span><br></pre></td></tr></table></figure></li><li><p>msvc</p><p>微软家的编译器, visual studio 内置的,通用性不强.</p></li></ul><hr><ul><li><p>到这里再提一嘴这个工具: <a href="https://winlibs.com/">WinLibs standalone build of GCC and MinGW-w64 for Windows</a></p><p>它内置了上面提到的 gcc/llvm 等工具,比较大所以库很丰富</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="环境安装">环境安装</h2><p>可以先去看下面的<code>多种运行方式</code>,再来找合适的环境.</p><ul><li><p>编译器</p><p>安装上面提到的 <code>winlibs</code> 或者 <code>mingw64 / msvc / llvm</code>…</p><p>太过基础,不会百度.</p></li><li><p>编译工具</p><p>这里选用 <code>xmake</code>,不用 cmake</p><p>依赖管理工具用 xmake 自带的 xrepo,需要的话可以另装 <code>vcpkg</code></p></li><li><p>VScode 内插件</p><p>必须: <code>C/C++</code></p><p>方法二: <code>Code Runner</code></p><p>方法四: <code>xmake</code></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="多种运行方式">多种运行方式</h2><p>排序: 简单 -&gt; 困难</p><h3 id="所用代码">所用代码</h3><ul><li><p>单文件 <code>main.cpp</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr></li><li><p>多文件</p><ul><li><p><code>0.cpp</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">a</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>0.h</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">a</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure></li><li><p><code>1.cpp</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;0.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;hello-1,我,%d&quot;</span>, <span class="built_in">a</span>());</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="方法一-2">方法一</h3><p>最原始的运行方式,用不着解释:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ <span class="selector-tag">main</span><span class="selector-class">.cpp</span> -o <span class="selector-tag">main</span>.exe</span><br></pre></td></tr></table></figure><hr><h3 id="方法二-2">方法二</h3><ul><li><p>上面的虽简单但是繁琐</p><p>于是 vscode 里有个插件 <code>code runner</code> 可以自动产生上面的命令,而且可以自定义,下面逐步讲解完善:</p><hr></li><li><p>比如中文乱码问题:</p><p>win 系统中终端默认按照 GBK 编码显示,但是程序输出是 UTF-8 编码的(除非源文件是 GBK 编码,但是不建议这么做)</p><p>可以在代码运行前把终端编码页转到 utf-8 就行了</p><p>修改 vscode 配置文件,<code>chcp 65001</code>就是转到 utf-8 页</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;code-runner.executorMap&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;c&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chcp 65001 &amp;&amp; gcc $fileName -o $fileNameWithoutExt &amp;&amp; ./$fileNameWithoutExt&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;cpp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chcp 65001 &amp;&amp; g++ $fileName -o $fileNameWithoutExt &amp;&amp; ./$fileNameWithoutExt&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr></li><li><p>转移生成文件</p><p>默认生成的 xxx.exe 在同级目录,很影响观瞻,把它挪到 <code>workspaceRoot/build/</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;code-runner.executorMap&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;c&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chcp 65001 &amp;&amp; gcc $fileName -o $workspaceRoot\\build\\$fileNameWithoutExt &amp;&amp; $workspaceRoot\\build\\$fileNameWithoutExt&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;cpp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chcp 65001 &amp;&amp; g++ $fileName -o $workspaceRoot\\build\\$fileNameWithoutExt &amp;&amp; $workspaceRoot\\build\\$fileNameWithoutExt&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr></li><li><p>再如多文件编译链接问题:</p><p>默认的 Code Runner 执行的命令只能编译运行一个 C/C++源文件</p><p>但是很多情况下需要编译链接多文件的项目,可以修改成这样:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;code-runner.executorMap&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;c&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chcp 65001 &amp;&amp; gcc *.c -I . -o $workspaceRoot\\build\\$fileNameWithoutExt &amp;&amp; $workspaceRoot\\build\\$fileNameWithoutExt&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;cpp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chcp 65001 &amp;&amp; g++ *.cpp -I . -o $workspaceRoot\\build\\$fileNameWithoutExt &amp;&amp; $workspaceRoot\\build\\$fileNameWithoutExt&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>需要注意修改后目录下所有源文件都参与编译(不管项目是不是需要它)</p></li><li><p>再如编译时链接库 (可以这么干,但是并不好)</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;code-runner.executorMap&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;c&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chcp 65001 &amp;&amp; gcc *.c -I . -l glut32 -l glu32 -l opengl32 -o $workspaceRoot\\build\\$fileNameWithoutExt &amp;&amp; $workspaceRoot\\build\\$fileNameWithoutExt&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;cpp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chcp 65001 &amp;&amp; g++ *.cpp -I . -l glut32 -l glu32 -l opengl32 -o $workspaceRoot\\build\\$fileNameWithoutExt &amp;&amp; $workspaceRoot\\build\\$fileNameWithoutExt&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>此项配置适用性很广</p><p>文件堆放可以随意,文件名/目录名中<code>可以含有中文</code></p><p>缺点是无法调试,对需要依赖库的工程性项目不友好</p></li></ul><hr><h3 id="方法三-2">方法三</h3><ul><li><p>通过 vscode 本身,也是可以 run/debug 的</p><p>在 vscode 内右键文件内容,有个<code>生成和调试活动文件</code>,不用动回车几下</p><p>会生成下面两个文件,然后应该就能 run/debug 了</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">|&gt; .vscode</span></span><br><span class="line">  <span class="string">|&gt; launch.json</span></span><br><span class="line">  <span class="string">|&gt; task.json</span></span><br></pre></td></tr></table></figure><ul><li><details>  <summary> 默认生成文件内容 </summary><hr><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// 使用 IntelliSense 了解相关属性。</span></span><br><span class="line">  <span class="comment">// 悬停以查看现有属性的描述。</span></span><br><span class="line">  <span class="comment">// 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;g++.exe - 生成和调试活动文件&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppdbg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;\\build\\$&#123;fileBasenameNoExtension&#125;.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;stopAtEntry&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;fileDirname&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;environment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;externalConsole&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;MIMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gdb&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;miDebuggerPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gdb.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;setupCommands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;为 gdb 启用整齐打印&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-enable-pretty-printing&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;ignoreFailures&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C/C++: g++.exe 生成活动文件&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;tasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppbuild&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C/C++: g++.exe 生成活动文件&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;D:\\Game\\Scoop\\apps\\winlibs-mingw-llvm\\current\\bin\\g++.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;-fdiagnostics-color=always&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-g&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;$&#123;file&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-o&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;$&#123;fileDirname&#125;\\$&#123;fileBasenameNoExtension&#125;.exe&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;fileDirname&#125;&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;$gcc&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;detail&quot;</span><span class="punctuation">:</span> <span class="string">&quot;调试器生成的任务。&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></details></li></ul></li><li><p>介绍一下其调用流程:</p><p>按 F5 调试 -&gt; launch.json -&gt; preLaunchTask -&gt; tasks.json -&gt; g++ -&gt; main.cpp -&gt; main.exe</p><p>反过来看,最先执行的是 task.json 里的 g++.exe (看 args 那里跟上面的第二种运行方式里很像)</p><p>g++ 生成了 main.exe 文件,然后 launch.JSON 中的 gdb.exe 接过来 main.exe 开始调试</p></li><li><p>跟上面方法二类似,可以修改参数来添加功能</p></li><li><p>launch.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// 使用 IntelliSense 了解相关属性。</span></span><br><span class="line">  <span class="comment">// 悬停以查看现有属性的描述。</span></span><br><span class="line">  <span class="comment">// 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;g++.exe - 生成和调试活动文件&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppdbg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;\\build\\$&#123;fileBasenameNoExtension&#125;.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;stopAtEntry&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;fileDirname&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;environment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;externalConsole&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;MIMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gdb&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;miDebuggerPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gdb.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;setupCommands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;为 gdb 启用整齐打印&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-enable-pretty-printing&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;ignoreFailures&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C/C++: g++.exe 生成活动文件&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>tasks.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppbuild&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C/C++: g++.exe 生成活动文件&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;g++&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;-g&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.cpp&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-I&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;.&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-o&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;$&#123;workspaceRoot&#125;\\build\\$&#123;fileBasenameNoExtension&#125;.exe&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;fileDirname&#125;&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;$gcc&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr></li><li><p>再介绍一下利弊</p><p>比第二个方法自定义性更强,<code>可以直接输出中文不乱码</code></p><p>缺点也很上头,<code>源文件名字/路径中不能带中文</code> (不信可以试试,直接报错)</p></li></ul><hr><h3 id="方法四">方法四</h3><ul><li><p>上面的几个方法比较面向小 demo,最后这个是<code>面向工程性</code>的 (需要一定能力基础)</p><p>使用 <code>xmake.lua</code> 替换了上面方法中的拼接参数行为,而且可以通过 xmake 管理链接库/编译器等,比如:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 引用.lib形式的静态库会报错,所以要用shared动态链接库版本</span></span><br><span class="line">add_requires(<span class="string">&quot;freeglut&quot;</span>,&#123;configs = &#123;shared = <span class="literal">true</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 全局添加依赖</span></span><br><span class="line">add_packages(<span class="string">&quot;freeglut&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 同一 target 只能有一个 main(),否则需要另起名字</span></span><br><span class="line">target(<span class="string">&quot;test&quot;</span>)</span><br><span class="line">    set_kind(<span class="string">&quot;binary&quot;</span>)</span><br><span class="line">    add_files(<span class="string">&quot;src/test/*.cpp&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 单个添加依赖,当已经全局添加时,会产生歧义,添加静态版本</span></span><br><span class="line">    add_packages(<span class="string">&quot;freeglut&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 更改编译器,比如 gcc/clang/msvc...</span></span><br><span class="line">    add_toolchains(<span class="string">&quot;gcc&quot;</span>)</span><br></pre></td></tr></table></figure><hr></li><li><p>深入过程中试过其他的工具链: cmake / vcpkg / conan, 为什么选用的 <code>xmake + xrepo + vcpkg</code> ? 对比一下吧</p><p>cmake 语法很怪,学习成本高配置难,尤其是与其搭配的 vcpkg/conan 安装的依赖引入比较棘手,网上对它的诟病很多</p><p>conan 库少,而且结合 cmake 体验起来并不如 xmake+xrepo</p><p>xmake 自带 xrepo,而且 xrepo 可以装 vcpkg/conan/brew 的库,而且支持中文路径/文件名</p><p>再装个 vcpkg 用来搜索库以及提供给 xrepo 调用安装库 (这个需要安装 visualstudio buildtools 英文版本)</p></li><li><p>坏处</p><p>网上用 cmake 的人/项目很多,对于 xmake 的教程还是比较稀缺</p><p>不过能走到这步的大都可以自行探索了…</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-29">借物表</h2><h3 id="C-C-开发模板"><a href="https://github.com/Weidows/C--">C/C++开发模板</a></h3><p>参考了很多文章/教程,迭代了数个版本,下面是脚印</p><blockquote><p><a href="https://tboox.org/cn/2019/12/13/quickstart-10-target-deps/">xmake 从入门到精通 10：多个子工程目标的依赖配置</a><br><a href="https://www.bilibili.com/video/BV1fy4y1b7TC?p=23">基于 VSCode 和 CMake 实现 C/C++开发 | Linux 篇</a><br><a href="https://zhuanlan.zhihu.com/p/67854244">xmake vs cmake 对比分析</a><br><a href="https://github.com/SFUMECJF/cmake-examples-Chinese">SFUMECJF/cmake-examples-Chinese</a><br><a href="https://zhuanlan.zhihu.com/p/79872095">打包一沓开源的 C/C++ 包管理工具送给你！</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
          <category> cpp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> vscode </tag>
            
            <tag> c </tag>
            
            <tag> cmake </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用VScode编写调试Processing.pde程序</title>
      <link href="/post/others/processing/Processing/"/>
      <url>/post/others/processing/Processing/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @LastEditors: Weidows * @LastEditTime: 2021-10-28 15:41:52 * @FilePath: \Blog-private\source\_posts\experience\processing\Processing.md--><ul><li><a href="#%E7%8E%AF%E5%A2%83%E9%9C%80%E6%B1%82">环境需求</a></li><li><a href="#%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83">编译环境</a></li><li><a href="#%E8%BF%9B%E9%98%B6%E7%8E%A9%E6%B3%95">进阶玩法</a><ul><li><a href="#%E7%BB%93%E5%90%88-code-runner">结合 Code Runner</a></li><li><a href="#%E5%AE%89%E8%A3%85processing%E4%B8%AD%E6%96%87%E5%8A%A9%E6%89%8B">安装<code>Processing中文助手</code></a></li></ul></li></ul><h2 id="环境需求">环境需求</h2><ul><li><p>需要在电脑里下载好 Processing 主程序.</p><ul><li><p>这个 processing 主程序可以由 Scoop 安装(免去配置环境变量).</p></li><li><p>不然需要在 Path 里添加上主程序目录,如 <code>D:\\Game\\Scoop\\apps\\processing\\current\\processing-java</code></p></li></ul></li><li><p>在 VScode 里安装<code>Processing Language</code>插件,它支持语法高亮和代码补全</p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="编译环境">编译环境</h2><ul><li><p>找到工作区目录下的 <code>.vscode/tasks.json</code> ,添加以下代码(已优化过:)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;label&quot;</span>: <span class="string">&quot;Run Sketch&quot;</span>,</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;shell&quot;</span>,</span><br><span class="line">  <span class="string">&quot;group&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;kind&quot;</span>: <span class="string">&quot;build&quot;</span>,</span><br><span class="line">    <span class="string">&quot;isDefault&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;command&quot;</span>: <span class="string">&quot;<span class="variable">$&#123;config:processing.path&#125;</span>&quot;</span>,</span><br><span class="line">  <span class="string">&quot;presentation&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;echo&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;reveal&quot;</span>: <span class="string">&quot;always&quot;</span>,</span><br><span class="line">    <span class="string">&quot;focus&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;panel&quot;</span>: <span class="string">&quot;dedicated&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;args&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;--force&quot;</span>,</span><br><span class="line">    <span class="string">&quot;--sketch=<span class="variable">$&#123;fileDirname&#125;</span>&quot;</span>,</span><br><span class="line">    <span class="string">&quot;--output=<span class="variable">$&#123;fileDirname&#125;</span>\\out&quot;</span>,</span><br><span class="line">    <span class="string">&quot;--run&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;windows&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;args&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;--force&quot;</span>,</span><br><span class="line">      <span class="string">&quot;--sketch=<span class="variable">$&#123;fileDirname&#125;</span>&quot;</span>,</span><br><span class="line">      <span class="string">&quot;--output=<span class="variable">$&#123;fileDirname&#125;</span>\\out&quot;</span>,</span><br><span class="line">      <span class="string">&quot;--run&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>上面的代码是在 tasks:[]层级内部,为避免覆盖其他环境配置(比如 gcc),需要格外注意,可以参考我的如下配置</p></li></ul><hr><ul><li>现在就可以按<code>Ctrl + shift + B</code>编译运行了.<ul><li>注意! .pde 文件必须放在一个同名的文件夹中,而且名字不能是纯数字(<code>尽量按着 Java 起名</code>),举个大栗子</li></ul></li></ul><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">root</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">project_1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">project_1.pde         正确</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">project_2.pde         名字与文件夹不匹配,不会被编译,无效</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">project_2</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">1.pde                 名字不合法</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">a.pde                   路径不对</span></span><br></pre></td></tr></table></figure><h2 id="进阶玩法">进阶玩法</h2><h3 id="结合-Code-Runner">结合 Code Runner</h3><ul><li>找到<code>VScode-Code Runner</code>插件配置文件里的<code>code-runner.executorMap</code>,参照其他语言在{}里添加如下代码<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;pde&quot;</span>: <span class="string">&quot;processing-java --force --sketch=<span class="variable">$dir</span> --output=<span class="variable">$dir</span>\\out --run&quot;</span>,</span><br></pre></td></tr></table></figure></li><li>现在,写完.pde 按上面的快捷键或 Code Runner 的<code>小三角</code>都可以运行了!</li></ul><h3 id="安装Processing中文助手">安装<code>Processing中文助手</code></h3><ul><li>装上就对了,反正挺好用的</li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
          <category> processing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> vscode </tag>
            
            <tag> processing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>匿名对象 &amp;&amp; 使用</title>
      <link href="/post/Java/deprecated/anonymous_object/"/>
      <url>/post/Java/deprecated/anonymous_object/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-09-10 17:34:47 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:07:38 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\anonymous_object.md--><ul><li><a href="#%E5%8C%BF%E5%90%8D%E5%AF%B9%E8%B1%A1%E4%B8%80-testjava">匿名对象一 (Test.java)</a></li><li><a href="#%E5%8C%BF%E5%90%8D%E5%AF%B9%E8%B1%A1%E4%BA%8C-circlejava">匿名对象二 (Circle.java)</a></li></ul><h2 id="匿名对象一-Test-java">匿名对象一 (Test.java)</h2><p><img src="https://www.helloimg.com/images/2022/02/27/GVa3Xz.png" alt="anonymous_object_1"></p><details><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> twenty.september.anonymous_object;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;这是个测试&quot;</span> + count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 这里new了一个匿名对象,可以直接调用此对象的方法.</span></span><br><span class="line"><span class="comment">    * 如果一个对象只需要进行一次方法调用,可以使用匿名对象</span></span><br><span class="line"><span class="comment">    * 常使用匿名对象作为实参传递给一个方法调用</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Test</span>().test(<span class="keyword">new</span> <span class="title class_">Test</span>().count);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></details><hr><h2 id="匿名对象二-Circle-java">匿名对象二 (Circle.java)</h2><p><img src="https://www.helloimg.com/images/2022/02/27/GVEDIv.png" alt="anonymous_object_2"></p><details><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> twenty.september.anonymous_object;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">double</span> radius;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Circle</span><span class="params">(<span class="type">double</span> radius)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.radius = radius;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getArea</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">double</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="number">3.14</span> * radius * radius;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 可以同时使用构造器初始化类属性然后再调用方法</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    System.out.println(<span class="keyword">new</span> <span class="title class_">Circle</span>(<span class="number">5</span>).getArea());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> deprecated </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 对象 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java设计模式</title>
      <link href="/post/Java/design_pattern/"/>
      <url>/post/Java/design_pattern/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-09-09 22:53:55 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:07:54 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\design_pattern.md--><ul><li><a href="#%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">单例设计模式</a></li></ul><h2 id="单例设计模式">单例设计模式</h2><ul><li><p>设计目的:</p><ul><li>当多个程序读取同一个文件的数据时,可以把配置文件封装为对象,为了使得所有程序获取的是同一个对象的数据,那么就需要保证该对象在内存中是唯一的</li></ul></li><li><p>设计方法:</p><ol><li><p>不开放其他程序实例化此对象的权限</p></li><li><p>在本类中实例化私有对象</p></li><li><p>public 方法来使其他程序获取此对象数据</p></li><li><p>因为 new 对象需要构造器初始化,所以令构造器 private,其他程序就无法 new 对象了</p></li></ol></li><li><p>代码实现:</p></li></ul><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 这种会在初始化时就创建好了静态类成员对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Single</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="title">Single</span>()</span> &#123;</span><br><span class="line">  &#125; <span class="comment">//私有化构造函数。</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Single s = <span class="keyword">new</span> Single(); <span class="comment">//创建私有并静态的本类对象。</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Single <span class="title">getInstance</span>()</span> &#123; <span class="comment">//定义公有并静态的方法，返回该对象。</span></span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 这种初始化时没调用构造器,对象只是null,在调用getInstance()方法时才会创建对象(懒加载)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Single2</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="title">Single2</span>()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Single2 s = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Single2 <span class="title">getInstance</span>()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (s == <span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">      s = <span class="keyword">new</span> Single2();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java(非)静态代码块及其作用</title>
      <link href="/post/Java/deprecated/static_unstatic_block/"/>
      <url>/post/Java/deprecated/static_unstatic_block/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-09-04 10:49:16 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:14:27 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Java\static_unstatic_block.md--><ul><li><a href="#%E5%B0%B1%E4%BF%A9%E6%96%87%E4%BB%B6%E8%B0%A8%E6%AD%A4">就俩文件,谨此</a></li><li><a href="#personjava">Person.java</a></li><li><a href="#testjava">Test.java</a></li></ul><h2 id="就俩文件-谨此">就俩文件,谨此</h2><p>图片下方给出了源代码,折叠起来了.</p><hr><h2 id="Person-java">Person.java</h2><p><img src="https://www.helloimg.com/images/2022/02/27/GVa9vt.png" alt="UpRI1nOdso2Z4ak"></p><details class="toggle" ><summary class="toggle-button" style="">源代码</summary><div class="toggle-content"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* @Author: Weidows</span></span><br><span class="line"><span class="comment">* @Date: 2020-09-04 17:39:50</span></span><br><span class="line"><span class="comment">* @LastEditors: Weidows</span></span><br><span class="line"><span class="comment">* @LastEditTime: 2020-09-07 11:11:06</span></span><br><span class="line"><span class="comment">* @FilePath: \Weidows\Java\src\main\java\twenty\september\new_object\Person.java</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> twenty.september.new_object;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ! 在new Person()时,执行顺序是</span></span><br><span class="line"><span class="comment">*    1.name这种成员变量的初始化</span></span><br><span class="line"><span class="comment">*    2.执行代码块(多个代码块会按照从上到下顺序执行)</span></span><br><span class="line"><span class="comment">*    3.执行构造函数</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*  两种代码块都可以用输出语句,可以对类的成员变量做初始化操作</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  String name;</span><br><span class="line">  <span class="keyword">static</span> <span class="type">TestPerson</span> <span class="variable">tp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestPerson</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line">    System.out.println(<span class="string">&quot;执行的是构造方法&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;这是Person的test方法&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ! 非静态的代码块</span></span><br><span class="line">  &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;执行的是非静态的代码块1&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;执行的是非静态的代码块2&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;执行的是非静态的代码块3&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ! 静态代码块</span></span><br><span class="line"><span class="comment">  * 里面只能放/调用static变量/方法</span></span><br><span class="line"><span class="comment">  * static代码块在程序运行周期只能被执行一次(new多次对象时共用一个静态类变量,不能被重复调用)</span></span><br><span class="line"><span class="comment">  * 静态代码块运行优先于非静态代码块</span></span><br><span class="line"><span class="comment">  *  实际开发中常用,用来初始化类的静态对象属性(成员对象变量),比如tp那样,或者用在内部类替代构造器使用</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;执行的是静态的代码块&quot;</span>);</span><br><span class="line">    tp.age = <span class="number">1</span>;</span><br><span class="line">    tp.name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestPerson</span> &#123;</span><br><span class="line">  <span class="type">int</span> age;</span><br><span class="line">  String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></details><hr><h2 id="Test-java">Test.java</h2><p><img src="https://www.helloimg.com/images/2022/02/27/GVJL6u.png" alt="Q9r36pXoBen4Hcy"></p><details class="toggle" ><summary class="toggle-button" style="">源代码</summary><div class="toggle-content"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* @Author: Weidows</span></span><br><span class="line"><span class="comment">* @Date: 2020-09-04 17:42:06</span></span><br><span class="line"><span class="comment">* @LastEditors: Weidows</span></span><br><span class="line"><span class="comment">* @LastEditTime: 2020-09-07 11:10:02</span></span><br><span class="line"><span class="comment">* @FilePath: \Weidows\Java\src\main\java\twenty\september\new_object\test.java</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> twenty.september.new_object;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    in.close();</span><br><span class="line">    <span class="comment">// new Person();</span></span><br><span class="line">    <span class="comment">// new Person();</span></span><br><span class="line">    <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>() &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * ! 这是一个匿名内部类</span></span><br><span class="line"><span class="comment">      * 因为这种内部类没有类名,也就无法搞一个新的构造器(用的还是原来Person的)</span></span><br><span class="line"><span class="comment">      * 也就是这个类初始化后的成员变量还是跟原来的Person类的一样</span></span><br><span class="line"><span class="comment">      *  这里就会用到代码块来初始化类的属性</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      &#123; <span class="comment">///这里这种代码块就可以替代构造器使用</span></span><br><span class="line">        <span class="built_in">this</span>.name = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 这里无论写this.name/name/super.name都会变为&quot;李四&quot;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行的是被Override的Person&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    System.out.println(<span class="string">&quot;这个类里面的name是:\t&quot;</span> + p.name);</span><br><span class="line">    p.test();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></details><hr><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> deprecated </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>butterfly内部魔改记录</title>
      <link href="/post/Web/Node/Hexo/butterfly_modify/"/>
      <url>/post/Web/Node/Hexo/butterfly_modify/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-09-03 22:49:05 * @LastEditors: Weidows * @LastEditTime: 2022-02-27 18:05:22 * @FilePath: \Blog-private\source\_posts\Web\Node\Hexo\butterfly_modify.md--><ul><li><a href="#%E9%AD%94%E6%94%B9%E6%BB%9A%E5%8A%A8%E6%9D%A1">魔改滚动条</a></li><li><a href="#%E6%96%87%E7%AB%A0%E8%83%8C%E6%9D%BF%E9%80%8F%E6%98%8E">文章背板透明</a></li><li><a href="#footer-%E7%B1%BB-github-%E5%B0%8F%E6%A0%87%E7%AD%BE">footer 类 github 小标签</a></li><li><a href="#%E6%B7%BB%E5%8A%A0-footer-%E5%B0%8F%E7%BA%A2%E5%BF%83">添加 footer 小红心</a></li><li><a href="#%E4%BF%AE%E6%94%B9%E9%BC%A0%E6%A0%87%E6%A0%B7%E5%BC%8F">修改鼠标样式</a></li><li><a href="#%E9%80%82%E9%85%8D-pjax">适配 Pjax</a></li><li><a href="#%E4%BC%98%E5%8C%96">优化</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="魔改滚动条">魔改滚动条</h2><ul><li><p>找到<code>mine.styl</code>添加以下: (注意缩进格式)</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*scrollbar*/</span></span><br><span class="line">::-webkit-scrollbar</span><br><span class="line">  width: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-thumb</span><br><span class="line">  background-color: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">86</span>, <span class="number">232</span>, <span class="number">0.815</span>);</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(</span><br><span class="line">    <span class="number">45deg</span>,</span><br><span class="line">    <span class="number">#34bf49</span> <span class="number">25%</span>,</span><br><span class="line">    transparent <span class="number">25%</span>,</span><br><span class="line">    transparent <span class="number">50%</span>,</span><br><span class="line">    <span class="number">#ff4c4c</span> <span class="number">50%</span>,</span><br><span class="line">    <span class="number">#0099e5</span> <span class="number">75%</span>,</span><br><span class="line">    transparent <span class="number">75%</span>,</span><br><span class="line">    transparent</span><br><span class="line">  );</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">2em</span>;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-corner</span><br><span class="line">  background-color: transparent;</span><br><span class="line"></span><br><span class="line">::-moz-selection</span><br><span class="line">  color: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ce70b9</span>;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="文章背板透明">文章背板透明</h2><ul><li><p>在 mine.styl 内添加</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.layout</span></span><br><span class="line">&amp; &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:first</span>-child<span class="selector-pseudo">:not</span>(<span class="selector-class">.recent-posts</span>)</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">45</span>, <span class="number">35</span>, <span class="number">0.5</span>): <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">45</span>, <span class="number">35</span>, <span class="number">0.5</span>)</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="footer-类-github-小标签">footer 类 github 小标签</h2><ul><li><p>在<code>mine.styl</code>在尾部添加层叠样式:</p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*底部信息*/</span></span><br><span class="line"><span class="selector-class">.github-badge</span></span><br><span class="line">  <span class="attribute">margin-left</span> <span class="number">5px</span></span><br><span class="line">  <span class="attribute">display</span> inline-block</span><br><span class="line">  <span class="attribute">border-radius</span> <span class="number">4px</span></span><br><span class="line">  <span class="attribute">text-shadow</span> none</span><br><span class="line">  <span class="attribute">color</span> <span class="number">#fff</span></span><br><span class="line">  <span class="attribute">line-height</span> <span class="number">15px</span></span><br><span class="line">  <span class="attribute">background-color</span> <span class="number">#abbac3</span></span><br><span class="line">  <span class="attribute">margin-bottom</span> <span class="number">5px</span></span><br><span class="line">  <span class="attribute">font-size</span> <span class="number">12px</span></span><br><span class="line">  <span class="selector-class">.badge-subject</span></span><br><span class="line">    <span class="attribute">display</span> inline-block</span><br><span class="line">    <span class="attribute">background-color</span> <span class="number">#4d4d4d</span></span><br><span class="line">    <span class="attribute">padding</span> <span class="number">4px</span> <span class="number">4px</span> <span class="number">4px</span> <span class="number">6px</span></span><br><span class="line">    <span class="attribute">border-top-left-radius</span> <span class="number">4px</span></span><br><span class="line">    <span class="attribute">border-bottom-left-radius</span> <span class="number">4px</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.badge-value</span></span><br><span class="line">    <span class="attribute">display</span> inline-block</span><br><span class="line">    <span class="attribute">padding</span> <span class="number">4px</span> <span class="number">6px</span> <span class="number">4px</span> <span class="number">4px</span></span><br><span class="line">    <span class="attribute">border-top-right-radius</span> <span class="number">4px</span></span><br><span class="line">    <span class="attribute">border-bottom-right-radius</span> <span class="number">4px</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.bg-blue</span></span><br><span class="line">    <span class="attribute">background-color</span> <span class="number">#007ec6</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.bg-brightgreen</span></span><br><span class="line">    <span class="attribute">background-color</span> <span class="number">#4dc820</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.bg-orange</span></span><br><span class="line">    <span class="attribute">background-color</span> orange</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.bg-gradient</span></span><br><span class="line">    <span class="attribute">background</span> linear-gradient(to right,<span class="number">#3ca5f6</span>,<span class="number">#a86af9</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.bg-blueviolet</span></span><br><span class="line">    <span class="attribute">background-color</span> <span class="number">#8833d7</span></span><br></pre></td></tr></table></figure></li><li><p>找到<code>~butterfly/layout/includes/footer.pug</code>在尾部添加以下(这里是一个单位缩进,一定注意缩进对应上方)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">//- 底部信息</span><br><span class="line">.github-badge</span><br><span class="line">  a(style=&#x27;color:#fff&#x27;, rel=&#x27;external nofollow noopener noreferrer&#x27;, href=&#x27;https://hexo.io/&#x27;, target=&#x27;_blank&#x27;, title=&#x27;由 Hexo 强力驱动&#x27;, data-pjax-state=&#x27;&#x27;)</span><br><span class="line">    span.badge-subject Powered</span><br><span class="line">    span.badge-value.bg-blue Hexo</span><br><span class="line"></span><br><span class="line">.github-badge</span><br><span class="line">  a(style=&#x27;color:#fff&#x27;, rel=&#x27;external nofollow noopener noreferrer&#x27;, href=&#x27;https://github.com/jerryc127/hexo-theme-butterfly&#x27;, target=&#x27;_blank&#x27;, title=&#x27;主题&#x27;, data-pjax-state=&#x27;&#x27;)</span><br><span class="line">    span.badge-subject Theme</span><br><span class="line">    span.badge-value.bg-blueviolet Butterfly</span><br><span class="line"></span><br><span class="line">.github-badge</span><br><span class="line">  a(style=&#x27;color:#fff&#x27;, rel=&#x27;external nofollow noopener noreferrer&#x27;, href=&#x27;https://gitee.com/Weidows/Weidows&#x27;, target=&#x27;_blank&#x27;, title=&#x27;静态网页托管于 Github + Gitee&#x27;, data-pjax-state=&#x27;&#x27;)</span><br><span class="line">    span.badge-subject Hosted</span><br><span class="line">    span.badge-value.bg-brightgreen Github+Gitee-Pages</span><br><span class="line"></span><br><span class="line">.github-badge</span><br><span class="line">  a(style=&#x27;color:#fff&#x27;, rel=&#x27;external nofollow noopener noreferrer&#x27;, href=&#x27;https://www.jsdelivr.com/&#x27;, target=&#x27;_blank&#x27;, title=&#x27;jsDelivr 提供 CDN 加速服务&#x27;, data-pjax-state=&#x27;&#x27;)</span><br><span class="line">    span.badge-subject CDN</span><br><span class="line">    span.badge-value.bg-orange JsDelivr</span><br><span class="line"></span><br><span class="line">.github-badge</span><br><span class="line">  a(style=&#x27;color:#fff&#x27;, rel=&#x27;external nofollow noopener noreferrer&#x27;, href=&#x27;http://creativecommons.org/licenses/by-nc-sa/4.0/&#x27;, target=&#x27;_blank&#x27;, title=&#x27;本站点采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可&#x27;, data-pjax-state=&#x27;&#x27;)</span><br><span class="line">    span.badge-subject</span><br><span class="line">      i.fa.fa-copyright</span><br><span class="line">    span.badge-value.bg-gradient BY-NC-SA 4.0</span><br><span class="line"></span><br><span class="line">.github-badge</span><br><span class="line">  a(style=&#x27;color:#fff&#x27;, rel=&#x27;external nofollow noopener noreferrer&#x27;, href=&#x27;http://www.beian.miit.gov.cn/&#x27;, target=&#x27;_blank&#x27;, title=&#x27;备案&#x27;, data-pjax-state=&#x27;&#x27;)</span><br><span class="line">    span.badge-subject 冀ICP备</span><br><span class="line">    span.badge-value.bg-orange 2020021936-1号</span><br><span class="line"></span><br><span class="line">.github-badge</span><br><span class="line">  span.badge-subject BugSite上线</span><br><span class="line">  a#running-time(style=&#x27;text-decoration: none;color: rgb(255, 255, 255);background: rgb(77, 200, 32);padding: 4px 4px 4px 6px;--darkreader-inline-color: #ffffff;--darkreader-inline-bgimage: initial;--darkreader-inline-bgcolor: #1db000;&#x27;, rel=&#x27;external nofollow noopener noreferrer&#x27;, href=&#x27;/tags/for&#x27;, target=&#x27;_self&#x27;, data-pjax-state, data-darkreader-inline-color, data-darkreader-inline-bgimage, data-darkreader-inline-bgcolor) 0 年 45 天 6 时 50 分 8 秒</span><br><span class="line">#running-time</span><br><span class="line">  script.</span><br><span class="line">    setInterval(() =&gt; &#123;</span><br><span class="line">            let create_time = Math.round(</span><br><span class="line">              new Date(&quot;2020-08-14 17:30:00&quot;).getTime() / 1000</span><br><span class="line">            );</span><br><span class="line">            let timestamp = Math.round(</span><br><span class="line">              (new Date().getTime() + 8 * 60 * 60 * 1000) / 1000</span><br><span class="line">            );</span><br><span class="line">            let second = timestamp - create_time;</span><br><span class="line">            let time = new Array(0, 0, 0, 0, 0);</span><br><span class="line">            if (second &gt;= 365 * 24 * 3600) &#123;</span><br><span class="line">              time[0] = parseInt(second / (365 * 24 * 3600));</span><br><span class="line">              second %= 365 * 24 * 3600;</span><br><span class="line">            &#125;</span><br><span class="line">            if (second &gt;= 24 * 3600) &#123;</span><br><span class="line">              time[1] = parseInt(second / (24 * 3600));</span><br><span class="line">              second %= 24 * 3600;</span><br><span class="line">            &#125;</span><br><span class="line">            if (second &gt;= 3600) &#123;</span><br><span class="line">              time[2] = parseInt(second / 3600);</span><br><span class="line">              second %= 3600;</span><br><span class="line">            &#125;</span><br><span class="line">            if (second &gt;= 60) &#123;</span><br><span class="line">              time[3] = parseInt(second / 60);</span><br><span class="line">              second %= 60;</span><br><span class="line">            &#125;</span><br><span class="line">            if (second &gt; 0) &#123;</span><br><span class="line">              time[4] = second;</span><br><span class="line">            &#125;</span><br><span class="line">            currentTimeHtml =</span><br><span class="line">              time[0] +</span><br><span class="line">              &quot; 年 &quot; +</span><br><span class="line">              time[1] +</span><br><span class="line">              &quot; 天 &quot; +</span><br><span class="line">              time[2] +</span><br><span class="line">              &quot; 时 &quot; +</span><br><span class="line">              time[3] +</span><br><span class="line">              &quot; 分 &quot; +</span><br><span class="line">              time[4] +</span><br><span class="line">              &quot; 秒&quot;;</span><br><span class="line">            document.getElementById(&quot;running-time&quot;).innerHTML = currentTimeHtml;</span><br><span class="line">          &#125;, 1000);</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="添加-footer-小红心">添加 footer 小红心</h2><ul><li><p>找到<code>~butterfly/layout/includes/footer.pug</code>(同上)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if theme.footer.owner.since &amp;&amp; theme.footer.owner.since != nowYear</span><br><span class="line">  .copyright!= `&amp;copy;$&#123;theme.footer.owner.since&#125; - $&#123;nowYear&#125; By $&#123;config.author&#125;`</span><br><span class="line">else</span><br><span class="line">  .copyright!= `&amp;copy;$&#123;nowYear&#125; By $&#123;config.author&#125;`</span><br></pre></td></tr></table></figure></li><li><p>替换为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if theme.footer.owner.since &amp;&amp; theme.footer.owner.since != nowYear</span><br><span class="line">  .copyright!= `&amp;copy;$&#123;theme.footer.owner.since&#125; - $&#123;nowYear&#125; &lt;i style=&quot;color:#FF6A6A&quot; class=&quot;fa fa-heartbeat&quot;&gt;&lt;/i&gt; $&#123;config.author&#125;`</span><br><span class="line">else</span><br><span class="line">  .copyright!= `&amp;copy;$&#123;nowYear&#125;  &lt;i style=&quot;color:#FF6A6A;animation: announ_animation 0.8s linear infinite;&quot; class=&quot;fa fa-heartbeat&quot;&gt;&lt;/i&gt; $&#123;config.author&#125;`</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="修改鼠标样式">修改鼠标样式</h2><ul><li><p>在 mine.styl 里添加以下:</p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 鼠标图标 */</span></span><br><span class="line"><span class="selector-tag">body</span></span><br><span class="line">  <span class="attribute">cursor</span> url(<span class="string">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAgCAYAAAAIXrg4AAADHklEQVRIia2WyWtTURSHv/veS8wzVpMmdjApxSIKdQJpS4ili1orijgP4MbpTxBEdKEgLqwLF9qVBcWFqOAILaLUjQsXVqUWbMUU0ZrW0smWaGPa5LnIu+mzdkjSHHjcd7nn/j7OucO5gn9NTOsb5NBEQUFt/Y4dX7/t3j08Egjcve/xVFTNAM1M1NLqO3eGu3V9RZEcNIxE4suXm7c7O8+c/f178AdZRKTItrCwbqtVHEAIRSkrO3msvv5zZ2np0ROmf0YRyQmqxxPcPJuTzeZaVlV1q6m6uqVF11f4M4HICLS8vNWr53MuLt6+ra7u7ZuCgtqt6UJkBJrD4S9OZ4LDUVRYU/O8Ze3aCxcBbT6QBCg2m2tZOgAAIVS1vPz8uWDw4QNgyVyQ1CJrmu5IFyDN59u7q7b2davTubxwNogECFXNHADg8QQqg8HWWSESgKo67NkAAFyu9eWBQHMzuJdOh1giWJxVBNLy8ys3BQLXbwCqFZICKIrdthAAQEnJkYN+/4HD0wECQAixoDtH2oYNly8BTqmrTA0pOQE4nWWlPt/+fVJbmcc/KyspObQP8xCm1kAIJWcwl2vjesBmBeTUnM6V/v8Ak5OR8VwB4vFojOR2Ta2BEY2GB3IFiEZ7B7DsIgMwhobefcwVYHi47SOQkACAeF/f49ZcAfr6nrZaAQYw0dPzuDkSCYUXKh6JdPf29Dx5BkwARgoAsbGOjtPXFgpobz91FWI/JUC1jImxsa6wpi3xer3BddmId3VdvtPd3dgEDANRIGEFGIDo73/xQdOcLq93c0aQT58a7nV0nLkCDAIRYBLMvWoBxAGjv//F+9HR9rDbXbHGbs/Pm0s4Egn1trUdbwiFGm8CA8BPIGbq/VMcBMlFdwAuwA2ax+fbs8Xv31Ptdles0nWfF2B8PDw4MtIWCocfvfr+/clLmBwy0zIqUzMTQPYFsIjklbuUZFHXMY++JdoJYNxMxxjwC/hjjhlWwZlMkLwN7SbMYf7LlMbNNERN0RjJnP/3tJyrBshoFPNTmTqYCROSYCodM75b0y0ys/nN+xj+C/Mh4eoX0xP+AAAAAElFTkSuQmCC&quot;</span>), auto</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span>,<span class="selector-tag">button</span>,<span class="selector-tag">i</span>,<span class="selector-id">#upj</span></span><br><span class="line"><span class="selector-id">#footer-wrap</span> <span class="selector-tag">a</span></span><br><span class="line"><span class="selector-id">#pagination</span> <span class="selector-class">.page-number</span>,</span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.site-page</span></span><br><span class="line">  <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">    <span class="attribute">cursor</span> url(<span class="string">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAdCAYAAAC0T3x2AAADVUlEQVRIibWWXWgUVxTHfzOTZDe7mzHZbGIIIqTaJKxCNMYi9UEwEkkEUdSXFvoUX1of6ge+CIotRehjLbRgXypIiQhRfCkVfLCNokkkqZu0hl0/1qRJzGqS3SUfuztz+7AzcViiMzu2f7gw986d87vnnnPPHXAuyWj/m6Tq6raPurqePO3sjMbWrNna5gao2EEAZceOnquVlS2by8qCVaraFH727OfLgCgGJDuY462qam0xO8Hgtq2ApxiIE5AMeBXFV74yIPvLDZCTRToGwerba7flrkD/iZyAVsswiSLT3ZVHjY0nPt+//+VUe/uD/oqKxmYnYLsVKUDNkSNi0joohK5LkiwDjI9fu5HJvEqsW3f44Ph4z9XBwS+OAbp1umuQVbqezclyaYnZv3fv0KcbNhw7qqrNTcPDJ0/H479cAUQhqLAv24EKtbycmPV4QlUAS0uT0zdv1q8HsmaMpNra3R2dnWNje/eOjIbDZ88B5auAbWVCABTF5yN/5iTZMFbS1nbpx0Dgw42qGm7etOn8ua6uWERVW1rdwEwlkyNPgFITBFA2PHzqW01bWDIn+f0fNOzZ03e7rm5fh1vQ3NzQY/PZ9EiamOi9dedOx3FNW1w2XyqK379zZ+9PbkHz85Ex8hkoZPLplwGSiUTf7/39n30jhL5Sma0ZVaxmZ/+MABq8qVk6kAO0ZHL0hSSVBGpqdrW8zYAzCfHo0ZdfaVrmFZAzY7TiFZAYGfn6u0Tij8j7YFKpx/FMJv0awyNrCbLAsjP3739yJpOZTbsFTU39ehfIYomRVTqwDMwtLLwYHRjovuAGIoQuYrFLPRbQW+8VHRCp1F8TXm9tfTC4vbkYUDT6/bV4/PIV8qHIvgskMPZ2cvLWUCi0vTUQ2FjvBDI9/dvAw4dHz+h69iWwgI1HFpiuP3/e06co3opQ6OMwSKtWCiF0EY1evD442H02l1v8B5gnH3PH1dsHBIFqVW0KNzR0H1i7tn2Lz9dQJ0mlSjr9dHpm5vZQLPZDbyr1dwRIAK8NbzTTkB1IMmAeQAUqAb/RN3dDM1aeNrxIAkvGuLAaspN5c5YCXqN5gBJjPEc+UxcNQNYAiEIjTiWRP3ey4Y31sOfIB10vBLgB2X3zzj/XfwGZgTBog2BRwgAAAABJRU5ErkJggg==&quot;</span>), auto</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="适配-Pjax">适配 Pjax</h2><ul><li><p>定位<code>~butterfly/layout/include/third-party/pjax.pug</code></p><ul><li>在<code>document.addEventListener('pjax:complete', function () &#123;&#125;</code>里最后插入</li><li><code>注意缩进对齐!</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;go-up&quot;</span>).<span class="property">innerHTML</span> += <span class="string">&quot;&lt;img class=&#x27;fas fa-arrow-up&#x27; style=&#x27;max-width: 300%; transform: translate(-30px,0px);&#x27; src=&#x27;https://fastly.jsdelivr.net/gh/Weidows/Images/img/up.png&#x27; title=&#x27;芜湖起飞!&#x27; &gt;&quot;</span>;</span><br><span class="line"><span class="keyword">new</span> <span class="title function_">xkTool</span>().<span class="title function_">footFish</span>();</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="优化">优化</h2><ul><li>上面很多东西已被优化过,方法都还能用,优化过程:<blockquote><p><a href="../optimize">🚀 网站优化记录.</a></p></blockquote></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> Node </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> butterfly </tag>
            
            <tag> css </tag>
            
            <tag> javascript </tag>
            
            <tag> hexo </tag>
            
            <tag> pug </tag>
            
            <tag> styl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🚫仅仅是一篇关于yaml文件语法虐待我后的小诟病</title>
      <link href="/post/experience/yaml-experience/"/>
      <url>/post/experience/yaml-experience/</url>
      
        <content type="html"><![CDATA[<!-- * @?: ********************************************************************* * @Author: Weidows * @Date: 2020-09-03 18:20:56 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:01:40 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\experience\yaml-experience.md * @Description: * @!: *********************************************************************--><ul><li><a href="#%E5%86%92%E5%8F%B7-">冒号 :</a></li><li><a href="#%E8%BF%9E%E5%AD%97%E7%AC%A6%E5%87%8F%E5%8F%B7--">连字符(减号) -</a></li><li><a href="#%E5%8D%95%E5%BC%95%E5%8F%B7-">单引号 ’</a></li><li><a href="#github-action">GitHub-Action</a></li><li><a href="#%E6%96%B0%E7%BB%8F%E9%AA%8C">新经验</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="冒号">冒号 :</h2><ul><li>yaml 元素标签后加个冒号表示结束,这俩要紧挨着,但是与冒号后跟着的值要空出一个空格<br>这样 <code>keyword: value</code></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="连字符-减号">连字符(减号) -</h2><ul><li>在 keyword 下面用-连续赋值,一定要注意缩进,连字符与 value 之间也需要有空格</li><li>另外不能保证这一排 value 是同一级的</li><li>比如下面的 Blog 是 backup 的下一级,backup 是 categories 的下一级</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  <span class="string">```</span></span><br><span class="line"></span><br><span class="line"><span class="string">&lt;a&gt;![分割线](https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png)&lt;/a&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 单引号 &#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="string">这魂淡肯定是成对出现,但又不是跟双引号一样`可有可无`</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">当</span> <span class="string">generate</span> <span class="string">时报错(一长溜)但又不知道啥原因时,尝试寻找一下这个的错</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">该来的地儿不来,不该来的却总是在</span> <span class="number">2333</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="comment">## GitHub-Action</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="string">集成化任务</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="string">集成化任务一般形式</span></span><br><span class="line">  <span class="string">```yml</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">PHP</span> <span class="string">Action</span></span><br><span class="line">    <span class="attr">uses:</span> <span class="string">shivammathur/setup-php@2.9.0</span></span><br></pre></td></tr></table></figure><ul><li>这种任务 uses 与 run 不能共存,可以有 with…</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="新经验">新经验</h2><blockquote><p><a href="https://www.runoob.com/w3cnote/yaml-intro.html">YAML 入门教程</a></p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yaml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>💧一些常用终端命令.</title>
      <link href="/post/experience/shell/shell/"/>
      <url>/post/experience/shell/shell/</url>
      
        <content type="html"><![CDATA[<h1>一些常用终端命令.</h1><!-- * @Author: Weidows * @Date: 2020-09-03 17:35:04 * @LastEditors: Weidows * @LastEditTime: 2022-06-06 11:16:29 * @FilePath: \Blog-private\source\_posts\experience\shell\shell.md--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4">一些常用终端命令.</a><ul><li><a href="#%E9%80%9A%E7%94%A8">通用</a><ul><li><a href="#%E6%96%87%E4%BB%B6%E6%9C%AB%E5%B0%BE%E8%BF%BD%E5%8A%A0%E5%91%BD%E4%BB%A4">文件末尾追加命令</a></li><li><a href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91">输出重定向</a></li><li><a href="#%E5%90%AF%E5%8A%A8%E7%A8%8B%E5%BA%8F">启动程序</a></li><li><a href="#%E6%B8%85%E5%9E%83%E5%9C%BE">清垃圾(?</a></li><li><a href="#%E4%B8%8E%E6%88%96-%E7%AE%A1%E9%81%93%E8%BF%90%E7%AE%97%E7%AC%A6">与或-管道运算符</a></li></ul></li><li><a href="#cmdpowershell">CMD/PowerShell</a></li><li><a href="#linux">Linux</a><ul><li><a href="#%E6%9F%A5%E6%9D%80%E8%BF%9B%E7%A8%8B">查杀进程</a></li><li><a href="#%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86">设置代理</a></li><li><a href="#%E5%AE%9D%E5%A1%94">宝塔</a></li></ul></li><li><a href="#git">Git</a></li><li><a href="#docker">Docker</a></li><li><a href="#vim">Vim</a></li><li><a href="#%E6%89%A9%E5%B1%95%E7%A8%8B%E5%BA%8F">扩展程序</a><ul><li><a href="#fzf">fzf</a></li><li><a href="#tldr">tldr</a></li></ul></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="通用">通用</h2><table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>cd path</code> // <code>cd ..</code> // <code>cd /</code> // <code>cd ~</code></td><td style="text-align:center">进入 指定 // 上层 // 根 // home 目录</td></tr><tr><td style="text-align:center"><code>Ctrl + L</code></td><td style="text-align:center">清屏</td></tr><tr><td style="text-align:center"><code>exit</code></td><td style="text-align:center">退出</td></tr><tr><td style="text-align:center"><code>ping</code></td><td style="text-align:center">测试网络通断状态</td></tr><tr><td style="text-align:center"><code>Ctrl + C</code></td><td style="text-align:center">停止当前任务</td></tr><tr><td style="text-align:center"><code>exit</code></td><td style="text-align:center">停止任务或终端</td></tr><tr><td style="text-align:center"><code>mkdir</code></td><td style="text-align:center">新建文件夹</td></tr><tr><td style="text-align:center"><code>cp(xcopy)/mv/rm</code></td><td style="text-align:center">文件(夹)复制、移动与删除</td></tr><tr><td style="text-align:center"><code>curl + URL</code></td><td style="text-align:center">访问 URL(可加参数,具体百度)</td></tr><tr><td style="text-align:center"><code>pwd</code></td><td style="text-align:center">显示当前全路径</td></tr><tr><td style="text-align:center"><code>dir/ls</code></td><td style="text-align:center">列出当前目录(样式不同)</td></tr><tr><td style="text-align:center"><code>cat</code></td><td style="text-align:center">(按参数格式)输出文件所有内容</td></tr><tr><td style="text-align:center"><code>clear</code></td><td style="text-align:center">清屏</td></tr><tr><td style="text-align:center"><code>echo</code></td><td style="text-align:center">回显,常用作文本输出</td></tr><tr><td style="text-align:center"><code>shutdown -h now</code> / <code>reboot</code></td><td style="text-align:center">关机 / 重启</td></tr><tr><td style="text-align:center"><code>ls | grep abc</code></td><td style="text-align:center">过滤 ls 的输出,只显示含&quot;abc&quot;的内容</td></tr><tr><td style="text-align:center"><code>ls | tee [-a] t.log</code></td><td style="text-align:center">显示 ls 输出同时[追加]输出到 t.log 里</td></tr><tr><td style="text-align:center"><code>mktemp</code></td><td style="text-align:center">临时创建一个 temp 文件</td></tr><tr><td style="text-align:center"><code>zip &quot;A.zip&quot; &quot;folder_A/**&quot; &quot;folder_B/**&quot;</code></td><td style="text-align:center">压缩多个文件夹或文件到 zip 文件</td></tr></tbody></table><hr><h3 id="文件末尾追加命令">文件末尾追加命令</h3><table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>echo 'add content'&gt;/home/data/test.sh</code></td><td style="text-align:center">覆盖原文件内容</td></tr><tr><td style="text-align:center"><code>echo 'add content'&gt;&gt;/home/data/test.sh</code></td><td style="text-align:center">在末尾追加</td></tr><tr><td style="text-align:center"><code>date +&quot;%Y-%m-%d %H:%M:%S.%N&quot; &gt;&gt; keepchange.txt</code></td><td style="text-align:center">这种写法也可以,就是把前面当成字符串输入文件</td></tr></tbody></table><hr><h3 id="输出重定向">输出重定向</h3><table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>ls &gt; ls.txt</code></td><td style="text-align:center">把 ls 输出内容输出到 ls.txt</td></tr><tr><td style="text-align:center"><code>&gt;/dev/null</code></td><td style="text-align:center">把标准输出重定向到黑洞,相当于(1&gt;/dev/null) 标准输入 0,标准输出 1,标准错误 2</td></tr><tr><td style="text-align:center"><code>&gt;/dev/null 2&gt;&amp;1</code></td><td style="text-align:center">把标准错误重定向到标准输出,也就是这俩都进了黑洞</td></tr><tr><td style="text-align:center"><code>2&gt;&amp;1 &gt;/dev/null</code></td><td style="text-align:center">把标准错误重定向到标准输出(屏幕),标准输出进黑洞</td></tr></tbody></table><blockquote><p><a href="https://blog.csdn.net/longgeaisisi/article/details/90519690">2&gt;/dev/null 和&gt;/dev/null 2&gt;&amp;1 和 2&gt;&amp;1&gt;/dev/null 的区别</a></p></blockquote><hr><h3 id="启动程序">启动程序</h3><blockquote><p><a href="https://www.cnblogs.com/IT-CPC/p/10898871.html">同步(Synchronous)和异步(Asynchronous)</a> 同步，就是调用某个东西时，调用方得等待这个调用返回结果才能继续往后执行。异步，和同步相反 调用方不会理解得到结果，而是在调用发出后调用者可用继续执行后续操作，被调用者通过状体来通知调用者，或者通过回掉函数来处理这个调用</p><ul><li>start 异步</li><li>call 同步</li></ul></blockquote><hr><h3 id="清垃圾">清垃圾(?</h3><ul><li><p>写脚本时,如果遇到两种情况:</p><ol><li><p>要删除某路径下所有东西</p></li><li><p>路径是变量</p></li></ol><p>那就有可能就变成删库跑路了…</p><hr></li><li><p>比如</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> <span class="built_in">PATH</span>=%<span class="number">1</span></span><br><span class="line">rm -rf <span class="variable">%PATH%</span>/*</span><br></pre></td></tr></table></figure><hr></li><li><p>PATH 靠调用脚本时传入的参数来定义,没传参数的话就 undefined,以至于下一行变成大名鼎鼎的</p><p><code>rm -rf /*</code></p></li></ul><hr><h3 id="与或-管道运算符">与或-管道运算符</h3><p>command1 &amp; command2 &amp; command3: 不论成败都会执行</p><p>command1 &amp;&amp; command2 &amp;&amp; command3: 左边全都执行成功/返回 0 才会执行右边的命令</p><p>command1 || command2 || command2: 左边全都执行失败/返回 1 才会执行右边的命令</p><p>command1 | command2: 把左边的命令的输出结果作为右边的命令的输入,例如 <code>ps | grep win</code></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="CMD-PowerShell">CMD/PowerShell</h2><blockquote><p><a href="https://www.hxstrive.com/article/804.htm">批处理定义子程序</a><br><a href="https://www.cnblogs.com/qlqwjy/p/8445993.html">批处理命令之 Start 的详细用法</a></p></blockquote><blockquote><p><a href="http://shouce.jb51.net/shell/dosbatch.html">bat 与 shell 互转 Appendix L. Converting DOS Batch Files to Shell Scripts</a></p></blockquote><table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>md</code></td><td style="text-align:center">创建目录,同 mkdir</td></tr><tr><td style="text-align:center"><code>rd</code></td><td style="text-align:center">删除目录,同 rm</td></tr><tr><td style="text-align:center"><code>del</code></td><td style="text-align:center">删除文件</td></tr><tr><td style="text-align:center"><code>cls</code></td><td style="text-align:center">清屏,同 clear</td></tr><tr><td style="text-align:center"><code>ipconfig</code></td><td style="text-align:center">查看网络配置</td></tr><tr><td style="text-align:center"><code>start + exe</code></td><td style="text-align:center">打开应用程序</td></tr><tr><td style="text-align:center"><code>start/explore + URL/HTML文件</code></td><td style="text-align:center">用默认浏览器打开</td></tr><tr><td style="text-align:center"><code>microsoft-edge:URL</code></td><td style="text-align:center">用 edge 打开 URL</td></tr><tr><td style="text-align:center"><code>xxx /?</code></td><td style="text-align:center">xxx 的帮助</td></tr></tbody></table><ul><li>注意 cmd 不支持<code>/</code>作为路径,PowerShell 支持</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Linux">Linux</h2><table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>su root</code></td><td style="text-align:center">获取最高权限(需要输入 root 密码)</td></tr><tr><td style="text-align:center"><code>ifconfig</code></td><td style="text-align:center">查看网络配置</td></tr><tr><td style="text-align:center"><code>dhclient</code></td><td style="text-align:center">DHCP 重新配置 IP</td></tr><tr><td style="text-align:center"><code>./xxx.sh start/restart/xxx</code></td><td style="text-align:center">启动/重启 shell 脚本</td></tr><tr><td style="text-align:center"><code>nohup xxx.sh &amp;</code></td><td style="text-align:center">不挂起执行 xxx (退出终端不影响程序运行),需要 ps/kill 杀死进程</td></tr><tr><td style="text-align:center"><code>tail -n 20 README.md</code></td><td style="text-align:center">输出 READMD 最后 20 行内容(默认是 10 行)</td></tr><tr><td style="text-align:center"><code>systemctl start/enable/status xxx.service</code></td><td style="text-align:center">xxx 服务-开启/开机启动/状态</td></tr><tr><td style="text-align:center"><code>touch a.txt</code></td><td style="text-align:center">创建 a.txt 文件</td></tr></tbody></table><blockquote><p><a href="https://www.runoob.com/linux/linux-comm-nohup.html">Linux nohup 命令</a> <br><a href="https://www.runoob.com/linux/linux-comm-tail.html">Linux tail 命令</a> <br><a href="https://mp.weixin.qq.com/s?__biz=MzIwMjU3NDI5Ng==&amp;mid=2247483948&amp;idx=1&amp;sn=6eed2f766b1a815c9bcca38cf9ccd3c2&amp;chksm=96ddd29ba1aa5b8d240d2c7cf9902b24f48ab36b196b86f7ea6d0b987c4538108276e6e273e6&amp;mpshare=1&amp;scene=23&amp;srcid=1020CNuclmVRrL4LTW9lyHwq&amp;sharer_sharetime=1634691119252&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd">基于 VSCode 和 CMake 进行 C/C++开发「第一讲」linux 系统介绍</a></p></blockquote><hr><h3 id="查杀进程">查杀进程</h3><table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>ps -ef/aux</code></td><td style="text-align:center">显示进程(注意多个进程用’,'隔开而非空格)</td></tr><tr><td style="text-align:center"><code>kill -9 pid</code></td><td style="text-align:center">杀死进程</td></tr><tr><td style="text-align:center"><code>lsof -i:8080 / -i@12:34:56:78</code></td><td style="text-align:center">Linux 中一切皆文件,此命令可以显示指定文件信息</td></tr></tbody></table><blockquote><p><a href="https://blog.csdn.net/weixin_38756990/article/details/72638084">ps -ef 和 ps -aux 和 ps aux</a><br><a href="https://www.runoob.com/linux/linux-comm-kill.html">Linux kill 命令</a><br><a href="https://www.jianshu.com/p/a3aa6b01b2e1">Linux 命令神器：lsof</a></p></blockquote><hr><h3 id="设置代理-2">设置代理</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> <span class="attribute">http_proxy</span>=http://192.168.131.1:7890</span><br><span class="line"><span class="built_in">export</span> <span class="attribute">https_proxy</span>=http://192.168.131.1:7890</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h3 id="宝塔">宝塔</h3><table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>/etc/init.d/bt default</code></td><td style="text-align:center">查看宝塔面板入口</td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Git-2">Git</h2><table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>git remote add origin 你的远程库地址</code></td><td style="text-align:center">添加远程</td></tr></tbody></table><ul><li>Git 三连<table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>git add .</code></td><td style="text-align:center">加入暂存区</td></tr><tr><td style="text-align:center"><code>git commit -m &quot;提交消息,可添加emoji😝&quot;</code></td><td style="text-align:center">提交</td></tr><tr><td style="text-align:center"><code>git push [origin(远程名字,默认是origin) master(分支名字)]</code></td><td style="text-align:center">推送</td></tr></tbody></table></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Docker">Docker</h2><table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>docker ps [-a]</code></td><td style="text-align:center">列出[所有]容器</td></tr><tr><td style="text-align:center"><code>docker ps --filter &quot;abcd / status=running</code></td><td style="text-align:center">筛选出含&quot;abcd&quot;/状态为 running 的容器</td></tr><tr><td style="text-align:center"><code>docker kill xxx</code></td><td style="text-align:center">关闭 xxx 容器</td></tr><tr><td style="text-align:center"><code>docker list| grep abc</code></td><td style="text-align:center">筛选 docker list 命令中含有 abc 字符串的结果集</td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="Vim">Vim</h2><table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>:q!</code></td><td style="text-align:center">如何获得一个随机字符串? &gt;让新手退出 vim</td></tr></tbody></table><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="扩展程序">扩展程序</h2><blockquote><p><a href="https://zhuanlan.zhihu.com/p/176277245">5 款超级好用的命令行工具，提升你的开发效率！</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzIyMDkwODczNw==&amp;mid=2247500080&amp;idx=2&amp;sn=64d4a8f3e4013ba7a77f25502cf945dd&amp;chksm=97c65c9ea0b1d58881e761a4bd69fa1136b87102e94d301685a085f2c6b09670dac5f5781e6a&amp;mpshare=1&amp;scene=23&amp;srcid=07058VtSWw1T2LusxMXcZtRs&amp;sharer_sharetime=1625473567691&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd">推荐 18 个终端命令行工具</a></p></blockquote><h3 id="fzf">fzf</h3><ul><li><p>与 grep 相似,不同点:</p><ul><li><p>grep 是查找写死的东西,查找范围固定</p></li><li><p>fzf 可动态查找用户输入的内容,并且范围大</p></li></ul></li></ul><table><thead><tr><th style="text-align:center">指令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center"><code>fzf</code></td><td style="text-align:center">模糊查找</td></tr><tr><td style="text-align:center"><code>ls | fzf</code></td><td style="text-align:center">在 ls 的输出内容中查找</td></tr></tbody></table><hr><h3 id="tldr">tldr</h3><p>命令帮助文档,优化版的 man,有个类似的工具 <code>cheat.sh</code>,一番角逐之下我还是用的 tldr</p><table><thead><tr><th style="text-align:center">指令</th></tr></thead><tbody><tr><td style="text-align:center">tldr cd</td></tr><tr><td style="text-align:center">tldr java</td></tr></tbody></table><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
          <category> shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> shell </tag>
            
            <tag> linux </tag>
            
            <tag> 操作系统 </tag>
            
            <tag> 宝塔面板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>两种inject自定义Js/CSS文件方法 &amp;&amp; Pjax冲突解决方案</title>
      <link href="/post/Web/Node/Hexo/inject_method/"/>
      <url>/post/Web/Node/Hexo/inject_method/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-08-31 01:35:01 * @LastEditors: Weidows * @LastEditTime: 2021-03-21 17:05:45 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Web\Node\Hexo\inject_method.md--><ul><li><a href="#hexo-%E6%B8%B2%E6%9F%93">hexo 渲染</a></li><li><a href="#%E9%80%9A%E8%BF%87%E4%B8%BB%E9%A2%98%E6%96%87%E4%BB%B6%E6%B3%A8%E5%85%A5">通过主题文件注入</a></li><li><a href="#%E9%80%9A%E8%BF%87%E4%BF%AE%E6%94%B9%E5%86%85%E9%83%A8%E6%96%87%E4%BB%B6%E6%B3%A8%E5%85%A5">通过修改内部文件注入</a></li><li><a href="#pjax-%E4%BD%BF-js-%E6%B8%B2%E6%9F%93%E5%A4%B1%E6%95%88%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">Pjax 使 JS 渲染失效解决方案</a><ul><li><a href="#%E6%96%87%E4%BB%B6%E5%AE%9A%E4%BD%8D">文件定位:</a></li></ul></li></ul><h2 id="hexo-渲染">hexo 渲染</h2><ul><li>不知道为啥,hexo 只渲染 source 下面*.html 文件,而不会渲染*.HTML 文件.</li></ul><hr><h2 id="通过主题文件注入">通过主题文件注入</h2><ul><li>一般是写在<code>theme/xxx/source/</code>里的<code>js</code>和<code>css</code>里面</li><li>随便起个名字,比如我的叫 mine.js 和 mine.css,里面写上需要的内容</li><li>在主题配置文件<code>_config.yml</code>里找到<code>inject:</code>字段,一般 css 在 head,js 在 bottom 里,如下:</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    - &lt;link <span class="attribute">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attribute">href</span>=<span class="string">&quot;./css/mine.css&quot;</span>&gt;</span><br><span class="line">  bottom:</span><br><span class="line">    - &lt;script <span class="attribute">src</span>=<span class="string">&quot;./js/mine.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>但是务必注意这样引入只对<code>某一层</code>目录生效,比如上面只对 public/第一层目录生效,其中子目录无效,如果想使其生效:</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    - &lt;link <span class="attribute">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attribute">href</span>=<span class="string">&quot;./css/mine.css&quot;</span>&gt;</span><br><span class="line">    - &lt;link <span class="attribute">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attribute">href</span>=<span class="string">&quot;../css/mine.css&quot;</span>&gt;</span><br><span class="line">    - &lt;link <span class="attribute">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attribute">href</span>=<span class="string">&quot;../../css/mine.css&quot;</span>&gt;</span><br><span class="line">  bottom:</span><br><span class="line">    - &lt;script <span class="attribute">src</span>=<span class="string">&quot;./js/mine.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    - &lt;script <span class="attribute">src</span>=<span class="string">&quot;../js/mine.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    - &lt;script <span class="attribute">src</span>=<span class="string">&quot;../../js/mine.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>喏,这样是让第一二三层生效了,以此类推.</li></ul><hr><h2 id="通过修改内部文件注入">通过修改内部文件注入</h2><ul><li>首先操作如上面一样新建文件并写好 js 和 css 文件,只是注入方式不同</li><li>找到<code>theme/xxx/layout/include/layout.pug</code>,在内部添加如下:</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script(<span class="attribute">src</span>=<span class="string">&#x27;js/mine.js&#x27;</span>)</span><br><span class="line">link(<span class="attribute">rel</span>=<span class="string">&#x27;stylesheet&#x27;</span>, <span class="attribute">href</span>=<span class="string">&#x27;css/mine.css&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>这两个分别是引入 js 和 css,可以分别在 body 和 head 里加入,注意缩进格式!</li><li>解释:<ul><li>在 Hexo generate 时会把<code>theme/xxx/source/</code>里你写的文件复制到<code>public/</code>对应目录里</li><li>一般 Hexo 在引用时根目录是<code>public/</code>,所以上面找的是<code>public/js/mine.js</code>和<code>public/css/mine.css</code></li><li>这样注入可能因为渲染位置和时机不对而未生效,需要酌情使用</li></ul></li></ul><hr><h2 id="Pjax-使-JS-渲染失效解决方案">Pjax 使 JS 渲染失效解决方案</h2><ul><li>用过的都知道 Pjax 可以让网页在非跳转的情况下局部刷新来使网页加载速度提升</li><li>但是会带来非常多的 Bug,比如某些依赖 JS 渲染和加载的插件无效化,或者监听和交互不奏效</li><li>网上搜的有些是让各种插件本身屈服 Pjax 各种修改渲染策略</li><li>这里提出一个虽然不是新方法但是也是个不错的解决方案:</li></ul><hr><h3 id="文件定位">文件定位:</h3><ul><li>这里修改的是 Butterfly 自带的 Pjax 第三方 pug,如有不同需要自行查找</li><li>找到<code>themes/butterfly/layout/includes/third-party/pjax.pug</code>,打开开始修改</li><li>定位 <code>document.addEventListener('pjax:complete', function ()</code>这一行,这是监听 Pjax 跳转页面是否完成的函数,并执行跳转完成后的指令</li><li>原理就是让 Pjax 加载完成页面后再让 JS 渲染一遍(但是可能有些局部渲染还是无法生效)</li><li>复制需要重载的 JS,粘贴到这个函数括号内部,并 Hexo Server 测试一下,如不生效也没法治了…</li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> Node </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> website </tag>
            
            <tag> html </tag>
            
            <tag> css </tag>
            
            <tag> hexo </tag>
            
            <tag> pjax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>😵‍💫Hexo-里一些奇奇怪怪的写法</title>
      <link href="/post/Web/Node/Hexo/Hexo-fansy.mmd/"/>
      <url>/post/Web/Node/Hexo/Hexo-fansy.mmd/</url>
      
        <content type="html"><![CDATA[<h1>Hexo-里一些奇奇怪怪的写法</h1><!-- * @Author: Weidows * @Date: 2020-08-27 01:13:03 * @LastEditors: Weidows * @LastEditTime: 2022-04-23 15:36:37 * @FilePath: \Blog-private\source\_posts\Web\Node\Hexo\Hexo-fansy.mmd.md--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#hexo-%E9%87%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E5%A5%87%E6%80%AA%E6%80%AA%E7%9A%84%E5%86%99%E6%B3%95">Hexo-里一些奇奇怪怪的写法</a><ul><li><a href="#%E6%96%87%E7%AB%A0%E6%A0%87%E9%A2%98-%E6%A0%BC%E5%BC%8F">文章标题-格式</a><ul><li><a href="#%E8%82%AF%E5%AE%9A%E8%A6%81%E8%83%8C%E8%BF%87%E7%9A%84">肯定要背过的</a></li><li><a href="#%E4%BB%A5%E4%B8%8B%E6%98%AF%E6%B2%A1%E7%94%A8%E8%BF%87%E6%88%96%E6%97%A0%E6%95%88%E7%9A%84">以下是没用过或无效的</a></li></ul></li><li><a href="#%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82">标签外挂</a></li><li><a href="#gallery-%E7%9B%B8%E5%86%8C%E5%9B%BE%E5%BA%93">Gallery 相册图库</a><ul><li><a href="#div-%E5%BC%8F%E5%86%99%E6%B3%95">div 式写法</a></li><li><a href="#%E6%95%88%E6%9E%9C">效果:</a></li><li><a href="#%E5%8F%A6%E4%B8%80%E7%A7%8D%E7%9B%B8%E5%86%8C%E5%BD%A2%E5%BC%8F%E8%87%AA%E5%8A%A8%E6%8E%92%E5%88%97">另一种相册形式(自动排列)</a></li></ul></li><li><a href="#tag-hide">tag-hide</a><ul><li><a href="#inline%E4%B8%80%E8%A1%8C%E5%86%85">inline(一行内)</a></li><li><a href="#block%E5%9D%97">Block(块)</a></li><li><a href="#toggle%E6%94%B6%E7%BC%A9%E6%A1%86">toggle(收缩框)</a></li></ul></li><li><a href="#mermaid">mermaid</a></li><li><a href="#tabs%E6%A0%87%E7%AD%BE%E5%9D%97">tabs(标签块)</a></li><li><a href="#button">Button</a><ul><li><a href="#%E5%86%99%E6%B3%95">写法:</a></li><li><a href="#%E5%A5%BD%E5%BA%B7%E7%9A%84-demo">好康的-demo</a></li></ul></li><li><a href="#_configyml">_config.yml</a></li><li><a href="#%E5%9B%BE%E7%89%87%E5%BC%95%E5%85%A5">图片引入</a></li><li><a href="#%E8%B5%84%E6%BA%90%E6%8E%92%E9%99%A4">资源排除</a></li></ul></li></ul></blockquote><h2 id="文章标题-格式">文章标题-格式</h2><p>在 markdown 文章里面最开头(如果不是开头的话报错),弄上如下框框</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="string">下面的格式标签写在这里</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h3 id="肯定要背过的">肯定要背过的</h3><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">title:</span> <span class="meta"># 网站标题</span></span><br><span class="line"><span class="symbol">categories:</span> <span class="meta"># 分类(只能单线)</span></span><br><span class="line">  - category_1</span><br><span class="line">  - category_1_1</span><br><span class="line">  - category_1_1_1</span><br><span class="line"><span class="symbol">password:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="symbol">tags:</span>  <span class="meta"># 标签(可以多标)</span></span><br><span class="line">  - tag_1</span><br><span class="line">  - tag_2</span><br><span class="line"><span class="symbol">type:</span> <span class="string">&quot;&quot;</span> <span class="meta"># 指定这个页面的类型(比如categories/tags)</span></span><br><span class="line"><span class="symbol">cover:</span> <span class="meta"># 封面图片,注意不能用../命令,双引号有无均可</span></span><br><span class="line"><span class="symbol">comments:</span> <span class="meta"># 评论开关 true/false</span></span><br><span class="line"><span class="symbol">date:</span> <span class="meta"># 创建时间</span></span><br><span class="line"><span class="symbol">updated:</span>  <span class="meta"># 更新时间</span></span><br><span class="line"><span class="symbol">description:</span> <span class="meta"># 网站描述</span></span><br><span class="line"><span class="symbol">aside:</span> <span class="meta"># 侧边栏开关</span></span><br><span class="line"><span class="symbol">top_img:</span> <span class="meta"># 文章banner图,如果有cover的话默认用的是cover(这个可以给_post之外的用),其隐藏前缀目录为Website/public/注意格式应为:images/xxx,但是这样会使_posts里文章的相关文章封面失效,需要用URL</span></span><br></pre></td></tr></table></figure><h3 id="以下是没用过或无效的">以下是没用过或无效的</h3><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">keywords:</span> <span class="meta"># 网站关键词</span></span><br><span class="line"><span class="symbol">author:</span> <span class="meta"># 网站作者</span></span><br><span class="line"><span class="symbol">language:</span> <span class="meta"># 语言, 一般填 &#x27;zh-CN&#x27;</span></span><br><span class="line"><span class="symbol">timezone:</span> <span class="meta"># 时区, 可以不填</span></span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="标签外挂">标签外挂</h2><ul><li><p>写法:</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name">note</span> default %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">default 提示块标籤</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">endnote</span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">note</span> primary no-icon %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">primary 提示块标籤</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">endnote</span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">note</span> success %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">success 提示块标籤</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">endnote</span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">note</span> info %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">info 提示块标籤</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">endnote</span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">note</span> warning %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">warning 提示块标籤</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">endnote</span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">note</span> danger %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">danger 提示块标籤</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">endnote</span> %&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>显示效果:</p><div class="note default flat"><p>default 提示块标籤</p></div><div class="note primary no-icon flat"><p>primary 提示块标籤</p></div><div class="note success flat"><p>success 提示块标籤</p></div><div class="note info flat"><p>info 提示块标籤</p></div><div class="note warning flat"><p>warning 提示块标籤</p></div><div class="note danger flat"><p>danger 提示块标籤</p></div></li></ul><hr><h2 id="Gallery-相册图库">Gallery 相册图库</h2><h3 id="div-式写法">div 式写法</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">div</span> <span class="keyword">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span><br><span class="line">&#123;% galleryGroup name <span class="keyword">description</span> link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name <span class="keyword">description</span> link img-url %&#125;</span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line"></span><br><span class="line">name：图库名字</span><br><span class="line"><span class="keyword">description</span>：图库描述</span><br><span class="line">link：连接到对应相册的地址</span><br><span class="line">img-url：图库封面的地址</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">&lt;<span class="keyword">div</span> <span class="keyword">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span><br><span class="line">&#123;% galleryGroup <span class="number">1</span> <span class="number">1</span> tags<span class="regexp">/gallery/</span>PrettyGreen https:<span class="comment">//www.helloimg.com/images/2022/02/27/GVSsBr.png %&#125;</span></span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="效果">效果:</h3>  <div class="gallery-group-main">    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://www.helloimg.com/images/2022/02/27/GVSsBr.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">1</div>  <p>1</p>  <a href='/Gallery/wallpaper'></a>  </figcaption>  </figure>      <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://www.helloimg.com/images/2022/02/27/GVSJ7q.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">2</div>  <p>2</p>  <a href='/Gallery/marvel'></a>  </figcaption>  </figure>      <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://www.helloimg.com/images/2022/02/27/GVLioP.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">3</div>  <p>3</p>  <a href='/Gallery/ohmygirl'></a>  </figcaption>  </figure>    </div><h3 id="另一种相册形式-自动排列">另一种相册形式(自动排列)</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">!<span class="selector-attr">[图片描述]</span>(图片地址)</span><br><span class="line">!<span class="selector-attr">[图片描述]</span>(图片地址)</span><br><span class="line">!<span class="selector-attr">[图片描述]</span>(图片地址)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="tag-hide">tag-hide</h2><h3 id="inline-一行内">inline(一行内)</h3><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="symbol">%</span> hideInline <span class="built_in">content</span>,<span class="built_in">display</span>,bg,<span class="built_in">color</span> <span class="symbol">%</span>&#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">content</span>: 文本内容</span><br><span class="line">  <span class="built_in">display</span>: 按钮显示的文字 (可选)</span><br><span class="line">  bg: 按钮的背景颜色 (可选)</span><br><span class="line">  <span class="built_in">color</span>: 按钮文字的颜色 (可选)</span><br></pre></td></tr></table></figure><ul><li><p>例如 1:</p><p><code>我是谁:&#123;% hideInline Weidows,查看答案,#FF7242,#fff %&#125;</code></p><p>我是谁:<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案  </button><span class="hide-content">Weidows</span></span></p></li></ul><h3 id="Block-块">Block(块)</h3><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name">hideBlock</span> display,bg,color %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">content</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">endhideBlock</span> %&#125;</span></span><br></pre></td></tr></table></figure><ul><li><p>例如 2:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock 我是谁 %&#125;</span><br><span class="line">爷是:</span><br><span class="line">Weidows</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><div class="hide-block"><button type="button" class="hide-button" style="">我是谁    </button><div class="hide-content"><p>爷是:<br>Weidows</p></div></div></li></ul><h3 id="toggle-收缩框">toggle(收缩框)</h3><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name">hideToggle</span> display,bg,color %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">content</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">endhideToggle</span> %&#125;</span></span><br></pre></td></tr></table></figure><ul><li><p>例如 3:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideToggle 我是谁 %&#125;</span><br><span class="line">爷是:</span><br><span class="line">Weidows</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><details class="toggle" ><summary class="toggle-button" style="">我是谁</summary><div class="toggle-content"><p>爷是:<br>Weidows</p></div></details></li><li><p>tag-hide 内的标签外挂 content 内都不建议有 h1 - h6 等标题。因为 Toc 会把隐藏内容标题也显示出来，而且当滚动屏幕时，如果隐藏内容没有显示出来，会导致 Toc 的滚动出现异常。</p></li></ul><hr><h2 id="mermaid">mermaid</h2><ul><li><p>写法:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% mermaid %&#125;</span><br><span class="line">内容</span><br><span class="line">&#123;% endmermaid %&#125;</span><br></pre></td></tr></table></figure></li><li><p>例如:<div class="mermaid-wrap"><pre class="mermaid-src" hidden>  &lt;div class&#x3D;&quot;mermaid-wrap&quot;&gt;&lt;pre class&#x3D;&quot;mermaid-src&quot; hidden&gt;  pie  title Key elements in Product X  &quot;Calcium&quot; : 42.96  &quot;Potassium&quot; : 50.05  &quot;Magnesium&quot; : 10.01  &quot;Iron&quot; : 5  &lt;&#x2F;pre&gt;&lt;&#x2F;div&gt;&lt;&#x2F;p&gt;&lt;&#x2F;li&gt;&lt;&#x2F;ul&gt;  </pre></div><ul><li><p>显示:</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  pietitle Key elements in Product X&quot;Calcium&quot; : 42.96&quot;Potassium&quot; : 50.05&quot;Magnesium&quot; : 10.01&quot;Iron&quot; : 5  </pre></div></li><li><p>官方原文:</p><blockquote><ul><li>mermaid 标籤不允许嵌套于一些隐藏属性的标籤外挂，例如: tag-hide 内的标籤外挂和 tabs 标籤外挂，这会导致 mermaid 图示无法正常显示，使用时请留意。</li><li>请不要压缩 html 代码，不然会导致 mermaid 显示异常</li></ul></blockquote></li><li><p>压缩 HTML 很有必要,如何排除这种添加了 mermaid 的 HTML 文件呢?</p><blockquote><p>我用的如下方式: 把添加了 mermaid 的 markdown 文件命名为 <code>xxx.mmd.md</code>,这样 neat 时就会被排除了.</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;**/*.mmd/*&quot;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="tabs-标签块">tabs(标签块)</h2><ul><li><p>写法:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs <span class="keyword">Unique</span> <span class="type">name</span>, [<span class="keyword">index</span>] %&#125;</span><br><span class="line">&lt;!<span class="comment">-- tab [Tab caption] [@icon] --&gt;</span></span><br><span class="line">markdown内容(<span class="keyword">inline</span>)</span><br><span class="line">&lt;!<span class="comment">-- endtab --&gt;</span></span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">Unique</span> <span class="type">name</span>   : <span class="keyword">Unique</span> <span class="type">name</span> <span class="keyword">of</span> tabs block tag <span class="keyword">without</span> comma.</span><br><span class="line">                Will be used <span class="keyword">in</span> #id<span class="string">&#x27;s as prefix for each tab with their index numbers.</span></span><br><span class="line"><span class="string">                If there are whitespaces in name, for generate #id all whitespaces will replaced by dashes.</span></span><br><span class="line"><span class="string">                Only for current url of post/page must be unique!</span></span><br><span class="line"><span class="string">[index]       : Index number of active tab.</span></span><br><span class="line"><span class="string">                If not specified, first tab (1) will be selected.</span></span><br><span class="line"><span class="string">                If index is -1, no tab will be selected. It&#x27;</span>s will be something <span class="keyword">like</span> spoiler.</span><br><span class="line">                Optional parameter.</span><br><span class="line">[Tab caption] : Caption <span class="keyword">of</span> <span class="keyword">current</span> tab.</span><br><span class="line">                <span class="keyword">If</span> <span class="keyword">not</span> caption specified, <span class="keyword">unique</span> <span class="type">name</span> <span class="keyword">with</span> tab <span class="keyword">index</span> suffix will be used <span class="keyword">as</span> caption <span class="keyword">of</span> tab.</span><br><span class="line">                <span class="keyword">If</span> <span class="keyword">not</span> caption specified, but specified icon, caption will empty.</span><br><span class="line">                Optional parameter.</span><br><span class="line">[@icon]       : FontAwesome icon <span class="type">name</span> (<span class="keyword">full</span>-<span class="type">name</span>, look <span class="keyword">like</span> <span class="string">&#x27;fas fa-font&#x27;</span>)</span><br><span class="line">                Can be specified <span class="keyword">with</span> <span class="keyword">or</span> <span class="keyword">without</span> space; e.g. <span class="string">&#x27;Tab caption @icon&#x27;</span> <span class="keyword">similar</span> <span class="keyword">to</span> <span class="string">&#x27;Tab caption@icon&#x27;</span>.</span><br><span class="line">                Optional parameter.</span><br></pre></td></tr></table></figure></li><li><p>例如: (test2 标签为预选状态,找不到的话就是第一个)</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name">tabs</span> test2 %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- tab 第一个Tab --&gt;</span></span></span><br><span class="line"><span class="language-xml">**tab名字为第一个Tab**</span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- endtab --&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- tab @fab fa-apple-pay --&gt;</span></span></span><br><span class="line"><span class="language-xml">**只有图标 没有Tab名字**</span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- endtab --&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- tab 炸弹@fas fa-bomb --&gt;</span></span></span><br><span class="line"><span class="language-xml">**名字+icon**</span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- endtab --&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">endtabs</span> %&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>显示:</p><div class="tabs" id="test2"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test2-1">第一个Tab</button></li><li class="tab"><button type="button" data-href="#test2-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test2-3"><i class="fas fa-bomb"></i>炸弹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test2-1"><p><strong>tab 名字为第一个 Tab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test2-2"><p><strong>只有图标 没有 Tab 名字</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test2-3"><p><strong>名字+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></li></ul><hr><h2 id="Button">Button</h2><h3 id="写法">写法:</h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn <span class="comment">[url]</span>,<span class="comment">[text]</span>,<span class="comment">[icon]</span>,<span class="comment">[color]</span> <span class="comment">[style]</span> <span class="comment">[layout]</span> <span class="comment">[position]</span> <span class="comment">[size]</span> %&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">[url]</span>         : 链接</span><br><span class="line">  <span class="comment">[text]</span>        : 按钮文字</span><br><span class="line">  <span class="comment">[icon]</span>        : <span class="comment">[可选]</span> 图标</span><br><span class="line">  <span class="comment">[color]</span>       : <span class="comment">[可选]</span> 按钮背景顔色(默认style时）</span><br><span class="line">                        按钮字体和边框顔色(outline时)</span><br><span class="line">                        default/blue/pink/red/purple/orange/green</span><br><span class="line">  <span class="comment">[style]</span>       : <span class="comment">[可选]</span> 按钮样式 默认实心</span><br><span class="line">                        outline/留空</span><br><span class="line">  <span class="comment">[layout]</span>      : <span class="comment">[可选]</span> 按钮佈局 默认为line</span><br><span class="line">                        block/留空</span><br><span class="line">  <span class="comment">[position]</span>    : <span class="comment">[可选]</span> 按钮位置 前提是设置了layout为block 默认为左边</span><br><span class="line">                        center/right/留空</span><br><span class="line">  <span class="comment">[size]</span>        : <span class="comment">[可选]</span> 按钮大小</span><br><span class="line">                        larger/留空</span><br></pre></td></tr></table></figure><h3 id="好康的-demo">好康的-demo</h3><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn <span class="string">&#x27;http://www.jerryc.me&#x27;</span>,JerryC,far fa-hand-<span class="built_in">point</span>-right,outline <span class="built_in">blue</span> larger %&#125;</span><br><span class="line">&#123;% btn <span class="string">&#x27;http://www.jerryc.me&#x27;</span>,JerryC,far fa-hand-<span class="built_in">point</span>-right,outline pink larger %&#125;</span><br><span class="line">&#123;% btn <span class="string">&#x27;http://www.jerryc.me&#x27;</span>,JerryC,far fa-hand-<span class="built_in">point</span>-right,outline <span class="built_in">red</span> larger %&#125;</span><br><span class="line">&#123;% btn <span class="string">&#x27;http://www.jerryc.me&#x27;</span>,JerryC,far fa-hand-<span class="built_in">point</span>-right,outline purple larger %&#125;</span><br><span class="line">&#123;% btn <span class="string">&#x27;http://www.jerryc.me&#x27;</span>,JerryC,far fa-hand-<span class="built_in">point</span>-right,outline orange larger %&#125;</span><br><span class="line">&#123;% btn <span class="string">&#x27;http://www.jerryc.me&#x27;</span>,JerryC,far fa-hand-<span class="built_in">point</span>-right,outline <span class="built_in">green</span> larger %&#125;</span><br></pre></td></tr></table></figure><ul><li>演示:<a class="btn-beautify outline blue larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify outline pink larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify outline red larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify outline purple larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify outline orange larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify outline green larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a></li></ul><hr><h2 id="config-yml">_config.yml</h2><ul><li>合并:把 themes/xxx/_config.yml 移动到 source/_data/里,并改名为 xxx.yml</li><li>我所遇到的各种问题<ul><li>这里面 inject js/css 功能只能插入本地的,而且必须是./形式</li><li>css 的 inject 在 head,js 的 inject 在 body,不能改变位置(失效)</li><li>valine 设置处的 placeholder 不能写带单引号的内容,会导致整个 valine 评论崩溃不显示</li></ul></li></ul><hr><h2 id="图片引入">图片引入</h2><ul><li>引入图片,在 source 里面当路径正确出现图片时,还需要再加一层</li><li>因为在 Hexo generate 时会多出现一层路径,需要在 source 里多一个…/</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="资源排除">资源排除</h2><p>就是把 source 里面的某些目录/文件排除 (不做渲染也不被包含进 public)</p><ul><li><p>找了半天文档, 它写在注释里…</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Do not use this to exclude posts in the &#x27;source/_posts/&#x27;.</span></span><br><span class="line"><span class="comment"># Use skip_render for that. Or prepend an underscore to the filename.</span></span><br></pre></td></tr></table></figure></li></ul><p>也就是说在文件[夹]名字前加个下划线就行</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> Node </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> website </tag>
            
            <tag> html </tag>
            
            <tag> markdown </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVM内存模型</title>
      <link href="/post/Java/jvm_model/"/>
      <url>/post/Java/jvm_model/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-08-25 19:14:35 * @LastEditors: Weidows * @LastEditTime: 2021-12-20 21:19:30 * @FilePath: \Blog-private\source\_posts\Java\jvm_model.md--><ul><li><a href="#%E5%AD%90%E7%88%B6%E7%B1%BB%E5%8A%A0%E8%BD%BD">子父类加载</a></li><li><a href="#jvm-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B">JVM 内存模型</a><ul><li><a href="#%E5%A0%86heap"><code>堆heap</code>:</a></li><li><a href="#%E6%A0%88stack"><code>栈stack</code>:</a></li><li><a href="#%E6%96%B9%E6%B3%95%E5%8C%BAmethod"><code>方法区method</code>:</a></li></ul></li><li><a href="#%E4%B8%BE%E4%B8%AA%E6%A0%97%E5%AD%90">举个栗子</a></li><li><a href="#%E9%87%8D%E7%82%B9"><code>重点!</code></a><ul><li><a href="#%E5%9C%A8-student-stu--new-student-%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%AD%90%E7%B1%BB%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%BF%87%E7%A8%8B">在 Student stu = new Student(); 过程中,子类对象的实例化过程:</a></li><li><a href="#java-%E5%BC%95%E7%94%A8%E5%8F%98%E9%87%8F%E6%9C%89%E4%B8%A4%E4%B8%AA%E7%B1%BB%E5%9E%8B%E7%BC%96%E8%AF%91%E6%97%B6%E7%B1%BB%E5%9E%8B--%E8%BF%90%E8%A1%8C%E6%97%B6%E7%B1%BB%E5%9E%8B">Java 引用变量有两个类型:<code>编译时类型</code> &amp;&amp; <code>运行时类型</code></a></li></ul></li><li><a href="#%E8%99%9A%E6%8B%9F%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E4%BE%8B%E5%AD%90">虚拟方法调用例子</a></li><li><a href="#jvm-errors">JVM Errors</a><ul><li><a href="#1awt-%E9%94%99%E8%AF%AF">1.AWT 错误</a></li><li><a href="#2jvm-%E9%94%99%E8%AF%AF">2.JVM 错误</a></li></ul></li><li><a href="#%E6%B7%B1%E6%B5%85-clone">深浅-clone</a></li></ul><h2 id="子父类加载">子父类加载</h2><ul><li><p>最近发现的一个知识漏洞</p><blockquote><p><a href="https://www.cnblogs.com/zxcoder/p/12250210.html">Java 多态之 Father f=new Son();</a></p></blockquote></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="JVM-内存模型">JVM 内存模型</h2><h3 id="堆heap"><code>堆heap</code>:</h3><p>所有的对象(包括定义的对象和字符串对象)</p><h3 id="栈stack"><code>栈stack</code>:</h3><p>基础数据类型,以及对象的引用(对象在堆内部的地址)</p><h3 id="方法区method"><code>方法区method</code>:</h3><p>所有的 class 和 static 变量</p><hr><h2 id="举个栗子">举个栗子</h2><p>Person p = new Person();<br>栈里面存的就是 p,这个 p 指向堆里面 new Person()出来的那个对象地址</p><hr><h2 id="重点"><code>重点!</code></h2><h3 id="在-Student-stu-new-Student-过程中-子类对象的实例化过程">在 Student stu = new Student(); 过程中,子类对象的实例化过程:</h3><ul><li><p><code>方法区</code>:</p><ol><li>先加载 Person.class,然后是 Student.class (先父类后子类)</li></ol></li><li><p><code>堆内存</code>:</p><ol start="3"><li><p>开辟对象空间,分配地址</p></li><li><p>在对象空间对对象的属性(包括父类的属性)进行默认初始化</p></li><li><p>显示初始化父类属性</p></li><li><p>显示初始化子类属性</p></li></ol></li><li><p><code>栈内存</code>:</p><ol start="2"><li><p>申请空间,声明变量 stu</p></li><li><p>子类构造函数方法进栈</p></li><li><p>父类构造方法进栈,执行后出栈</p></li><li><p>初始化完毕后,将堆内存中的地址赋给引用变量,子类构造方法出栈</p></li></ol></li></ul><h3 id="Java-引用变量有两个类型-编译时类型-运行时类型">Java 引用变量有两个类型:<code>编译时类型</code> &amp;&amp; <code>运行时类型</code></h3><ul><li>编译时类型有声明该变量是使用的类型决定</li><li>运行时类型由实际赋给该变量的对象决定</li><li>如果二者类型不一致,就出现(对象的)多态<ul><li>子类的对象可以替代父类的对象使用</li><li>一个引用类型变量可以指向不同类型的对象</li></ul></li><li>成员变量:不具备多态性,只看引用变量所属的类(其指向的堆内的具体对象)是否存在该成员</li></ul><hr><h2 id="虚拟方法调用例子">虚拟方法调用例子</h2><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person e <span class="operator">=</span> new Student()<span class="comment">;</span></span><br><span class="line">e.getInfo()<span class="comment">;</span></span><br></pre></td></tr></table></figure><ul><li>编译时 e 为 Person 类型,调用时是用的 Student 类的(动态绑定)</li></ul><hr><h2 id="JVM-Errors">JVM Errors</h2><h4 id="1-AWT-错误">1.AWT 错误</h4><h4 id="2-JVM-错误">2.JVM 错误</h4><ul><li>StackOverflow</li><li>OutOfMemory</li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="深浅-clone">深浅-clone</h2><img src="https://www.helloimg.com/images/2022/02/27/GVPOM5.png" alt="20211220211918" /><img src="https://www.helloimg.com/images/2022/02/27/GVtgin.png" alt="20211220211958" /><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> jvm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🥸VScode-snippet-用户代码片段</title>
      <link href="/post/tools/vscode/snippet/"/>
      <url>/post/tools/vscode/snippet/</url>
      
        <content type="html"><![CDATA[<h1>VScode-snippet-用户代码片段</h1><!-- * @Author: Weidows * @Date: 2020-08-25 19:14:35 * @LastEditors: Weidows * @LastEditTime: 2022-04-20 23:48:01 * @FilePath: \Blog-private\source\_posts\tools\vscode\snippet.md--><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="#vscode-snippet-%E7%94%A8%E6%88%B7%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5">VScode-snippet-用户代码片段</a><ul><li><a href="#%E5%BC%80%E5%90%AF-snippet">开启-snippet</a></li><li><a href="#%E5%85%A5%E9%97%A8%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5">入门代码片段</a></li><li><a href="#%E6%B7%B1%E5%85%A5-%E4%BD%8D%E7%BD%AE%E5%8C%B9%E9%85%8D">深入-位置匹配</a></li><li><a href="#%E5%80%9F%E7%89%A9%E8%A1%A8">借物表</a></li></ul></li></ul></blockquote><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="开启-snippet">开启-snippet</h2><ul><li><p>首先需要打开 markdown 文件的 <code>quickSuggestions</code>,因为其默认是未开启状态</p><img src="https://www.helloimg.com/images/2022/02/27/GVLUFC.png" alt="20210131221250" /></li><li><p>在设置文件里加上以下设置</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;editor.snippetSuggestions&quot;</span><span class="punctuation">:</span> <span class="string">&quot;top&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;[markdown]&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;editor.quickSuggestions&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="入门代码片段">入门代码片段</h2><img src="https://www.helloimg.com/images/2022/02/27/GVLl5R.png" alt="20210131221522" /><ul><li><p>点小齿轮找到用户代码片段设置,进入设置文件,在大括号里添加自定义的代码片段,比如下面我的:</p><p>这个片段就可以在 markdown 文件内输入<code>divider</code>快速生成模板,省去复制的麻烦了.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;Divider&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scope&quot;</span><span class="punctuation">:</span> <span class="string">&quot;markdown&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;divider&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;body&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;&lt;a&gt;![分割线](https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png)&lt;/a&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="深入-位置匹配">深入-位置匹配</h2><ul><li><p>tab stops: 当按下 tab 补全后光标所跳转到的位置,第一个位置完成后再按 tab 切到第二个位置,以此类推<sup id='cite_ref-1'><a href="#cite_note-1">[1]</a></sup></p><p>$1 : 第一个位置</p><p>$2 : 第二个位置</p><p>$3 : 第三个位置</p><p>…</p><p>$0 : 补全上面所有位置后光标停留位置</p></li></ul><hr><ul><li><p>这样一个场景: 想打一个 mermaid,然后出来下面这样</p><p><img src="https://www.helloimg.com/images/2022/02/26/GVRDDc.gif" alt=""></p><hr><p>可以这样:   (抱歉贴代码会报错,贴图吧)</p><p><img src="https://www.helloimg.com/images/2022/02/27/GVOQB9.png" alt=""></p></li></ul><hr><ul><li><p>接下来, 我们想对多个位置同时操作:</p><p><img src="https://www.helloimg.com/images/2022/02/26/GVRWDP.png" alt=""></p><p>当输入 paper-footnote 后按下 tab, 所有$1 处都会出现光标,可以同时操作</p><p><img src="https://www.helloimg.com/images/2022/02/26/GVR2Pg.png" alt=""></p></li></ul><hr><ul><li><p>对于上面例子, 操作完所有$1 位置后,我们想跳到中间那行位置</p><p>下面两种都是可以的,操作完$1 后再按 tab 就会跳转, 只不过$2 概念上来说是下一步位置, $0 概念上是最后位置</p><p><img src="https://www.helloimg.com/images/2022/02/26/GVROC6.png" alt=""></p></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="借物表-39">借物表</h2><p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href="https://chinese.freecodecamp.org/news/definitive-guide-to-snippets-visual-studio-code/">VS Code 代码片段完全入门指南</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
          <category> vscode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
            <tag> markdown </tag>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于在不会PHP的情况下调用PHP API</title>
      <link href="/post/experience/PHP_interface/"/>
      <url>/post/experience/PHP_interface/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-08-25 09:50:37 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:01:12 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\experience\PHP_interface.md--><ul><li><a href="#%E7%AE%80%E5%8D%95%E8%B0%83%E7%94%A8">简单调用</a></li><li><a href="#get-%E6%96%B9%E5%BC%8F%E7%9A%84%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8">GET 方式的直接使用</a></li></ul><h2 id="简单调用">简单调用</h2><ul><li>他会提供相应接口给你的，具体调用方法就相当于讲求某个链接,如：<br><code>http://localhost/operate.php?act=get_user_list&amp;type=json</code></li><li>在这里 operate.php 相当于一个接口，其中 get_user_list 是一个 API（获取用户列表），讲求返回的数据类型为 JSON 格式。</li><li>你只需要在你 PHP 代码中执行这条链接他就会返回。</li></ul><h2 id="GET-方式的直接使用">GET 方式的直接使用</h2><p>$file_contents = file_get_content(‘<a href="http://localhost/operate.php?act=get_user_list&amp;type=json">http://localhost/operate.php?act=get_user_list&amp;type=json</a>’)</p><p>POST 方式得用下面的(需要开启 PHP curl 支持)。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$url</span> = <span class="string">&#x27;http://localhost/operate.php?act=get_user_list&amp;type=json&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$ch</span> = curl_init ();</span><br><span class="line"></span><br><span class="line">curl_setopt ( <span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span> );</span><br><span class="line"></span><br><span class="line">curl_setopt ( <span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span> );</span><br><span class="line"></span><br><span class="line">curl_setopt ( <span class="variable">$ch</span>, CURLOPT_CONNECTTIMEOUT, <span class="number">10</span> );</span><br><span class="line"></span><br><span class="line">curl_setopt ( <span class="variable">$ch</span>, CURLOPT_POST, <span class="number">1</span> ); <span class="regexp">//</span>启用POST提交</span><br><span class="line"></span><br><span class="line"><span class="variable">$file_contents</span> = curl_exec ( <span class="variable">$ch</span> );</span><br><span class="line"></span><br><span class="line">curl_close ( <span class="variable">$ch</span> );</span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> experience </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> php </tag>
            
            <tag> website </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>淦翻Hexo各种插件安装+调试</title>
      <link href="/post/Web/Node/Hexo/Hexo-plugin/"/>
      <url>/post/Web/Node/Hexo/Hexo-plugin/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-08-25 00:05:52 * @LastEditors: Weidows * @LastEditTime: 2022-05-22 11:22:18 * @FilePath: \Blog-private\source\_posts\Web\Node\Hexo\Hexo-plugin.md--><h2 id="常用的-Hexo-自身命令">常用的 Hexo 自身命令</h2><ul><li><p>安装 Hexo-cli(命令行支持插件,它自动包含 hexo 本身)</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-<span class="keyword">cli</span></span><br></pre></td></tr></table></figure></li><li><p>查看版本</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="built_in">version</span></span><br></pre></td></tr></table></figure></li><li><p>升级</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> update hexo</span><br></pre></td></tr></table></figure></li><li><p>初始化博客</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">init</span> 博客名</span><br></pre></td></tr></table></figure></li><li><p>删除插件</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> uninstall hexo-xxx</span><br></pre></td></tr></table></figure></li><li><p>新建页面</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hexo <span class="keyword">new</span> <span class="type">page</span> page 名</span><br></pre></td></tr></table></figure></li><li><p>安装过的插件会在 root/package.json 里显示</p></li></ul><hr><h2 id="安装渲染器">安装渲染器</h2><ul><li><p>pug 和 stylus 渲染器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="添加-tags-categories-link-页面">添加 tags/categories/link 页面</h2><ul><li>可以通过修改 markdown 来更换标题和 top_img</li></ul><h3 id="tags">tags</h3><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> <span class="type">page</span> tags</span><br></pre></td></tr></table></figure><h3 id="categories">categories</h3><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> <span class="type">page</span> categories</span><br></pre></td></tr></table></figure><h3 id="link">link</h3><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> <span class="type">page</span> link</span><br></pre></td></tr></table></figure><ul><li><p>另外还需要在 <code>source/_data/link.yml</code> 里添加数据,如:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">友情鏈接</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">那些人，那些事</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">JerryC</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://jerryc.me/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://jerryc.me/image/avatar.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">今日事,今日畢</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://hexo.io/zh-tw/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">快速、簡單且強大的網誌框架</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">網站</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">值得推薦的網站</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Youtube</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.youtube.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://fastly.jsdelivr.net/gh/Weidows/Images/post/9ZkGg8v3azHJfM1.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">視頻網站</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Weibo</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.weibo.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://fastly.jsdelivr.net/gh/Weidows/Images/post/TLJBum386vcnI1P.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">中國最大社交分享平台</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Twitter</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://twitter.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://fastly.jsdelivr.net/gh/Weidows/Images/post/5VyHPQqR6LWF39a.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">社交分享平台</span></span><br></pre></td></tr></table></figure></li><li><p>最后,还可以在 <a href="http://link.md">link.md</a> 中自定义样式(写的内容显示在友链下方)</p></li></ul><hr><h2 id="安装-deployer">安装 deployer</h2><ul><li><p>(这个不能用阿里源) &amp;&amp; 编译部署三部曲(GitHub 需要,Gitee 不用)</p></li><li><p>安装:</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git <span class="comment">--save</span></span><br></pre></td></tr></table></figure></li><li><p><a href="https://github.com/hexojs/hexo-deployer-git">官方配置文档(必要)</a></p><ul><li>个人配置</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">https://gitee.com/Weidows/Weidows.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">https://github.com/Weidows/Weidows.github.io.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure></li><li><p>使用:在博客根目录使用命令<code>hexo deploy</code></p><ul><li>也可以参照下面一条龙服务自行添加快捷方式.</li></ul></li></ul><hr><h2 id="一条龙服务">一条龙服务</h2><ul><li><p>正常的测试流程为</p><ul><li>hexo clean</li><li>hexo generate</li><li>hexo server</li></ul></li><li><p>每次生成需要等一段时间,怎么把它们合成为一条指令呢?参下:</p></li><li><p>定位博客根目录下的<code>package.json</code></p><ul><li>修改<code>&quot;scripts&quot;</code>,如下<code>&quot;all&quot;</code>就是新添加的:</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo generate&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo deploy&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo server&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;all&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>然后就可以一键使用了.</p><img src="https://www.helloimg.com/images/2022/02/27/GVty2h.png" alt="20201205150401" /></li></ul><hr><h2 id="安装-Live2D">安装 Live2D</h2><ul><li>安装:(不能用 npm 这俩二选一)<ul><li><code>npm install --save hexo-helper-live2d</code></li></ul></li><li>导入模型:<ul><li>白猫:npm install live2d-widget-model-tororo</li><li>黑猫:npm install live2d-widget-model-hijiki</li></ul></li><li>启用模型:<br>在<code>/_config.yml</code> 里找到 model.use 改成想用的模型文件夹名</li></ul><hr><h2 id="comment-search-字数统计">comment &amp; search &amp; 字数统计</h2><ul><li>依次都装上:<ul><li><code>npm install hexo-generator-search --save</code></li><li><code>npm install hexo-wordcount --save</code></li></ul></li><li>然后把主题里的_config.yml 改改</li><li>需要注意 comment 插件有些主题自带,不需要安装(butterfly)</li><li>在 source/data/里新建 valine.json,里面可以添加表情包了,格式如下:</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;表情1&quot;</span><span class="punctuation">:</span> <span class="string">&quot;URL&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;表情2&quot;</span><span class="punctuation">:</span> <span class="string">&quot;URL&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr><h2 id="添加-bilibili-番剧">添加 bilibili 番剧</h2><ul><li><p>安装 <code>npm install hexo-bilibili-bangumi --save</code></p></li><li><p>配置: 写入<code>_config.yml</code> 里(root/里的)</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bangumi:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">path:</span> <span class="comment">#页面路径</span></span><br><span class="line">  <span class="attr">vmid:</span> <span class="comment">## 哔哩哔哩番剧页面的 vmid(uid)</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">&quot;追番列表&quot;</span> <span class="comment">## 页面的标题</span></span><br><span class="line">  <span class="attr">quote:</span> <span class="string">&quot;生命不息，追番不止！&quot;</span> <span class="comment">## 写在页面开头的一段话，支持 html 语法</span></span><br><span class="line">  <span class="attr">show:</span> <span class="number">1</span> <span class="comment">## 初始显示页面：0: 想看 , 1: 在看 , 2: 看过，默认为 1</span></span><br><span class="line">  <span class="attr">loading:</span> <span class="comment">## 图片加载完成前的 loading 图片</span></span><br><span class="line">  <span class="attr">metaColor:</span> <span class="comment">##  meta 部分(简介上方)字体颜色</span></span><br><span class="line">  <span class="attr">color:</span> <span class="comment">## 简介字体颜色</span></span><br><span class="line">  <span class="attr">webp:</span></span><br><span class="line">  <span class="attr">progress:</span> <span class="comment">## 获取番剧数据时是否显示进度条，默认true</span></span><br></pre></td></tr></table></figure></li><li><p>创建页面,进入 root/命令行,执行: <code>hexo new page bangumis</code> ;当然也可以直接在 source/直接新建一个 markdown,然后把文件头 type 写为这样:<code>type: &quot;bangumis&quot;</code> ,<a href="http://xn--ihq9o3el2reyle01bcxsnesz9h.md">亲自尝试过可以不用.md</a>,在_data 里只放上数据文件 bangumis.json 就可以在指定路径生成了</p></li><li><p>另外,Hexo g 之前最好更新下数据,防止请求过多: <code>hexo bangumi -u</code> 再者删除数据: <code>hexo bangumi -d</code></p></li></ul><hr><h2 id="添加站点地图-2">添加站点地图</h2><ul><li><p>百度专用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure></li><li><p>通用的</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure></li></ul><h3 id="配置文件-3">配置文件</h3><blockquote><p><code>root/_config.yml</code></p></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidusitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap/baidusitemap.xml</span></span><br><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap/sitemap.xml</span></span><br></pre></td></tr></table></figure><blockquote><p><a href="../Hexo-SEO">参考文章:👌Hexo-SEO 搜索引擎优化</a></p></blockquote><hr><h2 id="Steam-游戏页面">Steam 游戏页面</h2><h3 id="安装-4">安装</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-steam-games <span class="comment">--save</span></span><br></pre></td></tr></table></figure><h3 id="配置-6">配置</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steam:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">steamId:</span> <span class="string">&quot;xxx&quot;</span> <span class="comment"># steam64位Id(需要放在引号里),将steam库设置为公开</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">tags/games.html</span> <span class="comment"># 页面路径，默认steamgames/index.html</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">⭐️养鸡场⭐️</span></span><br><span class="line">  <span class="attr">quote:</span> <span class="string">&quot;Steam给爷爬!别让我家EPIC误会&quot;</span> <span class="comment"># 写在页面开头的一段话,支持html语法</span></span><br><span class="line">  <span class="attr">tab:</span> <span class="string">all</span> <span class="comment"># all或recent, all: 所有游戏, recent: 最近游玩的游戏</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">1000</span></span><br><span class="line">  <span class="attr">imgUrl:</span> <span class="string">&quot;https://fastly.jsdelivr.net/gh/Weidows/Images/img/Avatar/avatar.png&quot;</span> <span class="comment"># 图片链接，在quote下面放一张图片，图片链接到Steam个人资料，可留空</span></span><br><span class="line">  <span class="attr">proxy:</span> <span class="comment"># 如果无法访问steam社区的话请使用代理</span></span><br><span class="line">    <span class="attr">host:</span> <span class="comment"># 代理ip或域名</span></span><br><span class="line">    <span class="attr">port:</span> <span class="comment"># 代理端口</span></span><br></pre></td></tr></table></figure><h3 id="使用-3">使用</h3><ul><li><p><code>Hexo g</code> 之前 <code>hexo steam -u</code> (如果失败需要手动)</p></li><li><p>浏览器打开<code>https://steamcommunity.com/profiles/76561198321099712/games/?tab=all</code> {steamId}和{tab}分别替换为上面配置中提到的 steamId 和 tab</p></li><li><p>F12 控制台 console 输入下面内容执行:</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let script = jQuery(<span class="string">&#x27;script[language=&quot;javascript&quot;]&#x27;</span>);</span><br><span class="line">var games = [];</span><br><span class="line"><span class="keyword">for</span> (let i = <span class="number">0</span>; i &lt; script.length; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (script.e<span class="string">q(i)</span>.html().includes(<span class="string">&quot;rgGames&quot;</span>)) &#123;</span><br><span class="line">    let rgGames = script.e<span class="string">q(i)</span>.html().match(<span class="regexp">/var.*?rgGames.*?=.*?(\[[\w\W]*?\&#125;\&#125;\]);/</span>);</span><br><span class="line">    <span class="keyword">if</span> (rgGames) &#123;</span><br><span class="line">      games = JSON.parse(rgGames[<span class="number">1</span>]);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">document.write(JSON.stringify(games))</span><br></pre></td></tr></table></figure></li><li><p>生成的内容复制到<code>root/node_modules/hexo-steam-games/data/games.json</code></p></li><li><p>这个不用 new 页面(但是数据文件路径无法改)</p></li></ul><hr><h2 id="音乐-aplayer-已弃用">音乐 aplayer(已弃用)</h2><h3 id="安装-5">安装</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="comment">--save hexo-tag-aplayer</span></span><br></pre></td></tr></table></figure><h3 id="使用-4">使用</h3><ul><li>如果 per_page 关了的话在需要开启的页面 Front-matter 添加<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aplayer:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="Meting">Meting</h3><blockquote><p>吸底 mini 播放器</p></blockquote><ul><li><p>需要导入 js 并通过导入 css 修改 Aplayer 缩进样式</p></li><li><p>在_config.yml 里修改有一定限制,inject 只能搞腚 source 中文章的其中某一层目录,多层需要不同层级目录各引用一次,如下:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment">## - &lt;link rel=&quot;stylesheet&quot; href=&quot;./css/mine.css&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="comment">## - &lt;script src=&quot;./js/mine.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="comment">## - &lt;script src=&quot;../js/mine.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="comment">## - &lt;script src=&quot;../../js/mine.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="comment">## - &lt;script src=&quot;../../../js/mine_post.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>这里介绍另一种全局 inject 的方法:</p><ul><li>找到 theme/xxx/layout/includes/layout.pug</li><li>在最后添加如下字段:</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script(<span class="attribute">src</span>=<span class="string">&#x27;js/mine.js&#x27;</span>)</span><br><span class="line">link(<span class="attribute">rel</span>=<span class="string">&#x27;stylesheet&#x27;</span>, <span class="attribute">href</span>=<span class="string">&#x27;css/mine.css&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>按照上面可以自行修改 JS/CSS 的引入,全局生效(注意有可能 PJAX 会使这种引入的 Js 无效化)</li></ul></li></ul><hr><h2 id="安装豆瓣-已停用">安装豆瓣(已停用)</h2><h3 id="安装-6">安装</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-douban <span class="comment">--save</span></span><br></pre></td></tr></table></figure><h3 id="使用-5">使用</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">douban:</span></span><br><span class="line">  <span class="attr">user:</span> <span class="string">userID</span></span><br><span class="line">  <span class="attr">builtin:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">10000</span></span><br><span class="line">  <span class="attr">book:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&quot;My book title&quot;</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">&quot;My book quote&quot;</span></span><br><span class="line">  <span class="attr">movie:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&quot;My movie title&quot;</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">&quot;My movie quote&quot;</span></span><br><span class="line">  <span class="attr">game:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&quot;My game title&quot;</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">&quot;My game quote&quot;</span></span><br></pre></td></tr></table></figure><ul><li>user: 你的豆瓣 ID.打开豆瓣，登入账户，然后在右上角点击 “个人主页” ，这时候地址栏的 URL 大概是这样：“<a href="https://www.douban.com/people/xxxxxx/">https://www.douban.com/people/xxxxxx/</a>” ，其中的&quot;xxxxxx&quot;就是你的个人 ID 了。</li><li>builtin: 是否将生成页面的功能嵌入 hexo s 和 hexo g 中，默认是 false,另一可选项为 true(1.x.x 版本新增配置项)。</li><li>title: 该页面的标题.</li><li>quote: 写在页面开头的一段话,支持 html 语法.</li><li>timeout: 爬取数据的超时时间，默认是 10000ms ,如果在使用时发现报了超时的错(ETIMEOUT)可以把这个数据设置的大一点。</li><li>如果只想显示某一个页面(比如 movie)，那就把其他的配置项注释掉即可。</li></ul><hr><h2 id="Gulp">Gulp</h2><ul><li><p>Cli 和模块</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp -g</span><br><span class="line">npm install gulp-htmlclean gulp-htmlmin gulp-imagemin gulp-minify-css gulp-uglify --save</span><br></pre></td></tr></table></figure></li><li><p>在博客根目录新建<code>gulpfile.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&quot;gulp&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">&quot;gulp-minify-css&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">&quot;gulp-uglify&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">&quot;gulp-htmlmin&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">&quot;gulp-htmlclean&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> imagemin = <span class="built_in">require</span>(<span class="string">&quot;gulp-imagemin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩html</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;minify-html&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .<span class="title function_">src</span>(<span class="string">&quot;./public/**/*.html&quot;</span>)</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">htmlclean</span>())</span><br><span class="line">    .<span class="title function_">pipe</span>(</span><br><span class="line">      <span class="title function_">htmlmin</span>(&#123;</span><br><span class="line">        <span class="attr">removeComments</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">minifyJS</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">minifyCSS</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">minifyURLs</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;./public&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩css</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;minify-css&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .<span class="title function_">src</span>(<span class="string">&quot;./public/**/*.css&quot;</span>)</span><br><span class="line">    .<span class="title function_">pipe</span>(</span><br><span class="line">      <span class="title function_">minifycss</span>(&#123;</span><br><span class="line">        <span class="attr">compatibility</span>: <span class="string">&quot;ie8&quot;</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;./public&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩js</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;minify-js&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .<span class="title function_">src</span>(<span class="string">&quot;./public/js/**/*.js&quot;</span>)</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">uglify</span>())</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;./public&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩图片</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;minify-images&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .<span class="title function_">src</span>(<span class="string">&quot;./public/images/**/*.*&quot;</span>)</span><br><span class="line">    .<span class="title function_">pipe</span>(</span><br><span class="line">      <span class="title function_">imagemin</span>(</span><br><span class="line">        [</span><br><span class="line">          imagemin.<span class="title function_">gifsicle</span>(&#123; <span class="attr">optimizationLevel</span>: <span class="number">3</span> &#125;),</span><br><span class="line">          imagemin.<span class="title function_">jpegtran</span>(&#123; <span class="attr">progressive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line">          imagemin.<span class="title function_">optipng</span>(&#123; <span class="attr">optimizationLevel</span>: <span class="number">7</span> &#125;),</span><br><span class="line">          imagemin.<span class="title function_">svgo</span>(),</span><br><span class="line">        ],</span><br><span class="line">        &#123; <span class="attr">verbose</span>: <span class="literal">true</span> &#125;</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;./public/images&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认任务</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;default&quot;</span>, [</span><br><span class="line">  <span class="string">&quot;minify-html&quot;</span>,</span><br><span class="line">  <span class="string">&quot;minify-css&quot;</span>,</span><br><span class="line">  <span class="string">&quot;minify-js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;minify-images&quot;</span>,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure></li><li><p>然后<code>gulp</code>就可以压缩了.</p></li></ul><blockquote><p>参考文章 <a href="https://blog.csdn.net/fengdi_yuxi/article/details/94402350">Hexo 博客之速度优化</a></p></blockquote><hr><h2 id="Random-页面">Random 页面</h2><ul><li>安装依赖和插件<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="selector-tag">object</span>-assign <span class="attr">--save</span></span><br><span class="line">npm install hexo-generator-random <span class="attr">--save</span></span><br></pre></td></tr></table></figure></li><li>应用<br>插件会在根目录生成 <code>random.html</code>.</li></ul><hr><h2 id="hexo-neat-压缩">hexo-neat(压缩)</h2><h3 id="安装-7">安装</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-neat <span class="comment">--save</span></span><br></pre></td></tr></table></figure><h3 id="配置-7">配置</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 博文压缩</span></span><br><span class="line"><span class="attr">neat_enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line"><span class="attr">neat_css:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;**/*.min.css&quot;</span></span><br><span class="line"><span class="attr">neat_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">  <span class="attr">compress:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;**/*.min.js&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;**/jquery.fancybox.pack.js&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;**/index.js&quot;</span></span><br></pre></td></tr></table></figure><hr><h2 id="注意事项-常见问题">注意事项 &amp; 常见问题</h2><ul><li><p>注意如果 repo <a href="http://xn--yfrz6aujn01d4th.github.io">命名时没加.github.io</a> 的后缀,那么只能 deploy 到 gh-pages 分支(否则出错)</p></li><li><p>workflow 作用只是把 public/ deploy 到 gh-pages 分支上,generate 出 public/仍需要在本地进行</p></li><li><p>如果打开 Hexo Server 后报错(extends includes/layout.pug block content #recent-posts.recent-posts include includes/recent-posts.pug include includes/pagination.pug)是因为没有安装渲染插件</p></li><li><p>导航栏中的项目不能打 tag 和 categories(编译报错),也不能进行 cover 更改(无效)</p></li><li><p>注意修改 source 的 css 或者 js 后进行 generate 不会刷新状态,需要删掉重新 generate</p></li><li><p>theme/xxx/_config.yml 可以放在 source/_data/xxx.yml 来当主题配置文件,原先的可以删去</p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> Node </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> website </tag>
            
            <tag> npm </tag>
            
            <tag> hexo </tag>
            
            <tag> node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MOOC浙大翁凯教授Java第六章狐狸与兔子源代码</title>
      <link href="/post/Java/MOOC-java-FoxAndRabbit/"/>
      <url>/post/Java/MOOC-java-FoxAndRabbit/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-08-23 20:54:56 * @LastEditors: Weidows * @LastEditTime: 2022-06-09 21:19:15 * @FilePath: \Blog-private\source\_posts\Java\MOOC-java-FoxAndRabbit.md--><ul><li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li><li><a href="#%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5">代码片段</a><ul><li><a href="#animal">Animal</a></li><li><a href="#fox">Fox</a></li><li><a href="#rabbit">Rabbit</a></li><li><a href="#cell">Cell</a></li><li><a href="#field">Field</a></li><li><a href="#location">Location</a></li><li><a href="#view">View</a></li><li><a href="#foxandrabbit">FoxAndRabbit</a></li></ul></li></ul><h2 id="简介-2">简介</h2><p>由于老师在课程中没给出源代码,有些知识点没有涉及到,需要源码作为参考,但是个人百度谷歌了半天没找到真正所需要的(甚至有人卖…)</p><p>这篇给出的是 <em>6.3</em> 的源码,如果 <strong>寻找第七章的或者其他的</strong> 可以去我的 GitHub 仓库上找,已经给出介绍了<br><a href="https://github.com/Weidows/Java/tree/c737692bc2a65c351e1ac1408f0c706e011f1881/Java/src/main/java/twenty/july/my_interface">仓库地址</a></p><p>如果复制代码的话需要改一下 Package 和 import</p><h2 id="代码片段">代码片段</h2><p><img src="https://img-blog.csdnimg.cn/20200727081719904.jpg#pic_center" alt="目录结构"></p><h3 id="Animal">Animal</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: Weidows</span></span><br><span class="line"><span class="comment"> * @Date: 2020-07-20 14:25:10</span></span><br><span class="line"><span class="comment"> * @LastEditors: Weidows</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2020-07-25 17:40:28</span></span><br><span class="line"><span class="comment"> * @FilePath: \Weidows\Java\src\main\java\twenty\july\my_interface\animal\Animal.java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> twenty.july.my_interface.animal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> twenty.july.my_interface.field.Location;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> ageLimit;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> breedableAge;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">isAlive</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Animal</span><span class="params">(<span class="type">int</span> ageLimit, <span class="type">int</span> breedableAge)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.ageLimit = ageLimit;</span><br><span class="line">    <span class="built_in">this</span>.breedableAge = breedableAge;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="type">double</span> <span class="title function_">getAgePercent</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">double</span>) age / (<span class="type">double</span>) ageLimit;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">abstract</span> Animal <span class="title function_">breed</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">()</span> &#123;</span><br><span class="line">    age++;</span><br><span class="line">    <span class="keyword">if</span> (age &gt;= ageLimit)</span><br><span class="line">      die();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">die</span><span class="params">()</span> &#123;</span><br><span class="line">    isAlive = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAlive</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> isAlive;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isBreedable</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (age &gt;= breedableAge);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Location <span class="title function_">move</span><span class="params">(Location[] freeAdj)</span> &#123;</span><br><span class="line">    <span class="type">Location</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (freeAdj.length &gt; <span class="number">0</span> &amp;&amp; Math.random() &lt; <span class="number">0.02</span>) &#123;</span><br><span class="line">      ret = freeAdj[(<span class="type">int</span>) (Math.random() * freeAdj.length)];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span> + age + <span class="string">&quot;:&quot;</span> + (isAlive ? <span class="string">&quot;live&quot;</span> : <span class="string">&quot;dead&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Animal <span class="title function_">feed</span><span class="params">(ArrayList&lt;Animal&gt; neighbor)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">longerLife</span><span class="params">(<span class="type">int</span> inc)</span> &#123;</span><br><span class="line">    ageLimit += inc;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Fox">Fox</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: Weidows</span></span><br><span class="line"><span class="comment"> * @Date: 2020-07-20 14:31:09</span></span><br><span class="line"><span class="comment"> * @LastEditors: Weidows</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2020-07-25 17:40:18</span></span><br><span class="line"><span class="comment"> * @FilePath: \Weidows\Java\src\main\java\twenty\july\my_interface\animal\Fox.java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> twenty.july.my_interface.animal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> twenty.july.my_interface.cell.Cell;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * *Fox实现接口Cell,使Fox对象能间接传给Field</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Fox</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> <span class="keyword">implements</span> <span class="title class_">Cell</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Fox</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(<span class="number">20</span>, <span class="number">4</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span> <span class="comment">// 实现接口Cell中的draw()</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(Graphics g, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">alpha</span> <span class="operator">=</span> (<span class="type">int</span>) ((<span class="number">1</span> - getAgePercent()) * <span class="number">255</span>);</span><br><span class="line">    g.setColor(<span class="keyword">new</span> <span class="title class_">Color</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, alpha));</span><br><span class="line">    g.fillRect(x, y, size, size);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> Animal <span class="title function_">breed</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Animal</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (isBreedable() &amp;&amp; Math.random() &lt; <span class="number">0.05</span>) &#123;</span><br><span class="line">      ret = <span class="keyword">new</span> <span class="title class_">Fox</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="string">&quot;Fox:&quot;</span> + <span class="built_in">super</span>.toString());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> Animal <span class="title function_">feed</span><span class="params">(ArrayList&lt;Animal&gt; neighbor)</span> &#123;</span><br><span class="line">    <span class="type">Animal</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (Math.random() &lt; <span class="number">0.2</span>) &#123;</span><br><span class="line">      ret = neighbor.get((<span class="type">int</span>) (Math.random() * neighbor.size()));</span><br><span class="line">      longerLife(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Rabbit">Rabbit</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: Weidows</span></span><br><span class="line"><span class="comment"> * @Date: 2020-07-20 18:49:07</span></span><br><span class="line"><span class="comment"> * @LastEditors: Weidows</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2020-07-25 17:40:09</span></span><br><span class="line"><span class="comment"> * @FilePath: \Weidows\Java\src\main\java\twenty\july\my_interface\animal\Rabbit.java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> twenty.july.my_interface.animal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> twenty.july.my_interface.cell.Cell;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Rabbit</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> <span class="keyword">implements</span> <span class="title class_">Cell</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Rabbit</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(<span class="number">10</span>, <span class="number">2</span>); <span class="comment">// *寿命&amp;&amp;生育年龄</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(Graphics g, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">alpha</span> <span class="operator">=</span> (<span class="type">int</span>) ((<span class="number">1</span> - getAgePercent()) * <span class="number">255</span>);</span><br><span class="line">    g.setColor(<span class="keyword">new</span> <span class="title class_">Color</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, alpha));</span><br><span class="line">    g.fillRect(x, y, size, size);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> Animal <span class="title function_">breed</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Animal</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (isBreedable() &amp;&amp; Math.random() &lt; <span class="number">0.12</span>) &#123;</span><br><span class="line">      ret = <span class="keyword">new</span> <span class="title class_">Rabbit</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Rabbit&quot;</span> + <span class="built_in">super</span>.toString();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Cell">Cell</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: Weidows</span></span><br><span class="line"><span class="comment"> * @Date: 2020-07-12 15:17:05</span></span><br><span class="line"><span class="comment"> * @LastEditors: Weidows</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2020-07-25 17:39:41</span></span><br><span class="line"><span class="comment"> * @FilePath: \Weidows\Java\src\main\java\twenty\july\my_interface\cell\Cell.java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> twenty.july.my_interface.cell;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Cell</span> &#123;<span class="comment">//注意这里不能写成interface class</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * *Cell是一个接口而非类(接口是一种完全抽象的抽象类)</span></span><br><span class="line"><span class="comment">   * !这个接口就是为了实现Fox和Rabbit类new的对象能够传递给Field类</span></span><br><span class="line"><span class="comment">   * Field类中指明需要的对象的类是Cell而Cell是作为中间承接者</span></span><br><span class="line"><span class="comment">   * Fox和Rabbit类需要有implements Cell语句来实现接口</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * !注意这里函数可以不用写函数前缀,只需要写返回值类型</span></span><br><span class="line"><span class="comment">   * 抽象类无函数主体,只需声明函数原型,实现抽象类/接口的类都必须Override所有抽象方法,否则此子类仍为抽象类</span></span><br><span class="line"><span class="comment">   * abstract与final是冲突对立关系,抽象是用来被继承或重写的,final相反是不让继承/重写的</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(Graphics g, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> size)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Field">Field</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: Weidows</span></span><br><span class="line"><span class="comment"> * @Date: 2020-07-12 15:17:00</span></span><br><span class="line"><span class="comment"> * @LastEditors: Weidows</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2020-07-24 22:20:12</span></span><br><span class="line"><span class="comment"> * @FilePath: \Weidows\Java\src\main\java\twenty\july\my_interface\field\Field.java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> twenty.july.my_interface.field;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> twenty.july.my_interface.cell.Cell;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Field</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> width;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> height;</span><br><span class="line">  <span class="keyword">private</span> Cell[][] field;<span class="comment">// 声明有这么个数组变量,但未承接任何对象</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Location[] adjacent = &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Location</span>(-<span class="number">1</span>, -<span class="number">1</span>), <span class="keyword">new</span> <span class="title class_">Location</span>(-<span class="number">1</span>, <span class="number">0</span>), <span class="keyword">new</span> <span class="title class_">Location</span>(-<span class="number">1</span>, <span class="number">1</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Location</span>(<span class="number">0</span>, -<span class="number">1</span>), <span class="keyword">new</span> <span class="title class_">Location</span>(<span class="number">0</span>, <span class="number">0</span>), <span class="keyword">new</span> <span class="title class_">Location</span>(<span class="number">0</span>, <span class="number">1</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Location</span>(<span class="number">1</span>, -<span class="number">1</span>), <span class="keyword">new</span> <span class="title class_">Location</span>(<span class="number">1</span>, <span class="number">0</span>),<span class="keyword">new</span> <span class="title class_">Location</span>(<span class="number">1</span>, <span class="number">1</span>),</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Field</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.width = width;</span><br><span class="line">    <span class="built_in">this</span>.height = height;</span><br><span class="line">    field = <span class="keyword">new</span> <span class="title class_">Cell</span>[height][width];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getWidth</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> width;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getHeight</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> height;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Cell <span class="title function_">place</span><span class="params">(<span class="type">int</span> row, <span class="type">int</span> col, Cell cell)</span> &#123;</span><br><span class="line">    <span class="comment">// !这里的Cell o并非Cell类的对象,而是实现了Cell接口的对象</span></span><br><span class="line">    field[row][col] = cell;</span><br><span class="line">    <span class="type">Cell</span> <span class="variable">ret</span> <span class="operator">=</span> field[row][col];</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Cell <span class="title function_">get</span><span class="params">(<span class="type">int</span> row, <span class="type">int</span> col)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> field[row][col];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Cell[] getNeighbor(<span class="type">int</span> row, <span class="type">int</span> col) &#123;</span><br><span class="line">    ArrayList&lt;Cell&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Cell&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> -<span class="number">1</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> -<span class="number">1</span>; j &lt; <span class="number">2</span>; j++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> row + i;</span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> col + j;</span><br><span class="line">        <span class="keyword">if</span> (r &gt; -<span class="number">1</span> &amp;&amp; r &lt; height &amp;&amp; c &gt; -<span class="number">1</span> &amp;&amp; c &lt; width &amp;&amp; !(r == row &amp;&amp; c == col)) &#123;</span><br><span class="line">          list.add(field[r][c]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> list.toArray(<span class="keyword">new</span> <span class="title class_">Cell</span>[list.size()]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Location[] getFreeNeighbor(<span class="type">int</span> row, <span class="type">int</span> col) &#123;</span><br><span class="line">    ArrayList&lt;Location&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Location&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Location loc : adjacent) &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> row + loc.getRow();</span><br><span class="line">      <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> col + loc.getCol();</span><br><span class="line">      <span class="keyword">if</span> (r &gt; -<span class="number">1</span> &amp;&amp; r &lt; height &amp;&amp; c &gt; -<span class="number">1</span> &amp;&amp; c &lt; width &amp;&amp; field[r][c] == <span class="literal">null</span>) &#123;</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Location</span>(r, c));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// !学着点</span></span><br><span class="line">    <span class="keyword">return</span> list.toArray(<span class="keyword">new</span> <span class="title class_">Location</span>[list.size()]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">placeRandomAdj</span><span class="params">(<span class="type">int</span> row, <span class="type">int</span> col, Cell cell)</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    Location[] freeAdj = getFreeNeighbor(row, col);</span><br><span class="line">    <span class="keyword">if</span> (freeAdj.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> (<span class="type">int</span>) (Math.random() * freeAdj.length);</span><br><span class="line">      field[freeAdj[idx].getRow()][freeAdj[idx].getCol()] = cell;</span><br><span class="line">      ret = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; height; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; width; j++) &#123;</span><br><span class="line">        field[i][j] = <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(Cell fed)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> <span class="number">0</span>; row &lt; height; row++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">col</span> <span class="operator">=</span> <span class="number">0</span>; col &lt; width; col++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (field[row][col] == fed) &#123;</span><br><span class="line">          field[row][col] = <span class="literal">null</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Cell <span class="title function_">remove</span><span class="params">(<span class="type">int</span> row, <span class="type">int</span> col)</span> &#123; <span class="comment">// *函数重构</span></span><br><span class="line">    field[row][col] = <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Cell</span> <span class="variable">ret</span> <span class="operator">=</span> field[row][col];</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">(<span class="type">int</span> row, <span class="type">int</span> col, Location loc)</span> &#123;</span><br><span class="line">    field[loc.getRow()][loc.getCol()] = field[row][col];</span><br><span class="line">    remove(row, col);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Location">Location</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: Weidows</span></span><br><span class="line"><span class="comment"> * @Date: 2020-07-22 18:51:49</span></span><br><span class="line"><span class="comment"> * @LastEditors: Weidows</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2020-07-25 17:39:16</span></span><br><span class="line"><span class="comment"> * @FilePath: \Weidows\Java\src\main\java\twenty\july\my_interface\field\Location.java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> twenty.july.my_interface.field;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Location</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> row;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> col;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Location</span><span class="params">(<span class="type">int</span> row, <span class="type">int</span> col)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.row = row;</span><br><span class="line">    <span class="built_in">this</span>.col = col;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getRow</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> row;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCol</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> col;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="View">View</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: Weidows</span></span><br><span class="line"><span class="comment"> * @Date: 2020-07-12 15:17:00</span></span><br><span class="line"><span class="comment"> * @LastEditors: Weidows</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2020-07-24 11:06:21</span></span><br><span class="line"><span class="comment"> * @FilePath: \Weidows\Java\src\main\java\twenty\july\my_interface\field\View.java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> twenty.july.my_interface.field;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Dimension;</span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> twenty.july.my_interface.cell.Cell;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">View</span> <span class="keyword">extends</span> <span class="title class_">JPanel</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">2417015700213488315L</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">GRID_SIZE</span> <span class="operator">=</span> <span class="number">16</span>;</span><br><span class="line">  <span class="keyword">private</span> Field theField;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// *构造函数</span></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">View</span><span class="params">(Field field)</span> &#123;</span><br><span class="line">    theField = field;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paint</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.paint(g);</span><br><span class="line">    g.setColor(Color.GRAY);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> <span class="number">0</span>; row &lt; theField.getHeight(); row++)</span><br><span class="line">      g.drawLine(<span class="number">0</span>, row * GRID_SIZE, theField.getWidth() * GRID_SIZE, row * GRID_SIZE);</span><br><span class="line">    <span class="keyword">for</span> ( <span class="type">int</span> <span class="variable">col</span> <span class="operator">=</span> <span class="number">0</span>; col&lt;theField.getWidth(); col++ )</span><br><span class="line">      g.drawLine(col * GRID_SIZE, <span class="number">0</span>, col * GRID_SIZE, theField.getHeight() * GRID_SIZE);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> <span class="number">0</span>; row &lt; theField.getHeight(); row++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">col</span> <span class="operator">=</span> <span class="number">0</span>; col &lt; theField.getWidth(); col++) &#123;</span><br><span class="line">        <span class="type">Cell</span> <span class="variable">cell</span> <span class="operator">=</span> theField.get(row, col);</span><br><span class="line">        <span class="keyword">if</span> (cell != <span class="literal">null</span>)</span><br><span class="line">          cell.draw(g, col * GRID_SIZE, row * GRID_SIZE, GRID_SIZE);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> Dimension <span class="title function_">getPreferredSize</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Dimension</span>(theField.getWidth() * GRID_SIZE + <span class="number">1</span>, theField.getHeight() * GRID_SIZE + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="FoxAndRabbit">FoxAndRabbit</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: Weidows</span></span><br><span class="line"><span class="comment"> * @Date: 2020-07-20 18:40:10</span></span><br><span class="line"><span class="comment"> * @LastEditors: Weidows</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2020-07-24 13:23:07</span></span><br><span class="line"><span class="comment"> * @FilePath: \Weidows\Java\src\main\java\twenty\july\my_interface\fox_and_rabbit\FoxAndRabbit.java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> twenty.july.my_interface.fox_and_rabbit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> twenty.july.my_interface.animal.*;</span><br><span class="line"><span class="keyword">import</span> twenty.july.my_interface.cell.Cell;</span><br><span class="line"><span class="keyword">import</span> twenty.july.my_interface.field.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FoxAndRabbit</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> Field theField;</span><br><span class="line">  <span class="keyword">private</span> View theView;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">FoxAndRabbit</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">    theField = <span class="keyword">new</span> <span class="title class_">Field</span>(size, size);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> <span class="number">0</span>; row &lt; theField.getHeight(); row++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">col</span> <span class="operator">=</span> <span class="number">0</span>; col &lt; theField.getWidth(); col++) &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">probability</span> <span class="operator">=</span> Math.random();</span><br><span class="line">        <span class="keyword">if</span> (probability &lt; <span class="number">0.05</span>) &#123;</span><br><span class="line">          theField.place(row, col, <span class="keyword">new</span> <span class="title class_">Fox</span>());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (probability &lt; <span class="number">0.15</span>) &#123;</span><br><span class="line">          theField.place(row, col, <span class="keyword">new</span> <span class="title class_">Rabbit</span>());</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    theView = <span class="keyword">new</span> <span class="title class_">View</span>(theField);</span><br><span class="line">    <span class="type">JFrame</span> <span class="variable">frame</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JFrame</span>();</span><br><span class="line">    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    frame.setResizable(<span class="literal">false</span>);</span><br><span class="line">    frame.setTitle(<span class="string">&quot;Cells&quot;</span>);</span><br><span class="line">    frame.add(theView);</span><br><span class="line">    frame.pack();</span><br><span class="line">    frame.setVisible(<span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">(<span class="type">int</span> steps)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; steps; i++) &#123;</span><br><span class="line">      step();</span><br><span class="line">      theView.repaint();</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">200</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">step</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> <span class="number">0</span>; row &lt; theField.getHeight(); row++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">col</span> <span class="operator">=</span> <span class="number">0</span>; col &lt; theField.getWidth(); col++) &#123;</span><br><span class="line">        <span class="type">Cell</span> <span class="variable">cell</span> <span class="operator">=</span> (Cell) theField.get(row, col);</span><br><span class="line">        <span class="keyword">if</span> (cell != <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="type">Animal</span> <span class="variable">animal</span> <span class="operator">=</span> (Animal) cell;</span><br><span class="line">          animal.grow();</span><br><span class="line">          <span class="keyword">if</span> (animal.isAlive()) &#123;</span><br><span class="line">            <span class="comment">// *move</span></span><br><span class="line">            <span class="type">Location</span> <span class="variable">loc</span> <span class="operator">=</span> animal.move(theField.getFreeNeighbor(row, col));</span><br><span class="line">            <span class="keyword">if</span> (loc != <span class="literal">null</span>)</span><br><span class="line">              theField.move(row, col, loc);</span><br><span class="line">            <span class="comment">// *eat</span></span><br><span class="line">            Cell[] neighbor = (Cell[]) theField.getNeighbor(row, col);</span><br><span class="line">            ArrayList&lt;Animal&gt; listRabbit = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Animal&gt;();</span><br><span class="line">            <span class="keyword">for</span> (Cell an : neighbor) &#123;</span><br><span class="line">              <span class="keyword">if</span> (an <span class="keyword">instanceof</span> Rabbit) &#123;</span><br><span class="line">                listRabbit.add((Rabbit) an);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!listRabbit.isEmpty()) &#123;</span><br><span class="line">              <span class="type">Animal</span> <span class="variable">fed</span> <span class="operator">=</span> animal.feed(listRabbit);</span><br><span class="line">              <span class="keyword">if</span> (fed != <span class="literal">null</span>)</span><br><span class="line">                theField.remove((Cell) fed);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// *breed</span></span><br><span class="line">            <span class="type">Animal</span> <span class="variable">baby</span> <span class="operator">=</span> animal.breed();</span><br><span class="line">            <span class="keyword">if</span> (baby != <span class="literal">null</span>) &#123;</span><br><span class="line">              theField.placeRandomAdj(row, col, (Cell) baby);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            theField.remove(row, col);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">FoxAndRabbit</span> <span class="variable">fnr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FoxAndRabbit</span>(<span class="number">50</span>);</span><br><span class="line">    fnr.start(<span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于安装系统硬盘&amp;引导那些事</title>
      <link href="/post/system/about_system/"/>
      <url>/post/system/about_system/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-08-23 20:49:52 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:18:53 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\system\about_system.md--><ul><li><a href="#%E5%89%8D%E8%A8%80">前言</a></li><li><a href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">准备工作</a></li><li><a href="#%E5%A4%87%E4%BB%BD%E5%B7%A5%E4%BD%9C">备份工作</a></li><li><a href="#%E4%B8%A4%E7%A7%8D%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F">两种启动方式</a><ul><li><a href="#%E4%BC%A0%E7%BB%9F-bios-%E5%90%AF%E5%8A%A8legacy-%E5%90%AF%E5%8A%A8">传统 Bios 启动(legacy 启动)</a></li><li><a href="#uefi-%E6%A8%A1%E5%BC%8F%E5%90%AF%E5%8A%A8efi-%E5%90%AF%E5%8A%A8">UEFI 模式启动(EFI 启动)</a></li></ul></li><li><a href="#%E7%A1%AC%E7%9B%98%E6%A0%BC%E5%BC%8F%E7%AE%80%E4%BB%8B">硬盘格式简介</a></li><li><a href="#%E4%B8%A4%E7%A7%8D%E7%A1%AC%E7%9B%98%E6%A0%BC%E5%BC%8F">两种硬盘格式</a><ul><li><a href="#gpt-%E6%A0%BC%E5%BC%8F">GPT 格式</a></li><li><a href="#mbr-%E6%A0%BC%E5%BC%8F">MBR 格式</a></li></ul></li><li><a href="#%E4%B8%8A%E6%9C%BA%E6%93%8D%E4%BD%9C">上机操作</a></li><li><a href="#%E9%97%B2%E6%9D%82%E9%97%AE%E9%A2%98">闲杂问题</a></li></ul><h2 id="前言-4">前言</h2><ul><li>此文不太适合纯小白,对电脑系统方面一无所知的请及时退出</li><li>最好准备好充足时间来看这篇文章,此篇文章会给你带来重启电脑至少 100 次的经验;</li></ul><hr><h2 id="准备工作">准备工作</h2><ul><li>硬件设备:<ul><li>电脑,一个 U 盘(8G 完全够用,也可以用读卡器+SD 卡替代)</li></ul></li><li>软件:<ol><li>rufus(制作启动盘用,这个 win 和 linux 都支持)</li><li>分区助手或 diskgenius(分盘符用)</li><li>自己准备安装的系统的镜像文件(ISO 格式,其他格式的需要特定的安装器安装,自行百度,在此不一一赘述)</li></ol></li></ul><hr><h2 id="备份工作">备份工作</h2><p><strong>把自己所有盘里的重要资料尽量备份,一定要做好背水一战的觉悟</strong></p><hr><h2 id="两种启动方式">两种启动方式</h2><h3 id="传统-Bios-启动-legacy-启动">传统 Bios 启动(legacy 启动)</h3><ul><li><p>硬盘分区简单明确,只要分出来足够大的分区(如 C 盘,D 盘…),用安装器把系统安装进去,基本就完成安装了,安装时会自动在这个硬盘的某个[神秘]的地方添加一条引导记录(如果记录被改或删的话,就算系统完好也不会启动)</p></li><li><p>如果 MBR 硬盘下的 Windows 系统无法启动,且不想重装系统,用 NTBOOTautofix</p></li><li><p>另外,对于 Windows,网上有 UEFI+Bios 引导修复工具,可以通用</p></li></ul><h3 id="UEFI-模式启动-EFI-启动">UEFI 模式启动(EFI 启动)</h3><ul><li><p>当前&quot;高新&quot;电脑普遍使用的模式,特点是开机时按某个键(不同电脑不一样)进入 bios 界面很好看(从 2012 年以后的主板都支持 UEFI 了,只不过这种&quot;高新&quot;的默认就是 UEFI);</p></li><li><p>当前来说主板都支持 UEFI,可以通过 Bios 界面 Boot&gt;&gt;Launch CSM 的开关来改变启动方式</p><ul><li>这里不懂的可以百度关键词&quot;Bios 修改启动模式&quot;</li></ul></li><li><p>这里 CSM 设置为 enable 就是开启的意思,兼容传统 Bios 启动和 UEFI 启动(你硬盘里是什么方式的他就用什么);设为 disable 就是关闭,只用 UEFI 模式启动(此模式下硬盘必须是 GPT,系统的启动模式必须是 UEFI,否则无法启动)</p></li><li><p>在此附上开机时进入 bios 的按键</p><p><img src="https://img-blog.csdnimg.cn/20200307195931138.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5ODIzMjk1,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p></li></ul><h2 id="硬盘格式简介">硬盘格式简介</h2><ul><li><strong>1.硬盘格式与分区格式(NTFS,FAT32…)是两回事</strong><ul><li>硬盘格式主流就两种,<code>GPT</code> 和 <code>MBR</code>.</li><li>硬盘格式主要影响引导方式,其查看和更改可以借助两个常用的硬盘工具&quot;分区助手&quot;和&quot;DiskGenius&quot;来查看和更改,更改格式(不出意外的话)不会格式化,但从 MBR 格式变为 GPT 格式会从硬盘的某个分区中抽出一小部分(300MB 左右,可自定义)作为 EFI(ESP)引导分区</li></ul><hr><ul><li><code>此段选择性观看</code>:值得一说的是如果在 Windows 已经安装的情况下安装 linux(Boot/efi 挂载点是那个小的 ESP 分区),那么进入 Windows 系统时无论 ESP 分区还是 linux 系统分区都无法检测出来(分区助手显示他俩是未分配空间),虽然不影响使用,但是如果你想让它出来可以使用&quot;恢复分区&quot;命令,让 ESP 分区可以查看和修改(但会破坏 ESP 分区的挂载状态,使用 UEfix 挂载那个 ESP 分区,一定要!!!,不然全部空大,凉凉…)</li></ul></li></ul><hr><h2 id="两种硬盘格式">两种硬盘格式</h2><h3 id="GPT-格式">GPT 格式</h3><ul><li>以后的主流格式,目前 2020 年还在两种格式的过渡期,此格式硬盘特点是有一块小分区(ESP 引导区)用来存放系统启动的文件,此分区绝对不要动(除非有自信弄懂了,不然有可能所有系统都无法启动);</li><li>此格式硬盘只能用来引导 UEFI 模式启动的系统(不要担心,如果原来是 MBR+传统 BIOS 启动,在硬盘格式从 MBR 到 GPT 转换时 Windows 的启动模式也会自动从 bios 变为 UEFI;但对于 linux 系统,其复杂涉及挂载点和 GRUB2 代码更改,难以操作,最简便的方法是重装系统)</li></ul><h3 id="MBR-格式">MBR 格式</h3><ul><li><p>只能用来引导传统 bios(legacy 启动),目前还常见的格式,特点是在系统分区根目录里会有一个 Boot 文件夹(如 C:\Boot 但有可能是隐藏的,看不到);</p></li><li><p>电脑商的最爱,对于 Windows 适配好,但是最大的问题是对于 linux 和黑苹果的兼容问题(某些无法安装);</p></li><li><p>虽然 GPT 是最新的格式,但是 MBR 不会差太多(只有开机时速度有丝毫差别)</p></li><li><p>上一张无关紧要的图来点层次感,GPT 和 MBR 同级,我懂你懂你懂我 233<br><img src="https://img-blog.csdnimg.cn/2020030719535046.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5ODIzMjk1,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p></li></ul><hr><h2 id="上机操作">上机操作</h2><p><img src="https://img-blog.csdnimg.cn/20200307201943243.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5ODIzMjk1,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><hr><h2 id="闲杂问题">闲杂问题</h2><ul><li><p>装好系统后系统的睡眠模式无法使用(装睡问题)</p><ul><li>有可能是 bios 里的启动方式不兼容问题,如果是 EFI 启动可以尝试打开 CSM</li><li>另一种可能是引导出问题了(仅限 EFI 模式),去 EFI 引导盘查看并尝试修复</li></ul></li><li><p>manjaro 安装完成后如果只能进入一次系统,再次进黑屏无响应问题</p><ul><li><p>尝试更换下启动模式,从 UEFI 换为传统 bios 启动,就是把 Launch CSM 开启</p></li><li><p>显卡 BIOS 兼容性问题.</p><p><img src="https://img-blog.csdnimg.cn/20200307200147476.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5ODIzMjk1,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p></li></ul></li></ul><blockquote><p>在此感谢我看过的文章的写者,帮了我很多,谢谢!</p></blockquote><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一篇扫清:GitHub-Pages自动化部署 + github/gitee选择</title>
      <link href="/post/tools/Git/GitHub-Pages-deploy/"/>
      <url>/post/tools/Git/GitHub-Pages-deploy/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-08-23 10:54:41 * @LastEditors: Weidows * @LastEditTime: 2021-12-15 19:49:54 * @FilePath: \Blog-private\source\_posts\tools\Git\GitHub-Pages-deploy.md--><ul><li><a href="#githubgitee-%E9%80%89%E6%8B%A9">GitHub/Gitee 选择</a></li><li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">解决方案</a></li><li><a href="#%E5%BC%80%E5%90%AF">开启</a></li><li><a href="#github-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2">GitHub 自动化部署</a><ul><li><a href="#%E5%AE%89%E8%A3%85-hexo-deployer">安装 Hexo-deployer</a></li></ul></li><li><a href="#%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%9B%B4%E5%8A%A0%E6%96%B9%E4%BE%BF%E5%AE%8C%E7%BE%8E%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">另一种更加方便完美的解决方案</a></li><li><a href="#github-action-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2">github-action 自动化部署</a><ul><li><a href="#%E8%A7%A3%E9%87%8A">解释:</a></li></ul></li></ul><h2 id="GitHub-Gitee-选择">GitHub/Gitee 选择</h2><ul><li>速度来看,GitHub 在加载速度上略超 Gitee,部署速度 Gitee 略快(但是这项几乎不影响体验)</li><li>但是就图片加载来看,GitHub 还是远不如 Gitee,可以考虑图床或者 JsDelivr 做 CDN 来解决</li><li>功能上,都支持 Hexo 部署和选择分支部署<ul><li>GitHub 只能识别并部署根目录<code>/</code>或者<code>/docs/</code>,而 Gitee 支持<code>自定义要部署的路径</code></li></ul></li></ul><hr><h2 id="解决方案-4">解决方案</h2><ul><li>如果你想部署在 GitHub 上但是却因为它不识别那个路径<ul><li>尝试修改博客根目录下的<code>_config.yml</code>,把<code>public_dir: public</code>改为<code>public_dir: docs</code></li><li>这样在博客 generate 时会把需要部署的文件生成到 docs/里,可供 GitHub 识别</li><li>注意在 GitHub 的这个仓库的 Settings 里要把 source 的分支,目录对应修改好</li></ul></li></ul><hr><h2 id="开启">开启</h2><ul><li><code>Gitee</code><br><img src="https://www.helloimg.com/images/2022/02/27/GVaAYT.png" alt="20201122112033"></li><li><code>Github</code><br><img src="https://www.helloimg.com/images/2022/02/27/GValiD.png" alt="20201122112109"></li></ul><hr><h2 id="GitHub-自动化部署">GitHub 自动化部署</h2><h3 id="安装-Hexo-deployer">安装 Hexo-deployer</h3><ul><li><p>(注意 cnpm 好像不行)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`npm install hexo-deployer-git --save`</span><br></pre></td></tr></table></figure></li><li><p>在<code>_config.yml</code> 里添加以下内容(注意缩进不要错)</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">deploy:</span></span><br><span class="line"><span class="symbol">type:</span> git <span class="meta"># 用本项目的 git 进行提交 &amp; 推送</span></span><br><span class="line"><span class="symbol">repo:</span> 这里填入 GitHub 仓库 URL</span><br><span class="line"><span class="symbol">branch:</span> master <span class="meta"># 这里写想要部署到的分支名(没有对应分支的话会自动新建)</span></span><br></pre></td></tr></table></figure></li><li><p>在对应仓库的设置里找到 github-pages 然后选择对应分支,系统就会自动部署并发出你的博客链接了</p></li></ul><hr><h2 id="另一种更加方便完美的解决方案">另一种更加方便完美的解决方案</h2><ul><li>因为搭建这个博客的工作目录可能并不是一个独立的 git 仓库</li><li>(就是它被包含在其他仓库里,而非自己是一个独立仓库)</li><li>这种情况下上面的 deployer 就鸡鸡了(没法用了,除非自己改),有没有解决方案呢?</li><li>有,使用 github-action 自动化部署!</li></ul><h2 id="github-action-自动化部署">github-action 自动化部署</h2><p>文件目录: <code>Blogroot/.github/workflows/deploy.yml</code><br>(简单点就是.github 跟 public,source 等等同级目录),写入下面内容:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span> [<span class="string">push</span>] <span class="comment"># 触发条件(git 推送时)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-and-deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">🛎️</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span> <span class="comment"># 下面这个最好设成 false</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">persist-credentials:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">and</span> <span class="string">Build</span> <span class="string">🔧</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          cd Website</span></span><br><span class="line"><span class="string">          npm install</span></span><br><span class="line"><span class="string">          npm run build</span></span><br><span class="line"><span class="string"></span>        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">CI:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">🚀</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">JamesIves/github-pages-deploy-action@releases/v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">GITHUB_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">BRANCH:</span> <span class="string">gh-pages</span> <span class="comment"># 把下面这个文件夹部署到哪个分支(不能是本分支,会覆盖掉)</span></span><br><span class="line">          <span class="attr">FOLDER:</span> <span class="string">Website/public</span> <span class="comment"># 想部署的文件夹</span></span><br></pre></td></tr></table></figure><h3 id="解释">解释:</h3><ul><li>name 随意起</li><li>on:[push]意思是在推送时触发 action</li><li>Build and Deploy 就是触发的 job 名称</li><li>run-on 是运行环境(其自带一些基础的环境,Exp:Node.JS,但是更具体的比如 Hexo 就不会自带了)</li><li>steps 就是步骤了,可以看出下面有三个步骤(步骤内的操作就不细讲了…)</li><li>这样我们写完博客 generate 之后 push 这个仓库,github-action 会自动执行找到你指定的文件夹把它部署到你指定的分支上,然后设置下让 github-pages 部署这个分支,博客就出来了!</li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> website </tag>
            
            <tag> hexo </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Data-技术缓冲区.</title>
      <link href="/post/others/backup/Data/"/>
      <url>/post/others/backup/Data/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-08-19 00:38:26 * @LastEditors: Weidows * @LastEditTime: 2021-11-14 19:00:17 * @FilePath: \Blog-private\source\_posts\others\backup\Data.md * @Description:--><ul><li><a href="#%E5%A4%A7%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7">大前端工具</a><ul><li><a href="#uglifyjs">uglifyjs</a></li></ul></li><li><a href="#%E6%9F%94%E6%B4%BE%E4%BD%BF%E7%94%A8%E7%9B%B2%E5%8C%BA">柔派使用盲区</a></li></ul><h2 id="大前端工具">大前端工具</h2><h3 id="uglifyjs">uglifyjs</h3><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn <span class="meta">global</span> <span class="keyword">add</span> uglify-<span class="keyword">js</span></span><br><span class="line">yarn <span class="meta">global</span> <span class="keyword">add</span> uglify-<span class="built_in">es</span></span><br><span class="line"></span><br><span class="line">uglifyjs xxx<span class="number">.</span><span class="keyword">js</span> -o xxx<span class="number">.</span>min<span class="number">.</span><span class="keyword">js</span></span><br><span class="line">uglifyjs xxx<span class="number">.</span><span class="keyword">js</span> -m -o xxx<span class="number">.</span>min<span class="number">.</span><span class="keyword">js</span> // 更小</span><br></pre></td></tr></table></figure><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="柔派使用盲区">柔派使用盲区</h2><ul><li><p>截屏,网上愣是找不到…偶然间发现的</p><p><code>双击锁屏键</code></p></li><li><p>开发者模式</p><p><code>关于手机 -&gt; waterOS 版本 -&gt; 连点 n 次</code></p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> others </category>
          
          <category> backup </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 备忘录 </tag>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS命名规范</title>
      <link href="/post/Web/css/ClassKeyWords/"/>
      <url>/post/Web/css/ClassKeyWords/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-08-11 09:45:50 * @LastEditors: Weidows * @LastEditTime: 2021-02-13 17:22:01 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\Web\css\ClassKeyWords.md--><ul><li><a href="#%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99">命名规则</a></li><li><a href="#%E5%B8%B8%E8%A7%81-class-%E5%85%B3%E9%94%AE%E8%AF%8D">常见 class 关键词</a></li><li><a href="#%E9%A1%B5%E9%9D%A2%E7%BB%93%E6%9E%84">页面结构</a></li><li><a href="#%E5%AF%BC%E8%88%AA">导航</a></li><li><a href="#%E5%8A%9F%E8%83%BD">功能</a></li></ul><h2 id="命名规则">命名规则</h2><ul><li>简单来说完全可以使用 Java 或 C 语言的规范,可以使用连字符&quot;-&quot;链接单词增强辨识度,不要用汉字</li></ul><hr><h2 id="常见-class-关键词">常见 class 关键词</h2><ul><li><code>布局类：</code>header, footer, container, main, content, aside, page, section</li><li><code>包裹类：</code>wrap, inner</li><li><code>区块类：</code>region, block, box</li><li><code>结构类：</code>hd, bd, ft, top, bottom, left, right, middle, col, row, grid, span</li><li><code>列表类：</code>list, item, field</li><li><code>主次类：</code>primary, secondary, sub, minor</li><li><code>大小类：</code>s, m, l, xl, large, small</li><li><code>状态类：</code>active, current, checked, hover, fail, success, warn, error, on, off</li><li><code>导航类：</code>nav, prev, next, breadcrumb, forward, back, indicator, paging, first, last</li><li><code>交互类：</code>tips, alert, modal, pop, panel, tabs, accordion, slide, scroll, overlay</li><li><code>星级类：</code>rate, star</li><li><code>分割类：</code>group, seperate, divider</li><li><code>等分类：</code>full, half, third, quarter</li><li><code>表格类：</code>table, tr, td, cell, row</li><li><code>图片类：</code>img, thumbnail, original, album, gallery</li><li><code>语言类：</code>cn, en</li><li><code>论坛类：</code>forum, bbs, topic, post</li><li><code>方向类：</code>up, down, left, right</li><li><code>其他语义</code>类：btn, close, ok, cancel, switch; link, title, info, intro, more, icon; form, label, search, contact, phone, date, email, user; view, loading…</li></ul><hr><h2 id="页面结构">页面结构</h2><ul><li><code>容器</code>: container/wrap</li><li><code>整体宽度：</code>wrapper</li><li><code>页头</code>：header</li><li><code>内容</code>：content</li><li><code>页面主体：</code>main</li><li><code>页尾</code>：footer</li><li><code>导航</code>：nav</li><li><code>侧栏</code>：sidebar</li><li><code>栏目</code>：column</li><li><code>中间内容：</code>center</li></ul><hr><h2 id="导航">导航</h2><ul><li><code>导航：</code>nav</li><li><code>导航：</code>mainnav/globalnav</li><li><code>子导航：</code>subnav</li><li><code>顶导航：</code>topnav</li><li><code>边导航：</code>sidebar</li><li><code>左导航：</code>leftsidebar</li><li><code>右导航：</code>rightsidebar</li><li><code>边导航图标：</code>sidebarIcon</li><li><code>菜单：</code>menu</li><li><code>子菜单：</code>submenu</li><li><code>标题：</code>title</li></ul><hr><h2 id="功能-2">功能</h2><ul><li><code>标志：</code>logo</li><li><code>登录：</code>login</li><li><code>登录条：</code>loginbar</li><li><code>注册：</code>register</li><li><code>产品：</code>products</li><li><code>产品价格：</code>productsPrices</li><li><code>产品评论：</code>productsReview</li><li><code>编辑评论：</code>editor-review</li><li><code>最新产品：</code>news-release</li><li><code>广告/标语：</code>banner</li><li><code>摘要：</code>summary</li><li><code>生产商：</code>publisher</li><li><code>缩略图：</code>screenshot</li><li><code>常见问题：</code>faqs</li><li><code>关键词：</code>keyword</li><li><code>博客：</code>blog</li><li><code>论坛：</code>forum</li><li><code>搜索：</code>search</li><li><code>搜索输入框：</code>search-input</li><li><code>搜索输出：</code>search-output</li><li><code>搜索结果：</code>search-results</li><li><code>加入我们：</code>joinus</li><li><code>状态：</code>status</li><li><code>按钮：</code>btn</li><li><code>滚动：</code>scroll</li><li><code>标签页：</code>tab</li><li><code>文章列表：</code>list</li><li><code>提示信息：</code>msg/message</li><li><code>当前的：</code>current</li><li><code>小技巧：</code>tips</li><li><code>皮肤：</code>skin</li><li><code>充值：</code>pay</li><li><code>活动：</code>activities</li><li><code>推广：</code>promotion</li><li><code>公告：</code>announcement</li><li><code>排行：</code>ranking</li><li><code>公司简介：</code>companyProfile</li><li><code>公司设备：</code>equipment</li><li><code>公司荣誉：</code>glories</li><li><code>企业文化：</code>culture</li><li><code>企业规模：</code>scaleScale</li><li><code>营销网络：</code>salesNetwork</li><li><code>组织机构：</code>organization</li><li><code>技术力量：</code>technology</li><li><code>分支机构：</code>branches</li><li><code>企业资质：</code>EnterpriseQualification</li><li><code>公司实力：</code>strengthStrength</li><li><code>经营理念：</code>operationPrinciple</li><li><code>经理致辞：</code>manager_oration</li><li><code>发展历程：</code>developmentHistory</li><li><code>工程案例：</code>EngineeringProjects</li><li><code>分类浏览：</code>browseByCategory</li><li><code>应用领域：</code>applicationFields</li><li><code>人力资源：</code>humanResourceHr</li><li><code>领导致辞：</code> leader_oration</li><li><code>客户留言：</code>customerMessage</li><li><code>客户服务：</code>customerService</li><li><code>您的要求：</code>yourRequirements</li><li><code>销售信息：</code>salesInformation</li><li><code>招商：</code>EnterpriseEstablishing</li><li><code>教育培训：</code>EducationTraining</li><li><code>在线交流：</code>onlineCommunication</li><li><code>质量认证：</code>qualityCertification</li><li><code>合作加盟：</code>joinInCooperation</li><li><code>产品描述：</code>productsDescription</li><li><code>业务范围：</code>businessScope</li><li><code>产品销售：</code>salesSales</li><li><code>联系我们：</code>contactUs</li><li><code>信息发布：</code>Information</li><li><code>返回首页：</code>homepage</li><li><code>产品定购：</code>order</li><li><code>电子商务：</code>E-business</li><li><code>版权所有：</code>copy Right</li><li><code>友情连结：</code>hot Link</li><li><code>行业新闻：</code>tradeNews</li><li><code>行业动态：</code>trends</li><li><code>邮编：</code>postalCodeZipcode</li><li><code>新闻动态：</code>newsTrends</li><li><code>公司名称：</code>companyName</li><li><code>销售热线：</code>salesHot_Line</li><li><code>联系人：</code>contactPerson</li><li><code>建设中：</code>InConstruction</li><li><code>证书：</code>certificate</li><li><code>地址：</code>ADD/Add</li><li><code>电话：</code>TEL/Tel</li><li><code>传真：</code>FAX/Fax</li><li><code>产品名称：</code>productName</li><li><code>产品说明：</code>description</li><li><code>价格：</code>price</li><li><code>品牌：</code>brand</li><li><code>规格：</code>specification</li><li><code>尺寸：</code>size</li><li><code>生产厂家：</code>manufacturer</li><li><code>型号：</code>model</li><li><code>产品标号：</code>Item No</li><li><code>技术指标：</code>techniqueData</li><li><code>产品描述：</code>description</li><li><code>产地：</code>productionPlace</li><li><code>用途：</code>application</li><li><code>论坛：</code>Forum</li><li><code>在线订购：</code>on_lineOrder</li><li><code>招标：</code>bidInviting</li><li><code>综述：</code>general</li><li><code>业绩：</code>achievements</li><li><code>大事：</code>greatEvent</li><li><code>动态：</code>trends</li><li><code>服务：</code>service</li><li><code>投资：</code>Investment</li><li><code>行业：</code>Industry</li><li><code>规划：</code>programming</li><li><code>环境：</code>environment</li><li><code>发送：</code>delivery</li><li><code>提交：</code>submit</li><li><code>重写：</code>reset</li><li><code>社区：</code>community</li><li><code>业务：</code>business</li><li><code>在线调查：</code>onlineInquiry</li><li><code>下载中心：</code>download</li><li><code>意见反馈：</code>feedback</li><li><code>常见问题：</code>FAQ</li><li><code>中心概况：</code>generalProfile</li><li><code>游乐园：</code>amusementPark</li><li><code>专题报道：</code>specialReport</li><li><code>图标：</code>icon</li><li><code>注释：</code>note</li><li><code>指南：</code>guild</li><li><code>服务：</code>service</li><li><code>热点：</code>hot</li><li><code>新闻：</code>news</li><li><code>下载：</code>download</li><li><code>投票：</code>vote</li><li><code>商 标：</code>label/branding</li><li><code>当前位置：</code>breadcrumb/loc</li><li><code>购物车：</code>shop</li><li><code>标签：</code>tag</li><li><code>信誉：</code>siteinfo-credits</li><li><code>网站信息：</code>siteinfo</li><li><code>法律声明：</code>siteinfo-legal</li><li><code>合作伙伴：</code>partner</li><li><code>友情链接：</code>friendlink</li><li><code>版权：</code>copyright</li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>🎇VScode实用插件推荐</title>
      <link href="/post/tools/vscode/%E6%8F%92%E4%BB%B6/"/>
      <url>/post/tools/vscode/%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<!-- * @Author: Weidows * @Date: 2020-05-27 19:28:49 * @LastEditors: Weidows * @LastEditTime: 2021-05-13 20:19:44 * @FilePath: \Weidowsd:\Game\Github\Blog-private\source\_posts\tools\vscode\插件.md--><ul><li><a href="#%E5%89%8D%E8%A8%80">前言</a></li><li><a href="#%E5%AE%9E%E7%94%A8%E6%8E%A8%E8%8D%90">实用推荐</a></li><li><a href="#%E7%BE%8E%E5%8C%96%E6%8E%A8%E8%8D%90">美化推荐</a><ul><li><a href="#%E4%B8%BB%E9%A2%98">主题</a></li><li><a href="#%E7%AA%97%E5%8F%A3%E9%80%8F%E6%98%8E">窗口透明</a></li><li><a href="#%E5%85%B6%E4%BB%96">其他</a></li></ul></li><li><a href="#%E7%A0%81%E5%AD%97%E6%8E%A8%E8%8D%90">码字推荐</a><ul><li><a href="#%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8">代码补全</a></li><li><a href="#%E5%85%B6%E4%BB%96-1">其他</a></li></ul></li><li><a href="#%E6%96%87%E7%AB%A0%E6%8E%A8%E8%8D%90">文章推荐</a></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="前言-5">前言</h2><p>莅临此处的应该是都知道 <a href="https://code.visualstudio.com"><strong>VScode</strong></a> 是怎样一个<em>编辑器</em> 了,再此处附上<a href="#%E4%BA%8C.%E5%AE%9E%E7%94%A8%E6%8E%A8%E8%8D%90">实用</a> <a href="#%E4%B8%89.%E7%BE%8E%E5%8C%96%E6%8E%A8%E8%8D%90">美化</a> <a href="#%E5%9B%9B.%E7%A0%81%E5%AD%97%E6%8E%A8%E8%8D%90">码字</a>的推荐,希望喜欢!</p><p>更新至: <code>2021-2</code></p><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="实用推荐">实用推荐</h2><ul><li><h3 id="Bookmarks">Bookmarks</h3><ul><li>让侧边栏出来个书签按钮,功能和名字一样,就是可以在某个地方<strong>做一个可以起名字的书签</strong></li><li>相对比有相似的插件<em>TODO Highlight</em>和<em>Todo Tree</em>,这两个是令写了 TODO 的地方高亮/被标记,由于标记不能起名字,所以个人更喜欢可标识性的 Bookmarks.</li></ul></li><li><h3 id="Code-Spelling-Checker">Code Spelling Checker</h3><ul><li>这个插件就很有意思了,它可以<strong>检查文件中单词的拼写错误</strong>,并可以<strong>提出修改方案</strong>,写代码,写 md,甚至写 txt 等等都可以用到</li></ul></li><li><h3 id="Code-Time">Code Time</h3><ul><li>这个插件可以<strong>记录对文件操作的时间</strong>(只是打开文件没有动的情况下不会计时),对个人而言可以统计学习码字时间,可以登录谷歌或 Github 进行同步</li></ul></li><li><h3 id="Comment-Translate">Comment Translate</h3><ul><li>个人最喜欢的综合性较强的<strong>翻译插件</strong>,支持划词翻译,在注释上悬浮翻译,段落翻译…速度和质量很优秀</li></ul></li><li><h3 id="Remote-SSH">Remote - SSH</h3><ul><li>作用主要是<strong>ssh 远程连接</strong>,可以让 VScode 管理远程机上的文件/代码…</li></ul></li><li><h3 id="Bracket-Select">Bracket Select</h3><ul><li><p>快速选择<code>括起来的内容</code></p></li><li><p>包括单引号,双引号,小括号,中括号,大括号…</p></li></ul></li><li><h3 id="CodeSnap">CodeSnap</h3><ul><li>代码截图</li></ul></li><li><h3 id="file-size">file-size</h3><ul><li>显示文件大小</li></ul></li><li><h3 id="Image-Preview">Image Preview</h3><ul><li>可以预览图片</li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="美化推荐">美化推荐</h2><h3 id="主题">主题</h3><ul><li><h3 id="Weidows-Design-theme">Weidows Design theme</h3><ul><li>当然是我自己做的最好看了!</li></ul></li><li><h3 id="Shades-of-Purple">Shades of Purple</h3><ul><li>看起来紫气东来的一个主题</li></ul></li><li><h3 id="Tinacious-Design">Tinacious Design</h3><ul><li>个人最喜欢的主题,只要是 RGB+Cyberpunk 风格吸引我</li></ul></li><li><h3 id="Dracula">Dracula</h3><ul><li>代码配色太好看了!</li></ul></li></ul><hr><h3 id="窗口透明">窗口透明</h3><ul><li><h3 id="Glasslt-VSC">Glasslt-VSC</h3><ul><li>让 VScode 窗口半透明化(无毛玻璃效果,但是这个不影响性能)</li></ul></li><li><h3 id="Vibrancy">Vibrancy</h3><ul><li>令<strong>VScode 毛玻璃型透明</strong>,可选择透明度和非透明区域(注意这个插件比较影响性能)</li></ul></li></ul><hr><h3 id="其他">其他</h3><ul><li><h3 id="Power-Mode">Power Mode</h3><ul><li>在码字时敲入文字后光标产生动画,很好看(但是会有点卡顿现象)</li></ul></li><li><h3 id="Chinese-Simplified-Language-Pack-for-Visual-Studio-Code">Chinese (Simplified) Language Pack for Visual Studio Code</h3><ul><li>这个不解释,中国人看<strong>中国字</strong>顺眼就对了</li></ul></li><li><h3 id="background">background</h3><ul><li>可以让主窗口出来个偷看的小东方(默认情况下,可以自行修改),主要是<strong>养眼使用</strong>.</li></ul></li><li><h3 id="Material-Icon-Theme">Material Icon Theme</h3><ul><li><p>侧边栏的资源管理器中的<strong>文件</strong>们长出了<strong>头像</strong>,更加好认了呢…</p></li><li><p>另外插件商店搜索 icon 也可以找到其他样式的图标包,看个人喜好了…</p></li></ul></li><li><h3 id="Rainbow-Fart">Rainbow Fart</h3><ul><li>不能算是美化吧…但只能放这了…打开浏览器一个辅助性页面,授权后在你码字触发某些关键字时会播放 “鼓励” 型话语,具体可以参考我的另一个项目</li></ul></li><li><h3 id="koroFileHeader">koroFileHeader</h3><ul><li>在 new 文件时在文件头部加上作者,新建和更改日期,文件目录等信息(也可手动添加)<br>另一个有趣功能是可以一键添加字符画!没啥用但挺有意思的…</li></ul></li><li><h3 id="Live2D">Live2D</h3><ul><li>在 VScode 里面添加一个 Live2D 看板娘</li></ul></li><li><h3 id="Rainbow-String">Rainbow String</h3><ul><li>使&quot;&quot;选中的字符串变成彩虹色,可以通过修改配置来使目标语言生效(比较影响性能)</li></ul></li><li><h3 id="Error-Lens">Error Lens</h3><ul><li>使代码错误/警告在那一行尾部显示出来</li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="码字推荐">码字推荐</h2><h3 id="代码补全">代码补全</h3><ul><li><h3 id="Visual-Studio-IntelliCode">Visual Studio IntelliCode</h3><ul><li><p>VS 原配夫人,但是个人感觉,补全效果</p></li><li><p>TabNine &gt; Kite &gt; Visual Studio IntelliCode</p></li></ul></li><li><h3 id="TabNine">TabNine</h3><ul><li><p><strong>代码补全</strong>的插件,不同的是它可以借助参考上下文,项目中的相似语句进行推荐补全(比语言自带的更强大,不冲突,这个是整句型补全,不嫌弃略卡的话实际很好用)</p></li><li><p>是个&quot;小巧&quot;的(实际上打开 VScode 时占用内存 1G+,具体看项目大小了)</p></li><li><p>可以补全纯文本</p></li></ul></li><li><h3 id="Kite">Kite</h3><ul><li><p>很出名的代码补全程序,需要安装外部程序(当然如果没安装的话,这个插件也会给你装上)</p></li><li><p>补全效果很出色,但是个人用起来感觉并不如 TabNine 舒服~</p></li></ul></li></ul><hr><h3 id="其他-2">其他</h3><ul><li><h3 id="Mover">Mover</h3><ul><li>不会用 Vim,用这个也不错</li></ul></li><li><h3 id="Bracket-Pair-Colorizer-2">Bracket Pair Colorizer 2</h3><ul><li><p>只要码字时用到大中小括号,我就推荐搞上它,它可以让不同对括号标记<strong>不同颜色</strong>来区分开,而且两配对的括号会<strong>标出缩进线</strong></p></li><li><p>放心,这个版本 2 比 1 好</p></li></ul></li><li><h3 id="Code-Runner">Code Runner</h3><ul><li>在界面右上角出现三角形按钮,它允许在编译调试环境已经搭配好的情况下<strong>使 VScode 产生 IDE 的* 作用</strong></li></ul></li><li><h3 id="Markdown-All-in-One">Markdown All in One</h3><ul><li>功能在名字中体现了,可以在 VScode 中<strong>打开/写/预览.md 文件</strong>,VScode 版 typora</li></ul></li><li><h3 id="Background-Phi-Colors">Background Phi Colors</h3><ul><li><p>在缩进区域以及匹配选择产生不同颜色的&quot;色块&quot;,在缩进不标准时也会变色提醒,<strong>很实用!</strong></p></li><li><p>如果你用过<code>indent-rainbow</code>,那么我推荐的这个这个插件大概率可以更满足你!</p></li></ul></li><li><h3 id="Better-Comments">Better Comments</h3><ul><li>添加注释时在每行注释第一个字符写&quot;!?*&quot;等字符会该行让注释变色,有一定增强阅读效果</li></ul></li></ul><p><a><img src="https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png" alt="分割线"></a></p><h2 id="文章推荐-2">文章推荐</h2><ul><li><p>有点老了,但是内容相当好.</p><blockquote><p><a href="https://blog.fundebug.com/2018/11/20/10-must-have-vs-code-extensions-for-javascript-developers/">10 种 JavaScript 开发者必备的 VS Code 插件</a></p></blockquote></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
          <category> vscode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> vscode </tag>
            
            <tag> 工具 </tag>
            
            <tag> 插件 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
