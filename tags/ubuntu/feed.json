{
    "version": "https://jsonfeed.org/version/1",
    "title": "⭐️齐下无贰⭐️ • All posts by \"ubuntu\" tag",
    "description": "May all the beauty be bless.✨",
    "home_page_url": "https://weidows.github.io",
    "items": [
        {
            "id": "https://weidows.github.io/post/system/virtual-server/",
            "url": "https://weidows.github.io/post/system/virtual-server/",
            "title": "🟡Ubuntu-Server搞机记录.",
            "date_published": "2021-02-01T18:04:38.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @Date: 2021-02-02 02:04:38\n * @LastEditors: Weidows\n * @LastEditTime: 2021-09-02 15:47:06\n * @FilePath: \\Blog-private\\source\\_posts\\system\\virtual-server.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85\">下载安装</a></li>\n<li><a href=\"#%E6%8D%A2%E6%BA%90\">换源</a></li>\n<li><a href=\"#%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81-ip\">配置静态 IP</a></li>\n<li><a href=\"#%E8%BD%AF%E4%BB%B6%E5%A4%87%E4%BB%BD\">软件备份</a></li>\n</ul>\n<h2 id=\"下载安装\">下载安装</h2>\n<ul>\n<li>\n<p>官网上下载 ISO 文件就行,挺快的</p>\n<ul>\n<li>\n<p>desktop 是桌面版,有图形界面</p>\n</li>\n<li>\n<p>server 是服务器版,没有图形界面(也就是只有命令行界面)</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>我用的<code>VMware</code>安装的,用其他软件也可,个人比较喜欢这个.</p>\n<ul>\n<li>安装时可以选择附带的服务软件,比如<code>docker</code>,<code>k8s</code>等等…</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>安装完成后长这样</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4SqX.png\" alt=\"20210202144325\" />\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"换源-2\">换源</h2>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/xiangxianghehe/article/details/105688062\">Ubuntu 20.04 换国内源 清华源 阿里源 中科大源 163 源</a></p>\n</blockquote>\n<ul>\n<li>安装系统过程中就有换源选项.</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"配置静态-IP\">配置静态 IP</h2>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/yaohong/p/11593989.html\">ubuntu 18.04 设置静态 ip 方法</a></p>\n</blockquote>\n<ul>\n<li>\n<p>初始的 Ubuntu-Server 没有<code>net-tools</code>,需要<a href=\"#%E8%BD%AF%E4%BB%B6%E5%A4%87%E4%BB%BD\">安装</a></p>\n</li>\n<li>\n<p>默认情况下使用<code>DHCP</code>,连接网络会自动分配一个 IP,使用<code>ifconfig</code>查看(这个 ifconfig 就是上面 net-tools 里面的)</p>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">weidows</span>@ubuntu-server:~/Code$ ifconfig</span><br><span class=\"line\"><span class=\"attribute\">ens33</span>: flags=<span class=\"number\">4163</span>&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class=\"number\">1500</span></span><br><span class=\"line\">        <span class=\"attribute\">inet</span> <span class=\"number\">192.168.2.122</span>  netmask <span class=\"number\">255.255.255.0</span>  broadcast <span class=\"number\">192.168.2.255</span></span><br><span class=\"line\">        <span class=\"attribute\">inet6</span> fe80::<span class=\"number\">20</span>c:<span class=\"number\">29</span>ff:fe28:c082  prefixlen <span class=\"number\">64</span>  scopeid <span class=\"number\">0</span>x20&lt;link&gt;</span><br><span class=\"line\">        <span class=\"attribute\">ether</span> <span class=\"number\">00</span>:<span class=\"number\">0</span>c:<span class=\"number\">29</span>:<span class=\"number\">28</span>:c0:<span class=\"number\">82</span>  txqueuelen <span class=\"number\">1000</span>  (Ethernet)</span><br><span class=\"line\">        <span class=\"attribute\">RX</span> packets <span class=\"number\">114664</span>  bytes <span class=\"number\">143722941</span> (<span class=\"number\">143</span>.<span class=\"number\">7</span> MB)</span><br><span class=\"line\">        <span class=\"attribute\">RX</span> errors <span class=\"number\">0</span>  dropped <span class=\"number\">0</span>  overruns <span class=\"number\">0</span>  frame <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"attribute\">TX</span> packets <span class=\"number\">52086</span>  bytes <span class=\"number\">37199464</span> (<span class=\"number\">37</span>.<span class=\"number\">1</span> MB)</span><br><span class=\"line\">        <span class=\"attribute\">TX</span> errors <span class=\"number\">0</span>  dropped <span class=\"number\">0</span> overruns <span class=\"number\">0</span>  carrier <span class=\"number\">0</span>  collisions <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attribute\">lo</span>: flags=<span class=\"number\">73</span>&lt;UP,LOOPBACK,RUNNING&gt;  mtu <span class=\"number\">65536</span></span><br><span class=\"line\">        <span class=\"attribute\">inet</span> <span class=\"number\">127.0.0.1</span>  netmask <span class=\"number\">255.0.0.0</span></span><br><span class=\"line\">        <span class=\"attribute\">inet6</span> ::<span class=\"number\">1</span>  prefixlen <span class=\"number\">128</span>  scopeid <span class=\"number\">0</span>x10&lt;host&gt;</span><br><span class=\"line\">        <span class=\"attribute\">loop</span>  txqueuelen <span class=\"number\">1000</span>  (Local Loopback)</span><br><span class=\"line\">        <span class=\"attribute\">RX</span> packets <span class=\"number\">14643</span>  bytes <span class=\"number\">53874531</span> (<span class=\"number\">53</span>.<span class=\"number\">8</span> MB)</span><br><span class=\"line\">        <span class=\"attribute\">RX</span> errors <span class=\"number\">0</span>  dropped <span class=\"number\">0</span>  overruns <span class=\"number\">0</span>  frame <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"attribute\">TX</span> packets <span class=\"number\">14643</span>  bytes <span class=\"number\">53874531</span> (<span class=\"number\">53</span>.<span class=\"number\">8</span> MB)</span><br><span class=\"line\">        <span class=\"attribute\">TX</span> errors <span class=\"number\">0</span>  dropped <span class=\"number\">0</span> overruns <span class=\"number\">0</span>  carrier <span class=\"number\">0</span>  collisions <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attribute\">weidows</span>@ubuntu-server:~/Code$</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>可以看到第三行<code>192.168.2.122</code>就是分配的 ip 了,用它就行.</p>\n</li>\n<li>\n<p>进入<code>/etc/netplan/</code>这个目录,使用<code>ll</code>查看内部有啥东西</p>\n<ul>\n<li>\n<p>发现第六行<code>00-installer-config.yaml</code>这个文件是我们要找的(可能名字不一样,后缀是.yaml 就对了)</p>\n</li>\n<li>\n<p>使用<code>cat</code>查看文件内容,核实没错,然后修改它!</p>\n</li>\n</ul>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">weidows@ubuntu-server:~<span class=\"regexp\">/Code$ cd /</span>etc<span class=\"regexp\">/netplan/</span></span><br><span class=\"line\">weidows@ubuntu-server:<span class=\"regexp\">/etc/</span>netplan$ ll</span><br><span class=\"line\">total <span class=\"number\">12</span></span><br><span class=\"line\">drwxr-xr-x  <span class=\"number\">2</span> root root <span class=\"number\">4096</span> Feb  <span class=\"number\">1</span> <span class=\"number\">17</span>:<span class=\"number\">55</span> ./</span><br><span class=\"line\">drwxr-xr-x <span class=\"number\">92</span> root root <span class=\"number\">4096</span> Feb  <span class=\"number\">2</span> <span class=\"number\">06</span>:<span class=\"number\">25</span> ../</span><br><span class=\"line\">-rw-r--r--  <span class=\"number\">1</span> root root  <span class=\"number\">116</span> Feb  <span class=\"number\">1</span> <span class=\"number\">17</span>:<span class=\"number\">55</span> <span class=\"number\">00</span>-installer-config.yaml</span><br><span class=\"line\">weidows@ubuntu-server:<span class=\"regexp\">/etc/</span>netplan$ cat <span class=\"number\">00</span>-installer-config.yaml</span><br><span class=\"line\"># <span class=\"keyword\">This</span> is the network config written by <span class=\"string\">&#x27;subiquity&#x27;</span></span><br><span class=\"line\">network:</span><br><span class=\"line\">  ethernets:</span><br><span class=\"line\">    ens33:</span><br><span class=\"line\">      dhcp4: <span class=\"keyword\">true</span></span><br><span class=\"line\">  version: <span class=\"number\">2</span></span><br><span class=\"line\">weidows@ubuntu-server:<span class=\"regexp\">/etc/</span>netplan$</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>使用<code>vi</code>修改<code> sudo vi /etc/netplan/00-installer-config.yaml</code></p>\n<ul>\n<li>地址啥的按照规则设</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## This is the network config written by &#x27;subiquity&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\">  <span class=\"attr\">ethernets:</span></span><br><span class=\"line\">    <span class=\"attr\">ens33:</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">addresses:</span> [<span class=\"number\">192.168</span><span class=\"number\">.2</span><span class=\"number\">.122</span><span class=\"string\">/24</span>]</span><br><span class=\"line\">      <span class=\"attr\">gateway4:</span> <span class=\"number\">192.168</span><span class=\"number\">.2</span><span class=\"number\">.1</span></span><br><span class=\"line\">      <span class=\"attr\">nameservers:</span></span><br><span class=\"line\">        <span class=\"attr\">addresses:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"number\">192.168</span><span class=\"number\">.2</span><span class=\"number\">.1</span></span><br><span class=\"line\">  <span class=\"attr\">version:</span> <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>然后应用<code>sudo netplan apply</code>设置,完事!</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"软件备份\">软件备份</h2>\n<ul>\n<li>\n<p>找软件的话可以用<code>apt search XXX</code>来找</p>\n</li>\n<li>\n<p>个人安装的一些服务型软件(在主机上做的开发,用这个 Server 跑服务)</p>\n</li>\n</ul>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt <span class=\"keyword\">install</span> docker</span><br><span class=\"line\">sudo apt <span class=\"keyword\">install</span> net-tools</span><br></pre></td></tr></table></figure>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "操作系统",
                "服务器",
                "虚拟机",
                "ubuntu"
            ]
        }
    ]
}