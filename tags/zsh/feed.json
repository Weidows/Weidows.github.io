{
    "version": "https://jsonfeed.org/version/1",
    "title": "⭐️齐下无贰⭐️ • All posts by \"zsh\" tag",
    "description": "May all the beauty be bless.✨",
    "home_page_url": "https://weidows.github.io",
    "items": [
        {
            "id": "https://weidows.github.io/post/lang/shell/optimize/",
            "url": "https://weidows.github.io/post/lang/shell/optimize/",
            "title": "🉑极致专攻-Shell-Optimize",
            "date_published": "2020-10-13T15:25:31.000Z",
            "content_html": "<h1>极致专攻-Shell-Optimize</h1>\n<!--\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2023-04-20 18:26:49\n * @FilePath: \\Blog-private\\source\\_posts\\experience\\shell\\optimize.md\n-->\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li><a href=\"#%E6%9E%81%E8%87%B4%E4%B8%93%E6%94%BB-shell-optimize\">极致专攻-Shell-Optimize</a>\n<ul>\n<li><a href=\"#pwsh\">pwsh</a>\n<ul>\n<li><a href=\"#%E9%A2%84%E8%A7%88\">预览</a></li>\n<li><a href=\"#%E5%AE%89%E8%A3%85\">安装</a></li>\n<li><a href=\"#%E6%8F%92%E4%BB%B6-%E9%85%8D%E7%BD%AE\">插件-配置</a>\n<ul>\n<li><a href=\"#oh-my-posh\">oh-my-posh</a></li>\n<li><a href=\"#poshfuck\">PoshFuck</a></li>\n<li><a href=\"#posh-git\">posh-git</a></li>\n<li><a href=\"#psreadline\">PSReadline</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%90%AF%E7%94%A8%E7%AE%A1%E7%90%86%E5%91%98%E6%A8%A1%E5%BC%8F\">启用管理员模式</a></li>\n<li><a href=\"#%E6%8A%A5%E9%94%99\">报错</a>\n<ul>\n<li><a href=\"#%E5%8F%82%E6%95%B0%E6%95%B0%E9%87%8F%E9%97%AE%E9%A2%98\">参数数量问题</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#zsh\">zsh</a>\n<ul>\n<li><a href=\"#%E5%AE%89%E8%A3%85-1\">安装</a></li>\n<li><a href=\"#%E4%B8%BB%E9%A2%98\">主题</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%80%9F%E7%89%A9%E8%A1%A8\">借物表</a></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h2 id=\"pwsh\">pwsh</h2>\n<h3 id=\"预览\">预览</h3>\n<p><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/ZUZaLQ.png\" alt=\"\"></p>\n<p><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GV3nLD.png\" alt=\"siDz8M1QlGIanE3\"></p>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"安装\">安装</h3>\n<ul>\n<li>\n<p>不同于 Windows 自带的 Windows PowerShell,这个 PowerShell(也叫 posh/pwsh) 需要另行安装</p>\n<p>配置环境变量:Path 里面+ <code>D:\\Game\\Demo\\PowerShell\\</code></p>\n<p>如果用 VScode 的话,实际上不设置环境变量也行,因为在 VScode 内需要指定 powershell 路径</p>\n</li>\n<li>\n<p>Scoop 安装全自动,不需要配置.</p>\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">scoop </span><span class=\"keyword\">install </span>pwsh</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"插件-配置\">插件-配置</h3>\n<blockquote>\n<p><a href=\"https://github.com/Weidows-projects/Programming-Configuration/blob/master/others/PowerShell/Microsoft.PowerShell_profile.ps1\">我的配置文件链接</a></p>\n</blockquote>\n<h4 id=\"oh-my-posh\">oh-my-posh</h4>\n<blockquote>\n<p><a href=\"https://ohmyposh.dev/\">oh-my-posh</a> (增强主题)</p>\n</blockquote>\n  <img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVFbWK.png\" alt=\"20211029164044\" />\n<ul>\n<li>\n<p><a href=\"https://ohmyposh.dev/docs/installation/windows\">官方给的安装方式:</a></p>\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">scoop </span><span class=\"keyword\">install </span>oh-my-posh</span><br></pre></td></tr></table></figure>\n<p>已经废弃的方式</p>\n<figure class=\"highlight mathematica\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Install</span><span class=\"operator\">-</span><span class=\"built_in\">Module</span> <span class=\"variable\">oh</span><span class=\"operator\">-</span><span class=\"variable\">my</span><span class=\"operator\">-</span><span class=\"variable\">posh</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><a href=\"https://ohmyposh.dev/docs/themes\">查看主题</a> / 使用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">Get-PoshThemes</span><br><span class=\"line\">Get-PoshThemes $env:SCOOP\\persist\\oh-my-posh\\themes</span><br></pre></td></tr></table></figure>\n<p>用法: 在 pwsh 执行如下可以得到 pwsh 配置文件路径</p>\n<figure class=\"highlight gams\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\"><span class=\"keyword\">$profile</span></span></span><br></pre></td></tr></table></figure>\n<p>在配置文件里面填写如下 (对应的 JSON 文件名就是想要启用的主题)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">oh-my-posh init pwsh --config &quot;$env:SCOOP/persist/oh-my-posh/themes/powerlevel10k_classic.omp.json&quot; | Invoke-Expression</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n</ul>\n<h4 id=\"PoshFuck\">PoshFuck</h4>\n<blockquote>\n<p><a href=\"https://github.com/mattparkes/PoShFuck\">PoshFuck</a>, the fuck 的 pwsh 实现</p>\n</blockquote>\n  <img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVA1AR.png\" alt=\"20211029164014\" />\n<ul>\n<li>\n<p>安装: 不必在意格式,复制就行</p>\n<figure class=\"highlight lisp\"><table><tr><td class=\"code\"><pre><span class=\"line\">Set-ExecutionPolicy RemoteSigned</span><br><span class=\"line\">  iex ((<span class=\"name\">new-object</span> net.webclient).DownloadString(&#x27;https<span class=\"symbol\">://raw</span>.githubusercontent.com/mattparkes/PoShFuck/master/Install-TheFucker.ps1&#x27;))</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight coq\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">Import</span>-<span class=\"keyword\">Module</span> PoShFuck</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>用法: <code>fuck</code> / <code>fuck!</code> / <code>WTF</code> / <code>Get-Fucked</code></p>\n<hr>\n<h4 id=\"posh-git\">posh-git</h4>\n<blockquote>\n<p><code>posh-git</code> (用于扩展 Posh 里的 Git 自动补全)</p>\n</blockquote>\n  <img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVP41Y.png\" alt=\"20211029163651\" />\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">scoop </span><span class=\"keyword\">install </span>posh-git</span><br><span class=\"line\"><span class=\"comment\"># 或</span></span><br><span class=\"line\"><span class=\"keyword\">Install-Module </span>posh-git</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight coq\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">Import</span>-<span class=\"keyword\">Module</span> posh-git</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"PSReadline\">PSReadline</h4>\n<blockquote>\n<p><code>PSReadline</code> (Windows 自带,可以直接使用)</p>\n</blockquote>\n<ul>\n<li>\n<p>预测显示历史命令 / 上下左右高级补全</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVLnS6.png\" alt=\"20210703123813\" />\n<figure class=\"highlight mathematica\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">#</span> <span class=\"variable\">Enable</span> <span class=\"variable\">Prediction</span> <span class=\"variable\">History</span></span><br><span class=\"line\"><span class=\"built_in\">Set</span><span class=\"operator\">-</span><span class=\"variable\">PSReadLineOption</span> <span class=\"operator\">-</span><span class=\"variable\">PredictionSource</span> <span class=\"variable\">History</span></span><br><span class=\"line\"><span class=\"type\">###</span> <span class=\"variable\">Advanced</span> <span class=\"variable\">Autocompletion</span> <span class=\"variable\">for</span> <span class=\"variable\">arrow</span> <span class=\"variable\">keys</span></span><br><span class=\"line\"><span class=\"built_in\">Set</span><span class=\"operator\">-</span><span class=\"variable\">PSReadlineKeyHandler</span> <span class=\"operator\">-</span><span class=\"built_in\">Key</span> <span class=\"built_in\">UpArrow</span> <span class=\"operator\">-</span><span class=\"built_in\">Function</span> <span class=\"variable\">HistorySearchBackward</span></span><br><span class=\"line\"><span class=\"built_in\">Set</span><span class=\"operator\">-</span><span class=\"variable\">PSReadlineKeyHandler</span> <span class=\"operator\">-</span><span class=\"built_in\">Key</span> <span class=\"built_in\">DownArrow</span> <span class=\"operator\">-</span><span class=\"built_in\">Function</span> <span class=\"variable\">HistorySearchForward</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><code>Posh中类似Linux形式补全</code> (按 Tab 自动补,非常实用)</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVLO2m.png\" alt=\"MouseInc 122640\" />\n<figure class=\"highlight mathematica\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Set</span><span class=\"operator\">-</span><span class=\"variable\">PSReadlineKeyHandler</span> <span class=\"operator\">-</span><span class=\"built_in\">Key</span> <span class=\"built_in\">Tab</span> <span class=\"operator\">-</span><span class=\"built_in\">Function</span> <span class=\"variable\">MenuComplete</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"启用管理员模式\">启用管理员模式</h3>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\">reg <span class=\"keyword\">add</span><span class=\"language-bash\"> <span class=\"string\">&quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Kernel&quot;</span> /v DisableTsx /t REG_DWORD /d 0 /f</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>作用就是让右键文件时出现管理员权限</p>\n<p>实际上没啥用,并不太推荐使用</p>\n<p>这个东西与上面 PowerShell 没啥关系</p>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"报错\">报错</h3>\n<h4 id=\"参数数量问题\">参数数量问题</h4>\n<figure class=\"highlight subunit\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ERROR </span>Cannot process argument transformation on parameter &#x27;ApplicationQuery&#x27;. Cannot convert value to type System.String.</span><br><span class=\"line\"><span class=\"keyword\">ERROR </span>This application failed to install: posh-git</span><br></pre></td></tr></table></figure>\n<p>在写 powershell 脚本时遇到的, 需要把 args 遍历使用, 不然即使实际传进来的只有一个也会报错</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sci</span></span>&#123; scoop install <span class=\"variable\">$args</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sci</span></span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">Foreach</span>(<span class=\"variable\">$argv</span> <span class=\"keyword\">in</span> <span class=\"variable\">$args</span>) &#123;</span><br><span class=\"line\">    scoop install <span class=\"variable\">$argv</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> ========================================================================</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"zsh\">zsh</h2>\n<h3 id=\"安装-2\">安装</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sh -c <span class=\"string\">&quot;<span class=\"subst\">$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"主题\">主题</h3>\n<p>在 <code>~/.zshrc</code> 里面找到并更改:</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">ZSH_THEME</span>=<span class=\"string\">&quot;jonathan&quot;</span></span><br></pre></td></tr></table></figure>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表\">借物表</h2>\n<p>暂无…</p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "备忘录",
                "shell",
                "PowerShell",
                "zsh"
            ]
        }
    ]
}