{
    "version": "https://jsonfeed.org/version/1",
    "title": "⭐️齐下无贰⭐️ • All posts by \"package\" tag",
    "description": "May all the beauty be bless.✨",
    "home_page_url": "https://weidows.github.io",
    "items": [
        {
            "id": "https://weidows.github.io/post/tools/Scoop/",
            "url": "https://weidows.github.io/post/tools/Scoop/",
            "title": "🙌Windows 平台软件包管理器选择 -Scoop",
            "date_published": "2021-01-14T15:09:52.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @Date: 2021-01-14 23:09:52\n * @LastEditors: Weidows\n * @LastEditTime: 2022-01-14 16:50:24\n * @FilePath: \\Blog-private\\source\\_posts\\tools\\Scoop.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%BC%95%E5%85%A5%E5%8F%98%E9%87%8F\">引入变量</a></li>\n<li><a href=\"#%E5%90%84%E4%B8%AA%E4%BC%98%E7%BC%BA%E7%82%B9\">各个优缺点</a></li>\n<li><a href=\"#%E5%AE%89%E8%A3%85\">安装</a>\n<ul>\n<li><a href=\"#scoop\">Scoop</a></li>\n<li><a href=\"#chocolatey\">Chocolatey</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%8A%9F%E8%83%BD%E6%8F%90%E5%8D%87\">功能提升</a>\n<ul>\n<li><a href=\"#scoop-completion\">scoop-completion</a></li>\n<li><a href=\"#%E5%8A%A0%E9%80%9F%E4%B8%8B%E8%BD%BD\">加速下载</a></li>\n</ul>\n</li>\n<li><a href=\"#scoop-%E7%BB%9D%E6%B4%BB\">Scoop 绝活</a></li>\n<li><a href=\"#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\">配置文件</a>\n<ul>\n<li><a href=\"#scoop-1\">Scoop</a></li>\n<li><a href=\"#chocolatey-1\">Chocolatey</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%A5%BD%E6%96%87%E4%BC%A0%E9%80%81\">好文传送</a></li>\n<li><a href=\"#%E6%8A%A5%E9%94%99%E5%BC%82%E5%B8%B8\">报错异常</a>\n<ul>\n<li><a href=\"#%E7%BD%91%E7%BB%9C%E5%8E%9F%E5%9B%A0\">网络原因</a></li>\n<li><a href=\"#%E7%8E%AF%E5%A2%83%E5%8E%9F%E5%9B%A0\">环境原因</a></li>\n<li><a href=\"#%E5%86%85%E6%A0%B8%E6%9B%B4%E6%8D%A2%E6%8A%A5%E9%94%99\">内核更换报错</a></li>\n<li><a href=\"#scoop-search\">scoop-search</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%9B%B4%E6%96%B0%E5%A4%87%E4%BB%BD%E6%8E%A8%E8%8D%90\">更新 &amp; 备份 &amp; 推荐</a></li>\n</ul>\n<h2 id=\"引入变量\">引入变量</h2>\n<ul>\n<li>\n<p>软件包管理器: 就像是 360 软件管家, 腾讯软件管家之类的</p>\n</li>\n<li>\n<p>此文章要介绍的是 <code>Scoop</code>- 横向简单对比<code>Chocolatey</code> 和<code>WinGet</code></p>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"各个优缺点\">各个优缺点</h2>\n<ul>\n<li>\n<p>Scoop</p>\n<ul>\n<li>软件少</li>\n<li>安装它需要 <code> 科学上网</code></li>\n<li>官方只收留非 GUI 软件(不带图形界面的), 但是有第三方拓展库</li>\n<li>安装 / 卸载干净, 可指定性, 可拓展第三方软件仓库</li>\n<li>不污染环境变量, 软件目录清晰</li>\n<li><em>面向程序员</em>.</li>\n</ul>\n</li>\n<li>\n<p>Chocolatey</p>\n<ul>\n<li>软件多</li>\n<li>有的软件安装位置不定</li>\n<li>面向大众.</li>\n</ul>\n<blockquote>\n<p><a href=\"https://www.cnbeta.com/articles/tech/874537.htm?utm_source=tuicool&amp;utm_medium=referral\">软件包管理工具选 Scoop 还是 Chocolatey？看完这篇就知道了</a></p>\n</blockquote>\n</li>\n<li>\n<p>WinGet</p>\n<ul>\n<li>preview 中(2021 年初为止)</li>\n<li><code>只能安装不能卸载</code></li>\n<li>只能装.exe,.msi 等, 差不多就是个下载 + 安装的工具</li>\n<li>还非常青涩,<strong>不推荐!</strong></li>\n</ul>\n<blockquote>\n<p><a href=\"https://sspai.com/post/60592\">WinGet 介绍</a></p>\n</blockquote>\n</li>\n<li>\n<p>个人选择了 <code>Scoop</code>, 下面主要讲 Scoop.</p>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"安装 -2\">安装</h2>\n<h3 id=\"Scoop-2\">Scoop</h3>\n<ul>\n<li>\n<p>安装前先设置下 Scoop 的 <code> 安装路径</code></p>\n</li>\n<li>\n<p>下面操作需要在 pwsh 中进行, 没有的话可以手动操作.</p>\n</li>\n<li>\n<p>如下, 在 user 栏新建<code>SCOOP</code>, 值为<code>D:\\Game\\Scoop</code></p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$env:SCOOP</span>=<span class=\"string\">&#x27;D:\\Game\\Scoop&#x27;</span></span><br><span class=\"line\">[<span class=\"type\">Environment</span>]::SetEnvironmentVariable(<span class=\"string\">&#x27;SCOOP&#x27;</span>, <span class=\"variable\">$env:SCOOP</span>, <span class=\"string\">&#x27;User&#x27;</span>)</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>另外, 如果想添加到系统环境变量栏, 只需把 <code>User</code> 修改为<code>Machine</code></p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"type\">Environment</span>]::SetEnvironmentVariable(<span class=\"string\">&#x27;SCOOP&#x27;</span>, <span class=\"variable\">$env:SCOOP</span>, <span class=\"string\">&#x27;Machine&#x27;</span>)</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>配置好了如下</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSttT.png\" alt=\"20210115232840\" />\n</li>\n<li>\n<p>安装</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iwr -useb get.scoop.sh | iex</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>测试</p>\n<ul>\n<li>\n<p>终端输入</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scoop</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>输出</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">❯ scoop</span><br><span class=\"line\">Usage: scoop &lt;command&gt; [&lt;<span class=\"keyword\">args</span>&gt;]</span><br><span class=\"line\"></span><br><span class=\"line\">Some useful commands are:</span><br><span class=\"line\"></span><br><span class=\"line\">alias       Manage scoop aliases</span><br><span class=\"line\">bucket      Manage Scoop buckets</span><br><span class=\"line\">cache       Show or <span class=\"keyword\">clear</span> the download cache</span><br><span class=\"line\">checkup     Check <span class=\"keyword\">for</span> potential problems</span><br><span class=\"line\">cleanup     Cleanup apps <span class=\"keyword\">by</span> removing old versions</span><br><span class=\"line\">config      Get or <span class=\"keyword\">set</span> configuration values</span><br><span class=\"line\">create      Create a custom <span class=\"keyword\">app</span> manifest</span><br><span class=\"line\">depends     <span class=\"keyword\">List</span> dependencies <span class=\"keyword\">for</span> <span class=\"keyword\">an</span> <span class=\"keyword\">app</span></span><br><span class=\"line\">export      Exports (<span class=\"keyword\">an</span> importable) <span class=\"keyword\">list</span> of installed apps</span><br><span class=\"line\"><span class=\"keyword\">help</span>        Show <span class=\"keyword\">help</span> <span class=\"keyword\">for</span> a command</span><br><span class=\"line\">hold        Hold <span class=\"keyword\">an</span> <span class=\"keyword\">app</span> to disable updates</span><br><span class=\"line\">home        Opens the <span class=\"keyword\">app</span> homepage</span><br><span class=\"line\">info        <span class=\"keyword\">Display</span> information <span class=\"keyword\">about</span> <span class=\"keyword\">an</span> <span class=\"keyword\">app</span></span><br><span class=\"line\">install     Install apps</span><br><span class=\"line\"><span class=\"keyword\">list</span>        <span class=\"keyword\">List</span> installed apps</span><br><span class=\"line\">prefix      Returns the path to the specified <span class=\"keyword\">app</span></span><br><span class=\"line\">reset       Reset <span class=\"keyword\">an</span> <span class=\"keyword\">app</span> to resolve conflicts</span><br><span class=\"line\"><span class=\"keyword\">search</span>      <span class=\"keyword\">Search</span> available apps</span><br><span class=\"line\">status      Show status and check <span class=\"keyword\">for</span> new <span class=\"keyword\">app</span> versions</span><br><span class=\"line\">unhold      Unhold <span class=\"keyword\">an</span> <span class=\"keyword\">app</span> to enable updates</span><br><span class=\"line\">uninstall   Uninstall <span class=\"keyword\">an</span> <span class=\"keyword\">app</span></span><br><span class=\"line\"><span class=\"keyword\">update</span>      <span class=\"keyword\">Update</span> apps, or Scoop itself</span><br><span class=\"line\">virustotal  Look <span class=\"keyword\">for</span> <span class=\"keyword\">app</span>&#x27;s hash <span class=\"keyword\">on</span> virustotal.com</span><br><span class=\"line\"><span class=\"keyword\">which</span>       Locate a shim/executable (similar to &#x27;<span class=\"keyword\">which</span>&#x27; <span class=\"keyword\">on</span> Linux)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">Type</span> &#x27;scoop <span class=\"keyword\">help</span> &lt;command&gt;&#x27; to get <span class=\"keyword\">help</span> <span class=\"keyword\">for</span> a specific command.</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"Chocolatey\">Chocolatey</h3>\n<ul>\n<li>\n<p>首先设置环境变量 <code>ChocolateyInstall</code> , 值为要安装的位置, 如下</p>\n<ul>\n<li>\n<p>如果不设置的话 Chocolatey 会自动安装进 C 盘</p>\n</li>\n<li>\n<p>设置完环境变量后一定要 <code> 重启</code>, 否则不会生效, 还是跟没设置一样.</p>\n</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsWIn.png\" alt=\"20210314001245\" />\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"功能提升\">功能提升</h2>\n<h3 id=\"scoop-completion\">scoop-completion</h3>\n<ul>\n<li>\n<p>scoop 命令按 tab 自动补全</p>\n</li>\n<li>\n<p>安装</p>\n<ul>\n<li>需要先添加 dorado 库<a href=\"#%E5%A4%87%E4%BB%BD&amp;%E6%8E%A8%E8%8D%90\">(备份 &amp; 推荐)</a>, 然后才能安装.</li>\n</ul>\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">scoop </span><span class=\"keyword\">install </span><span class=\"keyword\">scoop-completion</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"加速下载\">加速下载</h3>\n<ul>\n<li>\n<p>通过 aria2, 配置:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scoop config aria2-split 32</span><br><span class=\"line\">scoop config aria2-max-connection-per-server 16</span><br><span class=\"line\">scoop config aria2-min-split-size 1M</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>通过代理:</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scoop<span class=\"built_in\"> config proxy </span>localhost:7890</span><br><span class=\"line\">choco<span class=\"built_in\"> config </span><span class=\"builtin-name\">set</span><span class=\"built_in\"> proxy </span>localhost:7890</span><br></pre></td></tr></table></figure>\n<p>移除代理:</p>\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">scoop </span><span class=\"built_in\">config</span> rm proxy</span><br><span class=\"line\">choco <span class=\"built_in\">config</span> unset proxy</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Scoop- 绝活\">Scoop 绝活</h2>\n<ul>\n<li>\n<p>他把当前版本的目录创建了一个 <code> 伪目录:current</code>, 这个伪目录指向当前版本号的目录</p>\n</li>\n<li>\n<p>比如这里的 <code>current/node.exe</code> 实际上指向<code>15.5.1/node.exe</code></p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVL62D.png\" alt=\"20210115011742\" />\n</li>\n<li>\n<p>这就类似 URL 永久化, 使得软件更新后即使目录版本号变更, 你的路径引用也不会失效!</p>\n</li>\n<li>\n<p>这个功能太赞了!</p>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"配置文件\">配置文件</h2>\n<h3 id=\"Scoop-3\">Scoop</h3>\n<blockquote>\n<p>在 <code>C:\\Users\\ 用户名 \\.config\\scoop\\config.json</code> 这个文件里.</p>\n</blockquote>\n<hr>\n<h3 id=\"Chocolatey-2\">Chocolatey</h3>\n<blockquote>\n<p>在 <code>Chocolatey\\config\\chocolatey.config</code> 这个文件里.</p>\n</blockquote>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"好文传送\">好文传送</h2>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/luoyooi/article/details/102990113\">Windows 下 Scoop 安装、配置与使用</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://www.jianshu.com/p/50993df76b1c\">scoop——强大的 Windows 命令行包管理工具</a></p>\n</blockquote>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"报错异常\">报错异常</h2>\n<h3 id=\"网络原因\">网络原因</h3>\n<ul>\n<li>比如我在用 scoop 安装 pwsh 时, 会遇到 MD5 不匹配或者与 GitHub 连接异常的情况, 安装失败</li>\n<li>举例:\n<ul>\n<li>我安装 <code>gitkraken</code> 时, 不开 aria2 下载出错, 开了的话下载特慢, 而且下载时间趋近无穷…</li>\n<li>于是我采用方案一, 直接用浏览器下载的, 带宽跑满, 几秒就下载好了.</li>\n<li>然后改文件名 -&gt; 复制进 cache-&gt;install-&gt;successfully.</li>\n</ul>\n</li>\n<li>另外还有一种情况, 比如我安装 <code>gcc</code> 时遇到 scoop 提供的 URL 是 404 状态, 这是服务器的问题了, 无法解决.</li>\n</ul>\n<blockquote>\n<p>注意, 如果安装失败, 在 Scoop 内部记录实际是 <code> 已安装</code>, 所以需要卸载再重新安装</p>\n</blockquote>\n<hr>\n<ul>\n<li>\n<p>解决方案一</p>\n<ul>\n<li>\n<p>安装失败报错时会显示下载地址, 去那里手动下载目标文件</p>\n<ul>\n<li>\n<p>或者进入 cache, 找到有个叫 <code>(要安装的软件名).txt</code> 这个文件, 比如我要安装<code>gitkraken</code>, 就去找到<code>cache/gitkraken.txt</code></p>\n</li>\n<li>\n<p>内容如下</p>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">https</span>://release.gitkraken.com/win<span class=\"number\">64</span>/gitkraken-<span class=\"number\">7</span>.<span class=\"number\">4</span>.<span class=\"number\">1</span>-full.nupkg</span><br><span class=\"line\"><span class=\"attribute\">referer</span>=https://release.gitkraken.com/win<span class=\"number\">64</span>/</span><br><span class=\"line\"><span class=\"attribute\">dir</span>=D:\\Game\\Scoop\\cache</span><br><span class=\"line\"><span class=\"attribute\">out</span>=gitkraken#<span class=\"number\">7</span>.<span class=\"number\">4</span>.<span class=\"number\">1</span>#https_release.gitkraken.com_win<span class=\"number\">64</span>_gitkraken-<span class=\"number\">7</span>.<span class=\"number\">4</span>.<span class=\"number\">1</span>-full.nupkg</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>第一行就是 <code> 下载地址 </code>, 最后一行<code>out=</code> 后面是目标文件名</p>\n</li>\n</ul>\n</li>\n<li>\n<p>进入 cache, 按照他的命名, 把我们自己下载的重命名后复制进来</p>\n</li>\n<li>\n<p>再进行 install, 安装时 scoop 首先检查 cache 中是否有符合的包, 没有才会去下载.</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>解决方案二</p>\n<ul>\n<li>把 aria2 关闭以下就好</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scoop config aria2-enabled false</span><br></pre></td></tr></table></figure>\n<ul>\n<li>事后再开启(毕竟它对于某些下载速度提升非常高)</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scoop config aria2-enabled true</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"环境原因\">环境原因</h3>\n<ul>\n<li>\n<p>这是个让人费解的报错, 什么都没告诉你还怼了句不明不白的话.</p>\n<blockquote>\n<p>ERROR Shovel flavour of scoop is required</p>\n</blockquote>\n</li>\n<li>\n<p>去看看这个项目:</p>\n<blockquote>\n<p><a href=\"https://github.com/Ash258/Scoop-Core\">https://github.com/Ash258/Scoop-Core</a></p>\n</blockquote>\n<p>大概意思: shovel 是 scoop-core 替换增强版, 你需要安装这家伙 (虽然用的人并不是很多)</p>\n</li>\n</ul>\n<h3 id=\"内核更换报错\">内核更换报错</h3>\n<ul>\n<li>\n<p>把内核换成了 Gitee 上的, 出现了报错:</p>\n<figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Updating Scoop...</span><br><span class=\"line\">Your configuration specifies to merge with the ref &#x27;refs/heads/main&#x27;</span><br><span class=\"line\">from the remote, but no such ref was fetched.</span><br><span class=\"line\"><span class=\"keyword\">ERROR </span>Update failed.</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>仔细检查了下是分支问题</p>\n<p>远程上是 master 分支, 而本地配置为 main 分支 (配置文件在 ~/.config/scoop/config.yml)</p>\n</li>\n</ul>\n<h3 id=\"scoop-search\">scoop-search</h3>\n<figure class=\"highlight console\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">╰─ scoop search 7 ─╯</span><br><span class=\"line\">panic: runtime error: index out of range [1] with length 1</span><br><span class=\"line\"></span><br><span class=\"line\">goroutine 20 [running]:</span><br><span class=\"line\">main.matchingManifests(0xc000102060, 0x21, 0xf1b3b8, 0x1, 0xc000052000, 0x10, 0x10)</span><br><span class=\"line\">        /home/runner/work/scoop-search/scoop-search/main.go:133 +0x106b</span><br><span class=\"line\">main.main.func1(0xc000092140, 0x15, 0xf1b3b8, 0x1, 0x0, 0xc000088270, 0xc000094150, 0xe92f00, 0xc0000d6070)</span><br><span class=\"line\">        /home/runner/work/scoop-search/scoop-search/main.go:70 +0x185</span><br><span class=\"line\">created by main.main</span><br><span class=\"line\">        /home/runner/work/scoop-search/scoop-search/main.go:63 +0x253</span><br></pre></td></tr></table></figure>\n<p>排查了一遍, 出现这种问题一般是因为 <code> 软件库有问题</code>, 而不是 scoop/scoop-search 的问题</p>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"更新 - 备份 - 推荐\">更新 &amp; 备份 &amp; 推荐</h2>\n<ul>\n<li>\n<p>备份方法可见: <a href=\"../backuper\">🎃backuper~ 开发环境备份.</a></p>\n<blockquote>\n<ul>\n<li>库: <a href=\"https://github.com/Weidows-projects/Programming-Configuration/blob/master/lists/scoop/scoop-buckets.bak\">https://github.com/Weidows-projects/Programming-Configuration/blob/master/lists/scoop/scoop-buckets.bak</a></li>\n<li>软件: <a href=\"https://github.com/Weidows-projects/Programming-Configuration/blob/master/lists/scoop/scoop-apps.bak\">https://github.com/Weidows-projects/Programming-Configuration/blob/master/lists/scoop/scoop-apps.bak</a></li>\n</ul>\n</blockquote>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "推荐",
                "windows",
                "scoop",
                "工具",
                "package"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/Node/node/",
            "url": "https://weidows.github.io/post/Web/Node/node/",
            "title": "⬆ Node.js 环境配置 && 使用",
            "date_published": "2020-11-24T13:59:29.000Z",
            "content_html": "<!--\n * @Author: Weidows\n * @Date: 2020-11-24 21:59:29\n * @LastEditors: Weidows\n * @LastEditTime: 2021-12-15 19:34:11\n * @FilePath: \\Blog-private\\source\\_posts\\Web\\Node\\node.md\n * @Description:\n-->\n<ul>\n<li><a href=\"#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE\">环境配置</a></li>\n<li><a href=\"#%E5%AE%89%E8%A3%85-yarn\">安装 yarn</a></li>\n<li><a href=\"#%E5%8A%A0%E9%80%9F\">加速</a>\n<ul>\n<li><a href=\"#%E6%8D%A2%E9%98%BF%E9%87%8C%E6%BA%90\">换阿里源</a></li>\n<li><a href=\"#%E4%BB%A3%E7%90%86\">代理</a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BE%9D%E8%B5%96%E5%8D%87%E7%BA%A7\">依赖升级</a></li>\n<li><a href=\"#%E5%8F%82%E6%95%B0%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4\">参数及常用命令</a>\n<ul>\n<li><a href=\"#-gglobal\"><code>-g(global)</code></a></li>\n<li><a href=\"#-save\"><code>-save</code></a></li>\n</ul>\n</li>\n<li><a href=\"#local-%E5%85%A8%E5%B1%80%E4%BE%9D%E8%B5%96\">local 全局依赖</a></li>\n<li><a href=\"#%E8%BF%90%E8%A1%8C%E6%8A%A5%E9%94%99\">运行报错</a></li>\n<li><a href=\"#%E6%8E%A8%E8%8D%90%E6%96%87%E7%AB%A0\">推荐文章</a></li>\n<li><a href=\"#node-%E5%A4%9A%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86\">node 多版本管理</a></li>\n<li><a href=\"#%E7%89%88%E6%9C%AC%E6%8B%9F%E5%AE%9A\">版本拟定</a></li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"环境配置 -2\">环境配置</h2>\n<ul>\n<li>\n<p>之前一直在乐此不疲的修改 npm 和 yarn 的 global 路径, 因为每次 Node.js 更新会导致目录索引失效…</p>\n</li>\n<li>\n<p>后来发现,Scoop 完美解决了这个问题! 它使用 <code>Scoop/persist</code> 这个文件夹来挂载数据, 不影响程序本身, 即使更新也不会影响.</p>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"安装 -yarn\">安装 yarn</h2>\n<ul>\n<li>\n<p>Node.js 是 JavaScript 运行环境, 某个项目运行起来会需要一些依赖</p>\n</li>\n<li>\n<p><code>npm/yarn/cnpm</code> 就是管理这些依赖的, 安装 node.js 后自带 npm, 不会带 yarn/cnpm, 这三个中我比较推荐用 <code>yarn</code></p>\n<ol>\n<li>\n<p>yarn 比 npm 更快一些</p>\n</li>\n<li>\n<p>默认锁定版本.</p>\n</li>\n</ol>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>虽然 npm 与 yarn 是同一类东西, 但是可以用 npm 安装 yarn (也可以去官网下载安装, 不过那样更复杂麻烦)</p>\n<p>神不神奇, 因为 npm 和 yarn 本身也是依赖, 但是这样安装的话需要进行一些目录配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g  yarn</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><code>强烈推荐 </code>: 用 Scoop 安装(<code> 零配置</code>)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scoop install yarn</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"加速 -2\">加速</h2>\n<h3 id=\"换阿里源\">换阿里源</h3>\n<ul>\n<li>\n<p>默认源</p>\n<figure class=\"highlight console\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config set registry https://registry.npm.taobao.org</span><br><span class=\"line\">yarn config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>检查</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm<span class=\"built_in\"> config </span><span class=\"builtin-name\">get</span> registry</span><br><span class=\"line\">yarn<span class=\"built_in\"> config </span><span class=\"builtin-name\">get</span> registry</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>也可以直接定位 npm 和 yarn 的配置文件 -&gt; <code>C:\\Users\\ 用户名</code></p>\n<ul>\n<li>这个目录下的<code>.npmrc 和.yarnrc</code></li>\n</ul>\n<hr>\n</li>\n<li>\n<p>问题: 有时会遇到淘宝源某个文件验证失败问题 (Integrity check failed for “@types/body-parser” (computed integrity doesn’t match our records)</p>\n<p>解决办法是: 换回官方的源, 用完之后再换成淘宝源.</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config set registry https:<span class=\"comment\">//registry.npmjs.org</span></span><br><span class=\"line\">yarn config set registry https:<span class=\"comment\">//registry.npmjs.org</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"代理 -2\">代理</h3>\n<ul>\n<li>\n<p>设置代理</p>\n<figure class=\"highlight console\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config set proxy http://127.0.0.1:7890</span><br><span class=\"line\">npm config set https-proxy http://127.0.0.1:7890</span><br><span class=\"line\">yarn config set proxy http://127.0.0.1:7890</span><br><span class=\"line\">yarn config set https-proxy http://127.0.0.1:7890</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>删除代理</p>\n<figure class=\"highlight console\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config delete proxy</span><br><span class=\"line\">npm config delete https-proxy</span><br><span class=\"line\">yarn config delete proxy</span><br><span class=\"line\">yarn config delete https-proxy</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"依赖升级\">依赖升级</h2>\n<ul>\n<li>\n<p>package path 简介</p>\n<ul>\n<li>Node.Js 的包管理器有 <code>npm,cnpm,yarn</code> 等, 通过上面操作后咱就用<code>npm</code></li>\n<li>Node.Js 通过 npm 可以安装 hexo 模块,hexo 里面的插件也是通过 npm 安装</li>\n<li>npm 安装 / 升级 / 移除的模块都在 <code>node_modules/</code> 里面, 不会影响外面的东西</li>\n</ul>\n</li>\n<li>\n<p>npm check &amp;&amp; upgrade(node 插件)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g npm-check</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g npm-upgrade</span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用: 直接<code>npm-check</code>/<code>npm-upgrade</code></li>\n</ul>\n</li>\n<li>\n<p>缓存清理</p>\n<ul>\n<li>会清空 node_cache</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm cache clean --force</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"参数及常用命令\">参数及常用命令</h2>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/lililia/p/10482169.html\">详见 yarn 的常用命令</a></p>\n</blockquote>\n<ul>\n<li>按照 package.json 文件的配置安装 module 到 node_modules/ 里面</li>\n</ul>\n<h3 id=\"g-global\"><code>-g(global)</code></h3>\n<ul>\n<li>全局安装 / 卸载</li>\n<li>注意脚手架如果是全局安装的话, 卸载也要加上 <code>-g</code> 才能全局卸载.</li>\n</ul>\n<hr>\n<h3 id=\"save\"><code>-save</code></h3>\n<ul>\n<li>默认直接 install 会安装进那个目录, 但是不会修改 package.json 文件</li>\n<li>加上 -save 会修改文件, 使下次 npm install 也会安装</li>\n<li>写在前面和后面都可以\n<ul>\n<li><code>npm install --save hexo-tag-aplayer</code></li>\n<li><code>npm install hexo-tag-aplayer --save</code></li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"local- 全局依赖\">local 全局依赖</h2>\n<ul>\n<li>\n<p>npm</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g eslint</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>yarn</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn global add hexo-cli</span><br><span class=\"line\">yarn global add vsce</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>全局依赖路径 </code>: 用 Scoop 安装的, 其数据挂载<code> 摆脱了 C 盘!</code>, npm 与 yarn 管理方式并不全然一样</p>\n<ul>\n<li>\n<p>node-npm: <code>Scoop\\persist\\nodejs\\bin</code></p>\n</li>\n<li>\n<p>yarn: <code>Scoop\\persist\\yarn\\global</code></p>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"运行报错\">运行报错</h2>\n<figure class=\"highlight delphi\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node_modules\\<span class=\"keyword\">pascal</span>-<span class=\"keyword\">case</span>\\dist\\<span class=\"keyword\">index</span>.js:<span class=\"number\">21</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>有可能是依赖有故障了, 其实用不着挨个排除是哪个依赖有问题</p>\n</li>\n<li>\n<p>直接把 <code>node_modules</code> 整个删掉, 然后 <code>npm install</code> 就好了.</p>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"推荐文章 -2\">推荐文章</h2>\n<blockquote>\n<p><a href=\"https://mp.weixin.qq.com/s?__biz=MzIyMDkwODczNw==&amp;mid=2247496886&amp;idx=1&amp;sn=513b863b8468fcfaf8c8e750ce266899&amp;chksm=97c66918a0b1e00eb920d278ae03b10ebe1d765db0e17cb8fe5bc60b737fb3c6af1d96fcf724&amp;mpshare=1&amp;scene=23&amp;srcid=0327cIro7WXAp1jgObHXuKCE&amp;sharer_sharetime=1616807246544&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd\">很多人上来就删除的 package-lock.json，还有这么多你不知道的（深度内容）</a></p>\n</blockquote>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"node- 多版本管理\">node 多版本管理</h2>\n<ul>\n<li>\n<p>主流的有 nvm / n 两种</p>\n<ul>\n<li>n 在 mac 和 linux 上比较好装, 在 win 上就别想了.</li>\n</ul>\n</li>\n<li>\n<p>安装 nvm</p>\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">scoop </span><span class=\"keyword\">install </span>nvm</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>使用 nvm</p>\n<blockquote>\n<p><a href=\"https://segmentfault.com/a/1190000021690038\">node 多版本管理工具——nvm</a></p>\n</blockquote>\n<p>遇到这个报错的话, 是因为环境变量还没起效, 重启电脑</p>\n<figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ERROR </span>open \\settings.txt: The system cannot find the file specified.</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"版本拟定\">版本拟定</h2>\n<ul>\n<li>\n<p>之前一直手动起草 package.json 中的 version, 略显笨拙</p>\n<p>不知道 npm 自带 version 管理功能</p>\n</li>\n<li>\n<p><code>npm version</code></p>\n<blockquote>\n<p>npm version [<newversion> | major | minor | patch | premajor | preminor | prepatch | prerelease [–preid=<prerelease-id>] | from-git]</p>\n</blockquote>\n<p>喏, 可以拟定大小版本.</p>\n<p>一般用这三个: major(大) -&gt; minor(小) -&gt; patch(补丁)</p>\n<p>另外需要注意, 使用之前要 <code>git commit</code>, 不然没法使用.</p>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "node",
                "package",
                "npm",
                "yarn"
            ]
        }
    ]
}