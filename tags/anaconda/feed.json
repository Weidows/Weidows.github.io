{
    "version": "https://jsonfeed.org/version/1",
    "title": "⭐️齐下无贰⭐️ • All posts by \"anaconda\" tag",
    "description": "May all the beauty be bless.✨",
    "home_page_url": "https://weidows.github.io",
    "items": [
        {
            "id": "https://weidows.github.io/post/python/anaconda/",
            "url": "https://weidows.github.io/post/python/anaconda/",
            "title": "👍Anaconda-Python-水漂浅探池深浅.",
            "date_published": "2021-05-20T01:05:02.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2022-06-06 11:00:21\n * @FilePath: \\Blog-private\\source\\_posts\\python\\anaconda.md\n * @Description:\n * @!: *********************************************************************\n-->\n<h1>Anaconda-Python-水漂浅探池深浅.</h1>\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li><a href=\"#anaconda-python-%E6%B0%B4%E6%BC%82%E6%B5%85%E6%8E%A2%E6%B1%A0%E6%B7%B1%E6%B5%85\">Anaconda-Python-水漂浅探池深浅.</a>\n<ul>\n<li><a href=\"#%E7%AE%80%E4%BB%8B\">简介</a></li>\n<li><a href=\"#%E5%AE%89%E8%A3%85-%E9%85%8D%E7%BD%AE\">安装-配置</a>\n<ul>\n<li><a href=\"#linux-%E5%AE%89%E8%A3%85\">linux-安装</a></li>\n<li><a href=\"#%E6%B5%8B%E8%AF%95\">测试</a></li>\n<li><a href=\"#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE\">配置文件位置</a></li>\n<li><a href=\"#%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F-%E4%BB%A3%E7%90%86\">镜像加速-代理</a></li>\n<li><a href=\"#%E4%BF%AE%E6%94%B9%E4%BE%9D%E8%B5%96%E8%B7%AF%E5%BE%84\">修改依赖路径</a></li>\n<li><a href=\"#%E6%BF%80%E6%B4%BB%E7%BB%88%E7%AB%AF\">激活终端</a></li>\n<li><a href=\"#cuda-cudnn\">CUDA-cuDNN</a></li>\n</ul>\n</li>\n<li><a href=\"#pytorch\">PyTorch</a>\n<ul>\n<li><a href=\"#%E5%AE%9E%E4%BE%8B\">实例</a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BE%9D%E8%B5%96\">依赖</a>\n<ul>\n<li><a href=\"#%E6%9B%B4%E6%96%B0%E4%BE%9D%E8%B5%96\">更新依赖</a></li>\n<li><a href=\"#install-%E6%8A%A5%E9%94%99\">install-报错</a></li>\n<li><a href=\"#%E5%AF%BC%E5%87%BA-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96\">导出-安装依赖</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%8A%A5%E9%94%99\">报错</a>\n<ul>\n<li><a href=\"#%E5%AE%89%E8%A3%85%E6%8A%A5%E9%94%99\">安装报错</a></li>\n<li><a href=\"#%E7%8E%AF%E5%A2%83%E4%B8%8D%E4%B8%80%E8%87%B4\">环境不一致</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"简介-4\">简介</h2>\n<blockquote>\n<p>anaconda 官网: <a href=\"https://www.anaconda.com/products/individual\">https://www.anaconda.com/products/individual</a></p>\n</blockquote>\n<ul>\n<li>\n<p>简单来说,它是 Python 的一个发行版,其中打包了很多附加工具,比如 <code>Jupyter</code>,<code>conda</code> 等等</p>\n<ul>\n<li>\n<p>可以理解为 anaconda 内置了 python,所以设备上安装的其他 Python 环境完全可以卸载掉了</p>\n</li>\n<li>\n<p>Python 一般会自带 pip 这个包管理器,anaconda 也不例外; 而且 anaconda 还带有另一个更强大的包管理器: <code>conda</code></p>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"https://www.zhihu.com/question/395145313\">请问大神们，pip install 和 conda install 有什么区别吗？</a></p>\n</blockquote>\n</li>\n</ul>\n<blockquote>\n<p>此文章很清晰的介绍了 Anaconda 的安装使用: <a href=\"https://zhuanlan.zhihu.com/p/75717350\">https://zhuanlan.zhihu.com/p/75717350</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"安装-配置\">安装-配置</h2>\n<ul>\n<li>\n<p>可以选择官网下载安装包安装,我这里是用的 <code>scoop </code>安装的</p>\n<ul>\n<li>\n<p>下载-&gt;安装-&gt;配置环境变量-&gt;改变运行环境, 在 scoop 中一步就可以完成,很方便 (官方的库中没有这个软件,需要添加其他库,<code>dorado</code>)</p>\n</li>\n<li>\n<p>这样安装避免了很多麻烦和错误,非常推荐!</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>小毛病</p>\n<p>anaconda 会把 scoop 里的环境识别为两个 (但实际上就一个)</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSnUD.png\" alt=\"20211002190135\" />\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"linux-安装\">linux-安装</h3>\n<p>linux 中可以通过 官方 shell 或者 AUR 安装, 但是安装后并没有 export 到 PATH,需要一步:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo cp /opt/anaconda/etc/profile.d/conda.sh /etc/profile.d/</span><br></pre></td></tr></table></figure>\n<p>另外这样装上后还会因为目录权限不够,无法安装依赖,需要提权</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod -R 777 /opt/anaconda/</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"测试\">测试</h3>\n<ul>\n<li>\n<p>一个很关键的步骤: <code>重启电脑</code>. 如果没重启的话,环境变量有可能不生效,肯定无法正常打开.</p>\n</li>\n<li>\n<p>然后测试: 能显示出来东西就对了</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">conda</span> --version</span><br><span class=\"line\">conda <span class=\"literal\">info</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>安装后开始菜单会出来这么几个东西:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4hCu.png\" alt=\"20210520093618\" />\n<p>第一个就是 anaconda 主体;二三是终端,不用管它;四和六是附带的第三方软件.</p>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>点第一个,会弹出几次黑框,然后出现下面面板就没问题了.</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4D41.png\" alt=\"20210520094007\" />\n</li>\n<li>\n<p>报错,无法打开:</p>\n<ol>\n<li>\n<p>尝试管理员模式</p>\n</li>\n<li>\n<p>检查系统是不是开了 http 代理 (挂-了-梯-子?),把 http 模式换成 PAC 模式试试,我遇到这个错误可以这样解决</p>\n</li>\n</ol>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"配置文件位置\">配置文件位置</h3>\n<ul>\n<li>\n<p>Windows 中:</p>\n<ul>\n<li>\n<p>conda: <code>~\\.condarc 和 .conda\\</code></p>\n</li>\n<li>\n<p>pip: <code>~\\pip\\pip.ini</code></p>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"镜像加速-代理\">镜像加速-代理</h3>\n<blockquote>\n<p>清华镜像站给了教程: <a href=\"https://mirror.tuna.tsinghua.edu.cn/help/anaconda/\">Anaconda 镜像使用帮助</a></p>\n</blockquote>\n<ul>\n<li>\n<p>通过 navigator 添加进设置,或者直接修改 ~/.condarc</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAdNv.png\" alt=\"20210520095331\" />\n</li>\n<li>\n<details>\n  <summary> 如果官方给的 https 协议的,会报错 </summary>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PS D:\\Game\\Github\\Blog-<span class=\"keyword\">private</span>&gt; conda search cuda</span><br><span class=\"line\">Loading channels: failed</span><br><span class=\"line\"></span><br><span class=\"line\">CondaHTTPError: HTTP <span class=\"number\">000</span> CONNECTION FAILED <span class=\"keyword\">for</span> url &lt;<span class=\"keyword\">https</span>://mirrors.bfsu.edu.cn/anaconda/pkgs/main/win<span class=\"number\">-64</span>/repodata.json&gt;</span><br><span class=\"line\">Elapsed: -</span><br><span class=\"line\"></span><br><span class=\"line\">An HTTP error occurred when trying <span class=\"built_in\">to</span> retrieve this <span class=\"built_in\">URL</span>.</span><br><span class=\"line\">HTTP errors are often intermittent, <span class=\"keyword\">and</span> <span class=\"keyword\">a</span> simple retry will <span class=\"built_in\">get</span> you <span class=\"keyword\">on</span> <span class=\"title\">your</span> <span class=\"title\">way</span>.</span><br><span class=\"line\"><span class=\"string\">&#x27;https://mirrors.bfsu.edu.cn/anaconda/pkgs/main/win-64&#x27;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<ul>\n<li>\n<p>找了半天教程,发现只有一篇有效: <code>https -&gt; http</code></p>\n<blockquote>\n<p><a href=\"https://segmentfault.com/q/1010000008668178\">Anaconda 使用 conda 连接网络出现错误</a></p>\n</blockquote>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">channels:</span><br><span class=\"line\">  - defaults</span><br><span class=\"line\">show_channel_urls: true</span><br><span class=\"line\">default_channels:</span><br><span class=\"line\">  - http:<span class=\"regexp\">//mi</span>rrors.tuna.tsinghua.edu.cn<span class=\"regexp\">/anaconda/</span>pkgs/main</span><br><span class=\"line\">  - http:<span class=\"regexp\">//mi</span>rrors.tuna.tsinghua.edu.cn<span class=\"regexp\">/anaconda/</span>pkgs/r</span><br><span class=\"line\">  - http:<span class=\"regexp\">//mi</span>rrors.tuna.tsinghua.edu.cn<span class=\"regexp\">/anaconda/</span>pkgs/msys2</span><br><span class=\"line\">custom_channels:</span><br><span class=\"line\">  conda-forge: http:<span class=\"regexp\">//mi</span>rrors.tuna.tsinghua.edu.cn<span class=\"regexp\">/anaconda/</span>cloud</span><br><span class=\"line\">  msys2: http:<span class=\"regexp\">//mi</span>rrors.tuna.tsinghua.edu.cn<span class=\"regexp\">/anaconda/</span>cloud</span><br><span class=\"line\">  bioconda: http:<span class=\"regexp\">//mi</span>rrors.tuna.tsinghua.edu.cn<span class=\"regexp\">/anaconda/</span>cloud</span><br><span class=\"line\">  menpo: http:<span class=\"regexp\">//mi</span>rrors.tuna.tsinghua.edu.cn<span class=\"regexp\">/anaconda/</span>cloud</span><br><span class=\"line\">  pytorch: http:<span class=\"regexp\">//mi</span>rrors.tuna.tsinghua.edu.cn<span class=\"regexp\">/anaconda/</span>cloud</span><br><span class=\"line\">  pytorch-lts: http:<span class=\"regexp\">//mi</span>rrors.tuna.tsinghua.edu.cn<span class=\"regexp\">/anaconda/</span>cloud</span><br><span class=\"line\">  simpleitk: http:<span class=\"regexp\">//mi</span>rrors.tuna.tsinghua.edu.cn<span class=\"regexp\">/anaconda/</span>cloud</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>最近又发现一个导致此错误的问题: 挂-木弟,关掉试试.</p>\n</li>\n</ul>\n</details>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>pip</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/</span><br><span class=\"line\">pip config set global.index-url https：//pypi.tuna.tsinghua.edu.cn/simple/</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"keyword\">global</span>]</span><br><span class=\"line\"><span class=\"keyword\">index</span>-url = http://mirrors.aliyun.com/pypi/simple/</span><br><span class=\"line\"><span class=\"keyword\">trusted</span>-host = mirrors.aliyun.com</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"修改依赖路径\">修改依赖路径</h3>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/maggieq8324/p/12099068.html\">pip install 默认安装路径修改</a></p>\n</blockquote>\n<ul>\n<li>\n<p>anaconda 安装后默认情况下 pip/conda 的库会堆在 anaconda 里面(所以一般不用动了)</p>\n</li>\n<li>\n<p>依赖路径</p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">python -m site</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight taggerscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">❯   python -m site</span><br><span class=\"line\">sys.path = [</span><br><span class=\"line\">    &#x27;D:<span class=\"symbol\">\\\\</span>Game<span class=\"symbol\">\\\\</span>Github<span class=\"symbol\">\\\\</span>Blog-private&#x27;,</span><br><span class=\"line\">    &#x27;D:<span class=\"symbol\">\\\\</span>Game<span class=\"symbol\">\\\\</span>Scoop<span class=\"symbol\">\\\\</span>apps<span class=\"symbol\">\\\\</span>anaconda3<span class=\"symbol\">\\\\</span>current<span class=\"symbol\">\\\\</span>python38.zip&#x27;,</span><br><span class=\"line\">    &#x27;D:<span class=\"symbol\">\\\\</span>Game<span class=\"symbol\">\\\\</span>Scoop<span class=\"symbol\">\\\\</span>apps<span class=\"symbol\">\\\\</span>anaconda3<span class=\"symbol\">\\\\</span>current<span class=\"symbol\">\\\\</span>DLLs&#x27;,</span><br><span class=\"line\">    &#x27;D:<span class=\"symbol\">\\\\</span>Game<span class=\"symbol\">\\\\</span>Scoop<span class=\"symbol\">\\\\</span>apps<span class=\"symbol\">\\\\</span>anaconda3<span class=\"symbol\">\\\\</span>current<span class=\"symbol\">\\\\</span>lib&#x27;,</span><br><span class=\"line\">    &#x27;D:<span class=\"symbol\">\\\\</span>Game<span class=\"symbol\">\\\\</span>Scoop<span class=\"symbol\">\\\\</span>apps<span class=\"symbol\">\\\\</span>anaconda3<span class=\"symbol\">\\\\</span>current&#x27;,</span><br><span class=\"line\">    &#x27;D:<span class=\"symbol\">\\\\</span>Game<span class=\"symbol\">\\\\</span>Scoop<span class=\"symbol\">\\\\</span>apps<span class=\"symbol\">\\\\</span>anaconda3<span class=\"symbol\">\\\\</span>current<span class=\"symbol\">\\\\</span>lib<span class=\"symbol\">\\\\</span>site-packages&#x27;,</span><br><span class=\"line\">    &#x27;D:<span class=\"symbol\">\\\\</span>Game<span class=\"symbol\">\\\\</span>Scoop<span class=\"symbol\">\\\\</span>apps<span class=\"symbol\">\\\\</span>anaconda3<span class=\"symbol\">\\\\</span>current<span class=\"symbol\">\\\\</span>lib<span class=\"symbol\">\\\\</span>site-packages<span class=\"symbol\">\\\\</span>locket-0.2.1-py3.8.egg&#x27;,</span><br><span class=\"line\">    &#x27;D:<span class=\"symbol\">\\\\</span>Game<span class=\"symbol\">\\\\</span>Scoop<span class=\"symbol\">\\\\</span>apps<span class=\"symbol\">\\\\</span>anaconda3<span class=\"symbol\">\\\\</span>current<span class=\"symbol\">\\\\</span>lib<span class=\"symbol\">\\\\</span>site-packages<span class=\"symbol\">\\\\</span>win32&#x27;,</span><br><span class=\"line\">    &#x27;D:<span class=\"symbol\">\\\\</span>Game<span class=\"symbol\">\\\\</span>Scoop<span class=\"symbol\">\\\\</span>apps<span class=\"symbol\">\\\\</span>anaconda3<span class=\"symbol\">\\\\</span>current<span class=\"symbol\">\\\\</span>lib<span class=\"symbol\">\\\\</span>site-packages<span class=\"symbol\">\\\\</span>win32<span class=\"symbol\">\\\\</span>lib&#x27;,</span><br><span class=\"line\">    &#x27;D:<span class=\"symbol\">\\\\</span>Game<span class=\"symbol\">\\\\</span>Scoop<span class=\"symbol\">\\\\</span>apps<span class=\"symbol\">\\\\</span>anaconda3<span class=\"symbol\">\\\\</span>current<span class=\"symbol\">\\\\</span>lib<span class=\"symbol\">\\\\</span>site-packages<span class=\"symbol\">\\\\</span>Pythonwin&#x27;,</span><br><span class=\"line\">]</span><br><span class=\"line\">USER_BASE: &#x27;C:<span class=\"symbol\">\\\\</span>Users<span class=\"symbol\">\\\\</span>29845<span class=\"symbol\">\\\\</span>AppData<span class=\"symbol\">\\\\</span>Roaming<span class=\"symbol\">\\\\</span>Python&#x27; (exists)</span><br><span class=\"line\">USER_SITE: &#x27;C:<span class=\"symbol\">\\\\</span>Users<span class=\"symbol\">\\\\</span>29845<span class=\"symbol\">\\\\</span>AppData<span class=\"symbol\">\\\\</span>Roaming<span class=\"symbol\">\\\\</span>Python<span class=\"symbol\">\\\\</span>Python38<span class=\"symbol\">\\\\</span>site-packages&#x27; (doesn&#x27;t exist)</span><br><span class=\"line\">ENABLE_USER_SITE: False</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>配置文件路径 (非必要不然不要修改,此处可以更改上面的 USER_BASE/USER_SITE,但实测并未生效)</p>\n<figure class=\"highlight mel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">python</span> -m site -<span class=\"keyword\">help</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"激活终端\">激活终端</h3>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda <span class=\"keyword\">init</span> 终端名(powershell)</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"CUDA-cuDNN\">CUDA-cuDNN</h3>\n<ul>\n<li>\n<p>这两个是为了调用显卡性能,加速训练.</p>\n<p>需要注册 NVIDIA 账号才能下载.</p>\n<blockquote>\n<p><a href=\"https://developer.nvidia.com/cuda-zone\">下载并安装 CUDA</a> <br>\n<a href=\"https://developer.nvidia.com/cudnn\">下载并安装 cuDNN Library</a></p>\n</blockquote>\n<hr>\n</li>\n<li>\n<p>通过 scoop 安装 CUDA (很有可能安装有问题,即使安装成功也是不能使用的)</p>\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">scoop </span><span class=\"keyword\">install </span>cuda</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>测试了一下, cuDNN Library 也是必须的,没配置的话会报错:</p>\n<figure class=\"highlight vbnet\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">RuntimeError:</span> cuDNN <span class=\"keyword\">error</span>: CUDNN_STATUS_EXECUTION_FAILED</span><br></pre></td></tr></table></figure>\n<p><code>配置方法</code>: 解压,把<code>bin\\</code>添加进 path</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"PyTorch\">PyTorch</h2>\n<blockquote>\n<p><a href=\"https://zhuanlan.zhihu.com/p/54350088\">windows10 下安装 GPU 版 pytorch 简明教程</a> <br>\n<a href=\"https://pytorch.org/get-started/locally\">PyTorch 官网</a> <br>\n<a href=\"https://zhuanlan.zhihu.com/p/106394476\">利用 Conda 安装深度学习框架 Pytorch</a></p>\n</blockquote>\n<ul>\n<li>\n<p>安装 (with CUDA 版本):</p>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">conda</span> install pytorch==<span class=\"number\">1</span>.<span class=\"number\">9</span>.<span class=\"number\">0</span> torchvision==<span class=\"number\">0</span>.<span class=\"number\">10</span>.<span class=\"number\">0</span> torchaudio==<span class=\"number\">0</span>.<span class=\"number\">9</span>.<span class=\"number\">0</span> cudatoolkit=<span class=\"number\">11</span>.<span class=\"number\">3</span> -c pytorch -c conda-forge</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>测试 (以下图方式进入 <code>Open with python</code>) :</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVL8KS.png\" alt=\"20210520190432\" />\n<p>测试下方命令就可以了</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import torch</span><br><span class=\"line\">x = torch<span class=\"selector-class\">.rand</span>(<span class=\"number\">5</span>, <span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">print</span><span class=\"params\">(x)</span></span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>预期结果: (说明 pytouch 没得问题)</p>\n<figure class=\"highlight inform7\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tensor(<span class=\"comment\">[<span class=\"comment\">[0.3380, 0.3845, 0.3217]</span>,</span></span><br><span class=\"line\"><span class=\"comment\">        <span class=\"comment\">[0.8337, 0.9050, 0.2650]</span>,</span></span><br><span class=\"line\"><span class=\"comment\">        <span class=\"comment\">[0.2979, 0.7141, 0.9069]</span>,</span></span><br><span class=\"line\"><span class=\"comment\">        <span class=\"comment\">[0.1449, 0.1132, 0.1375]</span>,</span></span><br><span class=\"line\"><span class=\"comment\">        <span class=\"comment\">[0.4675, 0.3947, 0.1426]</span>]</span>)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"实例\">实例</h3>\n<blockquote>\n<p>通过一段音频,合成相似声音的项目: <a href=\"https://github.com/CorentinJ/Real-Time-Voice-Cloning\">CorentinJ/Real-Time-Voice-Cloning</a></p>\n</blockquote>\n<ul>\n<li>\n<p>CUDA: on,可以看到 python 调用了 <code>CPU+GPU</code></p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAAGr.png\" alt=\"20210521102521\" />\n</li>\n<li>\n<p>深度学习项目吃显存好离谱啊!</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVA6R6.png\" alt=\"20210521104118\" />\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"依赖\">依赖</h2>\n<h3 id=\"更新依赖\">更新依赖</h3>\n<figure class=\"highlight n1ql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda <span class=\"keyword\">update</span> --<span class=\"keyword\">all</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"install-报错\">install-报错</h3>\n<p>conda install pydotplus 时遇到报错:</p>\n<figure class=\"highlight basic\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">RemoveError: &#x27;requests&#x27; is a dependency of conda and cannot be removed from ...</span></span><br></pre></td></tr></table></figure>\n<p>遇到这报错, 更新下 conda,然后再安装</p>\n<figure class=\"highlight n1ql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda <span class=\"keyword\">update</span> --<span class=\"keyword\">force</span> conda</span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"导出-安装依赖\">导出-安装依赖</h3>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/chekongfu/article/details/83187591\">pip 和 conda 批量导出、安装组件(requirements.txt)</a></p>\n</blockquote>\n<ul>\n<li>\n<p>安装依赖</p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip <span class=\"keyword\">install</span> -r requirements.txt</span><br><span class=\"line\">conda <span class=\"keyword\">install</span> --<span class=\"keyword\">file</span> requirements.txt (尽量不要用,有很多问题)</span><br><span class=\"line\">conda env create -f env.yaml</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>导出依赖</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip <span class=\"keyword\">freeze</span> &gt; requirements.txt</span><br><span class=\"line\">conda list -e &gt; requirements.txt</span><br><span class=\"line\">conda env export &gt; env.yaml</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<details>\n  <summary> conda/pip 导出的 requirement.txt 有可能有个问题 </summary>\n<hr>\n<ul>\n<li>\n<p>pip 导出的,以及安装报错</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">anaconda-client @ file:///C:/ci/anaconda-client_1624480273070/work</span><br><span class=\"line\">anaconda-navigator==2.1.0</span><br><span class=\"line\">anyio==3.3.4</span><br><span class=\"line\">appdirs==1.4.4</span><br><span class=\"line\">argon2-cffi @ file:///C:/ci/argon2-cffi_1613037959010/work</span><br><span class=\"line\">async-generator @ file:///home/ktietz/src/ci/async_generator_1611927993394/work</span><br><span class=\"line\">attrs @ file:///tmp/build/80754af9/attrs_1620827162558/work</span><br><span class=\"line\">audioread==2.1.9</span><br><span class=\"line\">Babel @ file:///tmp/build/80754af9/babel_1620871417480/work</span><br><span class=\"line\">backcall @ file:///home/ktietz/src/ci/backcall_1611930011877/work</span><br><span class=\"line\">backports.functools-lru-cache @ file:///tmp/build/80754af9/backports.functools_lru_cache_1618170165463/work</span><br><span class=\"line\">backports.tempfile @ file:///home/linux1/recipes/ci/backports.tempfile_1610991236607/work</span><br><span class=\"line\">backports.weakref==1.0.post1</span><br><span class=\"line\">beautifulsoup4 @ file:///home/linux1/recipes/ci/beautifulsoup4_1610988766420/work</span><br><span class=\"line\">bleach @ file:///tmp/build/80754af9/bleach_1626470256873/work</span><br><span class=\"line\">brotlipy==0.7.0</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">❯ pip install -r .\\pip-list.bak</span><br><span class=\"line\">Looking in indexes: http://mirrors.aliyun.com/pypi/simple/</span><br><span class=\"line\">Processing c:\\ci\\anaconda-client_1624480273070\\work</span><br><span class=\"line\"><span class=\"keyword\">ERROR: </span>Could not install packages due to an OSError: [Errno 2] No such file or directory: &#x27;C:\\\\ci\\\\anaconda-client_1624480273070\\\\work&#x27;</span><br></pre></td></tr></table></figure>\n<p>解决办法就是硬匹配所有 <code> @ file:</code> 把后面的删掉.</p>\n<hr>\n</li>\n</ul>\n</details>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"报错-2\">报错</h2>\n<h3 id=\"安装报错\">安装报错</h3>\n<figure class=\"highlight console\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">╭─    D:\\Repo\\Weidows\\python   master                              ✔  22:53:48  ─╮</span><br><span class=\"line\">╰─ python</span><br><span class=\"line\">Fatal Python error: init_import_site: Failed to import the site module</span><br><span class=\"line\">Python runtime state: initialized</span><br><span class=\"line\">ModuleNotFoundError: No module named &#x27;site&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">Current thread 0x00002a54 (most recent call first):</span><br><span class=\"line\">&lt;no Python frame&gt;</span><br></pre></td></tr></table></figure>\n<p>由于使用 scoop 安装的,我以为是我自己环境的错误,后来发现是因为安装脚本中 <code>persist</code> 软链接会导致 anaconda 内部错误</p>\n<p>这个库 <code>anaconda3_chawyehsu</code> 给的我启发,虽然这个安装脚本也不并不很好用</p>\n<p>于是我在自己库中添加了一个: <a href=\"https://github.com/Weidows-projects/scoop-3rd/blob/main/bucket/anaconda3.json\">https://github.com/Weidows-projects/scoop-3rd/blob/main/bucket/anaconda3.json</a></p>\n<hr>\n<h3 id=\"环境不一致\">环境不一致</h3>\n<ul>\n<li>\n<p>之前遇到个问题苦恼了很久:</p>\n<p>有一个 py 脚本我想通过 bat 脚本调用执行,但是一直报错</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Traceback</span> (most recent call last):</span><br><span class=\"line\">  <span class=\"built_in\">File</span> <span class=\"string\">&quot;D:\\Game\\Scoop\\apps\\anaconda3\\current\\lib\\site-packages\\urllib3\\connectionpool.py&quot;</span>, line <span class=\"number\">688</span>, in urlopen</span><br><span class=\"line\">    conn = self._get_conn(timeout=pool_timeout)</span><br><span class=\"line\">  <span class=\"built_in\">File</span> <span class=\"string\">&quot;D:\\Game\\Scoop\\apps\\anaconda3\\current\\lib\\site-packages\\urllib3\\connectionpool.py&quot;</span>, line <span class=\"number\">280</span>, in _get_conn</span><br><span class=\"line\">    <span class=\"keyword\">return</span> conn <span class=\"keyword\">or</span> self._new_conn()</span><br><span class=\"line\">  <span class=\"built_in\">File</span> <span class=\"string\">&quot;D:\\Game\\Scoop\\apps\\anaconda3\\current\\lib\\site-packages\\urllib3\\connectionpool.py&quot;</span>, line <span class=\"number\">979</span>, in _new_conn</span><br><span class=\"line\">    raise <span class=\"built_in\">SSLError</span>(</span><br><span class=\"line\">urllib3.exceptions.SSLError: Can<span class=\"number\">&#x27;</span>t connect to HTTPS URL because the SSL <span class=\"keyword\">module</span> is <span class=\"keyword\">not</span> available.</span><br></pre></td></tr></table></figure>\n<p>大致意思就是缺少依赖,但是我已经装好依赖了,而且通过 PowerShell 可以正常运行</p>\n</li>\n<li>\n<p>后来突然想到是 python 环境没开:</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda <span class=\"built_in\">activate</span> base</span><br></pre></td></tr></table></figure>\n<p>事情不大,烦恼不小</p>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "python",
                "anaconda"
            ]
        }
    ]
}