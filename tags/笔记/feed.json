{
    "version": "https://jsonfeed.org/version/1",
    "title": "⭐️齐下无贰⭐️ • All posts by \"笔记\" tag",
    "description": "May all the beauty be bless.✨",
    "home_page_url": "https://weidows.github.io",
    "items": [
        {
            "id": "https://weidows.github.io/post/experience/basic/%E9%80%9A%E4%BF%A1%E6%8A%80%E6%9C%AF/",
            "url": "https://weidows.github.io/post/experience/basic/%E9%80%9A%E4%BF%A1%E6%8A%80%E6%9C%AF/",
            "title": "👽通信-信息论-开坑自埋",
            "date_published": "2022-01-06T16:23:14.000Z",
            "content_html": "<h1>通信-信息论-开坑自埋</h1>\n<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2022-04-20 23:15:55\n * @FilePath: \\Blog-private\\source\\_posts\\experience\\basic\\通信技术.md\n * @Description:\n * @!: *********************************************************************\n-->\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li><a href=\"#%E9%80%9A%E4%BF%A1-%E4%BF%A1%E6%81%AF%E8%AE%BA-%E5%BC%80%E5%9D%91%E8%87%AA%E5%9F%8B\">通信-信息论-开坑自埋</a>\n<ul>\n<li><a href=\"#wifi\">WIFI</a>\n<ul>\n<li><a href=\"#%E5%90%8D%E5%AD%97\">名字</a></li>\n<li><a href=\"#%E9%A2%91%E6%AE%B5\">频段</a></li>\n<li><a href=\"#%E8%B0%83%E5%88%B6%E6%89%8B%E6%AE%B5\">调制手段</a></li>\n<li><a href=\"#%E6%A0%87%E5%87%86%E5%88%B6%E5%AE%9A\">标准制定</a></li>\n<li><a href=\"#%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E9%99%85\">理论与实际</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2\">傅里叶变换</a>\n<ul>\n<li><a href=\"#%E5%BC%95%E8%A8%80\">引言</a></li>\n<li><a href=\"#fourier-transform\">fourier-transform</a></li>\n<li><a href=\"#%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8-%E9%99%A4%E5%99%AA\">实际应用-除噪</a></li>\n<li><a href=\"#inverse-fourier\">inverse-fourier</a></li>\n<li><a href=\"#%E8%B4%A8%E5%BF%83%E4%B8%8E%E5%82%85%E9%87%8C%E5%8F%B6%E5%85%AC%E5%BC%8F%E7%9A%84%E5%85%B3%E7%B3%BB\">质心与傅里叶公式的关系</a></li>\n<li><a href=\"#%E7%BC%BA%E7%82%B9\">缺点</a></li>\n<li><a href=\"#%E7%9F%AD%E6%97%B6%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2\">短时傅里叶变换</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%9E%81%E5%8C%96%E7%A0%81\">极化码</a>\n<ul>\n<li><a href=\"#%E4%BF%A1%E6%81%AF%E7%86%B5-%E5%A6%82%E4%BD%95%E5%BA%A6%E9%87%8F%E4%BF%A1%E6%81%AF\">信息熵-如何度量信息</a>\n<ul>\n<li><a href=\"#%E5%93%88%E7%89%B9%E8%8E%B1\">哈特莱</a></li>\n<li><a href=\"#%E9%A6%99%E5%86%9C\">香农</a></li>\n<li><a href=\"#%E5%9F%BA%E5%B0%BC%E7%B3%BB%E6%95%B0\">基尼系数</a></li>\n<li><a href=\"#%E6%AC%A7%E6%8B%89%E5%BC%8F-%E4%B8%A4%E7%82%B9%E5%88%86%E5%B8%83\">欧拉式-两点分布</a></li>\n<li><a href=\"#%E7%9B%B8%E5%AF%B9%E7%86%B5\">相对熵</a></li>\n<li><a href=\"#%E5%8D%95%E4%BD%8D\">单位</a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BF%A1%E9%81%93%E5%AE%B9%E9%87%8F-%E6%9C%80%E5%A4%A7%E4%BA%92%E4%BF%A1%E6%81%AF\">信道容量-最大互信息</a></li>\n<li><a href=\"#%E9%A6%99%E5%86%9C%E6%9E%81%E9%99%90\">香农极限</a></li>\n<li><a href=\"#%E6%9E%81%E5%8C%96%E7%A0%81-polarcodes\">极化码-PolarCodes</a></li>\n</ul>\n</li>\n<li><a href=\"#%E9%9F%B3%E9%A2%91\">音频</a>\n<ul>\n<li><a href=\"#%E6%9C%89-%E6%97%A0%E6%8D%9F%E5%8E%8B%E7%BC%A9\">有-无损压缩</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%80%9F%E7%89%A9%E8%A1%A8\">借物表</a></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>draft 此文章点子来自: <a href=\"https://www.youtube.com/watch?v=4w6_zWSrZw4\">你不了解的「WiFi」从技术原理 应用 讲到行业的未来 一个视频彻底讲清楚 「硬核无线技术」系列视频 WiFi 篇</a><br>\n一串听下来发现对于通信这方面的知识还是很欠缺, 甚至有些家常知识点都没太了解.</p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"WIFI\">WIFI</h2>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/4w6_zWSrZw4\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n<h3 id=\"名字\">名字</h3>\n<p>音响领域有高保真 HIFI (High Fidelity), 之后出现的无线起名 WIFI (Wireless Fidelity),</p>\n<p>Science Fiction -&gt; SciFi (发音与上面类似,一方面考虑好记)</p>\n<hr>\n<h3 id=\"频段\">频段</h3>\n<p>2.4G 频段: 2.4~2.4835 GHz</p>\n<p>5G 频段: 5.15~5.85 GHz</p>\n<p>每个频段可分为若干信道(频宽从 1~160MHz 不等), 满足多连接/多设备<code>尽可能</code>不互相干扰下使用.</p>\n<ul>\n<li>\n<p>在小区/宿舍里经常发现信号范围内有一排别人的 WIFI/热点</p>\n<p>甭管有没有密码, 必然会对我们当前设备使用 WIFI 无线电信号<code>产生干扰</code></p>\n<p>2.4G 频段窄而且电磁波穿透力比 5G 频段强,另外默认用 2.4G 频段的设备多</p>\n<p>所以, 把自己的设备切换使用为 5G 频段可以<code>一定程度上抗干扰</code></p>\n</li>\n<li>\n<p>其实也不止 WIFI 影响 WIFI,还要好多设备也是用 2.4G 频段通信会有干扰:</p>\n<p>蓝牙,无线鼠标,无线录音麦…etc</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"调制手段\">调制手段</h3>\n<p>何为调制?</p>\n<blockquote>\n<p>把数字信号转为电磁波通过天线发送, 接收端再把电磁波解为数字信号的过程,如下图<br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPAl9.png\" alt=\"20220107015502\" /> <br>\n<a href=\"https://www.txrjy.com/thread-1080059-1-1.html\">https://www.txrjy.com/thread-1080059-1-1.html</a></p>\n</blockquote>\n<p>编/解码过程用到<a href=\"#%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2\">傅里叶变换和逆变</a></p>\n<ul>\n<li>\n<p>从 802.11b 到 802.11ax 应用的三种调制方式:</p>\n<p>802.11 (eight O two eleven, 0 读 O, dot 不用读)</p>\n<p>DSSS (D triple S, 直接序列扩频)</p>\n<p>FHSS (调频)</p>\n<p>OFDM (Orthogonal Frequency-Division Multiplexing. <code>正交频分复用</code>/同频分解多调制)</p>\n</li>\n<li>\n<p>由于民用频宽范围比较有限,DSSS 这种依靠大频宽保证可靠性的技术不适用,逐渐过渡到了 OFDM:</p>\n<p>这种调制方式大幅降低所需频宽, 图中上面为 OFDM</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAkJA.png\" alt=\"20220107020556\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"标准制定\">标准制定</h3>\n<p>上面所提到的 802.11 xxx 就是无线电协会所制定的 WIFI 标准, 其每次更新是为了规划未来一段时间的 WIFI 走向, 避免各做各的无法正常通信.</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPvZm.png\" alt=\"20220107023524\" />\n<p>802.11ac 引入波束赋形 Beam Forming, 追踪设备并把信号尽可能聚束到此方向</p>\n<p>2019 年协会才把标准整体命名为 WIFI1-WIFI6, 调制方式 OFDM -&gt; OFDMA(4GLTE 蜂窝网络的调制方式)</p>\n<p>WIFI 发展越加偏向/近似蜂窝网络</p>\n<hr>\n<h3 id=\"理论与实际\">理论与实际</h3>\n<ul>\n<li>\n<p>无线通信理论速率与实际速率差距蛮大的:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV47CT.png\" alt=\"20220107030252\" />\n<p>生活中都有经验,离路由器越近越好</p>\n</li>\n<li>\n<p>用不用追新设备?</p>\n<p>先上结论: <code>不用</code></p>\n<p>我们大多数人不咋组内网,组内网的话也是插线而不是走 WIFI,路由器唯一线路就是走公网</p>\n<p>路由器跑的快不快在于宽带套餐,100-300M 宽带还是绝大部分家庭/学校的选择,而出于 2013 年的 WIFI5 标准完完全全够跑满</p>\n<p>WIFI6 标准的路由器可以认为, 杀鸡用牛刀</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"傅里叶变换\">傅里叶变换</h2>\n<h3 id=\"引言\">引言</h3>\n<blockquote>\n<p><a href=\"https://mp.weixin.qq.com/s/iD4aLGwQuYVzXfFkfMfVxg\">傅里叶变换的精彩讲解</a> <br>\n简单来说傅里叶变换的作用: <code>从混合的波(声波/电磁波)中分离出某个频率的波</code></p>\n<p>高数确实是一门神秘且棘手的学科,所以听到这个傅里叶变换心理也是略有抵触的. <br>\n后话: 不做应用的单纯的数学雀食烦…但是结合应用的话就有趣起来了 <code>\\(^o^)/</code></p>\n</blockquote>\n<ul>\n<li>\n<p>多个不同频率的波叠加</p>\n<p>傅里叶变换就是在研究如何从混合波中分析出其组成波 (类似从混合色中分析原色)</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4UWD.png\" alt=\"20220113234230\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"fourier-transform\">fourier-transform</h3>\n<ul>\n<li>\n<p>对于某个混合波,我们想知道它是<code>哪几种波</code>混合的结果,如何得知?</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVL9X0.png\" alt=\"20220114170236\" />\n<ol>\n<li>\n<p>我们把波形绕成环,并且可以调整 <code>cycles/second -&gt; Frequency</code> 的比例</p>\n</li>\n<li>\n<p>视圆环图像质量均匀,取<code>&quot;质心 center of mass&quot;</code> 的坐标 (x,y)</p>\n</li>\n<li>\n<p>取 x 坐标为 Y 轴, Frequency 为 X 轴作图</p>\n</li>\n<li>\n<p>可见 2Hz+3Hz 的波,Frequency 在 2 和 3 出出现明显波峰</p>\n</li>\n</ol>\n<hr>\n</li>\n<li>\n<p>分别叠加也符合:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLaMS.png\" alt=\"20220114172006\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"实际应用-除噪\">实际应用-除噪</h3>\n<ul>\n<li>\n<p>比如现有声波里有一个已知高频噪音 (蚊子),但我们无法从声波中直接过滤掉,如何去掉它?</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4Kxo.png\" alt=\"20220114174154\" />\n<ol>\n<li>\n<p>做傅里叶变换</p>\n</li>\n<li>\n<p>找到那个频率的波峰并通过某种方法干掉它</p>\n</li>\n<li>\n<p>傅里叶反变换得到没有蚊子叫的声波</p>\n</li>\n</ol>\n</li>\n</ul>\n<hr>\n<h3 id=\"inverse-fourier\">inverse-fourier</h3>\n<p>对傅里叶变换的图像再次变换可以<code>大致</code>获得原始波</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVANO9.png\" alt=\"20220114174856\" />\n<hr>\n<h3 id=\"质心与傅里叶公式的关系\">质心与傅里叶公式的关系</h3>\n<ul>\n<li>\n<p>&quot;质心&quot;实际指的就是公式变换的结果,下面分别为离散/连续的计算公式</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtUo6.png\" alt=\"20220114175932\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVASN1.png\" alt=\"20220114180011\" />\n<hr>\n</li>\n<li>\n<p>需要注意的是,上面公式与傅里叶变换公式有小小的区别:</p>\n<p>上面的公式只是在求 <code>单点</code>,实际傅里叶变换公式不需要除以时间</p>\n<p>使得对应频率的 x 根据时间 t 倍增延长 (也就是变换后产生波峰的原因)</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLYsv.png\" alt=\"20220114182317\" />\n<hr>\n</li>\n<li>\n<p>比如某频率的波持续 3 秒,其对应大小乘 3 倍</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVFTHD.png\" alt=\"20220114182518\" />\n<p>持续时间越长,对应频率的波峰越大</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"缺点\">缺点</h3>\n<p>比如有一段 2s 的声波,第一秒为 1Hz,第二秒为 2Hz</p>\n<p>通过傅里叶变换只能识别出存在 1Hz 和 2Hz 的波,并可以比较持续时间,但并不能分析其在时间轴上的定位</p>\n<p>针对其不能时频联合分析的缺点, 出现了 <code>短时傅里叶变换</code></p>\n<hr>\n<h3 id=\"短时傅里叶变换\">短时傅里叶变换</h3>\n<blockquote>\n<p><a href=\"https://www.eet-china.com/mp/a77376.html\">一文道破傅里叶变换的本质，优缺点一目了然</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"极化码\">极化码</h2>\n<style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style><div class=\"bbplayer\"><iframe class=\"bbplayer\" id=\"mmedia-XPSnjxGGTZvRIcEm\" src=\"https://player.bilibili.com/player.html?bvid=BV1fq4y1g7hq&page=1&high_quality=1&danmaku=true\" allowfullscreen=\"allowfullscreen\" scrolling=\"no\" border=\"0\" frameborder=\"0\" framespacing=\"0\" sandbox=\"allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups\"></iframe></div><script> document.getElementById(\"mmedia-XPSnjxGGTZvRIcEm\").style.height=document.getElementById(\"mmedia-XPSnjxGGTZvRIcEm\").scrollWidth*0.76+\"px\";\n    window.onresize = function(){\n      document.getElementById(\"mmedia-XPSnjxGGTZvRIcEm\").style.height=document.getElementById(\"mmedia-XPSnjxGGTZvRIcEm\").scrollWidth*0.76+\"px\";\n    }; </script>\n<h3 id=\"信息熵-如何度量信息\">信息熵-如何度量信息</h3>\n<p><a href=\"../../../public-post/notebook/ML#%E4%B8%A4%E7%82%B9%E5%88%86%E5%B8%83%E4%BF%A1%E6%81%AF%E7%86%B5\">所用代码及结果展示</a></p>\n<h4 id=\"哈特莱\">哈特莱</h4>\n<p>哈特莱首先提出使用对数 log 来描述信息</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>后称信息熵</mtext><mo>:</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>n</mi><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>10</mn></msub><mi>s</mi><mo>=</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>10</mn></msub><msup><mi>s</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">后称信息熵: H(p) = n\\log_{10} s = \\log_{10} s^{n}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord cjk_fallback\">后称信息熵</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9386em;vertical-align:-0.2441em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.207em;\"><span style=\"top:-2.4559em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2441em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9585em;vertical-align:-0.2441em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.207em;\"><span style=\"top:-2.4559em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2441em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>信息符合加法: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>h</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>h</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">h(x,y)=h(x)+h(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>概率符合乘法: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>p</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mi>p</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">p(x,y)=p(x)p(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>log 可以把乘法变加法: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>log</mi><mo>⁡</mo><mi>p</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>log</mi><mo>⁡</mo><mi>p</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mi>p</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>log</mi><mo>⁡</mo><mi>p</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>log</mi><mo>⁡</mo><mi>p</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\log p(x,y) = \\log p(x)p(y) = \\log p(x)+\\log p(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>操作原理就是 <code>通过概率间接量化信息</code>, 哈特莱这里底数取得是 10, 下面香农改为了 2 (更适合计算机计算)</p>\n<hr>\n<h4 id=\"香农\">香农</h4>\n<ul>\n<li>\n<p>香农首先提出信息熵来度量信息,可以粗略解释为:</p>\n<p>n 个连续的 “是(1)” 或 “否(0)” 可以消除 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">2^{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6644em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span></span> 比特内容的不确定性(疑义度)</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>信息熵</mtext><mo>:</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo>−</mo><mi>k</mi><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>p</mi><mi>i</mi></msub><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">信息熵: H(p) = -k \\sum_{i=1}^{n} p_{i} \\log_{2} p_{i}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord cjk_fallback\">信息熵</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.9291em;vertical-align:-1.2777em;\"></span><span class=\"mord\">−</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6514em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.207em;\"><span style=\"top:-2.4559em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2441em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n</li>\n<li>\n<p>比如:</p>\n<blockquote>\n<p>常用的汉字大约有 7000 个,假设每个字使用概率相等,至少需要用 13 比特表示才能完全消除一个字的疑义度 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>13</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{13}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">13</span></span></span></span></span></span></span></span></span></span></span></span>=8192 &gt; 7000) <br>\n那么在此条件下每个字的信息熵为 13 比特 <br>\n现实中每个字的使用频率概率, 出现场景, 上下文关联都会影响实际的信息熵 (比如文盲说话的信息熵不如学者高) <br>\n<a href=\"https://blog.csdn.net/chenKFKevin/article/details/72074250\">信息的度量——信息熵</a></p>\n</blockquote>\n</li>\n<li>\n<p>关于为什么前面带了个 <code>-k</code></p>\n<blockquote>\n<p>与直觉相反, 一个事件发生概率越大,实际所带的信息越小<br>\n比如太阳从东边升起,没什么信息含量; 换为从西边升起,即使概率无限接近 0, 它所含信息权重也是很高的 <sup id='cite_ref-3'><a href=\"#cite_note-3\">[3]</a></sup></p>\n</blockquote>\n<p><img src=\"https://www.helloimg.com/images/2022/04/11/RtspVm.png\" alt=\"\"></p>\n</li>\n<li>\n<p>具体计算一个:</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mn>0.1</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.1</mn><mo>⋅</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mn>0.1</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.33</mn><mspace linebreak=\"newline\"></mspace><mi>H</mi><mo stretchy=\"false\">(</mo><mn>0.2</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.2</mn><mo>⋅</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mn>0.2</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.46</mn><mspace linebreak=\"newline\"></mspace><mi>H</mi><mo stretchy=\"false\">(</mo><mn>0.3</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.3</mn><mo>⋅</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mn>0.3</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0.52</mn></mrow><annotation encoding=\"application/x-tex\">H(0.1) = 0.1 \\cdot log_2 (0.1) = 0.33 \\\\\nH(0.2) = 0.2 \\cdot log_2 (0.2) = 0.46 \\\\\nH(0.3) = 0.3 \\cdot log_2 (0.3) = 0.52\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord\">0.1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0.1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">0.1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0.33</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord\">0.2</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0.2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">0.2</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0.46</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord\">0.3</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0.3</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">0.3</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0.52</span></span></span></span></span></p>\n</li>\n</ul>\n<hr>\n<h4 id=\"基尼系数\">基尼系数</h4>\n<p><img src=\"https://www.helloimg.com/images/2022/04/13/R4tdlM.png\" alt=\"\"></p>\n<p>我们把曲线 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mi>log</mi><mo>⁡</mo><mi>P</mi></mrow><annotation encoding=\"application/x-tex\">- \\log P</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span></span></span></span> 换为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>−</mo><mi>P</mi></mrow><annotation encoding=\"application/x-tex\">1-P</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span></span></span></span>, 得到的就是基尼系数</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>基尼系数</mtext><mo>:</mo><mi>G</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>p</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msubsup><mi>p</mi><mi>i</mi><mn>2</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">基尼系数: G(p)\n= \\sum_{i=1}^{n} p_i (1-p_i)\n= 1- \\sum_{i=1}^{n} p_{i}^2\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord cjk_fallback\">基尼系数</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.9291em;vertical-align:-1.2777em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6514em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.9291em;vertical-align:-1.2777em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6514em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-2.453em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n<p>基尼系数与熵是十分近似的, 在决策树中可以用基尼系数来代替熵 (效率更高)</p>\n<p><a href=\"https://www.bilibili.com/video/BV16L411w7oQ?p=6&amp;t=3716.0\">第二定义: 社会财富分配</a></p>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h4 id=\"欧拉式-两点分布\">欧拉式-两点分布</h4>\n<ul>\n<li>\n<p>两点分布的熵:</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>令</mtext><mi>P</mi><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn><mo>−</mo><mi>p</mi><mspace width=\"2em\"/><mi>p</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mi>p</mi><mspace linebreak=\"newline\"></mspace><mtext> </mtext><mspace linebreak=\"newline\"></mspace><mtable rowspacing=\"0.25em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mo>−</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy=\"false\">)</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>p</mi><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mi>p</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>G</mi><mi>i</mi><mi>n</mi><mi>i</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy=\"false\">)</mo><mo>⋅</mo><mo stretchy=\"false\">[</mo><mn>1</mn><mo>−</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo><mo>+</mo><mi>p</mi><mo>⋅</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>2</mn><mi>p</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding=\"application/x-tex\">令 P(0) = 1-p \\qquad p(1) = p\n\n\\\\ \\ \\\\\n\n\\begin{aligned}\n  H(p)\n  &amp;= - (1-p) \\log_2 (1-p) - p \\log_2 p \\\\\n\n  Gini(p)\n  &amp;= (1-p) \\cdot [1-(1-p)] + p \\cdot (1-p) \\\\\n  &amp;= 2p(1-p)\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord cjk_fallback\">令</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:2em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0em;\"></span><span class=\"mspace\"> </span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:4.5em;vertical-align:-2em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">ini</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span></span></span><span style=\"top:-1.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">−</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.207em;\"><span style=\"top:-2.4559em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2441em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.207em;\"><span style=\"top:-2.4559em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2441em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">p</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)]</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span></span></span><span style=\"top:-1.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2em;\"><span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p><img src=\"https://www.helloimg.com/images/2022/04/13/R4tKlh.png\" alt=\"\"></p>\n<p>可见在概率为 0.5 时,信息熵 (不确定度) 最高</p>\n</li>\n</ul>\n<hr>\n<h4 id=\"相对熵\">相对熵</h4>\n<p>也叫互熵/交叉熵/鉴别信息/Kullback 熵/KL 散度/K-L 距离…</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>D</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">∣</mi><mi>q</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>p</mi><mi>i</mi></msub><mi>log</mi><mo>⁡</mo><mfrac><msub><mi>p</mi><mi>i</mi></msub><msub><mi>q</mi><mi>i</mi></msub></mfrac></mrow><annotation encoding=\"application/x-tex\">D(p||q) = \\sum_{i=1}^{n} p_{i} \\log{\\frac{p_i}{q_i}}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mord\">∣∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.9291em;vertical-align:-1.2777em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6514em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1076em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></span></p>\n<hr>\n<h4 id=\"单位\">单位</h4>\n<ul>\n<li>\n<p>经典熵底数为 2,单位为 bit</p>\n<p>在做数据分析时有用 e 为底数的定义, 单位为 nat (奈特)</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo>−</mo><mi>k</mi><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>p</mi><mi>i</mi></msub><mi>ln</mi><mo>⁡</mo><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">H(p) = -k \\sum_{i=1}^{n} p_{i} \\ln p_{i}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.9291em;vertical-align:-1.2777em;\"></span><span class=\"mord\">−</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6514em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">ln</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"信道容量-最大互信息\">信道容量-最大互信息</h3>\n<ul>\n<li>\n<p>信道容量(Channel Capacity) 也叫最大互信息</p>\n<blockquote>\n<p>互信息: <code>它是一个随机变量包含另一个随机变量信息量的度量</code></p>\n</blockquote>\n<p>比如一条河从 A-&gt;B 端, 但只有 70% 的河水能流到 B,其他的河水流失了; 那么在这里 A-&gt;B 端河水的互信息为 70%</p>\n<p>当然, 互信息的度量单位并不是百分比, 概念上也略有偏颇</p>\n<blockquote>\n<p>视频中的例子: X-&gt;Y 传递信息熵为 <code>H(X)</code> 的信息, 传递过程中丢失/不能还原的信息熵为 <code>H(X|Y)</code>, 那么</p>\n</blockquote>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>互信息</mtext><mo>:</mo><mi>I</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mi mathvariant=\"normal\">∣</mi><mi>Y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mi mathvariant=\"normal\">∣</mi><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">互信息: I(X|Y) = H(X) - H(X|Y)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord cjk_fallback\">互信息</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<hr>\n</li>\n<li>\n<p>什么是信道/信道容量? 举个栗子:</p>\n<p>有个工厂里有好多流水线从 A-&gt;B 处输送产品; 每条流水线可以理解为是一个信道</p>\n<p>流水线运输速度太快会使产品不合格,需要限制在 T 时间内运输 N(T) 件产品才可以保证质量; 同样道理通信时一味地加速发送会使通信状态变差,也需要限制在一定范围之内,<code>这个范围就是信道容量</code></p>\n<p>(理论条件下,单位时间内可以传过去的信息量)</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>信道容量</mtext><mo>:</mo><mi>C</mi><mo>=</mo><msub><mrow><mi mathvariant=\"normal\">Lim</mi><mo>⁡</mo></mrow><mrow><mi>T</mi><mo>→</mo><mi mathvariant=\"normal\">∞</mi></mrow></msub><mfrac><mrow><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo stretchy=\"false\">)</mo></mrow><mi>T</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">信道容量: C=\\operatorname{Lim}_{T \\rightarrow \\infty} \\frac{\\log N(T)}{T}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord cjk_fallback\">信道容量</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.113em;vertical-align:-0.686em;\"></span><span class=\"mop\"><span class=\"mop\"><span class=\"mord mathrm\">Lim</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mrel mtight\">→</span><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<hr>\n</li>\n</ul>\n<h3 id=\"香农极限\">香农极限</h3>\n<p>实际条件下,通信接收方会因为丢包/信号干扰/磁场等<code>噪声</code>无法接收到部分信息,导致无法真实达到信道容量</p>\n<p>香农提出通过合适的编码,信道容量 C 可以被尽可能的无限逼近,但对于大于 C 的速率不成立.<code>即香农极限</code>(香农提出,后人证明)</p>\n  <img src=\"https://www.helloimg.com/images/2022/02/27/GV4j4v.png\" alt=\"20220203184654\" />\n<hr>\n<ul>\n<li>\n<p>经典教材计算机网络也有提及</p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/03/Gh3Pnz.png\" alt=\"\"></p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/03/Gh3a7A.png\" alt=\"Gh3a7A.png\"></p>\n</li>\n</ul>\n<hr>\n<h3 id=\"极化码-PolarCodes\">极化码-PolarCodes</h3>\n<ul>\n<li>\n<p>核心思想: 通过异或操作把信息分流</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPxut.png\" alt=\"20220203221617\" />\n<p>通过异或操作,把信道一/二两个实际信道转换成信道<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>W</mi><mo>−</mo></msup><mi mathvariant=\"normal\">/</mi><msup><mi>W</mi><mo>+</mo></msup></mrow><annotation encoding=\"application/x-tex\">W^-/W^+</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0213em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span></span></span></span></span></span></span></span></p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSFtR.png\" alt=\"20220203222548\" />\n<p>这里可能会疑惑信道<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>W</mi><mo>+</mo></msup></mrow><annotation encoding=\"application/x-tex\">W^+</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7713em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span></span></span></span></span></span></span></span>第四种情况 “U2=U1=Y1” 中 U1 从何得知?</p>\n<p>实际上这里我们让<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>W</mi><mo>−</mo></msup></mrow><annotation encoding=\"application/x-tex\">W^-</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7713em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span></span></span></span></span></span></span></span>信道不传输信息,U1 是通信双方预先约定好的内容</p>\n<hr>\n</li>\n<li>\n<p>当处理的码长(信道数)足够多时,好信道的互信息会无限逼近 1 <sup id='cite_ref-1'><a href=\"#cite_note-1\">[1]</a></sup></p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4Ent.png\" alt=\"20220203224853\" />\n</blockquote>\n<p>当然凡事不是越多越好:</p>\n<ol>\n<li>\n<p>这里信息传输的条件是<code>信道连接能保持稳定</code></p>\n</li>\n<li>\n<p>每增加信道数,需要做的处理指数级增长</p>\n</li>\n</ol>\n<hr>\n</li>\n</ul>\n<p>具体如何编码/构建, 详见论文 <sup id='cite_ref-1'><a href=\"#cite_note-1\">[1]</a></sup> (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mtext>🥵</mtext><mrow><mi>h</mi><mi>a</mi><mi>r</mi><mi>d</mi></mrow><mrow><mi>t</mi><mi>o</mi><mi>o</mi></mrow></msubsup></mrow><annotation encoding=\"application/x-tex\">🥵 ^{too}_{hard}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0767em;vertical-align:-0.2831em;\"></span><span class=\"mord\"><span class=\"mord\">🥵</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7936em;\"><span style=\"top:-2.4169em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ha</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal mtight\">d</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mathnormal mtight\">oo</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2831em;\"><span></span></span></span></span></span></span></span></span></span></p>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"音频\">音频</h2>\n<h3 id=\"有-无损压缩\">有-无损压缩</h3>\n<p>对于大部分人的<code>木耳</code>来说,完全听不出来差别; 极小部分人<code>金耳</code>才能听出来 (年轻,耳朵从出生没受过损伤)</p>\n<p>可以试试双盲测试: <sup id='cite_ref-2'><a href=\"#cite_note-2\">[2]</a></sup></p>\n<p><a href=\"https://www.zhihu.com/question/20699962\">耳机厂商为什么不把耳机煲好了再卖？</a></p>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表-25\">借物表</h2>\n<p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href=\"https://res-www.zte.com.cn/mediares/magazine/publication/com_cn/article/201901/cn201901004.pdf\">“太极混一”——极化码原理及 5G 应用</a></p>\n<p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href=\"http://www.erji.net/forum.php?mod=viewthread&amp;tid=1598502\">【双盲测试】你听得出有损和无损的区别么</a></p>\n<p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href=\"https://www.bilibili.com/video/BV16L411w7oQ?p=6\">https://www.bilibili.com/video/BV16L411w7oQ?p=6</a></p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记",
                "通信",
                "音频",
                "傅里叶变换",
                "极化码",
                "信息论"
            ]
        },
        {
            "id": "https://weidows.github.io/post/others/Better-Chinese/",
            "url": "https://weidows.github.io/post/others/Better-Chinese/",
            "title": "🤷‍♂️国人-不懂-国语.?",
            "date_published": "2021-09-02T10:03:26.000Z",
            "content_html": "<h1>国人-不懂-国语.?</h1>\n<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2022-04-20 23:46:53\n * @FilePath: \\Blog-private\\source\\_posts\\others\\Better-Chinese.md\n * @Description:\n * @!: *********************************************************************\n-->\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li><a href=\"#%E5%9B%BD%E4%BA%BA-%E4%B8%8D%E6%87%82-%E5%9B%BD%E8%AF%AD\">国人-不懂-国语.?</a>\n<ul>\n<li><a href=\"#%E6%AD%A3%E6%96%87\">正文</a></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>兄弟文章: <a href=\"../Better-English\">🧀Better-English-4-U</a></p>\n</blockquote>\n<ul>\n<li>有些字眼/黑话属实难以揉捏透,看来看去大脑都高潮了.</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"正文\">正文</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">名称</th>\n<th style=\"text-align:center\">释义</th>\n<th style=\"text-align:center\">链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">狗推</td>\n<td style=\"text-align:center\">是对于在菲律宾从事网络博彩推广工作的人一种带有轻蔑性质的称呼。</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">预发环境-影子流量</td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"><a href=\"https://segmentfault.com/a/1190000039805146\">谈一谈线上事故的故事</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">炼丹</td>\n<td style=\"text-align:center\">一般来说就是用计算机训练项目</td>\n<td style=\"text-align:center\">很有趣的回答: <a href=\"https://zhuanlan.zhihu.com/p/23781756?utm_source=qq&amp;utm_medium=social&amp;utm_oi=807874781918658560\">深度学习·炼丹入门</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">灰度测试</td>\n<td style=\"text-align:center\">功能/业务性测试,一般不是由程序员负责的东西</td>\n<td style=\"text-align:center\"><a href=\"https://zhuanlan.zhihu.com/p/124912164\">灰度测试是什么意思呢？</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">幂等性</td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"><a href=\"https://blog.csdn.net/miachen520/article/details/91039661\">什么是幂等性</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">部署/上线</td>\n<td style=\"text-align:center\">部署: 把代码从开发机丢到服务器上跑; 上线: 代码在测试环境跑没问题,然后迁到生产环境</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">穿透</td>\n<td style=\"text-align:center\">前端所展示的内容与需求/实际不一致 (比如我 100 岁,后端给的是 10 岁)</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">扁平化管理</td>\n<td style=\"text-align:center\"><img src=\"https://www.helloimg.com/images/2022/02/27/GVSEnc.png\" alt=\"20220127160425\" /></td>\n<td style=\"text-align:center\"><a href=\"https://www.zhihu.com/question/37902193\">什么是扁平化管理？</a></td>\n</tr>\n</tbody>\n</table>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记"
            ]
        },
        {
            "id": "https://weidows.github.io/post/others/Better-English/",
            "url": "https://weidows.github.io/post/others/Better-English/",
            "title": "🧀Better-English-4-U",
            "date_published": "2021-07-26T01:53:32.000Z",
            "content_html": "<h1>Better-English-4-U</h1>\n<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2022-04-20 23:42:35\n * @FilePath: \\Blog-private\\source\\_posts\\others\\Better-English.md\n * @Description:\n * @!: *********************************************************************\n-->\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li><a href=\"#better-english-4-u\">Better-English-4-U</a>\n<ul>\n<li><a href=\"#%E5%8D%95%E8%AF%8D\">单词</a></li>\n<li><a href=\"#%E7%AC%A6%E5%8F%B7\">符号</a></li>\n<li><a href=\"#%E7%9F%AD%E8%AF%AD\">短语</a></li>\n<li><a href=\"#%E9%A2%86%E5%9F%9F\">领域</a></li>\n<li><a href=\"#%E9%A1%B9%E7%9B%AE\">项目</a></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>开发时总有几个英文单词/短语,<code>今天背过,明天就忘.</code></p>\n</li>\n<li>\n<p>嘛,记下来吧.</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"单词\">单词</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">英</th>\n<th style=\"text-align:left\">汉</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">reverse</td>\n<td style=\"text-align:left\">反转, 相反, 相反的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">reserve</td>\n<td style=\"text-align:left\">v. 预订（座位等）；<code>储备</code>；拥有（某种权利）；留出（一部分稍后使用）</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">retrieve</td>\n<td style=\"text-align:left\">vt. [计] <code>检索</code>；恢复；重新得到, vi. 找回猎物, n. [计] 检索；恢复，取回</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">init / initialize</td>\n<td style=\"text-align:left\"><code>初始化</code> [ɪˈnɪʃəlaɪz]</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">generate</td>\n<td style=\"text-align:left\"><code>编译</code>/生成 [ˈdʒenəreɪt]</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">deploy</td>\n<td style=\"text-align:left\">vt. 配置；展开；使疏开, vi. <code>部署</code>；展开, n. 部署</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">domain</td>\n<td style=\"text-align:left\">n. 领域；<code>域名</code>；产业；地产, n. (Domain)人名；(英、法)多曼</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">gateway</td>\n<td style=\"text-align:left\">n. 门；<code>网关</code>；方法；通道；途径</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">fetch</td>\n<td style=\"text-align:left\"><code>获取</code> [fetʃ]</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">modify</td>\n<td style=\"text-align:left\">vt. <code>修改</code>，修饰；更改, vi. 修改</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">query</td>\n<td style=\"text-align:left\">n. 疑问，质问；疑问号 ；[计] <code>查询</code>, vt. 询问；对……表示疑问, vi. 询问；表示怀疑</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">trigger</td>\n<td style=\"text-align:left\">n. 扳机；起因，引起反应的事；<code>触发器</code>，引爆装置, v. 触发，引起</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">i18n</td>\n<td style=\"text-align:left\">（其来源是英文单词 internationalization 的首末字符 i 和 n，18 为中间的字符数）是“国际化”的简称。</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">grid</td>\n<td style=\"text-align:left\">n. 网格；格子，栅格；输电网</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">router</td>\n<td style=\"text-align:left\">n. [计] 路由器；刳刨者</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">protocol</td>\n<td style=\"text-align:left\">n. 礼仪，礼节；国际议定书，<code>协议</code>；条约草案</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">dynamic</td>\n<td style=\"text-align:left\">动态的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">API</td>\n<td style=\"text-align:left\"><img src=\"https://www.helloimg.com/images/2022/02/27/GVAhlh.png\" alt=\"application programming interface 应用程序接口\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">scaffolds</td>\n<td style=\"text-align:left\">脚手架</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">specific</td>\n<td style=\"text-align:left\">adj. 特殊的，<code>特定的</code>；明确的；详细的；[药] 具有特效的, n. 特性；细节；特效药</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">persist</td>\n<td style=\"text-align:left\">vi. 存留，坚持 (<code>持久化</code>)；持续，固执 vt. 坚持说，反复说</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">bind</td>\n<td style=\"text-align:left\">vi. <code>结合</code>；装订；有约束力；过紧, vt. 绑；约束；装订；包扎；凝固, n. 捆绑；困境；</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">split</td>\n<td style=\"text-align:left\">vt. <code>分离</code>；使分离；劈开；离开；分解 vi. 离开；被劈开；断绝关系 n. 劈开；裂缝</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">extract</td>\n<td style=\"text-align:left\">vt. 取出；<code>提取/解压</code>；榨取；摘除, n. 提取物；摘录；摘要, n. (Extract)人名；(英)埃斯特利（人名）</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">compact</td>\n<td style=\"text-align:left\">adj. 紧密的；<code>压缩的</code>；简洁的；紧凑的, n. 压缩；简洁；紧凑</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">compress</td>\n<td style=\"text-align:left\">vt. <code>压缩</code>；压紧；使缩小, n. 压缩；压紧</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">ambiguous</td>\n<td style=\"text-align:left\">adj. 模糊不清的，模棱两可的；<code>不明确的</code>，不明朗的；引起歧义的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">horizontal</td>\n<td style=\"text-align:left\">adj. <code>水平的</code>；地平线的；同一阶层的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">vertical</td>\n<td style=\"text-align:left\">adj. <code>垂直的</code>，直立的；[解剖] 头顶的，顶点的；[植]纵长的，直上的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">blocklist / allowlist</td>\n<td style=\"text-align:left\">黑 / 白名单, blacklist / whitelist 这样的带有歧视色彩, 避免使用.</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">marvelous</td>\n<td style=\"text-align:left\">adj. 了不起的；非凡的；令人惊异的；不平常的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">strategy</td>\n<td style=\"text-align:left\">n.战略；战略部署；战略学</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">dynamic</td>\n<td style=\"text-align:left\">adj. 动态的；动力的；动力学的；有活力的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">authentication</td>\n<td style=\"text-align:left\">n. 证明；鉴定；证实</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">claim</td>\n<td style=\"text-align:left\">v. 宣称；要求，索取；引起（注意）；获得；夺去（生命）；索赔（钱财）；需要</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">init -&gt; initialize</td>\n<td style=\"text-align:left\">vt. 初始化</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">widget</td>\n<td style=\"text-align:left\">n. 装饰物；小机械；小部件；未定名的主要新产品</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">demo -&gt; demonstration</td>\n<td style=\"text-align:left\">n. 演示；演示课；演示片；演示会</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">refactor</td>\n<td style=\"text-align:left\">n. &amp; vt. 重构</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">tutorial</td>\n<td style=\"text-align:left\">n. （大学导师）个别指导时间，辅导课；辅导材料，使用说明书；软件教程</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">assignment</td>\n<td style=\"text-align:left\">n. 作业，任务；（工作等的）分配，指派；（财产、权利的）转让</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">enhance</td>\n<td style=\"text-align:left\">v. 增强，提高，改善</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">extraction</td>\n<td style=\"text-align:left\">n. 取出，提炼；血统</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">allocate</td>\n<td style=\"text-align:left\">v. 分配，分派，划拨</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">primary</td>\n<td style=\"text-align:left\">adj. 主要的，首要的；&lt;英&gt;小学教育的，初级教育的；初级的，原发性的；最基本的，最根本的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">definite</td>\n<td style=\"text-align:left\">一定的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">capacity</td>\n<td style=\"text-align:left\">容量</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">given</td>\n<td style=\"text-align:left\">已知的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">algorithm</td>\n<td style=\"text-align:left\">算法</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">curriculum</td>\n<td style=\"text-align:left\">课程</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">dummy</td>\n<td style=\"text-align:left\">假人 / 仿制品 / 傀儡 / 哑巴</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">vector</td>\n<td style=\"text-align:left\">向量,矢量</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">matrix</td>\n<td style=\"text-align:left\">矩阵</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">sequence</td>\n<td style=\"text-align:left\">序列</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">regression</td>\n<td style=\"text-align:left\">回归</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">classification</td>\n<td style=\"text-align:left\">分类</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">recursion</td>\n<td style=\"text-align:left\">递归</td>\n</tr>\n</tbody>\n</table>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"符号\">符号</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">英</th>\n<th style=\"text-align:left\">符号</th>\n<th style=\"text-align:center\">英</th>\n<th style=\"text-align:left\">符号</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">underscore</td>\n<td style=\"text-align:left\">_</td>\n<td style=\"text-align:center\">comma</td>\n<td style=\"text-align:left\">,</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">dollar</td>\n<td style=\"text-align:left\">$</td>\n<td style=\"text-align:center\">back-quote</td>\n<td style=\"text-align:left\">`</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">percent</td>\n<td style=\"text-align:left\">%</td>\n<td style=\"text-align:center\">single-quote</td>\n<td style=\"text-align:left\">’</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">tilde</td>\n<td style=\"text-align:left\">~</td>\n<td style=\"text-align:center\">double-quote</td>\n<td style=\"text-align:left\">&quot;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">at</td>\n<td style=\"text-align:left\">@</td>\n<td style=\"text-align:center\">left/right-parenthesis</td>\n<td style=\"text-align:left\">( / )</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">hash</td>\n<td style=\"text-align:left\">#</td>\n<td style=\"text-align:center\">left/right-brace</td>\n<td style=\"text-align:left\">{ / }</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">dot/period</td>\n<td style=\"text-align:left\">.</td>\n<td style=\"text-align:center\">left/right-bracket</td>\n<td style=\"text-align:left\">[ / ]</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">forward-slash</td>\n<td style=\"text-align:left\">/</td>\n<td style=\"text-align:center\">left/right-angle</td>\n<td style=\"text-align:left\">&lt; / &gt;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">star/asterisk</td>\n<td style=\"text-align:left\">*</td>\n<td style=\"text-align:center\">caret</td>\n<td style=\"text-align:left\">^</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">plus</td>\n<td style=\"text-align:left\">+</td>\n<td style=\"text-align:center\">back-slash</td>\n<td style=\"text-align:left\">\\</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">dash/minus</td>\n<td style=\"text-align:left\">-</td>\n<td style=\"text-align:center\">forward-slash</td>\n<td style=\"text-align:left\">/</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">equal</td>\n<td style=\"text-align:left\">=</td>\n<td style=\"text-align:center\">question-mark</td>\n<td style=\"text-align:left\">?</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">colon</td>\n<td style=\"text-align:left\">:</td>\n<td style=\"text-align:center\">exclamation-mark</td>\n<td style=\"text-align:left\">!</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">semi-colon</td>\n<td style=\"text-align:left\">;</td>\n<td style=\"text-align:center\">and/ampersand</td>\n<td style=\"text-align:left\">&amp;</td>\n</tr>\n</tbody>\n</table>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"短语\">短语</h2>\n<ul>\n<li>\n<p>how2 , html2pug , P2P</p>\n<p>2 -&gt; two -&gt; to , 也就是说:</p>\n<p>how to , html to pug , Peer to Peer 这种意思</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">英</th>\n<th style=\"text-align:left\">汉</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">B2B</td>\n<td style=\"text-align:left\">business to business,商家对商家</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">C2C</td>\n<td style=\"text-align:left\">consumer to consumer,个人对个人</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">B2C</td>\n<td style=\"text-align:left\">business to consumer,商家对个人</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">O2O</td>\n<td style=\"text-align:left\">online to offline,线上到线下</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p><a href=\"https://www.zhihu.com/question/20171789\">C2C、O2O、B2B、B2C 的区别在哪里？</a></p>\n</blockquote>\n</li>\n<li>\n<p>4U , 4coder , SLF4J</p>\n<p>4 -&gt; four -&gt; for</p>\n<p>for you , for coder</p>\n<p>Simple Logging Facade for Java</p>\n</li>\n<li>\n<p>xxx-dl</p>\n<p>dl -&gt; download</p>\n<p>比如 YouTube-dl</p>\n</li>\n</ul>\n<hr>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"领域\">领域</h2>\n<ul>\n<li>\n<p>网络</p>\n<ul>\n<li>\n<p>LAN - 局域网 (Local Area Network)</p>\n</li>\n<li>\n<p>WAN - 广域网 (Wide Area Network)</p>\n</li>\n<li>\n<p>WLAN - 无线局域网 (Wireless LAN)</p>\n</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"https://juejin.cn/post/6844904084504313863?utm_source=gold_browser_extension\">QPS、TPS、并发用户数、吞吐量关系</a> <br>\n<a href=\"https://www.ruanyifeng.com/blog/2017/07/iaas-paas-saas.html\">IaaS，PaaS，SaaS 的区别</a> <br>\n<a href=\"https://www.zhihu.com/question/19908990\">UED、UCD、UE、UI、交互设计这 5 个名词的概念有哪些区别？职位分别有什么不同？</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"项目\">项目</h2>\n<p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href=\"https://github.com/rd2coding/Awesome-Tech-Words\">https://github.com/rd2coding/Awesome-Tech-Words</a></p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "推荐",
                "笔记",
                "english"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/7/",
            "url": "https://weidows.github.io/post/Java/Web/7/",
            "title": "🥼JavaWeb~(柒)文件/邮件传输.",
            "date_published": "2021-04-30T16:20:54.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-02 15:29:43\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\7.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93\">文件传输</a></li>\n<li><a href=\"#%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81\">邮件发送</a>\n<ul>\n<li><a href=\"#%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6\">简单邮件</a></li>\n<li><a href=\"#%E5%A4%8D%E6%9D%82%E9%82%AE%E4%BB%B6\">复杂邮件</a></li>\n</ul>\n</li>\n<li><a href=\"#lombok\">Lombok</a></li>\n<li><a href=\"#%E6%B3%A8%E5%86%8C-%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6-demo\">注册-发送邮件 demo</a></li>\n</ul>\n<h2 id=\"笔记代码-8\"><a href=\"https://github.com/Weidows/Weidows/blob/060600b2a9e13afa7c2f0e5d887d98b5d59318ce/JavaWeb/Last\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"文件传输\">文件传输</h2>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/melodyjerry/p/13549108.html\">参考: 【狂神说 Java】JavaWeb-文件上传</a></p>\n</blockquote>\n<ul>\n<li>\n<p>利用到了 Commons-io,通过 http 和 servlet 传输流文件.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.fileupload.FileItem;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.fileupload.FileUploadException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.UUID;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* Servlet implementation class FileServlet</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FileServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> <span class=\"number\">1L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class=\"line\">      <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 判断上传的文件普通表单还是带文件的表单</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!ServletFileUpload.isMultipartContent(request)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;<span class=\"comment\">//终止方法运行,说明这是一个普通的表单,直接返回</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 创建上传文件的保存路径，建议在WEB-INF路径下，安全，用户无法直接访问上传的文件</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">tmpPath</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getServletContext().getRealPath(<span class=\"string\">&quot;/WEB-INF/tmp&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">File</span> <span class=\"variable\">tempFile</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(tmpPath);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!tempFile.exists()) &#123;</span><br><span class=\"line\">      tempFile.mkdir();<span class=\"comment\">//创建临时目录</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//创建上传文件的保存路径,建议在WEB-INF路径下,安全,用户无法直接访间上传的文件;</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">uploadPath</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getServletContext().getRealPath(<span class=\"string\">&quot;/WEB-INF/upload&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">File</span> <span class=\"variable\">uploadFile</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(uploadPath);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!uploadFile.exists()) &#123;</span><br><span class=\"line\">      uploadFile.mkdir(); <span class=\"comment\">//创建这个月录</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">      处理上传的文件,一般都需要通过流来获取,我们可以使用 request.getInputStream(),原生态的文件上传流获取,十分麻烦</span></span><br><span class=\"line\"><span class=\"comment\">      建议使用 Apache的文件上传组件来实现, common-fileUpload,它需要 commons-io组件</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 获取ServletFileUpload</span></span><br><span class=\"line\">      <span class=\"type\">ServletFileUpload</span> <span class=\"variable\">fileUpload</span> <span class=\"operator\">=</span> getServletFileUpload(tempFile);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 处理上传文件</span></span><br><span class=\"line\">      <span class=\"comment\">// 把前端请求解析，封装成FileItem对象，需要从ServletFileUpload对象中获取</span></span><br><span class=\"line\">      <span class=\"type\">boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> uploadParseRequest(fileUpload, request, uploadPath);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// Servlet请求转发消息</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (flag) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Servlet请求转发消息</span></span><br><span class=\"line\">        request.setAttribute(<span class=\"string\">&quot;flag&quot;</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        request.setAttribute(<span class=\"string\">&quot;flag&quot;</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      request.getRequestDispatcher(<span class=\"string\">&quot;info.jsp&quot;</span>).forward(request, response);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (FileUploadException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ServletFileUpload <span class=\"title function_\">getServletFileUpload</span><span class=\"params\">(File tempFile)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 创建DiskFileItemFactory对象，处理文件路径或者大小限制</span></span><br><span class=\"line\">    <span class=\"type\">DiskFileItemFactory</span> <span class=\"variable\">factory</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DiskFileItemFactory</span>();</span><br><span class=\"line\">    <span class=\"comment\">// 通过这个工厂设置一个缓冲区,当上传的文件大于这个缓冲区的时候,将他放到临时文件中;</span></span><br><span class=\"line\">    factory.setSizeThreshold((<span class=\"type\">int</span>) <span class=\"number\">2e20</span>);<span class=\"comment\">// 缓冲区大小为1M</span></span><br><span class=\"line\">    factory.setRepository(tempFile);<span class=\"comment\">// 临时目录的保存目录,需要一个file</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">ServletFileUpload</span> <span class=\"variable\">servletFileUpload</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ServletFileUpload</span>(factory);</span><br><span class=\"line\">    <span class=\"comment\">// 处理乱码问题</span></span><br><span class=\"line\">    servletFileUpload.setHeaderEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 设置总共能够上传文件的大小 10M</span></span><br><span class=\"line\">    servletFileUpload.setFileSizeMax((<span class=\"type\">long</span>) <span class=\"number\">2e21</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">      监听长传进度</span></span><br><span class=\"line\"><span class=\"comment\">        pBytesRead:已读取到的文件大小</span></span><br><span class=\"line\"><span class=\"comment\">        pContextLength:文件大小</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    servletFileUpload.setProgressListener((<span class=\"type\">long</span> pBytesRead, <span class=\"type\">long</span> pContentLength, <span class=\"type\">int</span> pItems) -&gt; System.out.println(<span class=\"string\">&quot;已上传：&quot;</span> + pBytesRead + <span class=\"string\">&quot;\\n总大小：&quot;</span> + pContentLength));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> servletFileUpload;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">boolean</span> <span class=\"title function_\">uploadParseRequest</span><span class=\"params\">(ServletFileUpload upload, HttpServletRequest request, String uploadPath)</span></span><br><span class=\"line\">      <span class=\"keyword\">throws</span> FileUploadException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> <span class=\"literal\">false</span>; <span class=\"comment\">// 是否成功</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 把前端请求解析，封装成FileItem对象</span></span><br><span class=\"line\">    List&lt;FileItem&gt; fileItems = upload.parseRequest(request);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FileItem fileItem : fileItems) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 判断上传的文件是普通的表单还是带文件的表单</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (fileItem.isFormField()) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// getFieldName指的是前端表单控件的name;</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">name</span> <span class=\"operator\">=</span> fileItem.getFieldName();</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">value</span> <span class=\"operator\">=</span> fileItem.getString(<span class=\"string\">&quot;UTF-8&quot;</span>); <span class=\"comment\">// 处理乱码</span></span><br><span class=\"line\">        System.out.println(name + <span class=\"string\">&quot;: &quot;</span> + value);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// ============处理文件==============</span></span><br><span class=\"line\">        <span class=\"comment\">// 拿到文件名</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">uploadFileName</span> <span class=\"operator\">=</span> fileItem.getName();</span><br><span class=\"line\">        <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">          .trim() 删除前后空格</span></span><br><span class=\"line\"><span class=\"comment\">          下面的写法会导致&quot;uploadFileName == null&quot; 一直判定为false :</span></span><br><span class=\"line\"><span class=\"comment\">            uploadFileName.trim().equals(&quot;&quot;) || uploadFileName == null</span></span><br><span class=\"line\"><span class=\"comment\">            反过来就好了,原因是字符串对象引用改变了</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (uploadFileName == <span class=\"literal\">null</span> || uploadFileName.trim().equals(<span class=\"string\">&quot;&quot;</span>)) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 获得上传的文件名</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">fileName</span> <span class=\"operator\">=</span> uploadFileName.substring(uploadFileName.lastIndexOf(<span class=\"string\">&quot;/&quot;</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 获得文件的后缀名,如果文件后缀名fileExtName不是我们所需要的 就直按return.不处理,告诉用户文件类型不对。</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">fileExtName</span> <span class=\"operator\">=</span> uploadFileName.substring(uploadFileName.lastIndexOf(<span class=\"string\">&quot;.&quot;</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;文件名: &quot;</span> + fileName + <span class=\"string\">&quot;\\n后缀名&quot;</span> + fileExtName);</span><br><span class=\"line\">        <span class=\"comment\">// ================处理文件完毕==============</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">          UUID.randomUUID(),随机生一个唯一识别的通用码,保证文件夹名唯一</span></span><br><span class=\"line\"><span class=\"comment\">          文件真实存在的路径 realPath</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">realPath</span> <span class=\"operator\">=</span> uploadPath + <span class=\"string\">&quot;/&quot;</span> + UUID.randomUUID();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 给每个文件创建一个对应的文件夹</span></span><br><span class=\"line\">        <span class=\"type\">File</span> <span class=\"variable\">realPathFile</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(realPath);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!realPathFile.exists()) &#123;</span><br><span class=\"line\">          realPathFile.mkdir();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// ==============存放地址完毕==============</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 获得文件上传的流</span></span><br><span class=\"line\">        <span class=\"type\">InputStream</span> <span class=\"variable\">inputStream</span> <span class=\"operator\">=</span> fileItem.getInputStream();</span><br><span class=\"line\">        <span class=\"comment\">// 创建一个文件输出流</span></span><br><span class=\"line\">        <span class=\"type\">FileOutputStream</span> <span class=\"variable\">fileOutputStream</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FileOutputStream</span>(realPath + <span class=\"string\">&quot;/&quot;</span> + fileName);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 创建一个缓冲区</span></span><br><span class=\"line\">        <span class=\"type\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[(<span class=\"type\">int</span>) <span class=\"number\">2e20</span>]; <span class=\"comment\">// 1M</span></span><br><span class=\"line\">        <span class=\"type\">int</span> len;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> ((len = inputStream.read(buffer)) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          fileOutputStream.write(buffer, <span class=\"number\">0</span>, len);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 关闭流</span></span><br><span class=\"line\">        fileOutputStream.close();</span><br><span class=\"line\">        inputStream.close();</span><br><span class=\"line\"></span><br><span class=\"line\">        flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"comment\">// 上传成功,清除临时文件</span></span><br><span class=\"line\">        fileItem.delete();</span><br><span class=\"line\">        <span class=\"comment\">//=============文件传输完成=============</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> flag;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>项目地址</p>\n<p>包含用到的 JSP 页面和 xml 配置文件</p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb/Last\">https://github.com/Weidows/Java/tree/master/JavaWeb/Last</a></p>\n</blockquote>\n</li>\n<li>\n<p>问题: 如果 Tomcat 是 10 版本的,运行时会出现 500</p>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/m0_50905990/article/details/115339679\">servlet 配置相关：HTTP 状态 500 - 内部服务器错误问题</a></p>\n</blockquote>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"邮件发送\">邮件发送</h2>\n<ul>\n<li>\n<p>原理图:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSoBn.png\" alt=\"邮件传输原理.drawio\" />\n</li>\n<li>\n<p>依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.activation<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>activation<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/javax.mail/mail --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.mail<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mail<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.4.7<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n</ul>\n<hr>\n<h3 id=\"简单邮件\">简单邮件</h3>\n<ul>\n<li>\n<p>代码:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> com.sun.mail.util.MailSSLSocketFactory;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.internet.InternetAddress;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.internet.MimeMessage;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.GeneralSecurityException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MailDemo1</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">fromEmailAddress</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;utsuko27@qq.com&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">toEmailAddress</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;utsuko27@163.com&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;这里填授权码&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//0. 设置连接配置</span></span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">properties</span> <span class=\"operator\">=</span> getProperties();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//1.创建定义整个应用程序所需要的环境信息的session对象</span></span><br><span class=\"line\">    <span class=\"type\">Session</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> Session.getDefaultInstance(properties, <span class=\"keyword\">new</span> <span class=\"title class_\">Authenticator</span>() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"keyword\">protected</span> PasswordAuthentication <span class=\"title function_\">getPasswordAuthentication</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">PasswordAuthentication</span>(fromEmailAddress, password);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"comment\">//开启session的debug模式，这样可以查看到程序发送Email的运行状态</span></span><br><span class=\"line\">    session.setDebug(<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2.通过session得到transport对象</span></span><br><span class=\"line\">    <span class=\"type\">Transport</span> <span class=\"variable\">transport</span> <span class=\"operator\">=</span> session.getTransport();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//3.使用邮箱的用户名和授权码连上邮件服务器</span></span><br><span class=\"line\">    transport.connect(<span class=\"string\">&quot;smtp.qq.com&quot;</span>, fromEmailAddress, password);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4.创建邮件：写文件</span></span><br><span class=\"line\">    <span class=\"type\">MimeMessage</span> <span class=\"variable\">message</span> <span class=\"operator\">=</span> getMimeMessage(session);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5.发送邮件</span></span><br><span class=\"line\">    transport.sendMessage(message, message.getAllRecipients());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//6.关闭连接</span></span><br><span class=\"line\">    transport.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Properties <span class=\"title function_\">getProperties</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> GeneralSecurityException &#123;</span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">properties</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">    properties.setProperty(<span class=\"string\">&quot;mail.host&quot;</span>, <span class=\"string\">&quot;smtp.qq.com&quot;</span>);<span class=\"comment\">///设置QQ邮件服务器</span></span><br><span class=\"line\">    properties.setProperty(<span class=\"string\">&quot;mail.transport.protocol&quot;</span>, <span class=\"string\">&quot;smtp&quot;</span>);<span class=\"comment\">///邮件发送协议</span></span><br><span class=\"line\">    properties.setProperty(<span class=\"string\">&quot;mail.smtp.auth&quot;</span>, <span class=\"string\">&quot;true&quot;</span>);<span class=\"comment\">//需要验证用户密码</span></span><br><span class=\"line\">    <span class=\"comment\">//设置SSL加密(QQ邮箱需要)</span></span><br><span class=\"line\">    <span class=\"type\">MailSSLSocketFactory</span> <span class=\"variable\">mailSSLSocketFactory</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MailSSLSocketFactory</span>();</span><br><span class=\"line\">    mailSSLSocketFactory.setTrustAllHosts(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    properties.put(<span class=\"string\">&quot;mail.smtp.ssl.enable&quot;</span>, <span class=\"string\">&quot;true&quot;</span>);</span><br><span class=\"line\">    properties.put(<span class=\"string\">&quot;mail.smtp.ssl.socketFactory&quot;</span>, mailSSLSocketFactory);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> properties;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> MimeMessage <span class=\"title function_\">getMimeMessage</span><span class=\"params\">(Session session)</span> <span class=\"keyword\">throws</span> MessagingException &#123;</span><br><span class=\"line\">    <span class=\"type\">MimeMessage</span> <span class=\"variable\">message</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeMessage</span>(session);</span><br><span class=\"line\">    <span class=\"comment\">//指明邮件的发件人</span></span><br><span class=\"line\">    message.setFrom(<span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(fromEmailAddress));</span><br><span class=\"line\">    <span class=\"comment\">//指明邮件的收件人</span></span><br><span class=\"line\">    message.setRecipient(Message.RecipientType.TO, <span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(toEmailAddress));</span><br><span class=\"line\">    <span class=\"comment\">//邮件标题</span></span><br><span class=\"line\">    message.setSubject(<span class=\"string\">&quot;发送的标题&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">//邮件的文本内容</span></span><br><span class=\"line\">    message.setContent(<span class=\"string\">&quot;内容&quot;</span>, <span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<details>\n  <summary> -> 开启 Debug 后的信息 <-</summary>\n<hr>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DEBUG: setDebug: JavaMail version 1.4.7</span><br><span class=\"line\">DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Oracle]</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: useEhlo <span class=\"literal\">true</span>, useAuth <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: trying <span class=\"keyword\">to</span> connect <span class=\"keyword\">to</span> host <span class=\"string\">&quot;smtp.qq.com&quot;</span>,<span class=\"built_in\"> port </span>465, isSSL <span class=\"literal\">true</span></span><br><span class=\"line\">220 newxmesmtplogicsvrsza8.qq.com XMail Esmtp QQ Mail Server.</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: connected <span class=\"keyword\">to</span> host <span class=\"string\">&quot;smtp.qq.com&quot;</span>, port: 465</span><br><span class=\"line\"></span><br><span class=\"line\">EHLO DESKTOP-CTDDD3K</span><br><span class=\"line\">250-newxmesmtplogicsvrsza8.qq.com</span><br><span class=\"line\">250-PIPELINING</span><br><span class=\"line\">250-SIZE 73400320</span><br><span class=\"line\">250-AUTH LOGIN PLAIN XOAUTH XOAUTH2</span><br><span class=\"line\"><span class=\"attribute\">250-AUTH</span>=LOGIN</span><br><span class=\"line\">250-MAILCOMPRESS</span><br><span class=\"line\">250 8BITMIME</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;PIPELINING&quot;</span>, arg <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;SIZE&quot;</span>, arg <span class=\"string\">&quot;73400320&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;AUTH&quot;</span>, arg <span class=\"string\">&quot;LOGIN PLAIN XOAUTH XOAUTH2&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;AUTH=LOGIN&quot;</span>, arg <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;MAILCOMPRESS&quot;</span>, arg <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;8BITMIME&quot;</span>, arg <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Attempt <span class=\"keyword\">to</span> authenticate using mechanisms: LOGIN PLAIN DIGEST-MD5 NTLM</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: AUTH LOGIN command trace suppressed</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: AUTH LOGIN succeeded</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: use8bit <span class=\"literal\">false</span></span><br><span class=\"line\">MAIL <span class=\"keyword\">FROM</span>:&lt;utsuko27@qq.com&gt;</span><br><span class=\"line\">250 OK.</span><br><span class=\"line\">RCPT <span class=\"keyword\">TO</span>:&lt;utsuko27@163.com&gt;</span><br><span class=\"line\">250 OK</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Verified Addresses</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP:   utsuko27@163.com</span><br><span class=\"line\">DATA</span><br><span class=\"line\">354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;.</span><br><span class=\"line\"><span class=\"keyword\">From</span>: utsuko27@qq.com</span><br><span class=\"line\"><span class=\"keyword\">To</span>: utsuko27@163.com</span><br><span class=\"line\">Message-ID: &lt;825249556.0.1619921529857.JavaMail.29845@smtp.qq.com&gt;</span><br><span class=\"line\">Subject: =?UTF-8?B?5Y+R6YCB55qE5qCH6aKY?=</span><br><span class=\"line\">MIME-Version: 1.0</span><br><span class=\"line\">Content-Type: text/html;<span class=\"attribute\">charset</span>=UTF-8</span><br><span class=\"line\">Content-Transfer-Encoding: base64</span><br><span class=\"line\"></span><br><span class=\"line\">5YaF5a65</span><br><span class=\"line\">.</span><br><span class=\"line\">250 OK: queued as.</span><br><span class=\"line\">QUIT</span><br><span class=\"line\">221 Bye.</span><br></pre></td></tr></table></figure>\n</details>\n</li>\n</ul>\n<hr>\n<h3 id=\"复杂邮件\">复杂邮件</h3>\n<ul>\n<li>\n<p>比如涉及到附件或者插入图片的邮件,这种邮件就需要进行特殊包装</p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAqE5.png\" alt=\"20210502102326\" />\n</blockquote>\n</li>\n<li>\n<p>代码 (只需要修改 getMimeMessage()方法)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* 含带附件的邮件</span></span><br><span class=\"line\"><span class=\"comment\">*</span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@param</span> session</span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@throws</span> MessagingException</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> MimeMessage <span class=\"title function_\">getMimeMessage</span><span class=\"params\">(Session session)</span> <span class=\"keyword\">throws</span> MessagingException &#123;</span><br><span class=\"line\">  <span class=\"type\">MimeMessage</span> <span class=\"variable\">message</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeMessage</span>(session);</span><br><span class=\"line\">  <span class=\"comment\">//指明邮件的发件人</span></span><br><span class=\"line\">  message.setFrom(<span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(fromEmailAddress));</span><br><span class=\"line\">  <span class=\"comment\">//指明邮件的收件人</span></span><br><span class=\"line\">  message.setRecipient(Message.RecipientType.TO, <span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(toEmailAddress));</span><br><span class=\"line\">  <span class=\"comment\">//邮件标题</span></span><br><span class=\"line\">  message.setSubject(<span class=\"string\">&quot;发送的标题&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//邮件的文本内容</span></span><br><span class=\"line\">  <span class=\"comment\">//=================================准备图片数据</span></span><br><span class=\"line\">  <span class=\"type\">MimeBodyPart</span> <span class=\"variable\">image</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeBodyPart</span>();</span><br><span class=\"line\">  <span class=\"comment\">//图片需要经过数据化的处理</span></span><br><span class=\"line\">  <span class=\"type\">DataHandler</span> <span class=\"variable\">dataHandler</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DataHandler</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">FileDataSource</span>(<span class=\"string\">&quot;D:/Game/Weidows/JavaWeb/Last/src/main/java/MailDemo.java&quot;</span>));</span><br><span class=\"line\">  <span class=\"comment\">//在part中放入这个处理过图片的数据</span></span><br><span class=\"line\">  image.setDataHandler(dataHandler);</span><br><span class=\"line\">  <span class=\"comment\">//给这个part设置一个ID名字</span></span><br><span class=\"line\">  image.setContentID(<span class=\"string\">&quot;嵌入.png&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//=================================准备正文数据</span></span><br><span class=\"line\">  <span class=\"type\">MimeBodyPart</span> <span class=\"variable\">text</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeBodyPart</span>();</span><br><span class=\"line\">  text.setContent(<span class=\"string\">&quot;这是一张正文&lt;img src=&#x27;嵌入.jpg&#x27;&gt;&quot;</span>, <span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//=================================准备附件数据</span></span><br><span class=\"line\">  <span class=\"type\">MimeBodyPart</span> <span class=\"variable\">body</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeBodyPart</span>();</span><br><span class=\"line\">  body.setDataHandler(<span class=\"keyword\">new</span> <span class=\"title class_\">DataHandler</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">FileDataSource</span>(<span class=\"string\">&quot;D:/Game/Weidows/JavaWeb/Last/src/main/java/MailDemo.java&quot;</span>)));</span><br><span class=\"line\">  body.setFileName(<span class=\"string\">&quot;附件.png&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//描述数据关系</span></span><br><span class=\"line\">  <span class=\"type\">MimeMultipart</span> <span class=\"variable\">mimeMultipart</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeMultipart</span>();</span><br><span class=\"line\">  mimeMultipart.addBodyPart(image);</span><br><span class=\"line\">  mimeMultipart.addBodyPart(text);</span><br><span class=\"line\">  mimeMultipart.addBodyPart(body);</span><br><span class=\"line\">  mimeMultipart.setSubType(<span class=\"string\">&quot;mixed&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//设置到消息中，保存修改</span></span><br><span class=\"line\">  message.setContent(mimeMultipart);</span><br><span class=\"line\">  message.saveChanges();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> message;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>测试过邮件发送没有问题,但是很有可能因为包装问题导致图片或者文件出现编码解析错误问题</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Lombok\">Lombok</h2>\n<ul>\n<li>\n<p>通过注解快速生成代码</p>\n</li>\n<li>\n<p>需要<code>安装插件</code>和<code>导入依赖</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.18.20<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>效果如图:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAz1g.png\" alt=\"20210502141126\" />\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"注册-发送邮件-demo\">注册-发送邮件 demo</h2>\n<blockquote>\n<p>其他资源可以去这里找: <a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/Last/src/main/java/demo\">代码</a></p>\n</blockquote>\n<ul>\n<li>\n<p>通过 JSP 获取表单中用户名,密码和 email,然后用 Servlet 获取,并开启邮件发送线程通知用户.</p>\n</li>\n<li>\n<p>发送邮件的类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.sun.mail.util.MailSSLSocketFactory;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.internet.InternetAddress;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.internet.MimeMessage;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.GeneralSecurityException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SendMail</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Thread</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">fromEmailAddress</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;utsuko27@qq.com&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">toEmailAddress</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;utsuko27@163.com&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;授权码&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> User user;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">SendMail</span><span class=\"params\">(User user)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.user = user;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"type\">Session</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> Session.getDefaultInstance(getProperties(), <span class=\"keyword\">new</span> <span class=\"title class_\">Authenticator</span>() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">protected</span> PasswordAuthentication <span class=\"title function_\">getPasswordAuthentication</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">PasswordAuthentication</span>(fromEmailAddress, password);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      session.setDebug(<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"type\">MimeMessage</span> <span class=\"variable\">message</span> <span class=\"operator\">=</span> getMimeMessage(session);</span><br><span class=\"line\"></span><br><span class=\"line\">      send(session, message);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">      System.out.println(e);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> Properties <span class=\"title function_\">getProperties</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> GeneralSecurityException &#123;</span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">prop</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">    prop.setProperty(<span class=\"string\">&quot;mail.host&quot;</span>, <span class=\"string\">&quot;smtp.qq.com&quot;</span>);<span class=\"comment\">///设置QQ邮件服务器</span></span><br><span class=\"line\">    prop.setProperty(<span class=\"string\">&quot;mail.transport.protocol&quot;</span>, <span class=\"string\">&quot;smtp&quot;</span>);<span class=\"comment\">///邮件发送协议</span></span><br><span class=\"line\">    prop.setProperty(<span class=\"string\">&quot;mail.smtp.auth&quot;</span>, <span class=\"string\">&quot;true&quot;</span>);<span class=\"comment\">//需要验证用户密码</span></span><br><span class=\"line\">    <span class=\"comment\">//QQ邮箱需要设置SSL加密</span></span><br><span class=\"line\">    <span class=\"type\">MailSSLSocketFactory</span> <span class=\"variable\">sf</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MailSSLSocketFactory</span>();</span><br><span class=\"line\">    sf.setTrustAllHosts(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    prop.put(<span class=\"string\">&quot;mail.smtp.ssl.enable&quot;</span>, <span class=\"string\">&quot;true&quot;</span>);</span><br><span class=\"line\">    prop.put(<span class=\"string\">&quot;mail.smtp.ssl.socketFactory&quot;</span>, sf);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> prop;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> MimeMessage <span class=\"title function_\">getMimeMessage</span><span class=\"params\">(Session session)</span> <span class=\"keyword\">throws</span> MessagingException &#123;</span><br><span class=\"line\">    <span class=\"type\">MimeMessage</span> <span class=\"variable\">message</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeMessage</span>(session);</span><br><span class=\"line\">    <span class=\"comment\">//指明邮件的发件人</span></span><br><span class=\"line\">    message.setFrom(<span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(fromEmailAddress));</span><br><span class=\"line\">    <span class=\"comment\">//指明邮件的收件人</span></span><br><span class=\"line\">    message.setRecipient(Message.RecipientType.TO, <span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(toEmailAddress));</span><br><span class=\"line\">    <span class=\"comment\">//邮件标题</span></span><br><span class=\"line\">    message.setSubject(<span class=\"string\">&quot;注册通知&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">//邮件的文本内容</span></span><br><span class=\"line\">    message.setContent((<span class=\"string\">&quot;恭喜你(&quot;</span> + user.getUserName() + <span class=\"string\">&quot;)成功注册！&quot;</span> + <span class=\"string\">&quot;密码：&quot;</span> + user.getPassword())</span><br><span class=\"line\">        , <span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">send</span><span class=\"params\">(Session session, MimeMessage message)</span> <span class=\"keyword\">throws</span> MessagingException &#123;</span><br><span class=\"line\">    <span class=\"type\">Transport</span> <span class=\"variable\">transport</span> <span class=\"operator\">=</span> session.getTransport();</span><br><span class=\"line\">    transport.connect(<span class=\"string\">&quot;smtp.qq.com&quot;</span>, fromEmailAddress, password);</span><br><span class=\"line\">    transport.sendMessage(message, message.getAllRecipients());</span><br><span class=\"line\">    transport.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>Servlet 类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RegisterServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;pwd&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">email</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;email&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>(username, password, email);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">SendMail</span>(user).start(); <span class=\"comment\">// 开启线程</span></span><br><span class=\"line\">    resp.getWriter().write(<span class=\"string\">&quot;正在发送邮件....&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/6/",
            "url": "https://weidows.github.io/post/Java/Web/6/",
            "title": "🥼JavaWeb~(陆)JDBC,JUnit,SMBMS项目",
            "date_published": "2021-04-15T07:28:45.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-07-23 09:29:11\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\6.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#jdbc%E5%A4%8D%E4%B9%A0\">JDBC(复习)</a></li>\n<li><a href=\"#junit\">JUnit</a></li>\n<li><a href=\"#smbms\">SMBMS</a>\n<ul>\n<li><a href=\"#%E6%90%AD%E5%BB%BA\">搭建</a></li>\n<li><a href=\"#%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84\">后端项目结构</a></li>\n<li><a href=\"#%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\">连接配置文件</a></li>\n<li><a href=\"#orm-%E6%98%A0%E5%B0%84\">ORM 映射</a></li>\n<li><a href=\"#%E9%9D%99%E6%80%81%E5%9F%BA%E6%9C%AC%E7%B1%BB\">静态基本类</a></li>\n<li><a href=\"#%E9%A2%98%E5%A4%96%E8%AF%9D\">题外话</a></li>\n<li><a href=\"#%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95\">实现登录</a></li>\n<li><a href=\"#%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%E6%9E%84\">项目总结构</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"JDBC-复习\">JDBC(复习)</h2>\n<blockquote>\n<p>JDBC 连接 <a href=\"../../MySQL/4#jdbc\">🚀 进修 MySQL~(肆)</a></p>\n</blockquote>\n<blockquote>\n<p>事务 <a href=\"../../MySQL/5#ideasql\">🚀 进修 MySQL~(伍)</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JUnit\">JUnit</h2>\n<p>在一个方法上标记 <code>@Test</code> 注解后,这个方法可以脱离 Main 直接运行.</p>\n<ul>\n<li>\n<p>依赖 (一般创建项目时自带)</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--单元测试--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>例子:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">JDBCTest</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Test</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"SMBMS\">SMBMS</h2>\n<blockquote>\n<p>项目代码: <a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb/SMBMS\">https://github.com/Weidows/Java/tree/master/JavaWeb/SMBMS</a></p>\n</blockquote>\n<ul>\n<li>\n<p>可以拉取代码直接看,下面的笔记着重讲<code>从零开发的流程</code></p>\n</li>\n<li>\n<p>我的这个项目应该是跑不起来,在 web,xml 中 filter 那里有个 bug,不过无大碍,知道怎么个原理就好.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"搭建\">搭建</h3>\n<ul>\n<li>\n<p>Maven-webapp 项目,补全 src/resources,添加依赖,连接 Tomcat 和 MySQL,修改 web.xml 版本</p>\n<ul>\n<li>\n<p>依赖:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.13.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>compile<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- servlet依赖 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.0.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- JSP依赖 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet.jsp<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jstl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- Standard标签库 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>taglibs<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>standard<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.tomcat<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jsp-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>6.0.13<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.junit.jupiter<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit-jupiter-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;junit.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.junit.jupiter<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit-jupiter-engine<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;junit.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.23<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>更改版本号:<code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">version</span>=<span class=\"string\">&quot;4.0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">metadata-complete</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"后端项目结构\">后端项目结构</h3>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|&gt; src/main</span><br><span class=\"line\">  |&gt; java/com.weidows</span><br><span class=\"line\">    |&gt; dao/mapper           <span class=\"comment\">// data access object (对应pojo的CRUD类)</span></span><br><span class=\"line\">    |&gt; filter               <span class=\"comment\">// 过滤器</span></span><br><span class=\"line\">    |&gt; pojo/entity          <span class=\"comment\">// Plain Ordinary Java Object (ORM映射的实体类,内部一般只有getter和setter)</span></span><br><span class=\"line\">    |&gt; service              <span class=\"comment\">// 业务类 (操作dao)</span></span><br><span class=\"line\">    |&gt; servlet/controller   <span class=\"comment\">// servlet后端</span></span><br><span class=\"line\">    |&gt; utils                <span class=\"comment\">// 工具类</span></span><br><span class=\"line\">    |&gt; bean                 <span class=\"comment\">// spring中 == entity + dao</span></span><br><span class=\"line\">  |&gt; resources              <span class=\"comment\">// 资源文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">-------</span><br><span class=\"line\"></span><br><span class=\"line\">pojo对应数据库中每个记录</span><br><span class=\"line\">-&gt; 在dao中编写操作pojo的SQL/Java代码,实现CRUD的<span class=\"string\">&quot;方法&quot;</span></span><br><span class=\"line\">-&gt; 在service中通过Java编写事务,并调用dao中CRUD方法实现增删改查<span class=\"string\">&quot;功能&quot;</span></span><br><span class=\"line\">-&gt; 在servlet就是对应请求和响应来做业务,调用service中的方法.</span><br><span class=\"line\"></span><br><span class=\"line\">-------</span><br><span class=\"line\"></span><br><span class=\"line\">pojo为最底层,不涉及对象增删操作</span><br><span class=\"line\">-&gt; dao层</span><br><span class=\"line\">  -&gt; BaseDao实现创建connection/preparedStatement对象,以及回收connection/preparedStatement/resultSet的方法.</span><br><span class=\"line\">  -&gt; 进一步的dao类中进行创建resultSet对象,并回收resultSet/preparedStatement对象</span><br><span class=\"line\">-&gt; 在service层进行connection的关闭,捕获dao层抛出的异常,且此层不再向上抛出异常.</span><br></pre></td></tr></table></figure>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVt9XS.png\" alt=\"20210424112946\" />\n<hr>\n<h3 id=\"连接配置文件\">连接配置文件</h3>\n<p>(resources/db.properties)</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">driverClassName</span>=<span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"attr\">url</span>=<span class=\"string\">jdbc:mysql://localhost:3306/smbms?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class=\"line\"><span class=\"attr\">user</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"attr\">password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"ORM-映射\">ORM 映射</h3>\n<p>(编写 pojo 下的实体类)</p>\n<blockquote>\n<p>初始化 SQL: <a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/smbms.sql\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/smbms.sql</a></p>\n</blockquote>\n<blockquote>\n<p>pojo: <a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo</a></p>\n</blockquote>\n<hr>\n<h3 id=\"静态基本类\">静态基本类</h3>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/dao/BaseDao.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/dao/BaseDao.java</a></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.weidows.dao;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 操作数据库的基类--静态类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">BaseDao</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String driver;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String url;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String username;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String password;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">PreparedStatement</span> <span class=\"variable\">preparedStatement</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//静态代码块,在类加载的时候执行</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">configFile</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;db.properties&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">InputStream</span> <span class=\"variable\">inputStream</span> <span class=\"operator\">=</span> BaseDao.class.getClassLoader().getResourceAsStream(configFile);</span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">properties</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      properties.load(inputStream);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    driver = properties.getProperty(<span class=\"string\">&quot;driver&quot;</span>);</span><br><span class=\"line\">    url = properties.getProperty(<span class=\"string\">&quot;url&quot;</span>);</span><br><span class=\"line\">    username = properties.getProperty(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    password = properties.getProperty(<span class=\"string\">&quot;password&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 获取数据库连接</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span> connection</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Connection <span class=\"title function_\">getConnection</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (connection == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        Class.forName(driver);</span><br><span class=\"line\">        connection = DriverManager.getConnection(url, username, password);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> connection;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 查询数据库的公共操作</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> connection</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> rs</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> sql</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> params</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ResultSet <span class=\"title function_\">execute</span><span class=\"params\">(Connection connection, ResultSet rs, String sql, Object[] params)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      preparedStatement = connection.prepareStatement(sql);</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; params.length; i++) &#123;</span><br><span class=\"line\">        preparedStatement.setObject(i + <span class=\"number\">1</span>, params[i]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      rs = preparedStatement.executeQuery();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (SQLException throwables) &#123;</span><br><span class=\"line\">      throwables.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> rs;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 更新数据库的公共操作</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> connection</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> sql</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> params</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">execute</span><span class=\"params\">(Connection connection, String sql, Object[] params)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">updateRows</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      preparedStatement = connection.prepareStatement(sql);</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; params.length; i++) &#123;</span><br><span class=\"line\">        preparedStatement.setObject(i + <span class=\"number\">1</span>, params[i]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      updateRows = preparedStatement.executeUpdate();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (SQLException throwables) &#123;</span><br><span class=\"line\">      throwables.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> updateRows;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 释放资源</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> connection</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> pstm</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> rs</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">boolean</span> <span class=\"title function_\">closeResource</span><span class=\"params\">(Connection connection, PreparedStatement pstm, ResultSet rs)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (rs != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        rs.close();</span><br><span class=\"line\">        rs = <span class=\"literal\">null</span>;<span class=\"comment\">//GC回收</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (pstm != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        pstm.close();</span><br><span class=\"line\">        pstm = <span class=\"literal\">null</span>;<span class=\"comment\">//GC回收</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (connection != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        connection.close();</span><br><span class=\"line\">        connection = <span class=\"literal\">null</span>;<span class=\"comment\">//GC回收</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">      flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> flag;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"题外话\">题外话</h3>\n<ul>\n<li>\n<p>一个编程书写习惯: 方法中首先把需要用到的变量提出</p>\n<p>就像这里的三个变量,在一开始提出来,就像是类里面的 field,使用起来比较规范,容易排查</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> User <span class=\"title function_\">getLoginUser</span><span class=\"params\">(Connection connection, String userCode)</span> &#123;</span><br><span class=\"line\">  <span class=\"type\">PreparedStatement</span> <span class=\"variable\">pstm</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"literal\">null</span> != connection) &#123;</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">sql</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;select * from smbms_user where userCode=?&quot;</span>;</span><br><span class=\"line\">      Object[] params = &#123;userCode&#125;;</span><br><span class=\"line\">      resultSet = BaseDao.execute(connection, pstm, resultSet, sql, params);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (resultSet.next()) &#123;</span><br><span class=\"line\">        user = setData(resultSet);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    BaseDao.closeResource(<span class=\"literal\">null</span>, pstm, resultSet);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (SQLException throwables) &#123;</span><br><span class=\"line\">    throwables.printStackTrace();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"实现登录\">实现登录</h3>\n<ul>\n<li>\n<p>在这里复现一下&quot;登录&quot;业务,其他功能以此类推.</p>\n<p>这里着重<code>过程</code>(自上而下),具体怎么实现的业务建议结合源码来学习.</p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtTVD.png\" alt=\"20210422103020\" />\n</blockquote>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtwSu.png\" alt=\"20210425232035\" />\n</blockquote>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>com/weidows/pojo/User.java</code></p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo/User.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo/User.java</a></p>\n</blockquote>\n</li>\n<li>\n<p><code>com/weidows/dao/user/UserDao.java</code></p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDao.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDao.java</a></p>\n</blockquote>\n</li>\n<li>\n<p><code>com/weidows/dao/user/UserDaoImpl.java</code></p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDaoImpl.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDaoImpl.java</a></p>\n</blockquote>\n</li>\n<li>\n<p><code>com/weidows/service/user/UserService.java</code></p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserService.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserService.java</a></p>\n</blockquote>\n</li>\n<li>\n<p><code>com/weidows/service/user/UserServiceImpl.java</code></p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserServiceImpl.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserServiceImpl.java</a></p>\n</blockquote>\n</li>\n<li>\n<p>前端页面</p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/webapp/login.jsp\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/webapp/login.jsp</a></p>\n</blockquote>\n</li>\n<li>\n<p>对应前端的常量类</p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/util/Constants.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/util/Constants.java</a></p>\n</blockquote>\n</li>\n<li>\n<p>对应 User 的 servlet 类</p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/UserServlet.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/UserServlet.java</a></p>\n</blockquote>\n</li>\n<li>\n<p>登录 servlet 类</p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/LoginServlet.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/LoginServlet.java</a></p>\n</blockquote>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"项目总结构\">项目总结构</h3>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtQ5E.png\" alt=\"20210426105422\" />\n</blockquote>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "jdbc",
                "javaweb"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/5/",
            "url": "https://weidows.github.io/post/Java/Web/5/",
            "title": "🥼JavaWeb~(伍)架构,filter,listener,demo.",
            "date_published": "2021-04-08T15:43:55.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-01 00:27:57\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\5.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#mvc-%E6%9E%B6%E6%9E%84\">MVC 架构</a></li>\n<li><a href=\"#%E4%B8%AD%E9%97%B4%E5%B1%82%E5%B7%A5%E5%85%B7\">中间层工具</a>\n<ul>\n<li><a href=\"#filter-%E8%BF%87%E6%BB%A4%E5%99%A8\">Filter 过滤器</a>\n<ul>\n<li><a href=\"#%E4%BB%8B%E7%BB%8D\">介绍</a></li>\n<li><a href=\"#%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96\">导入依赖</a></li>\n<li><a href=\"#filter-%E4%BE%8B%E5%AD%90\">filter 例子</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%9B%91%E5%90%AC%E5%99%A8\">监听器</a></li>\n<li><a href=\"#gui-%E7%BC%96%E7%A8%8B%E4%BE%8B%E5%AD%90\">GUI 编程例子</a></li>\n<li><a href=\"#%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81-demo\">登录验证 demo</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"笔记代码-7\"><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"MVC-架构\">MVC 架构</h2>\n<blockquote>\n<p>Model 模型 view 视图 Controller 控制 三方分离的架构</p>\n</blockquote>\n<ul>\n<li>\n<p>之前的架构:</p>\n<ul>\n<li>Servlet 直接进行 CRUD 操作,程序比较臃肿,不利于维护</li>\n</ul>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtL8q.png\" alt=\"20210409093031\" />\n</blockquote>\n<hr>\n</li>\n<li>\n<p>于是,为了解决这种不便利性,再加一层! (没有什么是加一层解决不了的)</p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtbyK.png\" alt=\"20210409093440\" />\n</blockquote>\n<hr>\n</li>\n<li>\n<p>各部分的职责:</p>\n<ul>\n<li>\n<p>Model</p>\n<ul>\n<li>\n<p>业务处理 ：业务逻辑（Service）</p>\n</li>\n<li>\n<p>数据持久层：CRUD （Dao - 数据持久化对象）</p>\n</li>\n</ul>\n</li>\n<li>\n<p>View</p>\n<ul>\n<li>\n<p>展示数据</p>\n</li>\n<li>\n<p>提供链接发起 Servlet 请求 （a，form，img…）</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Controller （Servlet）</p>\n<ul>\n<li>\n<p>接收用户的请求 ：（req：请求参数、Session 信息….）</p>\n</li>\n<li>\n<p>交给业务层处理对应的代码</p>\n</li>\n<li>\n<p>控制视图的跳转 (转发/重定向)</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>一条流程:</p>\n<p>View 层点击登录 --&gt; 接收用户的登录请求 --&gt; 处理用户的请求（获取用户登录的参数，username，password）–&gt; 交给业务层处理登录业务（判断用户名密码是否正确：操作事务）–&gt; Dao 层查询用户名和密码是否正确 --&gt; 数据库</p>\n<p>顺利查询到数据之后就是反过来再进行数据传递</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"中间层工具\">中间层工具</h2>\n<ul>\n<li>\n<p>常见的有<code>过滤器 filter</code>,<code>监听器 listener</code>,<code>拦截器 Interceptor</code></p>\n<blockquote>\n<p><a href=\"https://www.zhihu.com/question/35225845\">请教一下关于过滤器，拦截器，监听器具体应用上的区别？</a></p>\n</blockquote>\n</li>\n<li>\n<p>下面介绍 filter(重点) 和 listener</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"Filter-过滤器\">Filter 过滤器</h3>\n<h4 id=\"介绍-2\">介绍</h4>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtHp1.png\" alt=\"20210409222335\" />\n</blockquote>\n<p>比如处理<code>中文乱码,敏感词汇,登录验证</code>…</p>\n<p>例子: 比如 Shiro 安全框架技术就是用 Filter 来实现的</p>\n<hr>\n<h4 id=\"导入依赖\">导入依赖</h4>\n<ul>\n<li>\n<p>老四样:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- servlet依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.0.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- JSP依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet.jsp<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jstl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Standard标签库 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>taglibs<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>standard<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>之后好像还会用到 SQL 驱动依赖,到时候在说.</p>\n</li>\n</ul>\n<hr>\n<h4 id=\"filter-例子\">filter 例子</h4>\n<ul>\n<li>\n<p><code>src/main/java/filter/CharacterEncodingFilter.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> filter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">CharacterEncodingFilter</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Filter</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//初始化并等待过滤对象出现</span></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">init</span><span class=\"params\">(FilterConfig filterConfig)</span> <span class=\"keyword\">throws</span> ServletException &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;CharacterEncodingFilter初始化&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    1. 过滤中的所有代码，在过滤特定请求的时候都会执行</span></span><br><span class=\"line\"><span class=\"comment\">    2. 必须要让过滤器继续执行 (因为filter可能不止一个,需要传递)</span></span><br><span class=\"line\"><span class=\"comment\">      chain.doFilter(request,response);</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doFilter</span><span class=\"params\">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class=\"keyword\">throws</span> IOException, ServletException &#123;</span><br><span class=\"line\">    request.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">    response.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">    response.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;CharacterEncodingFilter执行前....&quot;</span>);</span><br><span class=\"line\">    chain.doFilter(request, response); <span class=\"comment\">//让我们的请求继续走，如果不写，程序到这里就被拦截停止！</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;CharacterEncodingFilter执行后....&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//销毁：web服务器关闭的时候，过滤器会销毁</span></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">destroy</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;CharacterEncodingFilter销毁&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/java/servlet/Show.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> servlet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Show</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 通过filter实现处理乱码</span></span><br><span class=\"line\">    resp.getWriter().write(<span class=\"string\">&quot;你好!&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code> 配置 servlet 和 filter</p>\n</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">version</span>=<span class=\"string\">&quot;4.0&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>show<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.Show<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>characterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-class</span>&gt;</span>filter.CharacterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--还是乱码的页面--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>show<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/show<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--通过过滤器解决了乱码的页面--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>show<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/servlet/show<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--filter的地址映射--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">filter-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>characterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/servlet/*<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">filter-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"监听器\">监听器</h3>\n<blockquote>\n<ul>\n<li>对应不同业务需求,存在 N 中不同的监听器接口可供实现.</li>\n<li>监听器经常在 GUI 编程中使用.</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>例子: 设置 session 监听器监听有多少 session 连接</p>\n</li>\n<li>\n<p><code>src/main/java/listener/OnlineCountListener.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> listener;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSessionEvent;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSessionListener;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//统计网站在线人数 -&gt; 统计session</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">OnlineCountListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">HttpSessionListener</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> ServletContext ctx;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> Integer onlineCount;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//一旦创建Session就会触发一次这个事件</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sessionCreated</span><span class=\"params\">(HttpSessionEvent se)</span> &#123;</span><br><span class=\"line\">    initParam(se);</span><br><span class=\"line\">    ctx.setAttribute(<span class=\"string\">&quot;OnlineCount&quot;</span>, ++onlineCount);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    一旦销毁Session就会触发一次这个事件</span></span><br><span class=\"line\"><span class=\"comment\">    Session销毁：</span></span><br><span class=\"line\"><span class=\"comment\">      1. 手动销毁  getSession().invalidate();</span></span><br><span class=\"line\"><span class=\"comment\">      2. 自动销毁</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sessionDestroyed</span><span class=\"params\">(HttpSessionEvent se)</span> &#123;</span><br><span class=\"line\">    initParam(se);</span><br><span class=\"line\">    ctx.setAttribute(<span class=\"string\">&quot;OnlineCount&quot;</span>, --onlineCount);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">initParam</span><span class=\"params\">(HttpSessionEvent se)</span> &#123;</span><br><span class=\"line\">    ctx = se.getSession().getServletContext();</span><br><span class=\"line\">    onlineCount = (Integer) ctx.getAttribute(<span class=\"string\">&quot;OnlineCount&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (onlineCount == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      ctx.setAttribute(<span class=\"string\">&quot;OnlineCount&quot;</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>index.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;在线人数测试&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;当前有 &lt;span</span><br><span class=\"line\">    style=<span class=\"string\">&quot;color: turquoise;&quot;</span>&gt;&lt;%=<span class=\"built_in\">this</span>.getServletConfig().getServletContext().getAttribute(<span class=\"string\">&quot;OnlineCount&quot;</span>)%&gt;&lt;/span&gt; 人在线</span><br><span class=\"line\">&lt;/h1&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>注册监听器</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--注册监听器--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">listener</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">listener-class</span>&gt;</span>listener.OnlineCountListener<span class=\"tag\">&lt;/<span class=\"name\">listener-class</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"GUI-编程例子\">GUI 编程例子</h3>\n<ul>\n<li>\n<p>GUI 编程常会用到监听器,这里简单介绍一下 : <code>src/main/java/listener/TestPanel.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> listener;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.WindowAdapter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.WindowEvent;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestPanel</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Frame</span> <span class=\"variable\">frame</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Frame</span>(<span class=\"string\">&quot;Hello World!&quot;</span>);  <span class=\"comment\">//新建一个窗体</span></span><br><span class=\"line\">    <span class=\"type\">Panel</span> <span class=\"variable\">panel</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Panel</span>(<span class=\"literal\">null</span>); <span class=\"comment\">//面板</span></span><br><span class=\"line\">    frame.setLayout(<span class=\"literal\">null</span>); <span class=\"comment\">//设置窗体的布局</span></span><br><span class=\"line\"></span><br><span class=\"line\">    frame.setBounds(<span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">500</span>, <span class=\"number\">500</span>);</span><br><span class=\"line\">    frame.setBackground(<span class=\"keyword\">new</span> <span class=\"title class_\">Color</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">255</span>)); <span class=\"comment\">//设置背景颜色</span></span><br><span class=\"line\"></span><br><span class=\"line\">    panel.setBounds(<span class=\"number\">50</span>, <span class=\"number\">50</span>, <span class=\"number\">300</span>, <span class=\"number\">300</span>);</span><br><span class=\"line\">    panel.setBackground(<span class=\"keyword\">new</span> <span class=\"title class_\">Color</span>(<span class=\"number\">0</span>, <span class=\"number\">255</span>, <span class=\"number\">0</span>)); <span class=\"comment\">//设置背景颜色</span></span><br><span class=\"line\"></span><br><span class=\"line\">    frame.add(panel);</span><br><span class=\"line\"></span><br><span class=\"line\">    frame.setVisible(<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//监听事件，监听关闭事件</span></span><br><span class=\"line\">    frame.addWindowListener(<span class=\"keyword\">new</span> <span class=\"title class_\">WindowAdapter</span>() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">windowClosing</span><span class=\"params\">(WindowEvent e)</span> &#123;</span><br><span class=\"line\">        System.exit(<span class=\"number\">0</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"登录验证-demo\">登录验证 demo</h3>\n<ul>\n<li>\n<p>项目结构,如图:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtMmb.png\" alt=\"20210411004248\" />\n<hr>\n</li>\n<li>\n<p>JSP 页面</p>\n<ul>\n<li>\n<p>主页(登录页面): <code>web/demo/index.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;主页&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;登录&lt;/h1&gt;</span><br><span class=\"line\">&lt;form action=<span class=\"string\">&quot;$&#123;pageContext.request.contextPath&#125;/demo/login&quot;</span> method=<span class=\"string\">&quot;post&quot;</span>&gt;</span><br><span class=\"line\">  &lt;label&gt;</span><br><span class=\"line\">    用户名:</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;username&quot;</span>/&gt;</span><br><span class=\"line\">  &lt;/label&gt;</span><br><span class=\"line\">  &lt;input type=<span class=\"string\">&quot;submit&quot;</span> value=<span class=\"string\">&quot;登录&quot;</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>登陆失败: <code>web/demo/failed.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;登录失败&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;登录失败进入的页面&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;a href=<span class=\"string\">&quot;$&#123;pageContext.request.contextPath&#125;/demo/index.jsp&quot;</span>&gt;返回主页&lt;/a&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>登录成功: <code>web/demo/sys/success.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;已登录&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;登录成功后进入的页面&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;hr&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;a href=<span class=\"string\">&quot;$&#123;pageContext.request.contextPath&#125;/demo/logout&quot;</span>&gt;注销&lt;/a&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>Java 后端</p>\n<ul>\n<li>\n<p>login: <code>src/main/java/demo/servlet/Login.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo.servlet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> demo.utils.Constants;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Login</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">HttpSession</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> req.getSession();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (username.equals(<span class=\"string\">&quot;admin&quot;</span>)) &#123;</span><br><span class=\"line\">      session.setAttribute(Constants.USER_SESSION, session.getId());</span><br><span class=\"line\">      resp.sendRedirect(<span class=\"string\">&quot;/demo/sys/success.jsp&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      resp.sendRedirect(<span class=\"string\">&quot;/demo/failed.jsp&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>注销: <code>src/main/java/demo/servlet/Logout.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo.servlet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> demo.utils.Constants;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Logout</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">HttpSession</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> req.getSession();</span><br><span class=\"line\">    <span class=\"type\">Object</span> <span class=\"variable\">attribute</span> <span class=\"operator\">=</span> session.getAttribute(Constants.USER_SESSION);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">      频繁操作session连接会影响性能,通过attribute间接验证登录信息</span></span><br><span class=\"line\"><span class=\"comment\">      通过设置或移除 USER_SESSION 属性来验证是否登录</span></span><br><span class=\"line\"><span class=\"comment\">      存在一个Bug: 在注销状态通过浏览器的后退,可以返回登陆成功的页面(且不存在USER_SESSION)</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attribute != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      session.removeAttribute(Constants.USER_SESSION);</span><br><span class=\"line\">      resp.sendRedirect(<span class=\"string\">&quot;/demo/index.jsp&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>提取的常量工具类: <code>src/main/java/demo/utils/Constants.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo.utils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* 此类内定义一些其他各种地方需要经常调用的常量</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Constants</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">USER_SESSION</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;USER_SESSION&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>过滤器类: <code>src/main/java/demo/filter/SysFilter.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo.filter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> demo.utils.Constants;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SysFilter</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Filter</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">init</span><span class=\"params\">(FilterConfig filterConfig)</span> <span class=\"keyword\">throws</span> ServletException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doFilter</span><span class=\"params\">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class=\"keyword\">throws</span> IOException, ServletException &#123;</span><br><span class=\"line\">    <span class=\"type\">HttpServletRequest</span> <span class=\"variable\">req</span> <span class=\"operator\">=</span> (HttpServletRequest) request;</span><br><span class=\"line\">    <span class=\"type\">HttpServletResponse</span> <span class=\"variable\">resp</span> <span class=\"operator\">=</span> (HttpServletResponse) response;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Object</span> <span class=\"variable\">attribute</span> <span class=\"operator\">=</span> req.getSession().getAttribute(Constants.USER_SESSION);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attribute == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      resp.sendRedirect(<span class=\"string\">&quot;/demo/failed.jsp&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    chain.doFilter(request, response);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">destroy</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>Web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>login<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>demo.servlet.Login<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>logout<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>demo.servlet.Logout<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>sysFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">filter-class</span>&gt;</span>demo.filter.SysFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-class</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>login<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/demo/login<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>logout<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/demo/logout<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">filter-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>sysFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/demo/sys/*<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb",
                "servlet",
                "filter",
                "架构"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/4/",
            "url": "https://weidows.github.io/post/Java/Web/4/",
            "title": "🥼JavaWeb~(肆)摸索JSP,JavaBean",
            "date_published": "2021-04-06T15:45:19.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-01 00:26:52\n\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#jsp\">JSP</a>\n<ul>\n<li><a href=\"#%E5%AE%9A%E5%88%B6%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2\">定制错误页面</a></li>\n<li><a href=\"#%E5%90%88%E5%B9%B6%E9%A1%B5%E9%9D%A2\">合并页面</a></li>\n<li><a href=\"#%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%8F%8A%E4%BD%9C%E7%94%A8%E5%9F%9F\">内置对象及作用域</a></li>\n<li><a href=\"#jsp-%E6%A0%87%E7%AD%BE\">JSP 标签</a></li>\n<li><a href=\"#jstl-%E8%A1%A8%E8%BE%BE%E5%BC%8F\">JSTL 表达式</a></li>\n</ul>\n</li>\n<li><a href=\"#javabean\">JavaBean</a></li>\n</ul>\n<h2 id=\"笔记代码-6\"><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JSP-2\">JSP</h2>\n<h3 id=\"定制错误页面\">定制错误页面</h3>\n<ul>\n<li>\n<p>方法一: 直接在 jsp 页面配置 errorPage</p>\n<ul>\n<li>\n<p><code>errors/index.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%--此处定制错误页面指向--%&gt;</span><br><span class=\"line\">&lt;%@ page errorPage=<span class=\"string\">&quot;errors/500.jsp&quot;</span> %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;错误页面&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">  <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">1</span> / <span class=\"number\">0</span>;</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>errors/500.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;<span class=\"number\">500</span>错误&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;<span class=\"number\">500</span>错误页面.&lt;/h1&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>方法二: 在 web.xml 中配置</p>\n<ul>\n<li>\n<p>errors/404.jsp</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;<span class=\"number\">404</span>错误&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;<span class=\"number\">404</span>错误页面.&lt;/h1&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">error-page</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">error-code</span>&gt;</span>404<span class=\"tag\">&lt;/<span class=\"name\">error-code</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">location</span>&gt;</span>/errors/404.jsp<span class=\"tag\">&lt;/<span class=\"name\">location</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">error-page</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">error-page</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">error-code</span>&gt;</span>500<span class=\"tag\">&lt;/<span class=\"name\">error-code</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">location</span>&gt;</span>/errors/500.jsp<span class=\"tag\">&lt;/<span class=\"name\">location</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">error-page</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"合并页面\">合并页面</h3>\n<ul>\n<li>\n<p><code>common/header.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;h1&gt;这里是header&lt;/h1&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>common/footer.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;h1&gt;这里是footer&lt;/h1&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>common/index.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;测试common&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">      这种会把include的页面内容合并进本页面,最后是展示一个页面</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;%@ include file=<span class=\"string\">&quot;header.jsp&quot;</span> %&gt;</span><br><span class=\"line\">    &lt;h1&gt;网页主体&lt;/h1&gt;</span><br><span class=\"line\">    &lt;%@ include file=<span class=\"string\">&quot;footer.jsp&quot;</span> %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;HR /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">      jsp:include标签,本质是导入其他文件内容,最后是多个文件合为一个页面展示</span><br><span class=\"line\">      (更灵活,建议用这个)</span><br><span class=\"line\">        上面方法的因为是合并,所以很有可能出现变量重名,干扰的问题</span><br><span class=\"line\">        这个方法不同文件之间互不干扰</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;jsp:include page=<span class=\"string\">&quot;/common/header.jsp&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;h1&gt;网页主体&lt;/h1&gt;</span><br><span class=\"line\">    &lt;jsp:include page=<span class=\"string\">&quot;/common/footer.jsp&quot;</span> /&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"内置对象及作用域\">内置对象及作用域</h3>\n<ul>\n<li>\n<p>内置对象</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PageContext 存东西</span><br><span class=\"line\">Request 存东西</span><br><span class=\"line\">Response</span><br><span class=\"line\"><span class=\"keyword\">Session</span> 存东西</span><br><span class=\"line\">Application 【SerlvetContext】 存东西</span><br><span class=\"line\">config 【SerlvetConfig】</span><br><span class=\"line\"><span class=\"keyword\">out</span></span><br><span class=\"line\">page ，不用了解</span><br><span class=\"line\"><span class=\"keyword\">exception</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>操作对象 <code>demo/1.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--</span><br><span class=\"line\">* @?: *********************************************************************</span><br><span class=\"line\">* <span class=\"meta\">@Author</span>: Weidows</span><br><span class=\"line\">* <span class=\"meta\">@Date</span>: <span class=\"number\">2021</span>-<span class=\"number\">04</span>-<span class=\"number\">07</span> <span class=\"number\">16</span>:<span class=\"number\">29</span>:<span class=\"number\">42</span></span><br><span class=\"line\">* <span class=\"meta\">@LastEditors</span>: Weidows</span><br><span class=\"line\">* <span class=\"meta\">@LastEditTime</span>: <span class=\"number\">2021</span>-<span class=\"number\">04</span>-<span class=\"number\">07</span> <span class=\"number\">17</span>:<span class=\"number\">29</span>:<span class=\"number\">11</span></span><br><span class=\"line\">* <span class=\"meta\">@FilePath</span>: \\Weidows\\JavaWeb\\JSP\\src\\main\\webapp\\<span class=\"number\">1.</span>jsp</span><br><span class=\"line\">* <span class=\"meta\">@Description</span>:</span><br><span class=\"line\">* @!: *********************************************************************</span><br><span class=\"line\">* servlet <span class=\"number\">2.3</span>默认不支持EL表达式,需要开启.</span><br><span class=\"line\">--&gt;</span><br><span class=\"line\">&lt;%@ page isELIgnored=<span class=\"string\">&quot;false&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;index4&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;%--</span><br><span class=\"line\">      PageContext 存东西</span><br><span class=\"line\">      Request 存东西</span><br><span class=\"line\">      Response</span><br><span class=\"line\">      Session 存东西</span><br><span class=\"line\">      Application 【SerlvetContext】 存东西</span><br><span class=\"line\">      config 【SerlvetConfig】</span><br><span class=\"line\">      out</span><br><span class=\"line\">      page ，不用了解</span><br><span class=\"line\">      exception</span><br><span class=\"line\">    --%&gt;</span><br><span class=\"line\">    &lt;%</span><br><span class=\"line\">      pageContext.setAttribute(<span class=\"string\">&quot;name1&quot;</span>, <span class=\"string\">&quot;秦疆1号&quot;</span>); <span class=\"comment\">// 保存的数据只在一个页面中有效</span></span><br><span class=\"line\">      request.setAttribute(<span class=\"string\">&quot;name2&quot;</span>, <span class=\"string\">&quot;秦疆2号&quot;</span>); <span class=\"comment\">// 保存的数据只在一次请求中有效，请求转发会携带这个数据</span></span><br><span class=\"line\">      session.setAttribute(<span class=\"string\">&quot;name3&quot;</span>, <span class=\"string\">&quot;秦疆3号&quot;</span>); <span class=\"comment\">// 保存的数据只在一次会话中有效，从打开浏览器到关闭浏览器</span></span><br><span class=\"line\">      application.setAttribute(<span class=\"string\">&quot;name4&quot;</span>, <span class=\"string\">&quot;秦疆4号&quot;</span>); <span class=\"comment\">// 保存的数据只在服务器中有效，从打开服务器到关闭服务器</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 作用域从小到大</span></span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">name1</span> <span class=\"operator\">=</span> (String) pageContext.findAttribute(<span class=\"string\">&quot;name1&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">name2</span> <span class=\"operator\">=</span> (String) pageContext.findAttribute(<span class=\"string\">&quot;name2&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">name3</span> <span class=\"operator\">=</span> (String) pageContext.findAttribute(<span class=\"string\">&quot;name3&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">name4</span> <span class=\"operator\">=</span> (String) pageContext.findAttribute(<span class=\"string\">&quot;name4&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">name5</span> <span class=\"operator\">=</span> (String) pageContext.findAttribute(<span class=\"string\">&quot;name5&quot;</span>); <span class=\"comment\">// 这个不存在</span></span><br><span class=\"line\">    %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;%--</span><br><span class=\"line\">      EL表达式</span><br><span class=\"line\">      $&#123;内容&#125; == &lt;%= 内容 %&gt;</span><br><span class=\"line\">      用EL表达式的话,<span class=\"literal\">null</span>值不会显示,而使用JSP表达式会显示<span class=\"literal\">null</span>值</span><br><span class=\"line\">    --%&gt;</span><br><span class=\"line\">    &lt;h1&gt;取出的内容:&lt;/h1&gt;</span><br><span class=\"line\">    &lt;h3&gt;$&#123;name1&#125;&lt;/h3&gt;</span><br><span class=\"line\">    &lt;h3&gt;$&#123;name2&#125;&lt;/h3&gt;</span><br><span class=\"line\">    &lt;h3&gt;$&#123;name3&#125;&lt;/h3&gt;</span><br><span class=\"line\">    &lt;h3&gt;$&#123;name4&#125;&lt;/h3&gt;</span><br><span class=\"line\">    &lt;HR&gt;</span><br><span class=\"line\">    &lt;h3&gt;$&#123;name5&#125;&lt;/h3&gt;</span><br><span class=\"line\">    &lt;h3&gt;&lt;%=name5%&gt;&lt;/h3&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtAMc.png\" alt=\"20210407173249\" />\n<hr>\n</li>\n<li>\n<p>作用域</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtiZr.png\" alt=\"20210407175219\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"JSP-标签\">JSP 标签</h3>\n<ul>\n<li>\n<p>例子: 使用 JSP 标签转发页面,读取参数并显示出来.</p>\n</li>\n<li>\n<p><code>src/main/webapp/demo/JSP-label/forward.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;JSP-label&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;%-- 转发request携带的参数(注意JSP标签内不能有注释,会报错<span class=\"number\">500</span>) --%&gt;</span><br><span class=\"line\">&lt;jsp:forward page=<span class=\"string\">&quot;forward.jsp&quot;</span>&gt;</span><br><span class=\"line\">  &lt;jsp:param name=<span class=\"string\">&quot;name&quot;</span> value=<span class=\"string\">&quot;kuangshen&quot;</span>/&gt;</span><br><span class=\"line\">  &lt;jsp:param name=<span class=\"string\">&quot;age&quot;</span> value=<span class=\"string\">&quot;12&quot;</span>/&gt;</span><br><span class=\"line\">&lt;/jsp:forward&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/webapp/demo/JSP-label/forward.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@ page isELIgnored=<span class=\"string\">&quot;false&quot;</span> %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;转发页面&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">  pageContext.setAttribute(<span class=\"string\">&quot;name&quot;</span>, request.getParameter(<span class=\"string\">&quot;name&quot;</span>));</span><br><span class=\"line\">  pageContext.setAttribute(<span class=\"string\">&quot;age&quot;</span>, request.getParameter(<span class=\"string\">&quot;age&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;h3&gt;姓名: $&#123;name&#125;&lt;/h3&gt;</span><br><span class=\"line\">&lt;h3&gt;年龄: $&#123;age&#125;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"JSTL-表达式\">JSTL 表达式</h3>\n<blockquote>\n<p>JSTL 标签库的使用就是为了弥补 HTML 标签的不足,功能上与 Java 相似.</p>\n</blockquote>\n<ul>\n<li>\n<p>分类</p>\n<ul>\n<li>\n<p>格式化标签</p>\n</li>\n<li>\n<p>SQL 标签</p>\n</li>\n<li>\n<p>XML 标签</p>\n</li>\n<li>\n<p>JSTL 函数</p>\n</li>\n<li>\n<p>核心标签 （掌握部分）</p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtnST.png\" alt=\"20210407195349\" />\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p>使用</p>\n<ul>\n<li>\n<p>在 pom.xml 中导入依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jstl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Standard标签库 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>taglibs<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>standard<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>在 JSP 页面还需要引入对应要使用的 taglib,这里只用到 core:</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ taglib prefix=<span class=\"string\">&quot;c&quot;</span> uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>if</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt; &lt;%@ taglib</span><br><span class=\"line\">prefix=<span class=\"string\">&quot;c&quot;</span> uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt; &lt;%@ page</span><br><span class=\"line\">isELIgnored=<span class=\"string\">&quot;false&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;<span class=\"keyword\">if</span>测试&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;%--action是代码提交位置--%&gt;</span><br><span class=\"line\">    &lt;form action=<span class=\"string\">&quot;if.jsp&quot;</span> method=<span class=\"string\">&quot;post&quot;</span>&gt;</span><br><span class=\"line\">      &lt;label&gt;</span><br><span class=\"line\">        用户名:</span><br><span class=\"line\">        &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;username&quot;</span> /&gt;</span><br><span class=\"line\">      &lt;/label&gt;</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;submit&quot;</span> value=<span class=\"string\">&quot;登录&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;/form&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;hr /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;%--</span><br><span class=\"line\">      EL表达式获取表单中的数据 $&#123;param.参数名&#125;</span><br><span class=\"line\">      判断如果提交的用户名是admin，则登录成功,并把isAdmin置为<span class=\"literal\">true</span></span><br><span class=\"line\">      --%&gt;</span><br><span class=\"line\">    &lt;c:<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;$&#123;param.username==&#x27;admin&#x27;&#125;&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;isAdmin&quot;</span>&gt;</span><br><span class=\"line\">      &lt;c:out value=<span class=\"string\">&quot;管理员欢迎您！&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;/c:<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>choose-when</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;%-- Created by IntelliJ IDEA. User: <span class=\"number\">29845</span> Date: <span class=\"number\">2021</span>/<span class=\"number\">4</span>/<span class=\"number\">8</span> Time: <span class=\"number\">20</span>:<span class=\"number\">38</span> To change</span><br><span class=\"line\"><span class=\"built_in\">this</span> template use File | Settings | File Templates. --%&gt; &lt;%@ page</span><br><span class=\"line\">contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt; &lt;%@ page</span><br><span class=\"line\">isELIgnored=<span class=\"string\">&quot;false&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;choose-when测试&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;form action=<span class=\"string\">&quot;&quot;</span> method=<span class=\"string\">&quot;post&quot;</span>&gt;</span><br><span class=\"line\">      &lt;label&gt;</span><br><span class=\"line\">        &lt;%--定义一个变量score--%&gt;</span><br><span class=\"line\">        &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;score&quot;</span> /&gt;</span><br><span class=\"line\">      &lt;/label&gt;</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;submit&quot;</span> name=<span class=\"string\">&quot;提交&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;/form&gt;</span><br><span class=\"line\">    &lt;c:choose&gt;</span><br><span class=\"line\">      &lt;c:when test=<span class=\"string\">&quot;$&#123;param.score&gt;=90&#125;&quot;</span>&gt; 你的成绩为优秀 &lt;/c:when&gt;</span><br><span class=\"line\">      &lt;c:when test=<span class=\"string\">&quot;$&#123;param.score&gt;=80&#125;&quot;</span>&gt; 你的成绩为一般 &lt;/c:when&gt;</span><br><span class=\"line\">      &lt;c:when test=<span class=\"string\">&quot;$&#123;param.score&gt;=70&#125;&quot;</span>&gt; 你的成绩为良好 &lt;/c:when&gt;</span><br><span class=\"line\">      &lt;c:when test=<span class=\"string\">&quot;$&#123;param.score&lt;=60&#125;&quot;</span>&gt; 你的成绩为不及格 &lt;/c:when&gt;</span><br><span class=\"line\">    &lt;/c:choose&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>forEach</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ taglib prefix=<span class=\"string\">&quot;c&quot;</span> uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@ page <span class=\"keyword\">import</span>=<span class=\"string\">&quot;java.util.ArrayList&quot;</span> %&gt;&lt;%--</span><br><span class=\"line\">  Created by IntelliJ IDEA.</span><br><span class=\"line\">  User: <span class=\"number\">29845</span></span><br><span class=\"line\">  Date: <span class=\"number\">2021</span>/<span class=\"number\">4</span>/<span class=\"number\">8</span></span><br><span class=\"line\">  Time: <span class=\"number\">20</span>:<span class=\"number\">59</span></span><br><span class=\"line\">  To change <span class=\"built_in\">this</span> template use File | Settings | File Templates.</span><br><span class=\"line\">--%&gt;</span><br><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@ page isELIgnored=<span class=\"string\">&quot;false&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;forEach&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">  ArrayList&lt;String&gt; setPeople = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">  setPeople.add(<span class=\"number\">0</span>, <span class=\"string\">&quot;张三&quot;</span>);</span><br><span class=\"line\">  setPeople.add(<span class=\"number\">1</span>, <span class=\"string\">&quot;李四&quot;</span>);</span><br><span class=\"line\">  setPeople.add(<span class=\"number\">2</span>, <span class=\"string\">&quot;王五&quot;</span>);</span><br><span class=\"line\">  setPeople.add(<span class=\"number\">3</span>, <span class=\"string\">&quot;赵六&quot;</span>);</span><br><span class=\"line\">  setPeople.add(<span class=\"number\">4</span>, <span class=\"string\">&quot;田六&quot;</span>);</span><br><span class=\"line\">  request.setAttribute(<span class=\"string\">&quot;list&quot;</span>, setPeople);</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;%--</span><br><span class=\"line\">  <span class=\"keyword\">var</span> , 每一次遍历出来的变量</span><br><span class=\"line\">  items, 要遍历的对象</span><br><span class=\"line\">  可选:</span><br><span class=\"line\">    begin,   哪里开始</span><br><span class=\"line\">    end,     到哪里</span><br><span class=\"line\">    step,   步长</span><br><span class=\"line\">--%&gt;</span><br><span class=\"line\">&lt;c:forEach <span class=\"keyword\">var</span>=<span class=\"string\">&quot;getPeople&quot;</span> items=<span class=\"string\">&quot;$&#123;list&#125;&quot;</span> begin=<span class=\"string\">&quot;1&quot;</span> end=<span class=\"string\">&quot;3&quot;</span> step=<span class=\"string\">&quot;1&quot;</span>&gt;</span><br><span class=\"line\">  &lt;c:out value=<span class=\"string\">&quot;$&#123;getPeople&#125;&quot;</span>/&gt;</span><br><span class=\"line\">  &lt;br/&gt;</span><br><span class=\"line\">&lt;/c:forEach&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JavaBean\">JavaBean</h2>\n<ul>\n<li>\n<p>JavaBean(实体类) 有特定的写法:</p>\n<ul>\n<li>\n<p>一个无参构造</p>\n</li>\n<li>\n<p>属性必须私有化</p>\n</li>\n<li>\n<p>必须有对应的 get/set 方法；</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>一般用来和数据库的字段做映射 ORM(对象关系映射)</p>\n<ul>\n<li>\n<p>表—&gt;类</p>\n</li>\n<li>\n<p>字段–&gt;属性</p>\n</li>\n<li>\n<p>行记录----&gt;对象</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>样例 Java 类: <code>src/main/java/pojo/People.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> pojo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">People</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> age;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">People</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">People</span><span class=\"params\">(<span class=\"type\">int</span> id, String name, <span class=\"type\">int</span> age, String address)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.id = id;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.address = address;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getId</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> id;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setId</span><span class=\"params\">(<span class=\"type\">int</span> id)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.id = id;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">getName</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setName</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getAge</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setAge</span><span class=\"params\">(<span class=\"type\">int</span> age)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">getAddress</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> address;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setAddress</span><span class=\"params\">(String address)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.address = address;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">toString</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;People&#123;&quot;</span> +</span><br><span class=\"line\">        <span class=\"string\">&quot;id=&quot;</span> + id +</span><br><span class=\"line\">        <span class=\"string\">&quot;, name=&#x27;&quot;</span> + name + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">        <span class=\"string\">&quot;, age=&quot;</span> + age +</span><br><span class=\"line\">        <span class=\"string\">&quot;, address=&#x27;&quot;</span> + address + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">        <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">People</span>(<span class=\"number\">1</span>, <span class=\"string\">&quot;秦疆1号&quot;</span>, <span class=\"number\">3</span>, <span class=\"string\">&quot;西安&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">People</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;秦疆2号&quot;</span>, <span class=\"number\">3</span>, <span class=\"string\">&quot;西安&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">People</span>(<span class=\"number\">3</span>, <span class=\"string\">&quot;秦疆3号&quot;</span>, <span class=\"number\">3</span>, <span class=\"string\">&quot;西安&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>样例 JSP: <code>src/main/webapp/javaBean.jsp</code></p>\n<ul>\n<li>这里只是简单介绍 JavaBean 及其使用,并不推荐用 JSP 标签来操作 JavaBean,还是推荐用 Java 代码操作实体类对象.</li>\n</ul>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%-- Created by IntelliJ IDEA. User: <span class=\"number\">29845</span> Date: <span class=\"number\">2021</span>/<span class=\"number\">4</span>/<span class=\"number\">8</span> Time: <span class=\"number\">23</span>:<span class=\"number\">32</span> To change</span><br><span class=\"line\"><span class=\"built_in\">this</span> template use File | Settings | File Templates. --%&gt; &lt;%@ page</span><br><span class=\"line\">contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;javaBean测试&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;jsp:useBean id=<span class=\"string\">&quot;people&quot;</span> class=<span class=\"string\">&quot;pojo.People&quot;</span> scope=<span class=\"string\">&quot;page&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:setProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;id&quot;</span> value=<span class=\"string\">&quot;1&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:setProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;name&quot;</span> value=<span class=\"string\">&quot;狂神说&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:setProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;age&quot;</span> value=<span class=\"string\">&quot;3&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:setProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;address&quot;</span> value=<span class=\"string\">&quot;西安&quot;</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    id:</span><br><span class=\"line\">    &lt;jsp:getProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;id&quot;</span> /&gt;</span><br><span class=\"line\">    name:</span><br><span class=\"line\">    &lt;jsp:getProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;name&quot;</span> /&gt;</span><br><span class=\"line\">    age:</span><br><span class=\"line\">    &lt;jsp:getProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;age&quot;</span> /&gt;</span><br><span class=\"line\">    address:</span><br><span class=\"line\">    &lt;jsp:getProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;address&quot;</span> /&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb",
                "servlet",
                "jsp"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/3/",
            "url": "https://weidows.github.io/post/Java/Web/3/",
            "title": "🥼JavaWeb~(叁)Cookie/Session验证,JSP开篇",
            "date_published": "2021-03-29T10:21:52.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-01 00:25:48\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\3.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#servlet\">Servlet</a>\n<ul>\n<li><a href=\"#httpservletrequest\">HttpServletRequest</a></li>\n</ul>\n</li>\n<li><a href=\"#cookiesession\">Cookie、Session</a>\n<ul>\n<li><a href=\"#cookie\">Cookie</a></li>\n<li><a href=\"#session\">Session</a></li>\n</ul>\n</li>\n<li><a href=\"#jsp\">JSP</a>\n<ul>\n<li><a href=\"#%E4%BB%8B%E7%BB%8D\">介绍</a></li>\n<li><a href=\"#%E4%BE%9D%E8%B5%96%E5%AF%BC%E5%85%A5\">依赖导入</a></li>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95\">基本语法</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"笔记代码-5\"><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Servlet-3\">Servlet</h2>\n<h3 id=\"HttpServletRequest\">HttpServletRequest</h3>\n<ul>\n<li>\n<p>例子: 在 index.jsp 提交表单信息给 <code>/login</code>,此 Servlet 后端读取发送来的表单信息并在页面输出显示.</p>\n<ul>\n<li>\n<p>删掉并用 idea 重建 index.jsp,会补齐一些编码信息.</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page</span><br><span class=\"line\">    contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;登录页面&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;登录&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div style=<span class=\"string\">&quot;text-align: center&quot;</span>&gt;</span><br><span class=\"line\">  &lt;form action=<span class=\"string\">&quot;/login&quot;</span> method=<span class=\"string\">&quot;post&quot;</span>&gt;</span><br><span class=\"line\">    &lt;label&gt;</span><br><span class=\"line\">      用户名:</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;username&quot;</span> placeholder=<span class=\"string\">&quot;无&quot;</span>/&gt;&lt;br&gt;</span><br><span class=\"line\">    &lt;/label&gt;</span><br><span class=\"line\">    &lt;label&gt;</span><br><span class=\"line\">      密码:</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;password&quot;</span> name=<span class=\"string\">&quot;password&quot;</span> placeholder=<span class=\"string\">&quot;&quot;</span>/&gt;&lt;br&gt;</span><br><span class=\"line\">    &lt;/label&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    爱好:</span><br><span class=\"line\">    &lt;label&gt;&lt;input type=<span class=\"string\">&quot;checkbox&quot;</span> name=<span class=\"string\">&quot;hobbys&quot;</span> value=<span class=\"string\">&quot;女孩&quot;</span>/&gt;女孩&lt;/label&gt;</span><br><span class=\"line\">    &lt;label&gt;&lt;input type=<span class=\"string\">&quot;checkbox&quot;</span> name=<span class=\"string\">&quot;hobbys&quot;</span> value=<span class=\"string\">&quot;代码&quot;</span>/&gt;代码&lt;/label&gt;</span><br><span class=\"line\">    &lt;label&gt;&lt;input type=<span class=\"string\">&quot;checkbox&quot;</span> name=<span class=\"string\">&quot;hobbys&quot;</span> value=<span class=\"string\">&quot;动漫&quot;</span>/&gt;动漫&lt;/label&gt;</span><br><span class=\"line\">    &lt;label&gt;&lt;input type=<span class=\"string\">&quot;checkbox&quot;</span> name=<span class=\"string\">&quot;hobbys&quot;</span> value=<span class=\"string\">&quot;美食&quot;</span>/&gt;美食&lt;/label&gt;&lt;br&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">&quot;submit&quot;</span>&gt;</span><br><span class=\"line\">  &lt;/form&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/java/servlet/Login.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Arrays;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Login</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  *</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> -<span class=\"number\">7958099474557186407L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    req.setCharacterEncoding(<span class=\"string\">&quot;utf8&quot;</span>);</span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\">    resp.setCharacterEncoding(<span class=\"string\">&quot;utf8&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;password&quot;</span>);</span><br><span class=\"line\">    String[] hobbys = req.getParameterValues(<span class=\"string\">&quot;hobbys&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;username: &quot;</span> + username);</span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;password: &quot;</span> + password);</span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;爱好: &quot;</span> + Arrays.toString(hobbys));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>login<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.Login<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>login<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/login<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Cookie、Session\">Cookie、Session</h2>\n<ul>\n<li>\n<p>Cookie 是服务端在客户端上做的标记,用请求和响应进行传递,用来记录用户的访问信息 (客户端技术)</p>\n</li>\n<li>\n<p>session 是在服务端上保存用户的访问信息 (服务端技术)</p>\n</li>\n</ul>\n<h3 id=\"Cookie\">Cookie</h3>\n<ul>\n<li>\n<p>例子: 访问 <code>/cookie</code> 时,会显示上一次访问此 URL 的时间 (这个时间通过服务端传给客户端 Cookie 来记录)</p>\n<ul>\n<li>\n<p><code>src/main/java/servlet/HelloCookie.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.Cookie;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloCookie</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    req.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">    resp.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 获取客户端请求中携带的cookie</span></span><br><span class=\"line\">    Cookie[] cookies = req.getCookies();</span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"variable\">isFirst</span> <span class=\"operator\">=</span> <span class=\"literal\">true</span>; <span class=\"comment\">// 标志是否是第一次访问</span></span><br><span class=\"line\"></span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;你上一次访问时间是: &quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Cookie cookie : cookies) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (cookie.getName().equals(<span class=\"string\">&quot;LastLoginTime&quot;</span>)) &#123;</span><br><span class=\"line\">        isFirst = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        writer.println(cookie.getValue());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isFirst) &#123;</span><br><span class=\"line\">      writer.println(<span class=\"string\">&quot;这次是第一次访问.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 响应携带cookie返回给客户端</span></span><br><span class=\"line\">    <span class=\"type\">Cookie</span> <span class=\"variable\">lastLoginTime</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Cookie</span>(<span class=\"string\">&quot;LastLoginTime&quot;</span>, System.currentTimeMillis() + <span class=\"string\">&quot;&quot;</span>);<span class=\"comment\">// 非字符串+&quot;&quot; = 字符串</span></span><br><span class=\"line\">    resp.addCookie(lastLoginTime);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>cookie<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.HelloCookie<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>cookie<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/cookie<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>常用方法</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cookie[] cookies = req.getCookies(); <span class=\"comment\">//获得Cookie</span></span><br><span class=\"line\">cookie.getName(); <span class=\"comment\">//获得cookie中的key</span></span><br><span class=\"line\">cookie.getValue(); <span class=\"comment\">//获得cookie中的vlaue</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Cookie</span>(<span class=\"string\">&quot;lastLoginTime&quot;</span>, System.currentTimeMillis()+<span class=\"string\">&quot;&quot;</span>); <span class=\"comment\">//新建一个cookie</span></span><br><span class=\"line\">cookie.setMaxAge(<span class=\"number\">24</span>*<span class=\"number\">60</span>*<span class=\"number\">60</span>); <span class=\"comment\">//设置cookie的有效期</span></span><br><span class=\"line\">resp.addCookie(cookie); <span class=\"comment\">//响应给客户端一个cookie</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>一些细节</p>\n<ul>\n<li>\n<p>cookie 大小和数量</p>\n<ul>\n<li>不同浏览器支持的大小和数量不一样,大小都是 4K 左右,数量为每域名几十到无数个不等.</li>\n</ul>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/u011127019/article/details/89206016\">cookie 大小限制</a></p>\n</blockquote>\n</li>\n<li>\n<p>设置存活期:</p>\n<ul>\n<li>\n<p>不设置: 关闭浏览器自动失效</p>\n</li>\n<li>\n<p>设置为 0,立即失效.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>遇到传输的中文乱码问题,可以用 URLEncoder 编码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">URLEncoder.encode(<span class=\"string\">&quot;齐下无贰&quot;</span>,<span class=\"string\">&quot;utf-8&quot;</span>)</span><br><span class=\"line\">URLDecoder.decode(cookie.getValue(),<span class=\"string\">&quot;UTF-8&quot;</span>)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"Session\">Session</h3>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVt166.png\" alt=\"20210330120835\" />\n</blockquote>\n<ul>\n<li>\n<p>cookie 用来传输一些字符串验证信息,并存放在客户端中.</p>\n</li>\n<li>\n<p>而 session 可以存放更宽泛的数据(对象,文件等等),其数据存放在服务端.</p>\n<ul>\n<li>\n<p>服务端传给客户端一个名为 <code>JSESSIONID</code> 的 cookie 用来验证 session</p>\n</li>\n<li>\n<p>一个 Seesion 对象独占一个浏览器,不同浏览器有不同的 session</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>例子: 开启服务器并访问第一个页面 <code>localhost:8080</code> 时,session 就被创建了,然后访问 <code>/setSession</code>设置 person 信息,再访问 <code>/getSession</code>会显示 person 信息.</p>\n<ul>\n<li>\n<p><code>src/main/java/servlet/SetSession.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SetSession</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//解决乱码问题</span></span><br><span class=\"line\">    req.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">    resp.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//得到Session和writer</span></span><br><span class=\"line\">    <span class=\"type\">HttpSession</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> req.getSession();</span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//给Session中存东西</span></span><br><span class=\"line\">    session.setAttribute(<span class=\"string\">&quot;person&quot;</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Person</span>(<span class=\"string\">&quot;齐下无贰&quot;</span>, <span class=\"number\">100</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//获取Session的ID</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">sessionId</span> <span class=\"operator\">=</span> session.getId();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//判断Session是不是新创建</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (session.isNew()) &#123;</span><br><span class=\"line\">      writer.println(<span class=\"string\">&quot;session创建成功,ID: &quot;</span> + sessionId);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      writer.println(<span class=\"string\">&quot;session已经在服务器中存在了,ID: &quot;</span> + sessionId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Person</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> age;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Person</span><span class=\"params\">(String name, <span class=\"type\">int</span> age)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setName</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setAge</span><span class=\"params\">(<span class=\"type\">int</span> age)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">toString</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Person&#123;&quot;</span> +</span><br><span class=\"line\">        <span class=\"string\">&quot;name=&#x27;&quot;</span> + name + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">        <span class=\"string\">&quot;, age=&quot;</span> + age +</span><br><span class=\"line\">        <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>src/main/java/servlet/GetSession.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">GetSession</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> -<span class=\"number\">4606977948300644893L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"comment\">//解决乱码问题</span></span><br><span class=\"line\">    req.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">    resp.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//得到Session和writer</span></span><br><span class=\"line\">    <span class=\"type\">HttpSession</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> req.getSession();</span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 获取属性并输出</span></span><br><span class=\"line\">    <span class=\"type\">Person</span> <span class=\"variable\">person</span> <span class=\"operator\">=</span> (Person) session.getAttribute(<span class=\"string\">&quot;person&quot;</span>);</span><br><span class=\"line\">    writer.println(person);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 移除属性</span></span><br><span class=\"line\">    session.removeAttribute(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//手动注销Session</span></span><br><span class=\"line\">    session.invalidate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>setSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.SetSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>getSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.GetSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>setSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/setSession<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>getSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/getSession<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>session 有效期问题</p>\n<ul>\n<li>\n<p>默认失效时间是 30 分钟</p>\n</li>\n<li>\n<p>是从 session 断开连接(浏览器关闭开始计算的),而不是从 session 连接开始计算</p>\n</li>\n<li>\n<p>可以在 web.xml 中设置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">session-config</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">session-timeout</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">session-timeout</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/fanbingfu/article/details/78318855\">关于 session 的失效时间和过期</a></p>\n</blockquote>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JSP\">JSP</h2>\n<h3 id=\"介绍\">介绍</h3>\n<ul>\n<li>\n<p>JSP (Java Server Pages),写法类似 HTML 的动态 Java 页面</p>\n</li>\n<li>\n<p>最终 JSP 会被转换为一个 Java 类,实际上本质就是 <code>Servlet 的简化实现</code>.</p>\n<ul>\n<li>\n<p><code>*.jsp -&gt; *.java -&gt; *.class</code></p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtmc0.png\" alt=\"20210403111103\" />\n</blockquote>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>jsp 转换为的 java 文件核心部分:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//初始化</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">_jspInit</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//销毁</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">_jspDestroy</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//JSPService</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">_jspService</span><span class=\"params\">(HttpServletRequest request,HttpServletResponse response)</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>JSPService 内初始化的对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> javax.servlet.jsp.PageContext pageContext;  <span class=\"comment\">//页面上下文</span></span><br><span class=\"line\">javax.servlet.http.<span class=\"type\">HttpSession</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;    <span class=\"comment\">//session</span></span><br><span class=\"line\"><span class=\"keyword\">final</span> javax.servlet.ServletContext application;   <span class=\"comment\">//Context-&gt;application</span></span><br><span class=\"line\"><span class=\"keyword\">final</span> javax.servlet.ServletConfig config;         <span class=\"comment\">//config</span></span><br><span class=\"line\">javax.servlet.jsp.<span class=\"type\">JspWriter</span> <span class=\"variable\">out</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;           <span class=\"comment\">//writer-&gt;out</span></span><br><span class=\"line\"><span class=\"keyword\">final</span> java.lang.<span class=\"type\">Object</span> <span class=\"variable\">page</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>;               <span class=\"comment\">//当前页面-&gt;page</span></span><br><span class=\"line\">HttpServletRequest request                        <span class=\"comment\">//请求</span></span><br><span class=\"line\">HttpServletResponse response                      <span class=\"comment\">//响应</span></span><br><span class=\"line\"></span><br><span class=\"line\">response.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\">pageContext = _jspxFactory.getPageContext(<span class=\"built_in\">this</span>, request, response,<span class=\"literal\">null</span>, <span class=\"literal\">true</span>, <span class=\"number\">8192</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">_jspx_page_context = pageContext;</span><br><span class=\"line\">application = pageContext.getServletContext();</span><br><span class=\"line\">config = pageContext.getServletConfig();</span><br><span class=\"line\">session = pageContext.getSession();</span><br><span class=\"line\">out = pageContext.getOut();</span><br><span class=\"line\">_jspx_out = out;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>JSP 中可以写 Java 代码,Java 代码会原封不动的正常执行</p>\n<ul>\n<li>HTML 代码在 JSP-&gt;Java 时会被转换成 <code>out.write(&quot;&lt;html&gt;\\r\\n&quot;);</code> 这种形式.</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"依赖导入\">依赖导入</h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- servlet依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.0.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- JSP依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet.jsp<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jstl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Standard标签库 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>taglibs<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>standard<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"基本语法-2\">基本语法</h3>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page <span class=\"keyword\">import</span>=<span class=\"string\">&quot;java.util.Date&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;测试&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;!-- 这是HTML的注释,会在客户端显示 --&gt;</span><br><span class=\"line\">    &lt;%-- 这是JSP注释,不会在客户端显示 --%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">      JSP表达式: 用来将程序输出到客户端</span><br><span class=\"line\">      &lt;%= <span class=\"string\">&quot;变量或者表达式&quot;</span>%&gt;</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;%= <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">      JSP脚本片段</span><br><span class=\"line\">      &lt;% jsp脚本片段 %&gt;</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;%</span><br><span class=\"line\">      <span class=\"type\">int</span> <span class=\"variable\">sum</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt;=<span class=\"number\">100</span> ; i++) &#123; sum+=i; &#125;</span><br><span class=\"line\">      out.println(<span class=\"string\">&quot;&lt;h1&gt;Sum=&quot;</span>+sum+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">    %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">      JSP声明</span><br><span class=\"line\">      会被编译到JSP生成Java的类中！其他的，就会被生成到_jspService方法中！</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;%!</span><br><span class=\"line\">      <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Loading Servlet!&quot;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">private</span> <span class=\"type\">int</span> <span class=\"variable\">globalVar</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">kuang</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;进入了方法Kuang！&quot;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    %&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb",
                "servlet",
                "cookie",
                "session",
                "jsp"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/2/",
            "url": "https://weidows.github.io/post/Java/Web/2/",
            "title": "🥼JavaWeb~(贰)->Servlet",
            "date_published": "2021-03-29T09:45:58.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-01 00:23:51\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\2.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#servlet\">Servlet</a>\n<ul>\n<li><a href=\"#%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91\">请求转发</a></li>\n<li><a href=\"#%E8%AF%BB%E5%8F%96-properties\">读取 properties</a></li>\n<li><a href=\"#httpservletresponse\">HttpServletResponse</a>\n<ul>\n<li><a href=\"#%E5%93%8D%E5%BA%94\">响应</a></li>\n<li><a href=\"#%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6\">下载文件</a></li>\n<li><a href=\"#%E9%AA%8C%E8%AF%81%E7%A0%81\">验证码</a></li>\n<li><a href=\"#%E9%87%8D%E5%AE%9A%E5%90%91\">重定向</a></li>\n<li><a href=\"#%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4%E5%93%8D%E5%BA%94\">表单提交+响应</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"笔记代码-4\"><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Servlet-2\">Servlet</h2>\n<h3 id=\"请求转发\">请求转发</h3>\n<ul>\n<li>\n<p>把 <code>/helloParameter</code> 转发到 <code>/HelloDispatcher</code></p>\n<ul>\n<li>\n<p>转发后这两个地址都会显示<code>/helloParameter</code>的内容</p>\n</li>\n<li>\n<p>另外一个手段: <code>重定向</code> ,重定向之后原地址就不可访问了</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p><code>src/main/java/com/weidows/HelloDispatcher.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloDispatcher</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">ServletContext</span> <span class=\"variable\">context</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getServletContext();</span><br><span class=\"line\">    context.getRequestDispatcher(<span class=\"string\">&quot;/helloParameter&quot;</span>).forward(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code> (在上面<code>初始化参数</code>基础上添加的)</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>HelloDispatcher<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloDispatcher<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>HelloDispatcher<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/HelloDispatcher<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"读取-properties\">读取 properties</h3>\n<blockquote>\n<p>我们开发的项目需要进行打包处理,所以不能直接引用 <code>src/</code> 里面的资源,需要引用对应 <code>target/</code> 内部的.</p>\n</blockquote>\n<ul>\n<li>\n<p>这种资源文件一般放在 <code>src/main/resources</code> 里面,如果放在 <code>src/main/java</code>里面默认情况下会出现无法被 maven 导出的情况 (通常我们称 resources 和 java 为 classpath)</p>\n<ul>\n<li>\n<p><code>src/main/java</code> 里面默认情况下只会编译并导出 <code>*.java</code>,不会管其他类型文件,可以修改 pom.xml 来使之生效:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">resource</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">directory</span>&gt;</span>src/main/java<span class=\"tag\">&lt;/<span class=\"name\">directory</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">includes</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">include</span>&gt;</span>**/*.properties<span class=\"tag\">&lt;/<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">include</span>&gt;</span>**/*.xml<span class=\"tag\">&lt;/<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">includes</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">filtering</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">filtering</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">resource</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>生成文件路径:</p>\n<ul>\n<li>\n<p>如果放在 resources 中,其生成路径为 <code>target/demo-2/WEB-INF/classes/db.properties</code></p>\n</li>\n<li>\n<p>如果放在 java 中,生成路径为 <code>target/demo-2/WEB-INF/classes/com/weidows/db.properties</code></p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>例子: 读取打包后的 properties 并显示.</p>\n<ul>\n<li>\n<p><code>src/main/java/com/weidows/HelloProperties.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloProperties</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> -<span class=\"number\">437042901757770674L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">prop</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">    <span class=\"comment\">// 生成后的路径: target/demo-2/WEB-INF/classes/db.properties</span></span><br><span class=\"line\">    prop.load(<span class=\"built_in\">this</span>.getServletContext().getResourceAsStream(<span class=\"string\">&quot;/WEB-INF/classes/db.properties&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> prop.getProperty(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">pwd</span> <span class=\"operator\">=</span> prop.getProperty(<span class=\"string\">&quot;password&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    resp.getWriter().print(<span class=\"string\">&quot;username: &quot;</span> + user + <span class=\"string\">&quot;\\npassword: &quot;</span> + pwd);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>src/main/resources/db.properties</code></p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">username</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"attr\">password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloProperties<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloProperties<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloProperties<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/helloProperties<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"HttpServletResponse\">HttpServletResponse</h3>\n<ul>\n<li>\n<p>Web 服务器接收到 http 请求信息,会创建 HttpServletRequest 和 HttpServletResponse 的两个对象</p>\n<ul>\n<li>\n<p>前者负责客户端传来的参数</p>\n</li>\n<li>\n<p>后者负责服务端响应的信息</p>\n</li>\n</ul>\n<hr>\n</li>\n</ul>\n<h4 id=\"响应\">响应</h4>\n<ul>\n<li>\n<p>向浏览器发送数据的方法:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ServletOutputstream <span class=\"title function_\">getOutputstream</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException</span><br><span class=\"line\">Printwriter <span class=\"title function_\">getwriter</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>负责向浏览器发送响应头的方法:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setCharacterEncoding</span><span class=\"params\">(String var1)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setContentLength</span><span class=\"params\">(<span class=\"type\">int</span> var1)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setContentLengthLong</span><span class=\"params\">(<span class=\"type\">long</span> var1)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setContentType</span><span class=\"params\">(String var1)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setDateHeader</span><span class=\"params\">(String varl,<span class=\"type\">long</span> var2)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">addDateHeader</span><span class=\"params\">(String var1,<span class=\"type\">long</span> var2)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setHeader</span><span class=\"params\">(String var1,String var2)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">addHeader</span><span class=\"params\">(String var1,String var2)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setIntHeader</span><span class=\"params\">(String var1,<span class=\"type\">int</span> var2)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">addIntHeader</span><span class=\"params\">(String varl,<span class=\"type\">int</span> var2)</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h4 id=\"下载文件\">下载文件</h4>\n<ul>\n<li>\n<p><code>src/main/java/servlet/FileServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URLEncoder;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FileServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> -<span class=\"number\">2643615496012694161L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1. 要获取下载文件的路径</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">realPath</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getServletContext().getRealPath(<span class=\"string\">&quot;/WEB-INF/classes/test.txt&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;下载文件的路径：&quot;</span> + realPath);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2. 下载的文件名</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">fileName</span> <span class=\"operator\">=</span> realPath.substring(realPath.lastIndexOf(<span class=\"string\">&quot;\\\\&quot;</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;文件名: &quot;</span> + fileName);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3. 设置想办法让浏览器能够支持(Content-Disposition)下载我们需要的东西,中文文件名URLEncoder.encode编码，否则有可能乱码</span></span><br><span class=\"line\">    resp.setHeader(<span class=\"string\">&quot;Content-Disposition&quot;</span>, <span class=\"string\">&quot;attachment;filename=&quot;</span> + URLEncoder.encode(fileName, <span class=\"string\">&quot;UTF-8&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 4. 获取下载文件的输入流</span></span><br><span class=\"line\">    <span class=\"type\">FileInputStream</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FileInputStream</span>(realPath);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 5. 创建缓冲区</span></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">len</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"type\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 6. 获取OutputStream对象</span></span><br><span class=\"line\">    <span class=\"type\">ServletOutputStream</span> <span class=\"variable\">out</span> <span class=\"operator\">=</span> resp.getOutputStream();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 7. 将FileOutputStream流写入到buffer缓冲区,使用OutputStream将缓冲区中的数据输出到客户端！</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ((len = in.read(buffer)) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      out.write(buffer, <span class=\"number\">0</span>, len);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 8. 关闭连接</span></span><br><span class=\"line\">    in.close();</span><br><span class=\"line\">    out.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/resources/test.txt</code></p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">此处内容随意,比如写个 &quot;测试&quot;.</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>fileServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.FileServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>fileServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/fileServlet<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h4 id=\"验证码\">验证码</h4>\n<ul>\n<li>\n<p><code>src/main/java/servlet/ImageServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.imageio.ImageIO;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.image.BufferedImage;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Random;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ImageServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> <span class=\"number\">4590298452958016399L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//如何让浏览器3秒自动刷新一次;</span></span><br><span class=\"line\">    resp.setHeader(<span class=\"string\">&quot;refresh&quot;</span>, <span class=\"string\">&quot;3&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//在内存中创建一个图片</span></span><br><span class=\"line\">    <span class=\"type\">BufferedImage</span> <span class=\"variable\">image</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BufferedImage</span>(<span class=\"number\">80</span>, <span class=\"number\">20</span>, BufferedImage.TYPE_INT_RGB);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//得到图片</span></span><br><span class=\"line\">    <span class=\"type\">Graphics2D</span> <span class=\"variable\">graphics</span> <span class=\"operator\">=</span> (Graphics2D) image.getGraphics(); <span class=\"comment\">//笔</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//设置图片的背景颜色</span></span><br><span class=\"line\">    graphics.setColor(Color.white);</span><br><span class=\"line\">    graphics.fillRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">80</span>, <span class=\"number\">20</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//给图片写数据</span></span><br><span class=\"line\">    graphics.setColor(Color.BLUE);</span><br><span class=\"line\">    graphics.setFont(<span class=\"keyword\">new</span> <span class=\"title class_\">Font</span>(<span class=\"literal\">null</span>, Font.BOLD, <span class=\"number\">20</span>));</span><br><span class=\"line\">    graphics.drawString(makeNum(), <span class=\"number\">0</span>, <span class=\"number\">20</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//告诉浏览器，这个请求用图片的方式打开</span></span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;image/jpeg&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//网站存在缓存，不让浏览器缓存</span></span><br><span class=\"line\">    resp.setDateHeader(<span class=\"string\">&quot;expires&quot;</span>, -<span class=\"number\">1</span>);</span><br><span class=\"line\">    resp.setHeader(<span class=\"string\">&quot;Cache-Control&quot;</span>, <span class=\"string\">&quot;no-cache&quot;</span>);</span><br><span class=\"line\">    resp.setHeader(<span class=\"string\">&quot;Pragma&quot;</span>, <span class=\"string\">&quot;no-cache&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//把图片写给浏览器</span></span><br><span class=\"line\">    ImageIO.write(image, <span class=\"string\">&quot;jpg&quot;</span>, resp.getOutputStream());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//生成随机数</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> String <span class=\"title function_\">makeNum</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Random</span> <span class=\"variable\">random</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Random</span>();</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">num</span> <span class=\"operator\">=</span> random.nextInt(<span class=\"number\">9999999</span>) + <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">StringBuffer</span> <span class=\"variable\">sb</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StringBuffer</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">7</span> - num.length(); i++) &#123;</span><br><span class=\"line\">      sb.append(<span class=\"string\">&quot;0&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    num = sb.toString() + num;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> num;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>imageServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.ImageServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>imageServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/imageServlet<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h4 id=\"重定向\">重定向</h4>\n<ul>\n<li>\n<p>访问一个页面时跳转到另一个页面</p>\n</li>\n<li>\n<p><code>src/main/java/servlet/RedirectServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RedirectServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    resp.sendRedirect(<span class=\"string\">&quot;/&quot;</span>);<span class=\"comment\">//重定向</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>redirect<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.RedirectServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>redirect<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/redirect<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>转发&amp;重定向 の 区别</p>\n<ul>\n<li>转发 URL 不会变化,重定向会变化</li>\n<li>访问转发的页面有一个请求,重定向会产生前后两个请求,第一个请求状态码是 302</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"表单提交-响应\">表单提交+响应</h4>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/zhangliangzi/article/details/50131835\">Form 表单数据传输方式之 Get 与 Post 区别</a></p>\n</blockquote>\n<ul>\n<li>\n<p>get 与 post 区别体现在客户端&lt;–&gt;服务端之间的信息传递</p>\n</li>\n<li>\n<p>我们在 overwrite HttpServlet 类的 doGet &amp; doPost 方法时,是在处理通过 get/post 接收到请求或信息后的业务</p>\n</li>\n<li>\n<p>get/post 就像一个屋子的两个门,进门的方式不一样,但是所进入的屋子是一样的 (让他俩互相调用,处理相同的业务)</p>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>例子: 开启 Tomcat 后进入 index.jsp 页面,输入表单后提交,信息以 post 形式传递给 <code>/request</code> 后端,这个动态页面收到数据并在页面输出.</p>\n<ul>\n<li>\n<p><code>index.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;form action=<span class=\"string\">&quot;/request&quot;</span> method=<span class=\"string\">&quot;post&quot;</span>&gt;</span><br><span class=\"line\">  &lt;label&gt;</span><br><span class=\"line\">    用户名:</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;username&quot;</span>/&gt;</span><br><span class=\"line\">  &lt;/label&gt; &lt;br/&gt;</span><br><span class=\"line\">  &lt;label&gt;</span><br><span class=\"line\">    密码:</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">&quot;password&quot;</span> name=<span class=\"string\">&quot;password&quot;</span>/&gt;</span><br><span class=\"line\">  &lt;/label&gt; &lt;br/&gt;</span><br><span class=\"line\">  &lt;input type=<span class=\"string\">&quot;submit&quot;</span>/&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/java/servlet/RequestServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RequestServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;password&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter();</span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;Success get username &amp; password.&quot;</span>);</span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;username: &quot;</span> + username);</span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;password: &quot;</span> + password);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>request<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.RequestServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>request<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/request<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb",
                "servlet"
            ]
        },
        {
            "id": "https://weidows.github.io/post/experience/basic/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/",
            "url": "https://weidows.github.io/post/experience/basic/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/",
            "title": "🌈基础知识",
            "date_published": "2021-03-25T03:32:45.000Z",
            "content_html": "<h1>基础知识</h1>\n<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2022-05-14 23:19:30\n * @FilePath: \\Blog-private\\source\\_posts\\experience\\basic\\基础知识.md\n * @Description:\n * @!: *********************************************************************\n-->\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li><a href=\"#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86\">基础知识</a>\n<ul>\n<li><a href=\"#%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE\">思维导图</a></li>\n<li><a href=\"#%E7%A1%AC%E4%BB%B6\">硬件</a>\n<ul>\n<li><a href=\"#%E5%8E%9F%E5%8F%8D%E8%A1%A5%E7%A0%81\">原反补码</a></li>\n<li><a href=\"#%E5%8D%95%E7%89%87%E6%9C%BA\">单片机</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%A4%8D%E5%8F%98%E5%87%BD%E6%95%B0\">复变函数</a>\n<ul>\n<li><a href=\"#%E5%A4%8D%E6%95%B0\">复数</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\">计算机网络</a>\n<ul>\n<li><a href=\"#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82\">数据链路层</a>\n<ul>\n<li><a href=\"#%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6%E5%88%86%E7%B1%BB\">媒体接入控制分类</a></li>\n<li><a href=\"#csmacd\">CSMA/CD</a></li>\n<li><a href=\"#mac-%E5%B1%82%E5%8D%8F%E8%AE%AE\">MAC 层协议</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%BD%91%E7%BB%9C%E5%B1%82\">网络层</a>\n<ul>\n<li><a href=\"#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE\">路由选择协议</a></li>\n<li><a href=\"#%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AE-rip-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86\">路由信息协议 RIP 的基本工作原理</a></li>\n<li><a href=\"#%E5%BC%80%E6%94%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88-ospf-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86\">开放最短路径优先 OSPF 的基本工作原理</a></li>\n<li><a href=\"#%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-bgp\">边界网关协议 BGP</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E7%A6%BB%E6%95%A3\">离散</a>\n<ul>\n<li><a href=\"#%E5%9B%BE\">图</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1\">算法分析与设计</a>\n<ul>\n<li><a href=\"#%E6%9C%80%E5%A4%A7%E5%9B%A2-%E6%9C%80%E5%A4%A7%E7%8B%AC%E7%AB%8B%E9%9B%86\">最大团-最大独立集</a></li>\n<li><a href=\"#01-%E8%83%8C%E5%8C%85\">01-背包</a></li>\n<li><a href=\"#%E7%9F%A9%E9%98%B5%E8%BF%9E%E4%B9%98\">矩阵连乘</a></li>\n<li><a href=\"#%E5%85%AB%E7%9A%87%E5%90%8E%E8%A7%A3%E6%B3%95%E9%80%9F%E8%AE%B0\">八皇后解法速记</a></li>\n<li><a href=\"#%E9%9A%8F%E6%9C%BA%E5%8C%96%E7%AE%97%E6%B3%95\">随机化算法</a></li>\n<li><a href=\"#%E6%B8%90%E8%BF%91%E9%98%B6%E9%AB%98%E4%BD%8E\">渐近阶高低</a></li>\n<li><a href=\"#%E6%95%B0%E8%AE%BA%E5%9B%9B%E5%A4%A7%E5%AE%9A%E7%90%86\">数论四大定理</a></li>\n<li><a href=\"#%E6%A3%8B%E7%9B%98%E8%A6%86%E7%9B%96%E9%97%AE%E9%A2%98\">棋盘覆盖问题</a></li>\n<li><a href=\"#%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2\">二分搜索</a></li>\n<li><a href=\"#%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91\">斐波那契</a></li>\n<li><a href=\"#%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F\">快速排序</a>\n<ul>\n<li><a href=\"#%E6%80%9D%E8%B7%AF%E4%B8%80\">思路一</a></li>\n<li><a href=\"#%E6%80%9D%E8%B7%AF%E4%BA%8C\">思路二</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E5%BA%8F%E5%88%97\">最长公共子序列</a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD\">人工智能</a></li>\n<li><a href=\"#%E9%9B%B6%E6%95%A3%E7%9A%84\">零散的</a>\n<ul>\n<li><a href=\"#%E6%B2%B3%E5%B7%A5%E5%A4%A7-uml\">河工大-UML</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%80%9F%E7%89%A9%E8%A1%A8\">借物表</a></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>已录入 <a href=\"../../../others/LearnWay#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86\">😍Weidows-の成长路线#基础知识</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"思维导图\">思维导图</h2>\n<p>一些零散的不足以道,做成导图了</p>\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li>基础知识\n<ul>\n<li>数据结构\n<ul>\n<li><a href=\"https://www.cnblogs.com/zmc940317/articles/10925497.html\">二叉树的前,中,后序遍历详解</a></li>\n</ul>\n</li>\n<li>操作系统\n<ul>\n<li><a href=\"../../../system/process-thread\">我给总结了一下: 🤷‍♂️ 进程,线程,CPU 核心,并行,并发大杂碎!</a></li>\n<li><a href=\"https://blog.csdn.net/qq_33414271/article/details/80245715\">一句话+一张图说清楚——银行家算法</a></li>\n<li><a href=\"https://blog.csdn.net/a745233700/article/details/86011504\">操作系统：经典进程同步问题 之 生产者-消费者问题、读者-写者问题、哲学家进餐问题</a></li>\n<li><a href=\"https://blog.csdn.net/lala_wang/article/details/81116781?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-0&amp;spm=1001.2101.3001.4242\">调度算法的介绍及优缺点</a></li>\n</ul>\n</li>\n<li>编译原理\n<ul>\n<li><a href=\"https://blog.csdn.net/qq_39384184/article/details/86037568\">编译原理：总结</a></li>\n</ul>\n</li>\n<li>硬件\n<ul>\n<li><a href=\"https://www.bilibili.com/video/BV1sE411L7j5\">【一天掌握 51 单片机基础】<em>单片机原理及应用</em>东北大学（高宏亮 主讲）</a></li>\n</ul>\n</li>\n<li>数据库\n<ul>\n<li>MySQL\n<ul>\n<li><a href=\"https://www.bilibili.com/video/BV1NJ411J79W\">【狂神说 Java】MySQL 最新教程通俗易懂</a></li>\n<li><a href=\"https://blog.csdn.net/weixin_45483328/article/details/113759286?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control&amp;dist_request_id=&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control\">狂神说数据库笔记</a></li>\n</ul>\n</li>\n<li>MongoDB\n<ul>\n<li>有 MySQL 基础能很快上手</li>\n<li><a href=\"https://github.com/krislinzhao/StudyNotes/tree/master/MongoDB\">krislinzhao/StudyNotes</a></li>\n</ul>\n</li>\n<li>通用\n<ul>\n<li><a href=\"https://blog.csdn.net/wxwzy738/article/details/17590305\">MySQL 单列索引和组合索引的区别介绍</a>\n<ul>\n<li>质量相当高的文章</li>\n</ul>\n</li>\n<li><a href=\"https://mp.weixin.qq.com/s/3ZdACGiA0SutmbDxMeF-UA\">我们为什么要分库分表？</a>\n<ul>\n<li>这篇封神了,把我最近在数据库业务设计方面的疑问解决了.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>课程\n<ul>\n<li><a href=\"https://www.docin.com/p-1564094016.html\">数据库考试试题及答案</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>算法-数学\n<ul>\n<li>傅里叶变换\n<ul>\n<li><a href=\"../%E9%80%9A%E4%BF%A1%E6%8A%80%E6%9C%AF#%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2\">👽 通信技术-开坑自埋</a></li>\n</ul>\n</li>\n<li>P/NP 问题\n<ul>\n<li><a href=\"https://baike.baidu.com/item/P%E5%AF%B9NP%E9%97%AE%E9%A2%98\">P 对 NP 问题</a></li>\n<li><a href=\"https://www.omegaxyz.com/2019/04/22/np/?hilite=%27filled%27,%27o.e.m%27\">算法复杂度与 NP 问题</a></li>\n<li><a href=\"http://www.cainiaoxueyuan.com/suanfa/4517.html\">贪婪算法案例、np 完全问题及 java 代码实现</a>\n<ul>\n<li>非常经典和值得探索的问题 (经验接收自@河北工业大学)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Hash-算法\n<ul>\n<li>用来校验文本/文件,主流有三类,不同算法产生的 hash code 不同\n<ul>\n<li>MD5</li>\n<li>CRC-32, CRC-64</li>\n<li>SHA-1, SHA-256, SHA-384, SHA-512</li>\n</ul>\n</li>\n<li>校验方法\n<ul>\n<li><a href=\"https://blog.csdn.net/weixin_30799995/article/details/94896898\">文件完整性校验</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>排序算法\n<ul>\n<li><a href=\"https://www.cnblogs.com/chengxiao/p/6194356.html\">图解排序算法(四)之归并排序</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>论文\n<ul>\n<li><a href=\"https://cloud.tencent.com/developer/news/231960\">如何将 CNKI 论文信息转换成你想要的参考文献格式</a>\n<ul>\n<li>关键时候挺好用的功能</li>\n</ul>\n</li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/54344547\">word操作技巧：有关脚注和尾注的使用方法</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"硬件\">硬件</h2>\n<h3 id=\"原反补码\">原反补码</h3>\n<ul>\n<li>\n<p>开局三张图,故事全靠编 🤣</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtBQE.png\" alt=\"20210325114342\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtZcX.png\" alt=\"20210325114403\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtRJ9.png\" alt=\"20210325114419\" />\n</li>\n<li>\n<p>因为带有符号位的二进制数在计算机内计算时,原码和反码的运算结果都不是 100%正确,而且会有<code>+0</code>和<code>-0</code>两个零</p>\n</li>\n<li>\n<p>补码 100%正确,于是我们采用补码,而且补码只有一个零</p>\n<ul>\n<li>补码就是为了解决这两个问题的,没了.</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"单片机\">单片机</h3>\n<ul>\n<li>\n<p>标志寄存器内部的八位是分开使用的,作用不同,但功能都是作为标志位</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtJm5.png\" alt=\"20210331121042\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtxyA.png\" alt=\"20210331122847\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtsVm.png\" alt=\"20210331122957\" />\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"复变函数\">复变函数</h2>\n<h3 id=\"复数\">复数</h3>\n<ul>\n<li>\n<p>运算<br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtqQz.png\" alt=\"20210402161142\" /></p>\n</li>\n<li>\n<p>一般表示<br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtorg.png\" alt=\"20210325170144\" /></p>\n</li>\n<li>\n<p>几何表示<br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtP3M.png\" alt=\"20210325170538\" /></p>\n</li>\n<li>\n<p>幂与根<br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtXZn.png\" alt=\"20210325181554\" /></p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"计算机网络\">计算机网络</h2>\n<blockquote>\n<p>摘自 <a href=\"https://space.bilibili.com/360996402/\">湖科大教书匠-计算机网络</a></p>\n</blockquote>\n<h3 id=\"数据链路层\">数据链路层</h3>\n<h4 id=\"媒体接入控制分类\">媒体接入控制分类</h4>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSwgX.png\" alt=\"20210930170530\" />\n<h4 id=\"CSMA-CD\">CSMA/CD</h4>\n<blockquote>\n<p><a href=\"https://www.136.la/tech/show-132262.html\">2016.6.20 计算机网络复习要点第三章之 CSMA/CD 协议(示例代码)</a></p>\n</blockquote>\n<p>采用随机接入,当多个主机同时发送帧时会<code>发生碰撞/冲突</code>.无连接不可靠,尽力交付的服务.</p>\n<ul>\n<li>\n<p>CSMA/CD (载波监听多点接入/碰撞检测) 是以太网采用的<code>解决冲突</code>的方法</p>\n<ul>\n<li>多路接入 MA: 多个站点接入同一条总线上,竞争使用总线</li>\n<li>载波监听 CS: 站点发送数据前，先检查总线上是不是已经有数据在传输，如果有就暂缓发送，避免冲突。</li>\n<li>冲突检测: 边发送边对介质上电压信号进行检测，当电压摆动值超过一定门限时就认为发生了冲突。一旦发生冲突就停止发送数据，然后根据协议进行重传。</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>在使用 CSMA/CD 协议时，一个站不可能同时进行发送和接收（但必须边发送边监听）。因此，使用 CSMA/CD 协议的以太网不可能进行全双工通信而只能进行半双工通信（双向交替通信）；</p>\n<ul>\n<li>\n<p>每一个站在自己发送数据之后的一小段时间内，存在着遭遇碰撞的可能性，这一小段时间是不确定的，它取决于另一个发送数据的站到本站的距离；</p>\n</li>\n<li>\n<p>最先发送数据帧的 A 站，在发送数据帧后至多经过时间 2r 就可知道所发送的数据帧是否遭受到碰撞；因此，以太网端到端往返时间 2r 称为争用期（碰撞窗口）；</p>\n</li>\n<li>\n<p>经过争用期还没有检测到碰撞，才能肯定后续发送的数据一定不会发送碰撞；</p>\n</li>\n<li>\n<p>凡是长度小于 64 字节的帧都是由于冲突而异常中止的无效帧，只要收到了这种无效帧，就应当立即将其丢弃；</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>采用截断二进制指数退避算法来确定碰撞后重传的时机</p>\n<ul>\n<li>\n<p>让发生碰撞的站停止发送数据后，不是等待信道变为空闲后就立即发送数据，而是推迟（退避）一个随机的时间</p>\n</li>\n<li>\n<p>单位回退时间通常取冲突窗口(争用期)的值 2r，即传输最小帧长 512bit 数据用时，叫作时槽。</p>\n</li>\n<li>\n<p>取 r, 0 ≤ r &lt; 2^k-1,重传的时延(退避时间)就是 r 倍的单位回退时间。</p>\n</li>\n<li>\n<p>K 为碰撞次数时。K=Min[重传次数，10]，当重传次数超过 10 时，K 就不在增大而是一直等于 10；当重传达 16 次仍不能成功时，则丢弃该帧，并向高层报告</p>\n</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPP1b.png\" alt=\"20210930181153\" />\n</li>\n<li>\n<p>信道利用率</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4ggS.png\" alt=\"20210930191350\" />\n</li>\n<li>\n<p>帧发送/接收流程</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPbu6.png\" alt=\"20210930191552\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVL18C.png\" alt=\"20210930191636\" />\n</li>\n</ul>\n<hr>\n<h4 id=\"MAC-层协议\">MAC 层协议</h4>\n<blockquote>\n<ol>\n<li><a href=\"https://blog.csdn.net/t_home/article/details/90711643\">以太网 MAC 层基础知识学习</a></li>\n<li>小林 Coding - 图解网络</li>\n</ol>\n</blockquote>\n<ul>\n<li>\n<p>MAC (media access control) / (message authentication code)</p>\n<ul>\n<li>MAC 地址相同的设备只要不是同属一个数据链路就不会出现问题。同一网段下两设备都不能正常联网.</li>\n</ul>\n<blockquote>\n<p>I3E 注册管理结构 RA（Registration Authority）是局域网全球地址的法定管理机构[W-IEEERA]，负责分配前三个字节；前三个字节又称组织唯一标识符 OUI（Organizationally Unique Identifier），又称公司标识符（Company ID）[RFC 7042]。后三个字节由厂家自行指派称为扩展标识符（Extended Identifier）。总的一起叫做 EUI-48 扩展的唯一标识符（Extended Unique Identifier）。</p>\n</blockquote>\n<hr>\n</li>\n<li>\n<p>以太网 V2 的 MAC 帧格式(MAC 格式标准有两个，一个是 DIX Ethernet V2 标准，一个是 IEEE 的 802.3 标准)</p>\n<ul>\n<li>IEEE 802 标准中规定了一种 48 位的全球地址，此地址固化在适配器的 ROM 中（所以称为物理地址）。无线 LAN、蓝牙、以太网、FDDI、ATM 等设备都使用相同规格的 MAC 地址。</li>\n</ul>\n</li>\n<li>\n<p>MAC 地址字段</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVthY0.png\" alt=\"20210930194939\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAx90.png\" alt=\"20210930202539\" />\n<hr>\n</li>\n<li>\n<p>网络包至此(数据链路层)的图解</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4M7n.png\" alt=\"20210930204450\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"网络层\">网络层</h3>\n<h4 id=\"路由选择协议\">路由选择协议</h4>\n<ul>\n<li>\n<p>动/静态路由选择</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4raC.png\" alt=\"20211022084950\" />\n</li>\n<li>\n<p>因特网<code>采用动态路由选择</code>,分层次自治</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPc60.png\" alt=\"20211022085337\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4u0E.png\" alt=\"20211022085557\" />\n</li>\n<li>\n<p>路由器基本结构</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GViD6S.png\" alt=\"20211022090722\" />\n</li>\n</ul>\n<h4 id=\"路由信息协议-RIP-的基本工作原理\">路由信息协议 RIP 的基本工作原理</h4>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAFD6.png\" alt=\"20211022100415\" />\n<ul>\n<li>\n<p>RIP 会选择距离向量短的路由,而不管带宽 (距离相同的话使用负载均衡)</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLHpn.png\" alt=\"20211022100624\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVP7V1.png\" alt=\"20211022100656\" />\n</li>\n<li>\n<p>RIP 交换要点</p>\n<p>只和相邻路由器交换信息</p>\n<p>交换自己的路由表</p>\n<p>周期性交换 (比如 30s)</p>\n</li>\n<li>\n<p>举例: RIP 路由条目更新规则</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVA7lM.png\" alt=\"20211022115640\" />\n</li>\n<li>\n<p>坏消息传得慢/路由环路/距离无穷计数问题</p>\n<p>新更新的路由表被老版本覆盖,有几个措施可以<code>减少出现概率</code>或减小危害:</p>\n<ol>\n<li>\n<p>限制最大路径为 15</p>\n</li>\n<li>\n<p>路由表发生变化时立即发送更新报文 (触发更新)</p>\n</li>\n<li>\n<p>记录特定接口的路由信息,而不反向传递 (水平分割)</p>\n</li>\n</ol>\n</li>\n</ul>\n<hr>\n<h4 id=\"开放最短路径优先-OSPF-的基本工作原理\">开放最短路径优先 OSPF 的基本工作原理</h4>\n<ul>\n<li>\n<p>基本工作原理</p>\n<p>基于链路状态,使用最短路径优先,保证不会产生路由环路</p>\n<p>不限制网络规模,更新效率高,收敛速度快</p>\n<p>链路状态是指与哪些路由器相邻以及相应连路的代价 (费用/距离/时延/带宽等等)</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4yhY.png\" alt=\"20211022165456\" />\n</li>\n<li>\n<p>链路状态更新 &amp;&amp; 最短路径 SPF 计算</p>\n<p>每个路由器会产生链路状态通告(LSA),包含: 直连网络/邻居路由器得到链路状态</p>\n<p>LSA 封装在链路状态更新分组(LSU)中,采用洪泛法发送</p>\n<p>每个路由器通过链路状态数据库(LSDB)来接收 LSU 维护链路状态,各路由器 LSDB 最终一致</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPeLC.png\" alt=\"20211022170324\" />\n</li>\n<li>\n<p>OSPF 工作过程 &amp;&amp; 五种数据分组</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtuem.png\" alt=\"20211022170725\" />\n</li>\n<li>\n<p>邻居关系建立 &amp;&amp; 划分区域</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPNyq.png\" alt=\"20211022174329\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4Oh5.png\" alt=\"20211022174754\" />\n</li>\n</ul>\n<h4 id=\"边界网关协议-BGP\">边界网关协议 BGP</h4>\n<ul>\n<li>\n<p>路由选择</p>\n<p>不同自治系统内度量路由的代价可能是不同的,所以无法通过代价度量来寻找最佳路由</p>\n<p>自治系统间路由选择还需要考虑政治,经济,安全等因素</p>\n<p>BGP 力求找一条不兜圈子的较好的路由线路,而不是找最佳路由</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV44vY.png\" alt=\"20211022232434\" />\n</li>\n<li>\n<p>举例: BGP 路径向量应用</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVL4XX.png\" alt=\"20211022232856\" />\n</li>\n<li>\n<p>BGP-4 的四种报文</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLwiq.png\" alt=\"20211022233905\" />\n</li>\n<li>\n<p>直接封装 xx 报文的协议</p>\n<p>RIP -&gt; UDP</p>\n<p>OSPF -&gt; IP</p>\n<p>BGP -&gt; TCP</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"离散\">离散</h2>\n<h3 id=\"图\">图</h3>\n<ul>\n<li>\n<p>有向图-邻接矩阵存储</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVL5Lr.png\" alt=\"20211028200201\" />\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"算法分析与设计\">算法分析与设计</h2>\n<h3 id=\"最大团-最大独立集\">最大团-最大独立集</h3>\n<p><img src=\"https://www.helloimg.com/images/2022/03/04/GhJOD6.png\" alt=\"\"></p>\n<p>最大团: 顶点间都相连的最多顶点数 24567 或 45679</p>\n<p>最大独立集: 顶点间都不直接相连的最多顶点数 158 或 168</p>\n<hr>\n<h3 id=\"01-背包\">01-背包</h3>\n<p>5 个物品,1 个背包，背包容量为 10.</p>\n<p>价值：8,10,4,5,5</p>\n<p>重量：6,4,2,2,3</p>\n<p>求将该 5 个物品装入背包的最大价值<code>20</code>,以及 x[6]的向量值<code>（0,0,1,0,1,1）</code>(后 5 个空选择哪个对应的向量值为 1)</p>\n<hr>\n<h3 id=\"矩阵连乘\">矩阵连乘</h3>\n<ul>\n<li>\n<p><code>A1 A2 A3 A4 A5</code> 五个矩阵连乘,通过下图判断怎么加括号使运算最少</p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/04/GhJ6Iq.png\" alt=\"\"></p>\n</li>\n<li>\n<p>不看 0 那一斜线和 0 上面的一位,如下</p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/04/GhA3Yz.png\" alt=\"\"></p>\n<p>第三列: 在 A2 断开</p>\n<p>第四列: 在 A2 断开</p>\n<p>第五列: 在 A2 和 A4 断开</p>\n</li>\n<li>\n<p>A1 A2 | A3 A4 | A5</p>\n<p>每组括起来就是结果: <code>(A1 A2)(A3 A4)A5</code></p>\n</li>\n</ul>\n<hr>\n<h3 id=\"八皇后解法速记\">八皇后解法速记</h3>\n<p>17582463<br>\n24683175<br>\n31758246<br>\n42736851</p>\n<p>通过镜像操作可以得到对面四种解法: 1-&gt;8, 2-&gt;7, 3-&gt;6, 4-&gt;5</p>\n<hr>\n<h3 id=\"随机化算法\">随机化算法</h3>\n<ul>\n<li>\n<p>舍伍德算法</p>\n<p>去掉问题最坏解，使得求解的时候的复杂度趋向于平均</p>\n</li>\n<li>\n<p>拉斯维加斯算法：</p>\n<p>问题求解时随机决策</p>\n<p>随机找，找到了一定是正确的，但是不一定能在有限的时间内找到正确的解</p>\n</li>\n<li>\n<p>蒙特卡洛算法</p>\n<p>以高概率给出一个正确的解，但是不能判定是不是正确的</p>\n<p>【主元素】随机找出一个元素，看看它有没有出现了很多次，如果是，就返回 true，否则返回 false。<br>\n返回 true 一定能确定有主元素，但是返回 false 的时候不一定能确定没有主元素。</p>\n<p>【是否正确】<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>&lt;</mo><mi>p</mi><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{2}&lt;p&lt;1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7335em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>,如果得到正确解的概率不小于 p，则称该蒙特卡洛算法是 p 正确的，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">p-\\frac{1}{2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> 是该算法的优势<br>\n【一致】如果对于同一个实例，算法不会给出两个正确的解答，那么称这个蒙特卡洛算法是一致的<br>\n【提高正确率】执行若干次，选择频次最高的<br>\n<sup id='cite_ref-2'><a href=\"#cite_note-2\">[2]</a></sup></p>\n</li>\n</ul>\n<hr>\n<h3 id=\"渐近阶高低\">渐近阶高低</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy=\"false\">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mi>k</mi></msup><mo stretchy=\"false\">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy=\"false\">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">!</mo><mo stretchy=\"false\">)</mo><mo>&lt;</mo><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mi>n</mi></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\nO(1) &lt; O(\\log{n})) &lt; O(n) &lt; O(n\\log{n}) &lt; O(n^2) &lt; O(n^3) &lt; O(n^k) &lt; O(2^n) &lt; O(n!) &lt; O(n^n)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span></span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0991em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">!)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> <sup id='cite_ref-1'><a href=\"#cite_note-1\">[1]</a></sup></p>\n<hr>\n<h3 id=\"数论四大定理\">数论四大定理</h3>\n<p>威尔逊定理, 欧拉定理, 中国剩余定理, 费马小定理</p>\n<hr>\n<h3 id=\"棋盘覆盖问题\">棋盘覆盖问题</h3>\n<p><img src=\"https://www.helloimg.com/images/2022/03/04/GhAJFm.png\" alt=\"\"></p>\n<ol>\n<li>根据黑的先画最中间绿色的</li>\n<li>根据绿色的画黄色的</li>\n<li>根据黄色画蓝色的</li>\n<li>可以确定答案了<br>\n<sup id='cite_ref-3'><a href=\"#cite_note-3\">[3]</a></sup></li>\n</ol>\n<hr>\n<h3 id=\"二分搜索\">二分搜索</h3>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">（<span class=\"number\">1</span>）给定从小到达已排好序的<span class=\"number\">2021</span>个整数，存放在数组<span class=\"selector-tag\">a</span><span class=\"selector-attr\">[2021]</span>中，执行以下<span class=\"built_in\">BinarySearch</span>()函数，需要查找的特定元素x。</span><br><span class=\"line\">问<span class=\"number\">1</span>：当x &gt; <span class=\"selector-tag\">a</span><span class=\"selector-attr\">[2020]</span>时，查找不到元素x时，比较了______ 次。</span><br><span class=\"line\">问<span class=\"number\">2</span>：当x &lt; <span class=\"selector-tag\">a</span><span class=\"selector-attr\">[0]</span>时，查找不到元素x时，比较了______ 次。</span><br><span class=\"line\"></span><br><span class=\"line\">（<span class=\"number\">2</span>）给定从小到达已排好序的<span class=\"number\">2048</span>个整数，存放在数组<span class=\"selector-tag\">a</span><span class=\"selector-attr\">[2048]</span>中，执行以下<span class=\"built_in\">BinarySearch</span>()函数，需要查找的特定元素x。</span><br><span class=\"line\">问<span class=\"number\">3</span>：当x &gt; <span class=\"selector-tag\">a</span><span class=\"selector-attr\">[2047]</span>时，查找不到元素x时，比较了______ 次。</span><br><span class=\"line\">问<span class=\"number\">4</span>：当x &lt; <span class=\"selector-tag\">a</span><span class=\"selector-attr\">[0]</span>时，查找不到元素x时，比较了______ 次。</span><br></pre></td></tr></table></figure>\n<p>11 10 12 11</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>2020</mn><mo stretchy=\"false\">]</mo><mo>&lt;</mo><msup><mn>2</mn><mn>11</mn></msup></mrow><annotation encoding=\"application/x-tex\">[0,2020] &lt; 2^{11}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2020</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span></span></span></span></span></span></span></span> -&gt; k1=11 k2=11-1</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>11</mn></msup><mo>&lt;</mo><mo>=</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>4047</mn><mo stretchy=\"false\">]</mo><mo>&lt;</mo><msup><mn>2</mn><mn>12</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{11} &lt;= [0,4047] &lt; 2^{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8532em;vertical-align:-0.0391em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">4047</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span></span></span></span></span></span></span></span> -&gt; k3=12 k4=12-1</p>\n<hr>\n<h3 id=\"斐波那契\">斐波那契</h3>\n<p><img src=\"https://www.helloimg.com/images/2022/03/04/GhA2nS.png\" alt=\"\"></p>\n<p>F()执行 15 次, f(1) 3 次</p>\n<hr>\n<h3 id=\"快速排序\">快速排序</h3>\n<h4 id=\"思路一\">思路一</h4>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">arr</span>[<span class=\"number\">10</span>]=&#123;<span class=\"number\">49</span>, <span class=\"number\">38</span>, <span class=\"number\">10</span>, <span class=\"number\">97</span>, <span class=\"number\">76</span>, <span class=\"number\">13</span>, <span class=\"number\">27</span>, <span class=\"number\">49</span>, <span class=\"number\">8</span>, <span class=\"number\">65</span>&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>\n<p>选择第一位 arr[0]:49 为基准数</p>\n</li>\n<li>\n<p>从左往右找比它大的或相等的,从右往左找比它小的或相等的,找到了两方交换 (比如 97-8, 76-49)</p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/04/GhApPX.png\" alt=\"\"></p>\n</li>\n<li>\n<p>直到两方碰头结束,取碰头位置与基准数交换 (49-27); 没有的话就退出循环且不交换基准数</p>\n</li>\n<li>\n<p>每轮结束后划分出左右两边子范围</p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/04/GhAzng.png\" alt=\"\"></p>\n<p>比如第一轮确定 49 之后,分出 [27-8],[13-65]两个子范围</p>\n<p>第二轮确定 27 之后,分出 [8-10],[49-38]两个子范围</p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/04/GhAICP.png\" alt=\"\"></p>\n<p>当子范围只有一个数时,不用遍历就可以直接确定位置了 (如上图框起来的数,在其旁边的数确定位置时就可以同时确定位置)</p>\n</li>\n</ol>\n<hr>\n<h4 id=\"思路二\">思路二</h4>\n<ul>\n<li>\n<p><a href=\"https://mp.weixin.qq.com/s?__biz=Mzg3MzU2Njk3MA==&amp;mid=2247492793&amp;idx=1&amp;sn=79ab61671459c3a2d627d5a3e1eb7ec0&amp;chksm=cedca32cf9ab2a3aabf3b02d26c991ca4f56a49078a28ad97433c6645d003b559de4e98e706d&amp;mpshare=1&amp;scene=23&amp;srcid=1019M2F6aYi9B8WEFHtfu4sr&amp;sharer_sharetime=1634632120052&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd\">上厕所的功夫，学会了快速排序算法</a></p>\n<p>在某区间中取最左/最右为基准,并给定左右两边移动指针</p>\n<p>左边有坑取有指针的值比较,比基准大的话不动,小的话移动到左边的坑; 右边有坑时相反.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"最长公共子序列\">最长公共子序列</h3>\n<ul>\n<li>\n<p>填写 C 表和 B 表 (不知道还有什么学校教这种老套,反正是考点没的办法了…)</p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/04/GhA8wn.png\" alt=\"\"></p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/04/GhAKhR.png\" alt=\"\"></p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/04/GhAkWA.png\" alt=\"\"></p>\n</li>\n<li>\n<p>思路</p>\n<p>C/B 表同时写不要分开先后写,只不过 B 表要根据 C 表写</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// c[行][列]  b[行][列]</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (i = <span class=\"number\">1</span>; i &lt; m; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (j = <span class=\"number\">1</span>; j &lt; n; j++) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 首先判断行列字符是否一样,相同的话</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x[i] == y[j]) &#123;</span><br><span class=\"line\">      c[i][j] = c[i - <span class=\"number\">1</span>][j - <span class=\"number\">1</span>] + <span class=\"number\">1</span>; <span class=\"comment\">//   c[i][j]=C表左上角+1</span></span><br><span class=\"line\">      b[i][j] = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 如果行列字符不一样,判断C表上面一格是否&gt;=左边,如果true</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (c[i - <span class=\"number\">1</span>][j] &gt;= c[i][j - <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">      c[i][j] = c[i - <span class=\"number\">1</span>][j]; <span class=\"comment\">//           c[i][j]=C表上面一格</span></span><br><span class=\"line\">      b[i][j] = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 如果行列字符不一样,判断C表上面一格是否&gt;=左边,如果false</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      c[i][j] = c[i][j - <span class=\"number\">1</span>]; <span class=\"comment\">//           c[i][j]=C表左边一格</span></span><br><span class=\"line\">      b[i][j] = <span class=\"number\">3</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"人工智能\">人工智能</h2>\n<blockquote>\n<p><a href=\"../AI\">🐊 人工智能笔记</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"零散的\">零散的</h2>\n<h3 id=\"河工大-UML\">河工大-UML</h3>\n<p>这是河北工业大学-刘洪普老师的 UML 课程截图记录</p>\n<p>讲的领域很广, 互联网领域架构, 计算机底层交互/操作系统设计, AI 领域, 并行计算…etc, <code>i了i了</code></p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/23/R1Uw16.jpg\" alt=\"\"></p>\n<p>并发程序: 指的是具有并行处理能力的程序(多线程/协程), 当遇到单核 U 或者环境不适合时会变为顺序执行的程序</p>\n<p>同一机子内多个进程可以通过操作系统来完成进程间通信, Socket 实现的是不同机子之间通过网络来进行进程间的通信</p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/23/R1Ujyo.jpg\" alt=\"\"></p>\n<ul>\n<li>\n<p>显卡: 3d 计算加速卡,图形处理需要做大量线性代数向量运算(3 维模型的坐标转换和投影), 取决于向量运算的数学性质, 其可以通过并行运算来加速处理,区别如下:</p>\n<p>CPU 的这种逻辑运算可以通过分支预测来加速,但是必须顺序执行 (这也就限制了一些程序吃不到多核性能, 两核 3G 打不过一核 5G 的)</p>\n<p>GPU 的运算独立, 简单看来核心越多算的越快,这种计算方式叫<code>向量化计算</code></p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># CPU</span></span><br><span class=\"line\"><span class=\"attr\">C</span> = A + B</span><br><span class=\"line\"><span class=\"attr\">B</span> = A + C</span><br><span class=\"line\"><span class=\"attr\">A</span> = B + C</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># GPU</span></span><br><span class=\"line\"><span class=\"attr\">A1</span> = B1 + C1</span><br><span class=\"line\"><span class=\"attr\">A2</span> = B2 + C2</span><br><span class=\"line\"><span class=\"attr\">A3</span> = B3 + C3</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>CPU 核心少而且更适合做逻辑运算, 把向量运算能力加进 CPU (也就是如今的 TPU) 并不是很合适, 所以独立出来了显卡 (一般核心数量上千,高出 CPU 两个量级)</p>\n<p><img src=\"https://www.helloimg.com/images/2022/03/23/R1gRMt.jpg\" alt=\"\"></p>\n<p>深度学习就是要做大量的线性计算和非线性计算(最终也是通过数学转化为线性计算), 所以炼丹也是吃显卡</p>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表-24\">借物表</h2>\n<p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href=\"https://www.nowcoder.com/questionTerminal/7401d66e14e84279ba278ce04e735deb?page=1&amp;onlyReference=false\">https://www.nowcoder.com/questionTerminal/7401d66e14e84279ba278ce04e735deb?page=1&amp;onlyReference=false</a></p>\n<p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href=\"https://www.geek-share.com/detail/2771384952.html\">随机化算法-舍伍德算法&amp;拉斯维加斯算法&amp;蒙特卡洛算法</a></p>\n<p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href=\"https://blog.csdn.net/qq_30268545/article/details/80600064\">棋盘覆盖问题-分治法</a></p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "备忘录",
                "算法",
                "笔记",
                "人工智能",
                "操作系统",
                "计网",
                "硬件",
                "onenote",
                "复变函数"
            ]
        },
        {
            "id": "https://weidows.github.io/post/tools/Tomcat/",
            "url": "https://weidows.github.io/post/tools/Tomcat/",
            "title": "🐱‍🏍Maven+Tomcat开发webapp.",
            "date_published": "2021-03-25T02:39:26.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-03-30 12:50:22\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\tools\\Tomcat.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E9%85%8D%E7%BD%AE\">配置</a></li>\n<li><a href=\"#vscode\">VScode</a></li>\n<li><a href=\"#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE\">创建项目</a></li>\n<li><a href=\"#idea\">IDEA</a></li>\n<li><a href=\"#%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E4%BB%A3%E7%90%86\">虚拟主机/代理</a></li>\n<li><a href=\"#%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98\">乱码问题</a>\n<ul>\n<li><a href=\"#%E7%BB%88%E7%AB%AF%E4%B9%B1%E7%A0%81\">终端乱码</a></li>\n<li><a href=\"#%E7%BD%91%E9%A1%B5%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81\">网页中文乱码</a></li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"配置-3\">配置</h2>\n<blockquote>\n<p><a href=\"../../system/system_variable#maven\">💥 系统开发环境配置</a></p>\n</blockquote>\n<blockquote>\n<p>Maven 的核心思想：约定大于配置</p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"VScode-2\">VScode</h2>\n<ul>\n<li>\n<p>安装 <code>Tomcat for Java</code> 插件,配置好 Tomcat 本体路径和 <code>data</code> 路径</p>\n</li>\n<li>\n<p>在侧边栏右键,常用命令都有</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsEkC.png\" alt=\"20210309155951\" />\n</li>\n<li>\n<p>测试</p>\n<ul>\n<li>新建 <code>index.html</code> 文件,放到 <code>tomcat/webapps/ROOT/</code>目录下</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    测试</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>打开对应页面会有如下显示</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVssbt.png\" alt=\"20210309160418\" />\n</li>\n<li>\n<p><code>ROOT/</code>里面放的文件与浏览器 URL 相对应</p>\n<ul>\n<li>\n<p>比如 <code>ROOT/000/2333.html</code> 浏览器就需要访问 <code>localhost:8080/000/2333.html</code></p>\n</li>\n<li>\n<p>后缀名是<code>.html</code>的话 URL 后缀可以不写,比如上面写成 <code>localhost:8080/000/2333</code> 也可以.</p>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"创建项目\">创建项目</h2>\n<blockquote>\n<p>解释一下为什么要用 Maven,还需要创建项目: <code>Tomcat 只能运行 Maven 创建的类型为 webapp 的这种项目</code>,</p>\n</blockquote>\n<ul>\n<li>\n<p>推荐直接用 IDEA 创建 web 项目 (不用再导入 Servlet 包)</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVskJo.png\" alt=\"20210323233425\" />\n</li>\n<li>\n<p>然后创建 <code>webapp</code> 子模块,在<code>source/main/</code>下再新建两个目录(java 和 resources),结构如下</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsf3C.png\" alt=\"20210323112637\" />\n</li>\n<li>\n<p><code>JavaWeb\\src\\main\\webapp\\WEB-INF\\web.xml</code> 是 web 项目核心应用</p>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb/demo-0\">点这里参考项目结构</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"IDEA-2\">IDEA</h2>\n<ul>\n<li>\n<p>IDEA 配置连接 Tomcat 需要在创建完 webapp 项目之后,否则连不上</p>\n<ul>\n<li>点’+'找到 Tomcat Server 并配置,如图</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVt5Lv.png\" alt=\"20210325110519\" />\n</li>\n<li>\n<p>现在 IDEA 已经认识 Tomcat 了,但还需要配置部署,否则 Tomcat 不知道运行哪里</p>\n<ul>\n<li>这些工件就是这个项目用 Maven 构建之后产生的</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsyRu.png\" alt=\"20210325110722\" />\n</li>\n<li>\n<p>现在配置好了之后,IDEA 会自动完成项目<code>构建-&gt;部署-&gt;打开网页</code> (VScode 的话也可以手动做到)</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"虚拟主机-代理\">虚拟主机/代理</h2>\n<ul>\n<li>\n<p>通过修改 <code>Tomcat/conf/server.xml</code>和 hosts 文件实现虚拟主机.</p>\n</li>\n<li>\n<p>修改 <code>name=&quot;localhost&quot;</code> 为目标主机名,比如改为<code>name=&quot;weidows.com&quot;</code>,下面注释处给标出了修改位置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span> standalone=<span class=\"string\">&quot;yes&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Server</span> <span class=\"attr\">port</span>=<span class=\"string\">&quot;8005&quot;</span> <span class=\"attr\">shutdown</span>=<span class=\"string\">&quot;SHUTDOWN&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">Listener</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;org.apache.catalina.startup.VersionLoggerListener&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">Listener</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;org.apache.catalina.core.AprLifecycleListener&quot;</span> <span class=\"attr\">SSLEngine</span>=<span class=\"string\">&quot;on&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">Listener</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;org.apache.catalina.core.JreMemoryLeakPreventionListener&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">Listener</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">Listener</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;org.apache.catalina.core.ThreadLocalLeakPreventionListener&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">GlobalNamingResources</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Resource</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;UserDatabase&quot;</span> <span class=\"attr\">auth</span>=<span class=\"string\">&quot;Container&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;org.apache.catalina.UserDatabase&quot;</span> <span class=\"attr\">description</span>=<span class=\"string\">&quot;User database that can be updated and saved&quot;</span> <span class=\"attr\">factory</span>=<span class=\"string\">&quot;org.apache.catalina.users.MemoryUserDatabaseFactory&quot;</span> <span class=\"attr\">pathname</span>=<span class=\"string\">&quot;conf/tomcat-users.xml&quot;</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">GlobalNamingResources</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">Service</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Catalina&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Connector</span> <span class=\"attr\">port</span>=<span class=\"string\">&quot;8080&quot;</span> <span class=\"attr\">protocol</span>=<span class=\"string\">&quot;HTTP/1.1&quot;</span> <span class=\"attr\">connectionTimeout</span>=<span class=\"string\">&quot;20000&quot;</span> <span class=\"attr\">redirectPort</span>=<span class=\"string\">&quot;8443&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Engine</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Catalina&quot;</span> <span class=\"attr\">defaultHost</span>=<span class=\"string\">&quot;localhost&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">Realm</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;org.apache.catalina.realm.LockOutRealm&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Realm</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;org.apache.catalina.realm.UserDatabaseRealm&quot;</span> <span class=\"attr\">resourceName</span>=<span class=\"string\">&quot;UserDatabase&quot;</span>/&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">Realm</span>&gt;</span></span><br><span class=\"line\">      <span class=\"comment\">&lt;!-- 修改这下面一行 --&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;localhost&quot;</span> <span class=\"attr\">appBase</span>=<span class=\"string\">&quot;webapps&quot;</span> <span class=\"attr\">unpackWARs</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">autoDeploy</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Valve</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;org.apache.catalina.valves.AccessLogValve&quot;</span> <span class=\"attr\">directory</span>=<span class=\"string\">&quot;logs&quot;</span> <span class=\"attr\">prefix</span>=<span class=\"string\">&quot;localhost_access_log&quot;</span> <span class=\"attr\">suffix</span>=<span class=\"string\">&quot;.txt&quot;</span> <span class=\"attr\">pattern</span>=<span class=\"string\">&quot;%h %l %u %t <span class=\"symbol\">&amp;quot;</span>%r<span class=\"symbol\">&amp;quot;</span> %s %b&quot;</span>/&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">Engine</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">Service</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Server</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>然后修改 host,实现代理,如下图第二行即为需要添加的</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsLAE.png\" alt=\"20210309161039\" />\n<ul>\n<li>\n<p>含义就是: <code>在访问右边的主机时,将它指向左边的地址</code></p>\n</li>\n<li>\n<p>比如浏览器访问 <code>localhost:8080</code> 时,实际上是访问的 <code>127.0.0.1:8080</code>,也就是本机地址</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>现在,打开 Tomcat 服务,他就会在本机 8080 端口监听,当在浏览器输入<code>weidows.com:8080</code>时,会被 host 指向到<code>127.0.0.1:8080</code>,Tomcat 服务器收到请求并回应</p>\n<ul>\n<li>结构如下图</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsAGv.png\" alt=\"20210309163300\" />\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>可能会存在的疑问: 同样是指向到 <code>127.0.0.1</code>,为什么 localhost:8080 或者直接 127.0.0.1:8080 无法访问到 <a href=\"http://weidows.com:8080\">weidows.com:8080</a> 页面?</p>\n<ul>\n<li>这就像递归式问路,首先问 host 知不知道 <a href=\"http://weidows.com\">weidows.com</a>,host 不直接知道,它让我们问 Tomcat,于是我们去 127.0.0.1:8080 问 Tomcat 知不知道 <a href=\"http://weidows.com\">weidows.com</a>;</li>\n<li>诶,Tomcat 它可以直接知道 <a href=\"http://weidows.com\">weidows.com</a> 在哪里,于是浏览器就这么找到 <a href=\"http://weidows.com\">weidows.com</a> 页面了!</li>\n<li>页面在 <a href=\"http://weidows.com\">weidows.com</a> 手里,你要是去找 localhost:8080 或者 127.0.0.1 的话,就是问错人了,肯定是 404</li>\n</ul>\n</li>\n<li>\n<p>最后附一张图,根据序号来看,条理比较清晰.</p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVs8L1.png\" alt=\"20210322100531\" />\n</blockquote>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"乱码问题\">乱码问题</h2>\n<h3 id=\"终端乱码\">终端乱码</h3>\n<ul>\n<li>\n<p>在启动 Tomcat 时,终端内中文乱码:</p>\n<ul>\n<li>\n<p>虽然这个对程序运行没有影响,但是有些影响观瞻,一般只会在 Window 遇到,修改如下:</p>\n</li>\n<li>\n<p>找到 <code>Tomcat/conf/logging.properties</code> 里面的-&gt; <code>java.util.logging.ConsoleHandler.encoding</code>这一行 ,把 <code>UTF-8</code>换为<code>GBK</code></p>\n</li>\n</ul>\n</li>\n<li>\n<p>另一种方法: 把终端显示设置为 UTF-8</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVteSR.png\" alt=\"20210330125008\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"网页中文乱码\">网页中文乱码</h3>\n<ul>\n<li>\n<p>我们开发的页面,无论是动/静态,只要不指定编码格式,中文肯定乱码</p>\n</li>\n<li>\n<p>需要做的就是在开发网页时,指定 <code>CharacterEncoding = UTF-8</code></p>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "vscode",
                "website",
                "笔记",
                "idea",
                "服务器",
                "maven",
                "tomcat"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/1/",
            "url": "https://weidows.github.io/post/Java/Web/1/",
            "title": "🥼JavaWeb~(壹)探索传输协议",
            "date_published": "2021-03-22T01:15:14.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-22 10:40:55\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\1.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#%E5%8F%82%E7%85%A7\">参照</a></li>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\">基本概念</a>\n<ul>\n<li><a href=\"#%E5%8A%A8%E9%9D%99%E6%80%81-web\">动/静态 Web</a></li>\n<li><a href=\"#%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%AF%B9%E6%AF%94\">后端技术对比</a></li>\n<li><a href=\"#web-%E6%9C%8D%E5%8A%A1%E5%99%A8\">Web 服务器</a></li>\n</ul>\n</li>\n<li><a href=\"#http\">HTTP</a>\n<ul>\n<li><a href=\"#%E8%AF%B7%E6%B1%82%E8%A1%8C\">请求行</a></li>\n<li><a href=\"#%E6%B6%88%E6%81%AF%E5%A4%B4\">消息头</a></li>\n<li><a href=\"#%E5%93%8D%E5%BA%94%E4%BD%93\">响应体</a></li>\n<li><a href=\"#%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81\">响应状态码</a></li>\n</ul>\n</li>\n<li><a href=\"#maventomcat\">Maven+Tomcat</a></li>\n<li><a href=\"#servlet\">Servlet</a>\n<ul>\n<li><a href=\"#helloservlet\">HelloServlet</a></li>\n<li><a href=\"#%E6%9E%B6%E6%9E%84%E5%8E%9F%E7%90%86\">架构原理</a></li>\n<li><a href=\"#mapping\">Mapping</a></li>\n<li><a href=\"#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%82%E6%95%B0%E4%BA%86%E8%A7%A3\">初始化参数(了解)</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"笔记代码-3\"><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表-20\">借物表</h2>\n<blockquote>\n<p>在此文章记录了: <a href=\"../../../others/LearnWay#javaweb\">😍Weidows-の成长路线#javaweb</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"基本概念\">基本概念</h2>\n<h3 id=\"动-静态-Web\">动/静态 Web</h3>\n<ul>\n<li>\n<p>静态 web</p>\n<ul>\n<li>\n<p>比如 hexo 就是静态博客生成器,其生成的 HTML 页面文档树不会发生改变</p>\n</li>\n<li>\n<p>会因为 js 发生内容性的变化,但也是预设性的,并非动态变化.</p>\n</li>\n<li>\n<p>只能实现动画,不能实现动态;无后端,也就是无法与数据库交互,数据不能持久化,无法与用户进行信息交互</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>动态 web</p>\n<ul>\n<li>\n<p>比如 WordPress,客户端加载的内容会随着客户端交互而产生变化</p>\n</li>\n<li>\n<p>技术栈: Java Servlet/JSP,<a href=\"http://ASP.NET\">ASP.NET</a>,PHP,Python,etc.</p>\n</li>\n<li>\n<p>资源出现问题时可以停机维护,可以与用户交互,操作数据库持久化信息.</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>JavaWeb 应用包含多个部分</p>\n<ul>\n<li>\n<p>html,sss,is</p>\n</li>\n<li>\n<p>jsp,servlet</p>\n</li>\n<li>\n<p>Java 程序</p>\n</li>\n<li>\n<p>jar 包</p>\n</li>\n<li>\n<p>配置文件（Properties)</p>\n</li>\n</ul>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVs8L1.png\" alt=\"20210322100531\" />\n</blockquote>\n</li>\n</ul>\n<hr>\n<h3 id=\"后端技术对比\">后端技术对比</h3>\n<ul>\n<li>\n<p>ASP</p>\n<p>国内最早流行,业务代码错乱,维护成本高</p>\n</li>\n<li>\n<p>php</p>\n<p>开发速度很快，功能强大，跨平台，代码简单;但是无法承载大访问量的情况</p>\n</li>\n<li>\n<p>JSP/Servlet</p>\n<p>B/S 架构</p>\n<p>语法像 ASP，ASP+Java-&gt;JSP</p>\n<p>可以承载三高问题带来的影响</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"Web-服务器\">Web 服务器</h3>\n<ul>\n<li>\n<p><a href=\"http://ASP.NET\">ASP.NET</a></p>\n<p>Windows 系统自带</p>\n</li>\n<li>\n<p>Tomcat</p>\n<p>Apache 基金会的项目,在中小型并发量场景下普遍使用</p>\n<blockquote>\n<p>之前有个文章介绍了 <a href=\"https://weidows.gitee.io/post/others/IDEs/#Tomcat\">😁IDE 选用指北.#Tomcat</a></p>\n</blockquote>\n<blockquote>\n<p>另外,推荐一篇文章: <a href=\"https://zhuanlan.zhihu.com/p/54121733\">Tomcat 外传</a></p>\n</blockquote>\n<ul>\n<li>\n<p>Tomcat 项目层级结构</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> webapps ：Tomcat服务器的web目录</span><br><span class=\"line\"><span class=\"bullet\">  -</span> ROOT 网站的根目录</span><br><span class=\"line\"><span class=\"bullet\">  -</span> kuangstudy ：网站的目录名</span><br><span class=\"line\"><span class=\"bullet\">    -</span> WEB-INF</span><br><span class=\"line\"><span class=\"bullet\">      -</span> classes : java程序</span><br><span class=\"line\"><span class=\"bullet\">      -</span> lib : web应用所依赖的jar包</span><br><span class=\"line\"><span class=\"bullet\">      -</span> web.xml : 网站配置文件</span><br><span class=\"line\"><span class=\"bullet\">    -</span> index.html : 默认的首页</span><br><span class=\"line\"><span class=\"bullet\">    -</span> static</span><br><span class=\"line\"><span class=\"bullet\">      -</span> css</span><br><span class=\"line\"><span class=\"bullet\">        -</span> style.css</span><br><span class=\"line\"><span class=\"bullet\">      -</span> js</span><br><span class=\"line\"><span class=\"bullet\">      -</span> img</span><br><span class=\"line\"><span class=\"bullet\">    -</span> .....</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>Tomcat 可以 run 的项目只能是<code>webapp</code>,可以通过 Maven 创建这种项目</p>\n<ul>\n<li>\n<p>tomcat 可以直接跑起来 <code>root/src/main/webapp</code>这个目录, 或者用 maven package 打包后产生的.war 包</p>\n</li>\n<li>\n<p>其他形式的都无法用 tomcat 运行.</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"HTTP\">HTTP</h2>\n<p>(超文本传输协议）是一个简单的请求-响应协议，通常运行在 TCP 之上.</p>\n<h3 id=\"请求行\">请求行</h3>\n<figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Request URL:https:<span class=\"comment\">//www.baidu.com/   请求地址</span></span><br><span class=\"line\">Request <span class=\"keyword\">Method</span>:GET    get方法/post方法</span><br><span class=\"line\">Status Code:<span class=\"number\">200</span> OK    状态码：<span class=\"number\">200</span></span><br><span class=\"line\">Remote Address:<span class=\"number\">14.215</span>.<span class=\"number\">177.39</span>:<span class=\"number\">443</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>请求方式：Get,Post,HEAD,DELETE,PUT,TRACT.…</p>\n<ul>\n<li>\n<p>get：请求能够携带的参数比较少，大小有限制，会在浏览器的 URL 地址栏显示数据内容，不安全，但高效</p>\n</li>\n<li>\n<p>post: 请求能够携带的参数没有限制，大小没有限制，不会在浏览器的 URL 地址栏显示数据内容，安全，但不高效;只有表单才能使用.</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"消息头\">消息头</h3>\n<figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Accept:<span class=\"built_in\">text</span>/html  <span class=\"comment\">// 告诉浏览器，它所支持的数据类型</span></span><br><span class=\"line\">Accept-Encoding:gzip, deflate, br  <span class=\"comment\">// 支持哪种编码格式  GBK   UTF-8   GB2312  ISO8859-1</span></span><br><span class=\"line\">Accept-<span class=\"built_in\">Language</span>:zh-CN,zh;q=<span class=\"number\">0.9</span>    <span class=\"comment\">// 告诉浏览器，它的语言环境</span></span><br><span class=\"line\">Cache-Control:<span class=\"built_in\">max</span>-age=<span class=\"number\">0</span> <span class=\"comment\">// 缓存控制</span></span><br><span class=\"line\">Connection:keep-<span class=\"built_in\">alive</span> <span class=\"comment\">// 请求完成是断开还是保持连接</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"响应体\">响应体</h3>\n<figure class=\"highlight node-repl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">...</span></span><br><span class=\"line\">跟请求相同</span><br><span class=\"line\"><span class=\"meta prompt_\">...</span></span><br><span class=\"line\">Refresh：告诉客户端，多久刷新一次</span><br><span class=\"line\">Location：让网页重新定位</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"响应状态码\">响应状态码</h3>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVs6RT.png\" alt=\"20210323084728\" />\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Maven-Tomcat\">Maven+Tomcat</h2>\n<blockquote>\n<p><a href=\"../../../tools/Tomcat\">🐱‍🏍Maven+Tomcat 开发 webapp.</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Servlet\">Servlet</h2>\n<ul>\n<li>\n<p>Servlet 是 sun 公司开发动态 web 的一门技术,开发 Servlet 程序有两个步骤:</p>\n<ol>\n<li>\n<p>编写一个类，实现 Serlet 接口</p>\n</li>\n<li>\n<p>把开发好 java 类部署到 web 服务器中。</p>\n</li>\n</ol>\n</li>\n<li>\n<p>利用 maven 创建一个工程项目(project),在内部创建多个子模块(module)进行学习测试.</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"HelloServlet\">HelloServlet</h3>\n<ul>\n<li>\n<p>现在,在 JavaWeb 项目中已经创建好子模块<code>demo-1</code>,我们在这个 demo-1 内练习 HelloServlet,项目结构如下:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsVrS.png\" alt=\"20210324163957\" />\n</li>\n<li>\n<p>新建 <code>JavaWeb/demo-1/src/main/java/com/weidows/HelloServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.weidows;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> -<span class=\"number\">6617893791621340358L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//get或者post只是请求实现的不同的方式，可以相互调用，业务逻辑都一样</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"comment\">//ServletOutputStream outputStream = resp.getOutputStream();</span></span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter(); <span class=\"comment\">//响应流</span></span><br><span class=\"line\">    writer.print(<span class=\"string\">&quot;Hello,Servlet&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>修改 <code>JavaWeb/demo-1/src/main/webapp/WEB-INF/web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--注册Servlet,使这个类可以产生动态页面--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--Servlet的请求路径映射,使路径映射对应类--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/weidows<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>连接 Tomcat</p>\n<ul>\n<li>我们用 tomcat 跑起来这个子模块 (注意跑的是子模块不是整个项目)</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsrOD.png\" alt=\"20210324164515\" />\n</li>\n<li>\n<p>跑起来后</p>\n<ul>\n<li>\n<p>我们可以通过<code>http://localhost:8080/demo_1_war/</code> 访问到 <code>index.jsp</code> 这个静态页面</p>\n</li>\n<li>\n<p>也可以通过<code>http://localhost:8080/demo_1_war/weidows</code> 访问到我们用 Servlet 映射的动态页面</p>\n<ul>\n<li>注意末尾不能带’/', <code>http://localhost:8080/demo_1_war/weidows/</code> == <code>http://localhost:8080/demo_1_war/weidows/index.html</code> 因为并没有这个静态页面,会报 404</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>注意,无论是动态页面还是静态页面,都必须<code>指定编码</code>,否则中文会乱码.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"架构原理\">架构原理</h3>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsj6t.png\" alt=\"20210325090037\" />\n<ul>\n<li>\n<p>Tomcat 做的就是接收请求并处理,然后返回响应</p>\n</li>\n<li>\n<p>我们需要做的是实现 Servlet 接口,处理请求和响应信息</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"Mapping\">Mapping</h3>\n<ul>\n<li>\n<p>一个 Servlet 可以映射一个或多个或正则匹配 url 路径</p>\n<ul>\n<li><code>映射固定地址的优先级最高</code></li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/hello<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/hello2<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/hello3<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<servlet-mapping>\n    <servlet-name>hello</servlet-name>\n    <url-pattern>/hello/*</url-pattern>\n</servlet-mapping>\n<!--可以自定义后缀实现请求映射\n    注意,*前面不能加项目映射的路径\n    hello/xxx.weidows\n    -->\n<servlet-mapping>\n    <servlet-name>hello</servlet-name>\n    <url-pattern>*.weidows</url-pattern>\n</servlet-mapping>\n<figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\">- 例子: 把 <span class=\"number\">404</span> 页面换为我们自定义的</span><br><span class=\"line\"></span><br><span class=\"line\">  - src/main/java/com/weidows/<span class=\"type\">ErrorServlet</span>.java</span><br><span class=\"line\"></span><br><span class=\"line\">    ```<span class=\"type\">Java</span></span><br><span class=\"line\">    <span class=\"keyword\">import</span> javax.servlet.<span class=\"type\">ServletException</span>;</span><br><span class=\"line\">    <span class=\"keyword\">import</span> javax.servlet.http.<span class=\"type\">HttpServlet</span>;</span><br><span class=\"line\">    <span class=\"keyword\">import</span> javax.servlet.http.<span class=\"type\">HttpServletRequest</span>;</span><br><span class=\"line\">    <span class=\"keyword\">import</span> javax.servlet.http.<span class=\"type\">HttpServletResponse</span>;</span><br><span class=\"line\">    <span class=\"keyword\">import</span> java.io.<span class=\"type\">IOException</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ErrorServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"keyword\">protected</span> void doGet(<span class=\"type\">HttpServletRequest</span> req, <span class=\"type\">HttpServletResponse</span> resp) <span class=\"keyword\">throws</span> <span class=\"type\">ServletException</span>, <span class=\"type\">IOException</span> &#123;</span><br><span class=\"line\">        resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\">        resp.setCharacterEncoding(<span class=\"string\">&quot;utf8&quot;</span>);</span><br><span class=\"line\">        resp.getWriter().print(<span class=\"string\">&quot;&lt;h1&gt;404&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"keyword\">protected</span> void doPost(<span class=\"type\">HttpServletRequest</span> req, <span class=\"type\">HttpServletResponse</span> resp) <span class=\"keyword\">throws</span> <span class=\"type\">ServletException</span>, <span class=\"type\">IOException</span> &#123;</span><br><span class=\"line\">        doGet(req, resp);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">- 注册并映射 404 页面</span><br><span class=\"line\"></span><br><span class=\"line\">  - (注意上下顺序: ServletA MappingA ServletB MappingB 这样写会报错)</span><br><span class=\"line\"></span><br><span class=\"line\">  ```xml</span><br><span class=\"line\">  <span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">      <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">      <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--注册Servlet--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>ErrorServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.ErrorServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<pre><code>&lt;!--Servlet的请求路径--&gt;\n&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;helloServlet&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;/weidows&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;ErrorServlet&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n  </web-app>\n  <figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"comment\">### ServletContext</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">HttpServlet</span> <span class=\"string\">对象中常用方法:</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">this.getInitParameter()</span> <span class=\"string\">//</span> <span class=\"string\">初始化参数</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">this.getServletConfig()</span> <span class=\"string\">//</span> <span class=\"string\">Servlet</span> <span class=\"string\">配置</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">this.getServletContext()</span> <span class=\"string\">//</span> <span class=\"string\">Servlet</span> <span class=\"string\">上下文,最常用,这里只介绍这个</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">Web</span> <span class=\"string\">容器启动时,会创建对应的</span> <span class=\"string\">ServletContext</span> <span class=\"string\">对象,代表当前</span> <span class=\"string\">web</span> <span class=\"string\">应用,</span> <span class=\"string\">`不同</span> <span class=\"string\">Servlet</span> <span class=\"string\">之间共享这个</span> <span class=\"string\">ServletContext</span> <span class=\"string\">对象`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">例子:</span> <span class=\"string\">当访问</span> <span class=\"string\">`/helloServlet`</span> <span class=\"string\">时在</span> <span class=\"string\">servletContext</span> <span class=\"string\">对象中设置</span> <span class=\"string\">username</span> <span class=\"string\">属性,然后访问</span> <span class=\"string\">`/getServlet`</span> <span class=\"string\">可以查看设置的</span> <span class=\"string\">username</span> <span class=\"string\">属性值.</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">`src/main/java/com/weidows/HelloServlet.java`</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">```Java</span></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">java.io.IOException;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">javax.servlet.ServletContext;</span></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">javax.servlet.ServletException;</span></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">javax.servlet.http.HttpServlet;</span></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">javax.servlet.http.HttpServletRequest;</span></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">javax.servlet.http.HttpServletResponse;</span></span><br></pre></td></tr></table></figure>\n<p>public class HelloServlet extends HttpServlet {<br>\n@Override<br>\nprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>\nServletContext context = this.getServletContext();<br>\nString username = “齐下无贰”; //数据<br>\ncontext.setAttribute(“username”, username); //将一个数据保存在了 ServletContext 中，名字为：username 。值 username<br>\nSystem.out.println(“username 属性已设置.”);<br>\n}<br>\n}</p>\n  <figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">***</span></span><br><span class=\"line\"><span class=\"bullet\"></span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p><code>src/main/java/com/weidows/GetServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">GetServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> (String) <span class=\"built_in\">this</span>.getServletContext().getAttribute(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\">    resp.setCharacterEncoding(<span class=\"string\">&quot;utf8&quot;</span>);</span><br><span class=\"line\">    resp.getWriter().print(<span class=\"string\">&quot;名字: &quot;</span> + username);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>getServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.GetServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/helloServlet<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>getServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/getServlet<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"初始化参数-了解\">初始化参数(了解)</h3>\n<ul>\n<li>\n<p>初始化参数在 web.xml 中设置,用 getInitParameter()获取</p>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--配置一些web应用初始化参数--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">context-param</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>url<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/mybatis<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">context-param</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloParameter<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloParameter<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloParameter<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/helloParameter<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/java/com/weidows/HelloParameter.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloParameter</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">ServletContext</span> <span class=\"variable\">context</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getServletContext();</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> context.getInitParameter(<span class=\"string\">&quot;url&quot;</span>);</span><br><span class=\"line\">    resp.getWriter().print(url);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/SQL/5/",
            "url": "https://weidows.github.io/post/Java/SQL/5/",
            "title": "🚀进修MySQL~(伍)",
            "date_published": "2021-03-20T09:31:28.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-09-12 15:44:34\n * @FilePath: \\Blog-private\\source\\_posts\\Java\\SQL\\5.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#preparedstatement\">PreparedStatement</a>\n<ul>\n<li><a href=\"#sql-%E6%B3%A8%E5%85%A5%E9%97%AE%E9%A2%98\">SQL 注入问题</a></li>\n<li><a href=\"#%E5%8C%BA%E5%88%AB%E7%94%A8%E6%B3%95\">区别用法</a></li>\n</ul>\n</li>\n<li><a href=\"#ideasql\">IDEA+SQL</a></li>\n<li><a href=\"#jdbc%E4%BA%8B%E5%8A%A1\">JDBC+事务</a></li>\n<li><a href=\"#%E8%BF%9E%E6%8E%A5%E6%B1%A0\">连接池</a></li>\n<li><a href=\"#%E5%90%84%E5%90%8D%E8%AF%8D%E5%8C%BA%E5%88%AB\">各名词区别</a></li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"PreparedStatement\">PreparedStatement</h2>\n<h3 id=\"SQL-注入问题\">SQL 注入问题</h3>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/rongxiang111/article/details/78228681\">SQL 注入问题及解决</a></p>\n</blockquote>\n<ul>\n<li>\n<p>通过修改 SQL 指令字符串,使 SQL 服务器执行不正规或者恶意的 SQL 命令</p>\n</li>\n<li>\n<p>比如客户端可以通过修改 SQL 字符串,可以使服务器传回原本不能显示的数据,或者修改非指定的数据.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"区别用法\">区别用法</h3>\n<blockquote>\n<p>PreparedStatement 可以防止 SQL 注入,而且效率更高.</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Date;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.PreparedStatement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> twenty_one.jdbc.demo2.utils.JDBCUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestPreparedStatement</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">PreparedStatement</span> <span class=\"variable\">preparedStatement</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 连接</span></span><br><span class=\"line\">    connection = JDBCUtils.getConnection();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ! 插入</span></span><br><span class=\"line\">    <span class=\"comment\">// 问号&#x27;?&#x27;为占位符</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">insert</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;INSERT INTO jdbcstudy.users(NAME, PASSWORD, email, birthday)  VALUES (?,?,?,?);&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">//预编译sql</span></span><br><span class=\"line\">    preparedStatement = connection.prepareStatement(insert);</span><br><span class=\"line\">    <span class=\"comment\">//手动赋值</span></span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">1</span>, <span class=\"string\">&quot;weidows&quot;</span>);</span><br><span class=\"line\">    preparedStatement.setInt(<span class=\"number\">2</span>, <span class=\"number\">123456</span>);</span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">3</span>, <span class=\"string\">&quot;utsuko27@qq.com&quot;</span>);</span><br><span class=\"line\">    preparedStatement.setDate(<span class=\"number\">4</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">java</span>.util.Date().getTime()));</span><br><span class=\"line\">    <span class=\"comment\">// 执行</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (preparedStatement.executeUpdate() &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;成功.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ! 查询</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">query</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;SELECT * From jdbcstudy.users where name = ?;&quot;</span>;</span><br><span class=\"line\">    preparedStatement = connection.prepareStatement(query);</span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">1</span>, <span class=\"string\">&quot;weidows&quot;</span>);</span><br><span class=\"line\">    resultSet = preparedStatement.executeQuery();</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (resultSet.next()) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;id = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;id&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;name = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;NAME&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;password = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;PASSWORD&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;email = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;email&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;birthday = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;birthday&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;===============================================================&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 断连</span></span><br><span class=\"line\">    JDBCUtils.releaseConnection(connection, preparedStatement, resultSet);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"IDEA-SQL\">IDEA+SQL</h2>\n<ul>\n<li>\n<p>图形化的,摸索摸索就差不多会了.</p>\n</li>\n<li>\n<p>在学这个 SQL 课程时,个人开始用的是 sqlyog,后来卸载了,直接用的 idea 内嵌的.</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JDBC-事务\">JDBC+事务</h2>\n<ul>\n<li>\n<p>创建表+插入数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">TABLE</span> jdbcstudy.account</span><br><span class=\"line\">(</span><br><span class=\"line\">  id    <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">  name  <span class=\"type\">varchar</span>(<span class=\"number\">255</span>),</span><br><span class=\"line\">  money <span class=\"type\">DECIMAL</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> jdbcstudy.account(name, money)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;A&#x27;</span>, <span class=\"number\">1000</span>),</span><br><span class=\"line\">      (<span class=\"string\">&#x27;B&#x27;</span>, <span class=\"number\">1000</span>),</span><br><span class=\"line\">      (<span class=\"string\">&#x27;C&#x27;</span>, <span class=\"number\">1000</span>);</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>事务</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.PreparedStatement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> twenty_one.jdbc.demo2.utils.JDBCUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestTransaction</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">PreparedStatement</span> <span class=\"variable\">preparedStatement</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      connection = JDBCUtils.getConnection();</span><br><span class=\"line\">      <span class=\"comment\">//关闭数据库的自动提交功能,同时开启事务</span></span><br><span class=\"line\">      connection.setAutoCommit(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">sql</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;update account set money = money-500 where id = 1&quot;</span>;</span><br><span class=\"line\">      preparedStatement = connection.prepareStatement(sql);</span><br><span class=\"line\">      preparedStatement.executeUpdate();</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">sql2</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;update account set money = money-500 where id = 2&quot;</span>;</span><br><span class=\"line\">      preparedStatement = connection.prepareStatement(sql2);</span><br><span class=\"line\">      preparedStatement.executeUpdate();</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//业务完毕，提交事务</span></span><br><span class=\"line\">      connection.commit();</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;事务操作成功&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">      <span class=\"comment\">//如果失败，默认会回滚,也可以在这里自定义</span></span><br><span class=\"line\">      connection.rollback();</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">      JDBCUtils.releaseConnection(connection, preparedStatement, resultSet);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"连接池\">连接池</h2>\n<ul>\n<li>\n<p>概念上与线程池相同,因为频繁创建和断开连接耗费大量资源,利用池化技术来<code>减轻资源损耗.</code></p>\n</li>\n<li>\n<p>数据库连接池接口 <code>DataSource</code> ,开源数据源实现类:</p>\n<ul>\n<li>\n<p>DBCP</p>\n</li>\n<li>\n<p>C3P0</p>\n</li>\n<li>\n<p>Druid: 阿里巴巴</p>\n</li>\n</ul>\n<blockquote>\n<p>无论使用什么数据源，本质是不变的，DateSource 接口不会变，方法就不会变</p>\n</blockquote>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>用法区别就是 utils 类中,加载驱动,连接 connection 和读取 properties 配置文件不需要我们自己写了</p>\n</li>\n<li>\n<p>db.properties</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># DBCP的设置文件,属性名不能错</span></span><br><span class=\"line\"><span class=\"attr\">driverClassName</span>=<span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"attr\">url</span>=<span class=\"string\">jdbc:mysql://localhost:3306/jdbcStudy?useUnicode = true &amp; characterEncoding = utf8 &amp; useSSL = true</span></span><br><span class=\"line\"><span class=\"attr\">username</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"attr\">password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>utils.DbcpUtils</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Statement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.sql.DataSource;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.dbcp.BasicDataSourceFactory;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DbcpUtils</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Properties</span> <span class=\"variable\">properties</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">DataSource</span> <span class=\"variable\">dataSource</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 加载连接信息</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      properties.load(<span class=\"keyword\">new</span> <span class=\"title class_\">FileInputStream</span>(<span class=\"string\">&quot;Java/src/main/java/twenty_one/jdbc/demo3/db.properties&quot;</span>));</span><br><span class=\"line\">      dataSource = BasicDataSourceFactory.createDataSource(properties);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 获取连接</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Connection <span class=\"title function_\">getConnection</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> dataSource.getConnection();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 释放资源</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">releaseConnection</span><span class=\"params\">(Connection connection, Statement statement, ResultSet resultSet)</span></span><br><span class=\"line\">      <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (resultSet != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      resultSet.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (statement != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      statement.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (connection != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      connection.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>TestDataSource</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Date;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.PreparedStatement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> twenty_one.jdbc.demo3.utils.DbcpUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestDataSource</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">PreparedStatement</span> <span class=\"variable\">preparedStatement</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 连接</span></span><br><span class=\"line\">    connection = DbcpUtils.getConnection();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ! 插入</span></span><br><span class=\"line\">    <span class=\"comment\">// 问号&#x27;?&#x27;为占位符</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">insert</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;INSERT INTO jdbcstudy.users(NAME, PASSWORD, email, birthday)  VALUES (?,?,?,?);&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">//预编译sql</span></span><br><span class=\"line\">    preparedStatement = connection.prepareStatement(insert);</span><br><span class=\"line\">    <span class=\"comment\">//手动赋值</span></span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">1</span>, <span class=\"string\">&quot;weidows&quot;</span>);</span><br><span class=\"line\">    preparedStatement.setInt(<span class=\"number\">2</span>, <span class=\"number\">123456</span>);</span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">3</span>, <span class=\"string\">&quot;utsuko27@qq.com&quot;</span>);</span><br><span class=\"line\">    preparedStatement.setDate(<span class=\"number\">4</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">java</span>.util.Date().getTime()));</span><br><span class=\"line\">    <span class=\"comment\">// 执行</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (preparedStatement.executeUpdate() &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;成功.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ! 查询</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">query</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;SELECT * From jdbcstudy.users where name = ?;&quot;</span>;</span><br><span class=\"line\">    preparedStatement = connection.prepareStatement(query);</span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">1</span>, <span class=\"string\">&quot;weidows&quot;</span>);</span><br><span class=\"line\">    resultSet = preparedStatement.executeQuery();</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (resultSet.next()) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;id = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;id&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;name = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;NAME&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;password = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;PASSWORD&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;email = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;email&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;birthday = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;birthday&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;===============================================================&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 断连</span></span><br><span class=\"line\">    DbcpUtils.releaseConnection(connection, preparedStatement, resultSet);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"各名词区别\">各名词区别</h2>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/u013541707/article/details/113182157\">简单分析jdbc、datasource数据源、数据库驱动，连接池，jdbcTemplate，mybatis、JPA、Hibernate的区别</a></p>\n</blockquote>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "mysql",
                "jdbc"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/SQL/4/",
            "url": "https://weidows.github.io/post/Java/SQL/4/",
            "title": "🚀进修MySQL~(肆)",
            "date_published": "2021-03-17T06:41:19.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-03-20 17:34:17\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\MySQL\\4.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86\">用户/权限管理</a>\n<ul>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C\">基本操作</a></li>\n<li><a href=\"#%E6%9D%83%E9%99%90%E8%A7%A3%E9%87%8A\">权限解释</a></li>\n<li><a href=\"#%E8%A1%A8%E7%BB%B4%E6%8A%A4\">表维护</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AF%BC%E5%87%BA%E5%AF%BC%E5%85%A5\">导出&amp;导入</a></li>\n<li><a href=\"#%E8%AE%BE%E8%AE%A1%E6%95%B0%E6%8D%AE%E5%BA%93\">设计数据库</a></li>\n<li><a href=\"#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F\">三大范式</a>\n<ul>\n<li><a href=\"#%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F\">第一范式</a></li>\n<li><a href=\"#%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F\">第二范式</a></li>\n<li><a href=\"#%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F\">第三范式</a></li>\n<li><a href=\"#%E6%80%A7%E8%83%BD%E8%80%83%E9%87%8F\">性能考量</a></li>\n</ul>\n</li>\n<li><a href=\"#jdbc\">JDBC</a>\n<ul>\n<li><a href=\"#helloworld\">HelloWorld</a></li>\n<li><a href=\"#%E5%AF%B9%E8%B1%A1%E6%93%8D%E4%BD%9C\">对象操作</a></li>\n<li><a href=\"#%E8%A7%A3%E8%80%A6%E6%A1%88%E4%BE%8B\">解耦案例</a>\n<ul>\n<li><a href=\"#utils\">Utils</a></li>\n<li><a href=\"#curd\">CRUD</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"用户-权限管理\">用户/权限管理</h2>\n<h3 id=\"基本操作\">基本操作</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  用户信息表：mysql.user</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 刷新权限</span></span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  增加用户</span></span><br><span class=\"line\"><span class=\"comment\">  必须拥有mysql数据库的全局CREATE USER权限，或拥有INSERT权限。</span></span><br><span class=\"line\"><span class=\"comment\">  用户名/密码注意加引号，如 &#x27;user_name&#x27;@&#x27;192.168.1.1&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> weidows IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 重命名用户</span></span><br><span class=\"line\">RENAME <span class=\"keyword\">USER</span> weidows <span class=\"keyword\">TO</span> weidows2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 删除用户</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">USER</span> weidows2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 设置密码</span></span><br><span class=\"line\"><span class=\"comment\">-- 为当前用户设置密码</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span> PASSWORD <span class=\"operator\">=</span> PASSWORD (<span class=\"string\">&#x27;密码&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 为指定用户设置密码</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span> PASSWORD <span class=\"keyword\">FOR</span> 用户名 <span class=\"operator\">=</span> PASSWORD (<span class=\"string\">&#x27;密码&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 上面两种报错的话</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">USER</span> root<span class=\"variable\">@localhost</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;密码&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  授予权限</span></span><br><span class=\"line\"><span class=\"comment\">  GRANT 权限列表 ON 表名 TO 用户名 [IDENTIFIED BY [PASSWORD] &#x27;password&#x27;]</span></span><br><span class=\"line\"><span class=\"comment\">    all privileges 表示所有权限</span></span><br><span class=\"line\"><span class=\"comment\">    *.* 表示所有库的所有表</span></span><br><span class=\"line\"><span class=\"comment\">    库名.表名 表示某库下面的某表</span></span><br><span class=\"line\"><span class=\"comment\">  只有root用户拥有grant权限,其他用户无法开启.</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">ALL</span> PRIVILEGES <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> weidows IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查看权限</span></span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> GRANTS <span class=\"keyword\">FOR</span> root<span class=\"variable\">@localhost</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 查看当前用户权限</span></span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> GRANTS;</span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> GRANTS <span class=\"keyword\">FOR</span> <span class=\"built_in\">CURRENT_USER</span>;</span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> GRANTS <span class=\"keyword\">FOR</span> <span class=\"built_in\">CURRENT_USER</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  撤消权限</span></span><br><span class=\"line\"><span class=\"comment\">  REVOKE 权限列表 ON 表名 FROM 用户名</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">REVOKE</span> <span class=\"keyword\">ALL</span> PRIVILEGES <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> weidows;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"权限解释\">权限解释</h3>\n<ul>\n<li>(查询用,不用硬记)</li>\n</ul>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALL</span> [<span class=\"keyword\">PRIVILEGES</span>]    <span class=\"comment\">-- 设置除GRANT OPTION之外的所有简单权限</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span>    <span class=\"comment\">-- 允许使用ALTER TABLE</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">ROUTINE</span>    <span class=\"comment\">-- 更改或取消已存储的子程序</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span>    <span class=\"comment\">-- 允许使用CREATE TABLE</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">ROUTINE</span>    <span class=\"comment\">-- 创建已存储的子程序</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TEMPORARY</span> <span class=\"keyword\">TABLES</span>        <span class=\"comment\">-- 允许使用CREATE TEMPORARY TABLE</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span>        <span class=\"comment\">-- 允许使用CREATE USER, DROP USER, RENAME USER和REVOKE ALL PRIVILEGES。</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">VIEW</span>        <span class=\"comment\">-- 允许使用CREATE VIEW</span></span><br><span class=\"line\"><span class=\"keyword\">DELETE</span>    <span class=\"comment\">-- 允许使用DELETE</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span>    <span class=\"comment\">-- 允许使用DROP TABLE</span></span><br><span class=\"line\"><span class=\"keyword\">EXECUTE</span>        <span class=\"comment\">-- 允许用户运行已存储的子程序</span></span><br><span class=\"line\">FILE    <span class=\"comment\">-- 允许使用SELECT...INTO OUTFILE和LOAD DATA INFILE</span></span><br><span class=\"line\"><span class=\"keyword\">INDEX</span>     <span class=\"comment\">-- 允许使用CREATE INDEX和DROP INDEX</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span>    <span class=\"comment\">-- 允许使用INSERT</span></span><br><span class=\"line\"><span class=\"keyword\">LOCK</span> <span class=\"keyword\">TABLES</span>        <span class=\"comment\">-- 允许对您拥有SELECT权限的表使用LOCK TABLES</span></span><br><span class=\"line\">PROCESS     <span class=\"comment\">-- 允许使用SHOW FULL PROCESSLIST</span></span><br><span class=\"line\"><span class=\"keyword\">REFERENCES</span>    <span class=\"comment\">-- 未被实施</span></span><br><span class=\"line\">RELOAD    <span class=\"comment\">-- 允许使用FLUSH</span></span><br><span class=\"line\"><span class=\"keyword\">REPLICATION</span> CLIENT    <span class=\"comment\">-- 允许用户询问从属服务器或主服务器的地址</span></span><br><span class=\"line\"><span class=\"keyword\">REPLICATION</span> SLAVE    <span class=\"comment\">-- 用于复制型从属服务器（从主服务器中读取二进制日志事件）</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span>    <span class=\"comment\">-- 允许使用SELECT</span></span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> DATABASES    <span class=\"comment\">-- 显示所有数据库</span></span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> <span class=\"keyword\">VIEW</span>    <span class=\"comment\">-- 允许使用SHOW CREATE VIEW</span></span><br><span class=\"line\">SHUTDOWN    <span class=\"comment\">-- 允许使用mysqladmin shutdown</span></span><br><span class=\"line\">SUPER    <span class=\"comment\">-- 允许使用CHANGE MASTER, KILL, PURGE MASTER LOGS和SET GLOBAL语句，mysqladmin debug命令；允许您连接（一次），即使已达到max_connections。</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span>    <span class=\"comment\">-- 允许使用UPDATE</span></span><br><span class=\"line\"><span class=\"keyword\">USAGE</span>    <span class=\"comment\">-- “无权限”的同义词</span></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">OPTION</span>    <span class=\"comment\">-- 允许授予权限</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"表维护\">表维护</h3>\n<ul>\n<li><code>了解</code></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 分析和存储表的关键字分布</span></span><br><span class=\"line\">ANALYZE [<span class=\"keyword\">LOCAL</span> <span class=\"operator\">|</span> NO_WRITE_TO_BINLOG] <span class=\"keyword\">TABLE</span> 表名 ...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 检查一个或多个表是否有错误</span></span><br><span class=\"line\"><span class=\"keyword\">CHECK</span> <span class=\"keyword\">TABLE</span> tbl_name [, tbl_name] ... [option] ...</span><br><span class=\"line\">option <span class=\"operator\">=</span> &#123;QUICK <span class=\"operator\">|</span> FAST <span class=\"operator\">|</span> MEDIUM <span class=\"operator\">|</span> EXTENDED <span class=\"operator\">|</span> CHANGED&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 整理数据文件的碎片</span></span><br><span class=\"line\">OPTIMIZE [<span class=\"keyword\">LOCAL</span> <span class=\"operator\">|</span> NO_WRITE_TO_BINLOG] <span class=\"keyword\">TABLE</span> tbl_name [, tbl_name] ...</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"导出-导入\">导出&amp;导入</h2>\n<ul>\n<li>\n<p>可以用 SQL GUI 程序操作,下面介绍命令行操作</p>\n</li>\n<li>\n<p>导出</p>\n<ul>\n<li>可以加上-w 携带备份条件</li>\n<li>-xxx 后面不加空格,直接带上参数</li>\n</ul>\n<hr>\n<ol>\n<li>导出一张表 mysqldump -u 用户名 -p 密码 库名 表名 &gt; 文件名(D:/a.sql)</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqldump -uroot -p123456 school student &gt;D:/a.sql</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>导出多张表 mysqldump -u 用户名 -p 密码 库名 表 1 表 2 表 3 &gt; 文件名(D:/a.sql)</li>\n</ol>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqldump -uroot -p123456 school student <span class=\"built_in\">result</span> &gt;D:/<span class=\"keyword\">a</span>.sql</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>导出所有表 mysqldump -u 用户名 -p 密码 库名 &gt; 文件名(D:/a.sql)</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqldump -uroot -p123456 school &gt;D:/a.sql</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>导出一个库 mysqldump -u 用户名 -p 密码 -B 库名 &gt; 文件名(D:/a.sql)</li>\n</ol>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">mysqldump</span> -uroot -p123456 -<span class=\"keyword\">B</span> school &gt;D:/a.sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>导入</p>\n<ol>\n<li>在已经登录 mysql,切换到指定数据库的情况下: source 备份文件</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> D:/a.sql</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>在不登录的情况下: mysql -u 用户名 -p 密码 [库名] &lt; 备份文件 (如果导入一个库的话就不加库名)</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p123456 school &lt;D:/a.sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"设计数据库\">设计数据库</h2>\n<ul>\n<li>\n<p>目的:</p>\n<ol>\n<li>节省数据存储空间</li>\n<li>保证数据的完整性</li>\n<li>方便进行数据库应用系统的开发</li>\n</ol>\n<hr>\n</li>\n<li>\n<p>阶段设计</p>\n<ol>\n<li>\n<p>需求分析: 分析客户的业务和数据处理需求</p>\n</li>\n<li>\n<p>概要设计: 设计数据库的 E-R 模型图 , 确认需求信息的正确和完整.</p>\n</li>\n<li>\n<p>收集信息: 搜集与需求相关的信息需求.</p>\n<ol>\n<li>页面 A</li>\n<li>功能 B</li>\n<li>特殊需求 C</li>\n<li>自定义 D</li>\n<li>…</li>\n</ol>\n</li>\n<li>\n<p>标识实体: 标识数据库所要管理的对象,详细信息(Attribute)以及关系(Relationship)</p>\n<ol>\n<li>写博客 user -&gt; blog</li>\n<li>分类 blog -&gt; category</li>\n<li>评论 user(作者) -&gt; user(评论者) -&gt; blog(博客页面)</li>\n<li>…</li>\n</ol>\n</li>\n</ol>\n</li>\n</ul>\n<hr>\n<h2 id=\"三大范式\">三大范式</h2>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/scarecrow_fly/article/details/102170042\">数据库设计的三大范式通俗讲解</a></p>\n</blockquote>\n<ul>\n<li>\n<p>三大范式出现为了解决一下四种问题</p>\n<ul>\n<li>\n<p>信息重复</p>\n</li>\n<li>\n<p>更新异常</p>\n</li>\n<li>\n<p>插入异常</p>\n</li>\n<li>\n<p>删除异常</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"第一范式\">第一范式</h3>\n<blockquote>\n<p>确保每列的<code>原子性</code>,每列都是不可再分的最小数据单元</p>\n</blockquote>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsdNA.png\" alt=\"20210317202650\" />\n</blockquote>\n<ul>\n<li>上面家庭信息和学校信息都可以再拆分为两列</li>\n</ul>\n<hr>\n<h3 id=\"第二范式\">第二范式</h3>\n<blockquote>\n<p>必须在满足第一范式的条件下: 每个表只做一件事(<code>每行有唯一标识</code>,其他数据只依赖于此标识列)</p>\n</blockquote>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsvu5.png\" alt=\"20210317203230\" />\n</blockquote>\n<ul>\n<li>\n<p>简单来讲就是标识列和其他列有共同重复数据行,那么<code>标识列</code>和<code>有重复数据的列</code>可以分到另一个表</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsNOm.png\" alt=\"20210317203601\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"第三范式\">第三范式</h3>\n<blockquote>\n<p>在第二范式基础上,其他列数据必须与标识列数据有直接关系</p>\n</blockquote>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsQkh.png\" alt=\"20210317204105\" />\n</blockquote>\n<ul>\n<li>\n<p>也就是说不存在标识列与其他列共同重复了,但还是可能存在多个其他列有共同重复(班主任的那三列有共同重复数据)</p>\n</li>\n<li>\n<p>把班主任分出去</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVs7lq.png\" alt=\"20210317204341\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"性能考量\">性能考量</h3>\n<blockquote>\n<p><code>关联查询不能超过三张表</code>.</p>\n</blockquote>\n<ul>\n<li>\n<p>实际应用中需要考虑多表的额外开销</p>\n</li>\n<li>\n<p>如果不规范程度低,而且性能需求高的场景,则需要考虑是否遵循范式.</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JDBC\">JDBC</h2>\n<h3 id=\"HelloWorld\">HelloWorld</h3>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsz1c.png\" alt=\"20210319102812\" />\n<ul>\n<li>\n<p>工具类 (Java 自带)</p>\n<ul>\n<li>java.sql</li>\n<li>javax.sql</li>\n</ul>\n</li>\n<li>\n<p>SQL 驱动需要导入(在 pom.xml 中)</p>\n<ul>\n<li>mysql-connector-java-版本号 jar</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.23<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>创建数据库</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE jdbcStudy <span class=\"type\">CHARACTER</span> <span class=\"keyword\">SET</span> utf8 <span class=\"keyword\">COLLATE</span> utf8_general_ci;</span><br><span class=\"line\"></span><br><span class=\"line\">USE jdbcStudy;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `users`</span><br><span class=\"line\">(</span><br><span class=\"line\">  id       <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY,</span><br><span class=\"line\">  NAME     <span class=\"type\">VARCHAR</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">  PASSWORD <span class=\"type\">VARCHAR</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">  email    <span class=\"type\">VARCHAR</span>(<span class=\"number\">60</span>),</span><br><span class=\"line\">  birthday <span class=\"type\">DATE</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> `users`(id, NAME, PASSWORD, email, birthday)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;zhansan&#x27;</span>, <span class=\"string\">&#x27;123456&#x27;</span>, <span class=\"string\">&#x27;zs@sina.com&#x27;</span>, <span class=\"string\">&#x27;1980-12-04&#x27;</span>),</span><br><span class=\"line\">      (<span class=\"number\">2</span>, <span class=\"string\">&#x27;lisi&#x27;</span>, <span class=\"string\">&#x27;123456&#x27;</span>, <span class=\"string\">&#x27;lisi@sina.com&#x27;</span>, <span class=\"string\">&#x27;1981-12-04&#x27;</span>),</span><br><span class=\"line\">      (<span class=\"number\">3</span>, <span class=\"string\">&#x27;wangwu&#x27;</span>, <span class=\"string\">&#x27;123456&#x27;</span>, <span class=\"string\">&#x27;wangwu@sina.com&#x27;</span>, <span class=\"string\">&#x27;1979-12-04&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>连接,helloworld</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.DriverManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Statement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.mysql.cj.jdbc.Driver;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">JDBCFirstDemo</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 1.设置用户信息</span></span><br><span class=\"line\"><span class=\"comment\">        useUnicode = true 支持中文编码</span></span><br><span class=\"line\"><span class=\"comment\">        characterEncoding = utf8 设定字符集</span></span><br><span class=\"line\"><span class=\"comment\">        useSSL = true 安全连接</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;jdbc:mysql://localhost:3306/jdbcStudy?useUnicode = true &amp; characterEncoding = utf8 &amp; useSSL = true&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;root&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;123456&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2.加载驱动(固定写法,二选一)</span></span><br><span class=\"line\">    <span class=\"comment\">// Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span></span><br><span class=\"line\">    DriverManager.registerDriver(<span class=\"keyword\">new</span> <span class=\"title class_\">Driver</span>());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 3.连接，数据库对象 Connection 代表数据库</span></span><br><span class=\"line\"><span class=\"comment\">        //事务提交</span></span><br><span class=\"line\"><span class=\"comment\">        connection.commit();</span></span><br><span class=\"line\"><span class=\"comment\">        //事务回滚</span></span><br><span class=\"line\"><span class=\"comment\">        connection.rollback();</span></span><br><span class=\"line\"><span class=\"comment\">        //数据库设置自动提交</span></span><br><span class=\"line\"><span class=\"comment\">        connection.setAutoCommit(true);</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> DriverManager.getConnection(url, user, password);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4.创建SQL的对象</span></span><br><span class=\"line\">    <span class=\"type\">Statement</span> <span class=\"variable\">statement</span> <span class=\"operator\">=</span> connection.createStatement();</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">sql</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;SELECT * FROM users&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5.执行SQL的对象,查看返回结果</span></span><br><span class=\"line\">    <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> statement.executeQuery(sql); <span class=\"comment\">//返回的结果集</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (resultSet.next()) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;id = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;id&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;name = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;NAME&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;password = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;PASSWORD&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;email = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;email&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;birthday = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;birthday&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;===============================================================&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//6.释放连接</span></span><br><span class=\"line\">    resultSet.close();</span><br><span class=\"line\">    statement.close();</span><br><span class=\"line\">    connection.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>执行结果</p>\n<figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id = 1</span><br><span class=\"line\">name = zhansan</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = zs@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1980-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">id = 2</span><br><span class=\"line\">name = lisi</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = lisi@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1981-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">id = 3</span><br><span class=\"line\">name = wangwu</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = wangwu@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1979-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"对象操作\">对象操作</h3>\n<ul>\n<li>\n<p>connection</p>\n<ul>\n<li>connection.rollback();</li>\n<li>connection.commit();</li>\n<li>connection.setAutoCommit();</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>statement</p>\n<ul>\n<li>statement.executeQuery(); 执行查询 SQL</li>\n<li>statement.execute(); 可以执行任何 SQL 指令</li>\n<li>statement.executeUpdate(); 更新，插入，删除，返回受影响的行数</li>\n<li>statement.executeBatch(); 执行一组 SQL</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>ResultSet</p>\n<ul>\n<li>resultSet.getObject(); 在不知道列类型下使用</li>\n<li>resultSet.getString(); 如果知道则指定使用</li>\n<li>resultSet.getInt();</li>\n<li>…</li>\n</ul>\n<hr>\n<ul>\n<li>resultSet.next(); 移动到下一个</li>\n<li>resultSet.previous(); 移动到上一个</li>\n<li>resultSet.beforeFirst(); 移动到最前</li>\n<li>resultSet.afterLast(); 移动到最后</li>\n<li>resultSet.absolute(row); 移动到指定行</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"解耦案例\">解耦案例</h3>\n<ul>\n<li>\n<p>上面的 JDBC 包括加载连接,业务逻辑,状态转化都写到一个类中,导致扩展时很不方便,需要 <code>解耦</code></p>\n</li>\n<li>\n<p>把加载连接分离到 <code>db.properties</code></p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">driver</span>=<span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"attr\">url</span>=<span class=\"string\">jdbc:mysql://localhost:3306/jdbcStudy?useUnicode = true &amp; characterEncoding = utf8 &amp; useSSL = true</span></span><br><span class=\"line\"><span class=\"attr\">username</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"attr\">password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"Utils\">Utils</h4>\n<ul>\n<li>\n<p>把 SQL connect 和 release 分离到 <code>utils.JDBCUtils</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.DriverManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Statement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">JDBCUtils</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">driver</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 加载连接信息</span></span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">properties</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      properties.load(<span class=\"keyword\">new</span> <span class=\"title class_\">FileInputStream</span>(<span class=\"string\">&quot;Java/src/main/java/twenty_one/jdbc/demo2/db.properties&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">      driver = properties.getProperty(<span class=\"string\">&quot;driver&quot;</span>);</span><br><span class=\"line\">      url = properties.getProperty(<span class=\"string\">&quot;url&quot;</span>);</span><br><span class=\"line\">      username = properties.getProperty(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">      password = properties.getProperty(<span class=\"string\">&quot;password&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      Class.forName(driver);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException | ClassNotFoundException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 获取连接</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Connection <span class=\"title function_\">getConnection</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> DriverManager.getConnection(url, username, password);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 释放资源</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">releaseConnection</span><span class=\"params\">(Connection connection,Statement statement,ResultSet resultSet)</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (resultSet != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      resultSet.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (statement != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      statement.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (connection != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      connection.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"CRUD-2\">CRUD</h4>\n<ul>\n<li>\n<p>业务类: 测试增删改查(CRUD)</p>\n<ul>\n<li>增删改用<code>.executeUpdate()</code>, 查用<code>.executeQuery()</code></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Statement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> twenty_one.jdbc.demo2.utils.JDBCUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Test</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Statement</span> <span class=\"variable\">statement</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 连接</span></span><br><span class=\"line\">    connection = JDBCUtils.getConnection();</span><br><span class=\"line\">    statement = connection.createStatement();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 增</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">insert</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;INSERT INTO jdbcstudy.users(NAME, PASSWORD, email, birthday)  VALUES (&#x27;weidows&#x27;, 123456, &#x27;utsuko27@qq.com&#x27;, &#x27;2020-07-28&#x27;);&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (statement.executeUpdate(insert) &gt; <span class=\"number\">0</span>) &#123; <span class=\"comment\">// 返回int:受影响的行数</span></span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;插入成功. insert -&gt; weidows&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 改</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">update</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;update jdbcstudy.users set password =654321 where name = &#x27;weidows&#x27;;&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (statement.executeUpdate(update) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;修改成功. weidows.password -&gt; 654321&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">query</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;SELECT * From jdbcstudy.users;&quot;</span>;</span><br><span class=\"line\">    resultSet = statement.executeQuery(query);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (resultSet.next()) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;id = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;id&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;name = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;NAME&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;password = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;PASSWORD&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;email = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;email&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;birthday = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;birthday&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;===============================================================&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 删</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">delete</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;delete from jdbcstudy.users where name = &#x27;weidows&#x27;;&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (statement.executeUpdate(delete) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;删除成功.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 断连</span></span><br><span class=\"line\">    JDBCUtils.releaseConnection(connection, statement, resultSet);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>执行结果</p>\n<figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">插入成功. insert -&gt; weidows</span><br><span class=\"line\">修改成功. weidows.password -&gt; 654321</span><br><span class=\"line\">id = 1</span><br><span class=\"line\">name = zhansan</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = zs@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1980-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">id = 2</span><br><span class=\"line\">name = lisi</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = lisi@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1981-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">id = 3</span><br><span class=\"line\">name = wangwu</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = wangwu@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1979-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">id = 9</span><br><span class=\"line\">name = weidows</span><br><span class=\"line\">password = 654321</span><br><span class=\"line\">email = utsuko27@qq.com</span><br><span class=\"line\"><span class=\"section\">birthday = 2020-07-28</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">删除成功.</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "mysql",
                "jdbc"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/SQL/3/",
            "url": "https://weidows.github.io/post/Java/SQL/3/",
            "title": "🚀进修MySQL~(叁)",
            "date_published": "2021-03-15T14:45:58.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-03-21 10:58:41\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\MySQL\\3.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%87%BD%E6%95%B0\">函数</a>\n<ul>\n<li><a href=\"#%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0\">数据函数</a>\n<ul>\n<li><a href=\"#%E4%BD%9C%E7%94%A8%E4%BA%8E%E8%AE%B0%E5%BD%95\">作用于记录</a></li>\n<li><a href=\"#%E4%BD%9C%E7%94%A8%E4%BA%8E%E5%AD%97%E6%AE%B5\">作用于字段</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0\">字符串函数</a></li>\n<li><a href=\"#%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0\">时间函数</a></li>\n<li><a href=\"#%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF\">系统信息</a></li>\n<li><a href=\"#%E5%88%86%E7%BB%84\">分组</a></li>\n<li><a href=\"#md5-%E5%8A%A0%E5%AF%86\">MD5 加密</a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BA%8B%E5%8A%A1\">事务</a>\n<ul>\n<li><a href=\"#acid-%E5%8E%9F%E5%88%99\">ACID 原则</a></li>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95\">基本语法</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%B4%A2%E5%BC%95\">索引</a>\n<ul>\n<li><a href=\"#%E5%88%86%E7%B1%BB\">分类</a></li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95\">添加&amp;删除索引</a></li>\n<li><a href=\"#explain\">EXPLAIN</a></li>\n<li><a href=\"#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90\">性能分析</a></li>\n<li><a href=\"#%E7%B4%A2%E5%BC%95%E8%A7%84%E7%9F%A9\">索引规矩</a></li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"函数\">函数</h2>\n<h3 id=\"数据函数\">数据函数</h3>\n<h4 id=\"作用于记录\">作用于记录</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 绝对值</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">ABS</span>(<span class=\"number\">-8</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 向上取整</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">CEILING</span>(<span class=\"number\">9.4</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 向下取整</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">FLOOR</span>(<span class=\"number\">9.4</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 随机数,返回一个0-1之间的随机数</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  RAND();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 符号函数: 负数返回-1,正数返回1,0返回0</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  SIGN(<span class=\"number\">0</span>);</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"作用于字段\">作用于字段</h4>\n<ul>\n<li>也叫 <code>聚合函数</code>(常用)</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  三种COUNT()用法及区别</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">  count(1)和count(*)都会对全表进行扫描，统计所有记录的条数，包括那些为null的记录，因此，它们的效率可以说是相差无几;而count(字段)则与前两者不同，它会统计该字段不为null的记录条数。</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">  1）在表没有主键时，count(1)比count(*)快</span></span><br><span class=\"line\"><span class=\"comment\">  2）有主键时，主键作为计算条件，count(主键)效率最高；</span></span><br><span class=\"line\"><span class=\"comment\">  3）若表格只有一个字段，则count(*)效率较高。</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">COUNT</span>(studentname) <span class=\"keyword\">AS</span> `学生人数`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">AS</span> `学生人数`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">COUNT</span>(<span class=\"number\">1</span>) <span class=\"keyword\">AS</span> `学生人数`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 和</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">SUM</span>(StudentResult) <span class=\"keyword\">AS</span> `总 和`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 平均</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">AVG</span>(StudentResult) <span class=\"keyword\">AS</span> `平 均 分`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 最高</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">MAX</span>(StudentResult) <span class=\"keyword\">AS</span> `最 高 分`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 最低</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">MIN</span>(StudentResult) <span class=\"keyword\">AS</span> `最 低 分`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"字符串函数\">字符串函数</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 返回字符串包含的字符数</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">CHAR_LENGTH</span>(<span class=\"string\">&#x27;狂神说坚持就能成功&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 合并字符串,参数可以有多个</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  CONCAT(<span class=\"string\">&#x27;我&#x27;</span>, <span class=\"string\">&#x27;爱&#x27;</span>, <span class=\"string\">&#x27;程序&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 替换字符串,从某个位置开始替换某个长度</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span>(<span class=\"string\">&#x27;我爱编程helloworld&#x27;</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"string\">&#x27;超级热爱&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- toLowerCase小写</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">LOWER</span>(<span class=\"string\">&#x27;KuangShen&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- toUpperCase大写</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">UPPER</span>(<span class=\"string\">&#x27;KuangShen&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 从左边截取</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">LEFT</span>(<span class=\"string\">&#x27;hello,world&#x27;</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 从右边截取</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">RIGHT</span>(<span class=\"string\">&#x27;hello,world&#x27;</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 替换字符串</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  REPLACE(<span class=\"string\">&#x27;狂神说坚持就能成功&#x27;</span>, <span class=\"string\">&#x27;坚持&#x27;</span>, <span class=\"string\">&#x27;努力&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 截取字符串,开始和长度</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  SUBSTR(<span class=\"string\">&#x27;狂神说坚持就能成功&#x27;</span>, <span class=\"number\">4</span>, <span class=\"number\">6</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 反转</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  REVERSE(<span class=\"string\">&#x27;狂神说坚持就能成功&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询姓周的同学,改成邹 (采用子查询)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentname <span class=\"operator\">=</span>(</span><br><span class=\"line\">    <span class=\"keyword\">SELECT</span></span><br><span class=\"line\">      REPLACE(studentname, <span class=\"string\">&#x27;周&#x27;</span>, <span class=\"string\">&#x27;邹&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">WHERE</span></span><br><span class=\"line\">      studentname <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;周%&#x27;</span></span><br><span class=\"line\">  );</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"时间函数\">时间函数</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 获取当前日期(两种一样)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">CURRENT_DATE</span>();</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  CRUDATE();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 获取当前日期和时间(三种一样)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  NOW();</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">LOCALTIME</span>();</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  SYSDATE();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 获取年月日,时分秒</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">YEAR</span>(NOW());</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">MONTH</span>(NOW());</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">DAY</span>(NOW());</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">HOUR</span>(NOW());</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">MINUTE</span>(NOW());</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">SECOND</span>(NOW());</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"系统信息\">系统信息</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 版本</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  VERSION();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 用户(MySQL的用户)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">USER</span>();</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">SYSTEM_USER</span>();</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"分组\">分组</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  查询 不同课程 的平均分,最高分,最低分 (根据不同的课程进行分组)</span></span><br><span class=\"line\"><span class=\"comment\">  分组后面的筛选,使用 `HAVING`</span></span><br><span class=\"line\"><span class=\"comment\">  having是从前面筛选的字段再筛选，而where是从数据表中的字段直接进行的筛选的</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  <span class=\"built_in\">AVG</span>(studentresult) <span class=\"keyword\">AS</span> `平 均 分`,</span><br><span class=\"line\">  <span class=\"built_in\">MAX</span>(StudentResult) <span class=\"keyword\">AS</span> `最 高 分`,</span><br><span class=\"line\">  <span class=\"built_in\">MIN</span>(StudentResult) <span class=\"keyword\">AS</span> `最 低 分`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span> <span class=\"keyword\">AS</span> r</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` <span class=\"keyword\">AS</span> s <span class=\"keyword\">ON</span> r.subjectno <span class=\"operator\">=</span> s.subjectno</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  r.subjectno</span><br><span class=\"line\"><span class=\"keyword\">HAVING</span></span><br><span class=\"line\">  `平 均 分` <span class=\"operator\">&gt;</span> <span class=\"number\">60</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"MD5-加密\">MD5 加密</h3>\n<blockquote>\n<p>Message-Digest Algorithm 5（信息-摘要算法 5），用于确保信息传输完整一致。是计算机广泛使用的杂凑算法（摘要算法、哈希算法）.</p>\n</blockquote>\n<ul>\n<li>\n<p>初始化</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 新建表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `testmd5` (</span><br><span class=\"line\">  `id` <span class=\"type\">INT</span>(<span class=\"number\">4</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  `name` <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  `pwd` <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> INNODB <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 插入数据(明文密码)</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  testmd5</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span></span><br><span class=\"line\">  (<span class=\"number\">1</span>, <span class=\"string\">&#x27;kuangshen&#x27;</span>, <span class=\"string\">&#x27;123456&#x27;</span>),(<span class=\"number\">2</span>, <span class=\"string\">&#x27;qinjiang&#x27;</span>, <span class=\"string\">&#x27;456789&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>加密</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 加密全列</span></span><br><span class=\"line\"><span class=\"keyword\">update</span></span><br><span class=\"line\">  testmd5</span><br><span class=\"line\"><span class=\"keyword\">set</span></span><br><span class=\"line\">  pwd <span class=\"operator\">=</span> md5(pwd);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 插入时加密</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  testmd5</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span>(<span class=\"number\">4</span>, <span class=\"string\">&#x27;kuangshen3&#x27;</span>, md5(<span class=\"string\">&#x27;123456&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 检查账号密码是否对应</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  testmd5</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  `name` <span class=\"operator\">=</span> <span class=\"string\">&#x27;kuangshen&#x27;</span></span><br><span class=\"line\">  <span class=\"keyword\">AND</span> `pwd` <span class=\"operator\">=</span> MD5(<span class=\"string\">&#x27;123456&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"事务\">事务</h2>\n<ul>\n<li>一组遵循 ACID 原则的 SQL 指令</li>\n</ul>\n<h3 id=\"ACID-原则\">ACID 原则</h3>\n<ul>\n<li>\n<p>原子性(Atomic)</p>\n<ul>\n<li>同一批次的 SQL 指令,要么全通过,要么全取消,不存在中间态</li>\n</ul>\n</li>\n<li>\n<p>一致性(Consist)</p>\n<ul>\n<li>事务前后数据完整性一致</li>\n</ul>\n</li>\n<li>\n<p>隔离性(Isolated)</p>\n<ul>\n<li>\n<p>多个用户并发执行多事务,会使其<code>串行化</code>执行,同一时间只能有一个请求作用于同一数据</p>\n</li>\n<li>\n<p>有可能隔离失败导致一些问题(如下)</p>\n</li>\n</ul>\n<hr>\n<ol>\n<li>\n<p>脏读 : 一个事务读取了另一个没有提交的事务</p>\n</li>\n<li>\n<p>不可重复读 : 在同一个事务内，再次读取表中的数据，表发生了改变</p>\n</li>\n<li>\n<p>幻读(虚读) : 在一个事务内，读取到了别人插入的数据，导致前后读出来的结果不一致</p>\n</li>\n</ol>\n</li>\n<li>\n<p>持久性(Durable)</p>\n<ul>\n<li>事务一旦提交成功,便不会被外界因素影响而导致回滚.</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"基本语法\">基本语法</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  MySQL中默认是自动提交,使用事务时应先关闭自动提交</span></span><br><span class=\"line\"><span class=\"comment\">  关闭自动提交模式(0),开启(1)</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span> autocommit <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 开始一个事务,标记事务的起始点</span></span><br><span class=\"line\"><span class=\"keyword\">START</span> TRANSACTION;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 此处写业务代码</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  COMMIT; -- 提交一个事务给数据库</span></span><br><span class=\"line\"><span class=\"comment\">  ROLLBACK; -- 将事务回滚,数据回到本次事务的初始状态</span></span><br><span class=\"line\"><span class=\"comment\">  保存点(了解,不常用)</span></span><br><span class=\"line\"><span class=\"comment\">    SAVEPOINT `保 存 点 名 称`; -- 设置一个事务保存点</span></span><br><span class=\"line\"><span class=\"comment\">    ROLLBACK TO SAVEPOINT `保 存 点 名 称`; -- 回滚到保存点</span></span><br><span class=\"line\"><span class=\"comment\">    RELEASE SAVEPOINT `保 存 点 名 称`; -- 删除保存点</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">COMMIT</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 还原MySQL数据库的自动提交</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span> autocommit <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>逻辑图</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVs0E0.png\" alt=\"20210316182445\" />\n</li>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE `shop` <span class=\"type\">CHARACTER</span> <span class=\"keyword\">SET</span> utf8 <span class=\"keyword\">COLLATE</span> utf8_general_ci;</span><br><span class=\"line\"></span><br><span class=\"line\">USE `shop`;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `account` (</span><br><span class=\"line\">  `id` <span class=\"type\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  `name` <span class=\"type\">VARCHAR</span>(<span class=\"number\">32</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  `cash` <span class=\"type\">DECIMAL</span>(<span class=\"number\">9</span>, <span class=\"number\">2</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> INNODB <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  account (`name`, `cash`)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;A&#x27;</span>, <span class=\"number\">2000.00</span>),(<span class=\"string\">&#x27;B&#x27;</span>, <span class=\"number\">10000.00</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 开始</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span></span><br><span class=\"line\">  autocommit <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">START</span> TRANSACTION;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span></span><br><span class=\"line\">  account</span><br><span class=\"line\"><span class=\"keyword\">SET</span></span><br><span class=\"line\">  cash <span class=\"operator\">=</span> cash <span class=\"number\">-500</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  `name` <span class=\"operator\">=</span> <span class=\"string\">&#x27;A&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span></span><br><span class=\"line\">  account</span><br><span class=\"line\"><span class=\"keyword\">SET</span></span><br><span class=\"line\">  cash <span class=\"operator\">=</span> cash <span class=\"operator\">+</span> <span class=\"number\">500</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  `name` <span class=\"operator\">=</span> <span class=\"string\">&#x27;B&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">COMMIT</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SET</span></span><br><span class=\"line\">  autocommit <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"索引\">索引</h2>\n<blockquote>\n<p>索引是帮助 MySQL 高校获取数据的数据结构.</p>\n</blockquote>\n<ul>\n<li>提高查询,分组,全文搜索速度</li>\n<li>表间参照&amp;数据唯一性功能.</li>\n</ul>\n<h3 id=\"分类\">分类</h3>\n<ol>\n<li>\n<p>主键索引 (Primary Key)</p>\n<ul>\n<li>最常见,唯一性(一个表只能有一个)</li>\n</ul>\n</li>\n<li>\n<p>唯一索引 (Unique)</p>\n<ul>\n<li>保证某列中记录值唯一,同一表可以有多个唯一索引</li>\n</ul>\n</li>\n<li>\n<p>常规索引 (Key/Index)</p>\n<ul>\n<li>默认的索引类型</li>\n</ul>\n</li>\n<li>\n<p>全文索引 (FullText)</p>\n<ul>\n<li>MyISAM/InnoDB 引擎下才能使用,对字段类型也有要求,适用于大型数据</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3 id=\"添加-删除索引\">添加&amp;删除索引</h3>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">方法一：创建表时</span><br><span class=\"line\">　<span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名 (</span><br><span class=\"line\">    字段名<span class=\"number\">1</span> 数据类型 [完整性约束条件…],</span><br><span class=\"line\">    字段名<span class=\"number\">2</span> 数据类型 [完整性约束条件…],</span><br><span class=\"line\">    索引类型 [索引名] (字段名[(长度)] [<span class=\"keyword\">ASC</span> |<span class=\"keyword\">DESC</span>])</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">方法二：<span class=\"keyword\">CREATE</span>在已存在的表上创建索引</span><br><span class=\"line\">  <span class=\"keyword\">CREATE</span> 索引类型 索引名</span><br><span class=\"line\">  <span class=\"keyword\">ON</span> 表名 (字段名[(长度)] [<span class=\"keyword\">ASC</span> |<span class=\"keyword\">DESC</span>]) ;</span><br><span class=\"line\"></span><br><span class=\"line\">方法三：<span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span>在已存在的表上创建索引</span><br><span class=\"line\">  <span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名</span><br><span class=\"line\">    <span class=\"keyword\">ADD</span> 索引类型 索引名 (字段名[(长度)] [<span class=\"keyword\">ASC</span> |<span class=\"keyword\">DESC</span>]) ;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 例子:增加全文索引</span></span><br><span class=\"line\">  <span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `school`.`student`</span><br><span class=\"line\">    <span class=\"keyword\">ADD</span> FULLTEXT <span class=\"keyword\">INDEX</span> `studentname` (`studentName`);</span><br><span class=\"line\"></span><br><span class=\"line\">#删除索引：<span class=\"keyword\">DROP</span> <span class=\"keyword\">INDEX</span> 索引名 <span class=\"keyword\">ON</span> 表名字;</span><br><span class=\"line\">#删除主键索引: <span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">DROP</span> <span class=\"keyword\">PRIMARY KEY</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">#显示索引信息: <span class=\"keyword\">SHOW</span> <span class=\"keyword\">INDEX</span> <span class=\"keyword\">FROM</span> 表名;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"EXPLAIN\">EXPLAIN</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  EXPLAIN : 分析SQL语句执行性能</span></span><br><span class=\"line\"><span class=\"comment\">  常规索引</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">EXPLAIN</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> studentno <span class=\"operator\">=</span> <span class=\"string\">&#x27;1000&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  使用全文索引</span></span><br><span class=\"line\"><span class=\"comment\">  全文搜索通过 MATCH() 函数完成。</span></span><br><span class=\"line\"><span class=\"comment\">  搜索字符串作为 against() 的参数被给定。对于表中的每个记录行，MATCH() 返回一个相关性值。即搜索字符串与记录行在 MATCH() 列表中指定的列的文本之间的相似性尺度。</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">EXPLAIN</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> <span class=\"keyword\">MATCH</span>(studentname) AGAINST(<span class=\"string\">&#x27;刘&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"性能分析\">性能分析</h3>\n<ul>\n<li>\n<p>建表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `app_user`</span><br><span class=\"line\">(</span><br><span class=\"line\">  `id`          <span class=\"type\">bigint</span>(<span class=\"number\">20</span>) unsigned <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  `name`        <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)              <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;&#x27;</span> COMMENT <span class=\"string\">&#x27;用户昵称&#x27;</span>,</span><br><span class=\"line\">  `email`       <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)         <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;用户邮箱&#x27;</span>,</span><br><span class=\"line\">  `phone`       <span class=\"type\">varchar</span>(<span class=\"number\">20</span>)              <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;&#x27;</span> COMMENT <span class=\"string\">&#x27;手机号&#x27;</span>,</span><br><span class=\"line\">  `gender`      tinyint(<span class=\"number\">4</span>) unsigned      <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;0&#x27;</span> COMMENT <span class=\"string\">&#x27;性别（0:男；1：女）&#x27;</span>,</span><br><span class=\"line\">  `password`    <span class=\"type\">varchar</span>(<span class=\"number\">100</span>)        <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;密码&#x27;</span>,</span><br><span class=\"line\">  `age`         tinyint(<span class=\"number\">4</span>)               <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;0&#x27;</span> COMMENT <span class=\"string\">&#x27;年龄&#x27;</span>,</span><br><span class=\"line\">  `create_time` datetime                 <span class=\"keyword\">DEFAULT</span> <span class=\"built_in\">CURRENT_TIMESTAMP</span>,</span><br><span class=\"line\">  `update_time` <span class=\"type\">timestamp</span>           <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"built_in\">CURRENT_TIMESTAMP</span> <span class=\"keyword\">ON</span> <span class=\"keyword\">UPDATE</span> <span class=\"built_in\">CURRENT_TIMESTAMP</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> InnoDB</span><br><span class=\"line\">  <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8mb4 COMMENT <span class=\"operator\">=</span><span class=\"string\">&#x27;app用户表&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>生成随机数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DELIMITER $$</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">FUNCTION</span> mock_data()</span><br><span class=\"line\">  <span class=\"keyword\">RETURNS</span> <span class=\"type\">INT</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">  <span class=\"keyword\">DECLARE</span> num <span class=\"type\">INT</span> <span class=\"keyword\">DEFAULT</span> <span class=\"number\">1000000</span>;</span><br><span class=\"line\">  <span class=\"keyword\">DECLARE</span> i <span class=\"type\">INT</span> <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">  WHILE i <span class=\"operator\">&lt;</span> num</span><br><span class=\"line\">    DO</span><br><span class=\"line\">      <span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> app_user(`name`, `email`, `phone`, `gender`, `password`, `age`)</span><br><span class=\"line\">      <span class=\"keyword\">VALUES</span> (CONCAT(<span class=\"string\">&#x27;用户&#x27;</span>, i), <span class=\"string\">&#x27;24736743@qq.com&#x27;</span>, CONCAT(<span class=\"string\">&#x27;18&#x27;</span>, <span class=\"built_in\">FLOOR</span>(RAND() <span class=\"operator\">*</span> (<span class=\"number\">999999999</span> <span class=\"operator\">-</span> <span class=\"number\">100000000</span>) <span class=\"operator\">+</span> <span class=\"number\">100000000</span>)),</span><br><span class=\"line\">              <span class=\"built_in\">FLOOR</span>(RAND() <span class=\"operator\">*</span> <span class=\"number\">2</span>), UUID(), <span class=\"built_in\">FLOOR</span>(RAND() <span class=\"operator\">*</span> <span class=\"number\">100</span>));</span><br><span class=\"line\">      <span class=\"keyword\">SET</span> i <span class=\"operator\">=</span> i <span class=\"operator\">+</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">END</span> WHILE;</span><br><span class=\"line\">  <span class=\"keyword\">RETURN</span> i;</span><br><span class=\"line\"><span class=\"keyword\">END</span>;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> mock_data();</span><br></pre></td></tr></table></figure>\n<ul>\n<li>上面的有可能无效,可以用下面的</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;schema&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;study&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;table&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;app_user&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;mockStartIndex&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;mockCount&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">100000</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;mockValueReference&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;http://mockjs.com/examples.html#DPD&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;mock&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bigint&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;$mockIndex&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;varchar&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;email&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;varchar&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;phone&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;varchar&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gender&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;tinyint&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@integer(0,1)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;varchar&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;age&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;tinyint&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@integer(0,100)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;create_time&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;datetime&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@now(&#x27;yyyy-MM-dd HH:mm:ss&#x27;)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;update_time&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timestamp&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@now(&#x27;yyyy-MM-dd HH:mm:ss&#x27;)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>性能测试</p>\n<ul>\n<li>\n<p>无索引下 select 耗时 &amp; 搜索行数</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">study&gt; <span class=\"keyword\">SELECT</span></span><br><span class=\"line\">        *</span><br><span class=\"line\">      <span class=\"keyword\">FROM</span></span><br><span class=\"line\">        app_user</span><br><span class=\"line\">      <span class=\"keyword\">WHERE</span></span><br><span class=\"line\">          <span class=\"type\">name</span> = <span class=\"string\">&#x27;wkjvo&#x27;</span></span><br><span class=\"line\">[<span class=\"number\">2021</span><span class=\"number\">-03</span><span class=\"number\">-17</span> <span class=\"number\">12</span>:<span class=\"number\">06</span>:<span class=\"number\">29</span>] 在 <span class=\"number\">202</span> ms (execution: <span class=\"number\">72</span> ms, fetching: <span class=\"number\">130</span> ms) 中从 <span class=\"number\">1</span> 开始检索到<span class=\"number\">1</span> 行</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">rows</span>: <span class=\"number\">99946</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>添加索引</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> INDEX idx_app_user_name <span class=\"keyword\">ON</span> app_user(name);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>有索引的 select</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">study&gt; <span class=\"keyword\">SELECT</span></span><br><span class=\"line\">        *</span><br><span class=\"line\">      <span class=\"keyword\">FROM</span></span><br><span class=\"line\">        app_user</span><br><span class=\"line\">      <span class=\"keyword\">WHERE</span></span><br><span class=\"line\">          <span class=\"type\">name</span> = <span class=\"string\">&#x27;wkjvo&#x27;</span></span><br><span class=\"line\">[<span class=\"number\">2021</span><span class=\"number\">-03</span><span class=\"number\">-17</span> <span class=\"number\">12</span>:<span class=\"number\">12</span>:<span class=\"number\">11</span>] 在 <span class=\"number\">100</span> ms (execution: <span class=\"number\">6</span> ms, fetching: <span class=\"number\">94</span> ms) 中从 <span class=\"number\">1</span> 开始检索到<span class=\"number\">1</span> 行</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">rows</span>: <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"索引规矩\">索引规矩</h3>\n<ul>\n<li>\n<p>无索引时是暴力遍历搜索,数据表越大越慢;有索引时是对特定数据结构索引,搜索速度快,但是在增删改时有额外性能开销.</p>\n<ol>\n<li>不要对<code>经常变动</code>的数据加索引</li>\n<li><code>小数据量</code>的表建议不要加索引</li>\n<li>一般只在查找条件的字段索引</li>\n</ol>\n</li>\n<li>\n<p>索引数据结构</p>\n<ol>\n<li>hash 单个索引快,范围索引慢</li>\n<li>Btree</li>\n</ol>\n</li>\n<li>\n<p>不同的数据库引擎所支持的索引类型以及索引数据结构不同</p>\n<ul>\n<li>InnoDB 支持事务，支持行级别锁定，支持 B-tree、Full-text 等索引，不支持 Hash 索引</li>\n<li>MyISAM 不支持事务，支持表级别锁定，支持 B-tree、Full-text 等索引，不支持 Hash 索引</li>\n</ul>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "mysql"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/SQL/2/",
            "url": "https://weidows.github.io/post/Java/SQL/2/",
            "title": "🚀进修MySQL~(贰)",
            "date_published": "2021-03-10T04:14:47.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-06 00:02:28\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\MySQL\\2.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#dql-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2\">DQL-数据查询</a>\n<ul>\n<li><a href=\"#%E6%80%BB%E8%A7%88\">总览</a></li>\n<li><a href=\"#select\">SELECT</a></li>\n<li><a href=\"#%E5%8E%BB%E9%87%8D-distinct\">去重 DISTINCT</a></li>\n<li><a href=\"#%E5%AF%B9%E5%88%97%E4%BD%BF%E7%94%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F\">对列使用表达式</a></li>\n<li><a href=\"#where\">where</a>\n<ul>\n<li><a href=\"#%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C%E7%AC%A6\">逻辑操作符</a></li>\n<li><a href=\"#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2\">模糊查询</a></li>\n<li><a href=\"#%E9%80%9A%E9%85%8D%E7%AC%A6\">通配符</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2\">联表查询</a></li>\n<li><a href=\"#%E8%87%AA%E8%BF%9E%E6%8E%A5\">自连接</a></li>\n<li><a href=\"#%E6%8E%92%E5%BA%8F\">排序</a></li>\n<li><a href=\"#%E5%88%86%E9%A1%B5\">分页</a></li>\n<li><a href=\"#%E5%AD%90%E6%9F%A5%E8%AF%A2\">子查询</a><br>\n<a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"DQL-数据查询\">DQL-数据查询</h2>\n<h3 id=\"总览\">总览</h3>\n<ul>\n<li>\n<p>语句顺序不能变</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVscAz.png\" alt=\"20210316194554\" />\n</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> [<span class=\"keyword\">ALL</span> <span class=\"operator\">|</span> <span class=\"keyword\">DISTINCT</span>]</span><br><span class=\"line\">&#123;<span class=\"operator\">*</span> <span class=\"operator\">|</span> table.<span class=\"operator\">*</span> <span class=\"operator\">|</span> [table.field1[<span class=\"keyword\">as</span> alias1][,table.field2[<span class=\"keyword\">as</span> alias2]][,...]]&#125;</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> table_name [<span class=\"keyword\">as</span> table_alias]</span><br><span class=\"line\">  [<span class=\"keyword\">left</span> <span class=\"operator\">|</span> <span class=\"keyword\">right</span> <span class=\"operator\">|</span> <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> table_name2]  <span class=\"comment\">-- 联合查询</span></span><br><span class=\"line\">  [<span class=\"keyword\">WHERE</span> ...]  <span class=\"comment\">-- 指定结果需满足的条件</span></span><br><span class=\"line\">  [<span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> ...]  <span class=\"comment\">-- 指定结果按照哪几个字段来分组</span></span><br><span class=\"line\">  [<span class=\"keyword\">HAVING</span>]  <span class=\"comment\">-- 过滤分组的记录必须满足的次要条件</span></span><br><span class=\"line\">  [<span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> ...]  <span class=\"comment\">-- 指定查询记录按一个或多个条件排序</span></span><br><span class=\"line\">  [LIMIT &#123;[<span class=\"keyword\">offset</span>,]row_count <span class=\"operator\">|</span> row_countOFFSET <span class=\"keyword\">offset</span>&#125;]; <span class=\"comment\">-- 指定查询的记录从哪条至哪条</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"SELECT\">SELECT</h3>\n<blockquote>\n<p>SELECT 列名 [AS 显示列名] FROM 表名 [AS 显示表名];</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查询所有学生信息</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询指定列</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentid,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 这里是为列取别名(as关键词可以省略)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentid <span class=\"keyword\">AS</span> `学 号`,</span><br><span class=\"line\">  studentname `姓 名`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- as也可以为表取别名(并不会显示出来)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentid <span class=\"keyword\">AS</span> `学 号`,</span><br><span class=\"line\">  studentname <span class=\"keyword\">AS</span> `姓 名`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student <span class=\"keyword\">AS</span> `表`;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 通过CONCAT()函数拼接字符串</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  CONCAT(<span class=\"string\">&#x27;姓名: &#x27;</span>, studentname) <span class=\"keyword\">AS</span> `拼接后的名字`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br></pre></td></tr></table></figure>\n<h3 id=\"去重-DISTINCT\">去重 DISTINCT</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> student</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"对列使用表达式\">对列使用表达式</h3>\n<ul>\n<li>数据库中的表达式 : 一般由文本值 , 列值 , NULL , 函数和操作符等组成</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查询自增步长</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  @<span class=\"variable\">@auto</span>_increment_increment;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询版本号</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  VERSION();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 表达式</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"number\">100</span> <span class=\"operator\">*</span> <span class=\"number\">3</span> <span class=\"number\">-1</span> <span class=\"keyword\">AS</span> `结果`;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 学员考试成绩集体提分一分查看</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentid,</span><br><span class=\"line\">  gradeid <span class=\"operator\">+</span> <span class=\"number\">1</span> <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;升级后&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"where\">where</h3>\n<blockquote>\n<p>表达式结果必须是 <code>布尔值</code></p>\n</blockquote>\n<h4 id=\"逻辑操作符\">逻辑操作符</h4>\n<ul>\n<li>AND &amp;&amp;</li>\n<li>OR ||</li>\n<li>NOT !</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 满足条件的查询</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> Studentno,StudentResult <span class=\"keyword\">FROM</span> <span class=\"keyword\">result</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询考试成绩在95-100之间的</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> Studentno,StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"keyword\">result</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> StudentResult<span class=\"operator\">&gt;=</span><span class=\"number\">95</span> <span class=\"operator\">&amp;&amp;</span> StudentResult<span class=\"operator\">&lt;=</span><span class=\"number\">100</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 模糊查询</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> Studentno,StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"keyword\">result</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> StudentResult <span class=\"keyword\">BETWEEN</span> <span class=\"number\">95</span> <span class=\"keyword\">AND</span> <span class=\"number\">100</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 除了1000号同学,要其他同学的成绩</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> studentno,studentresult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"keyword\">result</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> studentno<span class=\"operator\">!=</span><span class=\"number\">1000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 使用NOT</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> studentno,studentresult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"keyword\">result</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> <span class=\"operator\">!</span> studentno<span class=\"operator\">=</span><span class=\"number\">1000</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h4 id=\"模糊查询\">模糊查询</h4>\n  <img src=\"https://www.helloimg.com/images/2022/02/27/GVsS0Y.png\" alt=\"20210312120236\" />\n<ul>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- LIKE like结合使用的通配符:  % (代表0到任意个字符)   _ (一个字符)</span></span><br><span class=\"line\"><span class=\"comment\">-- =============================================</span></span><br><span class=\"line\"><span class=\"comment\">-- 查询姓刘的同学的学号及姓名</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentname <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;刘%&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询姓刘的同学,后面只有一个字的</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentname <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;刘_&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询姓刘的同学,后面只有两个字的</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentname <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;刘__&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询姓名中含有 &#x27;嘉&#x27; 字的</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentname <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;%嘉%&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 查询姓名中含有特殊字符的需要使用转义符号 &#x27;\\&#x27;</span></span><br><span class=\"line\">  <span class=\"comment\">-- 自定义转义符关键字: ESCAPE &#x27;:&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- IN</span></span><br><span class=\"line\"><span class=\"comment\">-- =============================================</span></span><br><span class=\"line\"><span class=\"comment\">-- 查询学号为1000,1001,1002的学生姓名</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentno <span class=\"keyword\">IN</span> (<span class=\"number\">1000</span>, <span class=\"number\">1001</span>, <span class=\"number\">1002</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询地址在北京,南京,河南洛阳的学生</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  address</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  address <span class=\"keyword\">IN</span> (<span class=\"string\">&#x27;北京&#x27;</span>, <span class=\"string\">&#x27;南京&#x27;</span>, <span class=\"string\">&#x27;河南洛阳&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 对NULL判断 不能直接写=NULL, 用 is null</span></span><br><span class=\"line\"><span class=\"comment\">-- =============================================</span></span><br><span class=\"line\"><span class=\"comment\">-- 查询出生日期没有填写的同学</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  BornDate <span class=\"keyword\">IS</span> <span class=\"keyword\">NULL</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询出生日期填写的同学</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  BornDate <span class=\"keyword\">IS</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询没有写家庭住址的同学</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  Address <span class=\"operator\">=</span> <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">  <span class=\"keyword\">OR</span> Address <span class=\"keyword\">IS</span> <span class=\"keyword\">NULL</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n</ul>\n<h4 id=\"通配符\">通配符</h4>\n<p>比如有个表 user,有一个 <code>name</code> 数据为<code>张三</code>,需要通过’张’字模糊查询出来</p>\n<ul>\n<li>\n<p>这样是查不出来的,这是全字匹配,换为’张三’可以查出来</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> <span class=\"keyword\">user</span></span><br><span class=\"line\"><span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;张&#x27;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>需要改成这样: 这样是作为通配符,name 中含有’张’字的都会被匹配出来.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> <span class=\"keyword\">user</span></span><br><span class=\"line\"><span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;%张%&#x27;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"联表查询\">联表查询</h3>\n<ul>\n<li>\n<p>七种 SQL joins</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVslkM.png\" alt=\"20210313224946\" />\n<ul>\n<li>\n<p>共有四种操作符 <code>inner,full outer,left,right</code></p>\n</li>\n<li>\n<p>ON 后面跟的是 A 表与 B 表数据交叉列,是 join 成立的条件.</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- student和result表中都有studentno,如不指定select那个表中的,会报错&quot;不明确&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 右连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">RIGHT</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 等值连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s,</span><br><span class=\"line\">  <span class=\"keyword\">result</span> r</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 左连接 (查询了所有同学,不考试的也会查出来)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查一下缺考的同学(左连接应用场景)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  StudentResult <span class=\"keyword\">IS</span> <span class=\"keyword\">NULL</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询参加了考试的同学信息(学号,学生姓名,科目名,分数)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  `student` s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `<span class=\"keyword\">result</span>` r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> sub.subjectno <span class=\"operator\">=</span> r.subjectno</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"自连接\">自连接</h3>\n<ul>\n<li>\n<p>把一张表视作两张表,然后把<code>同一列</code>的不同数据筛选开<code>作为两列</code>输出</p>\n</li>\n<li>\n<p>初始化数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建一个表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `category` (</span><br><span class=\"line\">  `categoryid` <span class=\"type\">INT</span>(<span class=\"number\">10</span>) UNSIGNED <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT COMMENT <span class=\"string\">&#x27;主题id&#x27;</span>,</span><br><span class=\"line\">  `pid` <span class=\"type\">INT</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;父id&#x27;</span>,</span><br><span class=\"line\">  `categoryName` <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;主题名字&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`categoryid`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> INNODB AUTO_INCREMENT <span class=\"operator\">=</span> <span class=\"number\">9</span> <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 插入数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  `category` (`categoryid`, `pid`, `categoryName`)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;2&#x27;</span>, <span class=\"string\">&#x27;1&#x27;</span>, <span class=\"string\">&#x27;信息技术&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;3&#x27;</span>, <span class=\"string\">&#x27;1&#x27;</span>, <span class=\"string\">&#x27;软件开发&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;4&#x27;</span>, <span class=\"string\">&#x27;3&#x27;</span>, <span class=\"string\">&#x27;数据库&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;5&#x27;</span>, <span class=\"string\">&#x27;1&#x27;</span>, <span class=\"string\">&#x27;美术设计&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;6&#x27;</span>, <span class=\"string\">&#x27;3&#x27;</span>, <span class=\"string\">&#x27;web开发&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;7&#x27;</span>, <span class=\"string\">&#x27;5&#x27;</span>, <span class=\"string\">&#x27;ps技术&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;8&#x27;</span>, <span class=\"string\">&#x27;2&#x27;</span>, <span class=\"string\">&#x27;办公信息&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>select 例子</p>\n<ul>\n<li>把同一张表中 categoryName 这一列 select 出父栏目和子栏目两列数据输出</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  a.categoryName <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;父栏目&#x27;</span>,</span><br><span class=\"line\">  b.categoryName <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;子栏目&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  category <span class=\"keyword\">AS</span> a,</span><br><span class=\"line\">  category <span class=\"keyword\">AS</span> b</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  a.`categoryid` <span class=\"operator\">=</span> b.`pid`;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>输出</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsORR.png\" alt=\"20210315112316\" />\n</li>\n<li>\n<p>其他样例</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 思考题:查询参加了考试的同学信息(学号,学生姓名,科目名,分数)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> sub.subjectno <span class=\"operator\">=</span> r.subjectno;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询学员及所属的年级(学号,学生姓名,年级名)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno <span class=\"keyword\">AS</span> 学 号,</span><br><span class=\"line\">  studentname <span class=\"keyword\">AS</span> 学 生 姓 名,</span><br><span class=\"line\">  gradename <span class=\"keyword\">AS</span> 年 级 名 称</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> grade g <span class=\"keyword\">ON</span> s.`GradeId` <span class=\"operator\">=</span> g.`GradeID`;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询科目及所属的年级(科目名称,年级名称)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  subjectname <span class=\"keyword\">AS</span> 科 目 名 称,</span><br><span class=\"line\">  gradename <span class=\"keyword\">AS</span> 年 级 名 称</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  SUBJECT sub</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> grade g <span class=\"keyword\">ON</span> sub.gradeid <span class=\"operator\">=</span> g.gradeid;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询 数据库结构-1 的所有考试结果(学号 学生姓名 科目名称 成绩)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> r.subjectno <span class=\"operator\">=</span> sub.subjectno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;数据库结构-1&#x27;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"排序\">排序</h3>\n<blockquote>\n<p>ORDER BY 列名 ASC/DESC(升序/降)</p>\n</blockquote>\n<ul>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 按成绩降序排序</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> r.subjectno <span class=\"operator\">=</span> sub.subjectno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;数据库结构-1&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  StudentResult <span class=\"keyword\">DESC</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"分页-2\">分页</h3>\n<blockquote>\n<p>LIMIT n,m</p>\n</blockquote>\n<ul>\n<li>\n<p>含义</p>\n<ul>\n<li>\n<p>从第 n 条开始显示</p>\n</li>\n<li>\n<p>每页显示 m 条数</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>比如需要每页显示 10 条数据,当前要看第一页</p>\n<ul>\n<li>\n<p><code>LIMIT 0,10</code></p>\n</li>\n<li>\n<p>第 n 页数据就是 <code>LIMIT 10(n-1),10</code></p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 每页显示5条数据</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> r.subjectno <span class=\"operator\">=</span> sub.subjectno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;数据库结构-1&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  StudentResult <span class=\"keyword\">DESC</span>,</span><br><span class=\"line\">  studentno</span><br><span class=\"line\">LIMIT</span><br><span class=\"line\">  <span class=\"number\">0</span>, <span class=\"number\">5</span> ;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询 JAVA第一学年 课程成绩前10名并且分数大于80的学生信息(学号,姓名,课程名,分数)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> r.subjectno <span class=\"operator\">=</span> sub.subjectno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;JAVA第一学年&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  StudentResult <span class=\"keyword\">DESC</span></span><br><span class=\"line\">LIMIT</span><br><span class=\"line\">  <span class=\"number\">0</span>, <span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"子查询\">子查询</h3>\n<p>查询语句中 where 中嵌套查询语句</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查询 数据库结构-1 的考试结果(学号,科目编号,成绩),并且成绩降序排列</span></span><br><span class=\"line\"><span class=\"comment\">-- 方法一:使用连接查询</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  r.subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span> r</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> r.`SubjectNo` <span class=\"operator\">=</span> sub.`SubjectNo`</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;数据库结构-1&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  studentresult <span class=\"keyword\">DESC</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 方法二:使用子查询(执行顺序:由里及外)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectno <span class=\"operator\">=</span>(</span><br><span class=\"line\">    <span class=\"keyword\">SELECT</span></span><br><span class=\"line\">      subjectno</span><br><span class=\"line\">    <span class=\"keyword\">FROM</span></span><br><span class=\"line\">      `subject`</span><br><span class=\"line\">    <span class=\"keyword\">WHERE</span></span><br><span class=\"line\">      subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;数据库结构-1&#x27;</span></span><br><span class=\"line\">  )</span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  studentresult <span class=\"keyword\">DESC</span>;</span><br></pre></td></tr></table></figure>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "mysql"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/SQL/1/",
            "url": "https://weidows.github.io/post/Java/SQL/1/",
            "title": "🚀进修MySQL~(壹)",
            "date_published": "2021-03-03T15:58:07.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-08-17 17:27:53\n * @FilePath: \\Blog-private\\source\\_posts\\Java\\SQL\\1.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%8F%82%E8%80%83\">参考</a></li>\n<li><a href=\"#%E7%AE%80%E4%BB%8B\">简介</a></li>\n<li><a href=\"#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE\">安装&amp;配置</a>\n<ul>\n<li><a href=\"#%E5%AE%89%E8%A3%85\">安装</a></li>\n<li><a href=\"#%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81\">设置密码</a></li>\n<li><a href=\"#%E9%85%8D%E7%BD%AE\">配置</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%BF%9E%E6%8E%A5-mysql\">连接 MySQL</a>\n<ul>\n<li><a href=\"#vscode\">VScode</a></li>\n<li><a href=\"#sqlyog\">SQLyog</a></li>\n<li><a href=\"#dbeaver\">DBeaver</a></li>\n<li><a href=\"#%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C\">常用操作</a></li>\n</ul>\n</li>\n<li><a href=\"#ddl-%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89\">DDL-数据定义</a>\n<ul>\n<li><a href=\"#%E5%88%97%E7%B1%BB%E5%9E%8B\">列类型</a>\n<ul>\n<li><a href=\"#%E6%95%B0%E5%80%BC\">数值</a></li>\n<li><a href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2\">字符串</a></li>\n<li><a href=\"#%E6%97%A5%E6%9C%9F\">日期</a></li>\n<li><a href=\"#null-%E5%80%BC\">NULL 值</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7\">字段属性</a>\n<ul>\n<li><a href=\"#%E9%98%BF%E9%87%8C%E8%A7%84%E8%8C%83\">阿里规范</a></li>\n<li><a href=\"#%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83\">命名规范</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%95%B0%E6%8D%AE%E8%A1%A8\">数据表</a>\n<ul>\n<li><a href=\"#%E8%A1%A8%E7%B1%BB%E5%9E%8B\">表类型</a></li>\n<li><a href=\"#%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE\">存放位置</a></li>\n<li><a href=\"#%E7%BC%96%E7%A0%81\">编码</a></li>\n<li><a href=\"#%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E8%A1%A8\">操作数据表</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%96%B0%E5%BB%BA%E8%A1%A8-%E4%BE%8B%E5%AD%90\">新建表-例子</a></li>\n</ul>\n</li>\n<li><a href=\"#dml-%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C\">DML-数据操作</a>\n<ul>\n<li><a href=\"#%E5%A4%96%E9%94%AE\">外键</a></li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0-insert\">添加 INSERT</a></li>\n<li><a href=\"#%E4%BF%AE%E6%94%B9-update\">修改 UPDATE</a></li>\n<li><a href=\"#%E5%88%A0%E9%99%A4-deletetruncate\">删除 DELETE/TRUNCATE</a></li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表-19\">借物表</h2>\n<blockquote>\n<p><a href=\"https://csp1999.blog.csdn.net/article/details/109526825?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-6.control&amp;dist_request_id=&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-6.control\">狂神说 MySQL 学习笔记</a></p>\n</blockquote>\n<h2 id=\"简介-7\">简介</h2>\n<ul>\n<li>\n<p><code>DB</code> 数据库 ( DataBase )</p>\n<ul>\n<li>\n<p>关系型数据库 ( SQL ),比如 MySQL , Oracle , SQL Server , SQLite</p>\n</li>\n<li>\n<p>非关系型数据库 ( NOSQL ),比如 Redis , MongoDB</p>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"https://hellogithub.com/report/db-engines/\">数据库排行榜</a></p>\n</blockquote>\n</li>\n<li>\n<p><code>DBA</code> 数据库管理员（Database Administrator)</p>\n</li>\n<li>\n<p><code>DBMS</code> 数据库管理系统 ( DataBase Management System )</p>\n</li>\n<li>\n<p>操作分类,对应下文的大标题</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmYDR.png\" alt=\"20210305104453\" />\n</li>\n</ul>\n<hr>\n<h2 id=\"安装-配置-2\">安装&amp;配置</h2>\n<h3 id=\"安装-3\">安装</h3>\n<ul>\n<li>\n<p>使用 scoop 安装</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scoop install mysql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>然后注册系统服务</p>\n<ul>\n<li>(这条信息在安装后会提示,需要<code>在管理员模式</code>的命令行下执行)</li>\n</ul>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqld --<span class=\"keyword\">install</span> MySQL --defaults-<span class=\"keyword\">file</span>=<span class=\"string\">&quot;D:\\Game\\Scoop\\apps\\mysql\\current\\my.ini&quot;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>然后<code>重启电脑</code>,MySQL 服务会自己跑起来.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"设置密码-2\">设置密码</h3>\n<ul>\n<li>\n<p>(也可以不设置密码,跳过.)</p>\n</li>\n<li>\n<p>在 <code>MySQL/bin/</code>下打开终端</p>\n</li>\n<li>\n<p>进入 MySQL 管理</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql –u root –<span class=\"selector-tag\">p</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>更新密码</p>\n<figure class=\"highlight n1ql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> mysql.<span class=\"keyword\">user</span> <span class=\"keyword\">set</span> authentication_string=<span class=\"keyword\">password</span>(<span class=\"string\">&#x27;2333&#x27;</span>) <span class=\"keyword\">where</span> <span class=\"keyword\">user</span>=<span class=\"string\">&#x27;root&#x27;</span><span class=\"keyword\">and</span> Host = <span class=\"string\">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>刷新权限</p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flush privileges<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>重启 MySQL 服务</p>\n<figure class=\"highlight dos\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">net</span> stop mysql</span><br><span class=\"line\"><span class=\"built_in\">net</span> <span class=\"built_in\">start</span> mysql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"配置-4\">配置</h3>\n<blockquote>\n<p>找到 <code>MySQL/my.ini</code> ,这是 MySQL 配置文件</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/ray-xujianguo/p/3322455.html\">MySQL 配置文件-my.ini</a></p>\n</blockquote>\n<ul>\n<li>\n<p>我的配置</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#[client]和[mysql]都是客户端,[mysqld]是服务端</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[mysqld]</span></span><br><span class=\"line\"><span class=\"attr\">datadir</span>=D:/Game/Scoop/persist/mysql/data</span><br><span class=\"line\"><span class=\"attr\">character-set-server</span>=utf8</span><br><span class=\"line\"><span class=\"comment\">#port=3306</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[client]</span></span><br><span class=\"line\"><span class=\"attr\">user</span>=root</span><br><span class=\"line\"><span class=\"comment\">#port=3306</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[mysql]</span></span><br><span class=\"line\"><span class=\"attr\">default-character-set</span>=utf8</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n</blockquote>\n<h2 id=\"连接-MySQL\">连接 MySQL</h2>\n<h3 id=\"VScode-3\">VScode</h3>\n<ul>\n<li>\n<p>VScode 连接,需要安装 SQL 扩展(随便选一个)</p>\n</li>\n<li>\n<p>安装插件后只需要填写需要的信息,就可以连接上了.</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVm6hX.png\" alt=\"20210304094732\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"SQLyog\">SQLyog</h3>\n<ul>\n<li>\n<p>跟上面一样</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmVHn.png\" alt=\"20210304233850\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"DBeaver\">DBeaver</h3>\n<ul>\n<li>\n<p>个人在后续学习中发现的数据库管理工具,比我用过的(包括 MYSQL workbench,IDEA,VScode,SQLYog) 都要好用,优点:</p>\n<ul>\n<li>\n<p>社区版免费,没广告 (SQLYog 略带广告)</p>\n</li>\n<li>\n<p>中文界面,很友好,操作手感好</p>\n</li>\n<li>\n<p>有方便的 ER 图工具,这个<code>非常非常非常赞!!!</code></p>\n</li>\n<li>\n<p>…不再赘述,建议用这个,如下图:</p>\n</li>\n</ul>\n</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVt43h.png\" alt=\"20210405144227\" />\n<hr>\n<h3 id=\"常用操作\">常用操作</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> <span class=\"keyword\">user</span> <span class=\"keyword\">set</span> password<span class=\"operator\">=</span>password(<span class=\"string\">&#x27;123456&#x27;</span>)<span class=\"keyword\">where</span> <span class=\"keyword\">user</span><span class=\"operator\">=</span><span class=\"string\">&#x27;root&#x27;</span>; <span class=\"comment\">--修改密码</span></span><br><span class=\"line\">flush privileges; <span class=\"comment\">--刷新数据库权限</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">show</span> databases; <span class=\"comment\">--显示所有数据库</span></span><br><span class=\"line\">use dbname; <span class=\"comment\">--打开某个数据库</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> database [if <span class=\"keyword\">not</span> <span class=\"keyword\">exists</span>] 数据库名; <span class=\"comment\">--创建数据库</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> database [if <span class=\"keyword\">exists</span>] 数据库名; <span class=\"comment\">--删除数据库</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">show</span> tables; <span class=\"comment\">--显示数据库 mysql 中所有的表</span></span><br><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>; <span class=\"comment\">--显示表user 表的信息</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> database name; <span class=\"comment\">--创建数据库</span></span><br><span class=\"line\">use databasename; <span class=\"comment\">--选择数据库</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 单行注释</span></span><br><span class=\"line\"><span class=\"comment\">/* 多行注释 */</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>使用 SQLyog</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmj4A.png\" alt=\"20210305111225\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmhCz.png\" alt=\"20210305111244\" />\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"DDL-数据定义\">DDL-数据定义</h2>\n<h3 id=\"列类型\">列类型</h3>\n<ul>\n<li>标红的为常用的.</li>\n</ul>\n<h4 id=\"数值\">数值</h4>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmu05.png\" alt=\"20210305115939\" />\n<h4 id=\"字符串\">字符串</h4>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmyh0.png\" alt=\"20210305115957\" />\n<h4 id=\"日期\">日期</h4>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsoHr.png\" alt=\"20210305120011\" />\n<h4 id=\"NULL-值\">NULL 值</h4>\n<ul>\n<li>不要用 NULL 进行算术运算 , 结果仍为 NULL</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"字段属性\">字段属性</h3>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsGgc.png\" alt=\"20210305155250\" />\n<ul>\n<li>\n<p>UnSigned</p>\n<ul>\n<li>无符号的</li>\n<li>声明该数据列不允许负数 .</li>\n</ul>\n</li>\n<li>\n<p>ZEROFILL</p>\n<ul>\n<li>0 填充的</li>\n<li>不足位数的用 0 来填充 , 如 int(3),5 则为 005</li>\n</ul>\n</li>\n<li>\n<p>Auto_InCrement</p>\n<ul>\n<li>自动增长的 , 每添加一条数据 , 自动在上一个记录数上加 1(默认)</li>\n<li>通常用于设置主键 , 且为整数类型</li>\n<li>可定义起始值和步长,当前表设置步长(AUTO_INCREMENT=100) : 只影响当前表</li>\n<li>SET @@auto_increment_increment=5 ; 影响所有使用自增的表(全局)</li>\n</ul>\n</li>\n<li>\n<p>NOT NULL</p>\n<ul>\n<li>默认为 NULL , 即没有插入该列的数值</li>\n<li>如果设置为 NOT NULL , 则该列必须有值</li>\n</ul>\n</li>\n<li>\n<p>DEFAULT</p>\n<ul>\n<li>默认的,用于设置默认值</li>\n<li>例如,性别字段,默认为&quot;男&quot; , 否则为 “女” ; 若无指定该列的值 , 则默认值为&quot;男&quot;的值</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"阿里规范\">阿里规范</h4>\n<ul>\n<li>\n<p>每个表必须有的五个字段属性</p>\n<ul>\n<li>id 主键</li>\n<li>version 乐观锁</li>\n<li>is_delete 伪删除</li>\n<li>gmt_create 创建时间</li>\n<li>gmt_update 修改时间</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"命名规范\">命名规范</h4>\n<ul>\n<li>\n<p>为什么使用<code>下划线命名法</code>而非<code>驼峰命名法</code>?</p>\n<p>早期的 Oracle 会把所有字段属性名变为大写: lastName -&gt; LASTNAME</p>\n<p>这样就看不出来了,所以用下划线命名法: last_name -&gt; LAST_NAME</p>\n<p>这个惯性一直延续至今,一些数据库/框架也发展处相应的使用规则,就成了一种规范</p>\n</li>\n</ul>\n<hr>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"数据表\">数据表</h3>\n<h4 id=\"表类型\">表类型</h4>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/EasonJim/p/7741164.html\">MySQL 常用的七种表类型（转）</a></p>\n</blockquote>\n<ul>\n<li>\n<p>有十多种类型了,但常用的就两种:<code>MyISAM</code> 与 <code>InnoDB</code>,对比:</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th>MyISAM</th>\n<th>InnoDB</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">事务处理</td>\n<td>不支持</td>\n<td>支持</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">数据行锁定</td>\n<td>不支持</td>\n<td>支持</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">外键约束</td>\n<td>不支持</td>\n<td>支持</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">全文索引</td>\n<td>支持</td>\n<td>不支持</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">空间占用</td>\n<td>较小</td>\n<td>较大(约两倍)</td>\n</tr>\n</tbody>\n</table>\n<hr>\n</li>\n<li>\n<p>适用场景:</p>\n<ul>\n<li>MyISAM : 节约空间及相应速度</li>\n<li>InnoDB : 安全性 , 事务处理及多用户操作数据表</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"存放位置\">存放位置</h4>\n<blockquote>\n<p>Mysql 安装目录/data/对应表名/</p>\n</blockquote>\n<hr>\n<h4 id=\"编码\">编码</h4>\n<ul>\n<li>\n<p>默认是 Latin1 编码,不支持中文</p>\n<ul>\n<li>可以在 MySQL 配置文件中修改默认编码</li>\n</ul>\n</li>\n<li>\n<p>也可以在创建表时指定编码为 <code>utf8</code></p>\n</li>\n</ul>\n<hr>\n<h4 id=\"操作数据表\">操作数据表</h4>\n<ul>\n<li>\n<p>修改表名</p>\n<ul>\n<li>ALTER TABLE 旧表名 RENAME AS 新表名</li>\n</ul>\n</li>\n<li>\n<p>删除数据表</p>\n<ul>\n<li>DROP TABLE [IF EXISTS] 表名</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>添加字段</p>\n<ul>\n<li>ALTER TABLE 表名 ADD 字段名 列属性[属性值]</li>\n</ul>\n</li>\n<li>\n<p>修改字段</p>\n<ul>\n<li>\n<p>ALTER TABLE 表名 MODIFY 字段名 列类型[属性值]</p>\n</li>\n<li>\n<p>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 列属性[属性值]</p>\n</li>\n</ul>\n</li>\n<li>\n<p>删除字段</p>\n<ul>\n<li>ALTER TABLE 表名 DROP 字段名</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"新建表-例子\">新建表-例子</h3>\n<ul>\n<li>\n<p>板栗</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">NOT</span> <span class=\"keyword\">EXISTS</span> `student`(</span><br><span class=\"line\">  <span class=\"comment\">-- CREATE TABLE [IF NOT EXISTS] `表名`(</span></span><br><span class=\"line\">  id <span class=\"type\">int</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">primary</span> key AUTO_INCREMENT comment <span class=\"string\">&#x27;primary key&#x27;</span>,</span><br><span class=\"line\">  create_time DATETIME COMMENT <span class=\"string\">&#x27;create time&#x27;</span>,</span><br><span class=\"line\">  update_time DATETIME COMMENT <span class=\"string\">&#x27;update time&#x27;</span>,</span><br><span class=\"line\">  <span class=\"comment\">-- `字段名` 列类型 [字段属性] [索引] [注释],</span></span><br><span class=\"line\">  <span class=\"comment\">-- `字段名` 列类型 [字段属性] [索引] [注释],</span></span><br><span class=\"line\">  <span class=\"comment\">-- `字段名` 列类型 [字段属性] [索引] [注释],</span></span><br><span class=\"line\">) <span class=\"keyword\">default</span> charset utf8 comment <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">-- ) [表类型] [字符集] [注释];</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>举例</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  创建一个school数据库-&gt;创建学生表(列,字段)</span></span><br><span class=\"line\"><span class=\"comment\">  学号int 登录密码varchar(20) 姓名,性别varchar(2),出生日期(datatime),家庭住址,email</span></span><br><span class=\"line\"><span class=\"comment\">  创建表之前 , 一定要先选择数据库</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">USE `school`;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">NOT</span> <span class=\"keyword\">EXISTS</span> `stu_data` (</span><br><span class=\"line\">  `id` <span class=\"type\">int</span>(<span class=\"number\">4</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT COMMENT <span class=\"string\">&#x27;学号&#x27;</span>,</span><br><span class=\"line\">  `name` <span class=\"type\">varchar</span>(<span class=\"number\">30</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;匿名&#x27;</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">  `pwd` <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;123456&#x27;</span> COMMENT <span class=\"string\">&#x27;密码&#x27;</span>,</span><br><span class=\"line\">  `sex` <span class=\"type\">varchar</span>(<span class=\"number\">2</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;男&#x27;</span> COMMENT <span class=\"string\">&#x27;性别&#x27;</span>,</span><br><span class=\"line\">  `birthday` datetime <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;生日&#x27;</span>,</span><br><span class=\"line\">  `address` <span class=\"type\">varchar</span>(<span class=\"number\">100</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;地址&#x27;</span>,</span><br><span class=\"line\">  `email` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;邮箱&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> InnoDB <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"DML-数据操作\">DML-数据操作</h2>\n<h3 id=\"外键\">外键</h3>\n<ul>\n<li>\n<p>一个表内的某<code>列</code>引用另外一个表中的一<code>列</code>,被引用的表是<code>主表</code>,引用的表是<code>从表</code>,从表通过建立列的索引来引用另一个表的索引,这个关系叫做外键.</p>\n<ul>\n<li>\n<p>主表中被引用的列必须有索引(比如 PRIMARY,KEY 类型)<br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsXjo.png\" alt=\"20210307123305\" /></p>\n</li>\n<li>\n<p>在外键存在的情况下,主表无法被删除,主从表的关联索引也无法被删除,但可以修改(类型).<br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsx9S.png\" alt=\"20210307124315\" /></p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>建立方法</p>\n<ol>\n<li>创建两张表</li>\n<li>主从表各创建一个索引(PRIMARY 或者 KEY 都可以)</li>\n<li>把从表的索引约束到主表的索引上</li>\n<li>外键建立成功!</li>\n</ol>\n<hr>\n</li>\n<li>\n<p>代码形式</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 年级表 (id,年级名称)</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `grade` (</span><br><span class=\"line\">  `gradeid` <span class=\"type\">INT</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT COMMENT <span class=\"string\">&#x27;年级ID&#x27;</span>,</span><br><span class=\"line\">  `gradename` <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;年级名称&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`gradeid`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> INNODB <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 学生信息表 (学号,姓名,性别,年级,手机,地址,出生日期,邮箱,身份证号)</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `student` (</span><br><span class=\"line\">  `studentid` <span class=\"type\">INT</span>(<span class=\"number\">4</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;学号&#x27;</span>,</span><br><span class=\"line\">  `studentname` <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;匿名&#x27;</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">  `sex` TINYINT(<span class=\"number\">1</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;1&#x27;</span> COMMENT <span class=\"string\">&#x27;性别&#x27;</span>,</span><br><span class=\"line\">  `gradeid` <span class=\"type\">INT</span>(<span class=\"number\">10</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;年级&#x27;</span>,</span><br><span class=\"line\">  `phoneNum` <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;手机&#x27;</span>,</span><br><span class=\"line\">  `address` <span class=\"type\">VARCHAR</span>(<span class=\"number\">255</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;地址&#x27;</span>,</span><br><span class=\"line\">  `borndate` DATETIME <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;生日&#x27;</span>,</span><br><span class=\"line\">  `email` <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;邮箱&#x27;</span>,</span><br><span class=\"line\">  `idCard` <span class=\"type\">VARCHAR</span>(<span class=\"number\">18</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;身份证号&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`studentid`),</span><br><span class=\"line\">  <span class=\"comment\">-- 创 建 外 键 的 方 式 一: 创 建 子 表 同 时 创 建 外 键</span></span><br><span class=\"line\">  KEY `FK_gradeid` (`gradeid`), <span class=\"comment\">-- 创建一个KEY类型的索引</span></span><br><span class=\"line\">  <span class=\"keyword\">CONSTRAINT</span> `FK_gradeid` <span class=\"keyword\">FOREIGN</span> KEY (`gradeid`) <span class=\"keyword\">REFERENCES</span> `grade` (`gradeid`) <span class=\"comment\">-- 把索引约束到主表索引</span></span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> INNODB <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 创建外键方式二 : 创建子表完毕后,修改子表添加外键</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span></span><br><span class=\"line\">  `student`</span><br><span class=\"line\"><span class=\"keyword\">ADD</span></span><br><span class=\"line\">  <span class=\"keyword\">CONSTRAINT</span> `FK_gradeid` <span class=\"keyword\">FOREIGN</span> KEY (`gradeid`) <span class=\"keyword\">REFERENCES</span> `grade` (`gradeid`);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>以上是表的外键,不建议使用数据库级别的外键</p>\n<ul>\n<li>\n<p>以后如需引用多表数据,常用程序实现</p>\n</li>\n<li>\n<p>阿里规范:<code>不能使用外键和级联</code>,在 delete 或 update 时需要考虑外键因素,增加负担</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"添加-INSERT\">添加 INSERT</h3>\n<blockquote>\n<p>语法 : INSERT INTO 表名[(字段 1,字段 2,字段 3,…)] VALUES (‘值 1’,‘值 2’,‘值 3’)</p>\n</blockquote>\n<ul>\n<li>\n<p>字段与值位置对应</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  grade(gradename, gradeid)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span></span><br><span class=\"line\">  (<span class=\"string\">&#x27;大一&#x27;</span>, <span class=\"string\">&#x27;2&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>省略字段的话,值得顺序必须与数据表中的字段顺序一致</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  grade</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span></span><br><span class=\"line\">  (<span class=\"string\">&#x27;1&#x27;</span>, <span class=\"string\">&#x27;大二&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>一次插入多条数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  grade(gradename)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span></span><br><span class=\"line\">  (<span class=\"string\">&#x27;大三&#x27;</span>),(<span class=\"string\">&#x27;大四&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"修改-UPDATE\">修改 UPDATE</h3>\n<blockquote>\n<p>UPDATE <code>表名</code> SET <code>列名 1</code>=value <code>列名 2</code>=value [WHERE 条件];</p>\n</blockquote>\n<ul>\n<li>\n<p>value 为修改后的数据 , 可以为变量 , 具体值 , 表达式或者嵌套的 SELECT 结果</p>\n</li>\n<li>\n<p>不指定 where 的话,会修改表内所有数据</p>\n</li>\n<li>\n<p>注意 value 用单引号’引起来,不是飘`</p>\n</li>\n<li>\n<p>例子(随机生成 20 条数据后多条件筛选)</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">UPDATE</span></span><br><span class=\"line\">  `grade`</span><br><span class=\"line\"><span class=\"keyword\">SET</span></span><br><span class=\"line\">  `gradename` <span class=\"operator\">=</span> <span class=\"string\">&#x27;大一&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  gradeid <span class=\"operator\">&gt;</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">AND</span> gradeid <span class=\"operator\">&lt;</span> <span class=\"number\">10</span></span><br><span class=\"line\">  <span class=\"keyword\">OR</span> gradeid <span class=\"operator\">=</span> <span class=\"number\">15</span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>结果(json)</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">[</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;lonrd&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;2&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;3&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;4&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;5&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;6&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;7&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;9&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;10&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fmtdq&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;11&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;tvyoh&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;12&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ovhvu&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;13&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hipnh&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;14&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;kjdxr&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;15&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;16&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;xvlbp&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;17&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bgphq&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;18&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;jcpmc&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;19&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;gjuof&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;20&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;owxri&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"删除-DELETE-TRUNCATE\">删除 DELETE/TRUNCATE</h3>\n<blockquote>\n<p>DELETE FROM 表名 [WHERE condition];</p>\n</blockquote>\n<ul>\n<li>\n<p>如不指定 where,会删除表中所有数据</p>\n</li>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span></span><br><span class=\"line\">  grade</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  gradeid <span class=\"operator\">=</span> <span class=\"number\">5</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<blockquote>\n<p>TRUNCATE [TABLE] 表名;</p>\n</blockquote>\n<ul>\n<li>\n<p>清空表,表的结构和索引不变</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">TRUNCATE</span> `student`</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>二者都能删除数据,不影响表结构</p>\n<ul>\n<li>DELETE 删除数据后不影响<code>自动增量</code>,会记录日志.</li>\n<li>TRUNCATE 清空表之后会把<code>自动增量</code>归零,不会记录日志.</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>使用 DELETE 清空不同引擎的数据库表数据.重启数据库服务后</p>\n<ul>\n<li>\n<p>InnoDB : 自增列从初始值重新开始 (因为是存储在内存中,断电即失)</p>\n</li>\n<li>\n<p>MyISAM : 自增列依然从上一个自增数据基础上开始 (存在文件中,不会丢失)</p>\n</li>\n</ul>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "mysql"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/1/",
            "url": "https://weidows.github.io/post/Java/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/1/",
            "title": "🎶Java网络编程",
            "date_published": "2021-02-28T09:06:28.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-22 10:47:37\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\网络编程\\1.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%8F%82%E8%80%83\">参考</a></li>\n<li><a href=\"#%E7%AE%80%E4%BB%8B\">简介</a></li>\n<li><a href=\"#ip\">IP</a></li>\n<li><a href=\"#%E7%AB%AF%E5%8F%A3\">端口</a></li>\n<li><a href=\"#%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE\">通信协议</a>\n<ul>\n<li><a href=\"#tcp\">TCP</a></li>\n<li><a href=\"#udp\">UDP</a></li>\n</ul>\n</li>\n<li><a href=\"#tcp-%E8%BF%9E%E6%8E%A5\">TCP 连接</a>\n<ul>\n<li><a href=\"#server-%E7%AB%AF\">Server 端</a></li>\n<li><a href=\"#client-%E7%AB%AF\">Client 端</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93\">文件传输</a>\n<ul>\n<li><a href=\"#server\">Server</a></li>\n<li><a href=\"#client\">Client</a></li>\n</ul>\n</li>\n<li><a href=\"#udp-%E8%BF%9E%E6%8E%A5\">UDP 连接</a>\n<ul>\n<li><a href=\"#server-1\">Server</a></li>\n<li><a href=\"#client-1\">Client</a></li>\n</ul>\n</li>\n<li><a href=\"#udp-%E5%BE%AA%E7%8E%AF%E5%8F%91%E9%80%81\">UDP 循环发送</a>\n<ul>\n<li><a href=\"#server-2\">Server</a></li>\n<li><a href=\"#client-2\">Client</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%8F%8C%E5%90%91%E8%81%8A%E5%A4%A9\">双向聊天</a>\n<ul>\n<li><a href=\"#%E5%8F%91%E9%80%81%E7%BA%BF%E7%A8%8B\">发送线程</a></li>\n<li><a href=\"#%E6%8E%A5%E6%94%B6%E7%BA%BF%E7%A8%8B\">接收线程</a></li>\n<li><a href=\"#%E8%80%81%E5%B8%88\">老师</a></li>\n<li><a href=\"#%E5%AD%A6%E7%94%9F\">学生</a></li>\n</ul>\n</li>\n<li><a href=\"#url\">URL</a></li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表-21\">借物表</h2>\n<blockquote>\n<p>在此文章记录了: <a href=\"../../../others/LearnWay#%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B\">😍Weidows-の成长路线#网络编程</a></p>\n</blockquote>\n<hr>\n<h2 id=\"简介-8\">简介</h2>\n<ul>\n<li>\n<p>架构区分</p>\n<ul>\n<li>网页编程: B/S</li>\n<li>网络编程: C/S</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>通信要素(TCP/IP)</p>\n<ul>\n<li>IP</li>\n<li>端口</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>协议参考</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmdqS.png\" alt=\"20210228232437\" />\n<blockquote>\n<p>更为详细的: <a href=\"http://www.colasoft.com.cn/download/protocols_map.php\">科来网络通讯协议图 2020 版</a></p>\n</blockquote>\n<ul>\n<li>此处针对传输层 TCP/UDP 学习.</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"IP\">IP</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.net.InetAddress;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.UnknownHostException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Ip</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// write your code here</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 获取本机内网IP地址</span></span><br><span class=\"line\">      <span class=\"type\">InetAddress</span> <span class=\"variable\">inetAddress1</span> <span class=\"operator\">=</span> InetAddress.getByName(<span class=\"string\">&quot;127.0.0.1&quot;</span>);</span><br><span class=\"line\">      System.out.println(inetAddress1);</span><br><span class=\"line\">      <span class=\"type\">InetAddress</span> <span class=\"variable\">inetAddress2</span> <span class=\"operator\">=</span> InetAddress.getByName(<span class=\"string\">&quot;localhost&quot;</span>);</span><br><span class=\"line\">      System.out.println(inetAddress2);</span><br><span class=\"line\">      <span class=\"type\">InetAddress</span> <span class=\"variable\">inetAddress3</span> <span class=\"operator\">=</span> InetAddress.getLocalHost();</span><br><span class=\"line\">      System.out.println(inetAddress3);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//查询网站ip地址</span></span><br><span class=\"line\">      <span class=\"type\">InetAddress</span> <span class=\"variable\">inetAddress4</span> <span class=\"operator\">=</span> InetAddress.getByName(<span class=\"string\">&quot;www.bilibili.com&quot;</span>);</span><br><span class=\"line\">      System.out.println(inetAddress4);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//常用方法</span></span><br><span class=\"line\">      System.out.println(inetAddress4.getAddress());</span><br><span class=\"line\">      System.out.println(inetAddress4.getCanonicalHostName()); <span class=\"comment\">//规范的名字</span></span><br><span class=\"line\">      System.out.println(inetAddress4.getHostAddress()); <span class=\"comment\">//ip</span></span><br><span class=\"line\">      System.out.println(inetAddress4.getHostName()); <span class=\"comment\">//域名，或者自己电脑的名字</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (UnknownHostException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    /127.0.0.1</span></span><br><span class=\"line\"><span class=\"comment\">    localhost/127.0.0.1</span></span><br><span class=\"line\"><span class=\"comment\">    DESKTOP-CTDDD3K/192.168.114.1</span></span><br><span class=\"line\"><span class=\"comment\">    www.bilibili.com/121.17.123.130</span></span><br><span class=\"line\"><span class=\"comment\">    [B@2a3046da</span></span><br><span class=\"line\"><span class=\"comment\">    121.17.123.130</span></span><br><span class=\"line\"><span class=\"comment\">    121.17.123.130</span></span><br><span class=\"line\"><span class=\"comment\">    www.bilibili.com</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"端口\">端口</h2>\n<ul>\n<li>\n<p>TCP 与 UDP 各有 65535 个端口</p>\n<ul>\n<li>\n<p>两个协议间不冲突</p>\n</li>\n<li>\n<p>但是一个协议下的一个端口只能同时被一个软件占用.</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>端口分类</p>\n<ul>\n<li>\n<p>公有端口 0 ~ 1023</p>\n<ul>\n<li>\n<p>HTTP：80</p>\n</li>\n<li>\n<p>HTTPS：443</p>\n</li>\n<li>\n<p>FTP：21</p>\n</li>\n<li>\n<p>Telent：23</p>\n</li>\n</ul>\n</li>\n<li>\n<p>程序注册端口：1024 ~ 49151，分配给用户或者程序</p>\n<ul>\n<li>\n<p>Tomcat：8080</p>\n</li>\n<li>\n<p>MySQL：3306</p>\n</li>\n<li>\n<p>Oracle：1512</p>\n</li>\n</ul>\n</li>\n<li>\n<p>动态、私有：49152 ~ 65535</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>常用 shell 指令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">netstat -ano #查看所有的端口</span><br><span class=\"line\">netstat -ano | finstr &quot;5900&quot; #查看指定的端口</span><br><span class=\"line\">tasklist | findstr &quot;8696&quot; #查看指定端口的进程</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>InetSocketAddress</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.net.InetSocketAddress;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Port</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">InetSocketAddress</span> <span class=\"variable\">socketAddress</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">InetSocketAddress</span>(<span class=\"string\">&quot;localhost&quot;</span>, <span class=\"number\">8080</span>);</span><br><span class=\"line\">    System.out.println(socketAddress);</span><br><span class=\"line\"></span><br><span class=\"line\">    System.out.println(socketAddress.getAddress());</span><br><span class=\"line\">    System.out.println(socketAddress.getHostName());</span><br><span class=\"line\">    System.out.println(socketAddress.getPort());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    localhost/127.0.0.1:8080</span></span><br><span class=\"line\"><span class=\"comment\">    localhost/127.0.0.1</span></span><br><span class=\"line\"><span class=\"comment\">    localhost</span></span><br><span class=\"line\"><span class=\"comment\">    8080</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"通信协议\">通信协议</h2>\n<ul>\n<li>\n<p>通过约定协议来管控通信的速率,码率等问题</p>\n</li>\n<li>\n<p>并通过协议分层来简化复杂度</p>\n<hr>\n</li>\n<li>\n<p>几种协议</p>\n<ul>\n<li>\n<p>TCP:用户传输协议</p>\n</li>\n<li>\n<p>UDP:用户数据报协议</p>\n</li>\n<li>\n<p>IP:网络互连协议</p>\n</li>\n<li>\n<p>TCP/IP 协议簇:是一组协议 (四层概念模型)</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"TCP\">TCP</h3>\n<ul>\n<li>\n<p>TCP 是客户端&lt;–&gt;服务端双向的信息沟通,可长时间稳定连接</p>\n</li>\n<li>\n<p>稳定连接最小验证<code>三次握手,四次挥手</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">最少需要三次，保证稳定连接！</span><br><span class=\"line\"><span class=\"selector-tag\">A</span>：你瞅啥？</span><br><span class=\"line\"><span class=\"selector-tag\">B</span>：瞅你咋地？</span><br><span class=\"line\"><span class=\"selector-tag\">A</span>：干一场！</span><br><span class=\"line\"></span><br><span class=\"line\">至少四次,双方才能都断开连接</span><br><span class=\"line\"><span class=\"selector-tag\">A</span>：我要走了</span><br><span class=\"line\"><span class=\"selector-tag\">B</span>：你真的要走了吗？</span><br><span class=\"line\"><span class=\"selector-tag\">B</span>：你真的真的要走了吗？</span><br><span class=\"line\"><span class=\"selector-tag\">A</span>：我真的要走了</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"UDP\">UDP</h3>\n<ul>\n<li>\n<p>单向的信息传递</p>\n</li>\n<li>\n<p>没有客户端与服务端界限</p>\n</li>\n<li>\n<p>无论有没有接收方,无论接收方是否接收,发送方只管发送</p>\n</li>\n<li>\n<p>常见的<code>DDOS攻击</code>,让大量垃圾信息污染服务器接收端口,使其瘫痪.</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"TCP-连接\">TCP 连接</h2>\n<ul>\n<li>Server 服务端与 Client 客户端通过 TCP 方式创建数据连接.</li>\n</ul>\n<h3 id=\"Server-端\">Server 端</h3>\n<ul>\n<li>\n<p>建立服务的端口 ServerScoket</p>\n</li>\n<li>\n<p>等待用户的连接 accept</p>\n</li>\n<li>\n<p>接收用户的消息</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.ByteArrayOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.ServerSocket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.Socket;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Server</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">    <span class=\"comment\">//1、我得有一个地址</span></span><br><span class=\"line\">    <span class=\"type\">ServerSocket</span> <span class=\"variable\">serverSocket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ServerSocket</span>(<span class=\"number\">9999</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123; <span class=\"comment\">// 连续接收数据</span></span><br><span class=\"line\">      <span class=\"comment\">//2、等待客户端连接过来</span></span><br><span class=\"line\">      <span class=\"type\">Socket</span> <span class=\"variable\">accept</span> <span class=\"operator\">=</span> serverSocket.accept();</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//3、读取客户端的消息</span></span><br><span class=\"line\">      <span class=\"type\">InputStream</span> <span class=\"variable\">inputStream</span> <span class=\"operator\">=</span> accept.getInputStream();</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">       * 通常IO方式,如果是长数据传输,会导致出错</span></span><br><span class=\"line\"><span class=\"comment\">       *</span></span><br><span class=\"line\"><span class=\"comment\">        byte[] buffer = new byte[1024];</span></span><br><span class=\"line\"><span class=\"comment\">        int length;</span></span><br><span class=\"line\"><span class=\"comment\">        while ((length = inputStream.read(buffer)) != -1) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        String s = new String(buffer, 0, length);</span></span><br><span class=\"line\"><span class=\"comment\">        System.out.println(s);</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;</span></span><br><span class=\"line\"><span class=\"comment\">       */</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//4. 管道流接收数据</span></span><br><span class=\"line\">      <span class=\"type\">ByteArrayOutputStream</span> <span class=\"variable\">byteArrayOutputStream</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ByteArrayOutputStream</span>();</span><br><span class=\"line\">      <span class=\"type\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">      <span class=\"type\">int</span> length;</span><br><span class=\"line\">      <span class=\"keyword\">while</span> ((length = inputStream.read(buffer)) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        byteArrayOutputStream.write(buffer, <span class=\"number\">0</span>, length);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (byteArrayOutputStream.toString().matches(<span class=\"string\">&quot;quit&quot;</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        System.out.println(byteArrayOutputStream.toString());</span><br><span class=\"line\">        byteArrayOutputStream.close();</span><br><span class=\"line\">        inputStream.close();</span><br><span class=\"line\">        accept.close();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5. 最后关闭</span></span><br><span class=\"line\">    serverSocket.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Client-端\">Client 端</h3>\n<ul>\n<li>\n<p>连接服务器 Socket</p>\n</li>\n<li>\n<p>发送消息</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.InetAddress;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.Socket;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Client</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//1、要知道服务器的地址，端口号</span></span><br><span class=\"line\">    <span class=\"type\">InetAddress</span> <span class=\"variable\">address</span> <span class=\"operator\">=</span> InetAddress.getLocalHost();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">port</span> <span class=\"operator\">=</span> <span class=\"number\">9999</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2、创建一个socket连接</span></span><br><span class=\"line\">    <span class=\"type\">Socket</span> <span class=\"variable\">socket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Socket</span>(address, port);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//3、发送消息 IO流</span></span><br><span class=\"line\">    <span class=\"type\">OutputStream</span> <span class=\"variable\">outputStream</span> <span class=\"operator\">=</span> socket.getOutputStream();</span><br><span class=\"line\">    outputStream.write(<span class=\"string\">&quot;Weidows connecting here.&quot;</span>.getBytes());</span><br><span class=\"line\">    <span class=\"comment\">// outputStream.write(&quot;quit&quot;.getBytes());</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4.关闭通道</span></span><br><span class=\"line\">    outputStream.close();</span><br><span class=\"line\">    socket.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"文件传输-2\">文件传输</h2>\n<h3 id=\"Server\">Server</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.ServerSocket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.Socket;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Server</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//1、创建服务</span></span><br><span class=\"line\">    <span class=\"type\">ServerSocket</span> <span class=\"variable\">serverSocket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ServerSocket</span>(<span class=\"number\">9999</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2、监听客户端的连接</span></span><br><span class=\"line\">    <span class=\"type\">Socket</span> <span class=\"variable\">socket</span> <span class=\"operator\">=</span> serverSocket.accept(); <span class=\"comment\">//阻塞式监听，会一直等待客户端连接</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Server开始监听.&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//3、获取输入流</span></span><br><span class=\"line\">    <span class=\"type\">InputStream</span> <span class=\"variable\">is</span> <span class=\"operator\">=</span> socket.getInputStream();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4、文件输出</span></span><br><span class=\"line\">    <span class=\"type\">FileOutputStream</span> <span class=\"variable\">fos</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FileOutputStream</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(<span class=\"string\">&quot;Java/src/main/java/twenty_one/net/file_upload/receive.png&quot;</span>));</span><br><span class=\"line\">    <span class=\"type\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">    <span class=\"type\">int</span> len;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> ((len = is.read(buffer)) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      fos.write(buffer, <span class=\"number\">0</span>, len);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Server接收完毕.&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//通知客户端我接收完毕了</span></span><br><span class=\"line\">    <span class=\"type\">OutputStream</span> <span class=\"variable\">os</span> <span class=\"operator\">=</span> socket.getOutputStream();</span><br><span class=\"line\">    os.write(<span class=\"string\">&quot;Server通知:接受完毕，Client可以断开了&quot;</span>.getBytes());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5、关闭资源</span></span><br><span class=\"line\">    fos.close();</span><br><span class=\"line\">    is.close();</span><br><span class=\"line\">    socket.close();</span><br><span class=\"line\">    serverSocket.close();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Server已发送验证并断开连接.&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    Server开始监听.</span></span><br><span class=\"line\"><span class=\"comment\">    Server接收完毕.</span></span><br><span class=\"line\"><span class=\"comment\">    Server已发送验证并断开连接.</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Client\">Client</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.ByteArrayOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.InetAddress;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.Socket;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Client</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//1、创建一个Socket连接</span></span><br><span class=\"line\">    <span class=\"type\">Socket</span> <span class=\"variable\">socket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Socket</span>(InetAddress.getByName(<span class=\"string\">&quot;localhost&quot;</span>), <span class=\"number\">9999</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2、创建一个输出流</span></span><br><span class=\"line\">    <span class=\"type\">OutputStream</span> <span class=\"variable\">os</span> <span class=\"operator\">=</span> socket.getOutputStream();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//3、读取文件</span></span><br><span class=\"line\">    <span class=\"type\">FileInputStream</span> <span class=\"variable\">fis</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FileInputStream</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(<span class=\"string\">&quot;Java/src/main/java/twenty_one/net/file_upload/upload.png&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4、写出文件</span></span><br><span class=\"line\">    <span class=\"type\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">    <span class=\"type\">int</span> len;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> ((len = fis.read(buffer)) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      os.write(buffer, <span class=\"number\">0</span>, len);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Client传输完毕.&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//通知服务器，我已经结束了</span></span><br><span class=\"line\">    socket.shutdownOutput(); <span class=\"comment\">//我已经传输完了！</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//确定服务器接收完毕，才能够断开连接</span></span><br><span class=\"line\">    <span class=\"type\">InputStream</span> <span class=\"variable\">inputStream</span> <span class=\"operator\">=</span> socket.getInputStream();</span><br><span class=\"line\">    <span class=\"comment\">//String byte[]</span></span><br><span class=\"line\">    <span class=\"type\">ByteArrayOutputStream</span> <span class=\"variable\">baos</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ByteArrayOutputStream</span>();</span><br><span class=\"line\">    <span class=\"type\">byte</span>[] buffer2 = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">    <span class=\"type\">int</span> len2;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> ((len2 = inputStream.read(buffer2)) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      baos.write(buffer2, <span class=\"number\">0</span>, len2);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.out.println(baos.toString());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5、关闭资源</span></span><br><span class=\"line\">    baos.close();</span><br><span class=\"line\">    inputStream.close();</span><br><span class=\"line\">    fis.close();</span><br><span class=\"line\">    os.close();</span><br><span class=\"line\">    socket.close();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Client已接收到验证并断开连接&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    Client传输完毕.</span></span><br><span class=\"line\"><span class=\"comment\">    Server通知:接受完毕，Client可以断开了</span></span><br><span class=\"line\"><span class=\"comment\">    Client已接收到验证并断开连接</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"UDP-连接\">UDP 连接</h2>\n<h3 id=\"Server-2\">Server</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramPacket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramSocket;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Server</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.开放端口</span></span><br><span class=\"line\">    <span class=\"type\">DatagramSocket</span> <span class=\"variable\">datagramSocket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramSocket</span>(<span class=\"number\">9999</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;等待数据传入中...&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2.接收数据</span></span><br><span class=\"line\">    <span class=\"type\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">    <span class=\"type\">DatagramPacket</span> <span class=\"variable\">datagramPacket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramPacket</span>(buffer, buffer.length);</span><br><span class=\"line\">    datagramSocket.receive(datagramPacket); <span class=\"comment\">//阻塞接收</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3.输出</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Server接收到数据:&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(datagramPacket.getData()));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 4.关闭</span></span><br><span class=\"line\">    datagramSocket.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Client-2\">Client</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramPacket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramSocket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.InetAddress;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Client</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.创建数据包</span></span><br><span class=\"line\">    <span class=\"type\">InetAddress</span> <span class=\"variable\">localHost</span> <span class=\"operator\">=</span> InetAddress.getLocalHost();</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">port</span> <span class=\"operator\">=</span> <span class=\"number\">9999</span>;</span><br><span class=\"line\">    <span class=\"type\">byte</span>[] data = <span class=\"string\">&quot;这是Client发送的数据.&quot;</span>.getBytes();</span><br><span class=\"line\">    <span class=\"type\">DatagramPacket</span> <span class=\"variable\">datagramPacket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramPacket</span>(data, data.length, localHost, port);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2.创建Socket</span></span><br><span class=\"line\">    <span class=\"type\">DatagramSocket</span> <span class=\"variable\">datagramSocket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramSocket</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3.发送数据</span></span><br><span class=\"line\">    datagramSocket.send(datagramPacket);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;传输成功.&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 4.关闭连接</span></span><br><span class=\"line\">    datagramSocket.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"UDP-循环发送\">UDP 循环发送</h2>\n<h3 id=\"Server-3\">Server</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramPacket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramSocket;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Server2</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.准备连接</span></span><br><span class=\"line\">    <span class=\"type\">DatagramSocket</span> <span class=\"variable\">datagramSocket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramSocket</span>(<span class=\"number\">9999</span>);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">      <span class=\"type\">byte</span>[] bytes = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">      <span class=\"type\">DatagramPacket</span> <span class=\"variable\">datagramPacket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramPacket</span>(bytes, bytes.length);</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Server准备接收数据中.&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 2.接收数据</span></span><br><span class=\"line\">      datagramSocket.receive(datagramPacket);</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">string</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(datagramPacket.getData());</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;接收到数据:\\t&quot;</span> + datagramPacket.getAddress() + <span class=\"string\">&quot;:&quot;</span> + datagramPacket.getPort() + <span class=\"string\">&quot;\\t&quot;</span> + string);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 这里的string=&quot;quitxxxxxxxxxxxxxx&quot;,总长为上面的1024,用.equals()无法判断.</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (string.contains(<span class=\"string\">&quot;quit&quot;</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3.断开连接</span></span><br><span class=\"line\">    datagramSocket.close();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Server已关闭连接.&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Client-3\">Client</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStreamReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramPacket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramSocket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.InetSocketAddress;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Client2</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 0.准备连接</span></span><br><span class=\"line\">    <span class=\"type\">BufferedReader</span> <span class=\"variable\">bufferedReader</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BufferedReader</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">InputStreamReader</span>(System.in));</span><br><span class=\"line\">    <span class=\"type\">DatagramSocket</span> <span class=\"variable\">datagramSocket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramSocket</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 1.准备数据</span></span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Client准备读取Terminal数据:&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">readLine</span> <span class=\"operator\">=</span> bufferedReader.readLine();</span><br><span class=\"line\">      <span class=\"type\">byte</span>[] bytes = readLine.getBytes();</span><br><span class=\"line\">      <span class=\"type\">DatagramPacket</span> <span class=\"variable\">datagramPacket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramPacket</span>(bytes, bytes.length, <span class=\"keyword\">new</span> <span class=\"title class_\">InetSocketAddress</span>(<span class=\"string\">&quot;localhost&quot;</span>, <span class=\"number\">9999</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 2.发送数据</span></span><br><span class=\"line\">      datagramSocket.send(datagramPacket);</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Client已经发送数据.&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (readLine.equals(<span class=\"string\">&quot;quit&quot;</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3.断开连接</span></span><br><span class=\"line\">    datagramSocket.close();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Client已关闭连接.&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"双向聊天\">双向聊天</h2>\n<ul>\n<li>\n<p>实现<code>发送</code>,<code>接收</code>两个线程类</p>\n</li>\n<li>\n<p>老师和学生各开上面两个线程,实现<code>发,收</code>功能.</p>\n</li>\n</ul>\n<h3 id=\"发送线程\">发送线程</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStreamReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramPacket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramSocket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.InetSocketAddress;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.SocketException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TalkSend</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\">  <span class=\"type\">BufferedReader</span> <span class=\"variable\">bufferedReader</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"type\">DatagramSocket</span> <span class=\"variable\">datagramSocket</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> String targetIP;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> targetPort;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">TalkSend</span><span class=\"params\">(String targetIP, <span class=\"type\">int</span> targetPort)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.targetIP = targetIP;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.targetPort = targetPort;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 0.准备连接</span></span><br><span class=\"line\">      bufferedReader = <span class=\"keyword\">new</span> <span class=\"title class_\">BufferedReader</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">InputStreamReader</span>(System.in));</span><br><span class=\"line\">      datagramSocket = <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramSocket</span>();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (SocketException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 1.准备数据</span></span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Client准备读取Terminal数据:&quot;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">readLine</span> <span class=\"operator\">=</span> bufferedReader.readLine();</span><br><span class=\"line\">        <span class=\"type\">byte</span>[] bytes = readLine.getBytes();</span><br><span class=\"line\">        <span class=\"type\">DatagramPacket</span> <span class=\"variable\">datagramPacket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramPacket</span>(bytes, bytes.length,</span><br><span class=\"line\">            <span class=\"keyword\">new</span> <span class=\"title class_\">InetSocketAddress</span>(targetIP, targetPort));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 2.发送数据</span></span><br><span class=\"line\">        datagramSocket.send(datagramPacket);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Client已经发送数据.&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (readLine.equals(<span class=\"string\">&quot;quit&quot;</span>)) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3.断开连接</span></span><br><span class=\"line\">    datagramSocket.close();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Client已关闭连接.&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"接收线程\">接收线程</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramPacket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.DatagramSocket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.SocketException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TalkReceive</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\">  <span class=\"type\">DatagramSocket</span> <span class=\"variable\">datagramSocket</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> localPort;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">TalkReceive</span><span class=\"params\">(<span class=\"type\">int</span> localPort)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.localPort = localPort;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      datagramSocket = <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramSocket</span>(<span class=\"built_in\">this</span>.localPort);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (SocketException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.准备连接</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">byte</span>[] bytes = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">        <span class=\"type\">DatagramPacket</span> <span class=\"variable\">datagramPacket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DatagramPacket</span>(bytes, bytes.length);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Server准备接收数据中.&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 2.接收数据</span></span><br><span class=\"line\">        datagramSocket.receive(datagramPacket);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">string</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(datagramPacket.getData());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;接收到数据:\\t&quot;</span> + datagramPacket.getAddress() + <span class=\"string\">&quot;:&quot;</span> + datagramPacket.getPort() + <span class=\"string\">&quot;\\t&quot;</span> + string);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 这里的string=&quot;quitxxxxxxxxxxxxxx&quot;,总长为上面的1024,用.equals()无法判断.</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (string.contains(<span class=\"string\">&quot;quit&quot;</span>)) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3.断开连接</span></span><br><span class=\"line\">    datagramSocket.close();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Server已关闭连接.&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"老师\">老师</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Teacher</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 老师</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">TalkReceive</span>(<span class=\"number\">7777</span>)).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">TalkSend</span>(<span class=\"string\">&quot;localhost&quot;</span>, <span class=\"number\">8888</span>)).start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    Server准备接收数据中.</span></span><br><span class=\"line\"><span class=\"comment\">    Client准备读取Terminal数据:</span></span><br><span class=\"line\"><span class=\"comment\">    接收到数据:     /127.0.0.1:50277        15465</span></span><br><span class=\"line\"><span class=\"comment\">    Server准备接收数据中.</span></span><br><span class=\"line\"><span class=\"comment\">    123456</span></span><br><span class=\"line\"><span class=\"comment\">    Client已经发送数据.</span></span><br><span class=\"line\"><span class=\"comment\">    Client准备读取Terminal数据:</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"学生\">学生</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Student</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 学生</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">TalkReceive</span>(<span class=\"number\">8888</span>)).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">TalkSend</span>(<span class=\"string\">&quot;localhost&quot;</span>, <span class=\"number\">7777</span>)).start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    Server准备接收数据中.</span></span><br><span class=\"line\"><span class=\"comment\">    Client准备读取Terminal数据:</span></span><br><span class=\"line\"><span class=\"comment\">    15465</span></span><br><span class=\"line\"><span class=\"comment\">    Client已经发送数据.</span></span><br><span class=\"line\"><span class=\"comment\">    Client准备读取Terminal数据:</span></span><br><span class=\"line\"><span class=\"comment\">    接收到数据:     /127.0.0.1:50279        123456</span></span><br><span class=\"line\"><span class=\"comment\">    Server准备接收数据中.</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"URL\">URL</h2>\n<ul>\n<li>文件下载</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">GetURL</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.设置URL和文件路径</span></span><br><span class=\"line\">    <span class=\"type\">URL</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">URL</span>(<span class=\"string\">&quot;https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">path</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Java/src/main/java/twenty_one/net/&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">fileName</span> <span class=\"operator\">=</span> url.getPath().substring(url.getPath().lastIndexOf(<span class=\"string\">&#x27;/&#x27;</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ! URL类用法</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">      System.out.println(url.getProtocol());</span></span><br><span class=\"line\"><span class=\"comment\">      System.out.println(url.getHost());</span></span><br><span class=\"line\"><span class=\"comment\">      System.out.println(url.getPort());</span></span><br><span class=\"line\"><span class=\"comment\">      System.out.println(url.getPath());</span></span><br><span class=\"line\"><span class=\"comment\">      System.out.println(url.getFile());</span></span><br><span class=\"line\"><span class=\"comment\">      System.out.println(url.getQuery());</span></span><br><span class=\"line\"><span class=\"comment\">    *</span></span><br><span class=\"line\"><span class=\"comment\">      https</span></span><br><span class=\"line\"><span class=\"comment\">      cdn.jsdelivr.net</span></span><br><span class=\"line\"><span class=\"comment\">      /gh/Weidows/Images@master/img/divider.png</span></span><br><span class=\"line\"><span class=\"comment\">      /gh/Weidows/Images@master/img/divider.png</span></span><br><span class=\"line\"><span class=\"comment\">      null</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2.输入输出流</span></span><br><span class=\"line\">    <span class=\"type\">InputStream</span> <span class=\"variable\">openStream</span> <span class=\"operator\">=</span> url.openStream();</span><br><span class=\"line\">    <span class=\"type\">FileOutputStream</span> <span class=\"variable\">fileOutputStream</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FileOutputStream</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(path + fileName));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3.传输数据</span></span><br><span class=\"line\">    <span class=\"type\">byte</span>[] bytes = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">    <span class=\"type\">int</span> length;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> ((length = openStream.read(bytes)) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      fileOutputStream.write(bytes, <span class=\"number\">0</span>, length);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 4.关闭连接</span></span><br><span class=\"line\">    fileOutputStream.close();</span><br><span class=\"line\">    openStream.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%8F%8D%E5%B0%84/2/",
            "url": "https://weidows.github.io/post/Java/%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%8F%8D%E5%B0%84/2/",
            "title": "🔥Java注解与反射复习~(贰)",
            "date_published": "2021-02-27T09:31:03.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2022-02-27 16:27:36\n * @FilePath: \\Blog-private\\source\\_posts\\Java\\注解与反射\\2.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E6%93%8D%E4%BD%9C-class-%E5%AF%B9%E8%B1%A1\">操作 Class 对象</a></li>\n<li><a href=\"#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90\">性能分析</a></li>\n<li><a href=\"#%E5%8F%8D%E5%B0%84%E6%93%8D%E4%BD%9C%E6%B3%9B%E5%9E%8B\">反射操作泛型</a></li>\n<li><a href=\"#%E5%8F%8D%E5%B0%84%E6%93%8D%E4%BD%9C%E6%B3%A8%E8%A7%A3\">反射操作注解</a></li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"操作-Class-对象\">操作 Class 对象</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.lang.reflect.Constructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.reflect.Field;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.reflect.Method;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo6</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//获得class对象</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c1</span> <span class=\"operator\">=</span> User.class;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//创建一个对象</span></span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> (User) c1.newInstance();<span class=\"comment\">//本质是调用了类的无参构造器</span></span><br><span class=\"line\">    System.out.println(user);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//通过构造器创建对象</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;============================&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">Constructor</span> <span class=\"variable\">constructor</span> <span class=\"operator\">=</span> c1.getDeclaredConstructor(String.class, <span class=\"type\">int</span>.class);</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user2</span> <span class=\"operator\">=</span> (User) constructor.newInstance(<span class=\"string\">&quot;打爆&quot;</span>, <span class=\"number\">22</span>);</span><br><span class=\"line\">    System.out.println(user2);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//通过反射获取一个方法</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;============================&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">Method</span> <span class=\"variable\">setName</span> <span class=\"operator\">=</span> c1.getDeclaredMethod(<span class=\"string\">&quot;setName&quot;</span>, String.class);</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * invoke: 激活</span></span><br><span class=\"line\"><span class=\"comment\">     * invoke(执行方法的对象+原方法的参数1+原方法的参数2+...)</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    setName.invoke(user, <span class=\"string\">&quot;Weidows&quot;</span>);</span><br><span class=\"line\">    System.out.println(user.getName());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//通过反射操作属性</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;============================&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user3</span> <span class=\"operator\">=</span> (User) c1.newInstance();</span><br><span class=\"line\">    <span class=\"type\">Field</span> <span class=\"variable\">name</span> <span class=\"operator\">=</span> c1.getDeclaredField(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">//不能直接操作私有属性，我们需要关闭程序的安全监测，属性或方法的setAccessible(true)</span></span><br><span class=\"line\">    name.setAccessible(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    name.set(user3, <span class=\"string\">&quot;齐下无贰&quot;</span>);</span><br><span class=\"line\">    System.out.println(user3.getName());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">      twenty_one.reflection.User@59f95c5d</span></span><br><span class=\"line\"><span class=\"comment\">      ============================</span></span><br><span class=\"line\"><span class=\"comment\">      twenty_one.reflection.User@5c8da962</span></span><br><span class=\"line\"><span class=\"comment\">      ============================</span></span><br><span class=\"line\"><span class=\"comment\">      Weidows</span></span><br><span class=\"line\"><span class=\"comment\">      ============================</span></span><br><span class=\"line\"><span class=\"comment\">      齐下无贰</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> age;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">User</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">getName</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setName</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">User</span><span class=\"params\">(String name, <span class=\"type\">int</span> age)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"性能分析-2\">性能分析</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.lang.reflect.Method;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PerformanceInfluence</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    test1();</span><br><span class=\"line\">    test2();</span><br><span class=\"line\">    test3();</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">      普通方式执行4ms</span></span><br><span class=\"line\"><span class=\"comment\">      反射方式,开启检测执行2794ms</span></span><br><span class=\"line\"><span class=\"comment\">      反射方式,关闭检测执行1771ms</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test1</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"variable\">start</span> <span class=\"operator\">=</span> System.currentTimeMillis();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000000000</span>; i++) &#123;</span><br><span class=\"line\">      user.getName();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"variable\">end</span> <span class=\"operator\">=</span> System.currentTimeMillis();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;普通方式执行&quot;</span> + (end - start) + <span class=\"string\">&quot;ms&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test2</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c1</span> <span class=\"operator\">=</span> user.getClass();</span><br><span class=\"line\">    <span class=\"type\">Method</span> <span class=\"variable\">getName</span> <span class=\"operator\">=</span> c1.getDeclaredMethod(<span class=\"string\">&quot;getName&quot;</span>, <span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"variable\">start</span> <span class=\"operator\">=</span> System.currentTimeMillis();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000000000</span>; i++) &#123;</span><br><span class=\"line\">      getName.invoke(user, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"variable\">end</span> <span class=\"operator\">=</span> System.currentTimeMillis();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;反射方式,开启检测执行&quot;</span> + (end - start) + <span class=\"string\">&quot;ms&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test3</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c1</span> <span class=\"operator\">=</span> user.getClass();</span><br><span class=\"line\">    <span class=\"type\">Method</span> <span class=\"variable\">getName</span> <span class=\"operator\">=</span> c1.getDeclaredMethod(<span class=\"string\">&quot;getName&quot;</span>, <span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"variable\">start</span> <span class=\"operator\">=</span> System.currentTimeMillis();</span><br><span class=\"line\">    getName.setAccessible(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000000000</span>; i++) &#123;</span><br><span class=\"line\">      getName.invoke(user, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"variable\">end</span> <span class=\"operator\">=</span> System.currentTimeMillis();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;反射方式,关闭检测执行&quot;</span> + (end - start) + <span class=\"string\">&quot;ms&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>可见使用<code>反射方式执行效率远远远远低于正常执行</code>,关闭访问权限检测也只能降低部分性能损耗</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"反射操作泛型\">反射操作泛型</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.lang.reflect.Method;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.reflect.ParameterizedType;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.reflect.Type;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Generic</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">(Map&lt;String, User&gt; map, List&lt;User&gt; list)</span> &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> Map&lt;String, User&gt; <span class=\"title function_\">test02</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> NoSuchMethodException &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取参数(map,list)的泛型参数(String,User)</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">Method</span> <span class=\"variable\">method</span> <span class=\"operator\">=</span> Generic.class.getMethod(<span class=\"string\">&quot;test01&quot;</span>, Map.class, List.class);</span><br><span class=\"line\">    Type[] genericParameterTypes = method.getGenericParameterTypes();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Type genericParameterType : genericParameterTypes) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;范型参数&quot;</span> + genericParameterType);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (genericParameterType <span class=\"keyword\">instanceof</span> ParameterizedType) &#123;</span><br><span class=\"line\">        Type[] actualTypeAnguments = ((ParameterizedType) genericParameterType).getActualTypeArguments();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Type actualTypeAngument : actualTypeAnguments) &#123;</span><br><span class=\"line\">          System.out.println(<span class=\"string\">&quot;  实际参数范型&quot;</span> + actualTypeAngument);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;--------------------------------------------&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取返回值的泛型参数</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"type\">Method</span> <span class=\"variable\">method1</span> <span class=\"operator\">=</span> Generic.class.getMethod(<span class=\"string\">&quot;test02&quot;</span>, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    <span class=\"type\">Type</span> <span class=\"variable\">getGenericReturnType</span> <span class=\"operator\">=</span> method1.getGenericReturnType();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (getGenericReturnType <span class=\"keyword\">instanceof</span> ParameterizedType) &#123;</span><br><span class=\"line\">      Type[] actualTypeArguments = ((ParameterizedType) getGenericReturnType).getActualTypeArguments();</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (Type actualTypeArgument : actualTypeArguments) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;返回值范型&quot;</span> + actualTypeArgument);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    范型参数java.util.Map&lt;java.lang.String, twenty_one.reflection.User&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    实际参数范型class java.lang.String</span></span><br><span class=\"line\"><span class=\"comment\">    实际参数范型class twenty_one.reflection.User</span></span><br><span class=\"line\"><span class=\"comment\">    范型参数java.util.List&lt;twenty_one.reflection.User&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    实际参数范型class twenty_one.reflection.User</span></span><br><span class=\"line\"><span class=\"comment\">    --------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    返回值范型class java.lang.String</span></span><br><span class=\"line\"><span class=\"comment\">    返回值范型class twenty_one.reflection.User</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"反射操作注解\">反射操作注解</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.lang.annotation.ElementType;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.annotation.Retention;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.annotation.Target;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Annotation</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> NoSuchFieldException, SecurityException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// * 通过反射获取注解</span></span><br><span class=\"line\">    java.lang.annotation.Annotation[] annotations = Student1.class.getAnnotations();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (java.lang.annotation.Annotation annotation : annotations) &#123;</span><br><span class=\"line\">      System.out.println(annotation);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// * 获取注解的value</span></span><br><span class=\"line\">    <span class=\"type\">Table</span> <span class=\"variable\">annotation</span> <span class=\"operator\">=</span> Student1.class.getAnnotation(Table.class); <span class=\"comment\">//获取Student1类上Table类型的注解</span></span><br><span class=\"line\">    System.out.println(annotation.value());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// * 获取指定的value</span></span><br><span class=\"line\">    java.lang.reflect.<span class=\"type\">Field</span> <span class=\"variable\">f</span> <span class=\"operator\">=</span> Student1.class.getDeclaredField(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">Field</span> <span class=\"variable\">annotation1</span> <span class=\"operator\">=</span> f.getAnnotation(Field.class);</span><br><span class=\"line\">    System.out.println(annotation1.columnName() + <span class=\"string\">&quot;\\t&quot;</span> + annotation1.type() + <span class=\"string\">&quot;\\t&quot;</span> + annotation1.length());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    <span class=\"doctag\">@twenty</span>_one.reflection.Table(value=&quot;db_student&quot;)</span></span><br><span class=\"line\"><span class=\"comment\">    db_student</span></span><br><span class=\"line\"><span class=\"comment\">    db_name varchar 3</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Table(value = &quot;db_student&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Student1</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Field(columnName = &quot;db_id&quot;, type = &quot;int&quot;, length = 10)</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\">  <span class=\"meta\">@Field(columnName = &quot;db_age&quot;, type = &quot;int&quot;, length = 10)</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> age;</span><br><span class=\"line\">  <span class=\"meta\">@Field(columnName = &quot;db_name&quot;, type = &quot;varchar&quot;, length = 3)</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Student1</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Student1</span><span class=\"params\">(<span class=\"type\">int</span> id, <span class=\"type\">int</span> age, String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.id = id;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getId</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> id;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setId</span><span class=\"params\">(<span class=\"type\">int</span> id)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.id = id;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getAge</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setAge</span><span class=\"params\">(<span class=\"type\">int</span> age)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">getName</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setName</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">toString</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Student [age=&quot;</span> + age + <span class=\"string\">&quot;, id=&quot;</span> + id + <span class=\"string\">&quot;, name=&quot;</span> + name + <span class=\"string\">&quot;]&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ! 类名的注解</span></span><br><span class=\"line\"><span class=\"meta\">@Target(ElementType.TYPE)</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=\"line\"><span class=\"meta\">@interface</span> Table &#123;</span><br><span class=\"line\">  String <span class=\"title function_\">value</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ! 属性的注解</span></span><br><span class=\"line\"><span class=\"meta\">@Target(ElementType.FIELD)</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=\"line\"><span class=\"meta\">@interface</span> Field &#123;</span><br><span class=\"line\">  String <span class=\"title function_\">columnName</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  String <span class=\"title function_\">type</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"type\">int</span> <span class=\"title function_\">length</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "注解",
                "反射"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%8F%8D%E5%B0%84/1/",
            "url": "https://weidows.github.io/post/Java/%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%8F%8D%E5%B0%84/1/",
            "title": "🔥Java注解与反射复习~(壹)",
            "date_published": "2021-02-25T03:20:20.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2022-02-27 16:27:42\n * @FilePath: \\Blog-private\\source\\_posts\\Java\\注解与反射\\1.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%86%85%E7%BD%AE%E6%B3%A8%E8%A7%A3\">内置注解</a></li>\n<li><a href=\"#%E5%85%83%E6%B3%A8%E8%A7%A3\">元注解</a></li>\n<li><a href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3\">自定义注解</a></li>\n<li><a href=\"#%E5%8F%8D%E5%B0%84\">反射</a>\n<ul>\n<li><a href=\"#class-%E7%B1%BB\">Class 类</a></li>\n<li><a href=\"#%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B\">类的加载过程</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AE%9E%E4%BE%8B%E5%8C%96%E4%B8%8E-static-%E5%8A%A0%E8%BD%BD\">实例化与 static 加载</a>\n<ul>\n<li><a href=\"#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E5%8F%91%E7%94%9F%E7%B1%BB%E5%88%9D%E5%A7%8B%E5%8C%96\">什么时候会发生类初始化?</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8\">类加载器</a></li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"内置注解\">内置注解</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Anno1</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"comment\">//重写方法</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">toString</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">super</span>.toString();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Deprecated</span> <span class=\"comment\">//表示弃用方法,但仍可使用</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@SuppressWarnings(&quot;all&quot;)</span> <span class=\"comment\">//抑制警告</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    test();</span><br><span class=\"line\">    test01();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"元注解\">元注解</h2>\n<ul>\n<li>\n<p><code>作用于其他注解的注解</code></p>\n</li>\n<li>\n<p>在 java.lang.annotation 包中可以找到.( @ Target , @Retention，@Documented , @Inherited )</p>\n<ul>\n<li>@Target :用于描述注解的使用范围(即:被描述的注解可以用在什么地方)</li>\n<li>@Retention :表示需要在什么级别保存该注释信息,用于描述注解的生命周期(SOURCE &lt; CLASS &lt; RUNTIME)</li>\n<li>@Document:说明该注解将被包含在 javadoc 中</li>\n<li>@Inherited: 说明子类可以继承父类中的该注解</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.lang.annotation.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@MyAnnotation</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Anno2</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@MyAnnotation</span></span><br><span class=\"line\">  <span class=\"keyword\">void</span> <span class=\"title function_\">test</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Target 表示我们的注解可以用在哪些地方.</span></span><br><span class=\"line\"><span class=\"meta\">@Target(value = &#123; ElementType.METHOD, ElementType.TYPE &#125;)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Retention表示我们的注解在什么地方还有效。runtime&gt;class&gt;sources</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(value = RetentionPolicy.RUNTIME)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Documented表示是否将我们的注解生成在Javadoc中</span></span><br><span class=\"line\"><span class=\"meta\">@Documented</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Inherited子类可以继承父类的注解</span></span><br><span class=\"line\"><span class=\"meta\">@Inherited</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@interface</span> MyAnnotation &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"自定义注解\">自定义注解</h2>\n<ul>\n<li>使用@interface 自定义注解时,自动继承了 java.lang .annotation.Annotation 接口</li>\n<li>@interface 用来声明一个注解,格式: public @ interface 注解名{定义内容}\n<ol>\n<li>其中的每一个方法实际上是声明了一个配置参数.</li>\n<li>方法的名称就是参数的名称.</li>\n<li>返回值类型就是参数的类型(返回值只能是基本类型,Class , String , enum ).</li>\n<li>可以通过 default 来声明参数的默认值</li>\n<li>如果只有一个参数成员, 一般参数名为 value</li>\n<li>注解元素必须要有值，我们定义注解元素时,经常使用空字符串，0 作为默认值.</li>\n</ol>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.lang.annotation.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Anno3</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//注解可以显示赋值，如果没有默认值 ，我们就必须给注解赋值</span></span><br><span class=\"line\">  <span class=\"meta\">@MyAnnotation2(name = &#123;&quot;Weidows&quot;, &quot;齐下无贰&quot;&#125;, age = 21)</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@MyAnnotation3(&quot;Weidows&quot;)</span> <span class=\"comment\">//参数只有一个，且参数名为value</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test1</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Target(&#123;ElementType.METHOD, ElementType.TYPE&#125;)</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=\"line\"><span class=\"meta\">@interface</span> MyAnnotation2 &#123;</span><br><span class=\"line\">  <span class=\"comment\">//注解的参数:参数类型+参数名();</span></span><br><span class=\"line\">  String[] name() <span class=\"keyword\">default</span> &#123;<span class=\"string\">&quot;&quot;</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"type\">int</span> <span class=\"title function_\">age</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"type\">int</span> <span class=\"title function_\">id</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> -<span class=\"number\">1</span>; <span class=\"comment\">// 如果默认值为-1,代表不存在。</span></span><br><span class=\"line\"></span><br><span class=\"line\">  String <span class=\"title function_\">schools</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> <span class=\"string\">&quot;家里蹲大学&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Target</span>(value = &#123; ElementType.TYPE, ElementType.METHOD &#125;)</span></span><br><span class=\"line\"><span class=\"comment\"> * 只有一个参数时可以省略参数名,多个参数时不可省略</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=\"line\"><span class=\"meta\">@interface</span> MyAnnotation3 &#123;</span><br><span class=\"line\">  <span class=\"comment\">//只有一个参数时，参数名为value时，使用时不需参数名</span></span><br><span class=\"line\">  String <span class=\"title function_\">value</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>现在,注解定义和使用结束了,下面结合反射来读取注解数据.</p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"反射\">反射</h2>\n<ul>\n<li>可以在运行时实现动态创建对象和编译,有很大的灵活性,但会影响一定性能</li>\n</ul>\n<h3 id=\"Class-类\">Class 类</h3>\n<ul>\n<li>\n<p>Class 类时反射机制的根源,常用方法如下:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmAfm.png\" alt=\"20210226151038\" />\n</li>\n<li>\n<p>获取 Class 类的对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo1</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> ClassNotFoundException &#123;</span><br><span class=\"line\">    <span class=\"comment\">//方式一：通过对象获取</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>().getClass();</span><br><span class=\"line\">    System.out.println(c1);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//方式二：通过forname获取</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c2</span> <span class=\"operator\">=</span> Class.forName(<span class=\"string\">&quot;twenty_one.reflection.Person&quot;</span>);</span><br><span class=\"line\">    System.out.println(c2);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//通过类名.class获得(最可靠,高效)</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c3</span> <span class=\"operator\">=</span> Student.class;</span><br><span class=\"line\">    System.out.println(c3);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//方式四：基本内置类型的包装类都有一个TYPE属性</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c4</span> <span class=\"operator\">=</span> Integer.TYPE;</span><br><span class=\"line\">    System.out.println(c4);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Person</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Person</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Person</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">toString</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Person&#123;&quot;</span> + <span class=\"string\">&quot;name=&#x27;&quot;</span> + name + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> + <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Student</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Person</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Student</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = <span class=\"string\">&quot;Student&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Teacher</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Person</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Teacher</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = <span class=\"string\">&quot;Teacher&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>Class 对象类型</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.lang.annotation.ElementType;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo2</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c1</span> <span class=\"operator\">=</span> Object.class; <span class=\"comment\">//类</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c2</span> <span class=\"operator\">=</span> Runnable.class; <span class=\"comment\">//接口</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c3</span> <span class=\"operator\">=</span> String[].class; <span class=\"comment\">//- -维数组</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c4</span> <span class=\"operator\">=</span> <span class=\"type\">int</span>[][].class; <span class=\"comment\">//二维数组</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c5</span> <span class=\"operator\">=</span> Override.class; <span class=\"comment\">//注解</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c6</span> <span class=\"operator\">=</span> ElementType.class; <span class=\"comment\">//枚举</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c7</span> <span class=\"operator\">=</span> Integer.class; <span class=\"comment\">//基本数据类型</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c8</span> <span class=\"operator\">=</span> <span class=\"keyword\">void</span>.class; <span class=\"comment\">//void</span></span><br><span class=\"line\">    <span class=\"type\">Class</span> <span class=\"variable\">c9</span> <span class=\"operator\">=</span> Class.class; <span class=\"comment\">//Class</span></span><br><span class=\"line\">    System.out.println(c1);<span class=\"comment\">//class java.lang.Object</span></span><br><span class=\"line\">    System.out.println(c2);<span class=\"comment\">//interface java.lang.Comparable</span></span><br><span class=\"line\">    System.out.println(c3);<span class=\"comment\">//class [Ljava.lang.String;</span></span><br><span class=\"line\">    System.out.println(c4);<span class=\"comment\">//class [[I</span></span><br><span class=\"line\">    System.out.println(c5);<span class=\"comment\">//interface java.lang.Override</span></span><br><span class=\"line\">    System.out.println(c6);<span class=\"comment\">//class java.lang.annotation.ElementType</span></span><br><span class=\"line\">    System.out.println(c7);<span class=\"comment\">//class java.lang.Integer</span></span><br><span class=\"line\">    System.out.println(c8);<span class=\"comment\">//void</span></span><br><span class=\"line\">    System.out.println(c9);<span class=\"comment\">//class java.lang.Class</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"类的加载过程\">类的加载过程</h3>\n<ol>\n<li>\n<p>加载: 首先类加载器读取.class 字节码文件到方法区内存,转换数据结构为运行时,并生成 java.lang.Class 对象.</p>\n<ul>\n<li>在反射中获取 Class 对象并不是创建,而是从内存中获取.</li>\n</ul>\n</li>\n<li>\n<p>链接:将 Java 类的二进制代码合并到 JVM 的运行状态之中的过程。</p>\n<ul>\n<li>验证:确保加载的类信息符合 JVM 规范，没有安全方面的问题</li>\n<li>准备:正式为类变量(static) 分配内存并设置类变量默认初始值的阶段,这些内存都将在方法区中进行分配。</li>\n<li>解析:虚拟机常量池内的符号引用(常量名)替换为直接引用(地址)的过程。</li>\n</ul>\n</li>\n<li>\n<p>初始化:</p>\n<ul>\n<li>执行类构造器&lt; clinit&gt; ()方法的过程。<code>类构造器&lt; clinit&gt; ()方法是由编译期自动收集类中所有类变量的赋值动作和静态代码块中的语句合并产生的。</code>(类构造 器是构造类信息的，不是构造该类对象的构造器)。</li>\n<li>当初始化一个类的时候，如果发现其父类还没有进行初始化，则需要先触发其父类的初始化。</li>\n<li>虚拟机会保证一 个类的 ()方法在多线程环境中被正确加锁和同步。</li>\n</ul>\n<hr>\n</li>\n</ol>\n<ul>\n<li>\n<p>例子</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo3</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">A</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">A</span>();</span><br><span class=\"line\">    System.out.println(A.m);<span class=\"comment\">//300</span></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">      1.加载到内存，产生一个类对应Class对象</span></span><br><span class=\"line\"><span class=\"comment\">      2.链接，链接结束后m=◎</span></span><br><span class=\"line\"><span class=\"comment\">      3.初始化</span></span><br><span class=\"line\"><span class=\"comment\">      &lt;clinit&gt;()&#123;</span></span><br><span class=\"line\"><span class=\"comment\">          m=100;</span></span><br><span class=\"line\"><span class=\"comment\">          System.out.println( &quot;A类静态代码块初始化&quot;);</span></span><br><span class=\"line\"><span class=\"comment\">          m = 300;</span></span><br><span class=\"line\"><span class=\"comment\">      &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">A</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// * 1.1</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"variable\">m</span> <span class=\"operator\">=</span> <span class=\"number\">100</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// * 1.2</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;A类静态代码块初始化&quot;</span>);</span><br><span class=\"line\">    m = <span class=\"number\">300</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// * 2</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">A</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;A类的构造初始化&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmSeh.png\" alt=\"20210226172346\" />\n</li>\n</ul>\n<hr>\n<h2 id=\"实例化与-static-加载\">实例化与 static 加载</h2>\n<ul>\n<li>\n<p>尝试下实例化与否对 static 资源调用的影响</p>\n</li>\n<li>\n<p>实例化+调用</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo3</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">A</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">A</span>();</span><br><span class=\"line\">    System.out.println(A.m);<span class=\"comment\">//300</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">A</span>类静态代码块初始化</span><br><span class=\"line\"><span class=\"selector-tag\">A</span>类的构造初始化</span><br><span class=\"line\"><span class=\"number\">300</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>实例化+不调用</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo3</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">A</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">A</span>();</span><br><span class=\"line\">    <span class=\"comment\">// System.out.println(A.m);//300</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">A</span>类静态代码块初始化</span><br><span class=\"line\"><span class=\"selector-tag\">A</span>类的构造初始化</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>不实例化+调用</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo3</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// A a = new A();</span></span><br><span class=\"line\">    System.out.println(A.m);<span class=\"comment\">//300</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">A</span>类静态代码块初始化</span><br><span class=\"line\"><span class=\"number\">300</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>可以发现在实例化对象之后调用 static 资源,并不会再次执行静态代码块</p>\n<ul>\n<li>如果没实例化的情况下调取 static 资源,类会加载,但不会执行构造器</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"什么时候会发生类初始化\">什么时候会发生类初始化?</h3>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmbFr.png\" alt=\"20210226172913\" />\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo4</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;main类被加载&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> ClassNotFoundException &#123;</span><br><span class=\"line\">    <span class=\"comment\">//1.主动引用</span></span><br><span class=\"line\">    <span class=\"comment\">// Son son = new Son();</span></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    * main类被加载</span></span><br><span class=\"line\"><span class=\"comment\">    * 父类被加载</span></span><br><span class=\"line\"><span class=\"comment\">    * 子类被加载</span></span><br><span class=\"line\"><span class=\"comment\">    * */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//反射也会产生主动引用</span></span><br><span class=\"line\">    <span class=\"comment\">// Class.forName(&quot;twenty_one.reflection.Son&quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     * main类被加载</span></span><br><span class=\"line\"><span class=\"comment\">     * 父类被加载</span></span><br><span class=\"line\"><span class=\"comment\">     * 子类被加载</span></span><br><span class=\"line\"><span class=\"comment\">     * */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//不会产生类的引用的方法</span></span><br><span class=\"line\">    <span class=\"comment\">// System.out.println(Son.b);</span></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    * main类被加载</span></span><br><span class=\"line\"><span class=\"comment\">    * 父类被加载</span></span><br><span class=\"line\"><span class=\"comment\">    * 2</span></span><br><span class=\"line\"><span class=\"comment\">    * */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//只会main类被加载</span></span><br><span class=\"line\">    <span class=\"comment\">// System.out.println(Son.M);</span></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     * main类被加载</span></span><br><span class=\"line\"><span class=\"comment\">     * 1</span></span><br><span class=\"line\"><span class=\"comment\">     * */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//全加载</span></span><br><span class=\"line\">    System.out.println(Son.m);</span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     * main类被加载</span></span><br><span class=\"line\"><span class=\"comment\">     * 父类被加载</span></span><br><span class=\"line\"><span class=\"comment\">     * 子类被加载</span></span><br><span class=\"line\"><span class=\"comment\">     * 100</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Father</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;父类被加载&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Son</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Father</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;子类被加载&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"variable\">m</span> <span class=\"operator\">=</span> <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">M</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"类加载器\">类加载器</h2>\n<ul>\n<li>\n<p>作用</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmlnT.png\" alt=\"20210227171646\" />\n</li>\n<li>\n<p>分类</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVmM71.png\" alt=\"20210227172006\" />\n<hr>\n</li>\n<li>\n<p>操作类加载器</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo5</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> ClassNotFoundException &#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取系统的类加载器</span></span><br><span class=\"line\">    <span class=\"type\">ClassLoader</span> <span class=\"variable\">systemClassLoader</span> <span class=\"operator\">=</span> ClassLoader.getSystemClassLoader();</span><br><span class=\"line\">    System.out.println(systemClassLoader);<span class=\"comment\">//jdk.internal.loader.ClassLoaders$AppClassLoader@4459eb14</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//获取系统类加载器的父类加载器--&gt;扩展类加载器</span></span><br><span class=\"line\">    <span class=\"type\">ClassLoader</span> <span class=\"variable\">parent</span> <span class=\"operator\">=</span> systemClassLoader.getParent();</span><br><span class=\"line\">    System.out.println(parent);<span class=\"comment\">//jdk.internal.loader.ClassLoaders$PlatformClassLoader@7960847b</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//获取扩展类加载器的父类加载器--&gt;根加载器(C/C++)</span></span><br><span class=\"line\">    <span class=\"type\">ClassLoader</span> <span class=\"variable\">grantparent</span> <span class=\"operator\">=</span> parent.getParent();</span><br><span class=\"line\">    System.out.println(grantparent);<span class=\"comment\">//null</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//测试当前类是哪个加载器加载的</span></span><br><span class=\"line\">    <span class=\"type\">ClassLoader</span> <span class=\"variable\">classLoader</span> <span class=\"operator\">=</span> Demo5.class.getClassLoader();</span><br><span class=\"line\">    System.out.println(classLoader);<span class=\"comment\">//jdk.internal.loader.ClassLoaders$AppClassLoader@4459eb14</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//测试JDK内置的类是谁加载的</span></span><br><span class=\"line\">    <span class=\"type\">ClassLoader</span> <span class=\"variable\">classLoader1</span> <span class=\"operator\">=</span> Class.forName(<span class=\"string\">&quot;java.lang.Object&quot;</span>).getClassLoader();</span><br><span class=\"line\">    System.out.println(classLoader1);<span class=\"comment\">//null</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//如何获得系统类加载器可以加载的路径</span></span><br><span class=\"line\">    System.out.println(System.getProperty(<span class=\"string\">&quot;java.class.path&quot;</span>));<span class=\"comment\">//D:\\Game\\Weidows\\Java\\target\\classes;D:\\Game\\Scoop\\persist\\maven\\mvn-repository\\commons-io\\commons-io\\2.8.0\\commons-io-2.8.0.jar</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "注解",
                "反射"
            ]
        }
    ]
}