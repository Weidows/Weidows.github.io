{
    "version": "https://jsonfeed.org/version/1",
    "title": "⭐️齐下无贰⭐️ • All posts by \"ssh\" tag",
    "description": "May all the beauty be bless.✨",
    "home_page_url": "https://weidows.github.io",
    "items": [
        {
            "id": "https://weidows.github.io/post/experience/SSH/",
            "url": "https://weidows.github.io/post/experience/SSH/",
            "title": "✨SSH 远程连接.",
            "date_published": "2020-12-06T16:12:52.000Z",
            "content_html": "<!--\n * @Author: Weidows\n * @Date: 2020-12-07 00:12:52\n * @LastEditors: Weidows\n * @LastEditTime: 2021-09-02 15:46:56\n * @FilePath: \\Blog-private\\source\\_posts\\experience\\SSH.md\n * @Description:\n-->\n<ul>\n<li><a href=\"#%E6%89%8B%E5%8A%A8%E6%8C%A1\">手动挡</a>\n<ul>\n<li><a href=\"#%E7%94%9F%E6%88%90%E5%85%AC%E7%A7%81%E7%A7%98%E9%92%A5\">生成公私秘钥</a></li>\n<li><a href=\"#%E9%85%8D%E7%BD%AE%E8%BF%9E%E9%80%9A\">配置连通</a></li>\n<li><a href=\"#%E6%B5%8B%E8%AF%95%E5%91%BD%E4%BB%A4\">测试命令</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%87%AA%E5%8A%A8%E6%8C%A1\">自动挡</a>\n<ul>\n<li><a href=\"#finalshell\">FinalShell</a></li>\n<li><a href=\"#vscode-%E8%BF%9E%E6%8E%A5\">VScode 连接</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AD%98%E5%9C%A8%E3%81%AE%E9%97%AE%E9%A2%98\">存在の问题</a>\n<ul>\n<li><a href=\"#root-denied\">root-denied</a></li>\n<li><a href=\"#vscode-ssh-%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5\">VScode-ssh- 断开连接</a></li>\n</ul>\n</li>\n<li><a href=\"#tcp-%E4%BF%9D%E6%B4%BB\">TCP 保活</a></li>\n</ul>\n<p><a><img src= \"https://cdn.jsdelivr.net/gh/Weidows/Images/img/loading.webp\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"手动挡\">手动挡</h2>\n<h3 id=\"生成公私秘钥\">生成公私秘钥</h3>\n<ul>\n<li>\n<p>比如</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C &quot;utsuko27@qq.com&quot; -f ~/.ssh/Gitee_rsa</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>生成后 <code>.ssh/</code> 文件夹下面就会出现两个文件</p>\n<ul>\n<li><code>Gitee_rsa</code> 私钥</li>\n<li><code>Gitee_rsa.pub</code> 公钥</li>\n</ul>\n</li>\n<li>\n<p>通过 <code>cd ~/.ssh</code> 或者 <code>cat ~/.ssh/Gitee_rsa.pub</code> 的方式获取公钥</p>\n<ul>\n<li>一般.ssh 路径为<code>C:\\Users\\username\\.ssh</code></li>\n<li>把公钥复制到远程机上.</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"配置连通\">配置连通</h3>\n<ul>\n<li>\n<p>在.ssh 下新建 <code>config</code> 文件, 参照以下模板:</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># gitee</span></span><br><span class=\"line\">Host gitee.com</span><br><span class=\"line\">HostName gitee.com</span><br><span class=\"line\">PreferredAuthentications publickey</span><br><span class=\"line\">IdentityFile ~<span class=\"regexp\">/.ssh/</span>Gitee_rsa</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>多个 ssh 秘钥在这个 config 文件里配置.</p>\n</li>\n<li>\n<p>如果不想让它确认输入 yes, 可以在这个文件里加上一行:</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">StrictHostKeyChecking</span> <span class=\"literal\">no</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>配置文件完成, 现在应该是这样子:</p>\n<img src= \"https://cdn.jsdelivr.net/gh/Weidows/Images/img/loading.webp\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/post/4slQ1hP92qxSUIW.png\" alt=\"20201207100813\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"测试命令\">测试命令</h3>\n<ul>\n<li>\n<p>终端进入这个.ssh 文件夹(不在这个文件夹下无法导通)</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -T <span class=\"symbol\">git@</span>gitee.com</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>出现<code>git@gitee.com: Permission denied (publickey).</code>, 说明哪里没配置好出问题了.</p>\n</li>\n<li>\n<p>出现 <code>Hi Weidows! You've successfully authenticated, but GITEE.COM does not provide shell access.</code> 说明配置好了.</p>\n</li>\n<li>\n<p>测试完成, 两机处于连通状态!</p>\n</li>\n</ul>\n<p><a><img src= \"https://cdn.jsdelivr.net/gh/Weidows/Images/img/loading.webp\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"自动挡\">自动挡</h2>\n<h3 id=\"FinalShell\">FinalShell</h3>\n<ul>\n<li>\n<p>连接树莓派,ip 为<code>192.168.43.119</code>, 用户名为<code>pi</code>, 密码为默认的<code>raspberry</code></p>\n<img src= \"https://cdn.jsdelivr.net/gh/Weidows/Images/img/loading.webp\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/post/9SuJxmTWczQG2oE.png\" alt=\"20201203113101\" />\n</li>\n</ul>\n<p><a><img src= \"https://cdn.jsdelivr.net/gh/Weidows/Images/img/loading.webp\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"VScode- 连接\">VScode 连接</h3>\n<ul>\n<li>\n<p>安装插件<code>Remote-SSH</code></p>\n<img src= \"https://cdn.jsdelivr.net/gh/Weidows/Images/img/loading.webp\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/post/25reFfkbShHl9q8.png\" alt=\"20201204202003\" />\n</li>\n<li>\n<p>安装后侧边栏出现 <code> 远程资源管理器</code>, 然后点新建, 出现下面东东~</p>\n<img src= \"https://cdn.jsdelivr.net/gh/Weidows/Images/img/loading.webp\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/post/vm3bRepxYuL4SUk.png\" alt=\"20210128005600\" />\n</li>\n<li>\n<p>照着他的提示输入就行, 比如我以 <code>pi</code> 用户登录, 树莓派 <code> 内网 ip</code>是<code>192.168.2.116</code>, 那么应该输入</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh pi@192.168.2.116 -A</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>打开 <code>ssh 配置文件 </code> 查看一下, 可以自定义修改配置, 如下.</p>\n<ul>\n<li>我把 Host 后面的名字改成了树莓派, 其他没动.</li>\n</ul>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Host 树莓派</span><br><span class=\"line\">  HostName <span class=\"number\">192.168</span>.<span class=\"number\">2.116</span></span><br><span class=\"line\">  <span class=\"keyword\">User</span> <span class=\"title\">pi</span></span><br><span class=\"line\">  ForwardAgent yes</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>打开输入对应用户的密码就可以登录了.</p>\n</li>\n</ul>\n<p><a><img src= \"https://cdn.jsdelivr.net/gh/Weidows/Images/img/loading.webp\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"存在の问题\">存在の问题</h2>\n<h3 id=\"root-denied\">root-denied</h3>\n<ul>\n<li>某些系统对 ssh 不开放 root, 比如<code>Deepin</code>, 网上有开放方法</li>\n</ul>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/weixin_42408060/article/details/102952986\">深度（deepin）系统不能 ssh root 用户登录</a></p>\n</blockquote>\n<hr>\n<h3 id=\"VScode-ssh- 断开连接\">VScode-ssh- 断开连接</h3>\n<ul>\n<li>\n<p>按照上面配合后使用完全没有问题, 但是 ssh 连接后一段时间你没有跟远程机传输数据的话, 连接就会断开</p>\n</li>\n<li>\n<p>网上搜了一大顿, 有些解决办法, 比如 <code> 修改 ssh_config</code>,<code>卸载 Chinese 插件 </code>,<code>TCP 保活</code>,<code> 定时唤醒 </code> 等等…</p>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>最终, 我用二分法查出了问题所在:</p>\n<img src= \"https://cdn.jsdelivr.net/gh/Weidows/Images/img/loading.webp\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/post/2GXOS5mW8EzIT7Y.png\" alt=\"20210206124525\" />\n</li>\n<li>\n<p>问题出自于一个叫 <code>code time</code> 的插件, 它的 <code>issue</code> 里面也提了这个 bug, 还没解决.</p>\n<ul>\n<li>可以用 <code>wakatime</code> 替代, 这个插件没事.</li>\n</ul>\n</li>\n</ul>\n<p><a><img src= \"https://cdn.jsdelivr.net/gh/Weidows/Images/img/loading.webp\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"TCP- 保活\">TCP 保活</h2>\n<ul>\n<li>\n<p>没特殊需求的话不需要配置.</p>\n<blockquote>\n<p><a href=\"https://blog.fdawei.club/2018/03/04/47759cbac5b96ea23e90e57200b84274/\">SSH 连接保活</a></p>\n</blockquote>\n</li>\n<li>\n<p>在 <code>~/.ssh/config</code> 里添加如下:</p>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">ClientAliveInterval</span> <span class=\"number\">10</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "ssh",
                "linux"
            ]
        }
    ]
}