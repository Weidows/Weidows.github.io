{
    "version": "https://jsonfeed.org/version/1",
    "title": "⭐️齐下无贰⭐️ • All posts by \"wsl2\" tag",
    "description": "May all the beauty be bless.✨",
    "home_page_url": "https://weidows.github.io",
    "items": [
        {
            "id": "https://weidows.github.io/post/system/wsl2/",
            "url": "https://weidows.github.io/post/system/wsl2/",
            "title": "🎇尝试转投wsl生态.",
            "date_published": "2021-02-01T05:54:10.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @Date: 2021-02-01 13:54:10\n * @LastEditors: Weidows\n * @LastEditTime: 2021-02-13 17:20:29\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\system\\wsl2.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%B0%8F%E5%90%90%E6%A7%BD\">小吐槽</a></li>\n<li><a href=\"#%E6%8C%87%E5%8D%97\">指南</a>\n<ul>\n<li><a href=\"#%E5%AE%98%E6%96%B9%E7%9A%84\">官方的</a></li>\n<li><a href=\"#%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A\">名词解释</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4\">安装步骤</a>\n<ul>\n<li><a href=\"#%E7%B3%BB%E7%BB%9F\">系统</a></li>\n<li><a href=\"#%E5%8A%9F%E8%83%BD\">功能</a></li>\n<li><a href=\"#%E9%85%8D%E7%BD%AE\">配置</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90\">安装完成</a></li>\n<li><a href=\"#vscodewsl\">VScode+wsl</a>\n<ul>\n<li><a href=\"#terminal\">Terminal</a></li>\n<li><a href=\"#remote-%E5%BC%80%E5%8F%91\">Remote 开发</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84\">地址映射</a></li>\n<li><a href=\"#ideawsl\">IDEA+wsl</a>\n<ul>\n<li><a href=\"#terminal-1\">terminal</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%90%8E%E8%AE%B0\">后记</a></li>\n<li><a href=\"#wsl-%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85\">wsl 软件安装</a>\n<ul>\n<li><a href=\"#apt\">apt?</a></li>\n<li><a href=\"#dpkg\">dpkg</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%97%9B%E7%82%B9%E8%A7%A3%E5%86%B3\">痛点解决</a></li>\n</ul>\n<h2 id=\"小吐槽\">小吐槽</h2>\n<ul>\n<li>\n<p>搜文章头图时发现…百度和谷歌差距有点大…</p>\n</li>\n<li>\n<p>我用谷歌时间肯定没百度长,看起来谷歌更了解我 🤣</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLAMg.png\" alt=\"20210201140021\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSAfK.png\" alt=\"20210201140048\" />\n</li>\n<li>\n<p>虽然并不想吹捧或贬低哪个,但是这…(看来我是老双标怪了~)</p>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"指南\">指南</h2>\n<h3 id=\"官方的\">官方的</h3>\n<ul>\n<li>\n<p>这个微软是官方的,讲的很详细.</p>\n<blockquote>\n<p><a href=\"https://docs.microsoft.com/zh-cn/windows/wsl/install-win10#update-to-wsl-2\">适用于 Linux 的 Windows 子系统安装指南 (Windows 10)</a></p>\n</blockquote>\n</li>\n</ul>\n<hr>\n<h3 id=\"名词解释\">名词解释</h3>\n<ul>\n<li>\n<p>下面牵扯到很多名词,乍一看会<code>蒙圈</code>.</p>\n</li>\n<li>\n<p>放一个关系网络</p>\n<figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- hyper-v</span><br><span class=\"line\">  <span class=\"string\">|- Docker(hype-v引擎)</span></span><br><span class=\"line\">  <span class=\"string\">|- Windows</span></span><br><span class=\"line\">    <span class=\"string\">|- wsl2</span></span><br><span class=\"line\">      <span class=\"string\">|- wsl-linux</span></span><br><span class=\"line\">      <span class=\"string\">|- Docker(wsl引擎)</span></span><br><span class=\"line\">        <span class=\"string\">|- Nginx</span></span><br><span class=\"line\">        <span class=\"string\">|- Node.js</span></span><br><span class=\"line\">        <span class=\"string\">|- 各种系统和服务</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><code>hyper-v</code>是微软家的虚拟机平台,定位于<code>VMware</code>相同,虽然它看起来是 Windows 内部的软件,但是开启 hyper-v 后 Windows 本身也会成为其内部的虚拟机.</p>\n</li>\n<li>\n<p>wsl 是基于 Windows 下实现的 Linux 虚拟化技术,全称<code>Windows Subsystem for Linux</code>,所以这里面装的系统肯定是各种 linux,<code>2</code>只是版本号,一般 wsl2 简称 wsl,两个版本功能上有些差别.</p>\n<ul>\n<li><code>wsl-linux</code>就是指在 Store 里面像是 Ubuntu,Debian 等等的 linux 系统</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>Docker 的话详见 <a href=\"../docker\">🌈 初探 Docker.</a></p>\n</blockquote>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"安装步骤\">安装步骤</h2>\n<h3 id=\"系统\">系统</h3>\n<ul>\n<li>\n<p>首先 Windows64 位系统版本号必须大于等于 <code>1903</code>.</p>\n</li>\n<li>\n<p>系统类型只有专业版(好像家庭版和企业版不行)</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"功能\">功能</h3>\n<ul>\n<li>\n<p>[x] 启用适用于 Linux 的 Windows 子系统</p>\n</li>\n<li>\n<p>[x] 启用虚拟机功能</p>\n<hr>\n</li>\n<li>\n<p>如图上面两个<code>必须开启</code>,其他的您看着来~</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtzd9.png\" alt=\"20210201160810\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"配置\">配置</h3>\n<ul>\n<li>\n<p>下载并安装</p>\n<blockquote>\n<p><a href=\"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi\">下载适用于 x64 计算机的 WSL2 Linux 内核更新包</a></p>\n</blockquote>\n</li>\n<li>\n<p>然后,将 WSL 2 设置为默认版本</p>\n<ul>\n<li>\n<p>在 PowerShell 输入</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wsl --<span class=\"keyword\">set</span>-<span class=\"keyword\">default</span>-version <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>没出问题的话会提示 <code>有关与 WSL 2 的主要区别的信息，请访问 https://aka.ms/wsl2</code></p>\n</li>\n</ul>\n</li>\n<li>\n<p><code>最后</code>,打开<code>Microsoft Store</code>,安装想安装的 Linux 系统</p>\n<ul>\n<li>\n<p>Ubuntu 16.04 LTS</p>\n</li>\n<li>\n<p>Ubuntu 18.04 LTS</p>\n</li>\n<li>\n<p>Ubuntu 20.04 LTS (主流推荐)</p>\n</li>\n<li>\n<p>openSUSE Leap 15.1</p>\n</li>\n<li>\n<p>SUSE Linux Enterprise Server 12 SP5</p>\n</li>\n<li>\n<p>SUSE Linux Enterprise Server 15 SP1</p>\n</li>\n<li>\n<p>Kali Linux</p>\n</li>\n<li>\n<p>Debian GNU/Linux</p>\n</li>\n<li>\n<p>Fedora Remix for WSL</p>\n</li>\n<li>\n<p>Pengwin</p>\n</li>\n<li>\n<p>Pengwin Enterprise</p>\n</li>\n<li>\n<p>Alpine WSL</p>\n</li>\n</ul>\n</li>\n<li>\n<p>小插曲,如果 Store 加载不出来数据,报错<code>0x80131500</code>,那么,请关掉你的科学上网软件 🤣</p>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"安装完成\">安装完成</h2>\n<ul>\n<li>\n<p>第一次打开时他会先安装一小会儿,然后让你输入用户名和密码,创建新用户</p>\n<ul>\n<li>注意 Linux 系统输入密码时不会显示<code>****</code></li>\n</ul>\n<figure class=\"highlight lasso\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Installing, this may <span class=\"keyword\">take</span> a few minutes<span class=\"params\">...</span></span><br><span class=\"line\">Please create a default UNIX user account. The username does <span class=\"literal\">not</span> need <span class=\"keyword\">to</span> <span class=\"keyword\">match</span> your Windows username.</span><br><span class=\"line\">For more information visit: https:<span class=\"comment\">//aka.ms/wslusers</span></span><br><span class=\"line\">Enter <span class=\"literal\">new</span> UNIX username: weidows</span><br><span class=\"line\"><span class=\"literal\">New</span> password:</span><br><span class=\"line\">Retype <span class=\"literal\">new</span> password:</span><br><span class=\"line\">passwd: password updated successfully</span><br><span class=\"line\">Installation successful!</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"VScode-wsl\">VScode+wsl</h2>\n<h3 id=\"Terminal\">Terminal</h3>\n<ul>\n<li>\n<p>网上大多数人推荐<code>Windows Terminal</code>,我觉得也不错,不过没用,直接用的<code>VScode</code></p>\n</li>\n<li>\n<p>如图,点<code>选择默认shell</code>里面就可以选择<code>wsl</code>了</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPXRS.png\" alt=\"20210201165532\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"Remote-开发\">Remote 开发</h3>\n<ul>\n<li>\n<p>wsl 相当于在内网开了一台电脑,会有一个<code>内网ip</code></p>\n</li>\n<li>\n<p>我们不需要获取这个 IP,直接在 VScode 里安装<code>Remote - WSL</code>这个插件</p>\n</li>\n<li>\n<p>甚至都不需要配置,直接点左下角打开就行了</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAtIq.png\" alt=\"20210201173024\" />\n</li>\n<li>\n<p>当然,如果不嫌麻烦拿 ssh 连接 wsl 也可以,需要在 wsl 系统内配置静态 ip,但是很多功能性上不如上面那个插件.</p>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"地址映射\">地址映射</h2>\n<ul>\n<li>\n<p>安装 wsl 之后就可以通过<code>\\\\wsl$</code>访问到自己的虚拟机</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4XTS.png\" alt=\"20210201173448\" />\n</li>\n<li>\n<p>映射</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSOhE.png\" alt=\"20210201174422\" />\n</li>\n<li>\n<p>映射之后出现新盘符</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAEkm.png\" alt=\"20210201174646\" />\n</li>\n<li>\n<p>有个奇妙的事是<code>mnt/</code>目录下会反过来映射你的所有本地盘符</p>\n<ul>\n<li>\n<p>看上面那个图,我有四个盘符,然后 mnt 目录下就有<code>c,d,e,f</code>四个文件夹</p>\n</li>\n<li>\n<p>这几个映射文件夹在 Windows 文件管理器无法打开,但是在终端里可以进入</p>\n</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLfvE.png\" alt=\"20210201174957\" />\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"IDEA-wsl\">IDEA+wsl</h2>\n<h3 id=\"terminal\">terminal</h3>\n<ul>\n<li>\n<p>设置里打开 <code>File -&gt; Settings -&gt; Tools -&gt; Terminal</code></p>\n</li>\n<li>\n<p>shell path 填上</p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;cmd.exe&quot;</span> <span class=\"string\">/k</span> <span class=\"string\">&quot;wsl.exe&quot;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>如图</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLc8h.png\" alt=\"20210201221447\" />\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"后记\">后记</h2>\n<ul>\n<li>\n<p>本来开始想的是开发环境转到 wsl 内部</p>\n</li>\n<li>\n<p>折腾了大半天发现 wsl 生态并不很讨喜,只有部分特性值得使用</p>\n<ul>\n<li>\n<p>比如跑 <code>Docker</code>,<code>zsh</code> 终端,<code>SQL</code> 服务等等…</p>\n</li>\n<li>\n<p>尝试了一下,直白点说,<code>用它做开发不行!</code></p>\n</li>\n<li>\n<p>但是拿它来<code>替代虚拟机</code>倒是还可以,它的 CPU 闲时占用很低(不到 1%),内存占用半个 G,还好~</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>为啥呢? 说一下我遇到的痛点:</p>\n<ul>\n<li>\n<p>首先,<code>生态问题</code>,下图是我的开发环境,想要移植到 Linux 难度很大,肯定要放弃一些,所以我放弃移植了…</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVS9wv.png\" alt=\"20210201215547\" />\n</li>\n<li>\n<p>其次,有些小问题需要解决,比如路径问题<code>&quot;/&quot;与&quot;\\&quot;</code>不一样,还有换行符问题,会导致 git 认为你的项目全绿<code>(就是所有文件的所有行都有修改)</code>,令人窒息…</p>\n</li>\n<li>\n<p>再次,<code>性能问题</code>,这个虚拟化毕竟是虚拟,上手试了一下会有迟钝(CPU 和网络问题都有),另外,开启了虚拟后就连 Windows 多多少少也会损耗一些性能.</p>\n</li>\n<li>\n<p>其实我认为最难受的是<code>IDE适配</code>,我用的<code>IntelliJ IDEA</code>和<code>VScode</code>,它们需要<code>Git,Node.js,openjdk,maven,python</code>等等,这些并不能通过 wsl 直通,除非直接用 linux 系统把这些全装进 linux 里面.</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>不过倒也没有白安装,一些东西还是需要 wsl 的</p>\n<ul>\n<li>\n<p>比如<code>bash</code>,<code>zsh</code>,<code>docker</code>等等…</p>\n</li>\n<li>\n<p>害,算了,<code>VMware</code>真香!</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>还有一个比较上头的问题:</p>\n<ul>\n<li>开启 wsl 后因为虚拟化,window 系统开机后<code>无法自动连接 WiFi</code>,可能是个 bug,但是劝退了!</li>\n<li>经测试,开启 hyper-v 也会造成这后果.</li>\n<li>有可能只是我这么一个个例,硬件兼容性问题.</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"wsl-软件安装\">wsl 软件安装</h2>\n<h3 id=\"apt\">apt?</h3>\n<blockquote>\n<p><a href=\"https://www.sysgeek.cn/apt-vs-apt-get/\">Linux 中 apt 与 apt-get 命令的区别与解释</a></p>\n</blockquote>\n<blockquote>\n<p>简单来说就是：apt = apt-get、apt-cache 和 apt-config 中最常用命令选项的集合。</p>\n</blockquote>\n<hr>\n<h3 id=\"dpkg\">dpkg</h3>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/LEON1741/article/details/85127000\">怎么理解 ubuntu 中的软件包管理器 apt 和 dpkg</a></p>\n</blockquote>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"痛点解决\">痛点解决</h2>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/kuangdaoyizhimei/p/14175143.html#_label2_0\">本篇文章会介绍 win10 中 wsl2 的安装和使用以及遇到的常见问题比如如何固定 wsl2 地址等问题的总结。</a></p>\n</blockquote>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "操作系统",
                "windows",
                "wsl2"
            ]
        }
    ]
}