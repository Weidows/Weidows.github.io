{
    "version": "https://jsonfeed.org/version/1",
    "title": "⭐️齐下无贰⭐️ • All posts by \"树莓派\" tag",
    "description": "May all the beauty be bless.✨",
    "home_page_url": "https://weidows.github.io",
    "items": [
        {
            "id": "https://weidows.github.io/post/system/RaspberryPi/",
            "url": "https://weidows.github.io/post/system/RaspberryPi/",
            "title": "树莓派酱の吃灰日常.",
            "date_published": "2020-12-03T02:44:06.000Z",
            "content_html": "<!--\n * @Author: Weidows\n * @Date: 2020-12-03 10:44:06\n * @LastEditors: Weidows\n * @LastEditTime: 2022-02-27 16:19:11\n * @FilePath: \\Blog-private\\source\\_posts\\system\\RaspberryPi.md\n * @Description:\n-->\n<ul>\n<li><a href=\"#%E6%97%A0%E5%B1%8F%E5%B9%95%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97\">无屏幕操作指南</a></li>\n<li><a href=\"#ssh-%E8%BF%9E%E6%8E%A5\">SSH 连接</a></li>\n<li><a href=\"#%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81\">设置密码</a></li>\n<li><a href=\"#%E6%A0%91%E8%8E%93%E6%B4%BE%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE\">树莓派系统设置</a></li>\n<li><a href=\"#vnc-%E8%BF%9E%E6%8E%A5\">VNC 连接</a></li>\n<li><a href=\"#screenfetch\">Screenfetch</a></li>\n<li><a href=\"#%E5%BD%A9%E8%89%B2%E7%81%AF%E5%B8%A6\">彩色灯带</a>\n<ul>\n<li><a href=\"#%E7%A1%AC%E4%BB%B6%E8%BF%9E%E6%8E%A5\">硬件连接</a></li>\n<li><a href=\"#%E5%AE%89%E8%A3%85%E5%B7%A5%E5%85%B7%E9%93%BE\">安装工具链</a></li>\n<li><a href=\"#%E5%AE%89%E8%A3%85%E9%A9%B1%E5%8A%A8\">安装驱动</a></li>\n<li><a href=\"#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\">修改配置文件</a></li>\n<li><a href=\"#%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8C\">测试运行</a></li>\n<li><a href=\"#%E5%A2%9E%E5%BC%BA-%E9%9F%B3%E4%B9%90%E9%A2%91%E8%B0%B1\">增强 - 音乐频谱</a>\n<ul>\n<li><a href=\"#%E8%A3%85%E7%8E%AF%E5%A2%83\">装环境</a></li>\n<li><a href=\"#%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8C-1\">测试运行</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%81%AF%E5%B8%A6%E6%A3%80%E6%B5%8B\">灯带检测</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%8A%B1%E6%A0%B7%E7%8E%A9%E6%B3%95\">花样玩法</a></li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"无屏幕操作指南\">无屏幕操作指南</h2>\n<ul>\n<li>\n<p>刚到手的树莓派裸机没屏幕和 Mini-HDMI 线, 用 ssh 连接.</p>\n</li>\n<li>\n<p>首先, 用手机或者电脑开热点</p>\n<ul>\n<li>(注意 电脑的 5G 频段的可能无法连接)</li>\n<li>我的树莓派 4B-4G 版这种方法连不上 电脑的 5G 频段的 WiFi, 但是手机的热点可以.</li>\n</ul>\n</li>\n<li>\n<p>然后在桌面新建文件夹 <code> 树莓派</code>, 存放今后需要的数据文件.</p>\n<ul>\n<li>新建文件命名为<code>ssh</code>, 注意它没有后缀名和文件数据.</li>\n<li>新建文件命名为 <code>wpa_supplicant.conf</code> , 文件数据如下:</li>\n</ul>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">country</span>=GB</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attribute\">ctrl_interface</span>=DIR=/var/run/wpa_supplicant <span class=\"attribute\">GROUP</span>=netdev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attribute\">update_config</span>=1</span><br><span class=\"line\"></span><br><span class=\"line\">network=&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attribute\">ssid</span>=<span class=\"string\">&quot; 你的 Wifi 名称，注意大小写 &quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attribute\">psk</span>=<span class=\"string\">&quot; 你的 Wifi 密码 &quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Programming-Configuration/tree/master/raspberryPi/boot\">文件链接</a></p>\n</blockquote>\n<ul>\n<li>预览</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAZaM.png\" alt=\"20201203110651\" />\n</li>\n<li>\n<p>用读卡器把树莓派系统 TF 卡插进电脑, 把这两个文件复制进内存卡里名叫 <code>boot</code> 的盘符根目录里.</p>\n</li>\n<li>\n<p>开鸡, 等会应该就会发现电脑或者手机连接上了, 如下:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4wUh.png\" alt=\"20201203110842\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVEkEg.png\" alt=\"Screenshot20201203112505\" width=\"50%\" />\n</li>\n<li>\n<p>然后就可以用 ssh 连接这个 IP 地址了.</p>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"SSH- 连接\">SSH 连接</h2>\n<ul>\n<li>\n<p>用 ssh 软件连接, 我用的是 <code>FinalShell</code>与<code>VScode</code></p>\n</li>\n<li>\n<p>连接三要素是<code>IP 地址 + 用户名 + 密码</code></p>\n</li>\n<li>\n<p>树莓派系统默认账号是 <code>pi</code>，密码是 <code>raspberry</code></p>\n</li>\n</ul>\n<blockquote>\n<p>可参照 <a href=\"../../experience/SSH#%E8%87%AA%E5%8A%A8%E6%8C%A1\">✨SSH 远程连接.</a></p>\n</blockquote>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"设置密码\">设置密码</h2>\n<ul>\n<li>\n<p>连接成功后设置 root 账户密码</p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">sudo passwd root</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>之后 <code>su root(切换到 root 用户)</code> 就需要密码验证了.</p>\n</li>\n<li>\n<p>解锁用户密码设置</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo passwd <span class=\"comment\">--unlock root</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"树莓派系统设置\">树莓派系统设置</h2>\n<ul>\n<li>(可在 ssh 中显示)<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo raspi-config</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"VNC- 连接\">VNC 连接</h2>\n<ul>\n<li>没屏幕或者没 Mini-HDMI 线时最佳方案.</li>\n<li>首先 <a href=\"https://www.realvnc.com/en/connect/download/viewer\"> 下载 VNC 软件</a></li>\n<li>安装后打开搜索树莓派的内网 ip, 输入用户名连接<br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLgiQ.png\" alt=\"20201204103758\" /><br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4eUC.png\" alt=\"20201204103843\" /></li>\n<li>OK.</li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Screenfetch\">Screenfetch</h2>\n<ul>\n<li>显示系统、主题信息<figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt <span class=\"keyword\">install </span><span class=\"keyword\">screenfetch</span></span><br><span class=\"line\"><span class=\"keyword\"></span><span class=\"keyword\">screenfetch</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>这里不用 Neofetch 是因为树莓派 Debian8 系统的 repo 地址需要更新, 安装还需要其他操作, 怪麻烦~</p>\n</blockquote>\n</li>\n<li>显示 Linux 系统及版本信息, 如下:<br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSdqY.png\" alt=\"20201205143342\" /><br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAC9X.png\" alt=\"20201203115807\" /></li>\n</ul>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"彩色灯带\">彩色灯带</h2>\n<h3 id=\"硬件连接\">硬件连接</h3>\n<p>本人用的 派 4B, WS2812B 型号灯带, 分三根线(颜色可能并不一致, 红黑绿白)</p>\n<p>有能力的话可以改成杜邦母口, 我没有, 直接拿小刀豁开绝缘皮插的, 也行</p>\n<ul>\n<li>\n<p>这里只是做的临时序号,GPIO 并不是这么排的,<code>此处只用第一排</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_____________________</span><br><span class=\"line\">| 1 2 3 4 5 6 7 ....</span><br><span class=\"line\">| 1 2 3 4 5 6 7 ....</span><br><span class=\"line\">|</span><br><span class=\"line\">|        CPU</span><br><span class=\"line\">|</span><br><span class=\"line\">_____________________</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>接线</p>\n<p>一般都有红线,+5V, 接 1</p>\n<p>中间的线是信号线, 接 6</p>\n<p>另一根是 GND, 接 3</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"安装工具链\">安装工具链</h3>\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt -y <span class=\"keyword\">install </span><span class=\"keyword\">scons </span><span class=\"keyword\">swig</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"安装驱动\">安装驱动</h3>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">sudo</span> pip<span class=\"number\">3</span> install rpi_ws<span class=\"number\">281</span>x</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>很有可能并不能生效 (ModuleNotFoundError: No module named ‘rpi_ws281x’), 需要下载编译源码</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone http<span class=\"variable\">s:</span>//github.<span class=\"keyword\">com</span>/jgarff/rpi_ws281x.git</span><br><span class=\"line\"><span class=\"keyword\">cd</span> rpi_ws281x</span><br><span class=\"line\">scons</span><br><span class=\"line\"><span class=\"keyword\">cd</span> ./<span class=\"keyword\">python</span>/</span><br><span class=\"line\">sudo <span class=\"keyword\">python3</span> ./setup.<span class=\"keyword\">py</span> install</span><br></pre></td></tr></table></figure>\n<hr>\n<ul>\n<li>\n<p>上面不要这样写, 会报错 : <s>sudo python ./python/setup.py install</s></p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">running install</span><br><span class=\"line\">running bdist_egg</span><br><span class=\"line\">running egg_info</span><br><span class=\"line\">creating rpi_ws281x.egg-info</span><br><span class=\"line\">writing rpi_ws281x.egg-info/PKG-INFO</span><br><span class=\"line\">writing top-level names <span class=\"keyword\">to</span> rpi_ws281x.egg-info/top_level.txt</span><br><span class=\"line\">writing dependency_links <span class=\"keyword\">to</span> rpi_ws281x.egg-info/dependency_links.txt</span><br><span class=\"line\">writing manifest <span class=\"keyword\">file</span> <span class=\"string\">&#x27;rpi_ws281x.egg-info/SOURCES.txt&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">file</span> neopixel.<span class=\"keyword\">py</span> (<span class=\"keyword\">for</span> module neopixel) not found</span><br><span class=\"line\">reading manifest <span class=\"keyword\">file</span> <span class=\"string\">&#x27;rpi_ws281x.egg-info/SOURCES.txt&#x27;</span></span><br><span class=\"line\">writing manifest <span class=\"keyword\">file</span> <span class=\"string\">&#x27;rpi_ws281x.egg-info/SOURCES.txt&#x27;</span></span><br><span class=\"line\">installing library code <span class=\"keyword\">to</span> build/bdist.linux-armv7l/egg</span><br><span class=\"line\">running install_lib</span><br><span class=\"line\">running build_py</span><br><span class=\"line\"><span class=\"keyword\">file</span> neopixel.<span class=\"keyword\">py</span> (<span class=\"keyword\">for</span> module neopixel) not found</span><br><span class=\"line\"><span class=\"keyword\">file</span> neopixel.<span class=\"keyword\">py</span> (<span class=\"keyword\">for</span> module neopixel) not found</span><br><span class=\"line\">running build_ext</span><br><span class=\"line\">building <span class=\"string\">&#x27;_rpi_ws281x&#x27;</span> extension</span><br><span class=\"line\">swigging rpi_ws281x.i <span class=\"keyword\">to</span> rpi_ws281x_wrap.<span class=\"keyword\">c</span></span><br><span class=\"line\">swig -<span class=\"keyword\">python</span> -<span class=\"keyword\">o</span> rpi_ws281x_wrap.<span class=\"keyword\">c</span> rpi_ws281x.i</span><br><span class=\"line\">Unable <span class=\"keyword\">to</span> <span class=\"keyword\">find</span> <span class=\"keyword\">file</span> <span class=\"string\">&#x27;rpi_ws281x.i&#x27;</span>.</span><br><span class=\"line\">error: <span class=\"keyword\">command</span> <span class=\"string\">&#x27;swig&#x27;</span> failed with <span class=\"keyword\">exit</span> status <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"修改配置文件\">修改配置文件</h3>\n<ul>\n<li>\n<p>用 nano/vim 或者 Kate 打开修改</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo nano .<span class=\"regexp\">/examples/</span>strandtest.py</span><br></pre></td></tr></table></figure>\n<p>需要改两处:</p>\n<ol>\n<li>依赖 import 处添加</li>\n</ol>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> neopixel <span class=\"keyword\">import</span> *</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>LED 灯珠数(根据灯带实际数量)</li>\n</ol>\n<hr>\n</li>\n<li>\n<p>把这个文件复制出来 (不然不能运行)</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo cp .<span class=\"regexp\">/examples/</span>strandtest.py .</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"测试运行\">测试运行</h3>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"keyword\">python3</span> ./strandtest.<span class=\"keyword\">py</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>在公司第一次跑起来的样子</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV3c6Y.png\" alt=\"1632587136736\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"增强 - 音乐频谱\">增强 - 音乐频谱</h3>\n<p>首先搞一下硬件: 树莓派没有板载输入声卡,<code>需要 USB 免驱声卡 + 3.5mm 有线可录音耳机</code> (调查了一番没有替代方案)</p>\n<p>可以去买一个拓展坞, 有的会附带 (当时我都缺, 正好可以一刀切)</p>\n<h4 id=\"装环境\">装环境</h4>\n<figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-<span class=\"built_in\">get</span> install portaudio19-<span class=\"built_in\">dev</span> libatlas-base-<span class=\"built_in\">dev</span></span><br><span class=\"line\"><span class=\"comment\">// 一定注意是 pip3 安装! 不是 pip; 运行时也必须是 python3</span></span><br><span class=\"line\">sudo pip3 install numpy scipy pyqtgraph pyaudio</span><br></pre></td></tr></table></figure>\n<h4 id=\"测试运行 -2\">测试运行</h4>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https:<span class=\"regexp\">//gi</span>thub.com<span class=\"regexp\">/scottlawsonbc/</span>audio-reactive-led-strip.git</span><br><span class=\"line\">sudo python3 audio-reactive-led-strip<span class=\"regexp\">/python/</span>visualization.py</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"灯带检测\">灯带检测</h3>\n<p>灯带是否损坏可以一头接上 +5V + GND, 在另一头短接试试</p>\n<p>如果树莓派重启, 则说明灯带电源没问题, 要是不能亮的话就是信号线有问题或者电压不足</p>\n<p><a><img src=\"https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"花样玩法\">花样玩法</h2>\n<ol start=\"0\">\n<li>可以参考一下, 防止吃灰</li>\n<li>声控可视化乐谱</li>\n<li>宝塔 Linux</li>\n<li>旁路由器</li>\n<li>作为双屏驱动器(需要一块触控屏幕)</li>\n<li>硬件: 无线键盘(鼠标不用了)\\ 摄像头(或加指纹识别)\\ 语音识别(+AI)</li>\n<li>个人网站搭建</li>\n<li>虚拟机 / 远程 docker</li>\n<li>尝试多系统</li>\n<li>OpenWrt</li>\n<li>当梯子 NAT</li>\n<li>文件服务器</li>\n<li>内网穿透</li>\n</ol>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "服务器",
                "树莓派"
            ]
        }
    ]
}