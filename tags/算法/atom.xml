<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://weidows.github.io</id>
    <title>⭐️齐下无贰⭐️ • Posts by &#34;算法&#34; tag</title>
    <link href="https://weidows.github.io" />
    <updated>2022-02-22T11:49:20.000Z</updated>
    <category term="java" />
    <category term="javadoc" />
    <category term="编码" />
    <category term="vscode" />
    <category term="maven" />
    <category term="对象" />
    <category term="设计模式" />
    <category term="jvm" />
    <category term="lambda" />
    <category term="备忘录" />
    <category term="api" />
    <category term="推荐" />
    <category term="浏览器" />
    <category term="扩展" />
    <category term="ffmpeg" />
    <category term="算法" />
    <category term="ps" />
    <category term="设计" />
    <category term="摄影" />
    <category term="latex" />
    <category term="php" />
    <category term="website" />
    <category term="ssh" />
    <category term="linux" />
    <category term="regex" />
    <category term="yaml" />
    <category term="音乐" />
    <category term="哲学" />
    <category term="生活" />
    <category term="健身" />
    <category term="面试" />
    <category term="笔记" />
    <category term="english" />
    <category term="idea" />
    <category term="html" />
    <category term="css" />
    <category term="javascript" />
    <category term="成长路线" />
    <category term="deprecated" />
    <category term="font" />
    <category term="vr" />
    <category term="网课" />
    <category term="manjaro" />
    <category term="计算机系统" />
    <category term="服务器" />
    <category term="虚拟机" />
    <category term="树莓派" />
    <category term="windows" />
    <category term="docker" />
    <category term="多线程" />
    <category term="进程" />
    <category term="cpu" />
    <category term="scoop" />
    <category term="git" />
    <category term="python" />
    <category term="node" />
    <category term="ubuntu" />
    <category term="wsl2" />
    <category term="环境变量" />
    <category term="aria2" />
    <category term="工具" />
    <category term="pycharm" />
    <category term="goland" />
    <category term="图床" />
    <category term="爬虫" />
    <category term="sm.ms" />
    <category term="package" />
    <category term="tomcat" />
    <category term="mybatis" />
    <category term="map" />
    <category term="crud" />
    <category term="日志" />
    <category term="分页" />
    <category term="数据库" />
    <category term="注解" />
    <category term="mysql" />
    <category term="jdbc" />
    <category term="sql" />
    <category term="前端" />
    <category term="json" />
    <category term="javaweb" />
    <category term="servlet" />
    <category term="cookie" />
    <category term="session" />
    <category term="jsp" />
    <category term="filter" />
    <category term="架构" />
    <category term="反射" />
    <category term="cors" />
    <category term="大前端" />
    <category term="jquery" />
    <category term="npm" />
    <category term="yarn" />
    <category term="vue" />
    <category term="opengl" />
    <category term="c" />
    <category term="conan" />
    <category term="理论知识" />
    <category term="通信" />
    <category term="音频" />
    <category term="傅里叶变换" />
    <category term="极化码" />
    <category term="信息论" />
    <category term="shell" />
    <category term="powershell" />
    <category term="宝塔面板" />
    <category term="搞笑" />
    <category term="高能" />
    <category term="快捷键" />
    <category term="cmake" />
    <category term="区块链" />
    <category term="golang" />
    <category term="markdown" />
    <category term="processing" />
    <category term="anaconda" />
    <category term="hexo" />
    <category term="github" />
    <category term="gitee" />
    <category term="action" />
    <category term="branch" />
    <category term="release" />
    <category term="pages" />
    <category term="copilot" />
    <category term="插件" />
    <category term="emmet" />
    <category term="美化" />
    <category term="snippet" />
    <category term="seo" />
    <category term="node.js" />
    <category term="butterfly" />
    <category term="pug" />
    <category term="styl" />
    <category term="pjax" />
    <category term="优化" />
    <category term="魔改" />
    <entry>
        <id>https://weidows.github.io/post/Web/get-resources/</id>
        <title>🌏媒体资源加密 -and- 解密获取</title>
        <link rel="alternate" href="https://weidows.github.io/post/Web/get-resources/"/>
        <content type="html">&lt;h1&gt;媒体资源加密 -and- 解密获取&lt;/h1&gt;
&lt;!--
 * @?: *********************************************************************
 * @Author: Weidows
 * @LastEditors: Weidows
 * @LastEditTime: 2022-02-24 13:26:35
 * @FilePath: \Blog-private\source\_posts\Web\get-resources.md
 * @Description:
 * @!: *********************************************************************
--&gt;&lt;blockquote class=&#34;pullquote mindmap mindmap-md&#34;&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#%E5%AA%92%E4%BD%93%E8%B5%84%E6%BA%90%E5%8A%A0%E5%AF%86-and-%E8%A7%A3%E5%AF%86%E8%8E%B7%E5%8F%96&#34;&gt;媒体资源加密 -and- 解密获取&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#ffmpeg-hls-aes_128&#34;&gt;FFmpeg-HLS-AES_128&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#%E5%88%87%E7%89%87&#34;&gt;切片&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#%E5%8A%A0%E5%AF%86&#34;&gt;加密&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#%E8%8E%B7%E5%8F%96&#34;&gt;获取&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#%E8%A7%86%E9%A2%91&#34;&gt;视频&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#%E5%9B%BE%E7%89%87&#34;&gt;图片&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#%E6%89%93%E5%8C%85%E5%B8%A6%E8%B5%B0&#34;&gt;打包带走&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#%E6%A2%A6%E6%83%B3%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD%E5%99%A8&#34;&gt;梦想资源下载器&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#%E7%BD%91%E9%A1%B5%E5%8F%B3%E9%94%AE&#34;&gt;网页右键&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#%E5%8F%82%E7%85%A7&#34;&gt;参照&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;各类平台网页中的视频通常会被 &lt;code&gt;加密处理&lt;/code&gt; 以防止别人拿走; 防盗技术还是有很多种的:&lt;sup id=&#39;cite_ref-3&#39;&gt;&lt;a href=&#34;#cite_note-3&#34;&gt;[3]&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;FFmpeg-HLS-AES_128 加密&lt;/li&gt;
&lt;li&gt;验证用户身份再给链接(session,cookie)&lt;/li&gt;
&lt;li&gt;视频加水印&lt;/li&gt;
&lt;li&gt;限制跨域访问&lt;/li&gt;
&lt;li&gt;…etc&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面只摸一下技术层面的 &lt;code&gt;1.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png&#34; alt=&#34;分割线&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;FFmpeg-HLS-AES-128&#34;&gt;FFmpeg-HLS-AES_128&lt;/h2&gt;
&lt;p&gt;浅入深出, 别急慢慢吃… 推荐看一下这个库&lt;sup id=&#39;cite_ref-2&#39;&gt;&lt;a href=&#34;#cite_note-2&#34;&gt;[2]&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;h3 id=&#34;切片&#34;&gt;切片&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;切片的方式比较简单, 这里我们准备好一个 &lt;code&gt;demo.mp4&lt;/code&gt;, 丢给 FFmpeg 下面的命令&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;ffmpeg -i demo.mp4 -codec copy -f segment -segment_list index.m3u8 -segment_time 30 切片_%d.ts&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;执行完会出来下面这些东西 (绿色名字标记的)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://api.onedrive.com/v1.0/shares/s!AlhRaqfosSZYi3FMEMHIj6E24jGg/root/content&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;上面命令中 &lt;code&gt;index.m3u8&lt;/code&gt; 这个文件是切片的索引文件, 指明了 ts 文件的先后顺序, 时长, 版本和加密等信息&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;TS: MPEG2-Transport Stream, 高清相机拍摄视频的封装格式; 特点就是要求从视频流的任一片段开始都是可以独立解码的&lt;/li&gt;
&lt;li&gt;m3u8: HTTP Live Streaming（HLS） 协议格式的基础,Unicode 版本的 M3U，此文件用 UTF-8 编码&lt;sup id=&#39;cite_ref-01&#39;&gt;&lt;a href=&#34;#cite_note-01&#34;&gt;[1]&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;#EXTM3U&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#EXT-X-VERSION:3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#EXT-X-MEDIA-SEQUENCE:0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#EXT-X-ALLOW-CACHE:YES&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#EXT-X-TARGETDURATION:32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#EXTINF:30.720000,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;切片_0.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#EXTINF:29.280000,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;切片_1.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#EXTINF:31.880000,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;切片_2.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#EXTINF:29.040000,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;切片_3.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#EXTINF:29.320000,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;切片_4.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#EXTINF:6.280000,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;切片_5.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#EXT-X-ENDLIST&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;切片可以让用户无法 &lt;code&gt; 直接通过链接 &lt;/code&gt; 在浏览器获取完整的 mp4 视频&lt;/p&gt;
&lt;p&gt;随后插件市场出现了一些插件, 可以通过 .m3u8 获取并合并.ts 间接获取 .MP4&lt;/p&gt;
&lt;p&gt;于是为了反破解出现了 &lt;code&gt;某些花活 &lt;/code&gt; 和 &lt;code&gt; 视频加密&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;花活:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;把 .m3u8 文件伪装成 .mp4, 可以让大部分没有伪装识别能力的爬虫找不着北&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://api.onedrive.com/v1.0/shares/s!AlhRaqfosSZYi3I0hRWBARzrYioc/root/content&#34; alt=&#34;&#34;&gt;&lt;br&gt;
比如 CoCocut&lt;br&gt;
&lt;img src=&#34;https://api.onedrive.com/v1.0/shares/s!AlhRaqfosSZYi3Uo0eTjPcPV0l6L/root/content&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;m3u8 中嵌套另一个 m3u8 (套娃)&lt;/li&gt;
&lt;li&gt;…etc&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;加密&#34;&gt;加密&lt;/h3&gt;
&lt;p&gt;&lt;a&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png&#34; alt=&#34;分割线&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;获取&#34;&gt;获取&lt;/h2&gt;
&lt;h3 id=&#34;视频&#34;&gt;视频&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;CoCocut&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;QQ 浏览器手机版 -&amp;gt; 视频解析&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;图片&#34;&gt;图片&lt;/h3&gt;
&lt;p&gt;awesome…&lt;br&gt;
方向转变: 有的网页中的原图并没有展示, 只是给出了链接&lt;/p&gt;
&lt;p&gt;所以通过插件 / 保存网页的方式没办法爬下来&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;打包带走&#34;&gt;打包带走&lt;/h3&gt;
&lt;h4 id=&#34;梦想资源下载器&#34;&gt;梦想资源下载器&lt;/h4&gt;
&lt;h4 id=&#34;网页右键&#34;&gt;网页右键&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://api.onedrive.com/v1.0/shares/s!AlhRaqfosSZYi2040yjiZvLETkkO/root/content&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png&#34; alt=&#34;分割线&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;参照 -3&#34;&gt;参照&lt;/h2&gt;
&lt;p&gt;&lt;a name=&#39;cite_note-01&#39; href=&#39;#cite_ref-01&#39;&gt;[1]&lt;/a&gt;: &lt;a href=&#34;https://blog.csdn.net/beyond706/article/details/111772810&#34;&gt;使用 openssl m3u8 解密 EXT-X-KEY:METHOD=AES-128,URI=xxx&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a name=&#39;cite_note-2&#39; href=&#39;#cite_ref-2&#39;&gt;[2]&lt;/a&gt;: &lt;a href=&#34;https://github.com/fftt2017/hls-m3u8-sample&#34;&gt;https://github.com/fftt2017/hls-m3u8-sample&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a name=&#39;cite_note-3&#39; href=&#39;#cite_ref-3&#39;&gt;[3]&lt;/a&gt;: &lt;a href=&#34;https://zhuanlan.zhihu.com/p/32014463&#34;&gt;在线教育类网站视频加密视频安全的一些方法&lt;/a&gt;&lt;/p&gt;
&lt;script type=&#34;text&amp;#x2F;javascript&#34; src=&#34;https://unpkg.com/kity@2.0.4/dist/kity.min.js&#34;&gt;&lt;/script&gt;&lt;script type=&#34;text&amp;#x2F;javascript&#34; src=&#34;https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js&#34;&gt;&lt;/script&gt;&lt;script defer=&#34;true&#34; type=&#34;text&amp;#x2F;javascript&#34; src=&#34;https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js&#34;&gt;&lt;/script&gt;&lt;link rel=&#34;stylesheet&#34; type=&#34;text&amp;#x2F;css&#34; href=&#34;https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css&#34;&gt;</content>
        <category term="推荐" />
        <category term="浏览器" />
        <category term="扩展" />
        <category term="ffmpeg" />
        <category term="算法" />
        <updated>2022-02-22T11:49:20.000Z</updated>
    </entry>
</feed>
