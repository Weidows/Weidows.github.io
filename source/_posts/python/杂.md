---
title: ğŸ˜‘python-mess-code
password: ""
tags:
  - python
  - opengl
  - å¤šçº¿ç¨‹
  - äººå·¥æ™ºèƒ½
katex: false
comments: true
aside: true
date: 2022-04-22 16:22:34
cover: https://www.helloimg.com/images/2022/04/22/RHDLJD.png
top_img:
---

<!--
 * @?: *********************************************************************
 * @Author: Weidows
 * @LastEditors: Weidows
 * @LastEditTime: 2022-04-20 23:11:24
 * @FilePath: \Blog-private\scaffolds\post.md
 * @Description:
 * @!: *********************************************************************
-->


## basic

### static-method

python ä¸­å¹¶æ²¡æœ‰åƒæ˜¯ Java é‡Œçš„ static å…³é”®å­—,å–ä»£çš„æ˜¯ `@classmethod` å’Œ `@staticmethod`



```python
class A:

    name = 'A'

    # è‡³å°‘æœ‰ä¸€ä¸ªéšå¼å½¢å‚ (æœ¬ç±» cls å¯¹è±¡), å¯ä»¥è®¿é—®ç±»å±æ€§
    @classmethod
    def a(cls):
        print(cls.name)

    # æ— å½¢å‚, ä¹Ÿå°±æ˜¯è¯´æ‹¿ä¸åˆ°ç±»å±æ€§
    @staticmethod
    def b():
        print('b')


A.a()
A.b()
```

    A
    b
    

### multi-condition

if(a||b)å½“ a ä¸ºçœŸæ—¶ï¼Œè¿˜ä¼šå¯¹ b æ±‚å€¼å—?

> ä¸ä¼š



```python
import time


def calculate(name, t):
    print("calculating: ", name, "seconds needs: ", t)
    time.sleep(t)
    return True


if (calculate('A', 2) or calculate('B', 2)):
    print("Done")

```

    calculating:  A seconds needs:  2
    Done
    

### ä¸‹åˆ’çº¿

æ•™ç¨‹æ¥è‡ª: <sup id='cite_ref-4'>[\[4\]](#cite_note-4)</sup>

#### _



```python
# å•ä¸ª _ æŒ‡å‘æœ€åä¸€æ¬¡æ‰§è¡Œè¡¨è¾¾å¼ (ç»“æœ)
# åœ¨ python å‘½ä»¤è¡Œä¸­å¯ä»¥è·‘, åœ¨è¿™é‡Œä¸è¡Œ
# 1 + 2
# _

# æ ¼å¼åŒ–æ•°å­—
print(114_514_1919_810)

# ç±»ä¼¼ golang çš„éå†
for _ in range(10):
    print(_)
```

    1145141919810
    0
    1
    2
    3
    4
    5
    6
    7
    8
    9
    

#### \_\_xxx__

é­”æœ¯æ–¹æ³• / é­”æ³•å‡½æ•°, ä¸€èˆ¬ä½œä¸ºå†…ç½®æ–¹æ³•


```python
import random

random.__name__
```




    'random'



#### _xxx

ç§æœ‰åŒ–, ä»…æä¾›æ¨¡å—å†…éƒ¨è°ƒç”¨, ç±»ä¼¼Javaé‡Œçš„ protect


#### __xxx

ä¹Ÿæ˜¯ç§æœ‰åŒ–, ç±»ä¼¼ Java å†…çš„ private, æ— æ³•ç›´æ¥è®¿é—®æ­¤å˜é‡/æ–¹æ³•, ä½†å¯ä»¥é—´æ¥è®¿é—®



```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.__age = age

    def get_age(self):
        return self.__age


me = Person('å¼ ä¸‰', 18)

print(me.name)

# print(me.age)
# print(me.__age)
# ä¸Šé¢ä¸¤ç§éƒ½ä¼šæŠ¥é”™, __age -> _Person__age
print(me._Person__age)
print(me.get_age())

print(dir(me))
```

    å¼ ä¸‰
    18
    18
    ['_Person__age', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'get_age', 'name']
    

#### \_xxx\_\_xxx

ä»ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹åˆ°, èƒ½é€šè¿‡è¿™ä¸ªè®¿é—®ç±»ç§æœ‰åŒ–å±æ€§



```python
you = Person('æå››', 20)
you._Person__age += 1
print(you.get_age())
```

    21
    

#### xxx_

ç±»ä¼¼è½¬ä¹‰, è®©æŸäº›å…³é”®è¯æ— æ•ˆåŒ–


```python
max_ = max(1, 2, 3)
print(max_)
```

    3
    

### é—­åŒ…

å¬èµ·æ¥æŒºæŠ½è±¡çš„, ä¸‹é¢è¿™ä¸ªä¾‹å­å®ç°çš„é™æ€ä»£ç†çš„åŠŸèƒ½, åªä¸è¿‡è¿™ç§é€šè¿‡å‡½æ•°åŒ…è£¹å‡½æ•°å¹¶ä¸”å›ä¼ å‡½æ•°çš„å½¢å¼ç§°ä¸ºé—­åŒ…


```python
def func_1(func):
    def wrapper():
        print(f'{func} running')
        func()
        print(f'{func} finished')

    return wrapper


my_func = func_1(lambda: print('hello'))
my_func()
```

    <function <lambda> at 0x000002C6132A50D0> running
    hello
    <function <lambda> at 0x000002C6132A50D0> finished
    


```python
def login_user(username, password):
    print('login success')


def check(func):
    # è¿™é‡Œçš„ argv å¯ä»¥ç›´æ¥è·å– func çš„
    def wrapper(username, password):
        if username == 'user' and password == 'password':
            return func(username, password)
        else:
            print('login failed')

    return wrapper


login_user = check(login_user)
login_user('user', 'password')
```

    login success
    

### è£…é¥°å™¨

decorator-@, ä»Javaé‡Œå«æ³¨è§£, ä¸Šé¢çš„ä¾‹å­å¯å†™æˆä¸‹é¢è¿™æ ·


```python
@check
def login_user(username, password):
    print('login success')


def check(func):
    # è¿™é‡Œçš„ argv å¯ä»¥ç›´æ¥è·å– func çš„
    def wrapper(username, password):
        if username == 'user' and password == 'password':
            return func(username, password)
        else:
            print('login failed')

    return wrapper


login_user('user', 'password')
```

    login success
    

## modules

### base64



```python
import base64

username = 'Weidows'
password = '123456'

encode = base64.b64encode((username + ":" + password).encode())
# Basic V2VpZG93czoxMjM0NTY==
headers = {"Authorization": "Basic " + encode.decode()}

print(headers)
```

    {'Authorization': 'Basic V2VpZG93czoxMjM0NTY='}
    

### å¤šçº¿ç¨‹-è¿›ç¨‹

> Python å¤šçº¿ç¨‹ä¸èƒ½åˆ©ç”¨ CPU å¤šæ ¸ä¼˜åŠ¿ï¼ŒIO å¯†é›†å‹å¯ç”¨å¤šçº¿ç¨‹ï¼ŒCPU å¯†é›†å‹é€‚åˆç”¨å¤šè¿›ç¨‹ <sup id='cite_ref-2'>[\[2\]](#cite_note-2)</sup>

ä¹Ÿå°±æ˜¯è¯´åªæœ‰ IO å¯†é›†å‹ä»»åŠ¡é€‚ç”¨å¤šçº¿ç¨‹,å…¶ä»–æƒ…å†µ: `å¤šè¿›ç¨‹ > ä¸ç”¨ > å¤šçº¿ç¨‹`, API åŒºåˆ«å¦‚ä¸‹:<sup id='cite_ref-3'>[\[3\]](#cite_note-3)</sup>

![R9zQZh.png](https://www.helloimg.com/images/2022/05/02/R9zQZh.png)

è™½ç„¶ä½†æ˜¯,å¾ˆå¤šæƒ…å†µä¸‹æ¶‰åŠåˆ°èµ„æºå…±äº«, å¤šè¿›ç¨‹å¤„ç†èµ·æ¥æ¯”è¾ƒéº»çƒ¦,è¿˜æ˜¯å¤šçº¿ç¨‹èˆ’æœ.



```python
from concurrent.futures import ThreadPoolExecutor
import threading
import multiprocessing
import time

multi_num = multiprocessing.cpu_count() * 2

def counter(num):
    time.sleep(num)
    print(threading.currentThread().name, num, end='\t')


if __name__ == '__main__':
    with ThreadPoolExecutor(max_workers=multi_num) as thread_pool:
        start = time.time()
        thread_pool.map(counter, range(10))

        # ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œå†è·³å› main
        thread_pool.shutdown(wait=True)
        print("å¤šçº¿ç¨‹: ", time.time() - start)
```

    ThreadPoolExecutor-0_0 0	ThreadPoolExecutor-0_1 1	ThreadPoolExecutor-0_0 2	ThreadPoolExecutor-0_2 3	ThreadPoolExecutor-0_3 4	ThreadPoolExecutor-0_4 5	ThreadPoolExecutor-0_5 6	ThreadPoolExecutor-0_6 7	ThreadPoolExecutor-0_7 8	ThreadPoolExecutor-0_8 9	å¤šçº¿ç¨‹:  9.009207010269165
    

## opengl

### å½©è‰²ä¸‰è§’å½¢



```python
# -------------------------------------------
# quidam_01.py ä¸‰ç»´ç©ºé—´çš„ä¸–ç•Œåæ ‡ç³»å’Œä¸‰è§’å½¢
# -------------------------------------------

from OpenGL.GL import *
from OpenGL.GLUT import *


def draw():
    # ---------------------------------------------------------------
    glBegin(GL_LINES)  # å¼€å§‹ç»˜åˆ¶çº¿æ®µï¼ˆä¸–ç•Œåæ ‡ç³»ï¼‰

    # ä»¥çº¢è‰²ç»˜åˆ¶xè½´
    glColor4f(1.0, 0.0, 0.0, 1.0)  # è®¾ç½®å½“å‰é¢œè‰²ä¸ºçº¢è‰²ä¸é€æ˜
    glVertex3f(-0.8, 0.0, 0.0)  # è®¾ç½®xè½´é¡¶ç‚¹ï¼ˆxè½´è´Ÿæ–¹å‘ï¼‰
    glVertex3f(0.8, 0.0, 0.0)  # è®¾ç½®xè½´é¡¶ç‚¹ï¼ˆxè½´æ­£æ–¹å‘ï¼‰

    # ä»¥ç»¿è‰²ç»˜åˆ¶yè½´
    glColor4f(0.0, 1.0, 0.0, 1.0)  # è®¾ç½®å½“å‰é¢œè‰²ä¸ºç»¿è‰²ä¸é€æ˜
    glVertex3f(0.0, -0.8, 0.0)  # è®¾ç½®yè½´é¡¶ç‚¹ï¼ˆyè½´è´Ÿæ–¹å‘ï¼‰
    glVertex3f(0.0, 0.8, 0.0)  # è®¾ç½®yè½´é¡¶ç‚¹ï¼ˆyè½´æ­£æ–¹å‘ï¼‰

    # ä»¥è“è‰²ç»˜åˆ¶zè½´
    glColor4f(0.0, 0.0, 1.0, 1.0)  # è®¾ç½®å½“å‰é¢œè‰²ä¸ºè“è‰²ä¸é€æ˜
    glVertex3f(0.0, 0.0, -0.8)  # è®¾ç½®zè½´é¡¶ç‚¹ï¼ˆzè½´è´Ÿæ–¹å‘ï¼‰
    glVertex3f(0.0, 0.0, 0.8)  # è®¾ç½®zè½´é¡¶ç‚¹ï¼ˆzè½´æ­£æ–¹å‘ï¼‰

    glEnd()  # ç»“æŸç»˜åˆ¶çº¿æ®µ

    # ---------------------------------------------------------------
    glBegin(GL_TRIANGLES)  # å¼€å§‹ç»˜åˆ¶ä¸‰è§’å½¢ï¼ˆzè½´è´ŸåŠåŒºï¼‰

    glColor4f(1.0, 0.0, 0.0, 1.0)  # è®¾ç½®å½“å‰é¢œè‰²ä¸ºçº¢è‰²ä¸é€æ˜
    glVertex3f(-0.5, -0.366, -0.5)  # è®¾ç½®ä¸‰è§’å½¢é¡¶ç‚¹
    glColor4f(0.0, 1.0, 0.0, 1.0)  # è®¾ç½®å½“å‰é¢œè‰²ä¸ºç»¿è‰²ä¸é€æ˜
    glVertex3f(0.5, -0.366, -0.5)  # è®¾ç½®ä¸‰è§’å½¢é¡¶ç‚¹
    glColor4f(0.0, 0.0, 1.0, 1.0)  # è®¾ç½®å½“å‰é¢œè‰²ä¸ºè“è‰²ä¸é€æ˜
    glVertex3f(0.0, 0.5, -0.5)  # è®¾ç½®ä¸‰è§’å½¢é¡¶ç‚¹

    glEnd()  # ç»“æŸç»˜åˆ¶ä¸‰è§’å½¢

    # ---------------------------------------------------------------
    glFlush()  # æ¸…ç©ºç¼“å†²åŒºï¼Œå°†æŒ‡ä»¤é€å¾€ç¡¬ä»¶ç«‹å³æ‰§è¡Œ


if __name__ == "__main__":
    glutInit()  # 1. åˆå§‹åŒ–glutåº“
    glutCreateWindow('Quidam Of OpenGL')  # 2. åˆ›å»ºglutçª—å£
    glutDisplayFunc(draw)  # 3. æ³¨å†Œå›è°ƒå‡½æ•°draw()
    glutMainLoop()  # 4. è¿›å…¥glutä¸»å¾ªç¯
```

### ç‚¹çº¿æŠ›ç‰©çº¿



```python
from OpenGL.GL import *
from OpenGL.GLU import *
from OpenGL.GLUT import *
from numpy import *
import sys


def init():
    glClearColor(1.0, 1.0, 1.0, 1.0)
    gluOrtho2D(-5.0, 5.0, -5.0, 5.0)


def plotfunc():
    glClear(GL_COLOR_BUFFER_BIT)
    glColor3f(1.0, 0.2, 0.6)
    glPointSize(3.0)

    glBegin(GL_POINTS)
    for x in arange(-5.0, 5.0, 0.1):  #from -5.0 to 5.0 plus 0.1 every time
        y = x * x
        glVertex2f(x, y)
    glEnd()
    glFlush()


def main():
    glutInit(sys.argv)
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB)
    glutInitWindowPosition(50, 100)
    glutInitWindowSize(400, 400)
    glutCreateWindow("Function Plotter")
    glutDisplayFunc(plotfunc)

    init()
    glutMainLoop()


main()
```

### è½¬åŠ¨æ—¶é’Ÿ



```python
from OpenGL.GL import *
from OpenGL.GLU import *
from OpenGL.GLUT import *
import math
import time

h = 0
m = 0
s = 0


def Draw():
    PI = 3.1415926
    R = 0.5
    TR = R - 0.05
    glClear(GL_COLOR_BUFFER_BIT)
    glLineWidth(5)
    glBegin(GL_LINE_LOOP)
    for i in range(100):
        glVertex2f(R * math.cos(2 * PI / 100 * i),
                   R * math.sin(2 * PI / 100 * i))
    glEnd()
    glLineWidth(2)
    for i in range(100):
        glBegin(GL_LINES)
        glVertex2f(TR * math.sin(2 * PI / 12 * i),
                   TR * math.cos(2 * PI / 12 * i))
        glVertex2f(R * math.sin(2 * PI / 12 * i),
                   R * math.cos(2 * PI / 12 * i))
        glEnd()
    glLineWidth(1)

    h_Length = 0.2
    m_Length = 0.3
    s_Length = 0.4
    count = 60.0
    s_Angle = s / count
    count *= 60
    m_Angle = (m * 60 + s) / count
    count *= 12
    h_Angle = (h * 60 * 60 + m * 60 + s) / count
    glLineWidth(1)
    glBegin(GL_LINES)
    glVertex2f(0.0, 0.0)
    glVertex2f(s_Length * math.sin(2 * PI * s_Angle),
               s_Length * math.cos(2 * PI * s_Angle))
    glEnd()
    glLineWidth(5)
    glBegin(GL_LINES)
    glVertex2f(0.0, 0.0)
    glVertex2f(h_Length * math.sin(2 * PI * h_Angle),
               h_Length * math.cos(2 * PI * h_Angle))
    glEnd()
    glLineWidth(3)
    glBegin(GL_LINES)
    glVertex2f(0.0, 0.0)
    glVertex2f(m_Length * math.sin(2 * PI * m_Angle),
               m_Length * math.cos(2 * PI * m_Angle))
    glEnd()
    glLineWidth(1)
    glBegin(GL_POLYGON)
    for i in range(100):
        glVertex2f(0.03 * math.cos(2 * PI / 100 * i),
                   0.03 * math.sin(2 * PI / 100 * i))
    glEnd()
    glFlush()


def Update():
    global h, m, s
    t = time.localtime(time.time())
    h = int(time.strftime('%H', t))
    m = int(time.strftime('%M', t))
    s = int(time.strftime('%S', t))
    glutPostRedisplay()


glutInit()
glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA)
glutInitWindowSize(400, 400)
glutCreateWindow("My clock")
glutDisplayFunc(Draw)
glutIdleFunc(Update)
glutMainLoop()
```

### Hello-World-pyglet



```python
import pyglet

window = pyglet.window.Window()

label = pyglet.text.Label('Hello, world',
                          font_name='Times New Roman',
                          font_size=36,
                          x=window.width // 2,
                          y=window.height // 2,
                          anchor_x='center',
                          anchor_y='center')


@window.event
def on_draw():
    window.clear()
    label.draw()


pyglet.app.run()
```

### èŒ¶å£¶

#### åŠ¨æ€



```python
from OpenGL.GL import *
from OpenGL.GLU import *
from OpenGL.GLUT import *


def drawFunc():
    #æ¸…æ¥šä¹‹å‰ç”»é¢
    glClear(GL_COLOR_BUFFER_BIT)
    glRotatef(0.1, 5, 5, 0)  #(è§’åº¦,x,y,z)
    glutWireTeapot(0.5)
    #åˆ·æ–°æ˜¾ç¤º
    glFlush()


#ä½¿ç”¨glutåˆå§‹åŒ–OpenGL
glutInit()
#æ˜¾ç¤ºæ¨¡å¼:GLUT_SINGLEæ— ç¼“å†²ç›´æ¥æ˜¾ç¤º|GLUT_RGBAé‡‡ç”¨RGB(Aéalpha)
glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA)
#çª—å£ä½ç½®åŠå¤§å°-ç”Ÿæˆ
glutInitWindowPosition(0, 0)
glutInitWindowSize(400, 400)
glutCreateWindow(b"first")
#è°ƒç”¨å‡½æ•°ç»˜åˆ¶å›¾åƒ
glutDisplayFunc(drawFunc)
glutIdleFunc(drawFunc)
#ä¸»å¾ªç¯
glutMainLoop()
```

#### é™æ€



```python
from OpenGL.GL import *
from OpenGL.GLU import *
from OpenGL.GLUT import *


def drawFunc():
    glClear(GL_COLOR_BUFFER_BIT)
    # è®¾ç½®ä¸ºçº¢è‰²
    glColor3f(1.0, 0.0, 0.0)
    glutWireTeapot(0.5)
    glFlush()


glutInit()
glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA)
glutInitWindowSize(400, 400)

#å‚æ•°ä¸ºbç±»å‹è€Œä¸æ˜¯string
glutCreateWindow(b"Teapot")
glutDisplayFunc(drawFunc)
glutMainLoop()
```

## æ•°æ®åˆ†æ

### numpy

#### newaxis



```python
import numpy as np

A = np.array([[2, 0, 2, 1], [2, 0, 2, 2]])

print(A)
print("A.shape: ", A.shape)

# new ä¸€ä¸ªä¸€ç»´æ•°ç»„,ç„¶åæŠŠ A æ•´ä¸ªæ€¼è¿›å»
B = A[np.newaxis, :]
print(B)
print("B.shape: ", B.shape)

C = A[:, np.newaxis]
print(C)
print("C.shape: ", C.shape)

# æŠŠæ¯ä¸ªç¬¬äºŒç»´ç¬¬å››ä½çš„å…ƒç´ æ€¼è¿›ä¸€ä¸ªæ–°æ•°ç»„,æŠŠåŸç¬¬äºŒä½æ›¿æ¢ä¸ºæ­¤æ–°æ•°ç»„
D = A[:, np.newaxis, 3]
print(D)
print("D.shape: ", D.shape)

```

    [[2 0 2 1]
     [2 0 2 2]]
    A.shape:  (2, 4)
    [[[2 0 2 1]
      [2 0 2 2]]]
    B.shape:  (1, 2, 4)
    [[[2 0 2 1]]
    
     [[2 0 2 2]]]
    C.shape:  (2, 1, 4)
    [[1]
     [2]]
    D.shape:  (2, 1)
    

### Matplotlib

#### figure

å¯ä»¥ç”¨ figure å¯¹è¾“å‡ºçš„å›¾ç‰‡è¿›è¡Œç¼©æ”¾


```python
import matplotlib.pyplot as plt

plt.imshow(plt.imread('./_data_set/kitti_000008_pred.png'))
```




    <matplotlib.image.AxesImage at 0x22c4640aa90>




    
![png](%E6%9D%82_files/%E6%9D%82_40_1.png)
    



```python
import matplotlib.pyplot as plt

plt.figure(figsize=(25, 20))
plt.imshow(plt.imread('./_data_set/kitti_000008_pred.png'))
```




    <matplotlib.image.AxesImage at 0x22c4651a1c0>




    
![png](%E6%9D%82_files/%E6%9D%82_41_1.png)
    


<a>![åˆ†å‰²çº¿](https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png)</a>

## å€Ÿç‰©è¡¨

<a name='cite_note-1' href='#cite_ref-1'>[1]</a>: [How does numpy.newaxis work and when to use it?](https://stackoverflow.com/questions/29241056/how-does-numpy-newaxis-work-and-when-to-use-it)

<a name='cite_note-2' href='#cite_ref-2'>[2]</a>: [Python threadpoolä¸multiprocessing](https://blog.csdn.net/gzmgzm_ming/article/details/81783450)

<a name='cite_note-3' href='#cite_ref-3'>[3]</a>: [Pythonå¹¶å‘å®æˆ˜ï¼Œæ€æ ·ä½¿ç”¨å¤šè¿›ç¨‹multiprocessingåŠ é€Ÿç¨‹åºè¿è¡Œ](https://www.bilibili.com/video/BV1yp4y1679u)

<a name='cite_note-4' href='#cite_ref-4'>[4]</a>: [Python ä¸­å„ç§ä¸‹åˆ’çº¿çš„éªšæ“ä½œï¼š_ã€_xxã€xx_ã€__xxã€__xx__ã€_classname__xx](https://www.bilibili.com/video/BV1z94y1U7j9?vd_source=bc13275071d678583f4bfdd8d344efda)


