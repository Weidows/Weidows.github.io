---
title: ğŸ¥¼JavaWeb~(è‚†)æ‘¸ç´¢JSP,JavaBean
categories:
  - Java
  - Web
tags:
  - JavaWeb
  - Java
  - æœåŠ¡å™¨
  - ç¬”è®°
  - Servlet
  - JSP
date: 2021-04-06 23:45:19
cover: https://cdn.jsdelivr.net/gh/Weidows/Images/hpp/20210322091847.png
top_img:
---

<!--
 * @?: *********************************************************************
 * @Author: Weidows
 * @LastEditors: Weidows
 * @LastEditTime: 2021-05-01 00:26:52

 * @Description:
 * @!: *********************************************************************
-->

- [ç¬”è®°ä»£ç ](#ç¬”è®°ä»£ç )
- [JSP](#jsp)
  - [å®šåˆ¶é”™è¯¯é¡µé¢](#å®šåˆ¶é”™è¯¯é¡µé¢)
  - [åˆå¹¶é¡µé¢](#åˆå¹¶é¡µé¢)
  - [å†…ç½®å¯¹è±¡åŠä½œç”¨åŸŸ](#å†…ç½®å¯¹è±¡åŠä½œç”¨åŸŸ)
  - [JSP æ ‡ç­¾](#jsp-æ ‡ç­¾)
  - [JSTL è¡¨è¾¾å¼](#jstl-è¡¨è¾¾å¼)
- [JavaBean](#javabean)

# [ç¬”è®°ä»£ç ](https://github.com/Weidows/Weidows/tree/master/JavaWeb)

![åˆ†å‰²çº¿](https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png)

# JSP

## å®šåˆ¶é”™è¯¯é¡µé¢

- æ–¹æ³•ä¸€: ç›´æ¥åœ¨ jsp é¡µé¢é…ç½® errorPage

  - `errors/index.jsp`

    ```jsp
    <%@ page contentType="text/html;charset=UTF-8" language="java" %>
    <%--æ­¤å¤„å®šåˆ¶é”™è¯¯é¡µé¢æŒ‡å‘--%>
    <%@ page errorPage="errors/500.jsp" %>

    <html>
    <head>
      <title>é”™è¯¯é¡µé¢</title>
    </head>
    <body>
    <%
      int a = 1 / 0;
    %>
    </body>
    </html>
    ```

  ***

  - `errors/500.jsp`

    ```jsp
    <%@ page contentType="text/html;charset=UTF-8" language="java" %>
    <html>
    <head>
      <title>500é”™è¯¯</title>
    </head>
    <body>
    <h1>500é”™è¯¯é¡µé¢.</h1>
    </body>
    </html>
    ```

---

- æ–¹æ³•äºŒ: åœ¨ web.xml ä¸­é…ç½®

  - errors/404.jsp

    ```jsp
    <%@ page contentType="text/html;charset=UTF-8" language="java" %>
    <html>
    <head>
      <title>404é”™è¯¯</title>
    </head>
    <body>
    <h1>404é”™è¯¯é¡µé¢.</h1>
    </body>
    </html>
    ```

  ***

  - `web.xml`

    ```xml
    <!DOCTYPE web-app PUBLIC
        "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
        "http://java.sun.com/dtd/web-app_2_3.dtd" >

    <web-app>
      <display-name>Archetype Created Web Application</display-name>
      <error-page>
        <error-code>404</error-code>
        <location>/errors/404.jsp</location>
      </error-page>
      <error-page>
        <error-code>500</error-code>
        <location>/errors/500.jsp</location>
      </error-page>
    </web-app>
    ```

---

## åˆå¹¶é¡µé¢

- `common/header.jsp`

  ```jsp
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <h1>è¿™é‡Œæ˜¯header</h1>

  ```

  ***

- `common/footer.jsp`

  ```jsp
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <h1>è¿™é‡Œæ˜¯footer</h1>
  ```

  ***

- `common/index.jsp`

  ```jsp
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <html>
    <head>
      <title>æµ‹è¯•common</title>
    </head>
    <body>
      <!--
        è¿™ç§ä¼šæŠŠincludeçš„é¡µé¢å†…å®¹åˆå¹¶è¿›æœ¬é¡µé¢,æœ€åæ˜¯å±•ç¤ºä¸€ä¸ªé¡µé¢
      -->
      <%@ include file="header.jsp" %>
      <h1>ç½‘é¡µä¸»ä½“</h1>
      <%@ include file="footer.jsp" %>

      <HR />

      <!--
        jsp:includeæ ‡ç­¾,æœ¬è´¨æ˜¯å¯¼å…¥å…¶ä»–æ–‡ä»¶å†…å®¹,æœ€åæ˜¯å¤šä¸ªæ–‡ä»¶åˆä¸ºä¸€ä¸ªé¡µé¢å±•ç¤º
        (æ›´çµæ´»,å»ºè®®ç”¨è¿™ä¸ª)
          ä¸Šé¢æ–¹æ³•çš„å› ä¸ºæ˜¯åˆå¹¶,æ‰€ä»¥å¾ˆæœ‰å¯èƒ½å‡ºç°å˜é‡é‡å,å¹²æ‰°çš„é—®é¢˜
          è¿™ä¸ªæ–¹æ³•ä¸åŒæ–‡ä»¶ä¹‹é—´äº’ä¸å¹²æ‰°
      -->
      <jsp:include page="/common/header.jsp" />
      <h1>ç½‘é¡µä¸»ä½“</h1>
      <jsp:include page="/common/footer.jsp" />
    </body>
  </html>
  ```

---

## å†…ç½®å¯¹è±¡åŠä½œç”¨åŸŸ

- å†…ç½®å¯¹è±¡

  ```
  PageContext å­˜ä¸œè¥¿
  Request å­˜ä¸œè¥¿
  Response
  Session å­˜ä¸œè¥¿
  Application ã€SerlvetContextã€‘ å­˜ä¸œè¥¿
  config ã€SerlvetConfigã€‘
  out
  page ï¼Œä¸ç”¨äº†è§£
  exception
  ```

  ***

- æ“ä½œå¯¹è±¡ `demo/1.jsp`

  ```jsp
  <!--
  * @?: *********************************************************************
  * @Author: Weidows
  * @Date: 2021-04-07 16:29:42
  * @LastEditors: Weidows
  * @LastEditTime: 2021-04-07 17:29:11
  * @FilePath: \Weidows\JavaWeb\JSP\src\main\webapp\1.jsp
  * @Description:
  * @!: *********************************************************************
  * servlet 2.3é»˜è®¤ä¸æ”¯æŒELè¡¨è¾¾å¼,éœ€è¦å¼€å¯.
  -->
  <%@ page isELIgnored="false" %>
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <html>
    <head>
      <title>index4</title>
    </head>
    <body>
      <%--
        PageContext å­˜ä¸œè¥¿
        Request å­˜ä¸œè¥¿
        Response
        Session å­˜ä¸œè¥¿
        Application ã€SerlvetContextã€‘ å­˜ä¸œè¥¿
        config ã€SerlvetConfigã€‘
        out
        page ï¼Œä¸ç”¨äº†è§£
        exception
      --%>
      <%
        pageContext.setAttribute("name1", "ç§¦ç–†1å·"); // ä¿å­˜çš„æ•°æ®åªåœ¨ä¸€ä¸ªé¡µé¢ä¸­æœ‰æ•ˆ
        request.setAttribute("name2", "ç§¦ç–†2å·"); // ä¿å­˜çš„æ•°æ®åªåœ¨ä¸€æ¬¡è¯·æ±‚ä¸­æœ‰æ•ˆï¼Œè¯·æ±‚è½¬å‘ä¼šæºå¸¦è¿™ä¸ªæ•°æ®
        session.setAttribute("name3", "ç§¦ç–†3å·"); // ä¿å­˜çš„æ•°æ®åªåœ¨ä¸€æ¬¡ä¼šè¯ä¸­æœ‰æ•ˆï¼Œä»æ‰“å¼€æµè§ˆå™¨åˆ°å…³é—­æµè§ˆå™¨
        application.setAttribute("name4", "ç§¦ç–†4å·"); // ä¿å­˜çš„æ•°æ®åªåœ¨æœåŠ¡å™¨ä¸­æœ‰æ•ˆï¼Œä»æ‰“å¼€æœåŠ¡å™¨åˆ°å…³é—­æœåŠ¡å™¨

        // ä½œç”¨åŸŸä»å°åˆ°å¤§
        String name1 = (String) pageContext.findAttribute("name1");
        String name2 = (String) pageContext.findAttribute("name2");
        String name3 = (String) pageContext.findAttribute("name3");
        String name4 = (String) pageContext.findAttribute("name4");
        String name5 = (String) pageContext.findAttribute("name5"); // è¿™ä¸ªä¸å­˜åœ¨
      %>

      <%--
        ELè¡¨è¾¾å¼
        ${å†…å®¹} == <%= å†…å®¹ %>
        ç”¨ELè¡¨è¾¾å¼çš„è¯,nullå€¼ä¸ä¼šæ˜¾ç¤º,è€Œä½¿ç”¨JSPè¡¨è¾¾å¼ä¼šæ˜¾ç¤ºnullå€¼
      --%>
      <h1>å–å‡ºçš„å†…å®¹:</h1>
      <h3>${name1}</h3>
      <h3>${name2}</h3>
      <h3>${name3}</h3>
      <h3>${name4}</h3>
      <HR>
      <h3>${name5}</h3>
      <h3><%=name5%></h3>
    </body>
  </html>
  ```

  <img src="https://cdn.jsdelivr.net/gh/Weidows/Images/hpp/20210407173249.png" alt="20210407173249" />

  ***

- ä½œç”¨åŸŸ

  <img src="https://cdn.jsdelivr.net/gh/Weidows/Images/hpp/20210407175219.png" alt="20210407175219" />

---

## JSP æ ‡ç­¾

- ä¾‹å­: ä½¿ç”¨ JSP æ ‡ç­¾è½¬å‘é¡µé¢,è¯»å–å‚æ•°å¹¶æ˜¾ç¤ºå‡ºæ¥.

- `src/main/webapp/demo/JSP-label/forward.jsp`

  ```jsp
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <html>
  <head>
    <title>JSP-label</title>
  </head>
  <body>
  <%-- è½¬å‘requestæºå¸¦çš„å‚æ•°(æ³¨æ„JSPæ ‡ç­¾å†…ä¸èƒ½æœ‰æ³¨é‡Š,ä¼šæŠ¥é”™500) --%>
  <jsp:forward page="forward.jsp">
    <jsp:param name="name" value="kuangshen"/>
    <jsp:param name="age" value="12"/>
  </jsp:forward>
  </body>
  </html>
  ```

  ***

- `src/main/webapp/demo/JSP-label/forward.jsp`

  ```jsp
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <%@ page isELIgnored="false" %>

  <html>
  <head>
    <title>è½¬å‘é¡µé¢</title>
  </head>
  <body>
  <%
    pageContext.setAttribute("name", request.getParameter("name"));
    pageContext.setAttribute("age", request.getParameter("age"));

  %>
  <h3>å§“å: ${name}</h3>
  <h3>å¹´é¾„: ${age}</h3>
  </body>
  </html>
  ```

---

## JSTL è¡¨è¾¾å¼

> JSTL æ ‡ç­¾åº“çš„ä½¿ç”¨å°±æ˜¯ä¸ºäº†å¼¥è¡¥ HTML æ ‡ç­¾çš„ä¸è¶³,åŠŸèƒ½ä¸Šä¸ Java ç›¸ä¼¼.

- åˆ†ç±»

  - æ ¼å¼åŒ–æ ‡ç­¾

  - SQL æ ‡ç­¾

  - XML æ ‡ç­¾

  - JSTL å‡½æ•°

  - æ ¸å¿ƒæ ‡ç­¾ ï¼ˆæŒæ¡éƒ¨åˆ†ï¼‰

    > <img src="https://cdn.jsdelivr.net/gh/Weidows/Images/hpp/20210407195349.png" alt="20210407195349" />

- ä½¿ç”¨

  - åœ¨ pom.xml ä¸­å¯¼å…¥ä¾èµ–

    ```xml
    <!-- JSTLè¡¨è¾¾å¼ä¾èµ– -->
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>jstl</artifactId>
      <version>1.2</version>
    </dependency>
    <!-- Standardæ ‡ç­¾åº“ -->
    <dependency>
      <groupId>taglibs</groupId>
      <artifactId>standard</artifactId>
      <version>1.1.2</version>
    </dependency>
    ```

  - åœ¨ JSP é¡µé¢è¿˜éœ€è¦å¼•å…¥å¯¹åº”è¦ä½¿ç”¨çš„ taglib,è¿™é‡Œåªç”¨åˆ° core:

    ```jsp
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
    ```

---

- if

  ```jsp
  <%@ page contentType="text/html;charset=UTF-8" language="java" %> <%@ taglib
  prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> <%@ page
  isELIgnored="false" %>
  <html>
    <head>
      <title>ifæµ‹è¯•</title>
    </head>
    <body>
      <%--actionæ˜¯ä»£ç æäº¤ä½ç½®--%>
      <form action="if.jsp" method="post">
        <label>
          ç”¨æˆ·å:
          <input type="text" name="username" />
        </label>
        <input type="submit" value="ç™»å½•" />
      </form>

      <hr />

      <%--
        ELè¡¨è¾¾å¼è·å–è¡¨å•ä¸­çš„æ•°æ® ${param.å‚æ•°å}
        åˆ¤æ–­å¦‚æœæäº¤çš„ç”¨æˆ·åæ˜¯adminï¼Œåˆ™ç™»å½•æˆåŠŸ,å¹¶æŠŠisAdminç½®ä¸ºtrue
        --%>
      <c:if test="${param.username=='admin'}" var="isAdmin">
        <c:out value="ç®¡ç†å‘˜æ¬¢è¿æ‚¨ï¼" />
      </c:if>
    </body>
  </html>
  ```

  ***

- choose-when

  ```jsp

  <%-- Created by IntelliJ IDEA. User: 29845 Date: 2021/4/8 Time: 20:38 To change
  this template use File | Settings | File Templates. --%> <%@ page
  contentType="text/html;charset=UTF-8" language="java" %> <%@ page
  isELIgnored="false" %>
  <html>
    <head>
      <title>choose-whenæµ‹è¯•</title>
    </head>
    <body>
      <form action="" method="post">
        <label>
          <%--å®šä¹‰ä¸€ä¸ªå˜é‡score--%>
          <input type="text" name="score" />
        </label>
        <input type="submit" name="æäº¤" />
      </form>
      <c:choose>
        <c:when test="${param.score>=90}"> ä½ çš„æˆç»©ä¸ºä¼˜ç§€ </c:when>
        <c:when test="${param.score>=80}"> ä½ çš„æˆç»©ä¸ºä¸€èˆ¬ </c:when>
        <c:when test="${param.score>=70}"> ä½ çš„æˆç»©ä¸ºè‰¯å¥½ </c:when>
        <c:when test="${param.score<=60}"> ä½ çš„æˆç»©ä¸ºä¸åŠæ ¼ </c:when>
      </c:choose>
    </body>
  </html>
  ```

  ***

- forEach

  ```jsp
  <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
  <%@ page import="java.util.ArrayList" %><%--
    Created by IntelliJ IDEA.
    User: 29845
    Date: 2021/4/8
    Time: 20:59
    To change this template use File | Settings | File Templates.
  --%>
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <%@ page isELIgnored="false" %>
  <html>
  <head>
    <title>forEach</title>
  </head>
  <body>

  <%
    ArrayList<String> setPeople = new ArrayList<>();
    setPeople.add(0, "å¼ ä¸‰");
    setPeople.add(1, "æå››");
    setPeople.add(2, "ç‹äº”");
    setPeople.add(3, "èµµå…­");
    setPeople.add(4, "ç”°å…­");
    request.setAttribute("list", setPeople);
  %>

  <%--
    var , æ¯ä¸€æ¬¡éå†å‡ºæ¥çš„å˜é‡
    items, è¦éå†çš„å¯¹è±¡
    å¯é€‰:
      begin,   å“ªé‡Œå¼€å§‹
      end,     åˆ°å“ªé‡Œ
      step,   æ­¥é•¿
  --%>
  <c:forEach var="getPeople" items="${list}" begin="1" end="3" step="1">
    <c:out value="${getPeople}"/>
    <br/>
  </c:forEach>
  </body>
  </html>
  ```

![åˆ†å‰²çº¿](https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png)

# JavaBean

- JavaBean(å®ä½“ç±») æœ‰ç‰¹å®šçš„å†™æ³•:

  - ä¸€ä¸ªæ— å‚æ„é€ 

  - å±æ€§å¿…é¡»ç§æœ‰åŒ–

  - å¿…é¡»æœ‰å¯¹åº”çš„ get/set æ–¹æ³•ï¼›

  ***

- ä¸€èˆ¬ç”¨æ¥å’Œæ•°æ®åº“çš„å­—æ®µåšæ˜ å°„ ORM(å¯¹è±¡å…³ç³»æ˜ å°„)

  - è¡¨â€”>ç±»

  - å­—æ®µâ€“>å±æ€§

  - è¡Œè®°å½•---->å¯¹è±¡

---

- æ ·ä¾‹ Java ç±»: `src/main/java/pojo/People.java`

  ```Java
  package pojo;

  public class People {
    private int id;
    private String name;
    private int age;
    private String address;

    public People() {
    }

    public People(int id, String name, int age, String address) {
      this.id = id;
      this.name = name;
      this.age = age;
      this.address = address;
    }

    public int getId() {
      return id;
    }

    public void setId(int id) {
      this.id = id;
    }

    public String getName() {
      return name;
    }

    public void setName(String name) {
      this.name = name;
    }

    public int getAge() {
      return age;
    }

    public void setAge(int age) {
      this.age = age;
    }

    public String getAddress() {
      return address;
    }

    public void setAddress(String address) {
      this.address = address;
    }

    @Override
    public String toString() {
      return "People{" +
          "id=" + id +
          ", name='" + name + '\'' +
          ", age=" + age +
          ", address='" + address + '\'' +
          '}';
    }

    public static void main(String[] args) {
      new People(1, "ç§¦ç–†1å·", 3, "è¥¿å®‰");
      new People(2, "ç§¦ç–†2å·", 3, "è¥¿å®‰");
      new People(3, "ç§¦ç–†3å·", 3, "è¥¿å®‰");
    }
  }
  ```

  ***

- æ ·ä¾‹ JSP: `src/main/webapp/javaBean.jsp`

  - è¿™é‡Œåªæ˜¯ç®€å•ä»‹ç» JavaBean åŠå…¶ä½¿ç”¨,å¹¶ä¸æ¨èç”¨ JSP æ ‡ç­¾æ¥æ“ä½œ JavaBean,è¿˜æ˜¯æ¨èç”¨ Java ä»£ç æ“ä½œå®ä½“ç±»å¯¹è±¡.

  ```jsp
  <%-- Created by IntelliJ IDEA. User: 29845 Date: 2021/4/8 Time: 23:32 To change
  this template use File | Settings | File Templates. --%> <%@ page
  contentType="text/html;charset=UTF-8" language="java" %>
  <html>
    <head>
      <title>javaBeanæµ‹è¯•</title>
    </head>
    <body>
      <jsp:useBean id="people" class="pojo.People" scope="page" />
      <jsp:setProperty name="people" property="id" value="1" />
      <jsp:setProperty name="people" property="name" value="ç‹‚ç¥è¯´" />
      <jsp:setProperty name="people" property="age" value="3" />
      <jsp:setProperty name="people" property="address" value="è¥¿å®‰" />

      id:
      <jsp:getProperty name="people" property="id" />
      name:
      <jsp:getProperty name="people" property="name" />
      age:
      <jsp:getProperty name="people" property="age" />
      address:
      <jsp:getProperty name="people" property="address" />
    </body>
  </html>
  ```
