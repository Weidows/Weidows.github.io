---
title: ğŸ¥±æˆè€è„šæœ¬ä¸­~å¥‡æŠ€æ·«å·§
tags:
  - shell
  - PowerShell
katex: false
comments: true
aside: true
date: 2021-11-03 16:37:54
cover: https://i.loli.net/2021/11/03/8SDPyzNrBF4hoGZ.png
top_img:
---

<!--
 * @?: *********************************************************************
 * @Author: Weidows
 * @LastEditors: Weidows
 * @LastEditTime: 2022-02-08 20:54:52
 * @FilePath: \Blog-private\source\_posts\experience\shell\å¥‡æŠ€æ·«å·§.md
 * @Description:
 * @!: *********************************************************************
-->

- [å‚æ•°åˆ¤ç©º](#å‚æ•°åˆ¤ç©º)
  - [å­—ç¬¦ä¸²æ‹¼æ¥åˆ¤å®š](#å­—ç¬¦ä¸²æ‹¼æ¥åˆ¤å®š)
  - [è¯­æ³•åˆ¤å®š](#è¯­æ³•åˆ¤å®š)
- [ç¨‹åºå ç”¨](#ç¨‹åºå ç”¨)
- [echo](#echo)
- [Scoop](#scoop)
  - [portable](#portable)
  - [è§£å‰–-exe](#è§£å‰–-exe)
- [åˆ¤æ–­æ˜¯å¦å«æœ‰æŸå­—ç¬¦ä¸²](#åˆ¤æ–­æ˜¯å¦å«æœ‰æŸå­—ç¬¦ä¸²)

![åˆ†å‰²çº¿](https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png)

## å‚æ•°åˆ¤ç©º

### å­—ç¬¦ä¸²æ‹¼æ¥åˆ¤å®š

- æœ‰æ—¶å€™æˆ‘ä»¬æƒ³åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯ä¸æ˜¯ç©ºçš„,ä¼šå˜å¾—æœ‰äº›æ£˜æ‰‹

  ```shell
  if [ ${abc} != "" ]; then
    echo ${abc}
  fi
  ```

  æˆ‘ä»¬çš„æƒ³æ³•æ˜¯åˆ¤æ–­æ˜¯å¦å­˜åœ¨ abc è¿™ä¸ªå˜é‡,å®é™…ä¸Šè¿™æ ·å†™å¹¶ä¸è¡Œ,æ²¡æœ‰è¿™ä¸ªå˜é‡çš„è¯ä¼šå˜æˆä¸‹é¢çš„æ ·å­:

  ```shell
  if [  != "" ]; then
    echo ${abc}
  fi
  ```

  è¿™æ ·è‚¯å®šä¼šæŠ¥é”™çš„

  ***

- æ”¹ä¸€ä¸‹,æ¯”å¦‚æ·»åŠ å†—ä½™æ ¡éªŒå­—ç¬¦

  ```shell
  abc = "abc";

  if [ a${abc} != a ]; then
    echo ${abc}
  fi
  ```

  ***

- `bat ä¸­å¼•å·ä¹Ÿä¼šè§†ä¸ºå˜é‡ä¸€éƒ¨åˆ†`,æ‰€ä»¥:

  ```bat
  if "%DIRNAME%" == "" set DIRNAME=.
  ```

  æˆ–è€…:

  ```bat
  set abc=""

  if %abc%=="" then (
    echo "abc"
  )
  ```

---

### è¯­æ³•åˆ¤å®š

- shell çš„è¯­æ³•:

  ```shell
  if [ -n "${abc}" ]; then
    echo ${abc}
  fi
  ```

- bat è¯­æ³•:

  ```bat
  if not defined abc (
    echo 'abc' not defined.
  )
  ```

## ç¨‹åºå ç”¨

- å¦‚æœä½ ç”¨è¿‡ aria2 çš„è¯è‚¯å®šä¼šé‡åˆ°ä¸€ä¸ªå¤´ç–¼çš„äº‹: `å¦‚ä½•å¼€æœºåå°è‡ªåŠ¨å¯åŠ¨å®ƒ`

  1. å®ƒçš„ç¨‹åºæœ¬èº«ä¸å¸¦æœ‰å¼€æœºå¯åŠ¨,éœ€è¦å¦å¤–å†™å¯åŠ¨è„šæœ¬

  2. å®ƒæ— æ³•åå°å¯åŠ¨,å¿…ç„¶ä¼šå æ®ä¸€ä¸ªæ§åˆ¶å°ç¨‹åºçš„å‰å°

- ç½‘ä¸Šæ‰¾åˆ°äº†æ¯”è¾ƒå¥½ç”¨çš„æ–¹æ³•: `vbs è„šæœ¬`

  ```vbs
  CreateObject("WScript.Shell").Run "aria2c --conf-path=D:\Game\Scoop\persist\aria2\conf",0
  ```

  ç”±äºæˆ‘å¹³æ—¶ç”¨ bat ç®¡ç†ç”µè„‘,å•ç‹¬ç¼–å†™æ‰§è¡Œä¸€ä¸ª vbs è„šæœ¬ç•¥æ˜¾å¤šä½™,æ‰€ä»¥ç›´æ¥ç»“åˆè¿› bat è„šæœ¬é‡Œ,ç”¨å®Œå°±åˆ é’ˆåˆºæ¿€:

  ```bat
  echo CreateObject("WScript.Shell").Run "aria2c --conf-path=D:\Game\Scoop\persist\aria2\conf",0 > aria2.vbs
  cscript //Nologo aria2.vbs
  del aria2.vbs
  ```

![åˆ†å‰²çº¿](https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png)

## echo

- çœ‹åˆ°ä¸€ä¸ªè„šæœ¬ä¸­è¿™ä¹ˆå†™,ä¹ä¸€çœ‹è’™äº†:

  ```bat
  CLS&ECHO.&ECHO å®Œæˆ, ä»¥ä¸‹é€‰é¡¹è‡ªé€‰ï¼š
  ECHO.&ECHO 1ã€å¯ç”¨è§†é¢‘æ’­æ”¾ç¨‹åº(ä¼šé©»ç•™è¿›ç¨‹)
  ```

- å®é™…ä¸Šåªæ˜¯æŠŠå‡ ä¸ªå‘½ä»¤å‹ç¼©åˆ°äº†ä¸€è¡Œ

  ```
  cls   # æ¸…å±
  echo. # æ¢è¡Œ
  ```

![åˆ†å‰²çº¿](https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png)

## Scoop

### portable

æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºè™šæ‹Ÿé“¾æ¥æŠŠ C ç›˜ä¸­çš„ runtime æ•°æ® -> scoop/persist å†…

- æ­¤ç‰‡æ®µå¯è‡ªåŠ¨åˆ¤æ–­ `remix-ide / .remix-ipfsnode / .cache_remix_ide` æ‰€åœ¨ç›®å½•æ˜¯ `USERPROFILE / APPDATA`

  å¹¶å°†æ•°æ®ç§»åŠ¨åˆ° persist å†…,åˆ›å»ºè™šæ‹Ÿé“¾æ¥

  `éœ€è¦æ³¨æ„åªèƒ½æ˜¯æ–‡ä»¶å¤¹,ä¸èƒ½æ˜¯æ–‡ä»¶!!!`

  ```
  "foreach ($folder in @('remix-ide', '.remix-ipfsnode', '.cache_remix_ide')) {",
  "  if (Test-Path \"$env:USERPROFILE\\$folder\") {",
  "    $runtimeCache = \"$env:USERPROFILE\\$folder\"",
  "    $runtimeCachePersist = \"$persist_dir\\USERPROFILE\\$folder\"",
  "  } else {",
  "    if (Test-Path \"$env:APPDATA\\$folder\") {",
  "      $runtimeCache = \"$env:APPDATA\\$folder\"",
  "      $runtimeCachePersist = \"$persist_dir\\APPDATA\\$folder\"",
  "    } else {continue}",
  "  }",
  "  if (Test-Path $runtimeCachePersist) {",
  "    Remove-Item $runtimeCache -Force -Recurse -ErrorAction SilentlyContinue",
  "    New-Item -Type Junction -Path $runtimeCache -Target $runtimeCachePersist | Out-Null",
  "  } else {",
  "    mkdir $runtimeCache",
  "    Move-Item $runtimeCache $runtimeCachePersist -Force",
  "    New-Item -Type Junction -Path $runtimeCache -Target $runtimeCachePersist | Out-Null",
  "  }",
  "}"
  ```

- ä»¥åŠé…å¯¹çš„ uninstaller:

  ```
  "uninstaller": {
      "script": [
          "foreach ($folder in @('remix-ide', '.remix-ipfsnode', '.cache_remix_ide')) {",
          "  if (Test-Path \"$env:USERPROFILE\\$folder\") {",
          "    $runtimeCache = \"$env:USERPROFILE\\$folder\"",
          "    $runtimeCachePersist = \"$persist_dir\\USERPROFILE\\$folder\"",
          "  } else {",
          "    if (Test-Path \"$env:APPDATA\\$folder\") {",
          "      $runtimeCache = \"$env:APPDATA\\$folder\"",
          "      $runtimeCachePersist = \"$persist_dir\\APPDATA\\$folder\"",
          "    } else {continue}",
          "  }",
          "  if (!(Test-Path $runtimeCachePersist)) { Move-Item $runtimeCache $runtimeCachePersist -Force -ErrorAction SilentlyContinue }",
          "  else { Remove-Item $runtimeCache -Force -Recurse -ErrorAction SilentlyContinue }",
          "}"
      ]
  },
  ```

---

### è§£å‰–-exe

- æ­¤ç‰‡æ®µå¯ä»¥æŠŠå¸¸è§çš„ `.exe -> .exe#/dl.7z` ä¸­çš„æ–‡ä»¶æå–å‡ºæ¥

  ```
  "Expand-7zipArchive \"$dir\\`$PLUGINSDIR\\app-64.7z\" \"$dir\"",
  "Remove-Item -Recurse -Force \"$dir\\`$PLUGINSDIR\"",
  ```

![åˆ†å‰²çº¿](https://cdn.jsdelivr.net/gh/Weidows/Images/img/divider.png)

## åˆ¤æ–­æ˜¯å¦å«æœ‰æŸå­—ç¬¦ä¸²

- å¦‚ä¸‹,å¯ä»¥åˆ¤æ–­.gitignore ä¸­æ˜¯å¦å«æœ‰ 'backup'

  ```bat
  touch %BACKUP_DIR%\.gitignore
  cat %BACKUP_DIR%\.gitignore | findstr backup >nul || (
      echo backup>> %BACKUP_DIR%\.gitignore
  )
  ```
