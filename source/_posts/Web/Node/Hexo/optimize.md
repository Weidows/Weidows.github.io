---
title: ğŸš€ç½‘ç«™ä¼˜åŒ–è®°å½•.
date: 2021-02-07 01:11:24
password: ""
tags:
  - Hexo
  - ä¼˜åŒ–
  - Website
  - é­”æ”¹
cover: https://www.helloimg.com/images/2022/02/27/GV3qNh.png
top_img:
---

<!--
 * @?: *********************************************************************
 * @Author: Weidows
 * @Date: 2021-02-07 01:11:24
 * @LastEditors: Weidows
 * @LastEditTime: 2021-08-29 15:15:38
 * @FilePath: \Blog-private\source\_posts\Web\Node\Hexo\optimize.md
 * @Description:
 * @!: *********************************************************************
-->

- [Why?](#why)
  - [`Why do this?`](#why-do-this)
- [æ¦‚è§ˆ](#æ¦‚è§ˆ)
- [å¥‘åˆ](#å¥‘åˆ)
- [ä¼˜åŒ– css](#ä¼˜åŒ–-css)
- [ä¼˜åŒ– js](#ä¼˜åŒ–-js)
  - [å†æ¬¡é­”æ”¹](#å†æ¬¡é­”æ”¹)

<a>![åˆ†å‰²çº¿](https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png)</a>

## Why?

### `Why do this?`

- è¿™ç½‘ç«™æœ‰å¤ªå¤šéœ€è¦ç®€åŒ–çš„ä¸œè¥¿äº†,å¾ˆå¤šæ ·å¼æ˜¯`ç›´æ¥å¼•å…¥çš„csså’Œjs`

- å·¨è€—è´¹æ¸²æŸ“æ€§èƒ½å’Œæ—¶é—´(å¯ä»¥æ„Ÿè§‰å‡ºæ¥åŠ è½½è¿™ç½‘ç«™æŒºè´¹åŠ²çš„)

<a>![åˆ†å‰²çº¿](https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png)</a>

## æ¦‚è§ˆ

- å¯¹äº css çš„æ‰€æœ‰ä¿®æ”¹,å…¨éƒ¨æ•´åˆè¿›`mine.styl`

  - ç¼–è¯‘æ—¶å°±å·²ç»åšå¥½ç¾åŒ–,é¢å¤–èµ„æºè´Ÿè½½å‡ ä¹é™ä¸º 0

  - æ³¨å…¥åˆ°`index.styl`æœ«å°¾.

  ***

- js çš„ç¾åŒ–,å…¨éƒ¨æ•´åˆåˆ° `utils.js`

  - è¯·æ±‚æ•°åŠ  0,åŠ è½½ç­–ç•¥ä¼˜åŒ–,æ—¶é—´é™ä½; Weidowså¯¹è±¡ç›´æ¥å…¨å±€åŠ è½½ç”Ÿæ•ˆä¸”ä¸è¢«GC.

  - æŠŠ js ä»£ç å…¨å †åœ¨æœ€å,æš´éœ² `Weidows.re()` ä¾› pjax è°ƒç”¨.

  ***

- pug çš„ä¿®æ”¹é™ä½ä¸º 3 å¤„,æ–¹ä¾¿å‡çº§æ¢ä»£,éƒ½åœ¨æ­¤ç›®å½•ä¸‹: `themes\butterfly\layout\includes\`

  - `additional-js.pug` - æœ«å°¾è¿½åŠ æ¨±èŠ±ç‰¹æ•ˆ

  - `footer.pug`- é¡µè„šæ ‡ç­¾+æ”¹æ³¨è„šæ ·å¼

  - `third-party\pjax.pug` - è°ƒç”¨ Weidows.re(),é€‚é… pjax åˆ·æ–°

<a>![åˆ†å‰²çº¿](https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png)</a>

## å¥‘åˆ

> ç»“åˆ [butterfly å†…éƒ¨é­”æ”¹è®°å½•](./butterfly_modify)

<a>![åˆ†å‰²çº¿](https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png)</a>

## ä¼˜åŒ– css

- ä»¥å¾€çš„ css æ˜¯ç›´æ¥å¼•å…¥çš„æ–‡ä»¶,åœ¨å®¢æˆ·ç«¯åŠ è½½æ—¶è¿˜æ˜¯ä¼šè€—è´¹ä¸€äº›ä¸è²æ—¶é—´åŠ è½½+æ¸²æŸ“å‡ºæ¥

- ä¼˜åŒ–æ€è·¯å°±æ˜¯æŠŠ css å˜æˆ`styl`,ä½¿ä¹‹åœ¨ç¼–è¯‘ç”Ÿæˆ HTML æ–‡ä»¶æ—¶å°±æŠŠæ ·å¼æ”¹äº†,èŠ‚çœå®¢æˆ·ç«¯è€—è´¹.

---

- å¦‚ä¸‹:

  - æ–°å»ºä¸€ä¸ªåä¸º `mine.styl` çš„æ–‡ä»¶.

  - åŸ css æ–‡ä»¶å°±æ˜¯`mine.css`,ç”¨[`css2styl`](https://html5beta.com/tools/css2stylus.html)è½¬æ¢ä¸º styl æ ¼å¼,ç²˜è´´åˆ° `mine.styl`

  - æ³¨æ„è¿™ä¸ªç½‘ç«™è½¬æ¢æˆçš„ styl æœ‰å¾ˆå¤š bug(åŒ…æ‹¬ç¼©è¿›å’Œæ‹¬å·,éœ€è¦äººå·¥æ£€éªŒ)

  <img src="https://www.helloimg.com/images/2022/02/27/GVFlgb.png" alt="20210207134449" />

- åŒ…æ‹¬åŸå…ˆ`source/css/_global/function.styl`ä¹‹ç±»çš„å†…æ·»åŠ æˆ–ä¿®æ”¹çš„æ ·å¼,ä¹Ÿå¯ä»¥è½¬å…¥ mine.styl.

- ç„¶ååœ¨`index.styl`ä¸­å¼•å…¥:

  - åœ¨æœ«å°¾åŠ ä¸Š

  ```styl
  //mine
  @import '_mine/mine.styl'
  ```

---

- ç”¨ `hexo server` æµ‹è¯•ä¸€ä¸‹,åº”è¯¥æ²¡é—®é¢˜~

- è¿™æ · css ä¼˜åŒ–å°±å®Œæˆäº†

<a>![åˆ†å‰²çº¿](https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png)</a>

## ä¼˜åŒ– js

- è·Ÿ css ä¸€æ ·,æˆ‘åŸå…ˆä¹Ÿæ˜¯ç›´æ¥ä¸€ä¸ª`mine.js`å¼•å…¥çš„

- è™½ç„¶æ²¡å•¥é—®é¢˜,ä½†æ˜¯ä¼šå¯¼è‡´é¡µé¢ç¬¬äºŒæ¬¡åŠ è½½æ¸²æŸ“,è€Œä¸”å¤šäº†ä¸€ä¸ªè¯·æ±‚æ•°

- äºæ˜¯,æˆ‘æƒ³ç›´æ¥æŠŠå®ƒæ·¦è¿›`main.js`ä¸­!

  - æ“ä½œä¸å¤æ‚,ç›´æ¥å¤åˆ¶`mine.js`å†…å®¹,ç²˜è´´è¿›`main.js`æœ€å
  - æ³¨æ„ä¸æ˜¯æœ€æœ«å°¾

  ```js
    // ç²˜è´´åˆ°è¿™é‡Œ
    refreshFn();
    unRefreshFn();
  })
  ```

### å†æ¬¡é­”æ”¹

- å› ä¸ºæŸäº›ç¾åŒ–å‡½æ•°ä¼šè¢« pjax åŠŸèƒ½æå¤±æ•ˆ,ç›´æ¥æŠŠå‡½æ•°æ”¾è¿› main.js çš„è¯,pjax æ— æ³•å†æ¬¡ä½¿ç”¨

- æ‰€ä»¥æˆ‘æŠŠç¾åŒ– js æ‰“åŒ…å¹¶å¼„è¿› `butterfly/layout/head.pug` ä¸­,åœ¨é¡µé¢ç¼–è¯‘æ—¶å°±ä¼šè¢«æ·»åŠ åˆ° `<head>` å†…,åŠ è½½æ—¶é—´å’Œè¯·æ±‚æ•°ä¸å¢åŠ !

  ç°åœ¨,åŠ è½½é€»è¾‘æ˜¯: js ç¾åŒ–ä»£ç åœ¨ HTML æ–‡ä»¶çš„ head ä¸­,ç„¶ååœ¨ main.js æœ€åå†™ä¸€å¥è°ƒç”¨å‘½ä»¤; åœ¨é¡µé¢ç”¨äº† pjax åŠ è½½æ—¶,pjax.pug ä¸­çš„é‡æ¸²æŸ“å‡½æ•°ä¼šè¢«è°ƒç”¨.
