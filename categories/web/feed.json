{
    "version": "https://jsonfeed.org/version/1",
    "title": "⭐️齐下无贰⭐️ • All posts by \"web\" category",
    "description": "May all the beauty be bless.✨",
    "home_page_url": "https://weidows.github.io",
    "items": [
        {
            "id": "https://weidows.github.io/post/Web/JavaScript/live2d-moc3/README/",
            "url": "https://weidows.github.io/post/Web/JavaScript/live2d-moc3/README/",
            "title": "👉live2d-moc3-web-集成渲染库",
            "date_published": "2022-03-26T04:46:57.000Z",
            "content_html": "<h2>\n<ul>\n<li>\n<h1>👉Live2d-moc3👈</h1>\n</li>\n</ul>\n</h2>\n<p><a href=\"https://weidows.github.io/post/Web/JavaScript/live2d-moc3/README\">⏩ 文章地址/示例博客</a> | <a href=\"https://github.com/Weidows-projects/live2d-moc3\">✔️ 仓库地址</a> | <a href=\"https://weidows-projects.github.io/live2d-moc3/\">👀 示例页面</a> 欢迎提交 pr !</p>\n<!--\n * @?: live2d************************************************\n * @Author: JavaScripteidows\n * @Date: 2022-03-20 22:26:55\n * @LastEditors: Weidows\n * @LastEditTime: 2022-05-23 00:47:01\n * @FilePath: \\Blog-private\\source\\_posts\\Web\\JavaScript\\live2d-moc3\\README.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li>[x] 支持 live2d-moc3 版本的 web 渲染库</li>\n<li>[x] 支持鼠标点击互动 | 不提供拖动功能</li>\n<li>[x] 新增支持 [多模型] 异步加载 + 每日恒定随机模型 (每天更换自定义列表内随机模型,当日不再随刷新而替换)\n<ul>\n<li>[x] 已支持模型号越界判定,自动缩小到给定范围</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"如何添加\">如何添加</h2>\n<ul>\n<li>\n<p>三个必要的头: <sup id='cite_ref-1'><a href=\"#cite_note-1\">[1]</a></sup> <sup id='cite_ref-2'><a href=\"#cite_note-2\">[2]</a></sup></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- Live2DCubismCore --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/live2dcubismcore.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Include Pixi. --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/pixi.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/live2d.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>以及自定义的 js, 单个/多个模型都可以, 但只显示一个, 想要多个可以多 new 几个</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;DOMContentLoaded&quot;</span>, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> models = [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">width</span>: <span class=\"number\">800</span>,</span><br><span class=\"line\">      <span class=\"attr\">height</span>: <span class=\"number\">600</span>,</span><br><span class=\"line\">      <span class=\"attr\">left</span>: <span class=\"string\">&quot;0px&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">bottom</span>: <span class=\"string\">&quot;0px&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">basePath</span>:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://fastly.jsdelivr.net/gh/alg-wiki/AzurLaneL2DViewer@gh-pages/assets&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">role</span>: <span class=\"string\">&quot;bisimai_2&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">background</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">opacity</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"attr\">mobile</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">width</span>: <span class=\"number\">800</span>,</span><br><span class=\"line\">      <span class=\"attr\">height</span>: <span class=\"number\">600</span>,</span><br><span class=\"line\">      <span class=\"attr\">right</span>: <span class=\"string\">&quot;0px&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">bottom</span>: <span class=\"string\">&quot;0px&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">basePath</span>:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://fastly.jsdelivr.net/gh/alg-wiki/AzurLaneL2DViewer@gh-pages/assets&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">role</span>: <span class=\"string\">&quot;bisimai_2&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">background</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">opacity</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"attr\">mobile</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  ];</span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"title class_\">Live2</span>dLoader(models);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"比如-Hexo\">比如 Hexo</h2>\n<p>添加到主题的 _config.yml</p>\n<p>js 代码可以写完参数后 <a href=\"https://c.runoob.com/front-end/51/\">压缩为一行</a>,一起添加到下面;</p>\n<p>当然也可以魔改框架源码,此处不再赘述.</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">inject:</span></span><br><span class=\"line\">  <span class=\"attr\">head:</span></span><br><span class=\"line\">    <span class=\"comment\"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&lt;script</span> <span class=\"string\">src=&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/live2dcubismcore.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&lt;script</span> <span class=\"string\">src=&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/pixi.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&lt;script</span> <span class=\"string\">src=&quot;https://fastly.jsdelivr.net/gh/Weidows-projects/live2d-moc3/dist/live2d.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class=\"line\">  <span class=\"attr\">bottom:</span></span><br><span class=\"line\">    <span class=\"comment\"># - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&lt;script&gt;addEventListener(&quot;DOMContentLoaded&quot;,function()&#123;let</span> <span class=\"string\">models=[&#123;left:&quot;0px&quot;,bottom:&quot;0px&quot;,basePath:&quot;https://fastly.jsdelivr.net/gh/alg-wiki/AzurLaneL2DViewer@gh-pages/assets&quot;,role:&quot;bisimai_2&quot;,background:&quot;&quot;,opacity:1,mobile:false,&#125;,&#123;right:&quot;0px&quot;,bottom:&quot;0px&quot;,basePath:&quot;https://fastly.jsdelivr.net/gh/alg-wiki/AzurLaneL2DViewer@gh-pages/assets&quot;,role:&quot;bisimai_2&quot;,background:&quot;&quot;,opacity:1,mobile:false,&#125;,];new</span> <span class=\"string\">Live2dLoader(models)&#125;);&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"可选参数\">可选参数</h2>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>Type</th>\n<th>Default</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>width</td>\n<td>可选[Number]</td>\n<td>800</td>\n<td>宽度，单位为 px</td>\n</tr>\n<tr>\n<td>height</td>\n<td>可选[Number]</td>\n<td>600</td>\n<td>长度，单位为 px</td>\n</tr>\n<tr>\n<td>top,right,bottom,left</td>\n<td>可选[String]</td>\n<td>“”</td>\n<td>模型到浏览器各边框的距离。选择两个即可定位，如定位在左下角：left: ‘0px’ , bottom: ‘0px’</td>\n</tr>\n<tr>\n<td>basePath</td>\n<td>必须[String]</td>\n<td>“”</td>\n<td>live2d 模型资源库的路径,推荐下面仓库,模型非常好看 </br> <a href=\"https://github.com/alg-wiki/AzurLaneL2DViewer\">alg-wiki/AzurLaneL2DViewer</a> </br> <a href=\"https://github.com/imuncle/live2d\">imuncle/live2d</a></td>\n</tr>\n<tr>\n<td>role</td>\n<td>必须[String]</td>\n<td>“”</td>\n<td>角色模型对应的文件夹（即 basePath 下的文件夹</td>\n</tr>\n<tr>\n<td>background</td>\n<td>可选[String]</td>\n<td>“”</td>\n<td>背景图片，可填入图片外链</td>\n</tr>\n<tr>\n<td>opacity</td>\n<td>可选[Number]</td>\n<td>1</td>\n<td>模型透明度，(0,1] 取值</td>\n</tr>\n<tr>\n<td>mobile</td>\n<td>可选[boolean]</td>\n<td>true</td>\n<td>移动端(手机)是否显示</td>\n</tr>\n</tbody>\n</table>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Q-A\">Q-A</h2>\n<h3 id=\"模型问题报错\">模型问题报错</h3>\n<ul>\n<li>\n<p>关于报错含有 <code>reading ‘_ptr’</code> 的, 是模型不适配问题 (#2)</p>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">live2dcubismcore</span>.min.js:<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attribute\">Uncaught</span> TypeError: Cannot read properties of null (reading ‘_ptr’)</span><br><span class=\"line\"><span class=\"attribute\">at</span> new Model (live2dcubismcore.min.js:<span class=\"number\">1</span>:<span class=\"number\">138485</span>)</span><br><span class=\"line\"><span class=\"attribute\">at</span> Function.Model.fromMoc (live2dcubismcore.min.js:<span class=\"number\">1</span>:<span class=\"number\">138707</span>)</span><br><span class=\"line\"><span class=\"attribute\">at</span> l2d.js💯<span class=\"number\">60</span></span><br><span class=\"line\"><span class=\"attribute\">at</span> t.value (mini-signals.js:<span class=\"number\">93</span>:<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"attribute\">at</span> e.t._onComplete (Loader.js:<span class=\"number\">568</span>:<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"attribute\">at</span> Loader.js:<span class=\"number\">608</span>:<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attribute\">at</span> s (async.js:<span class=\"number\">27</span>:<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"attribute\">at</span> e. (interactiveTarget.js:<span class=\"number\">82</span>:<span class=\"number\">5</span>)</span><br><span class=\"line\"><span class=\"attribute\">at</span> Loader.js:<span class=\"number\">590</span>:<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attribute\">at</span> async.js:<span class=\"number\">35</span>:<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<p>检验过并不是配置文件哪里有问题, 单纯是二进制模型 .png/.moc3 问题, 想修复的话要修复模型</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"怎么刷新\">怎么刷新</h3>\n<p><img src=\"https://www.helloimg.com/images/2022/05/23/ZRyZgz.png\" alt=\"\"></p>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表-40\">借物表</h2>\n<blockquote>\n<p>项目基于<a href=\"https://github.com/alg-wiki/AzurLaneL2DViewer\">AzurLaneL2DViewer</a>修改</p>\n</blockquote>\n<p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href=\"https://fastly.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/frame/live2dcubismcore.min.js\">https://fastly.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/frame/live2dcubismcore.min.js</a></p>\n<p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href=\"https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.6.1/pixi.min.js\">https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.6.1/pixi.min.js</a></p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "javascript",
                "live2d"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/get-resources/",
            "url": "https://weidows.github.io/post/Web/get-resources/",
            "title": "🌏媒体资源加密-and-解密获取",
            "date_published": "2022-02-22T11:49:20.000Z",
            "content_html": "<h1>媒体资源加密-and-解密获取</h1>\n<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2022-04-20 23:44:47\n * @FilePath: \\Blog-private\\source\\_posts\\Web\\get-resources.md\n * @Description:\n * @!: *********************************************************************\n-->\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li><a href=\"#%E5%AA%92%E4%BD%93%E8%B5%84%E6%BA%90%E5%8A%A0%E5%AF%86-and-%E8%A7%A3%E5%AF%86%E8%8E%B7%E5%8F%96\">媒体资源加密-and-解密获取</a>\n<ul>\n<li><a href=\"#token-%E9%98%B2%E7%9B%97%E9%93%BE\">token-防盗链</a></li>\n<li><a href=\"#ffmpeg-hls-aes_128_cbc\">FFmpeg-HLS-AES_128_CBC</a>\n<ul>\n<li><a href=\"#%E5%88%86%E7%89%87\">分片</a></li>\n<li><a href=\"#%E5%88%86%E7%89%87%E4%BD%9C%E7%94%A8-%E5%BC%95%E5%AD%90\">分片作用-引子</a></li>\n<li><a href=\"#%E8%8A%B1%E6%B4%BB\">花活</a></li>\n<li><a href=\"#%E5%8A%A0%E8%A7%A3%E5%AF%86%E6%B5%81%E7%A8%8B%E5%9B%BE\">加解密流程图</a></li>\n<li><a href=\"#openssl-%E6%89%8B%E5%8A%A8%E5%8A%A0%E5%AF%86\">openssl-手动加密</a>\n<ul>\n<li><a href=\"#encrypt-without-iv\">encrypt-without-iv</a></li>\n<li><a href=\"#encrypt-with-iv\">encrypt-with-iv</a></li>\n</ul>\n</li>\n<li><a href=\"#ffmpeg-%E5%88%86%E7%89%87%E5%8A%A0%E5%AF%86%E4%B8%80%E6%9D%A1%E9%BE%99\">FFmpeg-分片加密一条龙</a></li>\n<li><a href=\"#%E8%A7%A3%E5%AF%86-%E5%90%88%E5%B9%B6\">解密-合并</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%8E%B7%E5%8F%96\">获取</a>\n<ul>\n<li><a href=\"#%E8%A7%86%E9%A2%91\">视频</a></li>\n<li><a href=\"#%E7%BD%91%E9%A1%B5%E5%9B%BE%E7%89%87\">网页图片</a></li>\n<li><a href=\"#qq-%E7%BE%A4%E5%9B%BE%E7%89%87\">QQ-群图片</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%80%9F%E7%89%A9%E8%A1%A8\">借物表</a></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>各类平台网页中的视频通常会被 <code>加密处理</code> 以防止别人拿走; 防盗技术还是有很多种的:<sup id='cite_ref-3'><a href=\"#cite_note-3\">[3]</a></sup></p>\n<ol>\n<li>FFmpeg-HLS-AES_128_CBC 加密</li>\n<li>url 中加入 token 验证</li>\n<li>验证用户身份再给链接(session,cookie)</li>\n<li>视频加水印</li>\n<li>限制跨域访问</li>\n<li>…etc</li>\n</ol>\n</li>\n</ul>\n<p>下面只摸一下技术层面的 <code>1.和2.</code></p>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"token-防盗链\">token-防盗链</h2>\n<p>如 <code>http://xxxxxx.com/m3u8/hunan/desc.m3u8?stream_id=hunan&lt;m=1410595018&amp;lkey=8bc1e0fe35f6321ef560f8ccffb70e5d&amp;path=59.49.42.14,58.59.3.9,58.59.3.51&amp;platid=10&amp;splatid=1015&amp;tag=live&amp;cips=127.0.0.1&amp;ext=m3u8&amp;sign=live_tv</code> <sup id='cite_ref-8'><a href=\"#cite_note-8\">[8]</a></sup></p>\n<p>在 url 加上 时间戳,ip 地址,平台 id,splatid,tag,cips,ext,sign 等参数, 可以让服务器鉴别是否被其他网站/客户端请求, 并作出 403 响应</p>\n<p>同一参数的 url 无法被复用, 但是仍可以通过动态调整参数来绕过服务器的检测</p>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"FFmpeg-HLS-AES-128-CBC\">FFmpeg-HLS-AES_128_CBC</h2>\n<ul>\n<li>\n<p>这么一坨 💩,什么意思嘛?</p>\n<p>FFmpeg 是最强大的视频编解码器, 可以把输入的视频处理成符合 HLS 规范的流媒体, 同时通过 AES-128-CBC 格式的秘钥加密视频</p>\n<p>浅入深出,别急慢慢吃… 下面结合这个库动动手就明白了:<sup id='cite_ref-4'><a href=\"#cite_note-4\">[4]</a></sup></p>\n<hr>\n</li>\n</ul>\n<h3 id=\"分片\">分片</h3>\n<ul>\n<li>\n<p>分片的方式比较简单,这里我们准备好一个 <code>demo.mp4</code>, 丢给 FFmpeg 下面的命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -i demo.mp4 -codec copy -f segment -segment_list index.m3u8 -segment_time 30 %d.ts</span><br></pre></td></tr></table></figure>\n<p>执行完会出来下面这些东西,这些 ts 文件就是分成片的小段视频,此处没加密可以直接播放</p>\n<p><img src=\"https://www.helloimg.com/images/2022/02/26/GVRd0R.png\" alt=\"\"></p>\n<p>有些播放器支持的话 index.m3u8 也是可以播放的, 其实就是引用的这些 ts</p>\n<hr>\n</li>\n<li>\n<p>上面命令中 <code>index.m3u8</code> 这个文件是分片的索引文件, 指明了 ts 文件的先后顺序,时长,版本和加密等信息</p>\n<blockquote>\n<ul>\n<li>TS: MPEG2-Transport Stream,高清相机拍摄视频的封装格式;特点就是要求从视频流的任一片段开始都是可以独立解码的</li>\n<li>m3u8: HTTP Live Streaming（HLS） 协议格式的基础,Unicode 版本的 M3U，此文件用 UTF-8 编码<sup id='cite_ref-01'><a href=\"#cite_note-01\">[1]</a></sup> <br>\n下图 index 就是 m3u8,作用就是索引 ts<br>\n<img src=\"https://www.helloimg.com/images/2022/02/26/GVRc4n.png\" alt=\"\"></li>\n</ul>\n</blockquote>\n<hr>\n</li>\n<li>\n<p>喏,index.m3u8 文件内容应该能看懂</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#EXTM3U</span><br><span class=\"line\">#EXT-X-VERSION:3</span><br><span class=\"line\">#EXT-X-MEDIA-SEQUENCE:0</span><br><span class=\"line\">#EXT-X-ALLOW-CACHE:YES</span><br><span class=\"line\">#EXT-X-TARGETDURATION:32</span><br><span class=\"line\">#EXTINF:30.720000,</span><br><span class=\"line\">0.ts</span><br><span class=\"line\">#EXTINF:29.280000,</span><br><span class=\"line\">1.ts</span><br><span class=\"line\">#EXTINF:31.880000,</span><br><span class=\"line\">2.ts</span><br><span class=\"line\">#EXTINF:29.040000,</span><br><span class=\"line\">3.ts</span><br><span class=\"line\">#EXTINF:29.320000,</span><br><span class=\"line\">4.ts</span><br><span class=\"line\">#EXTINF:6.280000,</span><br><span class=\"line\">5.ts</span><br><span class=\"line\">#EXT-X-ENDLIST</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n</ul>\n<h3 id=\"分片作用-引子\">分片作用-引子</h3>\n<ol>\n<li>\n<p>分段加载视频而不是一口气加载到底</p>\n<p>大部分视频用户不会完完整整的看,分段加载减轻服务器压力,也使用户体验好</p>\n<p>(好几 G 的电影,一口气加载到底, 内存/缓存遭不住…)</p>\n</li>\n<li>\n<p>分片可以让用户无法<code>直接通过链接</code>在浏览器获取<code>完整的 mp4 视频</code></p>\n<p>但,可以通过获取所有 ts 文件合并为 mp4</p>\n<p>插件市场的一些插件可以通过 .m3u8 获取并合并.ts 间接获取完整的 .MP4</p>\n</li>\n</ol>\n<p>于是为了反破解出现了 <code>某些花活</code> 和 <code>视频加密</code></p>\n<hr>\n<h3 id=\"花活\">花活</h3>\n<ol>\n<li>\n<p>把 .m3u8 文件伪装成 .mp4, 可以让大部分没有伪装识别能力的爬虫找不着北 (比如 CoCocut)</p>\n<p><img src=\"https://www.helloimg.com/images/2022/02/26/GVRSwv.png\" alt=\"\"><br>\n<img src=\"https://www.helloimg.com/images/2022/02/26/GVRTHM.png\" alt=\"\"></p>\n</li>\n<li>\n<p>m3u8 中多层嵌套 m3u8 (套娃), 有些爬虫是支持的, 有的 G 了</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#EXTM3U</span><br><span class=\"line\">#EXT-X-STREAM-<span class=\"keyword\">INF</span>:<span class=\"keyword\">PROGRAM</span>-ID=1,BANDWIDTH=1064000</span><br><span class=\"line\">1000kbps.m3u8</span><br><span class=\"line\">#EXT-X-STREAM-<span class=\"keyword\">INF</span>:<span class=\"keyword\">PROGRAM</span>-ID=1,BANDWIDTH=564000</span><br><span class=\"line\">500kbps.m3u8</span><br><span class=\"line\">#EXT-X-STREAM-<span class=\"keyword\">INF</span>:<span class=\"keyword\">PROGRAM</span>-ID=1,BANDWIDTH=282000</span><br><span class=\"line\">250kbps.m3u8</span><br><span class=\"line\">#EXT-X-STREAM-<span class=\"keyword\">INF</span>:<span class=\"keyword\">PROGRAM</span>-ID=1,BANDWIDTH=2128000</span><br><span class=\"line\">2000kbps.m3u8</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>…etc</p>\n</li>\n</ol>\n<hr>\n<h3 id=\"加解密流程图\">加解密流程图</h3>\n<p>原创哦,转载请标记</p>\n<p><img src=\"https://www.helloimg.com/images/2022/02/26/GVRvhz.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"openssl-手动加密\">openssl-手动加密</h3>\n<h4 id=\"encrypt-without-iv\">encrypt-without-iv</h4>\n<p>此处通过 shell 脚本分析,墙裂建议结合仓库学习:<sup id='cite_ref-4'><a href=\"#cite_note-4\">[4]</a></sup></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">workPath=&quot;2.encrypted-without-iv&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">清除原先的</span></span><br><span class=\"line\">rm -rf $workPath/*</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">分片</span></span><br><span class=\"line\">ffmpeg -i demo.mp4 -codec copy -f segment -segment_list $workPath/index.m3u8 -segment_time 30 $workPath/%d.ts</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">获取加密秘钥</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">openssl rand 16</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">  随机生成 16B 二进制数据 (16*8=128 位, 对应AES-128-CBC名称)</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"></span></span><br><span class=\"line\"><span class=\"language-bash\"><span class=\"comment\"># tee -a $workPath/enc.key</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">  将生成的数据输出到秘钥文件 enc.key, 同时把数据交给 hexdump 处理</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"></span></span><br><span class=\"line\"><span class=\"language-bash\"><span class=\"comment\"># hexdump -e &#x27;16/1 &quot;%02x&quot;&#x27;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">  hexdump -e <span class=\"string\">&#x27;a/b format1 format2&#x27;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">    a个字节/8位 -&gt; format2 (a可省,默认为1)</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">    b个字节/8位 -&gt; format1</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">    详见: https://blog.csdn.net/bytxl/article/details/43738103</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"></span></span><br><span class=\"line\"><span class=\"language-bash\"><span class=\"comment\">#   每1字节/8位 -&gt; %02x -&gt; 2位16进制</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">    也就是二进制转16进制,每4位合1位, 128/4=32位16进制</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">  每16字节的结果为1行, 那去掉这个16可以吗?</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">    应该是不行的,结果会出错,例如:</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">    4a6afd460c84c498b8a817ad66392ef2 √</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">    46fd6a4a98c4840cad17a8b8f22e3966 ×</span></span><br><span class=\"line\">encryptionKey=`openssl rand 16 | tee -a $workPath/enc.key | hexdump -e &#x27;16/1 &quot;%02x&quot;&#x27;`</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">ts 文件数</span></span><br><span class=\"line\">numberOfTsFiles=`ls $workPath/*.ts | wc -l`</span><br><span class=\"line\"></span><br><span class=\"line\">for ((i=0; i&lt;$numberOfTsFiles; i ++)) do</span><br><span class=\"line\">    # without-iv也就是默认iv为32位文件序列号</span><br><span class=\"line\">    #   如 5.ts -&gt; 00000000000000000000000000000005</span><br><span class=\"line\">    initializationVector=`printf &#x27;%032x&#x27; $i`</span><br><span class=\"line\"></span><br><span class=\"line\">    # 对每个分片加密</span><br><span class=\"line\">    openssl aes-128-cbc -e -in $workPath/$i.ts -out $workPath/enc_$i.ts -nosalt -iv $initializationVector -K $encryptionKey</span><br><span class=\"line\">done</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">寻找并添加加密方法和秘钥URL</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">  找 <span class=\"string\">&quot;#EXT-X-TARGETDURATION:&quot;</span> 这一段,并在下一行添加</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">  <span class=\"comment\">#EXT-X-KEY:METHOD=AES-128,URI=&quot;enc.key&quot;</span></span></span><br><span class=\"line\">sed &#x27;/#EXT-X-TARGETDURATION:/a #EXT-X-KEY:METHOD=AES-128,URI=&quot;enc.key&quot;&#x27; $workPath/index.m3u8 &gt; $workPath/index_new.m3u8</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">覆盖</span></span><br><span class=\"line\">mv $workPath/index_new.m3u8 $workPath/index.m3u8</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>如图,加密后的 ts 就不能直接播放了</p>\n<p><img src=\"https://www.helloimg.com/images/2022/02/26/GVRzam.png\" alt=\"\"></p>\n</li>\n</ul>\n<hr>\n<h4 id=\"encrypt-with-iv\">encrypt-with-iv</h4>\n<p>这个 iv (initialisation vector,初始化向量) 有点迷, 作用是增强随机性</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">workPath=&quot;3.encrypted-with-iv&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">rm -rf $workPath/*</span><br><span class=\"line\"></span><br><span class=\"line\">ffmpeg -i demo.mp4 -codec copy -f segment -segment_list $workPath/index.m3u8 -segment_time 30 $workPath/%d.ts</span><br><span class=\"line\"></span><br><span class=\"line\">encryptionKey=`openssl rand 16 | tee -a $workPath/enc.key | hexdump -e &#x27;16/1 &quot;%02x&quot;&#x27;`</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">ivKey 偏移量,32位16进制数据,如: f86b5decdb6359cb1023e308651dccfb</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">不需要另存文件, 只需要写在 m3u8 文件里</span></span><br><span class=\"line\">ivKey=`openssl rand -hex 16`</span><br><span class=\"line\"></span><br><span class=\"line\">numberOfTsFiles=`ls $workPath/*.ts | wc -l`</span><br><span class=\"line\"></span><br><span class=\"line\">for ((i=0; i&lt;$numberOfTsFiles; i ++)) do</span><br><span class=\"line\">    openssl aes-128-cbc -e -in $workPath/$i.ts -out $workPath/enc_$i.ts -nosalt -iv $ivKey -K $encryptionKey</span><br><span class=\"line\">done</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下面 <span class=\"variable\">$&#123;ivKey&#125;</span> 需要获取变量,所以字符串要用<span class=\"string\">&quot;&quot;</span>而不能是<span class=\"string\">&#x27;&#x27;</span></span></span><br><span class=\"line\">sed &quot;/#EXT-X-TARGETDURATION:/a #EXT-X-KEY:METHOD=AES-128,URI=\\&quot;enc.key\\&quot;,IV=0x$&#123;ivKey&#125;&quot; $workPath/index.m3u8 &gt; $workPath/index_new.m3u8</span><br><span class=\"line\"></span><br><span class=\"line\">mv $workPath/index_new.m3u8 $workPath/index.m3u8</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"FFmpeg-分片加密一条龙\">FFmpeg-分片加密一条龙</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">workPath=&quot;4.encrypt-with-FFmpeg&quot;</span><br><span class=\"line\">urlPrefix=&quot;weidows.com&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">rm -rf $workPath/*</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">enc.keyinfo</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">  写到 m3u8 里的 keyURL | https://hlsbook.net/enc.key</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">  加密用的 key 文件地址  | enc.key</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">  IV值 (可选)          | ecd0d06eaf884d8226c33928e87efa33</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">  详见: https://hlsbook.net/how-to-encrypt-hls-video-with-ffmpeg/</span></span><br><span class=\"line\"></span><br><span class=\"line\">openssl rand 16 &gt; $workPath/enc.key</span><br><span class=\"line\"></span><br><span class=\"line\">tmpfile=`mktemp`</span><br><span class=\"line\">echo $urlPrefix/enc.key &gt; $tmpfile</span><br><span class=\"line\">echo $workPath/enc.key &gt;&gt; $tmpfile</span><br><span class=\"line\">echo `openssl rand -hex 16` &gt;&gt; $tmpfile</span><br><span class=\"line\">mv $tmpfile $workPath/enc.keyinfo</span><br><span class=\"line\"></span><br><span class=\"line\">ffmpeg -y -i demo.mp4 -c copy -hls_time 30 -hls_key_info_file $workPath/enc.keyinfo -hls_playlist_type vod -hls_segment_filename $workPath/enc_%d.ts $workPath/index.m3u8</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>index.m3u8</p>\n<p>可见生成的没什么问题,而且可以通过下面的方法正常解密</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#EXTM3U</span></span><br><span class=\"line\"><span class=\"selector-id\">#EXT-X-VERSION</span>:<span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"selector-id\">#EXT-X-TARGETDURATION</span>:<span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"selector-id\">#EXT-X-MEDIA-SEQUENCE</span>:<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"selector-id\">#EXT-X-PLAYLIST-TYPE</span>:VOD</span><br><span class=\"line\"><span class=\"selector-id\">#EXT-X-KEY</span>:METHOD=AES-<span class=\"number\">128</span>,URI=<span class=\"string\">&quot;./enc.key&quot;</span>,IV=<span class=\"number\">0</span>x2b5cc8a84648ed8ce5f64e5845d3cb7c</span><br><span class=\"line\"><span class=\"selector-id\">#EXTINF</span>:<span class=\"number\">30.720000</span>,</span><br><span class=\"line\">enc_0<span class=\"selector-class\">.ts</span></span><br><span class=\"line\"><span class=\"selector-id\">#EXTINF</span>:<span class=\"number\">29.280000</span>,</span><br><span class=\"line\">enc_1<span class=\"selector-class\">.ts</span></span><br><span class=\"line\"><span class=\"selector-id\">#EXTINF</span>:<span class=\"number\">31.880000</span>,</span><br><span class=\"line\">enc_2<span class=\"selector-class\">.ts</span></span><br><span class=\"line\"><span class=\"selector-id\">#EXTINF</span>:<span class=\"number\">29.040000</span>,</span><br><span class=\"line\">enc_3<span class=\"selector-class\">.ts</span></span><br><span class=\"line\"><span class=\"selector-id\">#EXTINF</span>:<span class=\"number\">29.320000</span>,</span><br><span class=\"line\">enc_4<span class=\"selector-class\">.ts</span></span><br><span class=\"line\"><span class=\"selector-id\">#EXTINF</span>:<span class=\"number\">6.280000</span>,</span><br><span class=\"line\">enc_5<span class=\"selector-class\">.ts</span></span><br><span class=\"line\">#EXT-X-ENDLIST</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"解密-合并\">解密-合并</h3>\n<p>上面加密会了的话,解密就简单了,完全就是反过来</p>\n<p>合并方法取自: <sup id='cite_ref-6'><a href=\"#cite_note-6\">[6]</a></sup></p>\n<p>这篇文章<sup id='cite_ref-5'><a href=\"#cite_note-5\">[5]</a></sup>简单介绍了下如何手动解密,其文中把 key 和 iv 位数标错为 16 了,别误解</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">inputPath=<span class=\"string\">&quot;2.encrypted-without-iv&quot;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">ivKey=<span class=\"string\">&quot;&quot;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">inputPath=<span class=\"string\">&quot;3.encrypted-with-iv&quot;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">ivKey=<span class=\"string\">&quot;0d5cce6d9fbfae9dcc86cb3f12d4eb4b&quot;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">加密 enc_*.ts 输入路径</span></span><br><span class=\"line\">inputPath=&quot;4.encrypt-with-FFmpeg&quot;</span><br><span class=\"line\">ivKey=&quot;36bb7a1e43e1d3d88b779243817a67bc&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解密 dec_*.ts 和合并后 mp4 输出路径</span></span><br><span class=\"line\">outputPath=&quot;5.decrypt&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">rm -rf $outputPath/*</span><br><span class=\"line\"></span><br><span class=\"line\">encryptionKey=$(hexdump -e &#x27;16/1 &quot;%02x&quot;&#x27; $inputPath/enc.key)</span><br><span class=\"line\"></span><br><span class=\"line\">numberOfTsFiles=`ls $inputPath/enc_*.ts | wc -l`</span><br><span class=\"line\"></span><br><span class=\"line\">for ((i=0; i&lt;$numberOfTsFiles; i ++)) do</span><br><span class=\"line\">    if [[ $ivKey == &quot;&quot; ]]; then</span><br><span class=\"line\">        ivKey=$(printf &#x27;%032x&#x27; $i)</span><br><span class=\"line\">    fi</span><br><span class=\"line\"></span><br><span class=\"line\">    openssl aes-128-cbc -d -in $inputPath/enc_$i.ts -out $outputPath/dec_$i.ts -nosalt -iv $ivKey -K $encryptionKey</span><br><span class=\"line\">done</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">合并</span></span><br><span class=\"line\">ffmpeg -allowed_extensions ALL -i $inputPath/index.m3u8 -acodec copy -vcodec copy -f mp4 $outputPath/combine.mp4</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>如图 <code>dec_*.ts</code> 为解密后的文件,可以直接播放了</p>\n<p><img src=\"https://www.helloimg.com/images/2022/02/26/GVR0xA.png\" alt=\"\"></p>\n<p>可以看项目中的 <code>5.</code>, 合并后的 mp4 也没有问题</p>\n<p>但 原视频 != 分片加解密合并后的视频, 大小差不多但是会有差异 (9.87MB vs 9.95MB)</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"获取\">获取</h2>\n<p>下面就是对资源获取方式的 <code>推荐</code> 了</p>\n<h3 id=\"视频\">视频</h3>\n<blockquote>\n<p>CoCocut: 这个插件官方直接说了不支持爬加密视频,但是大部分平台用起来<s>还是很棒的</s>,插件中最棒的<br>\n有个小弊病, 它不开会员的话是超慢的单线程下载… 我常用它获取 m3u8 地址让下面这伙计下载</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://github.com/nilaoda/N_m3u8DL-CLI\">N_m3u8DL-CLI</a>: 这家伙可以通过 m3u8 下载加密视频; 支持多线程,很快 <img src=\"https://www.helloimg.com/images/2022/02/27/GVct49.png\" alt=\"\"><br>\n可以手动破解加密视频 <sup id='cite_ref-7'><a href=\"#cite_note-7\">[7]</a></sup></p>\n</blockquote>\n<blockquote>\n<p>QQ 浏览器手机 app, 直接进对应网页就可以爬下来视频,加密的也可以,速度拉满 (小母牛倒立 🐄🍺</p>\n</blockquote>\n<hr>\n<h3 id=\"网页图片\">网页图片</h3>\n<ul>\n<li>\n<p>下面两个差不多,都是把页面现有的图片都扒下来, <code>按域名分类</code>,很容易筛选出来</p>\n<p>这方法并不适用于获取视频.</p>\n<blockquote>\n<p>梦想资源下载器</p>\n</blockquote>\n<blockquote>\n<p>网页右键另存为<br>\n<img src=\"https://www.helloimg.com/images/2022/02/26/GVRbW9.png\" alt=\"\"></p>\n</blockquote>\n</li>\n</ul>\n<blockquote>\n<p>Picviewer CE+</p>\n</blockquote>\n<hr>\n<h3 id=\"QQ-群图片\">QQ-群图片</h3>\n<p>经常有老哥在群里发图,苦于一张张保存手抽筋,发现了此方法:</p>\n<ol>\n<li>\n<p>打开电脑版消息管理器,找到那些聊天记录</p>\n<p><img src=\"https://www.helloimg.com/images/2022/02/26/GVRQg0.png\" alt=\"\"></p>\n</li>\n<li>\n<p>选择,复制</p>\n<p><img src=\"https://www.helloimg.com/images/2022/02/26/GVRN95.png\" alt=\"\"></p>\n</li>\n<li>\n<p>发送给 <code>我的手机</code></p>\n<p><img src=\"https://www.helloimg.com/images/2022/02/26/GVR7Hh.png\" alt=\"\"></p>\n</li>\n<li>\n<p>然后就无了, 这手段对于保存好几十/上百张图十分便利</p>\n</li>\n</ol>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表-4\">借物表</h2>\n<p><a name='cite_note-01' href='#cite_ref-01'>[1]</a>: <a href=\"https://www.jianshu.com/p/426425cad08a\">HLS 协议介绍</a></p>\n<p><a name='cite_note-2' href='#cite_ref-2'>[2]</a>: <a href=\"https://github.com/fftt2017/hls-m3u8-sample\">https://github.com/fftt2017/hls-m3u8-sample</a></p>\n<p><a name='cite_note-3' href='#cite_ref-3'>[3]</a>: <a href=\"https://zhuanlan.zhihu.com/p/32014463\">在线教育类网站视频加密视频安全的一些方法</a></p>\n<p><a name='cite_note-4' href='#cite_ref-4'>[4]</a>: <a href=\"https://github.com/Weidows-projects/hls-m3u8-sample\">https://github.com/Weidows-projects/hls-m3u8-sample</a>, 此库是在<sup id='cite_ref-2'><a href=\"#cite_note-2\">[2]</a></sup>的基础上改进的</p>\n<p><a name='cite_note-5' href='#cite_ref-5'>[5]</a>: <a href=\"https://www.52pojie.cn/thread-971265-1-1.html\">解密 m3u8 文件, ts 文件解密, hls 解密.</a></p>\n<p><a name='cite_note-6' href='#cite_ref-6'>[6]</a>: <a href=\"https://blog.csdn.net/Yao_2333/article/details/82910560\">ffmpeg-简单 AES 加解密记录</a></p>\n<p><a name='cite_note-7' href='#cite_ref-7'>[7]</a>: <a href=\"https://www.appinn.com/download-video-30482/\">恕我直言，再难下载的视频，手搓大佬终究还是有办法</a></p>\n<p><a name='cite_note-8' href='#cite_ref-8'>[8]</a>: <a href=\"https://www.zhihu.com/question/20697986/answer/128433075\">HLS 如何实现加密 ？</a></p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "推荐",
                "浏览器",
                "扩展",
                "ffmpeg",
                "算法",
                "hexdump",
                "hls",
                "openssl",
                "shell",
                "密码学",
                "qq"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/JavaScript/CORS/",
            "url": "https://weidows.github.io/post/Web/JavaScript/CORS/",
            "title": "😡一次解决CORS经验记录.",
            "date_published": "2021-07-08T09:48:32.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-07-11 19:49:07\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Web\\JavaScript\\CORS.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%85%B3%E8%81%94%E9%A1%B9%E7%9B%AE\">关联项目</a></li>\n<li><a href=\"#%E7%AE%80%E4%BB%8B\">简介</a></li>\n<li><a href=\"#%E5%89%96%E6%9E%90%E5%8E%9F%E6%96%99\">剖析原料</a></li>\n<li><a href=\"#%E9%97%AE%E9%A2%98%E5%B1%95%E7%A4%BA\">问题展示</a>\n<ul>\n<li><a href=\"#%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA\">图片显示</a></li>\n<li><a href=\"#fetch-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE\">fetch 获取数据</a></li>\n<li><a href=\"#canvas-%E6%93%8D%E4%BD%9C\">Canvas 操作</a></li>\n</ul>\n</li>\n<li><a href=\"#%E9%9C%80%E6%B1%82\">需求</a></li>\n<li><a href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\">解决方案</a></li>\n<li><a href=\"#%E6%94%B6%E5%B0%BE\">收尾</a></li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"关联项目\"><a href=\"https://github.com/Weidows/awesome-image-collector\">关联项目</a></h2>\n<h2 id=\"简介-10\">简介</h2>\n<p>跨域资源共享 CORS (Cross-origin resource sharing)</p>\n<p>从一个 <code>协议-子域名-主域名</code> 访问另一个 <code>协议-子域名-主域名</code> 下的资源就是 CORS,这三项有任何一项不同就判定为跨域.</p>\n<ul>\n<li>\n<p>下面的主角是 <code>图片</code>,从三个层次剖析,逐渐变难.</p>\n<ol>\n<li>图片显示</li>\n<li>fetch 获取数据</li>\n<li>canvas 操作</li>\n</ol>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"剖析原料\">剖析原料</h2>\n<ul>\n<li>\n<p>现在我这有两个网站,每个网站对应一个图片域名</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">网站\\域名</th>\n<th style=\"text-align:center\">主站域名</th>\n<th style=\"text-align:center\">图片域名</th>\n<th style=\"text-align:center\">图片跨域访问</th>\n<th style=\"text-align:center\">access-control-allow-origin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><a href=\"http://SM.MS\">SM.MS</a></td>\n<td style=\"text-align:center\"><a href=\"http://sm.ms\">sm.ms</a></td>\n<td style=\"text-align:center\"><a href=\"http://i.loli.net\">i.loli.net</a></td>\n<td style=\"text-align:center\">✔</td>\n<td style=\"text-align:center\">*</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">网页版 QQ 收藏</td>\n<td style=\"text-align:center\"><a href=\"http://sharechain.qq.com\">sharechain.qq.com</a></td>\n<td style=\"text-align:center\"><a href=\"http://shp.qpic.cn\">shp.qpic.cn</a></td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>如何查看图片域名是否允许跨域,以及允许跨域域名范围</p>\n<ol>\n<li>\n<p>在主站域名网页下打开<code>控制台-网页</code> 然后刷新网页,找到图片的请求</p>\n</li>\n<li>\n<p>然后看请求的标头 -&gt; 响应头,是否含有 <code>access-control-allow-origin</code> 这一项</p>\n</li>\n<li>\n<p>没有的话就是没开启 CORS,有的话右面的参数就是允许 CORS 的域名范围.</p>\n</li>\n</ol>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLBQT.png\" alt=\"20210709232207\" />\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"问题展示-2\">问题展示</h2>\n<h3 id=\"图片显示\">图片显示</h3>\n<ul>\n<li>\n<p>图片显示不受 CORS 是否开启影响,这两个图片域名在任何域名下都可以显示</p>\n<p>如图本地域名可以显示这两个域名下的图片 (各一张) 🥵</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4xFQ.png\" alt=\"20210709222815\" />\n</li>\n</ul>\n<h3 id=\"fetch-获取数据\">fetch 获取数据</h3>\n<ul>\n<li>\n<p><code>i.loli.net</code> 这个域名开启了 CORS</p>\n<p>并允许任何域名都可以跨域获取数据 (access-control-allow-origin: *)</p>\n</li>\n<li>\n<p>如下,在两个主站域名测试都可以得到如下结果:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPMJn.png\" alt=\"20210709221705\" />\n</li>\n<li>\n<p>变个卦:</p>\n<p>如果服务端修改 access-control-allow-origin 为 <code>https://sm.ms</code></p>\n<p>这个情况下,只能在 <a href=\"https://sm.ms\">https://sm.ms</a> 网页内可以 fetch 成功.</p>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>服务端没开启 CORS 的 <code>shp.qpic.cn</code></p>\n<p>除了本身域名 <a href=\"http://shp.qpic.cn\">shp.qpic.cn</a>,任何域名都 <code>没有权限获取数据</code> (可以显示但是无法 fetch)</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">Access</span> <span class=\"keyword\">to</span> image at <span class=\"string\">&#x27;xxx&#x27;</span> <span class=\"keyword\">from</span> origin <span class=\"string\">&#x27;xxx&#x27;</span> has been blocked <span class=\"keyword\">by</span> CORS <span class=\"keyword\">policy</span>: <span class=\"keyword\">No</span> <span class=\"string\">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class=\"keyword\">header</span> <span class=\"keyword\">is</span> present <span class=\"keyword\">on</span> the requested resource.</span><br></pre></td></tr></table></figure>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4Jzu.png\" alt=\"20210709222317\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"Canvas-操作\">Canvas 操作</h3>\n<ul>\n<li>\n<p>Canvas 操作 img 要求最严格</p>\n<ol>\n<li>\n<p>要求图片域名开启 CORS,并在 CORS 允许的域名下,服务端才可以响应数据</p>\n</li>\n<li>\n<p>img 标签设置属性 <code>crossorigin='anonymous'</code>,表示想要跨域,否则会报错 canvas 被污染</p>\n</li>\n</ol>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"需求-2\">需求</h2>\n<ul>\n<li>\n<p>现在有一个需求:</p>\n<p>在 <code>sharechain.qq.com</code> 下获取 <code>shp.qpic.cn</code> 的图片数据并通过 canvas 处理</p>\n<p>-&gt; 跨域,而且服务端不允许 CORS</p>\n<p>-&gt; 需要解决 canvas 跨域污染.</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"解决方案-3\">解决方案</h2>\n<ul>\n<li>\n<p>寻找了很多资料,这里贴上优秀文章</p>\n<blockquote>\n<p><a href=\"https://segmentfault.com/a/1190000011145364\">前端常见跨域解决方案（全）</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"http://t.zoukankan.com/goloving-p-12857575.html\">将在线图片转换成 base64 踩坑记录及静态资源跨域及缓存的处理</a></p>\n</blockquote>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>最终答案:</p>\n<p><code>纯前端无法解决跨域资源获取问题</code></p>\n<p>最快捷方案还是需要服务端开启… (显然是不可能)</p>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>但是</code>,找到了捷径: 浏览器插件可以直接解决跨域问题</p>\n<blockquote>\n<p><a href=\"https://microsoftedge.microsoft.com/addons/detail/cors-unblock/hkjklmhkbkdhlgnnfbbcihcajofmjgbh?hl=zh-CN\">CORS Unblock</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://microsoftedge.microsoft.com/addons/detail/allow-cors-accesscontro/bhjepjpgngghppolkjdhckmnfphffdag?hl=zh-CN\">Allow CORS: Access-Control-Allow-Origin</a></p>\n</blockquote>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"收尾-2\">收尾</h2>\n<p>现在,可以成功 fetch 跨域图片数据了,再把 img 设置 crossorigin=&quot;anonymous&quot;就完事了 <code>\\&gt;A&lt;/</code></p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "面试",
                "javascript",
                "大前端",
                "爬虫",
                "cors"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/7/",
            "url": "https://weidows.github.io/post/Java/Web/7/",
            "title": "🥼JavaWeb~(柒)文件/邮件传输.",
            "date_published": "2021-04-30T16:20:54.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-02 15:29:43\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\7.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93\">文件传输</a></li>\n<li><a href=\"#%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81\">邮件发送</a>\n<ul>\n<li><a href=\"#%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6\">简单邮件</a></li>\n<li><a href=\"#%E5%A4%8D%E6%9D%82%E9%82%AE%E4%BB%B6\">复杂邮件</a></li>\n</ul>\n</li>\n<li><a href=\"#lombok\">Lombok</a></li>\n<li><a href=\"#%E6%B3%A8%E5%86%8C-%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6-demo\">注册-发送邮件 demo</a></li>\n</ul>\n<h2 id=\"笔记代码-8\"><a href=\"https://github.com/Weidows/Weidows/blob/060600b2a9e13afa7c2f0e5d887d98b5d59318ce/JavaWeb/Last\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"文件传输\">文件传输</h2>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/melodyjerry/p/13549108.html\">参考: 【狂神说 Java】JavaWeb-文件上传</a></p>\n</blockquote>\n<ul>\n<li>\n<p>利用到了 Commons-io,通过 http 和 servlet 传输流文件.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.fileupload.FileItem;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.fileupload.FileUploadException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.UUID;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* Servlet implementation class FileServlet</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FileServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> <span class=\"number\">1L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class=\"line\">      <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 判断上传的文件普通表单还是带文件的表单</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!ServletFileUpload.isMultipartContent(request)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;<span class=\"comment\">//终止方法运行,说明这是一个普通的表单,直接返回</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 创建上传文件的保存路径，建议在WEB-INF路径下，安全，用户无法直接访问上传的文件</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">tmpPath</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getServletContext().getRealPath(<span class=\"string\">&quot;/WEB-INF/tmp&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">File</span> <span class=\"variable\">tempFile</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(tmpPath);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!tempFile.exists()) &#123;</span><br><span class=\"line\">      tempFile.mkdir();<span class=\"comment\">//创建临时目录</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//创建上传文件的保存路径,建议在WEB-INF路径下,安全,用户无法直接访间上传的文件;</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">uploadPath</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getServletContext().getRealPath(<span class=\"string\">&quot;/WEB-INF/upload&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">File</span> <span class=\"variable\">uploadFile</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(uploadPath);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!uploadFile.exists()) &#123;</span><br><span class=\"line\">      uploadFile.mkdir(); <span class=\"comment\">//创建这个月录</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">      处理上传的文件,一般都需要通过流来获取,我们可以使用 request.getInputStream(),原生态的文件上传流获取,十分麻烦</span></span><br><span class=\"line\"><span class=\"comment\">      建议使用 Apache的文件上传组件来实现, common-fileUpload,它需要 commons-io组件</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 获取ServletFileUpload</span></span><br><span class=\"line\">      <span class=\"type\">ServletFileUpload</span> <span class=\"variable\">fileUpload</span> <span class=\"operator\">=</span> getServletFileUpload(tempFile);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 处理上传文件</span></span><br><span class=\"line\">      <span class=\"comment\">// 把前端请求解析，封装成FileItem对象，需要从ServletFileUpload对象中获取</span></span><br><span class=\"line\">      <span class=\"type\">boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> uploadParseRequest(fileUpload, request, uploadPath);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// Servlet请求转发消息</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (flag) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Servlet请求转发消息</span></span><br><span class=\"line\">        request.setAttribute(<span class=\"string\">&quot;flag&quot;</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        request.setAttribute(<span class=\"string\">&quot;flag&quot;</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      request.getRequestDispatcher(<span class=\"string\">&quot;info.jsp&quot;</span>).forward(request, response);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (FileUploadException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ServletFileUpload <span class=\"title function_\">getServletFileUpload</span><span class=\"params\">(File tempFile)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 创建DiskFileItemFactory对象，处理文件路径或者大小限制</span></span><br><span class=\"line\">    <span class=\"type\">DiskFileItemFactory</span> <span class=\"variable\">factory</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DiskFileItemFactory</span>();</span><br><span class=\"line\">    <span class=\"comment\">// 通过这个工厂设置一个缓冲区,当上传的文件大于这个缓冲区的时候,将他放到临时文件中;</span></span><br><span class=\"line\">    factory.setSizeThreshold((<span class=\"type\">int</span>) <span class=\"number\">2e20</span>);<span class=\"comment\">// 缓冲区大小为1M</span></span><br><span class=\"line\">    factory.setRepository(tempFile);<span class=\"comment\">// 临时目录的保存目录,需要一个file</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">ServletFileUpload</span> <span class=\"variable\">servletFileUpload</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ServletFileUpload</span>(factory);</span><br><span class=\"line\">    <span class=\"comment\">// 处理乱码问题</span></span><br><span class=\"line\">    servletFileUpload.setHeaderEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 设置总共能够上传文件的大小 10M</span></span><br><span class=\"line\">    servletFileUpload.setFileSizeMax((<span class=\"type\">long</span>) <span class=\"number\">2e21</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">      监听长传进度</span></span><br><span class=\"line\"><span class=\"comment\">        pBytesRead:已读取到的文件大小</span></span><br><span class=\"line\"><span class=\"comment\">        pContextLength:文件大小</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    servletFileUpload.setProgressListener((<span class=\"type\">long</span> pBytesRead, <span class=\"type\">long</span> pContentLength, <span class=\"type\">int</span> pItems) -&gt; System.out.println(<span class=\"string\">&quot;已上传：&quot;</span> + pBytesRead + <span class=\"string\">&quot;\\n总大小：&quot;</span> + pContentLength));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> servletFileUpload;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">boolean</span> <span class=\"title function_\">uploadParseRequest</span><span class=\"params\">(ServletFileUpload upload, HttpServletRequest request, String uploadPath)</span></span><br><span class=\"line\">      <span class=\"keyword\">throws</span> FileUploadException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> <span class=\"literal\">false</span>; <span class=\"comment\">// 是否成功</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 把前端请求解析，封装成FileItem对象</span></span><br><span class=\"line\">    List&lt;FileItem&gt; fileItems = upload.parseRequest(request);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FileItem fileItem : fileItems) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 判断上传的文件是普通的表单还是带文件的表单</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (fileItem.isFormField()) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// getFieldName指的是前端表单控件的name;</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">name</span> <span class=\"operator\">=</span> fileItem.getFieldName();</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">value</span> <span class=\"operator\">=</span> fileItem.getString(<span class=\"string\">&quot;UTF-8&quot;</span>); <span class=\"comment\">// 处理乱码</span></span><br><span class=\"line\">        System.out.println(name + <span class=\"string\">&quot;: &quot;</span> + value);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// ============处理文件==============</span></span><br><span class=\"line\">        <span class=\"comment\">// 拿到文件名</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">uploadFileName</span> <span class=\"operator\">=</span> fileItem.getName();</span><br><span class=\"line\">        <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">          .trim() 删除前后空格</span></span><br><span class=\"line\"><span class=\"comment\">          下面的写法会导致&quot;uploadFileName == null&quot; 一直判定为false :</span></span><br><span class=\"line\"><span class=\"comment\">            uploadFileName.trim().equals(&quot;&quot;) || uploadFileName == null</span></span><br><span class=\"line\"><span class=\"comment\">            反过来就好了,原因是字符串对象引用改变了</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (uploadFileName == <span class=\"literal\">null</span> || uploadFileName.trim().equals(<span class=\"string\">&quot;&quot;</span>)) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 获得上传的文件名</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">fileName</span> <span class=\"operator\">=</span> uploadFileName.substring(uploadFileName.lastIndexOf(<span class=\"string\">&quot;/&quot;</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 获得文件的后缀名,如果文件后缀名fileExtName不是我们所需要的 就直按return.不处理,告诉用户文件类型不对。</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">fileExtName</span> <span class=\"operator\">=</span> uploadFileName.substring(uploadFileName.lastIndexOf(<span class=\"string\">&quot;.&quot;</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;文件名: &quot;</span> + fileName + <span class=\"string\">&quot;\\n后缀名&quot;</span> + fileExtName);</span><br><span class=\"line\">        <span class=\"comment\">// ================处理文件完毕==============</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">          UUID.randomUUID(),随机生一个唯一识别的通用码,保证文件夹名唯一</span></span><br><span class=\"line\"><span class=\"comment\">          文件真实存在的路径 realPath</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">realPath</span> <span class=\"operator\">=</span> uploadPath + <span class=\"string\">&quot;/&quot;</span> + UUID.randomUUID();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 给每个文件创建一个对应的文件夹</span></span><br><span class=\"line\">        <span class=\"type\">File</span> <span class=\"variable\">realPathFile</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(realPath);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!realPathFile.exists()) &#123;</span><br><span class=\"line\">          realPathFile.mkdir();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// ==============存放地址完毕==============</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 获得文件上传的流</span></span><br><span class=\"line\">        <span class=\"type\">InputStream</span> <span class=\"variable\">inputStream</span> <span class=\"operator\">=</span> fileItem.getInputStream();</span><br><span class=\"line\">        <span class=\"comment\">// 创建一个文件输出流</span></span><br><span class=\"line\">        <span class=\"type\">FileOutputStream</span> <span class=\"variable\">fileOutputStream</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FileOutputStream</span>(realPath + <span class=\"string\">&quot;/&quot;</span> + fileName);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 创建一个缓冲区</span></span><br><span class=\"line\">        <span class=\"type\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[(<span class=\"type\">int</span>) <span class=\"number\">2e20</span>]; <span class=\"comment\">// 1M</span></span><br><span class=\"line\">        <span class=\"type\">int</span> len;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> ((len = inputStream.read(buffer)) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          fileOutputStream.write(buffer, <span class=\"number\">0</span>, len);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 关闭流</span></span><br><span class=\"line\">        fileOutputStream.close();</span><br><span class=\"line\">        inputStream.close();</span><br><span class=\"line\"></span><br><span class=\"line\">        flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"comment\">// 上传成功,清除临时文件</span></span><br><span class=\"line\">        fileItem.delete();</span><br><span class=\"line\">        <span class=\"comment\">//=============文件传输完成=============</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> flag;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>项目地址</p>\n<p>包含用到的 JSP 页面和 xml 配置文件</p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb/Last\">https://github.com/Weidows/Java/tree/master/JavaWeb/Last</a></p>\n</blockquote>\n</li>\n<li>\n<p>问题: 如果 Tomcat 是 10 版本的,运行时会出现 500</p>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/m0_50905990/article/details/115339679\">servlet 配置相关：HTTP 状态 500 - 内部服务器错误问题</a></p>\n</blockquote>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"邮件发送\">邮件发送</h2>\n<ul>\n<li>\n<p>原理图:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSoBn.png\" alt=\"邮件传输原理.drawio\" />\n</li>\n<li>\n<p>依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.activation<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>activation<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/javax.mail/mail --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.mail<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mail<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.4.7<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n</ul>\n<hr>\n<h3 id=\"简单邮件\">简单邮件</h3>\n<ul>\n<li>\n<p>代码:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> com.sun.mail.util.MailSSLSocketFactory;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.internet.InternetAddress;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.internet.MimeMessage;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.GeneralSecurityException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MailDemo1</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">fromEmailAddress</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;utsuko27@qq.com&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">toEmailAddress</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;utsuko27@163.com&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;这里填授权码&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//0. 设置连接配置</span></span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">properties</span> <span class=\"operator\">=</span> getProperties();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//1.创建定义整个应用程序所需要的环境信息的session对象</span></span><br><span class=\"line\">    <span class=\"type\">Session</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> Session.getDefaultInstance(properties, <span class=\"keyword\">new</span> <span class=\"title class_\">Authenticator</span>() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"keyword\">protected</span> PasswordAuthentication <span class=\"title function_\">getPasswordAuthentication</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">PasswordAuthentication</span>(fromEmailAddress, password);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"comment\">//开启session的debug模式，这样可以查看到程序发送Email的运行状态</span></span><br><span class=\"line\">    session.setDebug(<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2.通过session得到transport对象</span></span><br><span class=\"line\">    <span class=\"type\">Transport</span> <span class=\"variable\">transport</span> <span class=\"operator\">=</span> session.getTransport();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//3.使用邮箱的用户名和授权码连上邮件服务器</span></span><br><span class=\"line\">    transport.connect(<span class=\"string\">&quot;smtp.qq.com&quot;</span>, fromEmailAddress, password);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4.创建邮件：写文件</span></span><br><span class=\"line\">    <span class=\"type\">MimeMessage</span> <span class=\"variable\">message</span> <span class=\"operator\">=</span> getMimeMessage(session);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5.发送邮件</span></span><br><span class=\"line\">    transport.sendMessage(message, message.getAllRecipients());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//6.关闭连接</span></span><br><span class=\"line\">    transport.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Properties <span class=\"title function_\">getProperties</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> GeneralSecurityException &#123;</span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">properties</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">    properties.setProperty(<span class=\"string\">&quot;mail.host&quot;</span>, <span class=\"string\">&quot;smtp.qq.com&quot;</span>);<span class=\"comment\">///设置QQ邮件服务器</span></span><br><span class=\"line\">    properties.setProperty(<span class=\"string\">&quot;mail.transport.protocol&quot;</span>, <span class=\"string\">&quot;smtp&quot;</span>);<span class=\"comment\">///邮件发送协议</span></span><br><span class=\"line\">    properties.setProperty(<span class=\"string\">&quot;mail.smtp.auth&quot;</span>, <span class=\"string\">&quot;true&quot;</span>);<span class=\"comment\">//需要验证用户密码</span></span><br><span class=\"line\">    <span class=\"comment\">//设置SSL加密(QQ邮箱需要)</span></span><br><span class=\"line\">    <span class=\"type\">MailSSLSocketFactory</span> <span class=\"variable\">mailSSLSocketFactory</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MailSSLSocketFactory</span>();</span><br><span class=\"line\">    mailSSLSocketFactory.setTrustAllHosts(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    properties.put(<span class=\"string\">&quot;mail.smtp.ssl.enable&quot;</span>, <span class=\"string\">&quot;true&quot;</span>);</span><br><span class=\"line\">    properties.put(<span class=\"string\">&quot;mail.smtp.ssl.socketFactory&quot;</span>, mailSSLSocketFactory);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> properties;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> MimeMessage <span class=\"title function_\">getMimeMessage</span><span class=\"params\">(Session session)</span> <span class=\"keyword\">throws</span> MessagingException &#123;</span><br><span class=\"line\">    <span class=\"type\">MimeMessage</span> <span class=\"variable\">message</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeMessage</span>(session);</span><br><span class=\"line\">    <span class=\"comment\">//指明邮件的发件人</span></span><br><span class=\"line\">    message.setFrom(<span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(fromEmailAddress));</span><br><span class=\"line\">    <span class=\"comment\">//指明邮件的收件人</span></span><br><span class=\"line\">    message.setRecipient(Message.RecipientType.TO, <span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(toEmailAddress));</span><br><span class=\"line\">    <span class=\"comment\">//邮件标题</span></span><br><span class=\"line\">    message.setSubject(<span class=\"string\">&quot;发送的标题&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">//邮件的文本内容</span></span><br><span class=\"line\">    message.setContent(<span class=\"string\">&quot;内容&quot;</span>, <span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<details>\n  <summary> -> 开启 Debug 后的信息 <-</summary>\n<hr>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DEBUG: setDebug: JavaMail version 1.4.7</span><br><span class=\"line\">DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Oracle]</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: useEhlo <span class=\"literal\">true</span>, useAuth <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: trying <span class=\"keyword\">to</span> connect <span class=\"keyword\">to</span> host <span class=\"string\">&quot;smtp.qq.com&quot;</span>,<span class=\"built_in\"> port </span>465, isSSL <span class=\"literal\">true</span></span><br><span class=\"line\">220 newxmesmtplogicsvrsza8.qq.com XMail Esmtp QQ Mail Server.</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: connected <span class=\"keyword\">to</span> host <span class=\"string\">&quot;smtp.qq.com&quot;</span>, port: 465</span><br><span class=\"line\"></span><br><span class=\"line\">EHLO DESKTOP-CTDDD3K</span><br><span class=\"line\">250-newxmesmtplogicsvrsza8.qq.com</span><br><span class=\"line\">250-PIPELINING</span><br><span class=\"line\">250-SIZE 73400320</span><br><span class=\"line\">250-AUTH LOGIN PLAIN XOAUTH XOAUTH2</span><br><span class=\"line\"><span class=\"attribute\">250-AUTH</span>=LOGIN</span><br><span class=\"line\">250-MAILCOMPRESS</span><br><span class=\"line\">250 8BITMIME</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;PIPELINING&quot;</span>, arg <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;SIZE&quot;</span>, arg <span class=\"string\">&quot;73400320&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;AUTH&quot;</span>, arg <span class=\"string\">&quot;LOGIN PLAIN XOAUTH XOAUTH2&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;AUTH=LOGIN&quot;</span>, arg <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;MAILCOMPRESS&quot;</span>, arg <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Found extension <span class=\"string\">&quot;8BITMIME&quot;</span>, arg <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Attempt <span class=\"keyword\">to</span> authenticate using mechanisms: LOGIN PLAIN DIGEST-MD5 NTLM</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: AUTH LOGIN command trace suppressed</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: AUTH LOGIN succeeded</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: use8bit <span class=\"literal\">false</span></span><br><span class=\"line\">MAIL <span class=\"keyword\">FROM</span>:&lt;utsuko27@qq.com&gt;</span><br><span class=\"line\">250 OK.</span><br><span class=\"line\">RCPT <span class=\"keyword\">TO</span>:&lt;utsuko27@163.com&gt;</span><br><span class=\"line\">250 OK</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP: Verified Addresses</span><br><span class=\"line\"><span class=\"built_in\">DEBUG</span> SMTP:   utsuko27@163.com</span><br><span class=\"line\">DATA</span><br><span class=\"line\">354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;.</span><br><span class=\"line\"><span class=\"keyword\">From</span>: utsuko27@qq.com</span><br><span class=\"line\"><span class=\"keyword\">To</span>: utsuko27@163.com</span><br><span class=\"line\">Message-ID: &lt;825249556.0.1619921529857.JavaMail.29845@smtp.qq.com&gt;</span><br><span class=\"line\">Subject: =?UTF-8?B?5Y+R6YCB55qE5qCH6aKY?=</span><br><span class=\"line\">MIME-Version: 1.0</span><br><span class=\"line\">Content-Type: text/html;<span class=\"attribute\">charset</span>=UTF-8</span><br><span class=\"line\">Content-Transfer-Encoding: base64</span><br><span class=\"line\"></span><br><span class=\"line\">5YaF5a65</span><br><span class=\"line\">.</span><br><span class=\"line\">250 OK: queued as.</span><br><span class=\"line\">QUIT</span><br><span class=\"line\">221 Bye.</span><br></pre></td></tr></table></figure>\n</details>\n</li>\n</ul>\n<hr>\n<h3 id=\"复杂邮件\">复杂邮件</h3>\n<ul>\n<li>\n<p>比如涉及到附件或者插入图片的邮件,这种邮件就需要进行特殊包装</p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAqE5.png\" alt=\"20210502102326\" />\n</blockquote>\n</li>\n<li>\n<p>代码 (只需要修改 getMimeMessage()方法)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* 含带附件的邮件</span></span><br><span class=\"line\"><span class=\"comment\">*</span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@param</span> session</span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@throws</span> MessagingException</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> MimeMessage <span class=\"title function_\">getMimeMessage</span><span class=\"params\">(Session session)</span> <span class=\"keyword\">throws</span> MessagingException &#123;</span><br><span class=\"line\">  <span class=\"type\">MimeMessage</span> <span class=\"variable\">message</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeMessage</span>(session);</span><br><span class=\"line\">  <span class=\"comment\">//指明邮件的发件人</span></span><br><span class=\"line\">  message.setFrom(<span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(fromEmailAddress));</span><br><span class=\"line\">  <span class=\"comment\">//指明邮件的收件人</span></span><br><span class=\"line\">  message.setRecipient(Message.RecipientType.TO, <span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(toEmailAddress));</span><br><span class=\"line\">  <span class=\"comment\">//邮件标题</span></span><br><span class=\"line\">  message.setSubject(<span class=\"string\">&quot;发送的标题&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//邮件的文本内容</span></span><br><span class=\"line\">  <span class=\"comment\">//=================================准备图片数据</span></span><br><span class=\"line\">  <span class=\"type\">MimeBodyPart</span> <span class=\"variable\">image</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeBodyPart</span>();</span><br><span class=\"line\">  <span class=\"comment\">//图片需要经过数据化的处理</span></span><br><span class=\"line\">  <span class=\"type\">DataHandler</span> <span class=\"variable\">dataHandler</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DataHandler</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">FileDataSource</span>(<span class=\"string\">&quot;D:/Game/Weidows/JavaWeb/Last/src/main/java/MailDemo.java&quot;</span>));</span><br><span class=\"line\">  <span class=\"comment\">//在part中放入这个处理过图片的数据</span></span><br><span class=\"line\">  image.setDataHandler(dataHandler);</span><br><span class=\"line\">  <span class=\"comment\">//给这个part设置一个ID名字</span></span><br><span class=\"line\">  image.setContentID(<span class=\"string\">&quot;嵌入.png&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//=================================准备正文数据</span></span><br><span class=\"line\">  <span class=\"type\">MimeBodyPart</span> <span class=\"variable\">text</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeBodyPart</span>();</span><br><span class=\"line\">  text.setContent(<span class=\"string\">&quot;这是一张正文&lt;img src=&#x27;嵌入.jpg&#x27;&gt;&quot;</span>, <span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//=================================准备附件数据</span></span><br><span class=\"line\">  <span class=\"type\">MimeBodyPart</span> <span class=\"variable\">body</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeBodyPart</span>();</span><br><span class=\"line\">  body.setDataHandler(<span class=\"keyword\">new</span> <span class=\"title class_\">DataHandler</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">FileDataSource</span>(<span class=\"string\">&quot;D:/Game/Weidows/JavaWeb/Last/src/main/java/MailDemo.java&quot;</span>)));</span><br><span class=\"line\">  body.setFileName(<span class=\"string\">&quot;附件.png&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//描述数据关系</span></span><br><span class=\"line\">  <span class=\"type\">MimeMultipart</span> <span class=\"variable\">mimeMultipart</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeMultipart</span>();</span><br><span class=\"line\">  mimeMultipart.addBodyPart(image);</span><br><span class=\"line\">  mimeMultipart.addBodyPart(text);</span><br><span class=\"line\">  mimeMultipart.addBodyPart(body);</span><br><span class=\"line\">  mimeMultipart.setSubType(<span class=\"string\">&quot;mixed&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//设置到消息中，保存修改</span></span><br><span class=\"line\">  message.setContent(mimeMultipart);</span><br><span class=\"line\">  message.saveChanges();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> message;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>测试过邮件发送没有问题,但是很有可能因为包装问题导致图片或者文件出现编码解析错误问题</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Lombok\">Lombok</h2>\n<ul>\n<li>\n<p>通过注解快速生成代码</p>\n</li>\n<li>\n<p>需要<code>安装插件</code>和<code>导入依赖</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.18.20<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>效果如图:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAz1g.png\" alt=\"20210502141126\" />\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"注册-发送邮件-demo\">注册-发送邮件 demo</h2>\n<blockquote>\n<p>其他资源可以去这里找: <a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/Last/src/main/java/demo\">代码</a></p>\n</blockquote>\n<ul>\n<li>\n<p>通过 JSP 获取表单中用户名,密码和 email,然后用 Servlet 获取,并开启邮件发送线程通知用户.</p>\n</li>\n<li>\n<p>发送邮件的类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.sun.mail.util.MailSSLSocketFactory;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.internet.InternetAddress;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.mail.internet.MimeMessage;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.GeneralSecurityException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SendMail</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Thread</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">fromEmailAddress</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;utsuko27@qq.com&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">toEmailAddress</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;utsuko27@163.com&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;授权码&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> User user;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">SendMail</span><span class=\"params\">(User user)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.user = user;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"type\">Session</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> Session.getDefaultInstance(getProperties(), <span class=\"keyword\">new</span> <span class=\"title class_\">Authenticator</span>() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">protected</span> PasswordAuthentication <span class=\"title function_\">getPasswordAuthentication</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">PasswordAuthentication</span>(fromEmailAddress, password);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      session.setDebug(<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"type\">MimeMessage</span> <span class=\"variable\">message</span> <span class=\"operator\">=</span> getMimeMessage(session);</span><br><span class=\"line\"></span><br><span class=\"line\">      send(session, message);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">      System.out.println(e);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> Properties <span class=\"title function_\">getProperties</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> GeneralSecurityException &#123;</span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">prop</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">    prop.setProperty(<span class=\"string\">&quot;mail.host&quot;</span>, <span class=\"string\">&quot;smtp.qq.com&quot;</span>);<span class=\"comment\">///设置QQ邮件服务器</span></span><br><span class=\"line\">    prop.setProperty(<span class=\"string\">&quot;mail.transport.protocol&quot;</span>, <span class=\"string\">&quot;smtp&quot;</span>);<span class=\"comment\">///邮件发送协议</span></span><br><span class=\"line\">    prop.setProperty(<span class=\"string\">&quot;mail.smtp.auth&quot;</span>, <span class=\"string\">&quot;true&quot;</span>);<span class=\"comment\">//需要验证用户密码</span></span><br><span class=\"line\">    <span class=\"comment\">//QQ邮箱需要设置SSL加密</span></span><br><span class=\"line\">    <span class=\"type\">MailSSLSocketFactory</span> <span class=\"variable\">sf</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MailSSLSocketFactory</span>();</span><br><span class=\"line\">    sf.setTrustAllHosts(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    prop.put(<span class=\"string\">&quot;mail.smtp.ssl.enable&quot;</span>, <span class=\"string\">&quot;true&quot;</span>);</span><br><span class=\"line\">    prop.put(<span class=\"string\">&quot;mail.smtp.ssl.socketFactory&quot;</span>, sf);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> prop;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> MimeMessage <span class=\"title function_\">getMimeMessage</span><span class=\"params\">(Session session)</span> <span class=\"keyword\">throws</span> MessagingException &#123;</span><br><span class=\"line\">    <span class=\"type\">MimeMessage</span> <span class=\"variable\">message</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeMessage</span>(session);</span><br><span class=\"line\">    <span class=\"comment\">//指明邮件的发件人</span></span><br><span class=\"line\">    message.setFrom(<span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(fromEmailAddress));</span><br><span class=\"line\">    <span class=\"comment\">//指明邮件的收件人</span></span><br><span class=\"line\">    message.setRecipient(Message.RecipientType.TO, <span class=\"keyword\">new</span> <span class=\"title class_\">InternetAddress</span>(toEmailAddress));</span><br><span class=\"line\">    <span class=\"comment\">//邮件标题</span></span><br><span class=\"line\">    message.setSubject(<span class=\"string\">&quot;注册通知&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">//邮件的文本内容</span></span><br><span class=\"line\">    message.setContent((<span class=\"string\">&quot;恭喜你(&quot;</span> + user.getUserName() + <span class=\"string\">&quot;)成功注册！&quot;</span> + <span class=\"string\">&quot;密码：&quot;</span> + user.getPassword())</span><br><span class=\"line\">        , <span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">send</span><span class=\"params\">(Session session, MimeMessage message)</span> <span class=\"keyword\">throws</span> MessagingException &#123;</span><br><span class=\"line\">    <span class=\"type\">Transport</span> <span class=\"variable\">transport</span> <span class=\"operator\">=</span> session.getTransport();</span><br><span class=\"line\">    transport.connect(<span class=\"string\">&quot;smtp.qq.com&quot;</span>, fromEmailAddress, password);</span><br><span class=\"line\">    transport.sendMessage(message, message.getAllRecipients());</span><br><span class=\"line\">    transport.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>Servlet 类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RegisterServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;pwd&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">email</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;email&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>(username, password, email);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">SendMail</span>(user).start(); <span class=\"comment\">// 开启线程</span></span><br><span class=\"line\">    resp.getWriter().write(<span class=\"string\">&quot;正在发送邮件....&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/6/",
            "url": "https://weidows.github.io/post/Java/Web/6/",
            "title": "🥼JavaWeb~(陆)JDBC,JUnit,SMBMS项目",
            "date_published": "2021-04-15T07:28:45.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-07-23 09:29:11\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\6.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#jdbc%E5%A4%8D%E4%B9%A0\">JDBC(复习)</a></li>\n<li><a href=\"#junit\">JUnit</a></li>\n<li><a href=\"#smbms\">SMBMS</a>\n<ul>\n<li><a href=\"#%E6%90%AD%E5%BB%BA\">搭建</a></li>\n<li><a href=\"#%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84\">后端项目结构</a></li>\n<li><a href=\"#%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\">连接配置文件</a></li>\n<li><a href=\"#orm-%E6%98%A0%E5%B0%84\">ORM 映射</a></li>\n<li><a href=\"#%E9%9D%99%E6%80%81%E5%9F%BA%E6%9C%AC%E7%B1%BB\">静态基本类</a></li>\n<li><a href=\"#%E9%A2%98%E5%A4%96%E8%AF%9D\">题外话</a></li>\n<li><a href=\"#%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95\">实现登录</a></li>\n<li><a href=\"#%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%E6%9E%84\">项目总结构</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"JDBC-复习\">JDBC(复习)</h2>\n<blockquote>\n<p>JDBC 连接 <a href=\"../../MySQL/4#jdbc\">🚀 进修 MySQL~(肆)</a></p>\n</blockquote>\n<blockquote>\n<p>事务 <a href=\"../../MySQL/5#ideasql\">🚀 进修 MySQL~(伍)</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JUnit\">JUnit</h2>\n<p>在一个方法上标记 <code>@Test</code> 注解后,这个方法可以脱离 Main 直接运行.</p>\n<ul>\n<li>\n<p>依赖 (一般创建项目时自带)</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--单元测试--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>例子:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">JDBCTest</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Test</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"SMBMS\">SMBMS</h2>\n<blockquote>\n<p>项目代码: <a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb/SMBMS\">https://github.com/Weidows/Java/tree/master/JavaWeb/SMBMS</a></p>\n</blockquote>\n<ul>\n<li>\n<p>可以拉取代码直接看,下面的笔记着重讲<code>从零开发的流程</code></p>\n</li>\n<li>\n<p>我的这个项目应该是跑不起来,在 web,xml 中 filter 那里有个 bug,不过无大碍,知道怎么个原理就好.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"搭建\">搭建</h3>\n<ul>\n<li>\n<p>Maven-webapp 项目,补全 src/resources,添加依赖,连接 Tomcat 和 MySQL,修改 web.xml 版本</p>\n<ul>\n<li>\n<p>依赖:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.13.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>compile<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- servlet依赖 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.0.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- JSP依赖 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet.jsp<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jstl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- Standard标签库 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>taglibs<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>standard<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.tomcat<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jsp-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>6.0.13<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.junit.jupiter<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit-jupiter-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;junit.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.junit.jupiter<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit-jupiter-engine<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;junit.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.23<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>更改版本号:<code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">version</span>=<span class=\"string\">&quot;4.0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">metadata-complete</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"后端项目结构\">后端项目结构</h3>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|&gt; src/main</span><br><span class=\"line\">  |&gt; java/com.weidows</span><br><span class=\"line\">    |&gt; dao/mapper           <span class=\"comment\">// data access object (对应pojo的CRUD类)</span></span><br><span class=\"line\">    |&gt; filter               <span class=\"comment\">// 过滤器</span></span><br><span class=\"line\">    |&gt; pojo/entity          <span class=\"comment\">// Plain Ordinary Java Object (ORM映射的实体类,内部一般只有getter和setter)</span></span><br><span class=\"line\">    |&gt; service              <span class=\"comment\">// 业务类 (操作dao)</span></span><br><span class=\"line\">    |&gt; servlet/controller   <span class=\"comment\">// servlet后端</span></span><br><span class=\"line\">    |&gt; utils                <span class=\"comment\">// 工具类</span></span><br><span class=\"line\">    |&gt; bean                 <span class=\"comment\">// spring中 == entity + dao</span></span><br><span class=\"line\">  |&gt; resources              <span class=\"comment\">// 资源文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">-------</span><br><span class=\"line\"></span><br><span class=\"line\">pojo对应数据库中每个记录</span><br><span class=\"line\">-&gt; 在dao中编写操作pojo的SQL/Java代码,实现CRUD的<span class=\"string\">&quot;方法&quot;</span></span><br><span class=\"line\">-&gt; 在service中通过Java编写事务,并调用dao中CRUD方法实现增删改查<span class=\"string\">&quot;功能&quot;</span></span><br><span class=\"line\">-&gt; 在servlet就是对应请求和响应来做业务,调用service中的方法.</span><br><span class=\"line\"></span><br><span class=\"line\">-------</span><br><span class=\"line\"></span><br><span class=\"line\">pojo为最底层,不涉及对象增删操作</span><br><span class=\"line\">-&gt; dao层</span><br><span class=\"line\">  -&gt; BaseDao实现创建connection/preparedStatement对象,以及回收connection/preparedStatement/resultSet的方法.</span><br><span class=\"line\">  -&gt; 进一步的dao类中进行创建resultSet对象,并回收resultSet/preparedStatement对象</span><br><span class=\"line\">-&gt; 在service层进行connection的关闭,捕获dao层抛出的异常,且此层不再向上抛出异常.</span><br></pre></td></tr></table></figure>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVt9XS.png\" alt=\"20210424112946\" />\n<hr>\n<h3 id=\"连接配置文件\">连接配置文件</h3>\n<p>(resources/db.properties)</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">driverClassName</span>=<span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"attr\">url</span>=<span class=\"string\">jdbc:mysql://localhost:3306/smbms?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class=\"line\"><span class=\"attr\">user</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"attr\">password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"ORM-映射\">ORM 映射</h3>\n<p>(编写 pojo 下的实体类)</p>\n<blockquote>\n<p>初始化 SQL: <a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/smbms.sql\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/smbms.sql</a></p>\n</blockquote>\n<blockquote>\n<p>pojo: <a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo</a></p>\n</blockquote>\n<hr>\n<h3 id=\"静态基本类\">静态基本类</h3>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/dao/BaseDao.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/dao/BaseDao.java</a></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.weidows.dao;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 操作数据库的基类--静态类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">BaseDao</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String driver;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String url;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String username;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String password;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">PreparedStatement</span> <span class=\"variable\">preparedStatement</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//静态代码块,在类加载的时候执行</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">configFile</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;db.properties&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">InputStream</span> <span class=\"variable\">inputStream</span> <span class=\"operator\">=</span> BaseDao.class.getClassLoader().getResourceAsStream(configFile);</span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">properties</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      properties.load(inputStream);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    driver = properties.getProperty(<span class=\"string\">&quot;driver&quot;</span>);</span><br><span class=\"line\">    url = properties.getProperty(<span class=\"string\">&quot;url&quot;</span>);</span><br><span class=\"line\">    username = properties.getProperty(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    password = properties.getProperty(<span class=\"string\">&quot;password&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 获取数据库连接</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span> connection</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Connection <span class=\"title function_\">getConnection</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (connection == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        Class.forName(driver);</span><br><span class=\"line\">        connection = DriverManager.getConnection(url, username, password);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> connection;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 查询数据库的公共操作</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> connection</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> rs</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> sql</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> params</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ResultSet <span class=\"title function_\">execute</span><span class=\"params\">(Connection connection, ResultSet rs, String sql, Object[] params)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      preparedStatement = connection.prepareStatement(sql);</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; params.length; i++) &#123;</span><br><span class=\"line\">        preparedStatement.setObject(i + <span class=\"number\">1</span>, params[i]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      rs = preparedStatement.executeQuery();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (SQLException throwables) &#123;</span><br><span class=\"line\">      throwables.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> rs;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 更新数据库的公共操作</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> connection</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> sql</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> params</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">execute</span><span class=\"params\">(Connection connection, String sql, Object[] params)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">updateRows</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      preparedStatement = connection.prepareStatement(sql);</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; params.length; i++) &#123;</span><br><span class=\"line\">        preparedStatement.setObject(i + <span class=\"number\">1</span>, params[i]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      updateRows = preparedStatement.executeUpdate();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (SQLException throwables) &#123;</span><br><span class=\"line\">      throwables.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> updateRows;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 释放资源</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> connection</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> pstm</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> rs</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">boolean</span> <span class=\"title function_\">closeResource</span><span class=\"params\">(Connection connection, PreparedStatement pstm, ResultSet rs)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (rs != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        rs.close();</span><br><span class=\"line\">        rs = <span class=\"literal\">null</span>;<span class=\"comment\">//GC回收</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (pstm != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        pstm.close();</span><br><span class=\"line\">        pstm = <span class=\"literal\">null</span>;<span class=\"comment\">//GC回收</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (connection != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        connection.close();</span><br><span class=\"line\">        connection = <span class=\"literal\">null</span>;<span class=\"comment\">//GC回收</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">      flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> flag;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"题外话\">题外话</h3>\n<ul>\n<li>\n<p>一个编程书写习惯: 方法中首先把需要用到的变量提出</p>\n<p>就像这里的三个变量,在一开始提出来,就像是类里面的 field,使用起来比较规范,容易排查</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> User <span class=\"title function_\">getLoginUser</span><span class=\"params\">(Connection connection, String userCode)</span> &#123;</span><br><span class=\"line\">  <span class=\"type\">PreparedStatement</span> <span class=\"variable\">pstm</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"literal\">null</span> != connection) &#123;</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">sql</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;select * from smbms_user where userCode=?&quot;</span>;</span><br><span class=\"line\">      Object[] params = &#123;userCode&#125;;</span><br><span class=\"line\">      resultSet = BaseDao.execute(connection, pstm, resultSet, sql, params);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (resultSet.next()) &#123;</span><br><span class=\"line\">        user = setData(resultSet);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    BaseDao.closeResource(<span class=\"literal\">null</span>, pstm, resultSet);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (SQLException throwables) &#123;</span><br><span class=\"line\">    throwables.printStackTrace();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"实现登录\">实现登录</h3>\n<ul>\n<li>\n<p>在这里复现一下&quot;登录&quot;业务,其他功能以此类推.</p>\n<p>这里着重<code>过程</code>(自上而下),具体怎么实现的业务建议结合源码来学习.</p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtTVD.png\" alt=\"20210422103020\" />\n</blockquote>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtwSu.png\" alt=\"20210425232035\" />\n</blockquote>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>com/weidows/pojo/User.java</code></p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo/User.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/pojo/User.java</a></p>\n</blockquote>\n</li>\n<li>\n<p><code>com/weidows/dao/user/UserDao.java</code></p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDao.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDao.java</a></p>\n</blockquote>\n</li>\n<li>\n<p><code>com/weidows/dao/user/UserDaoImpl.java</code></p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDaoImpl.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/dao/user/UserDaoImpl.java</a></p>\n</blockquote>\n</li>\n<li>\n<p><code>com/weidows/service/user/UserService.java</code></p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserService.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserService.java</a></p>\n</blockquote>\n</li>\n<li>\n<p><code>com/weidows/service/user/UserServiceImpl.java</code></p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserServiceImpl.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/service/user/UserServiceImpl.java</a></p>\n</blockquote>\n</li>\n<li>\n<p>前端页面</p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/webapp/login.jsp\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/webapp/login.jsp</a></p>\n</blockquote>\n</li>\n<li>\n<p>对应前端的常量类</p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/util/Constants.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/util/Constants.java</a></p>\n</blockquote>\n</li>\n<li>\n<p>对应 User 的 servlet 类</p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/UserServlet.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/UserServlet.java</a></p>\n</blockquote>\n</li>\n<li>\n<p>登录 servlet 类</p>\n<blockquote>\n<p><a href=\"https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/LoginServlet.java\">https://github.com/Weidows/Java/blob/master/JavaWeb/SMBMS/src/main/java/com/weidows/servlet/user/LoginServlet.java</a></p>\n</blockquote>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"项目总结构\">项目总结构</h3>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtQ5E.png\" alt=\"20210426105422\" />\n</blockquote>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "jdbc",
                "javaweb"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/5/",
            "url": "https://weidows.github.io/post/Java/Web/5/",
            "title": "🥼JavaWeb~(伍)架构,filter,listener,demo.",
            "date_published": "2021-04-08T15:43:55.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-01 00:27:57\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\5.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#mvc-%E6%9E%B6%E6%9E%84\">MVC 架构</a></li>\n<li><a href=\"#%E4%B8%AD%E9%97%B4%E5%B1%82%E5%B7%A5%E5%85%B7\">中间层工具</a>\n<ul>\n<li><a href=\"#filter-%E8%BF%87%E6%BB%A4%E5%99%A8\">Filter 过滤器</a>\n<ul>\n<li><a href=\"#%E4%BB%8B%E7%BB%8D\">介绍</a></li>\n<li><a href=\"#%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96\">导入依赖</a></li>\n<li><a href=\"#filter-%E4%BE%8B%E5%AD%90\">filter 例子</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%9B%91%E5%90%AC%E5%99%A8\">监听器</a></li>\n<li><a href=\"#gui-%E7%BC%96%E7%A8%8B%E4%BE%8B%E5%AD%90\">GUI 编程例子</a></li>\n<li><a href=\"#%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81-demo\">登录验证 demo</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"笔记代码-7\"><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"MVC-架构\">MVC 架构</h2>\n<blockquote>\n<p>Model 模型 view 视图 Controller 控制 三方分离的架构</p>\n</blockquote>\n<ul>\n<li>\n<p>之前的架构:</p>\n<ul>\n<li>Servlet 直接进行 CRUD 操作,程序比较臃肿,不利于维护</li>\n</ul>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtL8q.png\" alt=\"20210409093031\" />\n</blockquote>\n<hr>\n</li>\n<li>\n<p>于是,为了解决这种不便利性,再加一层! (没有什么是加一层解决不了的)</p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtbyK.png\" alt=\"20210409093440\" />\n</blockquote>\n<hr>\n</li>\n<li>\n<p>各部分的职责:</p>\n<ul>\n<li>\n<p>Model</p>\n<ul>\n<li>\n<p>业务处理 ：业务逻辑（Service）</p>\n</li>\n<li>\n<p>数据持久层：CRUD （Dao - 数据持久化对象）</p>\n</li>\n</ul>\n</li>\n<li>\n<p>View</p>\n<ul>\n<li>\n<p>展示数据</p>\n</li>\n<li>\n<p>提供链接发起 Servlet 请求 （a，form，img…）</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Controller （Servlet）</p>\n<ul>\n<li>\n<p>接收用户的请求 ：（req：请求参数、Session 信息….）</p>\n</li>\n<li>\n<p>交给业务层处理对应的代码</p>\n</li>\n<li>\n<p>控制视图的跳转 (转发/重定向)</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>一条流程:</p>\n<p>View 层点击登录 --&gt; 接收用户的登录请求 --&gt; 处理用户的请求（获取用户登录的参数，username，password）–&gt; 交给业务层处理登录业务（判断用户名密码是否正确：操作事务）–&gt; Dao 层查询用户名和密码是否正确 --&gt; 数据库</p>\n<p>顺利查询到数据之后就是反过来再进行数据传递</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"中间层工具\">中间层工具</h2>\n<ul>\n<li>\n<p>常见的有<code>过滤器 filter</code>,<code>监听器 listener</code>,<code>拦截器 Interceptor</code></p>\n<blockquote>\n<p><a href=\"https://www.zhihu.com/question/35225845\">请教一下关于过滤器，拦截器，监听器具体应用上的区别？</a></p>\n</blockquote>\n</li>\n<li>\n<p>下面介绍 filter(重点) 和 listener</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"Filter-过滤器\">Filter 过滤器</h3>\n<h4 id=\"介绍-2\">介绍</h4>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtHp1.png\" alt=\"20210409222335\" />\n</blockquote>\n<p>比如处理<code>中文乱码,敏感词汇,登录验证</code>…</p>\n<p>例子: 比如 Shiro 安全框架技术就是用 Filter 来实现的</p>\n<hr>\n<h4 id=\"导入依赖\">导入依赖</h4>\n<ul>\n<li>\n<p>老四样:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- servlet依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.0.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- JSP依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet.jsp<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jstl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Standard标签库 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>taglibs<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>standard<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>之后好像还会用到 SQL 驱动依赖,到时候在说.</p>\n</li>\n</ul>\n<hr>\n<h4 id=\"filter-例子\">filter 例子</h4>\n<ul>\n<li>\n<p><code>src/main/java/filter/CharacterEncodingFilter.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> filter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">CharacterEncodingFilter</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Filter</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//初始化并等待过滤对象出现</span></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">init</span><span class=\"params\">(FilterConfig filterConfig)</span> <span class=\"keyword\">throws</span> ServletException &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;CharacterEncodingFilter初始化&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    1. 过滤中的所有代码，在过滤特定请求的时候都会执行</span></span><br><span class=\"line\"><span class=\"comment\">    2. 必须要让过滤器继续执行 (因为filter可能不止一个,需要传递)</span></span><br><span class=\"line\"><span class=\"comment\">      chain.doFilter(request,response);</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doFilter</span><span class=\"params\">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class=\"keyword\">throws</span> IOException, ServletException &#123;</span><br><span class=\"line\">    request.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">    response.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">    response.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;CharacterEncodingFilter执行前....&quot;</span>);</span><br><span class=\"line\">    chain.doFilter(request, response); <span class=\"comment\">//让我们的请求继续走，如果不写，程序到这里就被拦截停止！</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;CharacterEncodingFilter执行后....&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//销毁：web服务器关闭的时候，过滤器会销毁</span></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">destroy</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;CharacterEncodingFilter销毁&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/java/servlet/Show.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> servlet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Show</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 通过filter实现处理乱码</span></span><br><span class=\"line\">    resp.getWriter().write(<span class=\"string\">&quot;你好!&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code> 配置 servlet 和 filter</p>\n</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">version</span>=<span class=\"string\">&quot;4.0&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>show<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.Show<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>characterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-class</span>&gt;</span>filter.CharacterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--还是乱码的页面--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>show<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/show<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--通过过滤器解决了乱码的页面--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>show<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/servlet/show<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--filter的地址映射--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">filter-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>characterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/servlet/*<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">filter-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"监听器\">监听器</h3>\n<blockquote>\n<ul>\n<li>对应不同业务需求,存在 N 中不同的监听器接口可供实现.</li>\n<li>监听器经常在 GUI 编程中使用.</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>例子: 设置 session 监听器监听有多少 session 连接</p>\n</li>\n<li>\n<p><code>src/main/java/listener/OnlineCountListener.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> listener;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSessionEvent;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSessionListener;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//统计网站在线人数 -&gt; 统计session</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">OnlineCountListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">HttpSessionListener</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> ServletContext ctx;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> Integer onlineCount;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//一旦创建Session就会触发一次这个事件</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sessionCreated</span><span class=\"params\">(HttpSessionEvent se)</span> &#123;</span><br><span class=\"line\">    initParam(se);</span><br><span class=\"line\">    ctx.setAttribute(<span class=\"string\">&quot;OnlineCount&quot;</span>, ++onlineCount);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    一旦销毁Session就会触发一次这个事件</span></span><br><span class=\"line\"><span class=\"comment\">    Session销毁：</span></span><br><span class=\"line\"><span class=\"comment\">      1. 手动销毁  getSession().invalidate();</span></span><br><span class=\"line\"><span class=\"comment\">      2. 自动销毁</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sessionDestroyed</span><span class=\"params\">(HttpSessionEvent se)</span> &#123;</span><br><span class=\"line\">    initParam(se);</span><br><span class=\"line\">    ctx.setAttribute(<span class=\"string\">&quot;OnlineCount&quot;</span>, --onlineCount);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">initParam</span><span class=\"params\">(HttpSessionEvent se)</span> &#123;</span><br><span class=\"line\">    ctx = se.getSession().getServletContext();</span><br><span class=\"line\">    onlineCount = (Integer) ctx.getAttribute(<span class=\"string\">&quot;OnlineCount&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (onlineCount == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      ctx.setAttribute(<span class=\"string\">&quot;OnlineCount&quot;</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>index.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;在线人数测试&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;当前有 &lt;span</span><br><span class=\"line\">    style=<span class=\"string\">&quot;color: turquoise;&quot;</span>&gt;&lt;%=<span class=\"built_in\">this</span>.getServletConfig().getServletContext().getAttribute(<span class=\"string\">&quot;OnlineCount&quot;</span>)%&gt;&lt;/span&gt; 人在线</span><br><span class=\"line\">&lt;/h1&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>注册监听器</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--注册监听器--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">listener</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">listener-class</span>&gt;</span>listener.OnlineCountListener<span class=\"tag\">&lt;/<span class=\"name\">listener-class</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"GUI-编程例子\">GUI 编程例子</h3>\n<ul>\n<li>\n<p>GUI 编程常会用到监听器,这里简单介绍一下 : <code>src/main/java/listener/TestPanel.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> listener;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.WindowAdapter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.WindowEvent;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestPanel</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Frame</span> <span class=\"variable\">frame</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Frame</span>(<span class=\"string\">&quot;Hello World!&quot;</span>);  <span class=\"comment\">//新建一个窗体</span></span><br><span class=\"line\">    <span class=\"type\">Panel</span> <span class=\"variable\">panel</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Panel</span>(<span class=\"literal\">null</span>); <span class=\"comment\">//面板</span></span><br><span class=\"line\">    frame.setLayout(<span class=\"literal\">null</span>); <span class=\"comment\">//设置窗体的布局</span></span><br><span class=\"line\"></span><br><span class=\"line\">    frame.setBounds(<span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">500</span>, <span class=\"number\">500</span>);</span><br><span class=\"line\">    frame.setBackground(<span class=\"keyword\">new</span> <span class=\"title class_\">Color</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">255</span>)); <span class=\"comment\">//设置背景颜色</span></span><br><span class=\"line\"></span><br><span class=\"line\">    panel.setBounds(<span class=\"number\">50</span>, <span class=\"number\">50</span>, <span class=\"number\">300</span>, <span class=\"number\">300</span>);</span><br><span class=\"line\">    panel.setBackground(<span class=\"keyword\">new</span> <span class=\"title class_\">Color</span>(<span class=\"number\">0</span>, <span class=\"number\">255</span>, <span class=\"number\">0</span>)); <span class=\"comment\">//设置背景颜色</span></span><br><span class=\"line\"></span><br><span class=\"line\">    frame.add(panel);</span><br><span class=\"line\"></span><br><span class=\"line\">    frame.setVisible(<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//监听事件，监听关闭事件</span></span><br><span class=\"line\">    frame.addWindowListener(<span class=\"keyword\">new</span> <span class=\"title class_\">WindowAdapter</span>() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">windowClosing</span><span class=\"params\">(WindowEvent e)</span> &#123;</span><br><span class=\"line\">        System.exit(<span class=\"number\">0</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"登录验证-demo\">登录验证 demo</h3>\n<ul>\n<li>\n<p>项目结构,如图:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtMmb.png\" alt=\"20210411004248\" />\n<hr>\n</li>\n<li>\n<p>JSP 页面</p>\n<ul>\n<li>\n<p>主页(登录页面): <code>web/demo/index.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;主页&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;登录&lt;/h1&gt;</span><br><span class=\"line\">&lt;form action=<span class=\"string\">&quot;$&#123;pageContext.request.contextPath&#125;/demo/login&quot;</span> method=<span class=\"string\">&quot;post&quot;</span>&gt;</span><br><span class=\"line\">  &lt;label&gt;</span><br><span class=\"line\">    用户名:</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;username&quot;</span>/&gt;</span><br><span class=\"line\">  &lt;/label&gt;</span><br><span class=\"line\">  &lt;input type=<span class=\"string\">&quot;submit&quot;</span> value=<span class=\"string\">&quot;登录&quot;</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>登陆失败: <code>web/demo/failed.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;登录失败&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;登录失败进入的页面&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;a href=<span class=\"string\">&quot;$&#123;pageContext.request.contextPath&#125;/demo/index.jsp&quot;</span>&gt;返回主页&lt;/a&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>登录成功: <code>web/demo/sys/success.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;已登录&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;登录成功后进入的页面&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;hr&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;a href=<span class=\"string\">&quot;$&#123;pageContext.request.contextPath&#125;/demo/logout&quot;</span>&gt;注销&lt;/a&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>Java 后端</p>\n<ul>\n<li>\n<p>login: <code>src/main/java/demo/servlet/Login.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo.servlet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> demo.utils.Constants;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Login</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">HttpSession</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> req.getSession();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (username.equals(<span class=\"string\">&quot;admin&quot;</span>)) &#123;</span><br><span class=\"line\">      session.setAttribute(Constants.USER_SESSION, session.getId());</span><br><span class=\"line\">      resp.sendRedirect(<span class=\"string\">&quot;/demo/sys/success.jsp&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      resp.sendRedirect(<span class=\"string\">&quot;/demo/failed.jsp&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>注销: <code>src/main/java/demo/servlet/Logout.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo.servlet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> demo.utils.Constants;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Logout</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">HttpSession</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> req.getSession();</span><br><span class=\"line\">    <span class=\"type\">Object</span> <span class=\"variable\">attribute</span> <span class=\"operator\">=</span> session.getAttribute(Constants.USER_SESSION);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">      频繁操作session连接会影响性能,通过attribute间接验证登录信息</span></span><br><span class=\"line\"><span class=\"comment\">      通过设置或移除 USER_SESSION 属性来验证是否登录</span></span><br><span class=\"line\"><span class=\"comment\">      存在一个Bug: 在注销状态通过浏览器的后退,可以返回登陆成功的页面(且不存在USER_SESSION)</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attribute != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      session.removeAttribute(Constants.USER_SESSION);</span><br><span class=\"line\">      resp.sendRedirect(<span class=\"string\">&quot;/demo/index.jsp&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>提取的常量工具类: <code>src/main/java/demo/utils/Constants.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo.utils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* 此类内定义一些其他各种地方需要经常调用的常量</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Constants</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">USER_SESSION</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;USER_SESSION&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>过滤器类: <code>src/main/java/demo/filter/SysFilter.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo.filter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> demo.utils.Constants;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SysFilter</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Filter</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">init</span><span class=\"params\">(FilterConfig filterConfig)</span> <span class=\"keyword\">throws</span> ServletException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doFilter</span><span class=\"params\">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class=\"keyword\">throws</span> IOException, ServletException &#123;</span><br><span class=\"line\">    <span class=\"type\">HttpServletRequest</span> <span class=\"variable\">req</span> <span class=\"operator\">=</span> (HttpServletRequest) request;</span><br><span class=\"line\">    <span class=\"type\">HttpServletResponse</span> <span class=\"variable\">resp</span> <span class=\"operator\">=</span> (HttpServletResponse) response;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Object</span> <span class=\"variable\">attribute</span> <span class=\"operator\">=</span> req.getSession().getAttribute(Constants.USER_SESSION);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (attribute == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      resp.sendRedirect(<span class=\"string\">&quot;/demo/failed.jsp&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    chain.doFilter(request, response);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">destroy</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>Web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>login<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>demo.servlet.Login<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>logout<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>demo.servlet.Logout<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>sysFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">filter-class</span>&gt;</span>demo.filter.SysFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-class</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>login<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/demo/login<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>logout<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/demo/logout<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">filter-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>sysFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/demo/sys/*<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb",
                "servlet",
                "filter",
                "架构"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/4/",
            "url": "https://weidows.github.io/post/Java/Web/4/",
            "title": "🥼JavaWeb~(肆)摸索JSP,JavaBean",
            "date_published": "2021-04-06T15:45:19.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-01 00:26:52\n\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#jsp\">JSP</a>\n<ul>\n<li><a href=\"#%E5%AE%9A%E5%88%B6%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2\">定制错误页面</a></li>\n<li><a href=\"#%E5%90%88%E5%B9%B6%E9%A1%B5%E9%9D%A2\">合并页面</a></li>\n<li><a href=\"#%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%8F%8A%E4%BD%9C%E7%94%A8%E5%9F%9F\">内置对象及作用域</a></li>\n<li><a href=\"#jsp-%E6%A0%87%E7%AD%BE\">JSP 标签</a></li>\n<li><a href=\"#jstl-%E8%A1%A8%E8%BE%BE%E5%BC%8F\">JSTL 表达式</a></li>\n</ul>\n</li>\n<li><a href=\"#javabean\">JavaBean</a></li>\n</ul>\n<h2 id=\"笔记代码-6\"><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JSP-2\">JSP</h2>\n<h3 id=\"定制错误页面\">定制错误页面</h3>\n<ul>\n<li>\n<p>方法一: 直接在 jsp 页面配置 errorPage</p>\n<ul>\n<li>\n<p><code>errors/index.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%--此处定制错误页面指向--%&gt;</span><br><span class=\"line\">&lt;%@ page errorPage=<span class=\"string\">&quot;errors/500.jsp&quot;</span> %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;错误页面&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">  <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">1</span> / <span class=\"number\">0</span>;</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>errors/500.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;<span class=\"number\">500</span>错误&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;<span class=\"number\">500</span>错误页面.&lt;/h1&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>方法二: 在 web.xml 中配置</p>\n<ul>\n<li>\n<p>errors/404.jsp</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;<span class=\"number\">404</span>错误&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;<span class=\"number\">404</span>错误页面.&lt;/h1&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">error-page</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">error-code</span>&gt;</span>404<span class=\"tag\">&lt;/<span class=\"name\">error-code</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">location</span>&gt;</span>/errors/404.jsp<span class=\"tag\">&lt;/<span class=\"name\">location</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">error-page</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">error-page</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">error-code</span>&gt;</span>500<span class=\"tag\">&lt;/<span class=\"name\">error-code</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">location</span>&gt;</span>/errors/500.jsp<span class=\"tag\">&lt;/<span class=\"name\">location</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">error-page</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"合并页面\">合并页面</h3>\n<ul>\n<li>\n<p><code>common/header.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;h1&gt;这里是header&lt;/h1&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>common/footer.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;h1&gt;这里是footer&lt;/h1&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>common/index.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;测试common&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">      这种会把include的页面内容合并进本页面,最后是展示一个页面</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;%@ include file=<span class=\"string\">&quot;header.jsp&quot;</span> %&gt;</span><br><span class=\"line\">    &lt;h1&gt;网页主体&lt;/h1&gt;</span><br><span class=\"line\">    &lt;%@ include file=<span class=\"string\">&quot;footer.jsp&quot;</span> %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;HR /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">      jsp:include标签,本质是导入其他文件内容,最后是多个文件合为一个页面展示</span><br><span class=\"line\">      (更灵活,建议用这个)</span><br><span class=\"line\">        上面方法的因为是合并,所以很有可能出现变量重名,干扰的问题</span><br><span class=\"line\">        这个方法不同文件之间互不干扰</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;jsp:include page=<span class=\"string\">&quot;/common/header.jsp&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;h1&gt;网页主体&lt;/h1&gt;</span><br><span class=\"line\">    &lt;jsp:include page=<span class=\"string\">&quot;/common/footer.jsp&quot;</span> /&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"内置对象及作用域\">内置对象及作用域</h3>\n<ul>\n<li>\n<p>内置对象</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PageContext 存东西</span><br><span class=\"line\">Request 存东西</span><br><span class=\"line\">Response</span><br><span class=\"line\"><span class=\"keyword\">Session</span> 存东西</span><br><span class=\"line\">Application 【SerlvetContext】 存东西</span><br><span class=\"line\">config 【SerlvetConfig】</span><br><span class=\"line\"><span class=\"keyword\">out</span></span><br><span class=\"line\">page ，不用了解</span><br><span class=\"line\"><span class=\"keyword\">exception</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>操作对象 <code>demo/1.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--</span><br><span class=\"line\">* @?: *********************************************************************</span><br><span class=\"line\">* <span class=\"meta\">@Author</span>: Weidows</span><br><span class=\"line\">* <span class=\"meta\">@Date</span>: <span class=\"number\">2021</span>-<span class=\"number\">04</span>-<span class=\"number\">07</span> <span class=\"number\">16</span>:<span class=\"number\">29</span>:<span class=\"number\">42</span></span><br><span class=\"line\">* <span class=\"meta\">@LastEditors</span>: Weidows</span><br><span class=\"line\">* <span class=\"meta\">@LastEditTime</span>: <span class=\"number\">2021</span>-<span class=\"number\">04</span>-<span class=\"number\">07</span> <span class=\"number\">17</span>:<span class=\"number\">29</span>:<span class=\"number\">11</span></span><br><span class=\"line\">* <span class=\"meta\">@FilePath</span>: \\Weidows\\JavaWeb\\JSP\\src\\main\\webapp\\<span class=\"number\">1.</span>jsp</span><br><span class=\"line\">* <span class=\"meta\">@Description</span>:</span><br><span class=\"line\">* @!: *********************************************************************</span><br><span class=\"line\">* servlet <span class=\"number\">2.3</span>默认不支持EL表达式,需要开启.</span><br><span class=\"line\">--&gt;</span><br><span class=\"line\">&lt;%@ page isELIgnored=<span class=\"string\">&quot;false&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;index4&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;%--</span><br><span class=\"line\">      PageContext 存东西</span><br><span class=\"line\">      Request 存东西</span><br><span class=\"line\">      Response</span><br><span class=\"line\">      Session 存东西</span><br><span class=\"line\">      Application 【SerlvetContext】 存东西</span><br><span class=\"line\">      config 【SerlvetConfig】</span><br><span class=\"line\">      out</span><br><span class=\"line\">      page ，不用了解</span><br><span class=\"line\">      exception</span><br><span class=\"line\">    --%&gt;</span><br><span class=\"line\">    &lt;%</span><br><span class=\"line\">      pageContext.setAttribute(<span class=\"string\">&quot;name1&quot;</span>, <span class=\"string\">&quot;秦疆1号&quot;</span>); <span class=\"comment\">// 保存的数据只在一个页面中有效</span></span><br><span class=\"line\">      request.setAttribute(<span class=\"string\">&quot;name2&quot;</span>, <span class=\"string\">&quot;秦疆2号&quot;</span>); <span class=\"comment\">// 保存的数据只在一次请求中有效，请求转发会携带这个数据</span></span><br><span class=\"line\">      session.setAttribute(<span class=\"string\">&quot;name3&quot;</span>, <span class=\"string\">&quot;秦疆3号&quot;</span>); <span class=\"comment\">// 保存的数据只在一次会话中有效，从打开浏览器到关闭浏览器</span></span><br><span class=\"line\">      application.setAttribute(<span class=\"string\">&quot;name4&quot;</span>, <span class=\"string\">&quot;秦疆4号&quot;</span>); <span class=\"comment\">// 保存的数据只在服务器中有效，从打开服务器到关闭服务器</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 作用域从小到大</span></span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">name1</span> <span class=\"operator\">=</span> (String) pageContext.findAttribute(<span class=\"string\">&quot;name1&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">name2</span> <span class=\"operator\">=</span> (String) pageContext.findAttribute(<span class=\"string\">&quot;name2&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">name3</span> <span class=\"operator\">=</span> (String) pageContext.findAttribute(<span class=\"string\">&quot;name3&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">name4</span> <span class=\"operator\">=</span> (String) pageContext.findAttribute(<span class=\"string\">&quot;name4&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">name5</span> <span class=\"operator\">=</span> (String) pageContext.findAttribute(<span class=\"string\">&quot;name5&quot;</span>); <span class=\"comment\">// 这个不存在</span></span><br><span class=\"line\">    %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;%--</span><br><span class=\"line\">      EL表达式</span><br><span class=\"line\">      $&#123;内容&#125; == &lt;%= 内容 %&gt;</span><br><span class=\"line\">      用EL表达式的话,<span class=\"literal\">null</span>值不会显示,而使用JSP表达式会显示<span class=\"literal\">null</span>值</span><br><span class=\"line\">    --%&gt;</span><br><span class=\"line\">    &lt;h1&gt;取出的内容:&lt;/h1&gt;</span><br><span class=\"line\">    &lt;h3&gt;$&#123;name1&#125;&lt;/h3&gt;</span><br><span class=\"line\">    &lt;h3&gt;$&#123;name2&#125;&lt;/h3&gt;</span><br><span class=\"line\">    &lt;h3&gt;$&#123;name3&#125;&lt;/h3&gt;</span><br><span class=\"line\">    &lt;h3&gt;$&#123;name4&#125;&lt;/h3&gt;</span><br><span class=\"line\">    &lt;HR&gt;</span><br><span class=\"line\">    &lt;h3&gt;$&#123;name5&#125;&lt;/h3&gt;</span><br><span class=\"line\">    &lt;h3&gt;&lt;%=name5%&gt;&lt;/h3&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtAMc.png\" alt=\"20210407173249\" />\n<hr>\n</li>\n<li>\n<p>作用域</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtiZr.png\" alt=\"20210407175219\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"JSP-标签\">JSP 标签</h3>\n<ul>\n<li>\n<p>例子: 使用 JSP 标签转发页面,读取参数并显示出来.</p>\n</li>\n<li>\n<p><code>src/main/webapp/demo/JSP-label/forward.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;JSP-label&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;%-- 转发request携带的参数(注意JSP标签内不能有注释,会报错<span class=\"number\">500</span>) --%&gt;</span><br><span class=\"line\">&lt;jsp:forward page=<span class=\"string\">&quot;forward.jsp&quot;</span>&gt;</span><br><span class=\"line\">  &lt;jsp:param name=<span class=\"string\">&quot;name&quot;</span> value=<span class=\"string\">&quot;kuangshen&quot;</span>/&gt;</span><br><span class=\"line\">  &lt;jsp:param name=<span class=\"string\">&quot;age&quot;</span> value=<span class=\"string\">&quot;12&quot;</span>/&gt;</span><br><span class=\"line\">&lt;/jsp:forward&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/webapp/demo/JSP-label/forward.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@ page isELIgnored=<span class=\"string\">&quot;false&quot;</span> %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;转发页面&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">  pageContext.setAttribute(<span class=\"string\">&quot;name&quot;</span>, request.getParameter(<span class=\"string\">&quot;name&quot;</span>));</span><br><span class=\"line\">  pageContext.setAttribute(<span class=\"string\">&quot;age&quot;</span>, request.getParameter(<span class=\"string\">&quot;age&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;h3&gt;姓名: $&#123;name&#125;&lt;/h3&gt;</span><br><span class=\"line\">&lt;h3&gt;年龄: $&#123;age&#125;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"JSTL-表达式\">JSTL 表达式</h3>\n<blockquote>\n<p>JSTL 标签库的使用就是为了弥补 HTML 标签的不足,功能上与 Java 相似.</p>\n</blockquote>\n<ul>\n<li>\n<p>分类</p>\n<ul>\n<li>\n<p>格式化标签</p>\n</li>\n<li>\n<p>SQL 标签</p>\n</li>\n<li>\n<p>XML 标签</p>\n</li>\n<li>\n<p>JSTL 函数</p>\n</li>\n<li>\n<p>核心标签 （掌握部分）</p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtnST.png\" alt=\"20210407195349\" />\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p>使用</p>\n<ul>\n<li>\n<p>在 pom.xml 中导入依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jstl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Standard标签库 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>taglibs<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>standard<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>在 JSP 页面还需要引入对应要使用的 taglib,这里只用到 core:</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ taglib prefix=<span class=\"string\">&quot;c&quot;</span> uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>if</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt; &lt;%@ taglib</span><br><span class=\"line\">prefix=<span class=\"string\">&quot;c&quot;</span> uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt; &lt;%@ page</span><br><span class=\"line\">isELIgnored=<span class=\"string\">&quot;false&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;<span class=\"keyword\">if</span>测试&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;%--action是代码提交位置--%&gt;</span><br><span class=\"line\">    &lt;form action=<span class=\"string\">&quot;if.jsp&quot;</span> method=<span class=\"string\">&quot;post&quot;</span>&gt;</span><br><span class=\"line\">      &lt;label&gt;</span><br><span class=\"line\">        用户名:</span><br><span class=\"line\">        &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;username&quot;</span> /&gt;</span><br><span class=\"line\">      &lt;/label&gt;</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;submit&quot;</span> value=<span class=\"string\">&quot;登录&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;/form&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;hr /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;%--</span><br><span class=\"line\">      EL表达式获取表单中的数据 $&#123;param.参数名&#125;</span><br><span class=\"line\">      判断如果提交的用户名是admin，则登录成功,并把isAdmin置为<span class=\"literal\">true</span></span><br><span class=\"line\">      --%&gt;</span><br><span class=\"line\">    &lt;c:<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;$&#123;param.username==&#x27;admin&#x27;&#125;&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;isAdmin&quot;</span>&gt;</span><br><span class=\"line\">      &lt;c:out value=<span class=\"string\">&quot;管理员欢迎您！&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;/c:<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>choose-when</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;%-- Created by IntelliJ IDEA. User: <span class=\"number\">29845</span> Date: <span class=\"number\">2021</span>/<span class=\"number\">4</span>/<span class=\"number\">8</span> Time: <span class=\"number\">20</span>:<span class=\"number\">38</span> To change</span><br><span class=\"line\"><span class=\"built_in\">this</span> template use File | Settings | File Templates. --%&gt; &lt;%@ page</span><br><span class=\"line\">contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt; &lt;%@ page</span><br><span class=\"line\">isELIgnored=<span class=\"string\">&quot;false&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;choose-when测试&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;form action=<span class=\"string\">&quot;&quot;</span> method=<span class=\"string\">&quot;post&quot;</span>&gt;</span><br><span class=\"line\">      &lt;label&gt;</span><br><span class=\"line\">        &lt;%--定义一个变量score--%&gt;</span><br><span class=\"line\">        &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;score&quot;</span> /&gt;</span><br><span class=\"line\">      &lt;/label&gt;</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;submit&quot;</span> name=<span class=\"string\">&quot;提交&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;/form&gt;</span><br><span class=\"line\">    &lt;c:choose&gt;</span><br><span class=\"line\">      &lt;c:when test=<span class=\"string\">&quot;$&#123;param.score&gt;=90&#125;&quot;</span>&gt; 你的成绩为优秀 &lt;/c:when&gt;</span><br><span class=\"line\">      &lt;c:when test=<span class=\"string\">&quot;$&#123;param.score&gt;=80&#125;&quot;</span>&gt; 你的成绩为一般 &lt;/c:when&gt;</span><br><span class=\"line\">      &lt;c:when test=<span class=\"string\">&quot;$&#123;param.score&gt;=70&#125;&quot;</span>&gt; 你的成绩为良好 &lt;/c:when&gt;</span><br><span class=\"line\">      &lt;c:when test=<span class=\"string\">&quot;$&#123;param.score&lt;=60&#125;&quot;</span>&gt; 你的成绩为不及格 &lt;/c:when&gt;</span><br><span class=\"line\">    &lt;/c:choose&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>forEach</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ taglib prefix=<span class=\"string\">&quot;c&quot;</span> uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@ page <span class=\"keyword\">import</span>=<span class=\"string\">&quot;java.util.ArrayList&quot;</span> %&gt;&lt;%--</span><br><span class=\"line\">  Created by IntelliJ IDEA.</span><br><span class=\"line\">  User: <span class=\"number\">29845</span></span><br><span class=\"line\">  Date: <span class=\"number\">2021</span>/<span class=\"number\">4</span>/<span class=\"number\">8</span></span><br><span class=\"line\">  Time: <span class=\"number\">20</span>:<span class=\"number\">59</span></span><br><span class=\"line\">  To change <span class=\"built_in\">this</span> template use File | Settings | File Templates.</span><br><span class=\"line\">--%&gt;</span><br><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@ page isELIgnored=<span class=\"string\">&quot;false&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;forEach&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">  ArrayList&lt;String&gt; setPeople = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">  setPeople.add(<span class=\"number\">0</span>, <span class=\"string\">&quot;张三&quot;</span>);</span><br><span class=\"line\">  setPeople.add(<span class=\"number\">1</span>, <span class=\"string\">&quot;李四&quot;</span>);</span><br><span class=\"line\">  setPeople.add(<span class=\"number\">2</span>, <span class=\"string\">&quot;王五&quot;</span>);</span><br><span class=\"line\">  setPeople.add(<span class=\"number\">3</span>, <span class=\"string\">&quot;赵六&quot;</span>);</span><br><span class=\"line\">  setPeople.add(<span class=\"number\">4</span>, <span class=\"string\">&quot;田六&quot;</span>);</span><br><span class=\"line\">  request.setAttribute(<span class=\"string\">&quot;list&quot;</span>, setPeople);</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;%--</span><br><span class=\"line\">  <span class=\"keyword\">var</span> , 每一次遍历出来的变量</span><br><span class=\"line\">  items, 要遍历的对象</span><br><span class=\"line\">  可选:</span><br><span class=\"line\">    begin,   哪里开始</span><br><span class=\"line\">    end,     到哪里</span><br><span class=\"line\">    step,   步长</span><br><span class=\"line\">--%&gt;</span><br><span class=\"line\">&lt;c:forEach <span class=\"keyword\">var</span>=<span class=\"string\">&quot;getPeople&quot;</span> items=<span class=\"string\">&quot;$&#123;list&#125;&quot;</span> begin=<span class=\"string\">&quot;1&quot;</span> end=<span class=\"string\">&quot;3&quot;</span> step=<span class=\"string\">&quot;1&quot;</span>&gt;</span><br><span class=\"line\">  &lt;c:out value=<span class=\"string\">&quot;$&#123;getPeople&#125;&quot;</span>/&gt;</span><br><span class=\"line\">  &lt;br/&gt;</span><br><span class=\"line\">&lt;/c:forEach&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JavaBean\">JavaBean</h2>\n<ul>\n<li>\n<p>JavaBean(实体类) 有特定的写法:</p>\n<ul>\n<li>\n<p>一个无参构造</p>\n</li>\n<li>\n<p>属性必须私有化</p>\n</li>\n<li>\n<p>必须有对应的 get/set 方法；</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>一般用来和数据库的字段做映射 ORM(对象关系映射)</p>\n<ul>\n<li>\n<p>表—&gt;类</p>\n</li>\n<li>\n<p>字段–&gt;属性</p>\n</li>\n<li>\n<p>行记录----&gt;对象</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>样例 Java 类: <code>src/main/java/pojo/People.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> pojo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">People</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> age;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">People</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">People</span><span class=\"params\">(<span class=\"type\">int</span> id, String name, <span class=\"type\">int</span> age, String address)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.id = id;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.address = address;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getId</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> id;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setId</span><span class=\"params\">(<span class=\"type\">int</span> id)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.id = id;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">getName</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setName</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getAge</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setAge</span><span class=\"params\">(<span class=\"type\">int</span> age)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">getAddress</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> address;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setAddress</span><span class=\"params\">(String address)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.address = address;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">toString</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;People&#123;&quot;</span> +</span><br><span class=\"line\">        <span class=\"string\">&quot;id=&quot;</span> + id +</span><br><span class=\"line\">        <span class=\"string\">&quot;, name=&#x27;&quot;</span> + name + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">        <span class=\"string\">&quot;, age=&quot;</span> + age +</span><br><span class=\"line\">        <span class=\"string\">&quot;, address=&#x27;&quot;</span> + address + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">        <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">People</span>(<span class=\"number\">1</span>, <span class=\"string\">&quot;秦疆1号&quot;</span>, <span class=\"number\">3</span>, <span class=\"string\">&quot;西安&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">People</span>(<span class=\"number\">2</span>, <span class=\"string\">&quot;秦疆2号&quot;</span>, <span class=\"number\">3</span>, <span class=\"string\">&quot;西安&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">People</span>(<span class=\"number\">3</span>, <span class=\"string\">&quot;秦疆3号&quot;</span>, <span class=\"number\">3</span>, <span class=\"string\">&quot;西安&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>样例 JSP: <code>src/main/webapp/javaBean.jsp</code></p>\n<ul>\n<li>这里只是简单介绍 JavaBean 及其使用,并不推荐用 JSP 标签来操作 JavaBean,还是推荐用 Java 代码操作实体类对象.</li>\n</ul>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%-- Created by IntelliJ IDEA. User: <span class=\"number\">29845</span> Date: <span class=\"number\">2021</span>/<span class=\"number\">4</span>/<span class=\"number\">8</span> Time: <span class=\"number\">23</span>:<span class=\"number\">32</span> To change</span><br><span class=\"line\"><span class=\"built_in\">this</span> template use File | Settings | File Templates. --%&gt; &lt;%@ page</span><br><span class=\"line\">contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;javaBean测试&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;jsp:useBean id=<span class=\"string\">&quot;people&quot;</span> class=<span class=\"string\">&quot;pojo.People&quot;</span> scope=<span class=\"string\">&quot;page&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:setProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;id&quot;</span> value=<span class=\"string\">&quot;1&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:setProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;name&quot;</span> value=<span class=\"string\">&quot;狂神说&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:setProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;age&quot;</span> value=<span class=\"string\">&quot;3&quot;</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:setProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;address&quot;</span> value=<span class=\"string\">&quot;西安&quot;</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    id:</span><br><span class=\"line\">    &lt;jsp:getProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;id&quot;</span> /&gt;</span><br><span class=\"line\">    name:</span><br><span class=\"line\">    &lt;jsp:getProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;name&quot;</span> /&gt;</span><br><span class=\"line\">    age:</span><br><span class=\"line\">    &lt;jsp:getProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;age&quot;</span> /&gt;</span><br><span class=\"line\">    address:</span><br><span class=\"line\">    &lt;jsp:getProperty name=<span class=\"string\">&quot;people&quot;</span> property=<span class=\"string\">&quot;address&quot;</span> /&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb",
                "servlet",
                "jsp"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/3/",
            "url": "https://weidows.github.io/post/Java/Web/3/",
            "title": "🥼JavaWeb~(叁)Cookie/Session验证,JSP开篇",
            "date_published": "2021-03-29T10:21:52.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-01 00:25:48\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\3.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#servlet\">Servlet</a>\n<ul>\n<li><a href=\"#httpservletrequest\">HttpServletRequest</a></li>\n</ul>\n</li>\n<li><a href=\"#cookiesession\">Cookie、Session</a>\n<ul>\n<li><a href=\"#cookie\">Cookie</a></li>\n<li><a href=\"#session\">Session</a></li>\n</ul>\n</li>\n<li><a href=\"#jsp\">JSP</a>\n<ul>\n<li><a href=\"#%E4%BB%8B%E7%BB%8D\">介绍</a></li>\n<li><a href=\"#%E4%BE%9D%E8%B5%96%E5%AF%BC%E5%85%A5\">依赖导入</a></li>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95\">基本语法</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"笔记代码-5\"><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Servlet-3\">Servlet</h2>\n<h3 id=\"HttpServletRequest\">HttpServletRequest</h3>\n<ul>\n<li>\n<p>例子: 在 index.jsp 提交表单信息给 <code>/login</code>,此 Servlet 后端读取发送来的表单信息并在页面输出显示.</p>\n<ul>\n<li>\n<p>删掉并用 idea 重建 index.jsp,会补齐一些编码信息.</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page</span><br><span class=\"line\">    contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;title&gt;登录页面&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;登录&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div style=<span class=\"string\">&quot;text-align: center&quot;</span>&gt;</span><br><span class=\"line\">  &lt;form action=<span class=\"string\">&quot;/login&quot;</span> method=<span class=\"string\">&quot;post&quot;</span>&gt;</span><br><span class=\"line\">    &lt;label&gt;</span><br><span class=\"line\">      用户名:</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;username&quot;</span> placeholder=<span class=\"string\">&quot;无&quot;</span>/&gt;&lt;br&gt;</span><br><span class=\"line\">    &lt;/label&gt;</span><br><span class=\"line\">    &lt;label&gt;</span><br><span class=\"line\">      密码:</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;password&quot;</span> name=<span class=\"string\">&quot;password&quot;</span> placeholder=<span class=\"string\">&quot;&quot;</span>/&gt;&lt;br&gt;</span><br><span class=\"line\">    &lt;/label&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    爱好:</span><br><span class=\"line\">    &lt;label&gt;&lt;input type=<span class=\"string\">&quot;checkbox&quot;</span> name=<span class=\"string\">&quot;hobbys&quot;</span> value=<span class=\"string\">&quot;女孩&quot;</span>/&gt;女孩&lt;/label&gt;</span><br><span class=\"line\">    &lt;label&gt;&lt;input type=<span class=\"string\">&quot;checkbox&quot;</span> name=<span class=\"string\">&quot;hobbys&quot;</span> value=<span class=\"string\">&quot;代码&quot;</span>/&gt;代码&lt;/label&gt;</span><br><span class=\"line\">    &lt;label&gt;&lt;input type=<span class=\"string\">&quot;checkbox&quot;</span> name=<span class=\"string\">&quot;hobbys&quot;</span> value=<span class=\"string\">&quot;动漫&quot;</span>/&gt;动漫&lt;/label&gt;</span><br><span class=\"line\">    &lt;label&gt;&lt;input type=<span class=\"string\">&quot;checkbox&quot;</span> name=<span class=\"string\">&quot;hobbys&quot;</span> value=<span class=\"string\">&quot;美食&quot;</span>/&gt;美食&lt;/label&gt;&lt;br&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">&quot;submit&quot;</span>&gt;</span><br><span class=\"line\">  &lt;/form&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/java/servlet/Login.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Arrays;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Login</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  *</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> -<span class=\"number\">7958099474557186407L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    req.setCharacterEncoding(<span class=\"string\">&quot;utf8&quot;</span>);</span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\">    resp.setCharacterEncoding(<span class=\"string\">&quot;utf8&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;password&quot;</span>);</span><br><span class=\"line\">    String[] hobbys = req.getParameterValues(<span class=\"string\">&quot;hobbys&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;username: &quot;</span> + username);</span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;password: &quot;</span> + password);</span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;爱好: &quot;</span> + Arrays.toString(hobbys));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>login<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.Login<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>login<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/login<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Cookie、Session\">Cookie、Session</h2>\n<ul>\n<li>\n<p>Cookie 是服务端在客户端上做的标记,用请求和响应进行传递,用来记录用户的访问信息 (客户端技术)</p>\n</li>\n<li>\n<p>session 是在服务端上保存用户的访问信息 (服务端技术)</p>\n</li>\n</ul>\n<h3 id=\"Cookie\">Cookie</h3>\n<ul>\n<li>\n<p>例子: 访问 <code>/cookie</code> 时,会显示上一次访问此 URL 的时间 (这个时间通过服务端传给客户端 Cookie 来记录)</p>\n<ul>\n<li>\n<p><code>src/main/java/servlet/HelloCookie.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.Cookie;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloCookie</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    req.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">    resp.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 获取客户端请求中携带的cookie</span></span><br><span class=\"line\">    Cookie[] cookies = req.getCookies();</span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"variable\">isFirst</span> <span class=\"operator\">=</span> <span class=\"literal\">true</span>; <span class=\"comment\">// 标志是否是第一次访问</span></span><br><span class=\"line\"></span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;你上一次访问时间是: &quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Cookie cookie : cookies) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (cookie.getName().equals(<span class=\"string\">&quot;LastLoginTime&quot;</span>)) &#123;</span><br><span class=\"line\">        isFirst = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        writer.println(cookie.getValue());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isFirst) &#123;</span><br><span class=\"line\">      writer.println(<span class=\"string\">&quot;这次是第一次访问.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 响应携带cookie返回给客户端</span></span><br><span class=\"line\">    <span class=\"type\">Cookie</span> <span class=\"variable\">lastLoginTime</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Cookie</span>(<span class=\"string\">&quot;LastLoginTime&quot;</span>, System.currentTimeMillis() + <span class=\"string\">&quot;&quot;</span>);<span class=\"comment\">// 非字符串+&quot;&quot; = 字符串</span></span><br><span class=\"line\">    resp.addCookie(lastLoginTime);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>cookie<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.HelloCookie<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>cookie<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/cookie<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>常用方法</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cookie[] cookies = req.getCookies(); <span class=\"comment\">//获得Cookie</span></span><br><span class=\"line\">cookie.getName(); <span class=\"comment\">//获得cookie中的key</span></span><br><span class=\"line\">cookie.getValue(); <span class=\"comment\">//获得cookie中的vlaue</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Cookie</span>(<span class=\"string\">&quot;lastLoginTime&quot;</span>, System.currentTimeMillis()+<span class=\"string\">&quot;&quot;</span>); <span class=\"comment\">//新建一个cookie</span></span><br><span class=\"line\">cookie.setMaxAge(<span class=\"number\">24</span>*<span class=\"number\">60</span>*<span class=\"number\">60</span>); <span class=\"comment\">//设置cookie的有效期</span></span><br><span class=\"line\">resp.addCookie(cookie); <span class=\"comment\">//响应给客户端一个cookie</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>一些细节</p>\n<ul>\n<li>\n<p>cookie 大小和数量</p>\n<ul>\n<li>不同浏览器支持的大小和数量不一样,大小都是 4K 左右,数量为每域名几十到无数个不等.</li>\n</ul>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/u011127019/article/details/89206016\">cookie 大小限制</a></p>\n</blockquote>\n</li>\n<li>\n<p>设置存活期:</p>\n<ul>\n<li>\n<p>不设置: 关闭浏览器自动失效</p>\n</li>\n<li>\n<p>设置为 0,立即失效.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>遇到传输的中文乱码问题,可以用 URLEncoder 编码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">URLEncoder.encode(<span class=\"string\">&quot;齐下无贰&quot;</span>,<span class=\"string\">&quot;utf-8&quot;</span>)</span><br><span class=\"line\">URLDecoder.decode(cookie.getValue(),<span class=\"string\">&quot;UTF-8&quot;</span>)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"Session\">Session</h3>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVt166.png\" alt=\"20210330120835\" />\n</blockquote>\n<ul>\n<li>\n<p>cookie 用来传输一些字符串验证信息,并存放在客户端中.</p>\n</li>\n<li>\n<p>而 session 可以存放更宽泛的数据(对象,文件等等),其数据存放在服务端.</p>\n<ul>\n<li>\n<p>服务端传给客户端一个名为 <code>JSESSIONID</code> 的 cookie 用来验证 session</p>\n</li>\n<li>\n<p>一个 Seesion 对象独占一个浏览器,不同浏览器有不同的 session</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>例子: 开启服务器并访问第一个页面 <code>localhost:8080</code> 时,session 就被创建了,然后访问 <code>/setSession</code>设置 person 信息,再访问 <code>/getSession</code>会显示 person 信息.</p>\n<ul>\n<li>\n<p><code>src/main/java/servlet/SetSession.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SetSession</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//解决乱码问题</span></span><br><span class=\"line\">    req.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">    resp.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//得到Session和writer</span></span><br><span class=\"line\">    <span class=\"type\">HttpSession</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> req.getSession();</span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//给Session中存东西</span></span><br><span class=\"line\">    session.setAttribute(<span class=\"string\">&quot;person&quot;</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Person</span>(<span class=\"string\">&quot;齐下无贰&quot;</span>, <span class=\"number\">100</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//获取Session的ID</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">sessionId</span> <span class=\"operator\">=</span> session.getId();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//判断Session是不是新创建</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (session.isNew()) &#123;</span><br><span class=\"line\">      writer.println(<span class=\"string\">&quot;session创建成功,ID: &quot;</span> + sessionId);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      writer.println(<span class=\"string\">&quot;session已经在服务器中存在了,ID: &quot;</span> + sessionId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Person</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> age;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Person</span><span class=\"params\">(String name, <span class=\"type\">int</span> age)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setName</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setAge</span><span class=\"params\">(<span class=\"type\">int</span> age)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.age = age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> String <span class=\"title function_\">toString</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Person&#123;&quot;</span> +</span><br><span class=\"line\">        <span class=\"string\">&quot;name=&#x27;&quot;</span> + name + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">        <span class=\"string\">&quot;, age=&quot;</span> + age +</span><br><span class=\"line\">        <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>src/main/java/servlet/GetSession.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">GetSession</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> -<span class=\"number\">4606977948300644893L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"comment\">//解决乱码问题</span></span><br><span class=\"line\">    req.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">    resp.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//得到Session和writer</span></span><br><span class=\"line\">    <span class=\"type\">HttpSession</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> req.getSession();</span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 获取属性并输出</span></span><br><span class=\"line\">    <span class=\"type\">Person</span> <span class=\"variable\">person</span> <span class=\"operator\">=</span> (Person) session.getAttribute(<span class=\"string\">&quot;person&quot;</span>);</span><br><span class=\"line\">    writer.println(person);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 移除属性</span></span><br><span class=\"line\">    session.removeAttribute(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//手动注销Session</span></span><br><span class=\"line\">    session.invalidate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>setSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.SetSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>getSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.GetSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>setSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/setSession<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>getSession<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/getSession<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>session 有效期问题</p>\n<ul>\n<li>\n<p>默认失效时间是 30 分钟</p>\n</li>\n<li>\n<p>是从 session 断开连接(浏览器关闭开始计算的),而不是从 session 连接开始计算</p>\n</li>\n<li>\n<p>可以在 web.xml 中设置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">session-config</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">session-timeout</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">session-timeout</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/fanbingfu/article/details/78318855\">关于 session 的失效时间和过期</a></p>\n</blockquote>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JSP\">JSP</h2>\n<h3 id=\"介绍\">介绍</h3>\n<ul>\n<li>\n<p>JSP (Java Server Pages),写法类似 HTML 的动态 Java 页面</p>\n</li>\n<li>\n<p>最终 JSP 会被转换为一个 Java 类,实际上本质就是 <code>Servlet 的简化实现</code>.</p>\n<ul>\n<li>\n<p><code>*.jsp -&gt; *.java -&gt; *.class</code></p>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVtmc0.png\" alt=\"20210403111103\" />\n</blockquote>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>jsp 转换为的 java 文件核心部分:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//初始化</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">_jspInit</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//销毁</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">_jspDestroy</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//JSPService</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">_jspService</span><span class=\"params\">(HttpServletRequest request,HttpServletResponse response)</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>JSPService 内初始化的对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> javax.servlet.jsp.PageContext pageContext;  <span class=\"comment\">//页面上下文</span></span><br><span class=\"line\">javax.servlet.http.<span class=\"type\">HttpSession</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;    <span class=\"comment\">//session</span></span><br><span class=\"line\"><span class=\"keyword\">final</span> javax.servlet.ServletContext application;   <span class=\"comment\">//Context-&gt;application</span></span><br><span class=\"line\"><span class=\"keyword\">final</span> javax.servlet.ServletConfig config;         <span class=\"comment\">//config</span></span><br><span class=\"line\">javax.servlet.jsp.<span class=\"type\">JspWriter</span> <span class=\"variable\">out</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;           <span class=\"comment\">//writer-&gt;out</span></span><br><span class=\"line\"><span class=\"keyword\">final</span> java.lang.<span class=\"type\">Object</span> <span class=\"variable\">page</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>;               <span class=\"comment\">//当前页面-&gt;page</span></span><br><span class=\"line\">HttpServletRequest request                        <span class=\"comment\">//请求</span></span><br><span class=\"line\">HttpServletResponse response                      <span class=\"comment\">//响应</span></span><br><span class=\"line\"></span><br><span class=\"line\">response.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\">pageContext = _jspxFactory.getPageContext(<span class=\"built_in\">this</span>, request, response,<span class=\"literal\">null</span>, <span class=\"literal\">true</span>, <span class=\"number\">8192</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">_jspx_page_context = pageContext;</span><br><span class=\"line\">application = pageContext.getServletContext();</span><br><span class=\"line\">config = pageContext.getServletConfig();</span><br><span class=\"line\">session = pageContext.getSession();</span><br><span class=\"line\">out = pageContext.getOut();</span><br><span class=\"line\">_jspx_out = out;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>JSP 中可以写 Java 代码,Java 代码会原封不动的正常执行</p>\n<ul>\n<li>HTML 代码在 JSP-&gt;Java 时会被转换成 <code>out.write(&quot;&lt;html&gt;\\r\\n&quot;);</code> 这种形式.</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"依赖导入\">依赖导入</h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- servlet依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.0.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- JSP依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet.jsp<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>provided<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- JSTL表达式依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jstl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Standard标签库 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>taglibs<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>standard<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"基本语法-2\">基本语法</h3>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page <span class=\"keyword\">import</span>=<span class=\"string\">&quot;java.util.Date&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span> language=<span class=\"string\">&quot;java&quot;</span> %&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;title&gt;测试&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;!-- 这是HTML的注释,会在客户端显示 --&gt;</span><br><span class=\"line\">    &lt;%-- 这是JSP注释,不会在客户端显示 --%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">      JSP表达式: 用来将程序输出到客户端</span><br><span class=\"line\">      &lt;%= <span class=\"string\">&quot;变量或者表达式&quot;</span>%&gt;</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;%= <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">      JSP脚本片段</span><br><span class=\"line\">      &lt;% jsp脚本片段 %&gt;</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;%</span><br><span class=\"line\">      <span class=\"type\">int</span> <span class=\"variable\">sum</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt;=<span class=\"number\">100</span> ; i++) &#123; sum+=i; &#125;</span><br><span class=\"line\">      out.println(<span class=\"string\">&quot;&lt;h1&gt;Sum=&quot;</span>+sum+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">    %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">      JSP声明</span><br><span class=\"line\">      会被编译到JSP生成Java的类中！其他的，就会被生成到_jspService方法中！</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;%!</span><br><span class=\"line\">      <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Loading Servlet!&quot;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">private</span> <span class=\"type\">int</span> <span class=\"variable\">globalVar</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">kuang</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;进入了方法Kuang！&quot;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    %&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb",
                "servlet",
                "cookie",
                "session",
                "jsp"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/2/",
            "url": "https://weidows.github.io/post/Java/Web/2/",
            "title": "🥼JavaWeb~(贰)->Servlet",
            "date_published": "2021-03-29T09:45:58.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-01 00:23:51\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\2.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#servlet\">Servlet</a>\n<ul>\n<li><a href=\"#%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91\">请求转发</a></li>\n<li><a href=\"#%E8%AF%BB%E5%8F%96-properties\">读取 properties</a></li>\n<li><a href=\"#httpservletresponse\">HttpServletResponse</a>\n<ul>\n<li><a href=\"#%E5%93%8D%E5%BA%94\">响应</a></li>\n<li><a href=\"#%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6\">下载文件</a></li>\n<li><a href=\"#%E9%AA%8C%E8%AF%81%E7%A0%81\">验证码</a></li>\n<li><a href=\"#%E9%87%8D%E5%AE%9A%E5%90%91\">重定向</a></li>\n<li><a href=\"#%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4%E5%93%8D%E5%BA%94\">表单提交+响应</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"笔记代码-4\"><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Servlet-2\">Servlet</h2>\n<h3 id=\"请求转发\">请求转发</h3>\n<ul>\n<li>\n<p>把 <code>/helloParameter</code> 转发到 <code>/HelloDispatcher</code></p>\n<ul>\n<li>\n<p>转发后这两个地址都会显示<code>/helloParameter</code>的内容</p>\n</li>\n<li>\n<p>另外一个手段: <code>重定向</code> ,重定向之后原地址就不可访问了</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p><code>src/main/java/com/weidows/HelloDispatcher.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloDispatcher</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">ServletContext</span> <span class=\"variable\">context</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getServletContext();</span><br><span class=\"line\">    context.getRequestDispatcher(<span class=\"string\">&quot;/helloParameter&quot;</span>).forward(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code> (在上面<code>初始化参数</code>基础上添加的)</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>HelloDispatcher<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloDispatcher<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>HelloDispatcher<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/HelloDispatcher<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"读取-properties\">读取 properties</h3>\n<blockquote>\n<p>我们开发的项目需要进行打包处理,所以不能直接引用 <code>src/</code> 里面的资源,需要引用对应 <code>target/</code> 内部的.</p>\n</blockquote>\n<ul>\n<li>\n<p>这种资源文件一般放在 <code>src/main/resources</code> 里面,如果放在 <code>src/main/java</code>里面默认情况下会出现无法被 maven 导出的情况 (通常我们称 resources 和 java 为 classpath)</p>\n<ul>\n<li>\n<p><code>src/main/java</code> 里面默认情况下只会编译并导出 <code>*.java</code>,不会管其他类型文件,可以修改 pom.xml 来使之生效:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">resource</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">directory</span>&gt;</span>src/main/java<span class=\"tag\">&lt;/<span class=\"name\">directory</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">includes</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">include</span>&gt;</span>**/*.properties<span class=\"tag\">&lt;/<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">include</span>&gt;</span>**/*.xml<span class=\"tag\">&lt;/<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">includes</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">filtering</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">filtering</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">resource</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>生成文件路径:</p>\n<ul>\n<li>\n<p>如果放在 resources 中,其生成路径为 <code>target/demo-2/WEB-INF/classes/db.properties</code></p>\n</li>\n<li>\n<p>如果放在 java 中,生成路径为 <code>target/demo-2/WEB-INF/classes/com/weidows/db.properties</code></p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>例子: 读取打包后的 properties 并显示.</p>\n<ul>\n<li>\n<p><code>src/main/java/com/weidows/HelloProperties.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloProperties</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> -<span class=\"number\">437042901757770674L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">prop</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">    <span class=\"comment\">// 生成后的路径: target/demo-2/WEB-INF/classes/db.properties</span></span><br><span class=\"line\">    prop.load(<span class=\"built_in\">this</span>.getServletContext().getResourceAsStream(<span class=\"string\">&quot;/WEB-INF/classes/db.properties&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> prop.getProperty(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">pwd</span> <span class=\"operator\">=</span> prop.getProperty(<span class=\"string\">&quot;password&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    resp.getWriter().print(<span class=\"string\">&quot;username: &quot;</span> + user + <span class=\"string\">&quot;\\npassword: &quot;</span> + pwd);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>src/main/resources/db.properties</code></p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">username</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"attr\">password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloProperties<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloProperties<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloProperties<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/helloProperties<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"HttpServletResponse\">HttpServletResponse</h3>\n<ul>\n<li>\n<p>Web 服务器接收到 http 请求信息,会创建 HttpServletRequest 和 HttpServletResponse 的两个对象</p>\n<ul>\n<li>\n<p>前者负责客户端传来的参数</p>\n</li>\n<li>\n<p>后者负责服务端响应的信息</p>\n</li>\n</ul>\n<hr>\n</li>\n</ul>\n<h4 id=\"响应\">响应</h4>\n<ul>\n<li>\n<p>向浏览器发送数据的方法:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ServletOutputstream <span class=\"title function_\">getOutputstream</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException</span><br><span class=\"line\">Printwriter <span class=\"title function_\">getwriter</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>负责向浏览器发送响应头的方法:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setCharacterEncoding</span><span class=\"params\">(String var1)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setContentLength</span><span class=\"params\">(<span class=\"type\">int</span> var1)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setContentLengthLong</span><span class=\"params\">(<span class=\"type\">long</span> var1)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setContentType</span><span class=\"params\">(String var1)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setDateHeader</span><span class=\"params\">(String varl,<span class=\"type\">long</span> var2)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">addDateHeader</span><span class=\"params\">(String var1,<span class=\"type\">long</span> var2)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setHeader</span><span class=\"params\">(String var1,String var2)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">addHeader</span><span class=\"params\">(String var1,String var2)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setIntHeader</span><span class=\"params\">(String var1,<span class=\"type\">int</span> var2)</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">addIntHeader</span><span class=\"params\">(String varl,<span class=\"type\">int</span> var2)</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h4 id=\"下载文件\">下载文件</h4>\n<ul>\n<li>\n<p><code>src/main/java/servlet/FileServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URLEncoder;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FileServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> -<span class=\"number\">2643615496012694161L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1. 要获取下载文件的路径</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">realPath</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getServletContext().getRealPath(<span class=\"string\">&quot;/WEB-INF/classes/test.txt&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;下载文件的路径：&quot;</span> + realPath);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2. 下载的文件名</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">fileName</span> <span class=\"operator\">=</span> realPath.substring(realPath.lastIndexOf(<span class=\"string\">&quot;\\\\&quot;</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;文件名: &quot;</span> + fileName);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3. 设置想办法让浏览器能够支持(Content-Disposition)下载我们需要的东西,中文文件名URLEncoder.encode编码，否则有可能乱码</span></span><br><span class=\"line\">    resp.setHeader(<span class=\"string\">&quot;Content-Disposition&quot;</span>, <span class=\"string\">&quot;attachment;filename=&quot;</span> + URLEncoder.encode(fileName, <span class=\"string\">&quot;UTF-8&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 4. 获取下载文件的输入流</span></span><br><span class=\"line\">    <span class=\"type\">FileInputStream</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FileInputStream</span>(realPath);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 5. 创建缓冲区</span></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">len</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"type\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 6. 获取OutputStream对象</span></span><br><span class=\"line\">    <span class=\"type\">ServletOutputStream</span> <span class=\"variable\">out</span> <span class=\"operator\">=</span> resp.getOutputStream();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 7. 将FileOutputStream流写入到buffer缓冲区,使用OutputStream将缓冲区中的数据输出到客户端！</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ((len = in.read(buffer)) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      out.write(buffer, <span class=\"number\">0</span>, len);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 8. 关闭连接</span></span><br><span class=\"line\">    in.close();</span><br><span class=\"line\">    out.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/resources/test.txt</code></p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">此处内容随意,比如写个 &quot;测试&quot;.</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>fileServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.FileServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>fileServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/fileServlet<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h4 id=\"验证码\">验证码</h4>\n<ul>\n<li>\n<p><code>src/main/java/servlet/ImageServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.imageio.ImageIO;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.image.BufferedImage;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Random;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ImageServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> <span class=\"number\">4590298452958016399L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//如何让浏览器3秒自动刷新一次;</span></span><br><span class=\"line\">    resp.setHeader(<span class=\"string\">&quot;refresh&quot;</span>, <span class=\"string\">&quot;3&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//在内存中创建一个图片</span></span><br><span class=\"line\">    <span class=\"type\">BufferedImage</span> <span class=\"variable\">image</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BufferedImage</span>(<span class=\"number\">80</span>, <span class=\"number\">20</span>, BufferedImage.TYPE_INT_RGB);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//得到图片</span></span><br><span class=\"line\">    <span class=\"type\">Graphics2D</span> <span class=\"variable\">graphics</span> <span class=\"operator\">=</span> (Graphics2D) image.getGraphics(); <span class=\"comment\">//笔</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//设置图片的背景颜色</span></span><br><span class=\"line\">    graphics.setColor(Color.white);</span><br><span class=\"line\">    graphics.fillRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">80</span>, <span class=\"number\">20</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//给图片写数据</span></span><br><span class=\"line\">    graphics.setColor(Color.BLUE);</span><br><span class=\"line\">    graphics.setFont(<span class=\"keyword\">new</span> <span class=\"title class_\">Font</span>(<span class=\"literal\">null</span>, Font.BOLD, <span class=\"number\">20</span>));</span><br><span class=\"line\">    graphics.drawString(makeNum(), <span class=\"number\">0</span>, <span class=\"number\">20</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//告诉浏览器，这个请求用图片的方式打开</span></span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;image/jpeg&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//网站存在缓存，不让浏览器缓存</span></span><br><span class=\"line\">    resp.setDateHeader(<span class=\"string\">&quot;expires&quot;</span>, -<span class=\"number\">1</span>);</span><br><span class=\"line\">    resp.setHeader(<span class=\"string\">&quot;Cache-Control&quot;</span>, <span class=\"string\">&quot;no-cache&quot;</span>);</span><br><span class=\"line\">    resp.setHeader(<span class=\"string\">&quot;Pragma&quot;</span>, <span class=\"string\">&quot;no-cache&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//把图片写给浏览器</span></span><br><span class=\"line\">    ImageIO.write(image, <span class=\"string\">&quot;jpg&quot;</span>, resp.getOutputStream());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//生成随机数</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> String <span class=\"title function_\">makeNum</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Random</span> <span class=\"variable\">random</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Random</span>();</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">num</span> <span class=\"operator\">=</span> random.nextInt(<span class=\"number\">9999999</span>) + <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">StringBuffer</span> <span class=\"variable\">sb</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StringBuffer</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">7</span> - num.length(); i++) &#123;</span><br><span class=\"line\">      sb.append(<span class=\"string\">&quot;0&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    num = sb.toString() + num;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> num;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>imageServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.ImageServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>imageServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/imageServlet<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h4 id=\"重定向\">重定向</h4>\n<ul>\n<li>\n<p>访问一个页面时跳转到另一个页面</p>\n</li>\n<li>\n<p><code>src/main/java/servlet/RedirectServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RedirectServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    resp.sendRedirect(<span class=\"string\">&quot;/&quot;</span>);<span class=\"comment\">//重定向</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>redirect<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.RedirectServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>redirect<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/redirect<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>转发&amp;重定向 の 区别</p>\n<ul>\n<li>转发 URL 不会变化,重定向会变化</li>\n<li>访问转发的页面有一个请求,重定向会产生前后两个请求,第一个请求状态码是 302</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"表单提交-响应\">表单提交+响应</h4>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/zhangliangzi/article/details/50131835\">Form 表单数据传输方式之 Get 与 Post 区别</a></p>\n</blockquote>\n<ul>\n<li>\n<p>get 与 post 区别体现在客户端&lt;–&gt;服务端之间的信息传递</p>\n</li>\n<li>\n<p>我们在 overwrite HttpServlet 类的 doGet &amp; doPost 方法时,是在处理通过 get/post 接收到请求或信息后的业务</p>\n</li>\n<li>\n<p>get/post 就像一个屋子的两个门,进门的方式不一样,但是所进入的屋子是一样的 (让他俩互相调用,处理相同的业务)</p>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>例子: 开启 Tomcat 后进入 index.jsp 页面,输入表单后提交,信息以 post 形式传递给 <code>/request</code> 后端,这个动态页面收到数据并在页面输出.</p>\n<ul>\n<li>\n<p><code>index.jsp</code></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;form action=<span class=\"string\">&quot;/request&quot;</span> method=<span class=\"string\">&quot;post&quot;</span>&gt;</span><br><span class=\"line\">  &lt;label&gt;</span><br><span class=\"line\">    用户名:</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;username&quot;</span>/&gt;</span><br><span class=\"line\">  &lt;/label&gt; &lt;br/&gt;</span><br><span class=\"line\">  &lt;label&gt;</span><br><span class=\"line\">    密码:</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">&quot;password&quot;</span> name=<span class=\"string\">&quot;password&quot;</span>/&gt;</span><br><span class=\"line\">  &lt;/label&gt; &lt;br/&gt;</span><br><span class=\"line\">  &lt;input type=<span class=\"string\">&quot;submit&quot;</span>/&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/java/servlet/RequestServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RequestServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doPost(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> req.getParameter(<span class=\"string\">&quot;password&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter();</span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;Success get username &amp; password.&quot;</span>);</span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;username: &quot;</span> + username);</span><br><span class=\"line\">    writer.println(<span class=\"string\">&quot;password: &quot;</span> + password);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>request<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>servlet.RequestServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>request<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/request<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb",
                "servlet"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Java/Web/1/",
            "url": "https://weidows.github.io/post/Java/Web/1/",
            "title": "🥼JavaWeb~(壹)探索传输协议",
            "date_published": "2021-03-22T01:15:14.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-05-22 10:40:55\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Java\\Web\\1.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%AC%94%E8%AE%B0%E4%BB%A3%E7%A0%81\">笔记代码</a></li>\n<li><a href=\"#%E5%8F%82%E7%85%A7\">参照</a></li>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\">基本概念</a>\n<ul>\n<li><a href=\"#%E5%8A%A8%E9%9D%99%E6%80%81-web\">动/静态 Web</a></li>\n<li><a href=\"#%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%AF%B9%E6%AF%94\">后端技术对比</a></li>\n<li><a href=\"#web-%E6%9C%8D%E5%8A%A1%E5%99%A8\">Web 服务器</a></li>\n</ul>\n</li>\n<li><a href=\"#http\">HTTP</a>\n<ul>\n<li><a href=\"#%E8%AF%B7%E6%B1%82%E8%A1%8C\">请求行</a></li>\n<li><a href=\"#%E6%B6%88%E6%81%AF%E5%A4%B4\">消息头</a></li>\n<li><a href=\"#%E5%93%8D%E5%BA%94%E4%BD%93\">响应体</a></li>\n<li><a href=\"#%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81\">响应状态码</a></li>\n</ul>\n</li>\n<li><a href=\"#maventomcat\">Maven+Tomcat</a></li>\n<li><a href=\"#servlet\">Servlet</a>\n<ul>\n<li><a href=\"#helloservlet\">HelloServlet</a></li>\n<li><a href=\"#%E6%9E%B6%E6%9E%84%E5%8E%9F%E7%90%86\">架构原理</a></li>\n<li><a href=\"#mapping\">Mapping</a></li>\n<li><a href=\"#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%82%E6%95%B0%E4%BA%86%E8%A7%A3\">初始化参数(了解)</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"笔记代码-3\"><a href=\"https://github.com/Weidows/Java/tree/master/JavaWeb\">笔记代码</a></h2>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表-20\">借物表</h2>\n<blockquote>\n<p>在此文章记录了: <a href=\"../../../others/LearnWay#javaweb\">😍Weidows-の成长路线#javaweb</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"基本概念\">基本概念</h2>\n<h3 id=\"动-静态-Web\">动/静态 Web</h3>\n<ul>\n<li>\n<p>静态 web</p>\n<ul>\n<li>\n<p>比如 hexo 就是静态博客生成器,其生成的 HTML 页面文档树不会发生改变</p>\n</li>\n<li>\n<p>会因为 js 发生内容性的变化,但也是预设性的,并非动态变化.</p>\n</li>\n<li>\n<p>只能实现动画,不能实现动态;无后端,也就是无法与数据库交互,数据不能持久化,无法与用户进行信息交互</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>动态 web</p>\n<ul>\n<li>\n<p>比如 WordPress,客户端加载的内容会随着客户端交互而产生变化</p>\n</li>\n<li>\n<p>技术栈: Java Servlet/JSP,<a href=\"http://ASP.NET\">ASP.NET</a>,PHP,Python,etc.</p>\n</li>\n<li>\n<p>资源出现问题时可以停机维护,可以与用户交互,操作数据库持久化信息.</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>JavaWeb 应用包含多个部分</p>\n<ul>\n<li>\n<p>html,sss,is</p>\n</li>\n<li>\n<p>jsp,servlet</p>\n</li>\n<li>\n<p>Java 程序</p>\n</li>\n<li>\n<p>jar 包</p>\n</li>\n<li>\n<p>配置文件（Properties)</p>\n</li>\n</ul>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVs8L1.png\" alt=\"20210322100531\" />\n</blockquote>\n</li>\n</ul>\n<hr>\n<h3 id=\"后端技术对比\">后端技术对比</h3>\n<ul>\n<li>\n<p>ASP</p>\n<p>国内最早流行,业务代码错乱,维护成本高</p>\n</li>\n<li>\n<p>php</p>\n<p>开发速度很快，功能强大，跨平台，代码简单;但是无法承载大访问量的情况</p>\n</li>\n<li>\n<p>JSP/Servlet</p>\n<p>B/S 架构</p>\n<p>语法像 ASP，ASP+Java-&gt;JSP</p>\n<p>可以承载三高问题带来的影响</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"Web-服务器\">Web 服务器</h3>\n<ul>\n<li>\n<p><a href=\"http://ASP.NET\">ASP.NET</a></p>\n<p>Windows 系统自带</p>\n</li>\n<li>\n<p>Tomcat</p>\n<p>Apache 基金会的项目,在中小型并发量场景下普遍使用</p>\n<blockquote>\n<p>之前有个文章介绍了 <a href=\"https://weidows.gitee.io/post/others/IDEs/#Tomcat\">😁IDE 选用指北.#Tomcat</a></p>\n</blockquote>\n<blockquote>\n<p>另外,推荐一篇文章: <a href=\"https://zhuanlan.zhihu.com/p/54121733\">Tomcat 外传</a></p>\n</blockquote>\n<ul>\n<li>\n<p>Tomcat 项目层级结构</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> webapps ：Tomcat服务器的web目录</span><br><span class=\"line\"><span class=\"bullet\">  -</span> ROOT 网站的根目录</span><br><span class=\"line\"><span class=\"bullet\">  -</span> kuangstudy ：网站的目录名</span><br><span class=\"line\"><span class=\"bullet\">    -</span> WEB-INF</span><br><span class=\"line\"><span class=\"bullet\">      -</span> classes : java程序</span><br><span class=\"line\"><span class=\"bullet\">      -</span> lib : web应用所依赖的jar包</span><br><span class=\"line\"><span class=\"bullet\">      -</span> web.xml : 网站配置文件</span><br><span class=\"line\"><span class=\"bullet\">    -</span> index.html : 默认的首页</span><br><span class=\"line\"><span class=\"bullet\">    -</span> static</span><br><span class=\"line\"><span class=\"bullet\">      -</span> css</span><br><span class=\"line\"><span class=\"bullet\">        -</span> style.css</span><br><span class=\"line\"><span class=\"bullet\">      -</span> js</span><br><span class=\"line\"><span class=\"bullet\">      -</span> img</span><br><span class=\"line\"><span class=\"bullet\">    -</span> .....</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>Tomcat 可以 run 的项目只能是<code>webapp</code>,可以通过 Maven 创建这种项目</p>\n<ul>\n<li>\n<p>tomcat 可以直接跑起来 <code>root/src/main/webapp</code>这个目录, 或者用 maven package 打包后产生的.war 包</p>\n</li>\n<li>\n<p>其他形式的都无法用 tomcat 运行.</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"HTTP\">HTTP</h2>\n<p>(超文本传输协议）是一个简单的请求-响应协议，通常运行在 TCP 之上.</p>\n<h3 id=\"请求行\">请求行</h3>\n<figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Request URL:https:<span class=\"comment\">//www.baidu.com/   请求地址</span></span><br><span class=\"line\">Request <span class=\"keyword\">Method</span>:GET    get方法/post方法</span><br><span class=\"line\">Status Code:<span class=\"number\">200</span> OK    状态码：<span class=\"number\">200</span></span><br><span class=\"line\">Remote Address:<span class=\"number\">14.215</span>.<span class=\"number\">177.39</span>:<span class=\"number\">443</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>请求方式：Get,Post,HEAD,DELETE,PUT,TRACT.…</p>\n<ul>\n<li>\n<p>get：请求能够携带的参数比较少，大小有限制，会在浏览器的 URL 地址栏显示数据内容，不安全，但高效</p>\n</li>\n<li>\n<p>post: 请求能够携带的参数没有限制，大小没有限制，不会在浏览器的 URL 地址栏显示数据内容，安全，但不高效;只有表单才能使用.</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"消息头\">消息头</h3>\n<figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Accept:<span class=\"built_in\">text</span>/html  <span class=\"comment\">// 告诉浏览器，它所支持的数据类型</span></span><br><span class=\"line\">Accept-Encoding:gzip, deflate, br  <span class=\"comment\">// 支持哪种编码格式  GBK   UTF-8   GB2312  ISO8859-1</span></span><br><span class=\"line\">Accept-<span class=\"built_in\">Language</span>:zh-CN,zh;q=<span class=\"number\">0.9</span>    <span class=\"comment\">// 告诉浏览器，它的语言环境</span></span><br><span class=\"line\">Cache-Control:<span class=\"built_in\">max</span>-age=<span class=\"number\">0</span> <span class=\"comment\">// 缓存控制</span></span><br><span class=\"line\">Connection:keep-<span class=\"built_in\">alive</span> <span class=\"comment\">// 请求完成是断开还是保持连接</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"响应体\">响应体</h3>\n<figure class=\"highlight node-repl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">...</span></span><br><span class=\"line\">跟请求相同</span><br><span class=\"line\"><span class=\"meta prompt_\">...</span></span><br><span class=\"line\">Refresh：告诉客户端，多久刷新一次</span><br><span class=\"line\">Location：让网页重新定位</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"响应状态码\">响应状态码</h3>\n<blockquote>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVs6RT.png\" alt=\"20210323084728\" />\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Maven-Tomcat\">Maven+Tomcat</h2>\n<blockquote>\n<p><a href=\"../../../tools/Tomcat\">🐱‍🏍Maven+Tomcat 开发 webapp.</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Servlet\">Servlet</h2>\n<ul>\n<li>\n<p>Servlet 是 sun 公司开发动态 web 的一门技术,开发 Servlet 程序有两个步骤:</p>\n<ol>\n<li>\n<p>编写一个类，实现 Serlet 接口</p>\n</li>\n<li>\n<p>把开发好 java 类部署到 web 服务器中。</p>\n</li>\n</ol>\n</li>\n<li>\n<p>利用 maven 创建一个工程项目(project),在内部创建多个子模块(module)进行学习测试.</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"HelloServlet\">HelloServlet</h3>\n<ul>\n<li>\n<p>现在,在 JavaWeb 项目中已经创建好子模块<code>demo-1</code>,我们在这个 demo-1 内练习 HelloServlet,项目结构如下:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsVrS.png\" alt=\"20210324163957\" />\n</li>\n<li>\n<p>新建 <code>JavaWeb/demo-1/src/main/java/com/weidows/HelloServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.weidows;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">serialVersionUID</span> <span class=\"operator\">=</span> -<span class=\"number\">6617893791621340358L</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//get或者post只是请求实现的不同的方式，可以相互调用，业务逻辑都一样</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"comment\">//ServletOutputStream outputStream = resp.getOutputStream();</span></span><br><span class=\"line\">    <span class=\"type\">PrintWriter</span> <span class=\"variable\">writer</span> <span class=\"operator\">=</span> resp.getWriter(); <span class=\"comment\">//响应流</span></span><br><span class=\"line\">    writer.print(<span class=\"string\">&quot;Hello,Servlet&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>修改 <code>JavaWeb/demo-1/src/main/webapp/WEB-INF/web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--注册Servlet,使这个类可以产生动态页面--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--Servlet的请求路径映射,使路径映射对应类--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/weidows<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>连接 Tomcat</p>\n<ul>\n<li>我们用 tomcat 跑起来这个子模块 (注意跑的是子模块不是整个项目)</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsrOD.png\" alt=\"20210324164515\" />\n</li>\n<li>\n<p>跑起来后</p>\n<ul>\n<li>\n<p>我们可以通过<code>http://localhost:8080/demo_1_war/</code> 访问到 <code>index.jsp</code> 这个静态页面</p>\n</li>\n<li>\n<p>也可以通过<code>http://localhost:8080/demo_1_war/weidows</code> 访问到我们用 Servlet 映射的动态页面</p>\n<ul>\n<li>注意末尾不能带’/', <code>http://localhost:8080/demo_1_war/weidows/</code> == <code>http://localhost:8080/demo_1_war/weidows/index.html</code> 因为并没有这个静态页面,会报 404</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>注意,无论是动态页面还是静态页面,都必须<code>指定编码</code>,否则中文会乱码.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"架构原理\">架构原理</h3>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVsj6t.png\" alt=\"20210325090037\" />\n<ul>\n<li>\n<p>Tomcat 做的就是接收请求并处理,然后返回响应</p>\n</li>\n<li>\n<p>我们需要做的是实现 Servlet 接口,处理请求和响应信息</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"Mapping\">Mapping</h3>\n<ul>\n<li>\n<p>一个 Servlet 可以映射一个或多个或正则匹配 url 路径</p>\n<ul>\n<li><code>映射固定地址的优先级最高</code></li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/hello<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/hello2<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/hello3<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<servlet-mapping>\n    <servlet-name>hello</servlet-name>\n    <url-pattern>/hello/*</url-pattern>\n</servlet-mapping>\n<!--可以自定义后缀实现请求映射\n    注意,*前面不能加项目映射的路径\n    hello/xxx.weidows\n    -->\n<servlet-mapping>\n    <servlet-name>hello</servlet-name>\n    <url-pattern>*.weidows</url-pattern>\n</servlet-mapping>\n<figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\">- 例子: 把 <span class=\"number\">404</span> 页面换为我们自定义的</span><br><span class=\"line\"></span><br><span class=\"line\">  - src/main/java/com/weidows/<span class=\"type\">ErrorServlet</span>.java</span><br><span class=\"line\"></span><br><span class=\"line\">    ```<span class=\"type\">Java</span></span><br><span class=\"line\">    <span class=\"keyword\">import</span> javax.servlet.<span class=\"type\">ServletException</span>;</span><br><span class=\"line\">    <span class=\"keyword\">import</span> javax.servlet.http.<span class=\"type\">HttpServlet</span>;</span><br><span class=\"line\">    <span class=\"keyword\">import</span> javax.servlet.http.<span class=\"type\">HttpServletRequest</span>;</span><br><span class=\"line\">    <span class=\"keyword\">import</span> javax.servlet.http.<span class=\"type\">HttpServletResponse</span>;</span><br><span class=\"line\">    <span class=\"keyword\">import</span> java.io.<span class=\"type\">IOException</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ErrorServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"keyword\">protected</span> void doGet(<span class=\"type\">HttpServletRequest</span> req, <span class=\"type\">HttpServletResponse</span> resp) <span class=\"keyword\">throws</span> <span class=\"type\">ServletException</span>, <span class=\"type\">IOException</span> &#123;</span><br><span class=\"line\">        resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\">        resp.setCharacterEncoding(<span class=\"string\">&quot;utf8&quot;</span>);</span><br><span class=\"line\">        resp.getWriter().print(<span class=\"string\">&quot;&lt;h1&gt;404&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"keyword\">protected</span> void doPost(<span class=\"type\">HttpServletRequest</span> req, <span class=\"type\">HttpServletResponse</span> resp) <span class=\"keyword\">throws</span> <span class=\"type\">ServletException</span>, <span class=\"type\">IOException</span> &#123;</span><br><span class=\"line\">        doGet(req, resp);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">- 注册并映射 404 页面</span><br><span class=\"line\"></span><br><span class=\"line\">  - (注意上下顺序: ServletA MappingA ServletB MappingB 这样写会报错)</span><br><span class=\"line\"></span><br><span class=\"line\">  ```xml</span><br><span class=\"line\">  <span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">      <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">      <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--注册Servlet--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>ErrorServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.ErrorServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<pre><code>&lt;!--Servlet的请求路径--&gt;\n&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;helloServlet&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;/weidows&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;ErrorServlet&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n  </web-app>\n  <figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"comment\">### ServletContext</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">HttpServlet</span> <span class=\"string\">对象中常用方法:</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">this.getInitParameter()</span> <span class=\"string\">//</span> <span class=\"string\">初始化参数</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">this.getServletConfig()</span> <span class=\"string\">//</span> <span class=\"string\">Servlet</span> <span class=\"string\">配置</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">this.getServletContext()</span> <span class=\"string\">//</span> <span class=\"string\">Servlet</span> <span class=\"string\">上下文,最常用,这里只介绍这个</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">Web</span> <span class=\"string\">容器启动时,会创建对应的</span> <span class=\"string\">ServletContext</span> <span class=\"string\">对象,代表当前</span> <span class=\"string\">web</span> <span class=\"string\">应用,</span> <span class=\"string\">`不同</span> <span class=\"string\">Servlet</span> <span class=\"string\">之间共享这个</span> <span class=\"string\">ServletContext</span> <span class=\"string\">对象`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">例子:</span> <span class=\"string\">当访问</span> <span class=\"string\">`/helloServlet`</span> <span class=\"string\">时在</span> <span class=\"string\">servletContext</span> <span class=\"string\">对象中设置</span> <span class=\"string\">username</span> <span class=\"string\">属性,然后访问</span> <span class=\"string\">`/getServlet`</span> <span class=\"string\">可以查看设置的</span> <span class=\"string\">username</span> <span class=\"string\">属性值.</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">`src/main/java/com/weidows/HelloServlet.java`</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">```Java</span></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">java.io.IOException;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">javax.servlet.ServletContext;</span></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">javax.servlet.ServletException;</span></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">javax.servlet.http.HttpServlet;</span></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">javax.servlet.http.HttpServletRequest;</span></span><br><span class=\"line\">    <span class=\"string\">import</span> <span class=\"string\">javax.servlet.http.HttpServletResponse;</span></span><br></pre></td></tr></table></figure>\n<p>public class HelloServlet extends HttpServlet {<br>\n@Override<br>\nprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>\nServletContext context = this.getServletContext();<br>\nString username = “齐下无贰”; //数据<br>\ncontext.setAttribute(“username”, username); //将一个数据保存在了 ServletContext 中，名字为：username 。值 username<br>\nSystem.out.println(“username 属性已设置.”);<br>\n}<br>\n}</p>\n  <figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">***</span></span><br><span class=\"line\"><span class=\"bullet\"></span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p><code>src/main/java/com/weidows/GetServlet.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">GetServlet</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doPost</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    doGet(req, resp);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> (String) <span class=\"built_in\">this</span>.getServletContext().getAttribute(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    resp.setContentType(<span class=\"string\">&quot;text/html&quot;</span>);</span><br><span class=\"line\">    resp.setCharacterEncoding(<span class=\"string\">&quot;utf8&quot;</span>);</span><br><span class=\"line\">    resp.getWriter().print(<span class=\"string\">&quot;名字: &quot;</span> + username);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>getServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.GetServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/helloServlet<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>getServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/getServlet<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"初始化参数-了解\">初始化参数(了解)</h3>\n<ul>\n<li>\n<p>初始化参数在 web.xml 中设置,用 getInitParameter()获取</p>\n</li>\n<li>\n<p><code>web.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">web-app</span> <span class=\"keyword\">PUBLIC</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">    <span class=\"string\">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">display-name</span>&gt;</span>Archetype Created Web Application<span class=\"tag\">&lt;/<span class=\"name\">display-name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--配置一些web应用初始化参数--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">context-param</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>url<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/mybatis<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">context-param</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloParameter<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.weidows.HelloParameter<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>helloParameter<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/helloParameter<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p><code>src/main/java/com/weidows/HelloParameter.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloParameter</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">HttpServlet</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doGet</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> <span class=\"keyword\">throws</span> ServletException, IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">ServletContext</span> <span class=\"variable\">context</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getServletContext();</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> context.getInitParameter(<span class=\"string\">&quot;url&quot;</span>);</span><br><span class=\"line\">    resp.getWriter().print(url);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "java",
                "笔记",
                "服务器",
                "javaweb"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/Vue/Vue-1/",
            "url": "https://weidows.github.io/post/Web/Vue/Vue-1/",
            "title": "💯Vue.log~(壹)",
            "date_published": "2021-02-16T02:41:06.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-03-17 23:48:29\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Web\\Vue\\Vue-1.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%89%8D%E7%AB%AF%E5%88%86%E7%A6%BB\">前端分离</a>\n<ul>\n<li><a href=\"#%E9%80%BB%E8%BE%91\">逻辑</a></li>\n<li><a href=\"#%E4%BA%8B%E4%BB%B6\">事件</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%A7%86%E5%9B%BE\">视图</a></li>\n<li><a href=\"#%E9%80%9A%E4%BF%A1\">通信</a></li>\n<li><a href=\"#vue-%E7%AE%80%E6%9E%90\">Vue 简析</a>\n<ul>\n<li><a href=\"#%E8%A7%86%E5%9B%BE-1\">视图</a></li>\n<li><a href=\"#%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1\">网络通信</a></li>\n<li><a href=\"#%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC\">页面跳转</a></li>\n<li><a href=\"#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86\">状态管理</a></li>\n<li><a href=\"#vue-ui\">Vue-UI</a></li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"前端分离\">前端分离</h2>\n<h3 id=\"逻辑\">逻辑</h3>\n<ul>\n<li>判断</li>\n<li>循环</li>\n</ul>\n<hr>\n<h3 id=\"事件-2\">事件</h3>\n<ul>\n<li>\n<p>浏览器事件</p>\n<ul>\n<li>window</li>\n<li>document</li>\n</ul>\n</li>\n<li>\n<p>dom 事件</p>\n<ul>\n<li>增删,遍历,修改等元素</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>JQuery</p>\n</li>\n<li>\n<p>Vue</p>\n</li>\n<li>\n<p>React</p>\n</li>\n</ul>\n<hr>\n<h2 id=\"视图\">视图</h2>\n<blockquote>\n<p>HTML + CSS</p>\n</blockquote>\n<ul>\n<li>BootStrap</li>\n<li>LayUI</li>\n</ul>\n<hr>\n<h2 id=\"通信\">通信</h2>\n<ul>\n<li>xhr</li>\n<li>JQuery-&gt;Ajax</li>\n<li>Vue-&gt;axios</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Vue-简析\">Vue 简析</h2>\n<blockquote>\n<p>SOC 关注点分离原则.</p>\n</blockquote>\n<h3 id=\"视图-2\">视图</h3>\n<ul>\n<li>HTML+css+js</li>\n</ul>\n<hr>\n<h3 id=\"网络通信\">网络通信</h3>\n<ul>\n<li>axios</li>\n</ul>\n<hr>\n<h3 id=\"页面跳转\">页面跳转</h3>\n<ul>\n<li>vue-router</li>\n</ul>\n<hr>\n<h3 id=\"状态管理\">状态管理</h3>\n<ul>\n<li>vuex</li>\n</ul>\n<hr>\n<h3 id=\"Vue-UI\">Vue-UI</h3>\n<ul>\n<li>飞冰 ice (阿里)</li>\n</ul>\n<blockquote>\n<p>搁置 ing</p>\n</blockquote>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "html",
                "javascript",
                "vue"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/Node/Hexo/optimize/",
            "url": "https://weidows.github.io/post/Web/Node/Hexo/optimize/",
            "title": "🚀网站优化记录.",
            "date_published": "2021-02-06T17:11:24.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @Date: 2021-02-07 01:11:24\n * @LastEditors: Weidows\n * @LastEditTime: 2021-08-29 15:15:38\n * @FilePath: \\Blog-private\\source\\_posts\\Web\\Node\\Hexo\\optimize.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#why\">Why?</a>\n<ul>\n<li><a href=\"#why-do-this\"><code>Why do this?</code></a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%A6%82%E8%A7%88\">概览</a></li>\n<li><a href=\"#%E5%A5%91%E5%90%88\">契合</a></li>\n<li><a href=\"#%E4%BC%98%E5%8C%96-css\">优化 css</a></li>\n<li><a href=\"#%E4%BC%98%E5%8C%96-js\">优化 js</a>\n<ul>\n<li><a href=\"#%E5%86%8D%E6%AC%A1%E9%AD%94%E6%94%B9\">再次魔改</a></li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"Why\">Why?</h2>\n<h3 id=\"Why-do-this\"><code>Why do this?</code></h3>\n<ul>\n<li>\n<p>这网站有太多需要简化的东西了,很多样式是<code>直接引入的css和js</code></p>\n</li>\n<li>\n<p>巨耗费渲染性能和时间(可以感觉出来加载这网站挺费劲的)</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"概览\">概览</h2>\n<ul>\n<li>\n<p>对于 css 的所有修改,全部整合进<code>mine.styl</code></p>\n<ul>\n<li>\n<p>编译时就已经做好美化,额外资源负载几乎降为 0</p>\n</li>\n<li>\n<p>注入到<code>index.styl</code>末尾.</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>js 的美化,全部整合到 <code>utils.js</code></p>\n<ul>\n<li>\n<p>请求数加 0,加载策略优化,时间降低; Weidows对象直接全局加载生效且不被GC.</p>\n</li>\n<li>\n<p>把 js 代码全堆在最后,暴露 <code>Weidows.re()</code> 供 pjax 调用.</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>pug 的修改降低为 3 处,方便升级换代,都在此目录下: <code>themes\\butterfly\\layout\\includes\\</code></p>\n<ul>\n<li>\n<p><code>additional-js.pug</code> - 末尾追加樱花特效</p>\n</li>\n<li>\n<p><code>footer.pug</code>- 页脚标签+改注脚样式</p>\n</li>\n<li>\n<p><code>third-party\\pjax.pug</code> - 调用 <a href=\"http://Weidows.re\">Weidows.re</a>(),适配 pjax 刷新</p>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"契合\">契合</h2>\n<blockquote>\n<p>结合 <a href=\"./butterfly_modify\">butterfly 内部魔改记录</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"优化-css\">优化 css</h2>\n<ul>\n<li>\n<p>以往的 css 是直接引入的文件,在客户端加载时还是会耗费一些不菲时间加载+渲染出来</p>\n</li>\n<li>\n<p>优化思路就是把 css 变成<code>styl</code>,使之在编译生成 HTML 文件时就把样式改了,节省客户端耗费.</p>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>如下:</p>\n<ul>\n<li>\n<p>新建一个名为 <code>mine.styl</code> 的文件.</p>\n</li>\n<li>\n<p>原 css 文件就是<code>mine.css</code>,用<a href=\"https://html5beta.com/tools/css2stylus.html\"><code>css2styl</code></a>转换为 styl 格式,粘贴到 <code>mine.styl</code></p>\n</li>\n<li>\n<p>注意这个网站转换成的 styl 有很多 bug(包括缩进和括号,需要人工检验)</p>\n</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVFlgb.png\" alt=\"20210207134449\" />\n</li>\n<li>\n<p>包括原先<code>source/css/_global/function.styl</code>之类的内添加或修改的样式,也可以转入 mine.styl.</p>\n</li>\n<li>\n<p>然后在<code>index.styl</code>中引入:</p>\n<ul>\n<li>在末尾加上</li>\n</ul>\n<figure class=\"highlight styl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//mine</span></span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;_mine/mine.styl&#x27;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>用 <code>hexo server</code> 测试一下,应该没问题~</p>\n</li>\n<li>\n<p>这样 css 优化就完成了</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"优化-js\">优化 js</h2>\n<ul>\n<li>\n<p>跟 css 一样,我原先也是直接一个<code>mine.js</code>引入的</p>\n</li>\n<li>\n<p>虽然没啥问题,但是会导致页面第二次加载渲染,而且多了一个请求数</p>\n</li>\n<li>\n<p>于是,我想直接把它淦进<code>main.js</code>中!</p>\n<ul>\n<li>操作不复杂,直接复制<code>mine.js</code>内容,粘贴进<code>main.js</code>最后</li>\n<li>注意不是最末尾</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"comment\">// 粘贴到这里</span></span><br><span class=\"line\">  <span class=\"title function_\">refreshFn</span>();</span><br><span class=\"line\">  <span class=\"title function_\">unRefreshFn</span>();</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"再次魔改\">再次魔改</h3>\n<ul>\n<li>\n<p>因为某些美化函数会被 pjax 功能搞失效,直接把函数放进 main.js 的话,pjax 无法再次使用</p>\n</li>\n<li>\n<p>所以我把美化 js 打包并弄进 <code>butterfly/layout/head.pug</code> 中,在页面编译时就会被添加到 <code>&lt;head&gt;</code> 内,加载时间和请求数不增加!</p>\n<p>现在,加载逻辑是: js 美化代码在 HTML 文件的 head 中,然后在 main.js 最后写一句调用命令; 在页面用了 pjax 加载时,pjax.pug 中的重渲染函数会被调用.</p>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "website",
                "hexo",
                "优化",
                "魔改"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/JavaScript/study-4/",
            "url": "https://weidows.github.io/post/Web/JavaScript/study-4/",
            "title": "👌JavaScript学习笔记-(肆)",
            "date_published": "2021-01-26T13:19:27.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @Date: 2021-01-26 21:19:27\n * @LastEditors: Weidows\n * @LastEditTime: 2021-02-13 17:23:10\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Web\\JavaScript\\study-4.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%BC%80%E5%A4%B4\">开头</a></li>\n<li><a href=\"#jquery\">JQuery</a>\n<ul>\n<li><a href=\"#%E4%BD%BF%E7%94%A8\">使用</a></li>\n<li><a href=\"#%E9%80%89%E6%8B%A9%E5%99%A8\">选择器</a></li>\n<li><a href=\"#%E4%BA%8B%E4%BB%B6\">事件</a></li>\n<li><a href=\"#%E6%93%8D%E4%BD%9C-dom\">操作 DOM</a></li>\n<li><a href=\"#ajax\">Ajax</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%B7%A9%E5%9B%BA\">巩固</a></li>\n</ul>\n<h2 id=\"开头\">开头</h2>\n<ul>\n<li>写在一开始.</li>\n<li>批判思维开场 - <code>JQuery</code> 过时了吗?</li>\n<li>于是找了篇文章看看…</li>\n</ul>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/wojiushiwo945you/article/details/90719714\">2019 年了 ，jQuery 过时了吗？</a></p>\n</blockquote>\n<ul>\n<li>多看文章就是好,hh,这次又收获了个<code>美美哒分割线</code>,如下</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JQuery\">JQuery</h2>\n<blockquote>\n<p><a href=\"https://jquery.cuishifeng.cn/\">JQuery API 中文文档</a></p>\n</blockquote>\n<h3 id=\"使用-2\">使用</h3>\n<ul>\n<li>JQuery 是个 JavaScript 函数库,使用方法:\n<ul>\n<li><code>$(selector).action()</code></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;../lib/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;test-jquery&quot;</span>&gt;</span>点我<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//选择器就是css选择器</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      $(<span class=\"string\">&quot;#test-jquery&quot;</span>).<span class=\"title function_\">click</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">alert</span>(<span class=\"string\">&quot;hello,jQuery!&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"选择器\">选择器</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//原生js，选择器少，麻烦不好记</span></span><br><span class=\"line\"><span class=\"comment\">//标签</span></span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementByTagName</span>();</span><br><span class=\"line\"><span class=\"comment\">//id</span></span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>();</span><br><span class=\"line\"><span class=\"comment\">//class</span></span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementByClassName</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//jQuery css中的选择器它全部都能用！</span></span><br><span class=\"line\"><span class=\"comment\">//标签选择器</span></span><br><span class=\"line\">$(<span class=\"string\">&quot;p&quot;</span>).<span class=\"title function_\">click</span>();</span><br><span class=\"line\"><span class=\"comment\">//id选择器</span></span><br><span class=\"line\">$(<span class=\"string\">&quot;#id1&quot;</span>).<span class=\"title function_\">click</span>();</span><br><span class=\"line\"><span class=\"comment\">//class选择器</span></span><br><span class=\"line\">$(<span class=\"string\">&quot;.class1&quot;</span>).<span class=\"property\">click</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"事件\">事件</h3>\n<ul>\n<li>\n<p>鼠标事件</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4FsK.png\" alt=\"20210126224938\" />\n</li>\n<li>\n<p>案例</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;../lib/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-id\">#divMove</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">500px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">font-size</span>: <span class=\"number\">30px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--要求：获取鼠标当前的一个坐标--&gt;</span></span><br><span class=\"line\">    Mouse <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;mouseMove&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;divMove&quot;</span>&gt;</span>在这里移动鼠标试试<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">       * ! 当网页元素加载完毕之后，响应事件</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">       * 原型: $(document).ready(function()&#123;&#125;);</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">       * 简化后的: $(function ()&#123;&#125;);</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">       */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      $(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        $(<span class=\"string\">&quot;#divMove&quot;</span>).<span class=\"title function_\">mousemove</span>(<span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">          $(<span class=\"string\">&quot;#mouseMove&quot;</span>).<span class=\"title function_\">text</span>(<span class=\"string\">&quot;X: &quot;</span> + e.<span class=\"property\">pageX</span> + <span class=\"string\">&quot;Y: &quot;</span> + e.<span class=\"property\">pageY</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>展示</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GViWIh.png\" alt=\"20210127000346\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"操作-DOM\">操作 DOM</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;../lib/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;test-ul&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;js&quot;</span>&gt;</span>JavaScript<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;python&quot;</span>&gt;</span>Python<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// 操作DOM文本</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      $(<span class=\"string\">&quot;#test-ul li[class=js]&quot;</span>).<span class=\"title function_\">text</span>(); <span class=\"comment\">//获得值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      $(<span class=\"string\">&quot;#test-ul li[class=js]&quot;</span>).<span class=\"title function_\">text</span>(<span class=\"string\">&quot;设置值&quot;</span>); <span class=\"comment\">//设置值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      $(<span class=\"string\">&quot;#test-ul&quot;</span>).<span class=\"title function_\">html</span>(); <span class=\"comment\">//获得值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      $(<span class=\"string\">&quot;#test-ul li[name=python&quot;</span>).<span class=\"title function_\">html</span>(<span class=\"string\">&quot;&lt;strong&gt;123&lt;/strong&gt;&quot;</span>); <span class=\"comment\">//设置值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// 操作css</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      $(<span class=\"string\">&quot;#test-ul li&quot;</span>).<span class=\"title function_\">css</span>(&#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;red&quot;</span> &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// 控制元素显示,本质display:none</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      $(<span class=\"string\">&quot;#test-ul li[name=python]&quot;</span>).<span class=\"title function_\">hide</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">      $(<span class=\"string\">&quot;#test-ul li[name=python]&quot;</span>).<span class=\"title function_\">show</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Ajax\">Ajax</h3>\n<p>后面有后端对接时再讲.</p>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"巩固\">巩固</h2>\n<ol>\n<li>\n<p>找一些美化比较好的网站,扒下来 HTML</p>\n</li>\n<li>\n<p><code>源码之家</code> 找一些小游戏,瞅瞅源码.</p>\n</li>\n</ol>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记",
                "javascript",
                "jquery"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/JavaScript/study-3/",
            "url": "https://weidows.github.io/post/Web/JavaScript/study-3/",
            "title": "💔JavaScript学习笔记-(叁)",
            "date_published": "2021-01-19T17:47:21.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @Date: 2021-01-20 01:47:21\n * @LastEditors: Weidows\n * @LastEditTime: 2021-03-01 22:55:35\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Web\\JavaScript\\study-3.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%AF%B9%E8%B1%A1\">对象</a>\n<ul>\n<li><a href=\"#date\">Date</a></li>\n<li><a href=\"#json\">Json</a></li>\n<li><a href=\"#ajax\">AJAX</a></li>\n</ul>\n</li>\n<li><a href=\"#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1\">面向对象</a>\n<ul>\n<li><a href=\"#%E5%8E%9F%E5%9E%8B\">原型</a></li>\n<li><a href=\"#%E7%B1%BB%E5%92%8C%E7%BB%A7%E6%89%BF\">类和继承</a></li>\n</ul>\n</li>\n<li><a href=\"#bom-%E5%AF%B9%E8%B1%A1\">BOM 对象</a>\n<ul>\n<li><a href=\"#window\">window</a></li>\n<li><a href=\"#navigator\"><s>Navigator</s></a></li>\n<li><a href=\"#screen\">screen</a></li>\n<li><a href=\"#location\"><code>location</code></a></li>\n<li><a href=\"#document\">document</a></li>\n</ul>\n</li>\n<li><a href=\"#dom-%E5%AF%B9%E8%B1%A1\">DOM 对象‼</a>\n<ul>\n<li><a href=\"#%E8%8E%B7%E5%BE%97%E8%8A%82%E7%82%B9\">获得节点</a></li>\n<li><a href=\"#%E6%9B%B4%E6%96%B0%E8%8A%82%E7%82%B9\">更新节点</a></li>\n<li><a href=\"#%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9\">删除节点</a></li>\n<li><a href=\"#%E6%8F%92%E5%85%A5%E8%8A%82%E7%82%B9\">插入节点</a></li>\n<li><a href=\"#%E6%8E%92%E5%88%97%E8%8A%82%E7%82%B9\">排列节点</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%93%8D%E4%BD%9C%E8%A1%A8%E5%8D%95\">操作表单</a>\n<ul>\n<li><a href=\"#%E8%8E%B7%E5%BE%97%E8%A1%A8%E5%8D%95%E4%BF%A1%E6%81%AF\">获得表单信息</a></li>\n<li><a href=\"#%E6%8F%90%E4%BA%A4%E8%A1%A8%E5%8D%95\">提交表单</a></li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"对象-3\">对象</h2>\n<ul>\n<li>几种标准对象</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> <span class=\"number\">123</span>); <span class=\"comment\">// number</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> <span class=\"string\">&quot;123&quot;</span>); <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> <span class=\"literal\">true</span>); <span class=\"comment\">// boolean</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> <span class=\"title class_\">NaN</span>); <span class=\"comment\">// number</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> []); <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> &#123;&#125;); <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> <span class=\"title class_\">Math</span>.<span class=\"property\">max</span>); <span class=\"comment\">// function</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> <span class=\"literal\">undefined</span>); <span class=\"comment\">// undefined</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Date\">Date</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> time = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 输出</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(time); <span class=\"comment\">//  Wed Jan 20 2021 21:21:32 GMT+0800 (中国标准时间)</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(time.<span class=\"title function_\">getFullYear</span>()); <span class=\"comment\">// 2021</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(time.<span class=\"title function_\">getMonth</span>()); <span class=\"comment\">// 0  (注意这个月份是0~11,不是1~12)</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(time.<span class=\"title function_\">getDate</span>()); <span class=\"comment\">// 20</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(time.<span class=\"title function_\">getHours</span>()); <span class=\"comment\">// 21</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(time.<span class=\"title function_\">getMinutes</span>()); <span class=\"comment\">// 19</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(time.<span class=\"title function_\">getSeconds</span>()); <span class=\"comment\">// 4</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 1611148746727</span></span><br><span class=\"line\"><span class=\"comment\"> * 返回的是自1970年开始计时,到现在为止的毫秒数</span></span><br><span class=\"line\"><span class=\"comment\"> * 这就产生了2038问题,因为到那时候这个计数单位就溢出了,成为无效的负数</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(time.<span class=\"title function_\">getTime</span>());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//记录时间,通过时间戳转换.</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> log_time = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(<span class=\"number\">1611148746727</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(log_time); <span class=\"comment\">//  Wed Jan 20 2021 21:19:06 GMT+0800 (中国标准时间)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 转换格式</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(log_time.<span class=\"title function_\">toLocaleString</span>()); <span class=\"comment\">//  2021/1/20下午9:19:06</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(log_time.<span class=\"title function_\">toUTCString</span>()); <span class=\"comment\">//  Wed, 20 Jan 2021 13:19:06 GMT</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Json\">Json</h3>\n<ul>\n<li>\n<p>目前网络数据传输最主要格式.</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4Gir.png\" alt=\"20210120222429\" />\n</li>\n<li>\n<p>Json 的使用</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title class_\">Weidows</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;Weidows&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">age</span>: <span class=\"number\">21</span>,</span><br><span class=\"line\">  <span class=\"attr\">gender</span>: <span class=\"string\">&quot;男&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">work</span>: <span class=\"string\">&quot;student&quot;</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 转换为Json格式</span></span><br><span class=\"line\"><span class=\"comment\"> *  &#123;&quot;name&quot;:&quot;Weidows&quot;,&quot;age&quot;:21,&quot;gender&quot;:&quot;男&quot;,&quot;work&quot;:&quot;student&quot;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title class_\">JsonWeidows</span> = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(<span class=\"title class_\">Weidows</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">JsonWeidows</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 解析Json</span></span><br><span class=\"line\"><span class=\"comment\"> *  &#123; name: &#x27;Weidows&#x27;, age: 21, gender: &#x27;男&#x27;, work: &#x27;student&#x27; &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title class_\">Weidows</span>_2 = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(<span class=\"title class_\">JsonWeidows</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Weidows</span>_2);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"AJAX\">AJAX</h3>\n<ul>\n<li>\n<p>三种请求方法:</p>\n<ul>\n<li>\n<p>原生的 js 写法 xhr 异步请求</p>\n</li>\n<li>\n<p>jQuery 封装好的方法$(#name).ajax(“”)</p>\n</li>\n<li>\n<p>axios 请求</p>\n</li>\n</ul>\n</li>\n<li>\n<p>挂起,后期学.</p>\n</li>\n</ul>\n<hr>\n<h2 id=\"面向对象\">面向对象</h2>\n<ul>\n<li>与 Java 中<code>类-对象</code>有些不同.</li>\n</ul>\n<h3 id=\"原型\">原型</h3>\n<ul>\n<li>\n<p>通过原型创建对象</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> people = &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&quot;people&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">run</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span> + <span class=\"string\">&quot;Running...&quot;</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  bird = &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&quot;bird&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">fly</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span> + <span class=\"string\">&quot;Flying...&quot;</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  xiaoming = &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&quot;小明&quot;</span>,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">xiaoming.<span class=\"property\">__proto__</span> = people;</span><br><span class=\"line\">xiaoming.<span class=\"title function_\">run</span>(); <span class=\"comment\">//  小明Running...</span></span><br><span class=\"line\">xiaoming.<span class=\"property\">__proto__</span> = bird;</span><br><span class=\"line\">xiaoming.<span class=\"title function_\">fly</span>(); <span class=\"comment\">//  小明Flying...</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 给原型新增方法</span></span><br><span class=\"line\">xiaoming.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">hello</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;Hello.&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>太恶心了,所以 ES6 引入 <code>class</code>,参下.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"类和继承\">类和继承</h3>\n<ul>\n<li>跟 Java 几乎一模一样了!</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Student</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">hello</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;hello.&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">XiaoStudent</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Student</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">name, grade</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">super</span>(name);</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">grade</span> = grade;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">getGrade</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">grade</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> xiaoming = <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;xiaoming&quot;</span>),</span><br><span class=\"line\">  xiaohong = <span class=\"keyword\">new</span> <span class=\"title class_\">XiaoStudent</span>(<span class=\"string\">&quot;xiaohong&quot;</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(xiaoming); <span class=\"comment\">//  Student &#123; name: &#x27;xiaoming&#x27; &#125;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(xiaohong); <span class=\"comment\">//  XiaoStudent &#123; name: &#x27;xiaohong&#x27;, grade: 1 &#125;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>原理上还是利用原型</p>\n<ul>\n<li>原型链结构</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAHEb.png\" alt=\"20210120233527\" />\n</li>\n</ul>\n<hr>\n<h2 id=\"BOM-对象\">BOM 对象</h2>\n<ul>\n<li><code>browser object model</code></li>\n</ul>\n<h3 id=\"window\">window</h3>\n<ul>\n<li>\n<p>这个对象代表浏览器窗口</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPiRg.png\" alt=\"20210120234923\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"Navigator\"><s>Navigator</s></h3>\n<ul>\n<li>\n<p>Navigator 封装了浏览器的信息</p>\n</li>\n<li>\n<p>可用来判断平台和浏览器信息,但是不建议使用,这个信息<u>可被修改/伪造.</u></p>\n</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVi7lD.png\" alt=\"20210120235844\" />\n<hr>\n<h3 id=\"screen\">screen</h3>\n<ul>\n<li>屏幕信息</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">screen.<span class=\"property\">width</span>; <span class=\"comment\">// 1920</span></span><br><span class=\"line\">screen.<span class=\"property\">height</span>; <span class=\"comment\">// 1080</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"location\"><code>location</code></h3>\n<ul>\n<li>location 代表当前页面的 URL 信息</li>\n<li>重要,常用!</li>\n</ul>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPI3K.png\" alt=\"20210121000604\" />\n<hr>\n<h3 id=\"document\">document</h3>\n<ul>\n<li>\n<p>document 代表当前的页面，HTML DOM 文档树</p>\n</li>\n<li>\n<p>获取/更改标题</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"property\">title</span>; <span class=\"comment\">// &quot;【狂神说Java】JavaScript学习笔记_pan_h1995的博客-CSDN博客&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"property\">title</span> = <span class=\"string\">&quot;Weidows&quot;</span>; <span class=\"comment\">// &quot;Weidows&quot;</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>获取具体的文档树节点</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> app = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;app&quot;</span>);</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>获取 cookie</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSGnP.png\" alt=\"20210121101945\" />\n<ul>\n<li>劫持 cookie\n<ul>\n<li>通过获取 cookie 就可以在另一台机器上在不输密码的情况下登录</li>\n<li>比如<code>Bilibili-helper</code>,获取一些 cookie 就可以伪造登录(确认安全情况下妥善利用)</li>\n</ul>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>history</p>\n<ul>\n<li>前进 history.forward()</li>\n<li>后退 history.back()</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"DOM-对象‼\">DOM 对象‼</h2>\n<ul>\n<li>\n<p><code>document object model</code> 浏览器网页就是一个 Dom 树形结构！</p>\n</li>\n<li>\n<p>常用操作</p>\n<ul>\n<li>遍历 Dom 节点：得到 Dom 节点</li>\n<li>更新：更新 Dom 节点</li>\n<li>删除：删除一个 Dom 节点</li>\n<li>添加：添加一个新的节点</li>\n</ul>\n<hr>\n</li>\n</ul>\n<h3 id=\"获得节点\">获得节点</h3>\n<ul>\n<li>要操作一个 Dom 节点，必须要先获得这个 Dom 节点.</li>\n<li>之后尽量都使用 jQuery()</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> h1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;h1&quot;</span>),</span><br><span class=\"line\">  class_1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;class-1&quot;</span>),</span><br><span class=\"line\">  app = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;app&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> children = app.<span class=\"property\">children</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"更新节点\">更新节点</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;body&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>123<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> body = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;body&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// 会覆盖掉所有文档树,比如上面的div被覆写</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      body.<span class=\"property\">innerHTML</span> = <span class=\"string\">&quot;&lt;em&gt;这里是body标签.&lt;/em&gt;&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// 修改css样式</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      body.<span class=\"property\">style</span>.<span class=\"property\">color</span> = <span class=\"string\">&quot;red&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      body.<span class=\"property\">style</span>.<span class=\"property\">fontSize</span> = <span class=\"string\">&quot;20px&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"删除节点\">删除节点</h3>\n<ul>\n<li>需要先获取父节点,在通过父节点删除目标子节点.</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 删除这个 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;here&quot;</span>&gt;</span>123<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> self = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;here&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> father = self.<span class=\"property\">parentElement</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      father.<span class=\"title function_\">removeChild</span>(self);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// 动态删除,删除后子节点index会自动改变.</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(father.<span class=\"property\">children</span>[<span class=\"number\">0</span>]); <span class=\"comment\">// &lt;div&gt;1&lt;/div&gt;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      father.<span class=\"title function_\">removeChild</span>(father.<span class=\"property\">children</span>[<span class=\"number\">0</span>]);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(father.<span class=\"property\">children</span>[<span class=\"number\">0</span>]); <span class=\"comment\">// &lt;div&gt;2&lt;/div&gt;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"插入节点\">插入节点</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;body&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// var body = document.getElementById(&quot;body&quot;);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// ByTagName返回的是数组,这句等同于上面</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> body = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;body&quot;</span>)[<span class=\"number\">0</span>];</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//创建一个新的节点</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> newP = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;p&quot;</span>); <span class=\"comment\">//创建一个p标签</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      newP.<span class=\"property\">id</span> = <span class=\"string\">&quot;newP&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      newP.<span class=\"property\">innerText</span> = <span class=\"string\">&quot;Hello World&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      body.<span class=\"title function_\">appendChild</span>(newP);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//创建一个script标签</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> myScript = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;script&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      myScript.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&quot;type&quot;</span>, <span class=\"string\">&quot;text/javascript&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//创建一个style标签</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> myStyle = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;style&quot;</span>); <span class=\"comment\">//创建了一个空style标签</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      myStyle.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&quot;type&quot;</span>, <span class=\"string\">&quot;text/css&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      myStyle.<span class=\"property\">innerHTML</span> = <span class=\"string\">&quot;body&#123;background-color:chartreuse;&#125;&quot;</span>; <span class=\"comment\">//设置标签内容</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//多种方法注入</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// body.appendChild(myStyle);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// body.style.backgroundColor = &quot;chartreuse&quot;;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// document.getElementByTagName(&quot;body&quot;)[0].appendChild(myStyle);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">appendChild</span>(myStyle);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"排列节点\">排列节点</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;body&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;div-1&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;div-2&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> div1 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;div-1&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> div2 = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;div-2&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">insertBefore</span>(div2, div1);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// 这样就把div2插到div1前面了.</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>除此之外还有.replace 等等,不再赘述,用时看文档就行.</li>\n</ul>\n<hr>\n<h2 id=\"操作表单\">操作表单</h2>\n<ul>\n<li>表单主要用来提交信息\n<ul>\n<li>文本框----text</li>\n<li>下拉框----select</li>\n<li>单选框----radio</li>\n<li>多选框----checkbox</li>\n<li>隐藏域----hidden</li>\n<li>密码框----password</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"获得表单信息\">获得表单信息</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;post&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>用户名：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;username&quot;</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"comment\">&lt;!--多选框的值就是定义好的value--&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>性别：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;man&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;boy&quot;</span> /&gt;</span>男</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;woman&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;girl&quot;</span> /&gt;</span>女</span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> input_text = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;username&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> boy_radio = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;boy&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> girl_radio = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;girl&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//获取输入框的值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      input_text.<span class=\"property\">value</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//修改输入框的值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      input_text.<span class=\"property\">value</span> = <span class=\"string\">&quot;Weidows&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//对于单选框，多选框等等固定的值，boy_radio.value只能取到当前的值man/woman</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      boy_radio.<span class=\"property\">checked</span>; <span class=\"comment\">//查看返回的结果，是否为true，如果为true，则被选中。</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      girl_radio.<span class=\"property\">checked</span> = <span class=\"literal\">true</span>; <span class=\"comment\">//赋值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>效果</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLJmE.png\" alt=\"20210124093813\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"提交表单\">提交表单</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--MD5加密工具类--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">      表单绑定提交事件</span></span><br><span class=\"line\"><span class=\"comment\">      οnsubmit= 绑定一个提交检测的函数:true，false</span></span><br><span class=\"line\"><span class=\"comment\">      将这个结果返回给表单，使用onsubmit接收</span></span><br><span class=\"line\"><span class=\"comment\">    --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;post&quot;</span> <span class=\"attr\">onsubmit</span>=<span class=\"string\">&quot;return aaa()&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        表单提交抓取的是带有name属性的input标签的value,不带的不会抓</span></span><br><span class=\"line\"><span class=\"comment\">      --&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>用户名：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">required</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>密码：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span> <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;password&quot;</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;hidden&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;md5-password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;button type=&quot;submit&quot;&gt;提交&lt;/button&gt; 与下面等效</span></span><br><span class=\"line\"><span class=\"comment\">        绑定事件 onclick 被点击</span></span><br><span class=\"line\"><span class=\"comment\">        &lt;input type=&quot;submit&quot; onclick=&quot;aaa()&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"comment\">      --&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">function</span> <span class=\"title function_\">aaa</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> username = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;username&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> pwd = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;password&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> md5pwd = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;md5-password&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">         * 这里可以校验判断或处理表单内容，true就是通过提交，false就是阻止提交</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">         * 上面username是用required来判空</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">         * password是用下面的if判空</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">         */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">if</span> (pwd.<span class=\"property\">value</span> === <span class=\"string\">&quot;&quot;</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">          <span class=\"title function_\">alert</span>(<span class=\"string\">&quot;请填写全.&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">          <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">          md5pwd.<span class=\"property\">value</span> = <span class=\"title function_\">md5</span>(pwd.<span class=\"property\">value</span>); <span class=\"comment\">// 加密</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">          <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>效果</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVS5Kg.png\" alt=\"20210126211616\" />\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSNPg.png\" alt=\"20210126211801\" />\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记",
                "javascript"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/JavaScript/study-2/",
            "url": "https://weidows.github.io/post/Web/JavaScript/study-2/",
            "title": "🐱‍JavaScript学习笔记-(贰)",
            "date_published": "2020-12-30T10:09:38.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @Date: 2020-12-30 18:09:38\n * @LastEditors: Weidows\n * @LastEditTime: 2021-02-13 17:22:44\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Web\\JavaScript\\study-2.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%BB%AD\">续</a></li>\n<li><a href=\"#%E5%AF%B9%E8%B1%A1\">对象</a>\n<ul>\n<li><a href=\"#%E8%B0%83%E7%94%A8\">调用</a></li>\n<li><a href=\"#%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E6%B7%BB%E5%8A%A0\">对象属性赋值/添加</a></li>\n<li><a href=\"#%E5%88%A0%E9%99%A4%E5%B1%9E%E6%80%A7\">删除属性</a></li>\n<li><a href=\"#%E5%88%A4%E6%96%AD%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E6%9C%89%E6%9F%90%E5%B1%9E%E6%80%A7\">判断对象是否有某属性</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6\">流程控制</a>\n<ul>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC\">基本</a></li>\n<li><a href=\"#foreach-%E5%BE%AA%E7%8E%AF\">forEach 循环</a></li>\n<li><a href=\"#for-in-%E5%BE%AA%E7%8E%AF\">for-in 循环</a></li>\n<li><a href=\"#for-of-%E5%BE%AA%E7%8E%AF\">for-of 循环</a></li>\n</ul>\n</li>\n<li><a href=\"#map--set\">Map &amp; Set</a>\n<ul>\n<li><a href=\"#map\">Map</a></li>\n<li><a href=\"#set\">Set</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%87%BD%E6%95%B0\">函数</a>\n<ul>\n<li><a href=\"#%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%E4%B8%80\">定义方式一</a></li>\n<li><a href=\"#%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%E4%BA%8C\">定义方式二</a></li>\n<li><a href=\"#%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E9%97%AE%E9%A2%98\">参数传递问题</a></li>\n<li><a href=\"#%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F\">变量作用域</a></li>\n<li><a href=\"#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%87%BD%E6%95%B0\">全局变量/函数</a></li>\n<li><a href=\"#%E5%87%BD%E6%95%B0%E4%BC%A0%E9%80%92\">函数传递</a></li>\n<li><a href=\"#%E6%96%B9%E6%B3%95\">方法</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"续\">续</h2>\n<blockquote>\n<p>上接<a href=\"../study-1\">🐱‍🏍JavaScript 学习笔记-(壹)</a></p>\n</blockquote>\n<hr>\n<h2 id=\"对象-2\">对象</h2>\n<ul>\n<li>JavaScript 中的所有的键都是<code>字符串</code>，值是任意对象！</li>\n<li>JavaScript 中定义对象用<code>&#123;&#125;</code>,定义数组用<code>[]</code>.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> person = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;Tom&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">age</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">  <span class=\"attr\">email</span>: <span class=\"string\">&quot;123456798@QQ.com&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">score</span>: <span class=\"number\">66</span>,</span><br><span class=\"line\">  <span class=\"attr\">eat</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;&#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"调用-2\">调用</h3>\n<ul>\n<li>调用并不存在的属性,会提示 undefined,并不会报错.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(person.<span class=\"property\">age</span>); <span class=\"comment\">// 3</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(person.<span class=\"property\">work</span>); <span class=\"comment\">// undefined</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"对象属性赋值-添加\">对象属性赋值/添加</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">person.<span class=\"property\">age</span> = <span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(person.<span class=\"property\">age</span>); <span class=\"comment\">// 4</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 添加一个并没有的work属性.</span></span><br><span class=\"line\">person.<span class=\"property\">work</span> = <span class=\"string\">&quot;student&quot;</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(person.<span class=\"property\">work</span>); <span class=\"comment\">// student</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//添加函数</span></span><br><span class=\"line\">person.<span class=\"property\">run</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// person.run() = function ()这样写不对</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;run&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"删除属性\">删除属性</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">delete</span> person.<span class=\"property\">age</span>;</span><br><span class=\"line\"><span class=\"comment\">// delete person.eat(); 这样写是错的</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> person.<span class=\"property\">eat</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">person; <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">&#123; name: &#x27;Tom&#x27;, </span></span><br><span class=\"line\"><span class=\"comment\">  email: &#x27;123456798<span class=\"doctag\">@QQ</span>.com&#x27;, </span></span><br><span class=\"line\"><span class=\"comment\">  score: 66, </span></span><br><span class=\"line\"><span class=\"comment\">  work: &#x27;student&#x27;, </span></span><br><span class=\"line\"><span class=\"comment\">  run: [λ] &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"判断对象是否有某属性\">判断对象是否有某属性</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;email&quot;</span> <span class=\"keyword\">in</span> person); <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;toString&quot;</span> <span class=\"keyword\">in</span> person); <span class=\"comment\">//true 继承自父类</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 判断属性是否真正属于本对象</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(person.<span class=\"title function_\">hasOwnProperty</span>(<span class=\"string\">&quot;toString&quot;</span>)); <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"流程控制\">流程控制</h2>\n<h3 id=\"基本\">基本</h3>\n<ul>\n<li>\n<p>像是 if-else,for,while 跟 Java 一模一样.</p>\n</li>\n<li>\n<p>遍历<code>对象用for-in</code>,遍历<code>数组用for-of</code></p>\n<blockquote>\n<p>具体分析参见 <a href=\"https://segmentfault.com/q/1010000006658882\">javascript 总 for of 和 for in 的区别？</a></p>\n</blockquote>\n</li>\n<li>\n<p>初始化数组</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> age = [<span class=\"number\">9</span>, <span class=\"number\">8</span>, <span class=\"number\">7</span>, <span class=\"number\">6</span>, <span class=\"number\">5</span>, <span class=\"number\">4</span>, <span class=\"number\">3</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>];</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"forEach-循环\">forEach 循环</h3>\n<ul>\n<li>内部是匿名函数.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">age.<span class=\"title function_\">forEach</span>(<span class=\"keyword\">function</span> (<span class=\"params\">element, index, array</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// element: 指向当前元素的值</span></span><br><span class=\"line\">  <span class=\"comment\">// index:   指向当前索引</span></span><br><span class=\"line\">  <span class=\"comment\">// array:   指向Array对象本身</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(element);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// [9, 8, 7, 6, 5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"for-in-循环\">for-in 循环</h3>\n<ul>\n<li>与 Java 不同,java 给的是数组内指定元素的克隆体,JavaScript 给的是指定元素的索引下标.</li>\n<li>跟 for 循环差别只在于数组大小是否可知.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> index <span class=\"keyword\">in</span> age) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(age[index]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// [9, 8, 7, 6, 5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"for-of-循环\">for-of 循环</h3>\n<ul>\n<li>与 Java 的 for-each 循环一样.</li>\n<li>遍历数据而非 index.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> num <span class=\"keyword\">of</span> age) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(num); <span class=\"comment\">// 9, 8, 7, 6, 5, 4, 3, 2, 1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Map-Set\">Map &amp; Set</h2>\n<h3 id=\"Map\">Map</h3>\n<ul>\n<li>通过 key-value 存储数据\n<ul>\n<li>key 是字符串,value 是任意数据.</li>\n<li>跟 Java 类似.</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// var name = [&quot;Tom&quot;, &quot;Jack&quot;, &quot;haha&quot;],</span></span><br><span class=\"line\"><span class=\"comment\">//   score = [100, 90, 80];</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 适用于创建这种索引关系</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> map = <span class=\"keyword\">new</span> <span class=\"title class_\">Map</span>([</span><br><span class=\"line\">  [<span class=\"string\">&quot;Tom&quot;</span>, <span class=\"number\">100</span>],</span><br><span class=\"line\">  [<span class=\"string\">&quot;Jack&quot;</span>, <span class=\"number\">90</span>],</span><br><span class=\"line\">  [<span class=\"string\">&quot;haha&quot;</span>, <span class=\"number\">80</span>],</span><br><span class=\"line\">]); <span class=\"comment\">// Map &#123; &#x27;Tom&#x27; =&gt; 99, &#x27;Jack&#x27; =&gt; 90, &#x27;haha&#x27; =&gt; 80 &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取value</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(map.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;Tom&quot;</span>)); <span class=\"comment\">// 100</span></span><br><span class=\"line\"><span class=\"comment\">// set() 新增或修改value</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(map.<span class=\"title function_\">set</span>(<span class=\"string\">&quot;Tom&quot;</span>, <span class=\"number\">99</span>).<span class=\"title function_\">get</span>(<span class=\"string\">&quot;Tom&quot;</span>)); <span class=\"comment\">// 99</span></span><br><span class=\"line\"><span class=\"comment\">// 删除</span></span><br><span class=\"line\">map.<span class=\"title function_\">delete</span>(<span class=\"string\">&quot;Tom&quot;</span>); <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"comment\">// has</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(map.<span class=\"title function_\">has</span>(<span class=\"string\">&quot;Tom&quot;</span>)); <span class=\"comment\">// false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(map); <span class=\"comment\">// Map &#123; &#x27;Jack&#x27; =&gt; 90, &#x27;haha&#x27; =&gt; 80 &#125;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Set\">Set</h3>\n<ul>\n<li>无序不重复,Set 和 Map 类似，Set 只存储 key，且 key 不重复。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> set = <span class=\"keyword\">new</span> <span class=\"title class_\">Set</span>([</span><br><span class=\"line\">  [<span class=\"string\">&quot;Tom&quot;</span>, <span class=\"number\">100</span>],</span><br><span class=\"line\">  [<span class=\"string\">&quot;haha&quot;</span>, <span class=\"number\">80</span>],</span><br><span class=\"line\">  [<span class=\"string\">&quot;haha&quot;</span>, <span class=\"number\">80</span>],</span><br><span class=\"line\">  [],</span><br><span class=\"line\">  [],</span><br><span class=\"line\">  <span class=\"number\">1</span>,</span><br><span class=\"line\">  <span class=\"number\">1</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;1&quot;</span>,</span><br><span class=\"line\">  <span class=\"number\">2</span>,</span><br><span class=\"line\">  <span class=\"title class_\">NaN</span>,</span><br><span class=\"line\">  <span class=\"title class_\">NaN</span>,</span><br><span class=\"line\">  &#123;&#125;,</span><br><span class=\"line\">  &#123;&#125;,</span><br><span class=\"line\">]);</span><br><span class=\"line\"></span><br><span class=\"line\">set; <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  Set &#123;</span></span><br><span class=\"line\"><span class=\"comment\">    [ &#x27;Tom&#x27;, 100 ], </span></span><br><span class=\"line\"><span class=\"comment\">    [ &#x27;haha&#x27;, 80 ], </span></span><br><span class=\"line\"><span class=\"comment\">    [ &#x27;haha&#x27;, 80 ], </span></span><br><span class=\"line\"><span class=\"comment\">    [], </span></span><br><span class=\"line\"><span class=\"comment\">    [],               // 即使数组内部内容一样或为空,也会视为不同key</span></span><br><span class=\"line\"><span class=\"comment\">    1, </span></span><br><span class=\"line\"><span class=\"comment\">    &#x27;1&#x27;,              // 数值与字符串不同</span></span><br><span class=\"line\"><span class=\"comment\">    2, </span></span><br><span class=\"line\"><span class=\"comment\">    NaN,              // Set 内 NaN===NaN</span></span><br><span class=\"line\"><span class=\"comment\">    &#123;&#125;, </span></span><br><span class=\"line\"><span class=\"comment\">    &#123;&#125;,               // 跟数组一样,视为不同对象</span></span><br><span class=\"line\"><span class=\"comment\">    ... &#125;</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\">set.<span class=\"title function_\">add</span>(<span class=\"number\">3</span>).<span class=\"title function_\">delete</span>(<span class=\"number\">3</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(set.<span class=\"title function_\">has</span>(<span class=\"number\">3</span>)); <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"函数-2\">函数</h2>\n<p>如果没有执行 return，函数执行完也会返回结果，结果是 <code>undefined</code></p>\n<h3 id=\"定义方式一\">定义方式一</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">abs</span>(<span class=\"params\">x</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ret;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (x &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    ret = x;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    ret = -x;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">abs</span>(-<span class=\"number\">10</span>)); <span class=\"comment\">// 10</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"定义方式二\">定义方式二</h3>\n<ul>\n<li>\n<p>好怪哦,不过跟上面等价(推荐用上面那种)</p>\n</li>\n<li>\n<p>这是 Js 一个特性,函数体与函数名分离,函数名实际上就是那个变量<code>abs</code>,它指向后面的函数体</p>\n<ul>\n<li>关键字<code>function</code>是用来定义函数体的,<code>var</code>用来定义变量</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> abs = <span class=\"keyword\">function</span> (<span class=\"params\">x</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ret;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (x &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    ret = x;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    ret = -x;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">abs</span>(-<span class=\"number\">10</span>)); <span class=\"comment\">// 10</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>function(x){…}是一个匿名函数,把结果赋值给 abs，通过 abs 间接取函数返回值.</li>\n</ul>\n<hr>\n<h3 id=\"参数传递问题\">参数传递问题</h3>\n<ul>\n<li>\n<p>利用关键字 argument ,它是函数传入的参数数组</p>\n</li>\n<li>\n<p>比如传入的参数为空或者非法.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> abs = <span class=\"keyword\">function</span> (<span class=\"params\">x</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"variable language_\">arguments</span>.<span class=\"property\">length</span> === <span class=\"number\">0</span>) <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;无参数传入.&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> x != <span class=\"string\">&quot;number&quot;</span>) <span class=\"keyword\">throw</span> <span class=\"string\">&quot;参数不对.&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ret;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (x &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    ret = x;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    ret = -x;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 无参数传入.</span></span><br><span class=\"line\"><span class=\"comment\"> * NaN</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">abs</span>());</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 参数不对.</span></span><br><span class=\"line\"><span class=\"comment\"> * 函数和程序直接停止,&quot;参数不对&quot;是报错,不是输出</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">abs</span>(<span class=\"string\">&quot;123&quot;</span>));</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>有时传入的参数不定,缺失的话可以通过上面方法解决,如果多余呢?</p>\n<ul>\n<li>通过<code>...</code>解决(Java 也有类似的)</li>\n<li>可变参数</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">func</span>(<span class=\"params\">a, b, ...c</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a + b);</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 123456</span></span><br><span class=\"line\"><span class=\"comment\"> * [ 7, 8, 9 ]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"title function_\">func</span>(<span class=\"string\">&quot;123&quot;</span>, <span class=\"string\">&quot;456&quot;</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"变量作用域\">变量作用域</h3>\n<ul>\n<li>\n<p>跟 Java 一模一样.</p>\n</li>\n<li>\n<p>比如</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">A</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> x = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"title function_\">B</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> x = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x); <span class=\"comment\">// 2</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">B</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x); <span class=\"comment\">// 1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">A</span>();</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>自动提升作用域</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"string\">&quot;x&quot;</span> + y;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x); <span class=\"comment\">// xundefined</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> y = <span class=\"string\">&quot;y&quot;</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>相当于下面的,程序自动提升了 y 的定义,但无法提升 y 的赋值,所以 x 也无法定义.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> y;</span><br><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"string\">&quot;x&quot;</span> + y;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x); <span class=\"comment\">// xundefined</span></span><br><span class=\"line\">y = <span class=\"string\">&quot;y&quot;</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>另外,<code>const</code>也是 ES6 才引入的</p>\n<ul>\n<li>定义常量,不可更改.</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>局部作用域</p>\n<ul>\n<li>ES6 引入,建议用<code>let</code>定义局部作用域的变量以免冲突.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index_1 = <span class=\"number\">0</span>; index_1 &lt; <span class=\"number\">10</span>; index_1++) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(index_1);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> index_2 = <span class=\"number\">0</span>; index_2 &lt; <span class=\"number\">10</span>; index_2++) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(index_2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(index_1); <span class=\"comment\">// 10</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(index_2); <span class=\"comment\">// index_1 is not defined</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"全局变量-函数\">全局变量/函数</h3>\n<ul>\n<li>\n<p>所有的全局变量/函数是绑定在 windows 对象上的(浏览器中,如果是 node 中就不行)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//全局变量</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"string\">&quot;abc&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">x</span>);</span><br><span class=\"line\"><span class=\"title function_\">alert</span>(x);</span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"title function_\">alert</span>(x);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>这就会导致一个问题:多 Js 文件执行时使用了同名的全局变量会产生冲突</p>\n<ul>\n<li>为了解决这冲突,我们把代码放进自己的命名空间中</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 全局命名空间</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title class_\">Weidows</span> = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用命名空间定义全局变量(实际概念就是套了层壳)</span></span><br><span class=\"line\"><span class=\"title class_\">Weidows</span>.<span class=\"property\">name</span> = <span class=\"string\">&quot;Weidows&quot;</span>;</span><br><span class=\"line\"><span class=\"title class_\">Weidows</span>.<span class=\"property\">age</span> = <span class=\"string\">&quot;21&quot;</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>后面 <code>JQuery</code> 就是做这个用的.</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"函数传递\">函数传递</h3>\n<ul>\n<li>\n<p>通过<a href=\"#%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%E4%BA%8C\">定义方法二</a>这种,了解到函数和变量实际是互通的</p>\n</li>\n<li>\n<p>与 Java 不同,像是 C 里面的函数指针,函数名与函数体是分离的.</p>\n</li>\n<li>\n<p>所以以下赋值成立</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">func_1</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;这里是func.&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> func_2 = func_1;</span><br><span class=\"line\"><span class=\"title function_\">func_2</span>(); <span class=\"comment\">// 这里是func.</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"方法\">方法</h3>\n<ul>\n<li>\n<p>定义在对象里的函数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title class_\">Weidows</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;Weidows&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">birth</span>: <span class=\"number\">2000</span>,</span><br><span class=\"line\">  <span class=\"attr\">age</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> now = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getFullYear</span>();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> now - <span class=\"variable language_\">this</span>.<span class=\"property\">birth</span>;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [λ: age]</span></span><br><span class=\"line\"><span class=\"comment\"> * 注意调用方法的格式</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Weidows</span>.<span class=\"property\">age</span>); <span class=\"comment\">// [λ: age]</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Weidows</span>.<span class=\"title function_\">age</span>()); <span class=\"comment\">// 21</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>利用<code>this</code>和<code>apply()</code>实现函数和方法的恰当调用.</p>\n<ul>\n<li>JS 中可以通过<code>apply()</code>控制 this 的指向</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">getAge</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> now = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getFullYear</span>();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> now - <span class=\"variable language_\">this</span>.<span class=\"property\">birth</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title class_\">Weidows</span>_1 = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;Weidows&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">birth</span>: <span class=\"number\">2000</span>,</span><br><span class=\"line\">  <span class=\"comment\">// age: getAge(),  这样写实质age是getAge()执行后的返回值</span></span><br><span class=\"line\">  <span class=\"attr\">age</span>: getAge, <span class=\"comment\">// 这样含义是age指向getAge()函数体</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title class_\">Weidows</span>_2 = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;Weidows&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">birth</span>: <span class=\"number\">2000</span>,</span><br><span class=\"line\">  <span class=\"attr\">age</span>: getAge,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//执行</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Weidows</span>_1.<span class=\"title function_\">age</span>()); <span class=\"comment\">// 21</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Weidows</span>_2.<span class=\"title function_\">age</span>()); <span class=\"comment\">// 21</span></span><br><span class=\"line\"><span class=\"comment\">// console.log(getAge()); // Cannot read property &#x27;birth&#x27; of undefined</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(getAge.<span class=\"title function_\">apply</span>(<span class=\"title class_\">Weidows</span>_1, [])); <span class=\"comment\">// 21</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(getAge.<span class=\"title function_\">apply</span>(<span class=\"title class_\">Weidows</span>_2, [])); <span class=\"comment\">// 21</span></span><br><span class=\"line\"><span class=\"comment\">// 这里apply含义就是调用getAge()函数,并让this指向Weidows_2对象,传入getAge的参数在[]数组里,为空.</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记",
                "javascript"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/JavaScript/study-1/",
            "url": "https://weidows.github.io/post/Web/JavaScript/study-1/",
            "title": "🐱JavaScript学习笔记-(壹)",
            "date_published": "2020-12-20T13:26:24.000Z",
            "content_html": "<h1>JavaScript 学习笔记-(壹)</h1>\n<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @Date: 2020-12-20 21:26:24\n * @LastEditors: Weidows\n * @LastEditTime: 2022-04-20 23:48:13\n * @FilePath: \\Blog-private\\source\\_posts\\Web\\JavaScript\\study-1.md\n * @Description:\n * @!: *********************************************************************\n-->\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li><a href=\"#javascript-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%A3%B9\">JavaScript 学习笔记-(壹)</a>\n<ul>\n<li><a href=\"#%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB\">前端知识体系</a>\n<ul>\n<li><a href=\"#css-%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8\">css 预处理器</a></li>\n<li><a href=\"#javascript-%E6%A1%86%E6%9E%B6\">JavaScript 框架</a></li>\n<li><a href=\"#ui-%E6%A1%86%E6%9E%B6\">UI 框架</a></li>\n<li><a href=\"#javascript-%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7\">JavaScript 构建工具</a></li>\n<li><a href=\"#%E4%B8%89%E7%AB%AF%E7%BB%9F%E4%B8%80\">三端统一</a></li>\n</ul>\n</li>\n<li><a href=\"#hello-world\">Hello-World</a>\n<ul>\n<li><a href=\"#%E5%86%85%E9%83%A8%E5%BC%80%E6%92%B8\">内部开撸</a></li>\n<li><a href=\"#%E5%A4%96%E9%83%A8%E5%BC%95%E5%85%A5\">外部引入</a></li>\n<li><a href=\"#type\">type</a></li>\n<li><a href=\"#demo\">demo</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B0%83%E8%AF%95\">浏览器调试</a></li>\n<li><a href=\"#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\">数据类型</a>\n<ul>\n<li><a href=\"#%E5%8F%98%E9%87%8F\">变量</a></li>\n<li><a href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2\">字符串</a></li>\n<li><a href=\"#%E5%B8%83%E5%B0%94%E5%80%BC\">布尔值</a></li>\n<li><a href=\"#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97\">逻辑运算</a></li>\n<li><a href=\"#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6\">比较运算符</a></li>\n<li><a href=\"#%E6%B5%AE%E7%82%B9%E6%95%B0\">浮点数</a></li>\n<li><a href=\"#null--undefined\">null &amp;&amp; undefined</a></li>\n<li><a href=\"#%E6%95%B0%E7%BB%84\">数组</a></li>\n<li><a href=\"#%E5%AF%B9%E8%B1%A1\">对象</a></li>\n<li><a href=\"#%E4%B8%A5%E6%A0%BC%E6%A3%80%E6%9F%A5%E6%A8%A1%E5%BC%8F\">严格检查模式</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2-1\">字符串</a>\n<ul>\n<li><a href=\"#%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6\">转义字符</a></li>\n<li><a href=\"#%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2\">多行字符串</a></li>\n<li><a href=\"#%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2\">模板字符串</a></li>\n<li><a href=\"#%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8\">函数调用</a></li>\n<li><a href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%8F%AF%E5%8F%98%E6%80%A7\">字符串的可变性</a></li>\n<li><a href=\"#%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2\">大小写转换</a></li>\n<li><a href=\"#%E5%AD%90%E4%B8%B2\">子串</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%95%B0%E7%BB%84-1\">数组</a>\n<ul>\n<li><a href=\"#%E9%95%BF%E5%BA%A6\">长度</a></li>\n<li><a href=\"#indexof\">indexOf()</a></li>\n<li><a href=\"#slice\">slice()</a></li>\n<li><a href=\"#pushpopunshiftshift\">push(),pop(),unshift(),shift()</a></li>\n<li><a href=\"#reversesort\">reverse(),sort()</a></li>\n<li><a href=\"#concat\">concat()</a></li>\n<li><a href=\"#join\">join()</a></li>\n<li><a href=\"#%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84\">多维数组</a></li>\n<li><a href=\"#fill\">fill()</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%80%9F%E7%89%A9%E8%A1%A8\">借物表</a></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h2 id=\"前端知识体系\">前端知识体系</h2>\n<p>想要成为真正的“互联网 Java 全栈工程师”还有很长的一段路要走，其中前端是绕不开的一门必修课。</p>\n<ul>\n<li>\n<p>HTML（结构）：决定网页的结构和内容</p>\n</li>\n<li>\n<p>CSS（表现）：设定网页的表现样式。</p>\n</li>\n<li>\n<p>JavaScript（行为）：是一种弱类型脚本语言，其源码不需经过编译，而是由浏览器解释运行，用于控制网页的行为.</p>\n<hr>\n</li>\n</ul>\n<h3 id=\"css-预处理器\">css 预处理器</h3>\n<ul>\n<li>\n<p>SASS：基于 Ruby ，通过服务端处理，功能强大。解析效率高。需要学习 Ruby 语言，上手难度高于 LESS。</p>\n</li>\n<li>\n<p>LESS：基于 NodeJS，通过客户端处理，使用简单。功能比 SASS 简单，解析效率也低于 SASS，但在实际开发中足够了，所以如果我们后台人员如果需要的话，<code>建议使用 LESS。</code></p>\n<hr>\n</li>\n</ul>\n<h3 id=\"JavaScript-框架\">JavaScript 框架</h3>\n<ul>\n<li>\n<p><code>JQuery</code>:大家熟知的 JavaScript 库，优点就是简化了 DOM 操作，缺点就是 DOM 操作太频繁，影响前端性能；在前端眼里使用它<code>仅仅是为了兼容 IE6，7，8</code></p>\n</li>\n<li>\n<p><code>Angular</code>:Google 收购的前端框架，由一群 Java 程序员开发，其特点是将后台的 MVC 模式搬到了前端并增加了模块化开发的理念，与微软合作，采用了 TypeScript 语法开发；对后台程序员友好，对前端程序员不太友好；最大的缺点是版本迭代不合理（如 1 代–&gt;2 代，除了名字，基本就是两个东西</p>\n</li>\n<li>\n<p><code>React</code>:Facebook 出品，一款高性能的 JS 前端框架；特点是提出了新概念 【虚拟 DOM】用于减少真实 DOM 操作，在内存中模拟 DOM 操作，有效的提升了前端渲染效率；缺点是使用复杂，因为需要额外学习一门【JSX】语言；</p>\n</li>\n<li>\n<p><code>Vue</code>:一款渐进式 JavaScript 框架，所谓渐进式就是逐步实现新特性的意思，如实现模块化开发、路由、状态管理等新特性。其特点是综合了 Angular（模块化）和 React(虚拟 DOM) 的优点；</p>\n</li>\n<li>\n<p><code>Axios</code>:前端通信框架；因为 Vue 的边界很明确，就是为了处理 DOM，所以并不具备通信能力，此时就需要额外使用一个通信框架与服务器交互；当然也可以直接选择使用 jQuery 提供的 AJAX 通信功能</p>\n<hr>\n</li>\n</ul>\n<h3 id=\"UI-框架\">UI 框架</h3>\n<ul>\n<li>\n<p><code>Ant-Design</code>：阿里巴巴出品，基于 React 的 UI 框架</p>\n</li>\n<li>\n<p><code>ElementUI、iview、ice</code>：饿了么出品，基于 Vue 的 UI 框架</p>\n</li>\n<li>\n<p><code>BootStrap</code>：Teitter 推出的一个用于前端开发的开源工具包</p>\n</li>\n<li>\n<p><code>AmazeUI</code>：又叫“妹子 UI”，一款 HTML5 跨屏前端框架</p>\n<hr>\n</li>\n</ul>\n<h3 id=\"JavaScript-构建工具\">JavaScript 构建工具</h3>\n<ul>\n<li>\n<p><code>Babel</code>：JS 编译工具，主要用于浏览器不支持的 ES 新特性，比如用于编译 TypeScript</p>\n</li>\n<li>\n<p><code>WebPack</code>：模块打包器，主要作用就是打包、压缩、合并及按序加载</p>\n<hr>\n</li>\n</ul>\n<h3 id=\"三端统一\">三端统一</h3>\n<ul>\n<li>混合开发（Hybrid App）\n<ul>\n<li>云打包：HBuild -&gt; HBuildX，DCloud 出品；API Cloud</li>\n<li>本地打包： Cordova（前身是 PhoneGap）</li>\n</ul>\n</li>\n<li>微信小程序:微信小程序 UI 开发的框架：WeUI</li>\n</ul>\n<hr>\n<h2 id=\"Hello-World\">Hello-World</h2>\n<h3 id=\"内部开撸\">内部开撸</h3>\n<ul>\n<li>放在 head 或者 body 里面都可以,一般放在 head 中.\n<ul>\n<li>需要注意如果 js 对 DOM 进行操作,标签位置会影响加载顺序以导致对 DOM 的操作可能无效.</li>\n<li>比如要对 body 里的内容进行修改,js 放在 head 里就会无效(因为先加载的 js 后加载的 body),这种情况就需要 js 放在 body 的末尾.</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">alert</span>(<span class=\"string\">&quot;HelloWorld&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"外部引入\">外部引入</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/1.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>注意 script 不是单标签,<code>&lt;script src=&quot;js/1.js&quot; /&gt;</code>这样写会出错.</p>\n</blockquote>\n<hr>\n<h3 id=\"type\">type</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--不用显示定义type，也默认就是javaScript--&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"demo\">demo</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--! JavaScript严格区分大小写--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// 1. 定义变量   变量类型 变量名 = 变量值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> score = <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//alert(num);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// 2. 条件控制</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// if (score &gt; 60 &amp;&amp; score &lt; 70) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//   alert(&quot;60~70&quot;);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// &#125; else if (score &gt; 70 &amp;&amp; score &lt; 80) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//   alert(&quot;70~80&quot;);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// &#125; else &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//   alert(&quot;other&quot;);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"浏览器调试\">浏览器调试</h2>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLL8M.png\" alt=\"20201220232055\" />\n<ul>\n<li>调试 HTML 和 css 一般在 Element</li>\n<li>console 控制台一般用来调试 JavaScript.</li>\n<li>检查文件和网络连接分别用 Source 和 Network</li>\n<li>最后的 Application 用来存储网络数据.</li>\n</ul>\n<blockquote>\n<p>摸摸就会了,不同特意学习.</p>\n</blockquote>\n<hr>\n<h2 id=\"数据类型\">数据类型</h2>\n<h3 id=\"变量\">变量</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">123</span>       <span class=\"regexp\">//</span>整数<span class=\"number\">123</span></span><br><span class=\"line\"><span class=\"number\">123.1</span>     <span class=\"regexp\">//</span>浮点数<span class=\"number\">123.1</span></span><br><span class=\"line\"><span class=\"number\">1.123</span>e3   <span class=\"regexp\">//</span>科学计数法</span><br><span class=\"line\">-<span class=\"number\">99</span>       <span class=\"regexp\">//</span>负数</span><br><span class=\"line\">NaN\t      <span class=\"regexp\">//</span>not a number</span><br><span class=\"line\">Infinity  <span class=\"regexp\">//</span> 表示无限大</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"字符串-2\">字符串</h3>\n<p>‘abc’ “abc”</p>\n<hr>\n<h3 id=\"布尔值\">布尔值</h3>\n<p>true，false</p>\n<hr>\n<h3 id=\"逻辑运算\">逻辑运算</h3>\n<ul>\n<li>\n<p>&amp;&amp; 两个都为真，结果为真</p>\n</li>\n<li>\n<p>|| 一个为真，结果为真</p>\n</li>\n<li>\n<p>! 真即假，假即真</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"比较运算符\">比较运算符</h3>\n<ul>\n<li>\n<p>= 赋值</p>\n</li>\n<li>\n<p>== 等于（类型不一样，值一样比如:<code>1 与&quot;1&quot;</code>，也会判断为 true）</p>\n<blockquote>\n<p>这是一个 JS 的缺陷，坚持不要使用 == 比较</p>\n</blockquote>\n</li>\n<li>\n<p>=== 绝对等于（类型一样，值一样，结果为 true）</p>\n<hr>\n</li>\n<li>\n<p>NaN === NaN</p>\n<ul>\n<li>// false</li>\n<li>只能通过 isNaN（NaN）来判断这个数是否是 NaN</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"浮点数\">浮点数</h3>\n<ul>\n<li>\n<p>跟 C 语言一样,某些浮点数运算存在一定的精度损失.</p>\n<ul>\n<li>尽量避免使用浮点数运算.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span> / <span class=\"number\">3</span> === <span class=\"number\">1</span> - <span class=\"number\">2</span> / <span class=\"number\">3</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>函数调用类似 Java</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Math</span>.<span class=\"title function_\">abs</span>(<span class=\"number\">1</span> / <span class=\"number\">3</span> - (<span class=\"number\">1</span> - <span class=\"number\">2</span> / <span class=\"number\">3</span>)) &lt; <span class=\"number\">0.00000001</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"null-undefined\">null &amp;&amp; undefined</h3>\n<ul>\n<li>null 定义了但是事空的</li>\n<li>undefined 未定义的</li>\n</ul>\n<hr>\n<h3 id=\"数组\">数组</h3>\n<ul>\n<li>\n<p>定义,跟 Java 异曲同工.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//保证代码的可读性，尽量使用[]</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"string\">&quot;hello&quot;</span>, <span class=\"literal\">null</span>, <span class=\"literal\">true</span>];</span><br><span class=\"line\"><span class=\"comment\">//第二种定义方法</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = <span class=\"keyword\">new</span> <span class=\"title class_\">Array</span>(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"string\">&quot;hello&quot;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>差别</p>\n<ul>\n<li>JavaScript 的数组内可以存放不同类型的数据.</li>\n<li>数组越界报错 undefined</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"对象\">对象</h3>\n<ul>\n<li>\n<p>对象是大括号，数组是中括号</p>\n</li>\n<li>\n<p>每个属性之间使用逗号隔开，最后一个属性不需要逗号</p>\n</li>\n<li>\n<p>与 Java 相同,变量和对象名完全可以用中文(但是不建议).</p>\n</li>\n<li>\n<p>定义</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Person person = new Person(1,2,3,4,5);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> person = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;Tom&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">age</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">  <span class=\"attr\">tags</span>: [<span class=\"string\">&quot;js&quot;</span>, <span class=\"string\">&quot;java&quot;</span>, <span class=\"string\">&quot;web&quot;</span>, <span class=\"string\">&quot;...&quot;</span>],</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>取值</p>\n<figure class=\"highlight node-repl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">person.name</span><br><span class=\"line\"><span class=\"meta prompt_\">&gt;</span> <span class=\"language-javascript\"><span class=\"string\">&quot;Tom&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">person.age</span><br><span class=\"line\"><span class=\"meta prompt_\">&gt;</span> <span class=\"language-javascript\"><span class=\"number\">3</span></span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"严格检查模式\">严格检查模式</h3>\n<ul>\n<li>\n<p>js 里定义变量几种方法:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 默认全局变量(严禁这样写)</span></span><br><span class=\"line\">i1 = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"comment\">// 全局变量(不建议写法,可能引发问题)</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> i2 = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"comment\">// 局部变量(建议)</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> i3 = <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>严格检查</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&quot;use strict&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//全局变量 (严格检查,会报错)</span></span><br><span class=\"line\">i = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h2 id=\"字符串-3\">字符串</h2>\n<h3 id=\"转义字符\">转义字符</h3>\n<ul>\n<li>(基本跟 Java 一样)</li>\n</ul>\n<figure class=\"highlight livescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\\&#x27;</span></span><br><span class=\"line\"><span class=\"string\">\\n</span></span><br><span class=\"line\"><span class=\"string\">\\t</span></span><br><span class=\"line\"><span class=\"string\">\\u4e2d</span>    <span class=\"string\">\\u***</span> Unicode字符</span><br><span class=\"line\"><span class=\"string\">\\x41</span>\tAscall字符</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"多行字符串\">多行字符串</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//tab上面 esc下面</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> msg = <span class=\"string\">`hello</span></span><br><span class=\"line\"><span class=\"string\">            world</span></span><br><span class=\"line\"><span class=\"string\">            你好呀</span></span><br><span class=\"line\"><span class=\"string\">            nihao</span></span><br><span class=\"line\"><span class=\"string\">            `</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"模板字符串\">模板字符串</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> name = <span class=\"string\">&quot;Tom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> age = <span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> msg = <span class=\"string\">`你好，<span class=\"subst\">$&#123;name&#125;</span> + <span class=\"subst\">$&#123;age&#125;</span>`</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(msg);</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"函数调用\">函数调用</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> str = <span class=\"string\">`123`</span>;</span><br><span class=\"line\"><span class=\"comment\">// str.函数名</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 例如</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(str.<span class=\"property\">length</span>); <span class=\"comment\">//字符串长度 3</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(str.<span class=\"title function_\">indexOf</span>(<span class=\"number\">2</span>)); <span class=\"comment\">//2的下标 1</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(str[<span class=\"number\">1</span>]); <span class=\"comment\">// 2</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"字符串的可变性\">字符串的可变性</h3>\n<ul>\n<li>同 Java 的 String 对象,其本身不可变</li>\n</ul>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str[<span class=\"number\">1</span>] <span class=\"operator\">=</span> <span class=\"number\">0</span><span class=\"comment\">; // 这样会报错,因为字符串是read-only的.</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"大小写转换\">大小写转换</h3>\n<ul>\n<li>跟 Java 一样</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str.<span class=\"title function_\">toUpperCase</span>();</span><br><span class=\"line\">str.<span class=\"title function_\">toLowerCase</span>();</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"子串\">子串</h3>\n<ul>\n<li><code>[)</code> 左闭右开区间</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">student.<span class=\"title function_\">substring</span>(<span class=\"number\">1</span>); <span class=\"comment\">//从第一个字符串截取到最后一个字符串</span></span><br><span class=\"line\">student.<span class=\"title function_\">substring</span>(<span class=\"number\">1</span>, <span class=\"number\">3</span>); <span class=\"comment\">//[1,3)</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"数组-2\">数组</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>]; <span class=\"comment\">//通过下标取值和赋值</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"长度\">长度</h3>\n<ul>\n<li>支持动态扩容,扩出来的元素位置是 undefined,如果缩小 length 的话,超出部分元素会丢失.</li>\n</ul>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">arr.length</span> = <span class=\"number\">1</span><span class=\"comment\">;</span></span><br><span class=\"line\"><span class=\"attr\">arr.length</span> = <span class=\"number\">2</span><span class=\"comment\">; // 扩容</span></span><br><span class=\"line\"><span class=\"attr\">arr.length</span> = <span class=\"number\">0</span><span class=\"comment\">; // 缩小</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"indexOf\">indexOf()</h3>\n<ul>\n<li>获取元素位置</li>\n<li><code>1</code> 与 <code>&quot;1&quot;</code> 是不同元素.</li>\n</ul>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr.indexOf(<span class=\"number\">1</span>)<span class=\"comment\">;</span></span><br><span class=\"line\">arr.indexOf(<span class=\"string\">&quot;1&quot;</span>)<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"slice\">slice()</h3>\n<ul>\n<li>等同于 subString()</li>\n<li>截取数组并返回子数组</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>];</span><br><span class=\"line\">arr = arr.<span class=\"title function_\">slice</span>(<span class=\"number\">1</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr); <span class=\"comment\">// [ 2, 3, 4, 5 ]</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"push-pop-unshift-shift\">push(),pop(),unshift(),shift()</h3>\n<ul>\n<li>分别是尾部添加/删除,头部添加/删除.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">arr.<span class=\"title function_\">push</span>(<span class=\"string\">&quot;a&quot;</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr); <span class=\"comment\">// [1, 2, 3, 4, 5, 6, &quot;a&quot;];</span></span><br><span class=\"line\"></span><br><span class=\"line\">arr.<span class=\"title function_\">pop</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr); <span class=\"comment\">// [ 1, 2, 3, 4, 5, 6 ]</span></span><br><span class=\"line\"></span><br><span class=\"line\">arr.<span class=\"title function_\">unshift</span>(<span class=\"string\">&quot;b&quot;</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr); <span class=\"comment\">// [ &#x27;b&#x27;, 1, 2, 3, 4, 5, 6 ]</span></span><br><span class=\"line\"></span><br><span class=\"line\">arr.<span class=\"title function_\">shift</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr); <span class=\"comment\">// [ 1, 2, 3, 4, 5, 6 ]</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"reverse-sort\">reverse(),sort()</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">arr.<span class=\"title function_\">reverse</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr); <span class=\"comment\">// [ 6, 5, 4, 3, 2, 1 ]</span></span><br><span class=\"line\"></span><br><span class=\"line\">arr.<span class=\"title function_\">sort</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr); <span class=\"comment\">// [ 1, 2, 3, 4, 5, 6 ]</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"concat\">concat()</h3>\n<ul>\n<li>数组连接</li>\n<li>并没有修改原来的数组,只是返回了一个新的数组.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr1 = [<span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>],</span><br><span class=\"line\">  arr2 = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr1.<span class=\"title function_\">concat</span>(arr2)); <span class=\"comment\">// [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, 1, 2, 3 ]</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"join\">join()</h3>\n<ul>\n<li>打印拼接数组，使用特定的字符串连接</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>];</span><br><span class=\"line\">arr.<span class=\"title function_\">join</span>(<span class=\"string\">&quot;-&quot;</span>); <span class=\"comment\">// 并无效果</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr.<span class=\"title function_\">join</span>(<span class=\"string\">&quot;-&quot;</span>)); <span class=\"comment\">// a-b-c</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"多维数组\">多维数组</h3>\n<ul>\n<li>没啥花活.</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [</span><br><span class=\"line\">  [<span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>],</span><br><span class=\"line\">  [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>],</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\">arr; <span class=\"comment\">// [ [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27; ], [ 1, 2, 3 ] ]</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"fill\">fill()</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [];</span><br><span class=\"line\">arr.<span class=\"property\">length</span> = <span class=\"number\">10</span>;</span><br><span class=\"line\">arr.<span class=\"title function_\">fill</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">arr; <span class=\"comment\">// [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ]</span></span><br></pre></td></tr></table></figure>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表-22\">借物表</h2>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/pan_h1995/article/details/105974385\">【狂神说 Java】JavaScript 学习笔记</a></p>\n</blockquote>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记",
                "javascript"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/css/css-2/",
            "url": "https://weidows.github.io/post/Web/css/css-2/",
            "title": "🟢CSS学习笔记-(二)",
            "date_published": "2020-12-20T02:22:30.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @Date: 2020-12-20 10:22:30\n * @LastEditors: Weidows\n * @LastEditTime: 2021-02-13 17:22:23\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Web\\css\\css-2.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#github-%E6%BA%90%E7%A0%81\">GitHub 源码</a></li>\n<li><a href=\"#%E6%B5%AE%E5%8A%A8\">浮动</a>\n<ul>\n<li><a href=\"#%E5%85%83%E7%B4%A0%E5%B1%82%E7%BA%A7%E5%88%86%E7%B1%BB\">元素层级分类</a></li>\n<li><a href=\"#display\">display</a></li>\n<li><a href=\"#float\">float</a></li>\n<li><a href=\"#clear\">Clear</a></li>\n<li><a href=\"#overflow\">Overflow</a></li>\n<li><a href=\"#%E7%88%B6%E7%BA%A7%E8%BE%B9%E6%A1%86%E5%A1%8C%E9%99%B7%E9%97%AE%E9%A2%98\">父级边框塌陷问题</a>\n<ul>\n<li><a href=\"#%E9%97%AE%E9%A2%98\">问题</a></li>\n<li><a href=\"#%E6%89%A9%E5%A4%A7%E7%88%B6%E7%BA%A7%E5%85%83%E7%B4%A0\">扩大父级元素</a></li>\n<li><a href=\"#%E5%A2%9E%E6%B7%BB%E7%A9%BA-div\">增添空 div</a></li>\n<li><a href=\"#%E8%87%AA%E5%8A%A8%E6%BA%A2%E5%87%BA\">自动溢出</a></li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E4%BC%AA%E7%B1%BB%E4%BC%98\">添加伪类(优)</a></li>\n<li><a href=\"#%E5%B0%8F%E7%BB%93\">小结</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#%E5%AE%9A%E4%BD%8D\">定位</a>\n<ul>\n<li><a href=\"#%E7%9B%B8%E5%AF%B9%E5%AE%9A%E4%BD%8D\">相对定位</a></li>\n<li><a href=\"#%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D\">绝对定位</a></li>\n<li><a href=\"#%E5%9B%BA%E5%AE%9A%E5%AE%9A%E4%BD%8D\">固定定位</a></li>\n<li><a href=\"#z-index\">z-index</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%8A%A8%E7%94%BB\">动画</a></li>\n<li><a href=\"#%E6%80%BB%E7%BB%93\">总结</a></li>\n</ul>\n<h2 id=\"GitHub-源码-2\"><a href=\"https://github.com/Weidows/Java/tree/master/Web/css\">GitHub 源码</a></h2>\n<h2 id=\"浮动\">浮动</h2>\n<h3 id=\"元素层级分类\">元素层级分类</h3>\n<ul>\n<li>\n<p>块级元素</p>\n<ul>\n<li>h1~h6(markdown 中不是 )</li>\n<li>p</li>\n<li>div</li>\n<li>ui li</li>\n</ul>\n</li>\n<li>\n<p>行内元素</p>\n<ul>\n<li>span</li>\n<li>a</li>\n<li>img</li>\n<li>strong</li>\n</ul>\n</li>\n<li>\n<p>块级元素可以包含行内元素,但反之不行.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"display\">display</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">      display</span></span><br><span class=\"line\"><span class=\"comment\">        block 块元素</span></span><br><span class=\"line\"><span class=\"comment\">        inline 行内元素</span></span><br><span class=\"line\"><span class=\"comment\">        inline-block 行内块元素</span></span><br><span class=\"line\"><span class=\"comment\">        none 不显示</span></span><br><span class=\"line\"><span class=\"comment\">     --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-tag\">div</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">display</span>: inline;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-tag\">span</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">display</span>: inline-block;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>div块元素<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>span行内元素<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>效果图<br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVJRJm.png\" alt=\"e2tclC5Vkqm1b74\"></li>\n</ul>\n<hr>\n<h3 id=\"float\">float</h3>\n<ul>\n<li>\n<p>float</p>\n<ul>\n<li>left</li>\n<li>right</li>\n</ul>\n</li>\n<li>\n<p>浮动效果</p>\n<ul>\n<li>(可以让元素自动排版,但是可能会使结构错位塌陷)</li>\n<li><code>在标准文档流之外.</code></li>\n</ul>\n</li>\n<li>\n<p><code>html</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;./style.css&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;father&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layer01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./images/3086109-ab66333e049109fc.webp&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layer02&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./images/3086109-e073f9a39c4bafe1.webp&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layer03&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./images/f0bcea9ca2acb59b4e97e3f9830d9c44.gif&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layer04&quot;</span>&gt;</span></span><br><span class=\"line\">        浮动的盒子可以向左浮动,也可以向右浮动,直到它的外边缘碰到外层边界.</span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><code>style.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#father</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.layer01</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> dashed <span class=\"number\">#f00</span>;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">  <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.layer02</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> dashed <span class=\"number\">#00f</span>;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">  <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.layer03</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> dashed <span class=\"number\">#0f0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">  <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.layer04</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> dashed <span class=\"number\">#666</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">23px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>效果图</p>\n<p><img src=\"https://www.helloimg.com/images/2022/02/27/GV3L6b.png\" alt=\"20201126004246\"></p>\n</li>\n</ul>\n<hr>\n<h3 id=\"Clear\">Clear</h3>\n<ul>\n<li>清除(左/右)浮动效果,使元素像是标准文档流一样向下排布(但是并不在标准文档流).</li>\n<li>right</li>\n<li>left</li>\n<li>both 两侧</li>\n<li>none 不清除</li>\n<li>两边都不能有浮动元素(图四样式)<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.layer04</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">clear</span>: both;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLps1.png\" alt=\"20201205215331\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"Overflow\">Overflow</h3>\n<ul>\n<li>溢出</li>\n<li>hidden 越界部分隐藏(使用多)</li>\n<li>scroll 越界的话显示滚动条</li>\n<li>auto</li>\n</ul>\n<hr>\n<h3 id=\"父级边框塌陷问题\">父级边框塌陷问题</h3>\n<h4 id=\"问题-4\">问题</h4>\n<ul>\n<li>\n<p>问题就是内部的元素超出父级的边框(越界).</p>\n</li>\n<li>\n<p>float 导致漂浮元素另成一层,即使 clear 也不按照标准文档流排布.</p>\n</li>\n<li>\n<p>像是下面这种,父级的框圈不住子级 float 的元素.</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPCjr.png\" alt=\"20201205221642\" />\n</li>\n<li>\n<p>几种解决方案参下:</p>\n</li>\n</ul>\n<hr>\n<h4 id=\"扩大父级元素\">扩大父级元素</h4>\n<ul>\n<li>简单粗暴,直接把父级元素拉大,但是很拉胯.</li>\n</ul>\n<hr>\n<h4 id=\"增添空-div\">增添空 div</h4>\n<ul>\n<li>在漂浮元素下面(一定要是下面)添加空 div,然后设置属性 clear.</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;father&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layer01&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./images/3086109-ab66333e049109fc.webp&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layer02&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./images/3086109-e073f9a39c4bafe1.webp&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layer03&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./images/f0bcea9ca2acb59b4e97e3f9830d9c44.gif&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layer04&quot;</span>&gt;</span></span><br><span class=\"line\">    浮动的盒子可以向左浮动,也可以向右浮动,直到它的外边缘碰到外层边界.</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 方案二 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;clear&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 方案二 */</span></span><br><span class=\"line\"><span class=\"selector-id\">#clear</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">clear</span>: both;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>原理就是在箭头这里设置了没有边框的空元素,然后让它的两边都不能有 float 元素,所以父级的边框框住这个空 div 的同时也框住了 float 元素.</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVPTrz.png\" alt=\"ADVVKXK0V6MX4O0GI8BE03M\" />\n<hr>\n</li>\n</ul>\n<h4 id=\"自动溢出\">自动溢出</h4>\n<ul>\n<li>在父类里添加 <code>overflow</code> 属性</li>\n<li>(因为父级边框并没有设边界大小,所以其大小就是 div 可容纳的包括浮动内部元素的范围大小)</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#father</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>效果:<br>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSTCt.png\" alt=\"20201206001209\" /></p>\n<hr>\n</li>\n</ul>\n<h4 id=\"添加伪类-优\">添加伪类(优)</h4>\n<ul>\n<li>\n<p>此方法类似第二个添加空 div,就是利用伪类在父类后面添加空标签后 clear</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 方案四 */</span></span><br><span class=\"line\"><span class=\"selector-id\">#father</span><span class=\"selector-pseudo\">:after</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">  <span class=\"attribute\">clear</span>: both;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n</ul>\n<h4 id=\"小结\">小结</h4>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4nUM.png\" alt=\"20201206002751\" />\n<hr>\n<h2 id=\"定位\">定位</h2>\n<ul>\n<li><code>position</code>\n<ul>\n<li>relative</li>\n<li>absolute</li>\n<li>fix</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"相对定位\">相对定位</h3>\n<ul>\n<li><code>position: relative;</code>\n<ul>\n<li>left</li>\n<li>right</li>\n<li>bottom</li>\n<li>top</li>\n</ul>\n</li>\n<li>注意偏移是相对那个边来说,而不是偏移向那个方向.</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#first</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> dashed <span class=\"built_in\">rgb</span>(<span class=\"number\">172</span>, <span class=\"number\">96</span>, <span class=\"number\">96</span>);</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative; <span class=\"comment\">/* 相对定位 */</span></span><br><span class=\"line\">  <span class=\"attribute\">top</span>: -<span class=\"number\">20px</span>; <span class=\"comment\">/* 向上偏移20px */</span></span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">20px</span>; <span class=\"comment\">/* 向左偏移20px */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>元素仍在标准文档中,只不过相对原先位置做了偏移</p>\n<ul>\n<li>\n<p>此元素的信息仍为原先位置的信息(呈现与数据不同)</p>\n</li>\n<li>\n<p>比如这里偏移后父级边框框的仍然是先前位置的那个元素.</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSlHC.png\" alt=\"20201218235557\" />\n</li>\n</ul>\n</li>\n<li>\n<p>例子</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-id\">#box</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid currentColor;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-tag\">a</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">text-decoration</span>: none;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">background</span>: violet;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">line-height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">text-align</span>: center;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">color</span>: white;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">display</span>: block;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-tag\">a</span><span class=\"selector-pseudo\">:hover</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">background</span>: blue;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-class\">.a2</span>,<span class=\"selector-class\">.a4</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">top</span>: -<span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">left</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-class\">.a5</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">top</span>: -<span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">left</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;a1&quot;</span>&gt;</span>链接1<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;a2&quot;</span>&gt;</span>链接2<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;a3&quot;</span>&gt;</span>链接3<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;a4&quot;</span>&gt;</span>链接4<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;a5&quot;</span>&gt;</span>链接5<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVSPvz.png\" alt=\"20201220001521\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"绝对定位\">绝对定位</h3>\n<ul>\n<li>\n<p><code>position:absolute;</code></p>\n</li>\n<li>\n<p>基于上下左右进行定位.</p>\n<ul>\n<li>父级元素没有定位时,是相对于浏览器进行定位.</li>\n<li>父级元素定位时,是相对于父级元素进行定位.(会用到)</li>\n</ul>\n</li>\n<li>\n<p>在<code>父级范围内偏移</code>(超出父级的内容不会显示)</p>\n</li>\n<li>\n<p>原来位置不会被保留,而且不在标准文档流中.</p>\n<hr>\n</li>\n<li>\n<p>例子</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#father</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#666</span>;</span><br><span class=\"line\">  <span class=\"comment\">/* 这里父级元素虽然用了相对定位了,但是并没动,子级元素用来作绝对定位. */</span></span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#first</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> dashed <span class=\"built_in\">rgb</span>(<span class=\"number\">172</span>, <span class=\"number\">96</span>, <span class=\"number\">96</span>);</span><br><span class=\"line\">  <span class=\"comment\">/* 相对于父级元素左端定位 */</span></span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"固定定位\">固定定位</h3>\n<ul>\n<li>\n<p><code>position:fix;</code></p>\n</li>\n<li>\n<p>把元素固定到浏览器某个位置不动.</p>\n</li>\n<li>\n<p>例子</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-tag\">body</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">2000px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:nth-of-type</span>(<span class=\"number\">1</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">background</span>: tomato;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"comment\">/* 绝对定位 */</span></span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:nth-of-type</span>(<span class=\"number\">2</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">50px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">50px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">background</span>: springgreen;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"comment\">/* 固定定位 */</span></span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">position</span>: fixed;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>div1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>div2<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>绝对定位会随着页面滚动而移动,固定定位则不会.</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4IwK.png\" alt=\"20201220093438\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"z-index\">z-index</h3>\n<ul>\n<li>\n<p><code>z-index: 0;</code></p>\n</li>\n<li>\n<p>默认是 0,最高无限,类似 PS 的图层堆叠效果.</p>\n<ul>\n<li>(只有使用定位效果的元素才有层级)</li>\n</ul>\n</li>\n<li>\n<p>例子</p>\n<ul>\n<li>\n<p>HTML</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;./css/index.css&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./images/1.jpg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;tip-text&quot;</span>&gt;</span>Weidows-学习中...<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;tip-bg&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>时间: 2020年12月20日09:51:29<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>地点: Hebau<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>css</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#content</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">720px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">ul</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">li</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">list-style</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 这个的目的是让下面的子元素相对这个父级元素定位 */</span></span><br><span class=\"line\"><span class=\"selector-id\">#content</span> <span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.tip-text</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.tip-bg</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.tip-text</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: aqua;</span><br><span class=\"line\">  <span class=\"attribute\">z-index</span>: <span class=\"number\">5</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.tip-bg</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#000</span>;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0.5</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>样式</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVLvoc.png\" alt=\"20201220102125\" />\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"动画\">动画</h2>\n<ul>\n<li>css 一般只用来做小型动画或者渐变,复杂的一般用 JS.</li>\n<li>稍作了解,需要的话网上找代码.</li>\n</ul>\n<hr>\n<h2 id=\"总结\">总结</h2>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV3165.png\" alt=\"20200507153758833\" />\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记",
                "css"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/Node/Hexo/Hexo-SEO/",
            "url": "https://weidows.github.io/post/Web/Node/Hexo/Hexo-SEO/",
            "title": "👌Hexo-SEO 搜索引擎优化",
            "date_published": "2020-12-18T08:39:24.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @Date: 2020-12-18 16:39:24\n * @LastEditors: Weidows\n * @LastEditTime: 2021-09-10 15:04:46\n * @FilePath: \\Blog-private\\source\\_posts\\Web\\Node\\Hexo\\Hexo-SEO.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6\">安装插件</a></li>\n<li><a href=\"#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\">配置文件</a></li>\n<li><a href=\"#%E7%AB%99%E9%95%BF%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%AB%99\">站长添加网站</a>\n<ul>\n<li><a href=\"#%E6%B3%A8%E6%84%8F\">注意</a></li>\n<li><a href=\"#hexo-%E6%A0%87%E7%AD%BE%E9%AA%8C%E8%AF%81%E7%BD%91%E7%AB%99\">Hexo 标签验证网站</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E7%AB%99%E7%82%B9%E5%9C%B0%E5%9B%BE\">添加站点地图</a></li>\n<li><a href=\"#%E6%B3%A8%E6%84%8F%E7%82%B9\">注意点</a></li>\n</ul>\n<h2 id=\"安装插件-2\">安装插件</h2>\n<ul>\n<li>\n<p>分别是生成百度和谷歌站点地图的插件.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-generator-baidu-sitemap --save</span><br><span class=\"line\">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"配置文件-2\">配置文件</h2>\n<ul>\n<li>\n<p>根目录的<code>_config.yml</code>中添加以下:</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">sitemap:</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">sitemap.xml</span></span><br><span class=\"line\"><span class=\"attr\">baidusitemap:</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">baidusitemap.xml</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>xml 文件存放路径看着来,一般放在网站根目录.</p>\n</li>\n<li>\n<p>现在<code>hexo generate</code>就会出现<code>public/sitemap.xml 和 baidusitemap.xml</code></p>\n<ul>\n<li>sitemap.xml 样式如下:</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">urlset</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">loc</span>&gt;</span>https://weidows.github.io/post/Hexo/butterfly_modify/<span class=\"tag\">&lt;/<span class=\"name\">loc</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">lastmod</span>&gt;</span>2020-12-18<span class=\"tag\">&lt;/<span class=\"name\">lastmod</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">loc</span>&gt;</span>https://weidows.github.io/post/experience/markdown/<span class=\"tag\">&lt;/<span class=\"name\">loc</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">lastmod</span>&gt;</span>2020-12-14<span class=\"tag\">&lt;/<span class=\"name\">lastmod</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">loc</span>&gt;</span>https://weidows.github.io/post/backup/%E5%BF%AB%E6%8D%B7%E9%94%AE/<span class=\"tag\">&lt;/<span class=\"name\">loc</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">lastmod</span>&gt;</span>2020-12-12<span class=\"tag\">&lt;/<span class=\"name\">lastmod</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"站长添加网站\">站长添加网站</h2>\n<h3 id=\"注意\">注意</h3>\n<ul>\n<li>因为 <code>Hexo</code> 会对 HTML 文件进行修改,所以<code>无法通过文件验证添加网站</code>\n<ul>\n<li>可以通过 HTML 标签方式,比较方便.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Hexo-标签验证网站\">Hexo 标签验证网站</h3>\n<ul>\n<li>\n<p>我使用的是 Butterfly 主题,主体间会有所不同,定位如下文件:</p>\n<ul>\n<li>themes/butterfly/layout/includes/layout.pug</li>\n</ul>\n</li>\n<li>\n<p>在<code>body</code>行上方添加验证标签(注意需要转换成 pug 格式)</p>\n<ul>\n<li><a href=\"https://html2pug.com/\">HTML=&gt;pug 格式转换</a></li>\n</ul>\n</li>\n<li>\n<p>添加之后如下:</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GV4iTg.png\" alt=\"20201218170353\" />\n</li>\n<li>\n<p>最后</p>\n<ul>\n<li>hexo generate</li>\n<li>hexo deploy</li>\n<li>page 部署才能验证</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"添加站点地图\">添加站点地图</h2>\n<ul>\n<li>\n<p>百度</p>\n<img src=\"https://www.helloimg.com/images/2022/02/27/GVAsbc.png\" alt=\"20201218173033\" />\n</li>\n<li>\n<p>谷歌简单,略.</p>\n</li>\n<li>\n<p>另外</p>\n<ul>\n<li>百度添加 sitemap 后一直处于等待状态是正常的,别在意…</li>\n<li>谷歌添加 sitemap 一般第一次会失败,删掉重新添加就好了(立即生效)</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"注意点-2\">注意点</h2>\n<ul>\n<li>\n<p>不推荐文章目录使用: <code>&lt;h1&gt;</code> 标签也就是 <code>#</code></p>\n<ul>\n<li>\n<p>多个一级标题对 SEO 不友好</p>\n</li>\n<li>\n<p>建议使用 <code>&lt;h1&gt;</code> 也就是 <code>##</code></p>\n</li>\n</ul>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "website",
                "hexo",
                "seo"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/API/",
            "url": "https://weidows.github.io/post/Web/API/",
            "title": "自用 && 收藏的一些API",
            "date_published": "2020-11-30T11:28:08.000Z",
            "content_html": "<!--\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2021-02-13 17:38:41\n * @FilePath: \\Weidowsd:\\Game\\Github\\Blog-private\\source\\_posts\\Web\\API.md\n-->\n<ul>\n<li><a href=\"#my-url-%E5%89%8D%E7%BC%80-gitee--github-%E6%97%81%E4%BA%BA%E6%B2%A1%E5%95%A5%E7%94%A8\">My URL 前缀: Gitee &amp;&amp; GitHub (旁人没啥用…)</a>\n<ul>\n<li><a href=\"#gitee\">Gitee</a></li>\n<li><a href=\"#jsdelivr\">JsDelivr</a></li>\n<li><a href=\"#github\">GitHub</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%A8%AA%E5%B1%8F-api\">横屏 API</a>\n<ul>\n<li><a href=\"#%E5%BF%85%E5%BA%94%E5%A3%81%E7%BA%B8\">必应壁纸</a></li>\n<li><a href=\"#%E9%A3%8E%E6%99%AF%E5%9B%BE\">风景图</a></li>\n<li><a href=\"#%E4%BA%8C%E6%AC%A1%E5%85%83-coser\">二次元 coser</a></li>\n<li><a href=\"#%E5%B0%8F%E5%BF%83%E8%BA%AB%E4%BD%93-%E6%8E%A8%E5%A5%B3%E9%83%8E\">小心身体-推女郎</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%AB%96%E5%B1%8F\">竖屏</a>\n<ul>\n<li><a href=\"#%E4%BA%8C%E5%88%BA%E8%9E%88%E6%B6%A9%E5%9B%BE\">二刺螈涩图</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%9C%AA%E7%9F%A5%E5%9B%BE\">未知图</a></li>\n<li><a href=\"#%E5%9C%A8%E7%BA%BF%E7%94%9F%E6%88%90%E4%BA%8C%E7%BB%B4%E7%A0%81\">在线生成二维码</a>\n<ul>\n<li><a href=\"#%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E5%8F%AF%E4%BD%BF%E7%94%A8-https\">百度网盘(可使用 https)</a></li>\n<li><a href=\"#iclick-%E6%8E%A5%E5%8F%A3-%E6%97%A0-https\">iClick 接口 (无 https)</a></li>\n<li><a href=\"#jiathis-%E6%8E%A5%E5%8F%A3%E6%97%A0-https\">JiaThis 接口(无 https)</a></li>\n<li><a href=\"#%E8%81%94%E5%9B%BE%E7%BD%91%E6%97%A0-https\">联图网(无 https)</a></li>\n<li><a href=\"#k780-%E6%95%B0%E6%8D%AE%E7%BD%91%E6%94%AF%E6%8C%81-https-%E5%92%8C-http\">K780 数据网(支持 https 和 http)</a></li>\n<li><a href=\"#qr-code-generatorhttps-%E6%8E%A5%E5%8F%A3\">QR Code Generator(https 接口)</a></li>\n</ul>\n</li>\n<li><a href=\"#%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E8%B7%9F%E9%9A%8F%E7%89%B9%E6%95%88-js\">鼠标点击/跟随特效 js</a>\n<ul>\n<li><a href=\"#%E5%B0%8F%E5%BF%83%E5%BF%83%E7%89%B9%E6%95%88\">小心心特效</a></li>\n<li><a href=\"#%E7%A4%BE%E4%BC%9A%E4%B8%BB%E4%B9%89%E6%A0%B8%E5%BF%83%E4%BB%B7%E5%80%BC%E8%A7%82\">社会主义核心价值观</a></li>\n<li><a href=\"#%E8%8A%B1%E8%8A%B1%E7%89%B9%E6%95%88\">花花特效</a></li>\n<li><a href=\"#%E8%B7%9F%E9%9A%8F%E7%89%B9%E6%95%88\">跟随特效</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5%E6%88%AA%E5%9B%BE\">获取网页截图</a></li>\n<li><a href=\"#%E8%8E%B7%E5%8F%96%E5%8C%BA%E5%9F%9F%E6%97%B6%E9%97%B4\">获取区域时间</a></li>\n</ul>\n<h2 id=\"My-URL-前缀-Gitee-GitHub-旁人没啥用…\">My URL 前缀: Gitee &amp;&amp; GitHub (旁人没啥用…)</h2>\n<h3 id=\"Gitee\">Gitee</h3>\n<ul>\n<li>图/文件: <code>https://gitee.com/Weidows/Weidows/raw/master/Website/public</code></li>\n<li>链接: <code>https://gitee.com/Weidows/Weidows/blob/master</code></li>\n<li>博客: <code>https://weidows.gitee.io</code></li>\n</ul>\n<h3 id=\"JsDelivr\">JsDelivr</h3>\n<ul>\n<li>GitHub 图床 CDN: <code>https://fastly.jsdelivr.net/gh/Weidows/Images/</code></li>\n</ul>\n<h3 id=\"GitHub\">GitHub</h3>\n<ul>\n<li>链接: <code>https://github.com/Weidows/Weidows/tree/master</code></li>\n<li>图片: <code>https://raw.githubusercontent.com/Weidows/Weidows.github.io/master/</code></li>\n<li>GitHub Chart API: <code>http://ghchart.rshah.org/409ba5/Weidows</code>\n<ul>\n<li>其中<code>/409ba5/</code>是颜色的十六进制表示,#409ba5(使格子颜色变为蓝色)如下图<br>\n<img src=\"http://ghchart.rshah.org/409ba5/Weidows\" alt=\"GitHub Chart\"></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"横屏-API\">横屏 API</h2>\n<h3 id=\"必应壁纸\">必应壁纸</h3>\n<ul>\n<li>一位大佬写的接口,必应返回图片需要用户数据授权,URL 不固定,所以这个大佬当中介做了个 PHP 接口.<br>\n<code>http://fly.atlinker.cn/api/bing/1920.php</code><br>\n<img src=\"http://fly.atlinker.cn/api/bing/1920.php\" alt=\"\"></li>\n</ul>\n<hr>\n<ul>\n<li>必应官方 API</li>\n</ul>\n<figure class=\"highlight sas\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://cn.bing.com/HPImageArchive.aspx?<span class=\"keyword\">format</span>=js<span class=\"variable\">&amp;idx</span>=0<span class=\"variable\">&amp;n</span>=1<span class=\"variable\">&amp;mkt</span>=zh-CN</span><br></pre></td></tr></table></figure>\n<ul>\n<li>返回数据参下,需要浏览器处理才可呈现图像.</li>\n</ul>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;images&quot;</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;startdate&quot;</span>: <span class=\"string\">&quot;20201201&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;fullstartdate&quot;</span>: <span class=\"string\">&quot;202012011600&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;enddate&quot;</span>: <span class=\"string\">&quot;20201202&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;url&quot;</span>: <span class=\"string\">&quot;/th?id=OHR.PorcupineBay_ZH-CN2252758146_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;urlbase&quot;</span>: <span class=\"string\">&quot;/th?id=OHR.PorcupineBay_ZH-CN2252758146&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;copyright&quot;</span>: <span class=\"string\">&quot;基奈峡湾国家公园的尖顶湾，阿拉斯加 (© Sekar B/Shutterstock)&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;copyrightlink&quot;</span>: <span class=\"string\">&quot;https://www.bing.com/search?q=%E5%9F%BA%E5%A5%88%E5%B3%A1%E6%B9%BE%E5%9B%BD%E5%AE%B6%E5%85%AC%E5%9B%AD&amp;form=hpcapt&amp;mkt=zh-cn&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;title&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;quiz&quot;</span>: <span class=\"string\">&quot;/search?q=Bing+homepage+quiz&amp;filters=WQOskey:%22HPQuiz_20201201_PorcupineBay%22&amp;FORM=HPQUIZ&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;wp&quot;</span>: true,</span><br><span class=\"line\">      <span class=\"string\">&quot;hsh&quot;</span>: <span class=\"string\">&quot;4b729291a1259dbc3355d68efe6de423&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;drk&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;top&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;bot&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;hs&quot;</span>: []</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"string\">&quot;tooltips&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;loading&quot;</span>: <span class=\"string\">&quot;正在加载...&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;previous&quot;</span>: <span class=\"string\">&quot;上一个图像&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;next&quot;</span>: <span class=\"string\">&quot;下一个图像&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;walle&quot;</span>: <span class=\"string\">&quot;此图片不能下载用作壁纸。&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;walls&quot;</span>: <span class=\"string\">&quot;下载今日美图。仅限用作桌面壁纸。&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cn.bing.com/HPImageArchive.aspx?format=js&amp;idx=0&amp;n=1&amp;mkt=zh-CN\" alt=\"\"></p>\n<hr>\n<h3 id=\"风景图\">风景图</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">api.ixiaowai.cn<span class=\"regexp\">/gqapi/g</span>qapi.php</span><br></pre></td></tr></table></figure>\n<h3 id=\"二次元-coser\">二次元 coser</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:<span class=\"regexp\">//u</span>ploadbeta.com<span class=\"regexp\">/api/</span>pictures<span class=\"regexp\">/random/</span>?key=二次元</span><br><span class=\"line\">https:<span class=\"regexp\">//u</span>ploadbeta.com<span class=\"regexp\">/api/</span>pictures<span class=\"regexp\">/random/</span>?key=动漫</span><br></pre></td></tr></table></figure>\n<h3 id=\"小心身体-推女郎\">小心身体-推女郎</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:<span class=\"regexp\">//u</span>ploadbeta.com<span class=\"regexp\">/api/</span>pictures<span class=\"regexp\">/random/</span>?key=推女郎</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"竖屏\">竖屏</h2>\n<h3 id=\"二刺螈涩图\">二刺螈涩图</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:<span class=\"regexp\">//</span>setu.awsl.ee/setu</span><br></pre></td></tr></table></figure>\n<hr>\n<!-- TODO -->\n<h2 id=\"未知图\">未知图</h2>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">风景随机图：http:<span class=\"regexp\">//</span>pic.tsmp4.net<span class=\"regexp\">/api/</span>fengjing/img.php</span><br><span class=\"line\">女神随机图：http:<span class=\"regexp\">//</span>pic.tsmp4.net<span class=\"regexp\">/api/</span>nvsheng/img.php</span><br><span class=\"line\">影视随机图：http:<span class=\"regexp\">//</span>pic.tsmp4.net<span class=\"regexp\">/api/yi</span>ngshi/img.php</span><br><span class=\"line\">二次元随机图：http:<span class=\"regexp\">//</span>pic.tsmp4.net<span class=\"regexp\">/api/</span>erciyuan/img.php</span><br><span class=\"line\">二次元随机图:http:<span class=\"regexp\">//</span>www.dmoe.cc/random.php</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"在线生成二维码\">在线生成二维码</h2>\n<h3 id=\"百度网盘-可使用-https\">百度网盘(可使用 https)</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:<span class=\"regexp\">//</span>pan.baidu.com<span class=\"regexp\">/share/</span>qrcode?w=<span class=\"number\">150</span>&amp;h=<span class=\"number\">150</span>&amp;url=</span><br></pre></td></tr></table></figure>\n<h3 id=\"iClick-接口-无-https\">iClick 接口 (无 https)</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:<span class=\"regexp\">//</span>bshare.optimix.asia/barCode?site=weixin&amp;url=</span><br></pre></td></tr></table></figure>\n<h3 id=\"JiaThis-接口-无-https\">JiaThis 接口(无 https)</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:<span class=\"regexp\">//</span>s.jiathis.com/qrcode.php?url=</span><br></pre></td></tr></table></figure>\n<h3 id=\"联图网-无-https\">联图网(无 https)</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:<span class=\"regexp\">//</span>qr.liantu.com/api.php?text=</span><br></pre></td></tr></table></figure>\n<h3 id=\"K780-数据网-支持-https-和-http\">K780 数据网(支持 https 和 http)</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:<span class=\"regexp\">//</span>api.k780.com:<span class=\"number\">88</span>/?app=qr.get&amp;data=</span><br></pre></td></tr></table></figure>\n<h3 id=\"QR-Code-Generator-https-接口\">QR Code Generator(https 接口)</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:<span class=\"regexp\">//</span>api.qrserver.com<span class=\"regexp\">/v1/</span>create-qr-code/?size=<span class=\"number\">150</span>x150&amp;data=</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"鼠标点击-跟随特效-js\">鼠标点击/跟随特效 js</h2>\n<h3 id=\"小心心特效\">小心心特效</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:<span class=\"regexp\">//</span>fastly.jsdelivr.net<span class=\"regexp\">/gh/</span>Sanarous<span class=\"regexp\">/files@1.151/</span>js/clicklove.js</span><br></pre></td></tr></table></figure>\n<h3 id=\"社会主义核心价值观\">社会主义核心价值观</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:<span class=\"regexp\">//</span>fastly.jsdelivr.net<span class=\"regexp\">/gh/</span>Sanarous<span class=\"regexp\">/files@1.151/</span>js/clicksocialvalue.js</span><br></pre></td></tr></table></figure>\n<h3 id=\"花花特效\">花花特效</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:<span class=\"regexp\">//</span>fastly.jsdelivr.net<span class=\"regexp\">/gh/</span>Sanarous<span class=\"regexp\">/files@1.151/</span>js/click.min.js</span><br></pre></td></tr></table></figure>\n<h3 id=\"跟随特效\">跟随特效</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:<span class=\"regexp\">//</span>fastly.jsdelivr.net<span class=\"regexp\">/gh/</span>sviptzk<span class=\"regexp\">/HexoStaticFile@latest/</span>Hexo<span class=\"regexp\">/js/m</span>ouse_snow.min.js</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"获取网页截图\">获取网页截图</h2>\n<ul>\n<li>链接<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:<span class=\"regexp\">//im</span>age.thum.io<span class=\"regexp\">/get/</span>width<span class=\"regexp\">/1024/</span>crop<span class=\"regexp\">/768/</span>https:<span class=\"regexp\">//gi</span>thub.com/Weidows</span><br></pre></td></tr></table></figure>\n</li>\n<li>展示<br>\n<img src=\"https://image.thum.io/get/width/1024/crop/768/https://github.com/Weidows\" alt=\"\"></li>\n</ul>\n<hr>\n<h2 id=\"获取区域时间\">获取区域时间</h2>\n<ul>\n<li>time.js<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:<span class=\"regexp\">//</span>time.is</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "备忘录",
                "api"
            ]
        },
        {
            "id": "https://weidows.github.io/post/Web/Node/node/",
            "url": "https://weidows.github.io/post/Web/Node/node/",
            "title": "⬆ Node.js-环境配置-使用",
            "date_published": "2020-11-24T13:59:29.000Z",
            "content_html": "<h1>Node.js-环境配置-使用</h1>\n<!--\n * @Author: Weidows\n * @Date: 2020-11-24 21:59:29\n * @LastEditors: Weidows\n * @LastEditTime: 2022-05-23 10:05:34\n * @FilePath: \\Blog-private\\source\\_posts\\Web\\Node\\node.md\n * @Description:\n-->\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li><a href=\"#nodejs-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-%E4%BD%BF%E7%94%A8\">Node.js-环境配置-使用</a>\n<ul>\n<li><a href=\"#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE\">环境配置</a></li>\n<li><a href=\"#%E5%AE%89%E8%A3%85-yarn\">安装 yarn</a></li>\n<li><a href=\"#%E5%8A%A0%E9%80%9F\">加速</a>\n<ul>\n<li><a href=\"#%E6%8D%A2%E6%BA%90\">换源</a></li>\n<li><a href=\"#%E4%BB%A3%E7%90%86\">代理</a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BE%9D%E8%B5%96%E5%8D%87%E7%BA%A7\">依赖升级</a></li>\n<li><a href=\"#%E5%8F%82%E6%95%B0%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4\">参数及常用命令</a>\n<ul>\n<li><a href=\"#-gglobal\"><code>-g(global)</code></a></li>\n<li><a href=\"#-save\"><code>-save</code></a></li>\n</ul>\n</li>\n<li><a href=\"#local-%E5%85%A8%E5%B1%80%E4%BE%9D%E8%B5%96\">local 全局依赖</a></li>\n<li><a href=\"#%E8%BF%90%E8%A1%8C%E6%8A%A5%E9%94%99\">运行报错</a>\n<ul>\n<li><a href=\"#%E4%BE%9D%E8%B5%96%E5%87%BA%E9%94%99\">依赖出错</a></li>\n<li><a href=\"#%E6%B2%A1%E8%A3%85%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96\">没装项目依赖</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%8E%A8%E8%8D%90%E6%96%87%E7%AB%A0\">推荐文章</a></li>\n<li><a href=\"#node-%E5%A4%9A%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86\">node-多版本管理</a>\n<ul>\n<li><a href=\"#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%8E%9F%E5%9B%A0%E6%8A%A5%E9%94%99\">环境变量原因报错</a></li>\n<li><a href=\"#%E5%88%87%E6%8D%A2%E7%89%88%E6%9C%AC%E6%8A%A5%E9%94%99\">切换版本报错</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%89%88%E6%9C%AC%E6%8B%9F%E5%AE%9A\">版本拟定</a></li>\n<li><a href=\"#%E5%80%9F%E7%89%A9%E8%A1%A8\">借物表</a></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"环境配置-2\">环境配置</h2>\n<ul>\n<li>\n<p>之前一直在乐此不疲的修改 npm 和 yarn 的 global 路径,因为每次 Node.js 更新会导致目录索引失效…</p>\n</li>\n<li>\n<p>后来发现,Scoop 完美解决了这个问题! 它使用<code>Scoop/persist</code>这个文件夹来挂载数据,不影响程序本身,即使更新也不会影响.</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"安装-yarn\">安装 yarn</h2>\n<ul>\n<li>\n<p>Node.js 是 JavaScript 运行环境,某个项目运行起来会需要一些依赖</p>\n</li>\n<li>\n<p><code>npm/yarn/cnpm</code> 就是管理这些依赖的, 安装 node.js 后自带 npm,不会带 yarn/cnpm, 这三个中我比较推荐用 <code>yarn</code></p>\n<ol>\n<li>\n<p>yarn 比 npm 更快一些</p>\n</li>\n<li>\n<p>默认锁定版本.</p>\n</li>\n</ol>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>虽然 npm 与 yarn 是同一类东西,但是可以用 npm 安装 yarn (也可以去官网下载安装,不过那样更复杂麻烦)</p>\n<p>神不神奇,因为 npm 和 yarn 本身也是依赖,但是这样安装的话需要进行一些目录配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g  yarn</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><code>强烈推荐</code>: 用 Scoop 安装(<code>零配置</code>)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scoop install yarn</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"加速-2\">加速</h2>\n<h3 id=\"换源-3\">换源</h3>\n<ul>\n<li>\n<p>推荐: 使用 <a href=\"https://www.npmjs.com/package/yrm\"><code>yrm</code></a>, 会同时将你的 npm 和 yarn 一起切换 <sup id='cite_ref-1'><a href=\"#cite_note-1\">[1]</a></sup></p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yrm add njupt https:<span class=\"regexp\">//mi</span>rrors.njupt.edu.cn<span class=\"regexp\">/nexus/</span>repository<span class=\"regexp\">/npm/</span> https:<span class=\"regexp\">//mi</span>rrors.njupt.edu.cn<span class=\"regexp\">/help/</span>npm/</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight console\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">╰─ yrm test</span><br><span class=\"line\"></span><br><span class=\"line\">  npm ---- 1311ms</span><br><span class=\"line\">* cnpm --- Fetch Error</span><br><span class=\"line\">  taobao - 470ms</span><br><span class=\"line\">  nj ----- Fetch Error</span><br><span class=\"line\">  rednpm - 221ms</span><br><span class=\"line\">  npmMirror  1204ms</span><br><span class=\"line\">  edunpm - 1408ms</span><br><span class=\"line\">  yarn --- Fetch Error</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yrm <span class=\"keyword\">use</span> taobao</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>当然不嫌麻烦可以手动修改</p>\n<figure class=\"highlight console\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config set registry https://registry.npm.taobao.org</span><br><span class=\"line\">yarn config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>\n<p>也可以直接定位 npm 和 yarn 的配置文件 -&gt; <code>~/.npmrc和.yarnrc</code></p>\n<hr>\n</li>\n<li>\n<p>检查</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm<span class=\"built_in\"> config </span><span class=\"built_in\">get</span> registry</span><br><span class=\"line\">yarn<span class=\"built_in\"> config </span><span class=\"built_in\">get</span> registry</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>问题: 有时会遇到淘宝源某个文件验证失败问题 (Integrity check failed for “@types/body-parser” (computed integrity doesn’t match our records)</p>\n<p>解决办法是: 换回官方的源,用完之后再换成淘宝源.</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config set registry https:<span class=\"comment\">//registry.npmjs.org</span></span><br><span class=\"line\">yarn config set registry https:<span class=\"comment\">//registry.npmjs.org</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"代理\">代理</h3>\n<ul>\n<li>\n<p>设置代理</p>\n<figure class=\"highlight console\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config set proxy http://127.0.0.1:7890</span><br><span class=\"line\">npm config set https-proxy http://127.0.0.1:7890</span><br><span class=\"line\">yarn config set proxy http://127.0.0.1:7890</span><br><span class=\"line\">yarn config set https-proxy http://127.0.0.1:7890</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>删除代理</p>\n<figure class=\"highlight console\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config delete proxy</span><br><span class=\"line\">npm config delete https-proxy</span><br><span class=\"line\">yarn config delete proxy</span><br><span class=\"line\">yarn config delete https-proxy</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"依赖升级\">依赖升级</h2>\n<ul>\n<li>\n<p>package path 简介</p>\n<ul>\n<li>Node.Js 的包管理器有<code>npm,cnpm,yarn</code>等,通过上面操作后咱就用<code>npm</code></li>\n<li>Node.Js 通过 npm 可以安装 hexo 模块,hexo 里面的插件也是通过 npm 安装</li>\n<li>npm 安装/升级/移除的模块都在<code>node_modules/</code>里面,不会影响外面的东西</li>\n</ul>\n</li>\n<li>\n<p>npm check &amp;&amp; upgrade(node 插件)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g npm-check</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g npm-upgrade</span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用:直接<code>npm-check</code>/<code>npm-upgrade</code></li>\n</ul>\n</li>\n<li>\n<p>缓存清理</p>\n<ul>\n<li>会清空 node_cache</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm cache clean --force</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"参数及常用命令\">参数及常用命令</h2>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/lililia/p/10482169.html\">详见 yarn 的常用命令</a></p>\n</blockquote>\n<ul>\n<li>按照 package.json 文件的配置安装 module 到 node_modules/里面</li>\n</ul>\n<h3 id=\"g-global\"><code>-g(global)</code></h3>\n<ul>\n<li>全局安装/卸载</li>\n<li>注意脚手架如果是全局安装的话,卸载也要加上<code>-g</code>才能全局卸载.</li>\n</ul>\n<hr>\n<h3 id=\"save\"><code>-save</code></h3>\n<ul>\n<li>默认直接 install 会安装进那个目录,但是不会修改 package.json 文件</li>\n<li>加上-save 会修改文件,使下次 npm install 也会安装</li>\n<li>写在前面和后面都可以\n<ul>\n<li><code>npm install --save hexo-tag-aplayer</code></li>\n<li><code>npm install hexo-tag-aplayer --save</code></li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"local-全局依赖\">local 全局依赖</h2>\n<ul>\n<li>\n<p>npm</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g eslint</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>yarn</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn global add hexo-cli</span><br><span class=\"line\">yarn global add vsce</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p><code>全局依赖路径</code>: 用 Scoop 安装的,其数据挂载<code>摆脱了C盘!</code>, npm 与 yarn 管理方式并不全然一样</p>\n<ul>\n<li>\n<p>node-npm: <code>Scoop\\persist\\nodejs\\bin</code></p>\n</li>\n<li>\n<p>yarn: <code>Scoop\\persist\\yarn\\global</code></p>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"运行报错\">运行报错</h2>\n<h3 id=\"依赖出错\">依赖出错</h3>\n<figure class=\"highlight delphi\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node_modules\\<span class=\"keyword\">pascal</span>-<span class=\"keyword\">case</span>\\dist\\<span class=\"keyword\">index</span>.js:<span class=\"number\">21</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>有可能是依赖有故障了,其实用不着挨个排除是哪个依赖有问题</p>\n</li>\n<li>\n<p>直接把<code>node_modules</code>整个删掉,然后<code>npm install</code>就好了.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"没装项目依赖\">没装项目依赖</h3>\n<figure class=\"highlight console\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">&gt; </span><span class=\"language-bash\">live2d-moc3@1.0.0 uglifyjs</span></span><br><span class=\"line\"><span class=\"meta prompt_\">&gt; </span><span class=\"language-bash\">uglifyjs src/live2d.js -o dist/live2d.min.js</span></span><br><span class=\"line\"></span><br><span class=\"line\">Parse error at src/live2d.js:2,6</span><br><span class=\"line\">class Live2dLoader &#123;</span><br><span class=\"line\">      ^</span><br><span class=\"line\">ERROR: Unexpected token: name «Live2dLoader», expected: punc «;»</span><br><span class=\"line\">    at JS_Parse_Error.get (eval at &lt;anonymous&gt; (D:\\Repos\\Weidows\\Blog-private\\node_modules\\uglify-js\\tools\\node.js:18:1), &lt;anonymous&gt;:71:23)</span><br><span class=\"line\">    at fatal (D:\\Repos\\Weidows\\Blog-private\\node_modules\\uglify-js\\bin\\uglifyjs:394:27)</span><br><span class=\"line\">    at run (D:\\Repos\\Weidows\\Blog-private\\node_modules\\uglify-js\\bin\\uglifyjs:343:9)</span><br><span class=\"line\">    at Object.&lt;anonymous&gt; (D:\\Repos\\Weidows\\Blog-private\\node_modules\\uglify-js\\bin\\uglifyjs:259:5)</span><br><span class=\"line\">    at Module._compile (node:internal/modules/cjs/loader:1097:14)</span><br><span class=\"line\">    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1151:10)</span><br><span class=\"line\">    at Module.load (node:internal/modules/cjs/loader:975:32)</span><br><span class=\"line\">    at Function.Module._load (node:internal/modules/cjs/loader:822:12)</span><br><span class=\"line\">    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:77:12)</span><br><span class=\"line\">    at node:internal/main/run_main_module:17:47</span><br><span class=\"line\">终端进程“D:\\Scoop\\shims\\pwsh.exe -Command npm run uglifyjs”已终止，退出代码: 1。</span><br></pre></td></tr></table></figure>\n<p>如上, uglifyjs 已经装了 global 依赖, 但是项目并没装 (没 node_modules),仍会报错</p>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"推荐文章\">推荐文章</h2>\n<blockquote>\n<p><a href=\"https://mp.weixin.qq.com/s?__biz=MzIyMDkwODczNw==&amp;mid=2247496886&amp;idx=1&amp;sn=513b863b8468fcfaf8c8e750ce266899&amp;chksm=97c66918a0b1e00eb920d278ae03b10ebe1d765db0e17cb8fe5bc60b737fb3c6af1d96fcf724&amp;mpshare=1&amp;scene=23&amp;srcid=0327cIro7WXAp1jgObHXuKCE&amp;sharer_sharetime=1616807246544&amp;sharer_shareid=ff6bb8cfd138294e80df076b8b76232d#rd\">很多人上来就删除的 package-lock.json，还有这么多你不知道的（深度内容）</a></p>\n</blockquote>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"node-多版本管理\">node-多版本管理</h2>\n<ul>\n<li>\n<p>主流的有 nvm / n 两种</p>\n<ul>\n<li>n 在 mac 和 linux 上比较好装,在 win 上就别想了.</li>\n</ul>\n</li>\n<li>\n<p>安装 nvm</p>\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">scoop </span><span class=\"keyword\">install </span>nvm</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>使用 nvm</p>\n<blockquote>\n<p><a href=\"https://segmentfault.com/a/1190000021690038\">node 多版本管理工具——nvm</a></p>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"环境变量原因报错\">环境变量原因报错</h3>\n<figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ERROR </span>open \\settings.txt: The system cannot find the file specified.</span><br></pre></td></tr></table></figure>\n<p>遇到这个报错的话,是因为环境变量还没起效,重启电脑</p>\n<hr>\n<h3 id=\"切换版本报错\">切换版本报错</h3>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">exit</span> status <span class=\"number\">145</span>: The directory is not empty.</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>有可能是在安装/切换 node 版本时退出了终端导致非正常终止, 解决办法为重装/排查 <code>nvm/settings.txt</code></p>\n<p>看到下面 origin 开头的两行了吗? 直接删掉</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root: D:\\Game\\Scoop\\persist\\nvm\\nodejs</span><br><span class=\"line\">arch: <span class=\"number\">64</span></span><br><span class=\"line\">proxy: http:<span class=\"regexp\">//</span><span class=\"number\">127.0</span>.<span class=\"number\">0.1</span>:<span class=\"number\">7890</span></span><br><span class=\"line\">originalpath: .</span><br><span class=\"line\">originalversion:</span><br><span class=\"line\">node_mirror: https:<span class=\"regexp\">//</span>npm.taobao.org<span class=\"regexp\">/mirrors/</span>node/</span><br><span class=\"line\">npm_mirror: https:<span class=\"regexp\">//</span>npm.taobao.org<span class=\"regexp\">/mirrors/</span>npm/</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"版本拟定\">版本拟定</h2>\n<ul>\n<li>\n<p>之前一直手动起草 package.json 中的 version,略显笨拙</p>\n<p>不知道 npm 自带 version 管理功能</p>\n</li>\n<li>\n<p><code>npm version</code></p>\n<blockquote>\n<p>npm version [<newversion> | major | minor | patch | premajor | preminor | prepatch | prerelease [–preid=<prerelease-id>] | from-git]</p>\n</blockquote>\n<p>喏,可以拟定大小版本.</p>\n<p>一般用这三个: major(大) -&gt; minor(小) -&gt; patch(补丁)</p>\n<p>另外需要注意,使用之前要 <code>git commit</code>,不然没法使用.</p>\n</li>\n</ul>\n<p><a><img src=\"https://fastly.jsdelivr.net/gh/Weidows/Images/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表-23\">借物表</h2>\n<p><a name='cite_note-1' href='#cite_ref-1'>[1]</a>: <a href=\"https://www.jianshu.com/p/dbe3cda1ac11\">yarn 源管理工具 yrm</a></p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "node",
                "package",
                "npm",
                "yarn"
            ]
        }
    ]
}