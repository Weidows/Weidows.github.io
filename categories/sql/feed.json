{
    "version": "https://jsonfeed.org/version/1",
    "title": "⭐️齐下无贰⭐️ • All posts by \"sql\" category",
    "description": "May all the beauty be bless.✨",
    "home_page_url": "https://weidows.github.io",
    "items": [
        {
            "id": "https://weidows.github.io/post/lang/Java/SQL/5/",
            "url": "https://weidows.github.io/post/lang/Java/SQL/5/",
            "title": "🚀进修MySQL~(伍)",
            "date_published": "2021-03-20T09:31:28.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2023-04-20 18:22:36\n * @FilePath: \\Blog-private\\source\\_posts\\Java\\SQL\\5.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#preparedstatement\">PreparedStatement</a>\n<ul>\n<li><a href=\"#sql-%E6%B3%A8%E5%85%A5%E9%97%AE%E9%A2%98\">SQL 注入问题</a></li>\n<li><a href=\"#%E5%8C%BA%E5%88%AB%E7%94%A8%E6%B3%95\">区别用法</a></li>\n</ul>\n</li>\n<li><a href=\"#ideasql\">IDEA+SQL</a></li>\n<li><a href=\"#jdbc%E4%BA%8B%E5%8A%A1\">JDBC+事务</a></li>\n<li><a href=\"#%E8%BF%9E%E6%8E%A5%E6%B1%A0\">连接池</a></li>\n<li><a href=\"#%E5%90%84%E5%90%8D%E8%AF%8D%E5%8C%BA%E5%88%AB\">各名词区别</a></li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"PreparedStatement\">PreparedStatement</h2>\n<h3 id=\"SQL-注入问题\">SQL 注入问题</h3>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/rongxiang111/article/details/78228681\">SQL 注入问题及解决</a></p>\n</blockquote>\n<ul>\n<li>\n<p>通过修改 SQL 指令字符串,使 SQL 服务器执行不正规或者恶意的 SQL 命令</p>\n</li>\n<li>\n<p>比如客户端可以通过修改 SQL 字符串,可以使服务器传回原本不能显示的数据,或者修改非指定的数据.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"区别用法\">区别用法</h3>\n<blockquote>\n<p>PreparedStatement 可以防止 SQL 注入,而且效率更高.</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Date;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.PreparedStatement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> twenty_one.jdbc.demo2.utils.JDBCUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestPreparedStatement</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">PreparedStatement</span> <span class=\"variable\">preparedStatement</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 连接</span></span><br><span class=\"line\">    connection = JDBCUtils.getConnection();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ! 插入</span></span><br><span class=\"line\">    <span class=\"comment\">// 问号&#x27;?&#x27;为占位符</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">insert</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;INSERT INTO jdbcstudy.users(NAME, PASSWORD, email, birthday)  VALUES (?,?,?,?);&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">//预编译sql</span></span><br><span class=\"line\">    preparedStatement = connection.prepareStatement(insert);</span><br><span class=\"line\">    <span class=\"comment\">//手动赋值</span></span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">1</span>, <span class=\"string\">&quot;weidows&quot;</span>);</span><br><span class=\"line\">    preparedStatement.setInt(<span class=\"number\">2</span>, <span class=\"number\">123456</span>);</span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">3</span>, <span class=\"string\">&quot;utsuko27@qq.com&quot;</span>);</span><br><span class=\"line\">    preparedStatement.setDate(<span class=\"number\">4</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">java</span>.util.Date().getTime()));</span><br><span class=\"line\">    <span class=\"comment\">// 执行</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (preparedStatement.executeUpdate() &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;成功.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ! 查询</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">query</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;SELECT * From jdbcstudy.users where name = ?;&quot;</span>;</span><br><span class=\"line\">    preparedStatement = connection.prepareStatement(query);</span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">1</span>, <span class=\"string\">&quot;weidows&quot;</span>);</span><br><span class=\"line\">    resultSet = preparedStatement.executeQuery();</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (resultSet.next()) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;id = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;id&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;name = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;NAME&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;password = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;PASSWORD&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;email = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;email&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;birthday = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;birthday&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;===============================================================&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 断连</span></span><br><span class=\"line\">    JDBCUtils.releaseConnection(connection, preparedStatement, resultSet);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"IDEA-SQL\">IDEA+SQL</h2>\n<ul>\n<li>\n<p>图形化的,摸索摸索就差不多会了.</p>\n</li>\n<li>\n<p>在学这个 SQL 课程时,个人开始用的是 sqlyog,后来卸载了,直接用的 idea 内嵌的.</p>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JDBC-事务\">JDBC+事务</h2>\n<ul>\n<li>\n<p>创建表+插入数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">TABLE</span> jdbcstudy.account</span><br><span class=\"line\">(</span><br><span class=\"line\">  id    <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">  name  <span class=\"type\">varchar</span>(<span class=\"number\">255</span>),</span><br><span class=\"line\">  money <span class=\"type\">DECIMAL</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> jdbcstudy.account(name, money)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;A&#x27;</span>, <span class=\"number\">1000</span>),</span><br><span class=\"line\">      (<span class=\"string\">&#x27;B&#x27;</span>, <span class=\"number\">1000</span>),</span><br><span class=\"line\">      (<span class=\"string\">&#x27;C&#x27;</span>, <span class=\"number\">1000</span>);</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>事务</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.PreparedStatement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> twenty_one.jdbc.demo2.utils.JDBCUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestTransaction</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">PreparedStatement</span> <span class=\"variable\">preparedStatement</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      connection = JDBCUtils.getConnection();</span><br><span class=\"line\">      <span class=\"comment\">//关闭数据库的自动提交功能,同时开启事务</span></span><br><span class=\"line\">      connection.setAutoCommit(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">sql</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;update account set money = money-500 where id = 1&quot;</span>;</span><br><span class=\"line\">      preparedStatement = connection.prepareStatement(sql);</span><br><span class=\"line\">      preparedStatement.executeUpdate();</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">sql2</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;update account set money = money-500 where id = 2&quot;</span>;</span><br><span class=\"line\">      preparedStatement = connection.prepareStatement(sql2);</span><br><span class=\"line\">      preparedStatement.executeUpdate();</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//业务完毕，提交事务</span></span><br><span class=\"line\">      connection.commit();</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;事务操作成功&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">      <span class=\"comment\">//如果失败，默认会回滚,也可以在这里自定义</span></span><br><span class=\"line\">      connection.rollback();</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">      JDBCUtils.releaseConnection(connection, preparedStatement, resultSet);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"连接池\">连接池</h2>\n<ul>\n<li>\n<p>概念上与线程池相同,因为频繁创建和断开连接耗费大量资源,利用池化技术来<code>减轻资源损耗.</code></p>\n</li>\n<li>\n<p>数据库连接池接口 <code>DataSource</code> ,开源数据源实现类:</p>\n<ul>\n<li>\n<p>DBCP</p>\n</li>\n<li>\n<p>C3P0</p>\n</li>\n<li>\n<p>Druid: 阿里巴巴</p>\n</li>\n</ul>\n<blockquote>\n<p>无论使用什么数据源，本质是不变的，DateSource 接口不会变，方法就不会变</p>\n</blockquote>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>用法区别就是 utils 类中,加载驱动,连接 connection 和读取 properties 配置文件不需要我们自己写了</p>\n</li>\n<li>\n<p>db.properties</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># DBCP的设置文件,属性名不能错</span></span><br><span class=\"line\"><span class=\"attr\">driverClassName</span>=<span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"attr\">url</span>=<span class=\"string\">jdbc:mysql://localhost:3306/jdbcStudy?useUnicode = true &amp; characterEncoding = utf8 &amp; useSSL = true</span></span><br><span class=\"line\"><span class=\"attr\">username</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"attr\">password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>utils.DbcpUtils</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Statement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.sql.DataSource;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.dbcp.BasicDataSourceFactory;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DbcpUtils</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Properties</span> <span class=\"variable\">properties</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">DataSource</span> <span class=\"variable\">dataSource</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 加载连接信息</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      properties.load(<span class=\"keyword\">new</span> <span class=\"title class_\">FileInputStream</span>(<span class=\"string\">&quot;Java/src/main/java/twenty_one/jdbc/demo3/db.properties&quot;</span>));</span><br><span class=\"line\">      dataSource = BasicDataSourceFactory.createDataSource(properties);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 获取连接</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Connection <span class=\"title function_\">getConnection</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> dataSource.getConnection();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 释放资源</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">releaseConnection</span><span class=\"params\">(Connection connection, Statement statement, ResultSet resultSet)</span></span><br><span class=\"line\">      <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (resultSet != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      resultSet.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (statement != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      statement.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (connection != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      connection.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>TestDataSource</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Date;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.PreparedStatement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> twenty_one.jdbc.demo3.utils.DbcpUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestDataSource</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">PreparedStatement</span> <span class=\"variable\">preparedStatement</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 连接</span></span><br><span class=\"line\">    connection = DbcpUtils.getConnection();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ! 插入</span></span><br><span class=\"line\">    <span class=\"comment\">// 问号&#x27;?&#x27;为占位符</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">insert</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;INSERT INTO jdbcstudy.users(NAME, PASSWORD, email, birthday)  VALUES (?,?,?,?);&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">//预编译sql</span></span><br><span class=\"line\">    preparedStatement = connection.prepareStatement(insert);</span><br><span class=\"line\">    <span class=\"comment\">//手动赋值</span></span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">1</span>, <span class=\"string\">&quot;weidows&quot;</span>);</span><br><span class=\"line\">    preparedStatement.setInt(<span class=\"number\">2</span>, <span class=\"number\">123456</span>);</span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">3</span>, <span class=\"string\">&quot;utsuko27@qq.com&quot;</span>);</span><br><span class=\"line\">    preparedStatement.setDate(<span class=\"number\">4</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">java</span>.util.Date().getTime()));</span><br><span class=\"line\">    <span class=\"comment\">// 执行</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (preparedStatement.executeUpdate() &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;成功.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ! 查询</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">query</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;SELECT * From jdbcstudy.users where name = ?;&quot;</span>;</span><br><span class=\"line\">    preparedStatement = connection.prepareStatement(query);</span><br><span class=\"line\">    preparedStatement.setString(<span class=\"number\">1</span>, <span class=\"string\">&quot;weidows&quot;</span>);</span><br><span class=\"line\">    resultSet = preparedStatement.executeQuery();</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (resultSet.next()) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;id = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;id&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;name = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;NAME&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;password = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;PASSWORD&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;email = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;email&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;birthday = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;birthday&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;===============================================================&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 断连</span></span><br><span class=\"line\">    DbcpUtils.releaseConnection(connection, preparedStatement, resultSet);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"各名词区别\">各名词区别</h2>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/u013541707/article/details/113182157\">简单分析jdbc、datasource数据源、数据库驱动，连接池，jdbcTemplate，mybatis、JPA、Hibernate的区别</a></p>\n</blockquote>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记",
                "Java",
                "MySQL",
                "JDBC"
            ]
        },
        {
            "id": "https://weidows.github.io/post/lang/Java/SQL/4/",
            "url": "https://weidows.github.io/post/lang/Java/SQL/4/",
            "title": "🚀进修MySQL~(肆)",
            "date_published": "2021-03-17T06:41:19.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2023-04-20 18:17:52\n * @FilePath: \\Blog-private\\source\\_posts\\Java\\SQL\\4.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86\">用户/权限管理</a>\n<ul>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C\">基本操作</a></li>\n<li><a href=\"#%E6%9D%83%E9%99%90%E8%A7%A3%E9%87%8A\">权限解释</a></li>\n<li><a href=\"#%E8%A1%A8%E7%BB%B4%E6%8A%A4\">表维护</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AF%BC%E5%87%BA%E5%AF%BC%E5%85%A5\">导出&amp;导入</a></li>\n<li><a href=\"#%E8%AE%BE%E8%AE%A1%E6%95%B0%E6%8D%AE%E5%BA%93\">设计数据库</a></li>\n<li><a href=\"#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F\">三大范式</a>\n<ul>\n<li><a href=\"#%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F\">第一范式</a></li>\n<li><a href=\"#%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F\">第二范式</a></li>\n<li><a href=\"#%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F\">第三范式</a></li>\n<li><a href=\"#%E6%80%A7%E8%83%BD%E8%80%83%E9%87%8F\">性能考量</a></li>\n</ul>\n</li>\n<li><a href=\"#jdbc\">JDBC</a>\n<ul>\n<li><a href=\"#helloworld\">HelloWorld</a></li>\n<li><a href=\"#%E5%AF%B9%E8%B1%A1%E6%93%8D%E4%BD%9C\">对象操作</a></li>\n<li><a href=\"#%E8%A7%A3%E8%80%A6%E6%A1%88%E4%BE%8B\">解耦案例</a>\n<ul>\n<li><a href=\"#utils\">Utils</a></li>\n<li><a href=\"#crud\">CRUD</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"用户-权限管理\">用户/权限管理</h2>\n<h3 id=\"基本操作\">基本操作</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  用户信息表：mysql.user</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 刷新权限</span></span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  增加用户</span></span><br><span class=\"line\"><span class=\"comment\">  必须拥有mysql数据库的全局CREATE USER权限，或拥有INSERT权限。</span></span><br><span class=\"line\"><span class=\"comment\">  用户名/密码注意加引号，如 &#x27;user_name&#x27;@&#x27;192.168.1.1&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> weidows IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 重命名用户</span></span><br><span class=\"line\">RENAME <span class=\"keyword\">USER</span> weidows <span class=\"keyword\">TO</span> weidows2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 删除用户</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">USER</span> weidows2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 设置密码</span></span><br><span class=\"line\"><span class=\"comment\">-- 为当前用户设置密码</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span> PASSWORD <span class=\"operator\">=</span> PASSWORD (<span class=\"string\">&#x27;密码&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 为指定用户设置密码</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span> PASSWORD <span class=\"keyword\">FOR</span> 用户名 <span class=\"operator\">=</span> PASSWORD (<span class=\"string\">&#x27;密码&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 上面两种报错的话</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">USER</span> root<span class=\"variable\">@localhost</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;密码&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  授予权限</span></span><br><span class=\"line\"><span class=\"comment\">  GRANT 权限列表 ON 表名 TO 用户名 [IDENTIFIED BY [PASSWORD] &#x27;password&#x27;]</span></span><br><span class=\"line\"><span class=\"comment\">    all privileges 表示所有权限</span></span><br><span class=\"line\"><span class=\"comment\">    *.* 表示所有库的所有表</span></span><br><span class=\"line\"><span class=\"comment\">    库名.表名 表示某库下面的某表</span></span><br><span class=\"line\"><span class=\"comment\">  只有root用户拥有grant权限,其他用户无法开启.</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">ALL</span> PRIVILEGES <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> weidows IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;123456&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查看权限</span></span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> GRANTS <span class=\"keyword\">FOR</span> root<span class=\"variable\">@localhost</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 查看当前用户权限</span></span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> GRANTS;</span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> GRANTS <span class=\"keyword\">FOR</span> <span class=\"built_in\">CURRENT_USER</span>;</span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> GRANTS <span class=\"keyword\">FOR</span> <span class=\"built_in\">CURRENT_USER</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  撤消权限</span></span><br><span class=\"line\"><span class=\"comment\">  REVOKE 权限列表 ON 表名 FROM 用户名</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">REVOKE</span> <span class=\"keyword\">ALL</span> PRIVILEGES <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> weidows;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"权限解释\">权限解释</h3>\n<ul>\n<li>(查询用,不用硬记)</li>\n</ul>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALL</span> [<span class=\"keyword\">PRIVILEGES</span>]    <span class=\"comment\">-- 设置除GRANT OPTION之外的所有简单权限</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span>    <span class=\"comment\">-- 允许使用ALTER TABLE</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">ROUTINE</span>    <span class=\"comment\">-- 更改或取消已存储的子程序</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span>    <span class=\"comment\">-- 允许使用CREATE TABLE</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">ROUTINE</span>    <span class=\"comment\">-- 创建已存储的子程序</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TEMPORARY</span> <span class=\"keyword\">TABLES</span>        <span class=\"comment\">-- 允许使用CREATE TEMPORARY TABLE</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span>        <span class=\"comment\">-- 允许使用CREATE USER, DROP USER, RENAME USER和REVOKE ALL PRIVILEGES。</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">VIEW</span>        <span class=\"comment\">-- 允许使用CREATE VIEW</span></span><br><span class=\"line\"><span class=\"keyword\">DELETE</span>    <span class=\"comment\">-- 允许使用DELETE</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span>    <span class=\"comment\">-- 允许使用DROP TABLE</span></span><br><span class=\"line\"><span class=\"keyword\">EXECUTE</span>        <span class=\"comment\">-- 允许用户运行已存储的子程序</span></span><br><span class=\"line\">FILE    <span class=\"comment\">-- 允许使用SELECT...INTO OUTFILE和LOAD DATA INFILE</span></span><br><span class=\"line\"><span class=\"keyword\">INDEX</span>     <span class=\"comment\">-- 允许使用CREATE INDEX和DROP INDEX</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span>    <span class=\"comment\">-- 允许使用INSERT</span></span><br><span class=\"line\"><span class=\"keyword\">LOCK</span> <span class=\"keyword\">TABLES</span>        <span class=\"comment\">-- 允许对您拥有SELECT权限的表使用LOCK TABLES</span></span><br><span class=\"line\">PROCESS     <span class=\"comment\">-- 允许使用SHOW FULL PROCESSLIST</span></span><br><span class=\"line\"><span class=\"keyword\">REFERENCES</span>    <span class=\"comment\">-- 未被实施</span></span><br><span class=\"line\">RELOAD    <span class=\"comment\">-- 允许使用FLUSH</span></span><br><span class=\"line\"><span class=\"keyword\">REPLICATION</span> CLIENT    <span class=\"comment\">-- 允许用户询问从属服务器或主服务器的地址</span></span><br><span class=\"line\"><span class=\"keyword\">REPLICATION</span> SLAVE    <span class=\"comment\">-- 用于复制型从属服务器（从主服务器中读取二进制日志事件）</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span>    <span class=\"comment\">-- 允许使用SELECT</span></span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> DATABASES    <span class=\"comment\">-- 显示所有数据库</span></span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> <span class=\"keyword\">VIEW</span>    <span class=\"comment\">-- 允许使用SHOW CREATE VIEW</span></span><br><span class=\"line\">SHUTDOWN    <span class=\"comment\">-- 允许使用mysqladmin shutdown</span></span><br><span class=\"line\">SUPER    <span class=\"comment\">-- 允许使用CHANGE MASTER, KILL, PURGE MASTER LOGS和SET GLOBAL语句，mysqladmin debug命令；允许您连接（一次），即使已达到max_connections。</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span>    <span class=\"comment\">-- 允许使用UPDATE</span></span><br><span class=\"line\"><span class=\"keyword\">USAGE</span>    <span class=\"comment\">-- “无权限”的同义词</span></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">OPTION</span>    <span class=\"comment\">-- 允许授予权限</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"表维护\">表维护</h3>\n<ul>\n<li><code>了解</code></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 分析和存储表的关键字分布</span></span><br><span class=\"line\">ANALYZE [<span class=\"keyword\">LOCAL</span> <span class=\"operator\">|</span> NO_WRITE_TO_BINLOG] <span class=\"keyword\">TABLE</span> 表名 ...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 检查一个或多个表是否有错误</span></span><br><span class=\"line\"><span class=\"keyword\">CHECK</span> <span class=\"keyword\">TABLE</span> tbl_name [, tbl_name] ... [option] ...</span><br><span class=\"line\">option <span class=\"operator\">=</span> &#123;QUICK <span class=\"operator\">|</span> FAST <span class=\"operator\">|</span> MEDIUM <span class=\"operator\">|</span> EXTENDED <span class=\"operator\">|</span> CHANGED&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 整理数据文件的碎片</span></span><br><span class=\"line\">OPTIMIZE [<span class=\"keyword\">LOCAL</span> <span class=\"operator\">|</span> NO_WRITE_TO_BINLOG] <span class=\"keyword\">TABLE</span> tbl_name [, tbl_name] ...</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"导出-导入\">导出&amp;导入</h2>\n<ul>\n<li>\n<p>可以用 SQL GUI 程序操作,下面介绍命令行操作</p>\n</li>\n<li>\n<p>导出</p>\n<ul>\n<li>可以加上-w 携带备份条件</li>\n<li>-xxx 后面不加空格,直接带上参数</li>\n</ul>\n<hr>\n<ol>\n<li>导出一张表 mysqldump -u 用户名 -p 密码 库名 表名 &gt; 文件名(D:/a.sql)</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysqldump -uroot -p123456 school student &gt;D:/a.sql</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>导出多张表 mysqldump -u 用户名 -p 密码 库名 表 1 表 2 表 3 &gt; 文件名(D:/a.sql)</li>\n</ol>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysqldump -uroot -p123456 school student <span class=\"built_in\">result</span> &gt;D:/<span class=\"keyword\">a</span>.sql</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>导出所有表 mysqldump -u 用户名 -p 密码 库名 &gt; 文件名(D:/a.sql)</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysqldump -uroot -p123456 school &gt;D:/a.sql</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>导出一个库 mysqldump -u 用户名 -p 密码 -B 库名 &gt; 文件名(D:/a.sql)</li>\n</ol>\n<figure class=\"highlight armasm\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">mysqldump</span> -uroot -p123456 -<span class=\"keyword\">B</span> school &gt;D:/a.sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>导入</p>\n<ol>\n<li>在已经登录 mysql,切换到指定数据库的情况下: source 备份文件</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> D:/a.sql</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>在不登录的情况下: mysql -u 用户名 -p 密码 [库名] &lt; 备份文件 (如果导入一个库的话就不加库名)</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p123456 school &lt;D:/a.sql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"设计数据库\">设计数据库</h2>\n<ul>\n<li>\n<p>目的:</p>\n<ol>\n<li>节省数据存储空间</li>\n<li>保证数据的完整性</li>\n<li>方便进行数据库应用系统的开发</li>\n</ol>\n<hr>\n</li>\n<li>\n<p>阶段设计</p>\n<ol>\n<li>\n<p>需求分析: 分析客户的业务和数据处理需求</p>\n</li>\n<li>\n<p>概要设计: 设计数据库的 E-R 模型图 , 确认需求信息的正确和完整.</p>\n</li>\n<li>\n<p>收集信息: 搜集与需求相关的信息需求.</p>\n<ol>\n<li>页面 A</li>\n<li>功能 B</li>\n<li>特殊需求 C</li>\n<li>自定义 D</li>\n<li>…</li>\n</ol>\n</li>\n<li>\n<p>标识实体: 标识数据库所要管理的对象,详细信息(Attribute)以及关系(Relationship)</p>\n<ol>\n<li>写博客 user -&gt; blog</li>\n<li>分类 blog -&gt; category</li>\n<li>评论 user(作者) -&gt; user(评论者) -&gt; blog(博客页面)</li>\n<li>…</li>\n</ol>\n</li>\n</ol>\n</li>\n</ul>\n<hr>\n<h2 id=\"三大范式\">三大范式</h2>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/scarecrow_fly/article/details/102170042\">数据库设计的三大范式通俗讲解</a></p>\n</blockquote>\n<ul>\n<li>\n<p>三大范式出现为了解决一下四种问题</p>\n<ul>\n<li>\n<p>信息重复</p>\n</li>\n<li>\n<p>更新异常</p>\n</li>\n<li>\n<p>插入异常</p>\n</li>\n<li>\n<p>删除异常</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"第一范式\">第一范式</h3>\n<blockquote>\n<p>确保每列的<code>原子性</code>,每列都是不可再分的最小数据单元</p>\n</blockquote>\n<blockquote>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVsdNA.png\" alt=\"20210317202650\" />\n</blockquote>\n<ul>\n<li>上面家庭信息和学校信息都可以再拆分为两列</li>\n</ul>\n<hr>\n<h3 id=\"第二范式\">第二范式</h3>\n<blockquote>\n<p>必须在满足第一范式的条件下: 每个表只做一件事(<code>每行有唯一标识</code>,其他数据只依赖于此标识列)</p>\n</blockquote>\n<blockquote>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVsvu5.png\" alt=\"20210317203230\" />\n</blockquote>\n<ul>\n<li>\n<p>简单来讲就是标识列和其他列有共同重复数据行,那么<code>标识列</code>和<code>有重复数据的列</code>可以分到另一个表</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVsNOm.png\" alt=\"20210317203601\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"第三范式\">第三范式</h3>\n<blockquote>\n<p>在第二范式基础上,其他列数据必须与标识列数据有直接关系</p>\n</blockquote>\n<blockquote>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVsQkh.png\" alt=\"20210317204105\" />\n</blockquote>\n<ul>\n<li>\n<p>也就是说不存在标识列与其他列共同重复了,但还是可能存在多个其他列有共同重复(班主任的那三列有共同重复数据)</p>\n</li>\n<li>\n<p>把班主任分出去</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVs7lq.png\" alt=\"20210317204341\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"性能考量\">性能考量</h3>\n<blockquote>\n<p><code>关联查询不能超过三张表</code>.</p>\n</blockquote>\n<ul>\n<li>\n<p>实际应用中需要考虑多表的额外开销</p>\n</li>\n<li>\n<p>如果不规范程度低,而且性能需求高的场景,则需要考虑是否遵循范式.</p>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"JDBC\">JDBC</h2>\n<h3 id=\"HelloWorld\">HelloWorld</h3>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVsz1c.png\" alt=\"20210319102812\" />\n<ul>\n<li>\n<p>工具类 (Java 自带)</p>\n<ul>\n<li>java.sql</li>\n<li>javax.sql</li>\n</ul>\n</li>\n<li>\n<p>SQL 驱动需要导入(在 pom.xml 中)</p>\n<ul>\n<li>mysql-connector-java-版本号 jar</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.23<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>创建数据库</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE jdbcStudy <span class=\"type\">CHARACTER</span> <span class=\"keyword\">SET</span> utf8 <span class=\"keyword\">COLLATE</span> utf8_general_ci;</span><br><span class=\"line\"></span><br><span class=\"line\">USE jdbcStudy;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `users`</span><br><span class=\"line\">(</span><br><span class=\"line\">  id       <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY,</span><br><span class=\"line\">  NAME     <span class=\"type\">VARCHAR</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">  PASSWORD <span class=\"type\">VARCHAR</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">  email    <span class=\"type\">VARCHAR</span>(<span class=\"number\">60</span>),</span><br><span class=\"line\">  birthday <span class=\"type\">DATE</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> `users`(id, NAME, PASSWORD, email, birthday)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;zhansan&#x27;</span>, <span class=\"string\">&#x27;123456&#x27;</span>, <span class=\"string\">&#x27;zs@sina.com&#x27;</span>, <span class=\"string\">&#x27;1980-12-04&#x27;</span>),</span><br><span class=\"line\">      (<span class=\"number\">2</span>, <span class=\"string\">&#x27;lisi&#x27;</span>, <span class=\"string\">&#x27;123456&#x27;</span>, <span class=\"string\">&#x27;lisi@sina.com&#x27;</span>, <span class=\"string\">&#x27;1981-12-04&#x27;</span>),</span><br><span class=\"line\">      (<span class=\"number\">3</span>, <span class=\"string\">&#x27;wangwu&#x27;</span>, <span class=\"string\">&#x27;123456&#x27;</span>, <span class=\"string\">&#x27;wangwu@sina.com&#x27;</span>, <span class=\"string\">&#x27;1979-12-04&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>连接,helloworld</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.DriverManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Statement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.mysql.cj.jdbc.Driver;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">JDBCFirstDemo</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 1.设置用户信息</span></span><br><span class=\"line\"><span class=\"comment\">        useUnicode = true 支持中文编码</span></span><br><span class=\"line\"><span class=\"comment\">        characterEncoding = utf8 设定字符集</span></span><br><span class=\"line\"><span class=\"comment\">        useSSL = true 安全连接</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;jdbc:mysql://localhost:3306/jdbcStudy?useUnicode = true &amp; characterEncoding = utf8 &amp; useSSL = true&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;root&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;123456&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2.加载驱动(固定写法,二选一)</span></span><br><span class=\"line\">    <span class=\"comment\">// Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span></span><br><span class=\"line\">    DriverManager.registerDriver(<span class=\"keyword\">new</span> <span class=\"title class_\">Driver</span>());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 3.连接，数据库对象 Connection 代表数据库</span></span><br><span class=\"line\"><span class=\"comment\">        //事务提交</span></span><br><span class=\"line\"><span class=\"comment\">        connection.commit();</span></span><br><span class=\"line\"><span class=\"comment\">        //事务回滚</span></span><br><span class=\"line\"><span class=\"comment\">        connection.rollback();</span></span><br><span class=\"line\"><span class=\"comment\">        //数据库设置自动提交</span></span><br><span class=\"line\"><span class=\"comment\">        connection.setAutoCommit(true);</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> DriverManager.getConnection(url, user, password);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4.创建SQL的对象</span></span><br><span class=\"line\">    <span class=\"type\">Statement</span> <span class=\"variable\">statement</span> <span class=\"operator\">=</span> connection.createStatement();</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">sql</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;SELECT * FROM users&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5.执行SQL的对象,查看返回结果</span></span><br><span class=\"line\">    <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> statement.executeQuery(sql); <span class=\"comment\">//返回的结果集</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (resultSet.next()) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;id = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;id&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;name = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;NAME&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;password = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;PASSWORD&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;email = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;email&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;birthday = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;birthday&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;===============================================================&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//6.释放连接</span></span><br><span class=\"line\">    resultSet.close();</span><br><span class=\"line\">    statement.close();</span><br><span class=\"line\">    connection.close();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>执行结果</p>\n<figure class=\"highlight asciidoc\"><table><tr><td class=\"code\"><pre><span class=\"line\">id = 1</span><br><span class=\"line\">name = zhansan</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = zs@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1980-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">id = 2</span><br><span class=\"line\">name = lisi</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = lisi@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1981-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">id = 3</span><br><span class=\"line\">name = wangwu</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = wangwu@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1979-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"对象操作\">对象操作</h3>\n<ul>\n<li>\n<p>connection</p>\n<ul>\n<li>connection.rollback();</li>\n<li>connection.commit();</li>\n<li>connection.setAutoCommit();</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>statement</p>\n<ul>\n<li>statement.executeQuery(); 执行查询 SQL</li>\n<li>statement.execute(); 可以执行任何 SQL 指令</li>\n<li>statement.executeUpdate(); 更新，插入，删除，返回受影响的行数</li>\n<li>statement.executeBatch(); 执行一组 SQL</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>ResultSet</p>\n<ul>\n<li>resultSet.getObject(); 在不知道列类型下使用</li>\n<li>resultSet.getString(); 如果知道则指定使用</li>\n<li>resultSet.getInt();</li>\n<li>…</li>\n</ul>\n<hr>\n<ul>\n<li>resultSet.next(); 移动到下一个</li>\n<li>resultSet.previous(); 移动到上一个</li>\n<li>resultSet.beforeFirst(); 移动到最前</li>\n<li>resultSet.afterLast(); 移动到最后</li>\n<li>resultSet.absolute(row); 移动到指定行</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"解耦案例\">解耦案例</h3>\n<ul>\n<li>\n<p>上面的 JDBC 包括加载连接,业务逻辑,状态转化都写到一个类中,导致扩展时很不方便,需要 <code>解耦</code></p>\n</li>\n<li>\n<p>把加载连接分离到 <code>db.properties</code></p>\n<figure class=\"highlight properties\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">driver</span>=<span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"attr\">url</span>=<span class=\"string\">jdbc:mysql://localhost:3306/jdbcStudy?useUnicode = true &amp; characterEncoding = utf8 &amp; useSSL = true</span></span><br><span class=\"line\"><span class=\"attr\">username</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"attr\">password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"Utils\">Utils</h4>\n<ul>\n<li>\n<p>把 SQL connect 和 release 分离到 <code>utils.JDBCUtils</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.DriverManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Statement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">JDBCUtils</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">driver</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 加载连接信息</span></span><br><span class=\"line\">    <span class=\"type\">Properties</span> <span class=\"variable\">properties</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Properties</span>();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      properties.load(<span class=\"keyword\">new</span> <span class=\"title class_\">FileInputStream</span>(<span class=\"string\">&quot;Java/src/main/java/twenty_one/jdbc/demo2/db.properties&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">      driver = properties.getProperty(<span class=\"string\">&quot;driver&quot;</span>);</span><br><span class=\"line\">      url = properties.getProperty(<span class=\"string\">&quot;url&quot;</span>);</span><br><span class=\"line\">      username = properties.getProperty(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">      password = properties.getProperty(<span class=\"string\">&quot;password&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      Class.forName(driver);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException | ClassNotFoundException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 获取连接</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Connection <span class=\"title function_\">getConnection</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> DriverManager.getConnection(url, username, password);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 释放资源</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">releaseConnection</span><span class=\"params\">(Connection connection,Statement statement,ResultSet resultSet)</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (resultSet != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      resultSet.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (statement != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      statement.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (connection != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      connection.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"CRUD\">CRUD</h4>\n<ul>\n<li>\n<p>业务类: 测试增删改查(CRUD)</p>\n<ul>\n<li>增删改用<code>.executeUpdate()</code>, 查用<code>.executeQuery()</code></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Statement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> twenty_one.jdbc.demo2.utils.JDBCUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Test</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Connection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Statement</span> <span class=\"variable\">statement</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">ResultSet</span> <span class=\"variable\">resultSet</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SQLException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 连接</span></span><br><span class=\"line\">    connection = JDBCUtils.getConnection();</span><br><span class=\"line\">    statement = connection.createStatement();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 增</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">insert</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;INSERT INTO jdbcstudy.users(NAME, PASSWORD, email, birthday)  VALUES (&#x27;weidows&#x27;, 123456, &#x27;utsuko27@qq.com&#x27;, &#x27;2020-07-28&#x27;);&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (statement.executeUpdate(insert) &gt; <span class=\"number\">0</span>) &#123; <span class=\"comment\">// 返回int:受影响的行数</span></span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;插入成功. insert -&gt; weidows&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 改</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">update</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;update jdbcstudy.users set password =654321 where name = &#x27;weidows&#x27;;&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (statement.executeUpdate(update) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;修改成功. weidows.password -&gt; 654321&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">query</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;SELECT * From jdbcstudy.users;&quot;</span>;</span><br><span class=\"line\">    resultSet = statement.executeQuery(query);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (resultSet.next()) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;id = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;id&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;name = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;NAME&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;password = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;PASSWORD&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;email = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;email&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;birthday = &quot;</span> + resultSet.getObject(<span class=\"string\">&quot;birthday&quot;</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;===============================================================&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 删</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">delete</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;delete from jdbcstudy.users where name = &#x27;weidows&#x27;;&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (statement.executeUpdate(delete) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;删除成功.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 断连</span></span><br><span class=\"line\">    JDBCUtils.releaseConnection(connection, statement, resultSet);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>执行结果</p>\n<figure class=\"highlight asciidoc\"><table><tr><td class=\"code\"><pre><span class=\"line\">插入成功. insert -&gt; weidows</span><br><span class=\"line\">修改成功. weidows.password -&gt; 654321</span><br><span class=\"line\">id = 1</span><br><span class=\"line\">name = zhansan</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = zs@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1980-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">id = 2</span><br><span class=\"line\">name = lisi</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = lisi@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1981-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">id = 3</span><br><span class=\"line\">name = wangwu</span><br><span class=\"line\">password = 123456</span><br><span class=\"line\">email = wangwu@sina.com</span><br><span class=\"line\"><span class=\"section\">birthday = 1979-12-04</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">id = 9</span><br><span class=\"line\">name = weidows</span><br><span class=\"line\">password = 654321</span><br><span class=\"line\">email = utsuko27@qq.com</span><br><span class=\"line\"><span class=\"section\">birthday = 2020-07-28</span></span><br><span class=\"line\"><span class=\"section\">===============================================================</span></span><br><span class=\"line\">删除成功.</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记",
                "Java",
                "MySQL",
                "JDBC"
            ]
        },
        {
            "id": "https://weidows.github.io/post/lang/Java/SQL/3/",
            "url": "https://weidows.github.io/post/lang/Java/SQL/3/",
            "title": "🚀进修MySQL~(叁)",
            "date_published": "2021-03-15T14:45:58.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2023-04-20 18:16:57\n * @FilePath: \\Blog-private\\source\\_posts\\Java\\SQL\\3.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%87%BD%E6%95%B0\">函数</a>\n<ul>\n<li><a href=\"#%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0\">数据函数</a>\n<ul>\n<li><a href=\"#%E4%BD%9C%E7%94%A8%E4%BA%8E%E8%AE%B0%E5%BD%95\">作用于记录</a></li>\n<li><a href=\"#%E4%BD%9C%E7%94%A8%E4%BA%8E%E5%AD%97%E6%AE%B5\">作用于字段</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0\">字符串函数</a></li>\n<li><a href=\"#%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0\">时间函数</a></li>\n<li><a href=\"#%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF\">系统信息</a></li>\n<li><a href=\"#%E5%88%86%E7%BB%84\">分组</a></li>\n<li><a href=\"#md5-%E5%8A%A0%E5%AF%86\">MD5 加密</a></li>\n</ul>\n</li>\n<li><a href=\"#%E4%BA%8B%E5%8A%A1\">事务</a>\n<ul>\n<li><a href=\"#acid-%E5%8E%9F%E5%88%99\">ACID 原则</a></li>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95\">基本语法</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%B4%A2%E5%BC%95\">索引</a>\n<ul>\n<li><a href=\"#%E5%88%86%E7%B1%BB\">分类</a></li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95\">添加&amp;删除索引</a></li>\n<li><a href=\"#explain\">EXPLAIN</a></li>\n<li><a href=\"#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90\">性能分析</a></li>\n<li><a href=\"#%E7%B4%A2%E5%BC%95%E8%A7%84%E7%9F%A9\">索引规矩</a></li>\n</ul>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"函数\">函数</h2>\n<h3 id=\"数据函数\">数据函数</h3>\n<h4 id=\"作用于记录\">作用于记录</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 绝对值</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">ABS</span>(<span class=\"number\">-8</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 向上取整</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">CEILING</span>(<span class=\"number\">9.4</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 向下取整</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">FLOOR</span>(<span class=\"number\">9.4</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 随机数,返回一个0-1之间的随机数</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  RAND();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 符号函数: 负数返回-1,正数返回1,0返回0</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  SIGN(<span class=\"number\">0</span>);</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"作用于字段\">作用于字段</h4>\n<ul>\n<li>也叫 <code>聚合函数</code>(常用)</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  三种COUNT()用法及区别</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">  count(1)和count(*)都会对全表进行扫描，统计所有记录的条数，包括那些为null的记录，因此，它们的效率可以说是相差无几;而count(字段)则与前两者不同，它会统计该字段不为null的记录条数。</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">  1）在表没有主键时，count(1)比count(*)快</span></span><br><span class=\"line\"><span class=\"comment\">  2）有主键时，主键作为计算条件，count(主键)效率最高；</span></span><br><span class=\"line\"><span class=\"comment\">  3）若表格只有一个字段，则count(*)效率较高。</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">COUNT</span>(studentname) <span class=\"keyword\">AS</span> `学生人数`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">AS</span> `学生人数`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">COUNT</span>(<span class=\"number\">1</span>) <span class=\"keyword\">AS</span> `学生人数`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 和</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">SUM</span>(StudentResult) <span class=\"keyword\">AS</span> `总 和`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 平均</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">AVG</span>(StudentResult) <span class=\"keyword\">AS</span> `平 均 分`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 最高</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">MAX</span>(StudentResult) <span class=\"keyword\">AS</span> `最 高 分`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 最低</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">MIN</span>(StudentResult) <span class=\"keyword\">AS</span> `最 低 分`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"字符串函数\">字符串函数</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 返回字符串包含的字符数</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">CHAR_LENGTH</span>(<span class=\"string\">&#x27;狂神说坚持就能成功&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 合并字符串,参数可以有多个</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  CONCAT(<span class=\"string\">&#x27;我&#x27;</span>, <span class=\"string\">&#x27;爱&#x27;</span>, <span class=\"string\">&#x27;程序&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 替换字符串,从某个位置开始替换某个长度</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span>(<span class=\"string\">&#x27;我爱编程helloworld&#x27;</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"string\">&#x27;超级热爱&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- toLowerCase小写</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">LOWER</span>(<span class=\"string\">&#x27;KuangShen&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- toUpperCase大写</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">UPPER</span>(<span class=\"string\">&#x27;KuangShen&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 从左边截取</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">LEFT</span>(<span class=\"string\">&#x27;hello,world&#x27;</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 从右边截取</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">RIGHT</span>(<span class=\"string\">&#x27;hello,world&#x27;</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 替换字符串</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  REPLACE(<span class=\"string\">&#x27;狂神说坚持就能成功&#x27;</span>, <span class=\"string\">&#x27;坚持&#x27;</span>, <span class=\"string\">&#x27;努力&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 截取字符串,开始和长度</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  SUBSTR(<span class=\"string\">&#x27;狂神说坚持就能成功&#x27;</span>, <span class=\"number\">4</span>, <span class=\"number\">6</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 反转</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  REVERSE(<span class=\"string\">&#x27;狂神说坚持就能成功&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询姓周的同学,改成邹 (采用子查询)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentname <span class=\"operator\">=</span>(</span><br><span class=\"line\">    <span class=\"keyword\">SELECT</span></span><br><span class=\"line\">      REPLACE(studentname, <span class=\"string\">&#x27;周&#x27;</span>, <span class=\"string\">&#x27;邹&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">WHERE</span></span><br><span class=\"line\">      studentname <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;周%&#x27;</span></span><br><span class=\"line\">  );</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"时间函数\">时间函数</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 获取当前日期(两种一样)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">CURRENT_DATE</span>();</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  CRUDATE();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 获取当前日期和时间(三种一样)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  NOW();</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">LOCALTIME</span>();</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  SYSDATE();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 获取年月日,时分秒</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">YEAR</span>(NOW());</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">MONTH</span>(NOW());</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">DAY</span>(NOW());</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">HOUR</span>(NOW());</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">MINUTE</span>(NOW());</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">SECOND</span>(NOW());</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"系统信息\">系统信息</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 版本</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  VERSION();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 用户(MySQL的用户)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"keyword\">USER</span>();</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"built_in\">SYSTEM_USER</span>();</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"分组\">分组</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  查询 不同课程 的平均分,最高分,最低分 (根据不同的课程进行分组)</span></span><br><span class=\"line\"><span class=\"comment\">  分组后面的筛选,使用 `HAVING`</span></span><br><span class=\"line\"><span class=\"comment\">  having是从前面筛选的字段再筛选，而where是从数据表中的字段直接进行的筛选的</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  <span class=\"built_in\">AVG</span>(studentresult) <span class=\"keyword\">AS</span> `平 均 分`,</span><br><span class=\"line\">  <span class=\"built_in\">MAX</span>(StudentResult) <span class=\"keyword\">AS</span> `最 高 分`,</span><br><span class=\"line\">  <span class=\"built_in\">MIN</span>(StudentResult) <span class=\"keyword\">AS</span> `最 低 分`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span> <span class=\"keyword\">AS</span> r</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` <span class=\"keyword\">AS</span> s <span class=\"keyword\">ON</span> r.subjectno <span class=\"operator\">=</span> s.subjectno</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  r.subjectno</span><br><span class=\"line\"><span class=\"keyword\">HAVING</span></span><br><span class=\"line\">  `平 均 分` <span class=\"operator\">&gt;</span> <span class=\"number\">60</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"MD5-加密\">MD5 加密</h3>\n<blockquote>\n<p>Message-Digest Algorithm 5（信息-摘要算法 5），用于确保信息传输完整一致。是计算机广泛使用的杂凑算法（摘要算法、哈希算法）.</p>\n</blockquote>\n<ul>\n<li>\n<p>初始化</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 新建表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `testmd5` (</span><br><span class=\"line\">  `id` <span class=\"type\">INT</span>(<span class=\"number\">4</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  `name` <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  `pwd` <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> INNODB <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 插入数据(明文密码)</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  testmd5</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span></span><br><span class=\"line\">  (<span class=\"number\">1</span>, <span class=\"string\">&#x27;kuangshen&#x27;</span>, <span class=\"string\">&#x27;123456&#x27;</span>),(<span class=\"number\">2</span>, <span class=\"string\">&#x27;qinjiang&#x27;</span>, <span class=\"string\">&#x27;456789&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>加密</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 加密全列</span></span><br><span class=\"line\"><span class=\"keyword\">update</span></span><br><span class=\"line\">  testmd5</span><br><span class=\"line\"><span class=\"keyword\">set</span></span><br><span class=\"line\">  pwd <span class=\"operator\">=</span> md5(pwd);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 插入时加密</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  testmd5</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span>(<span class=\"number\">4</span>, <span class=\"string\">&#x27;kuangshen3&#x27;</span>, md5(<span class=\"string\">&#x27;123456&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 检查账号密码是否对应</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  testmd5</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  `name` <span class=\"operator\">=</span> <span class=\"string\">&#x27;kuangshen&#x27;</span></span><br><span class=\"line\">  <span class=\"keyword\">AND</span> `pwd` <span class=\"operator\">=</span> MD5(<span class=\"string\">&#x27;123456&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"事务\">事务</h2>\n<ul>\n<li>一组遵循 ACID 原则的 SQL 指令</li>\n</ul>\n<h3 id=\"ACID-原则\">ACID 原则</h3>\n<ul>\n<li>\n<p>原子性(Atomic)</p>\n<ul>\n<li>同一批次的 SQL 指令,要么全通过,要么全取消,不存在中间态</li>\n</ul>\n</li>\n<li>\n<p>一致性(Consist)</p>\n<ul>\n<li>事务前后数据完整性一致</li>\n</ul>\n</li>\n<li>\n<p>隔离性(Isolated)</p>\n<ul>\n<li>\n<p>多个用户并发执行多事务,会使其<code>串行化</code>执行,同一时间只能有一个请求作用于同一数据</p>\n</li>\n<li>\n<p>有可能隔离失败导致一些问题(如下)</p>\n</li>\n</ul>\n<hr>\n<ol>\n<li>\n<p>脏读 : 一个事务读取了另一个没有提交的事务</p>\n</li>\n<li>\n<p>不可重复读 : 在同一个事务内，再次读取表中的数据，表发生了改变</p>\n</li>\n<li>\n<p>幻读(虚读) : 在一个事务内，读取到了别人插入的数据，导致前后读出来的结果不一致</p>\n</li>\n</ol>\n</li>\n<li>\n<p>持久性(Durable)</p>\n<ul>\n<li>事务一旦提交成功,便不会被外界因素影响而导致回滚.</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"基本语法\">基本语法</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  MySQL中默认是自动提交,使用事务时应先关闭自动提交</span></span><br><span class=\"line\"><span class=\"comment\">  关闭自动提交模式(0),开启(1)</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span> autocommit <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 开始一个事务,标记事务的起始点</span></span><br><span class=\"line\"><span class=\"keyword\">START</span> TRANSACTION;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 此处写业务代码</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  COMMIT; -- 提交一个事务给数据库</span></span><br><span class=\"line\"><span class=\"comment\">  ROLLBACK; -- 将事务回滚,数据回到本次事务的初始状态</span></span><br><span class=\"line\"><span class=\"comment\">  保存点(了解,不常用)</span></span><br><span class=\"line\"><span class=\"comment\">    SAVEPOINT `保 存 点 名 称`; -- 设置一个事务保存点</span></span><br><span class=\"line\"><span class=\"comment\">    ROLLBACK TO SAVEPOINT `保 存 点 名 称`; -- 回滚到保存点</span></span><br><span class=\"line\"><span class=\"comment\">    RELEASE SAVEPOINT `保 存 点 名 称`; -- 删除保存点</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">COMMIT</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 还原MySQL数据库的自动提交</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span> autocommit <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>逻辑图</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVs0E0.png\" alt=\"20210316182445\" />\n</li>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE `shop` <span class=\"type\">CHARACTER</span> <span class=\"keyword\">SET</span> utf8 <span class=\"keyword\">COLLATE</span> utf8_general_ci;</span><br><span class=\"line\"></span><br><span class=\"line\">USE `shop`;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `account` (</span><br><span class=\"line\">  `id` <span class=\"type\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  `name` <span class=\"type\">VARCHAR</span>(<span class=\"number\">32</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  `cash` <span class=\"type\">DECIMAL</span>(<span class=\"number\">9</span>, <span class=\"number\">2</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> INNODB <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  account (`name`, `cash`)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;A&#x27;</span>, <span class=\"number\">2000.00</span>),(<span class=\"string\">&#x27;B&#x27;</span>, <span class=\"number\">10000.00</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 开始</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span></span><br><span class=\"line\">  autocommit <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">START</span> TRANSACTION;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span></span><br><span class=\"line\">  account</span><br><span class=\"line\"><span class=\"keyword\">SET</span></span><br><span class=\"line\">  cash <span class=\"operator\">=</span> cash <span class=\"number\">-500</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  `name` <span class=\"operator\">=</span> <span class=\"string\">&#x27;A&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span></span><br><span class=\"line\">  account</span><br><span class=\"line\"><span class=\"keyword\">SET</span></span><br><span class=\"line\">  cash <span class=\"operator\">=</span> cash <span class=\"operator\">+</span> <span class=\"number\">500</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  `name` <span class=\"operator\">=</span> <span class=\"string\">&#x27;B&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">COMMIT</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SET</span></span><br><span class=\"line\">  autocommit <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"索引\">索引</h2>\n<blockquote>\n<p>索引是帮助 MySQL 高校获取数据的数据结构.</p>\n</blockquote>\n<ul>\n<li>提高查询,分组,全文搜索速度</li>\n<li>表间参照&amp;数据唯一性功能.</li>\n</ul>\n<h3 id=\"分类\">分类</h3>\n<ol>\n<li>\n<p>主键索引 (Primary Key)</p>\n<ul>\n<li>最常见,唯一性(一个表只能有一个)</li>\n</ul>\n</li>\n<li>\n<p>唯一索引 (Unique)</p>\n<ul>\n<li>保证某列中记录值唯一,同一表可以有多个唯一索引</li>\n</ul>\n</li>\n<li>\n<p>常规索引 (Key/Index)</p>\n<ul>\n<li>默认的索引类型</li>\n</ul>\n</li>\n<li>\n<p>全文索引 (FullText)</p>\n<ul>\n<li>MyISAM/InnoDB 引擎下才能使用,对字段类型也有要求,适用于大型数据</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3 id=\"添加-删除索引\">添加&amp;删除索引</h3>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"code\"><pre><span class=\"line\">方法一：创建表时</span><br><span class=\"line\">　<span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名 (</span><br><span class=\"line\">    字段名<span class=\"number\">1</span> 数据类型 [完整性约束条件…],</span><br><span class=\"line\">    字段名<span class=\"number\">2</span> 数据类型 [完整性约束条件…],</span><br><span class=\"line\">    索引类型 [索引名] (字段名[(长度)] [<span class=\"keyword\">ASC</span> |<span class=\"keyword\">DESC</span>])</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">方法二：<span class=\"keyword\">CREATE</span>在已存在的表上创建索引</span><br><span class=\"line\">  <span class=\"keyword\">CREATE</span> 索引类型 索引名</span><br><span class=\"line\">  <span class=\"keyword\">ON</span> 表名 (字段名[(长度)] [<span class=\"keyword\">ASC</span> |<span class=\"keyword\">DESC</span>]) ;</span><br><span class=\"line\"></span><br><span class=\"line\">方法三：<span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span>在已存在的表上创建索引</span><br><span class=\"line\">  <span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名</span><br><span class=\"line\">    <span class=\"keyword\">ADD</span> 索引类型 索引名 (字段名[(长度)] [<span class=\"keyword\">ASC</span> |<span class=\"keyword\">DESC</span>]) ;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 例子:增加全文索引</span></span><br><span class=\"line\">  <span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> `school`.`student`</span><br><span class=\"line\">    <span class=\"keyword\">ADD</span> FULLTEXT <span class=\"keyword\">INDEX</span> `studentname` (`studentName`);</span><br><span class=\"line\"></span><br><span class=\"line\">#删除索引：<span class=\"keyword\">DROP</span> <span class=\"keyword\">INDEX</span> 索引名 <span class=\"keyword\">ON</span> 表名字;</span><br><span class=\"line\">#删除主键索引: <span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">DROP</span> <span class=\"keyword\">PRIMARY KEY</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">#显示索引信息: <span class=\"keyword\">SHOW</span> <span class=\"keyword\">INDEX</span> <span class=\"keyword\">FROM</span> 表名;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"EXPLAIN\">EXPLAIN</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  EXPLAIN : 分析SQL语句执行性能</span></span><br><span class=\"line\"><span class=\"comment\">  常规索引</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">EXPLAIN</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> studentno <span class=\"operator\">=</span> <span class=\"string\">&#x27;1000&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  使用全文索引</span></span><br><span class=\"line\"><span class=\"comment\">  全文搜索通过 MATCH() 函数完成。</span></span><br><span class=\"line\"><span class=\"comment\">  搜索字符串作为 against() 的参数被给定。对于表中的每个记录行，MATCH() 返回一个相关性值。即搜索字符串与记录行在 MATCH() 列表中指定的列的文本之间的相似性尺度。</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">EXPLAIN</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> <span class=\"keyword\">MATCH</span>(studentname) AGAINST(<span class=\"string\">&#x27;刘&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"性能分析\">性能分析</h3>\n<ul>\n<li>\n<p>建表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `app_user`</span><br><span class=\"line\">(</span><br><span class=\"line\">  `id`          <span class=\"type\">bigint</span>(<span class=\"number\">20</span>) unsigned <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  `name`        <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)              <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;&#x27;</span> COMMENT <span class=\"string\">&#x27;用户昵称&#x27;</span>,</span><br><span class=\"line\">  `email`       <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)         <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;用户邮箱&#x27;</span>,</span><br><span class=\"line\">  `phone`       <span class=\"type\">varchar</span>(<span class=\"number\">20</span>)              <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;&#x27;</span> COMMENT <span class=\"string\">&#x27;手机号&#x27;</span>,</span><br><span class=\"line\">  `gender`      tinyint(<span class=\"number\">4</span>) unsigned      <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;0&#x27;</span> COMMENT <span class=\"string\">&#x27;性别（0:男；1：女）&#x27;</span>,</span><br><span class=\"line\">  `password`    <span class=\"type\">varchar</span>(<span class=\"number\">100</span>)        <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;密码&#x27;</span>,</span><br><span class=\"line\">  `age`         tinyint(<span class=\"number\">4</span>)               <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;0&#x27;</span> COMMENT <span class=\"string\">&#x27;年龄&#x27;</span>,</span><br><span class=\"line\">  `create_time` datetime                 <span class=\"keyword\">DEFAULT</span> <span class=\"built_in\">CURRENT_TIMESTAMP</span>,</span><br><span class=\"line\">  `update_time` <span class=\"type\">timestamp</span>           <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"built_in\">CURRENT_TIMESTAMP</span> <span class=\"keyword\">ON</span> <span class=\"keyword\">UPDATE</span> <span class=\"built_in\">CURRENT_TIMESTAMP</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> InnoDB</span><br><span class=\"line\">  <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8mb4 COMMENT <span class=\"operator\">=</span><span class=\"string\">&#x27;app用户表&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>生成随机数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">DELIMITER $$</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">FUNCTION</span> mock_data()</span><br><span class=\"line\">  <span class=\"keyword\">RETURNS</span> <span class=\"type\">INT</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">  <span class=\"keyword\">DECLARE</span> num <span class=\"type\">INT</span> <span class=\"keyword\">DEFAULT</span> <span class=\"number\">1000000</span>;</span><br><span class=\"line\">  <span class=\"keyword\">DECLARE</span> i <span class=\"type\">INT</span> <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">  WHILE i <span class=\"operator\">&lt;</span> num</span><br><span class=\"line\">    DO</span><br><span class=\"line\">      <span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> app_user(`name`, `email`, `phone`, `gender`, `password`, `age`)</span><br><span class=\"line\">      <span class=\"keyword\">VALUES</span> (CONCAT(<span class=\"string\">&#x27;用户&#x27;</span>, i), <span class=\"string\">&#x27;24736743@qq.com&#x27;</span>, CONCAT(<span class=\"string\">&#x27;18&#x27;</span>, <span class=\"built_in\">FLOOR</span>(RAND() <span class=\"operator\">*</span> (<span class=\"number\">999999999</span> <span class=\"operator\">-</span> <span class=\"number\">100000000</span>) <span class=\"operator\">+</span> <span class=\"number\">100000000</span>)),</span><br><span class=\"line\">              <span class=\"built_in\">FLOOR</span>(RAND() <span class=\"operator\">*</span> <span class=\"number\">2</span>), UUID(), <span class=\"built_in\">FLOOR</span>(RAND() <span class=\"operator\">*</span> <span class=\"number\">100</span>));</span><br><span class=\"line\">      <span class=\"keyword\">SET</span> i <span class=\"operator\">=</span> i <span class=\"operator\">+</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">END</span> WHILE;</span><br><span class=\"line\">  <span class=\"keyword\">RETURN</span> i;</span><br><span class=\"line\"><span class=\"keyword\">END</span>;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> mock_data();</span><br></pre></td></tr></table></figure>\n<ul>\n<li>上面的有可能无效,可以用下面的</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;schema&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;study&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;table&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;app_user&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;mockStartIndex&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;mockCount&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">100000</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;mockValueReference&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;http://mockjs.com/examples.html#DPD&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;mock&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bigint&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;$mockIndex&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;varchar&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;email&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;varchar&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;phone&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;varchar&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gender&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;tinyint&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@integer(0,1)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;varchar&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@string(&#x27;lower&#x27;,5)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;age&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;tinyint&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@integer(0,100)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;create_time&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;datetime&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@now(&#x27;yyyy-MM-dd HH:mm:ss&#x27;)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;update_time&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timestamp&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;@now(&#x27;yyyy-MM-dd HH:mm:ss&#x27;)&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>性能测试</p>\n<ul>\n<li>\n<p>无索引下 select 耗时 &amp; 搜索行数</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"code\"><pre><span class=\"line\">study&gt; <span class=\"keyword\">SELECT</span></span><br><span class=\"line\">        *</span><br><span class=\"line\">      <span class=\"keyword\">FROM</span></span><br><span class=\"line\">        app_user</span><br><span class=\"line\">      <span class=\"keyword\">WHERE</span></span><br><span class=\"line\">          <span class=\"type\">name</span> = <span class=\"string\">&#x27;wkjvo&#x27;</span></span><br><span class=\"line\">[<span class=\"number\">2021</span><span class=\"number\">-03</span><span class=\"number\">-17</span> <span class=\"number\">12</span>:<span class=\"number\">06</span>:<span class=\"number\">29</span>] 在 <span class=\"number\">202</span> ms (execution: <span class=\"number\">72</span> ms, fetching: <span class=\"number\">130</span> ms) 中从 <span class=\"number\">1</span> 开始检索到<span class=\"number\">1</span> 行</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">rows</span>: <span class=\"number\">99946</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>添加索引</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> INDEX idx_app_user_name <span class=\"keyword\">ON</span> app_user(name);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>有索引的 select</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"code\"><pre><span class=\"line\">study&gt; <span class=\"keyword\">SELECT</span></span><br><span class=\"line\">        *</span><br><span class=\"line\">      <span class=\"keyword\">FROM</span></span><br><span class=\"line\">        app_user</span><br><span class=\"line\">      <span class=\"keyword\">WHERE</span></span><br><span class=\"line\">          <span class=\"type\">name</span> = <span class=\"string\">&#x27;wkjvo&#x27;</span></span><br><span class=\"line\">[<span class=\"number\">2021</span><span class=\"number\">-03</span><span class=\"number\">-17</span> <span class=\"number\">12</span>:<span class=\"number\">12</span>:<span class=\"number\">11</span>] 在 <span class=\"number\">100</span> ms (execution: <span class=\"number\">6</span> ms, fetching: <span class=\"number\">94</span> ms) 中从 <span class=\"number\">1</span> 开始检索到<span class=\"number\">1</span> 行</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">rows</span>: <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"索引规矩\">索引规矩</h3>\n<ul>\n<li>\n<p>无索引时是暴力遍历搜索,数据表越大越慢;有索引时是对特定数据结构索引,搜索速度快,但是在增删改时有额外性能开销.</p>\n<ol>\n<li>不要对<code>经常变动</code>的数据加索引</li>\n<li><code>小数据量</code>的表建议不要加索引</li>\n<li>一般只在查找条件的字段索引</li>\n</ol>\n</li>\n<li>\n<p>索引数据结构</p>\n<ol>\n<li>hash 单个索引快,范围索引慢</li>\n<li>Btree</li>\n</ol>\n</li>\n<li>\n<p>不同的数据库引擎所支持的索引类型以及索引数据结构不同</p>\n<ul>\n<li>InnoDB 支持事务，支持行级别锁定，支持 B-tree、Full-text 等索引，不支持 Hash 索引</li>\n<li>MyISAM 不支持事务，支持表级别锁定，支持 B-tree、Full-text 等索引，不支持 Hash 索引</li>\n</ul>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记",
                "Java",
                "MySQL"
            ]
        },
        {
            "id": "https://weidows.github.io/post/lang/Java/SQL/2/",
            "url": "https://weidows.github.io/post/lang/Java/SQL/2/",
            "title": "🚀进修MySQL~(贰)",
            "date_published": "2021-03-10T04:14:47.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2023-04-20 18:16:10\n * @FilePath: \\Blog-private\\source\\_posts\\Java\\SQL\\2.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#dql-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2\">DQL-数据查询</a>\n<ul>\n<li><a href=\"#%E6%80%BB%E8%A7%88\">总览</a></li>\n<li><a href=\"#select\">SELECT</a></li>\n<li><a href=\"#%E5%8E%BB%E9%87%8D-distinct\">去重 DISTINCT</a></li>\n<li><a href=\"#%E5%AF%B9%E5%88%97%E4%BD%BF%E7%94%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F\">对列使用表达式</a></li>\n<li><a href=\"#where\">where</a>\n<ul>\n<li><a href=\"#%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C%E7%AC%A6\">逻辑操作符</a></li>\n<li><a href=\"#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2\">模糊查询</a></li>\n<li><a href=\"#%E9%80%9A%E9%85%8D%E7%AC%A6\">通配符</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2\">联表查询</a></li>\n<li><a href=\"#%E8%87%AA%E8%BF%9E%E6%8E%A5\">自连接</a></li>\n<li><a href=\"#%E6%8E%92%E5%BA%8F\">排序</a></li>\n<li><a href=\"#%E5%88%86%E9%A1%B5\">分页</a></li>\n<li><a href=\"#%E5%AD%90%E6%9F%A5%E8%AF%A2\">子查询</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"DQL-数据查询\">DQL-数据查询</h2>\n<h3 id=\"总览\">总览</h3>\n<ul>\n<li>\n<p>语句顺序不能变</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVscAz.png\" alt=\"20210316194554\" />\n</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> [<span class=\"keyword\">ALL</span> <span class=\"operator\">|</span> <span class=\"keyword\">DISTINCT</span>]</span><br><span class=\"line\">&#123;<span class=\"operator\">*</span> <span class=\"operator\">|</span> table.<span class=\"operator\">*</span> <span class=\"operator\">|</span> [table.field1[<span class=\"keyword\">as</span> alias1][,table.field2[<span class=\"keyword\">as</span> alias2]][,...]]&#125;</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> table_name [<span class=\"keyword\">as</span> table_alias]</span><br><span class=\"line\">  [<span class=\"keyword\">left</span> <span class=\"operator\">|</span> <span class=\"keyword\">right</span> <span class=\"operator\">|</span> <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> table_name2]  <span class=\"comment\">-- 联合查询</span></span><br><span class=\"line\">  [<span class=\"keyword\">WHERE</span> ...]  <span class=\"comment\">-- 指定结果需满足的条件</span></span><br><span class=\"line\">  [<span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> ...]  <span class=\"comment\">-- 指定结果按照哪几个字段来分组</span></span><br><span class=\"line\">  [<span class=\"keyword\">HAVING</span>]  <span class=\"comment\">-- 过滤分组的记录必须满足的次要条件</span></span><br><span class=\"line\">  [<span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> ...]  <span class=\"comment\">-- 指定查询记录按一个或多个条件排序</span></span><br><span class=\"line\">  [LIMIT &#123;[<span class=\"keyword\">offset</span>,]row_count <span class=\"operator\">|</span> row_countOFFSET <span class=\"keyword\">offset</span>&#125;]; <span class=\"comment\">-- 指定查询的记录从哪条至哪条</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"SELECT\">SELECT</h3>\n<blockquote>\n<p>SELECT 列名 [AS 显示列名] FROM 表名 [AS 显示表名];</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查询所有学生信息</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询指定列</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentid,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 这里是为列取别名(as关键词可以省略)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentid <span class=\"keyword\">AS</span> `学 号`,</span><br><span class=\"line\">  studentname `姓 名`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- as也可以为表取别名(并不会显示出来)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentid <span class=\"keyword\">AS</span> `学 号`,</span><br><span class=\"line\">  studentname <span class=\"keyword\">AS</span> `姓 名`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student <span class=\"keyword\">AS</span> `表`;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 通过CONCAT()函数拼接字符串</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  CONCAT(<span class=\"string\">&#x27;姓名: &#x27;</span>, studentname) <span class=\"keyword\">AS</span> `拼接后的名字`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br></pre></td></tr></table></figure>\n<h3 id=\"去重-DISTINCT\">去重 DISTINCT</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> student</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"对列使用表达式\">对列使用表达式</h3>\n<ul>\n<li>数据库中的表达式 : 一般由文本值 , 列值 , NULL , 函数和操作符等组成</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查询自增步长</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  @<span class=\"variable\">@auto_increment_increment</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询版本号</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  VERSION();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 表达式</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  <span class=\"number\">100</span> <span class=\"operator\">*</span> <span class=\"number\">3</span> <span class=\"number\">-1</span> <span class=\"keyword\">AS</span> `结果`;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 学员考试成绩集体提分一分查看</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentid,</span><br><span class=\"line\">  gradeid <span class=\"operator\">+</span> <span class=\"number\">1</span> <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;升级后&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"where\">where</h3>\n<blockquote>\n<p>表达式结果必须是 <code>布尔值</code></p>\n</blockquote>\n<h4 id=\"逻辑操作符\">逻辑操作符</h4>\n<ul>\n<li>AND &amp;&amp;</li>\n<li>OR ||</li>\n<li>NOT !</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 满足条件的查询</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> Studentno,StudentResult <span class=\"keyword\">FROM</span> <span class=\"keyword\">result</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询考试成绩在95-100之间的</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> Studentno,StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"keyword\">result</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> StudentResult<span class=\"operator\">&gt;=</span><span class=\"number\">95</span> <span class=\"operator\">&amp;&amp;</span> StudentResult<span class=\"operator\">&lt;=</span><span class=\"number\">100</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 模糊查询</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> Studentno,StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"keyword\">result</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> StudentResult <span class=\"keyword\">BETWEEN</span> <span class=\"number\">95</span> <span class=\"keyword\">AND</span> <span class=\"number\">100</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 除了1000号同学,要其他同学的成绩</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> studentno,studentresult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"keyword\">result</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> studentno<span class=\"operator\">!=</span><span class=\"number\">1000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 使用NOT</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> studentno,studentresult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"keyword\">result</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> <span class=\"operator\">!</span> studentno<span class=\"operator\">=</span><span class=\"number\">1000</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h4 id=\"模糊查询\">模糊查询</h4>\n  <img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVsS0Y.png\" alt=\"20210312120236\" />\n<ul>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- LIKE like结合使用的通配符:  % (代表0到任意个字符)   _ (一个字符)</span></span><br><span class=\"line\"><span class=\"comment\">-- =============================================</span></span><br><span class=\"line\"><span class=\"comment\">-- 查询姓刘的同学的学号及姓名</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentname <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;刘%&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询姓刘的同学,后面只有一个字的</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentname <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;刘_&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询姓刘的同学,后面只有两个字的</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentname <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;刘__&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询姓名中含有 &#x27;嘉&#x27; 字的</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentname <span class=\"keyword\">LIKE</span> <span class=\"string\">&#x27;%嘉%&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 查询姓名中含有特殊字符的需要使用转义符号 &#x27;\\&#x27;</span></span><br><span class=\"line\">  <span class=\"comment\">-- 自定义转义符关键字: ESCAPE &#x27;:&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- IN</span></span><br><span class=\"line\"><span class=\"comment\">-- =============================================</span></span><br><span class=\"line\"><span class=\"comment\">-- 查询学号为1000,1001,1002的学生姓名</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  studentno <span class=\"keyword\">IN</span> (<span class=\"number\">1000</span>, <span class=\"number\">1001</span>, <span class=\"number\">1002</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询地址在北京,南京,河南洛阳的学生</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  address</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  address <span class=\"keyword\">IN</span> (<span class=\"string\">&#x27;北京&#x27;</span>, <span class=\"string\">&#x27;南京&#x27;</span>, <span class=\"string\">&#x27;河南洛阳&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 对NULL判断 不能直接写=NULL, 用 is null</span></span><br><span class=\"line\"><span class=\"comment\">-- =============================================</span></span><br><span class=\"line\"><span class=\"comment\">-- 查询出生日期没有填写的同学</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  BornDate <span class=\"keyword\">IS</span> <span class=\"keyword\">NULL</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询出生日期填写的同学</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  BornDate <span class=\"keyword\">IS</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询没有写家庭住址的同学</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  Address <span class=\"operator\">=</span> <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">  <span class=\"keyword\">OR</span> Address <span class=\"keyword\">IS</span> <span class=\"keyword\">NULL</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n</ul>\n<h4 id=\"通配符\">通配符</h4>\n<p>比如有个表 user,有一个 <code>name</code> 数据为<code>张三</code>,需要通过’张’字模糊查询出来</p>\n<ul>\n<li>\n<p>这样是查不出来的,这是全字匹配,换为’张三’可以查出来</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> <span class=\"keyword\">user</span></span><br><span class=\"line\"><span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;张&#x27;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>需要改成这样: 这样是作为通配符,name 中含有’张’字的都会被匹配出来.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> <span class=\"keyword\">user</span></span><br><span class=\"line\"><span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;%张%&#x27;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"联表查询\">联表查询</h3>\n<ul>\n<li>\n<p>七种 SQL joins</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVslkM.png\" alt=\"20210313224946\" />\n<ul>\n<li>\n<p>共有四种操作符 <code>inner,full outer,left,right</code></p>\n</li>\n<li>\n<p>ON 后面跟的是 A 表与 B 表数据交叉列,是 join 成立的条件.</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- student和result表中都有studentno,如不指定select那个表中的,会报错&quot;不明确&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 右连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">RIGHT</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 等值连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s,</span><br><span class=\"line\">  <span class=\"keyword\">result</span> r</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 左连接 (查询了所有同学,不考试的也会查出来)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查一下缺考的同学(左连接应用场景)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  StudentResult <span class=\"keyword\">IS</span> <span class=\"keyword\">NULL</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询参加了考试的同学信息(学号,学生姓名,科目名,分数)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  `student` s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `<span class=\"keyword\">result</span>` r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> sub.subjectno <span class=\"operator\">=</span> r.subjectno</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"自连接\">自连接</h3>\n<ul>\n<li>\n<p>把一张表视作两张表,然后把<code>同一列</code>的不同数据筛选开<code>作为两列</code>输出</p>\n</li>\n<li>\n<p>初始化数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建一个表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `category` (</span><br><span class=\"line\">  `categoryid` <span class=\"type\">INT</span>(<span class=\"number\">10</span>) UNSIGNED <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT COMMENT <span class=\"string\">&#x27;主题id&#x27;</span>,</span><br><span class=\"line\">  `pid` <span class=\"type\">INT</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;父id&#x27;</span>,</span><br><span class=\"line\">  `categoryName` <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;主题名字&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`categoryid`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> INNODB AUTO_INCREMENT <span class=\"operator\">=</span> <span class=\"number\">9</span> <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 插入数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  `category` (`categoryid`, `pid`, `categoryName`)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span>(<span class=\"string\">&#x27;2&#x27;</span>, <span class=\"string\">&#x27;1&#x27;</span>, <span class=\"string\">&#x27;信息技术&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;3&#x27;</span>, <span class=\"string\">&#x27;1&#x27;</span>, <span class=\"string\">&#x27;软件开发&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;4&#x27;</span>, <span class=\"string\">&#x27;3&#x27;</span>, <span class=\"string\">&#x27;数据库&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;5&#x27;</span>, <span class=\"string\">&#x27;1&#x27;</span>, <span class=\"string\">&#x27;美术设计&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;6&#x27;</span>, <span class=\"string\">&#x27;3&#x27;</span>, <span class=\"string\">&#x27;web开发&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;7&#x27;</span>, <span class=\"string\">&#x27;5&#x27;</span>, <span class=\"string\">&#x27;ps技术&#x27;</span>),</span><br><span class=\"line\">  (<span class=\"string\">&#x27;8&#x27;</span>, <span class=\"string\">&#x27;2&#x27;</span>, <span class=\"string\">&#x27;办公信息&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>select 例子</p>\n<ul>\n<li>把同一张表中 categoryName 这一列 select 出父栏目和子栏目两列数据输出</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  a.categoryName <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;父栏目&#x27;</span>,</span><br><span class=\"line\">  b.categoryName <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;子栏目&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  category <span class=\"keyword\">AS</span> a,</span><br><span class=\"line\">  category <span class=\"keyword\">AS</span> b</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  a.`categoryid` <span class=\"operator\">=</span> b.`pid`;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>输出</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVsORR.png\" alt=\"20210315112316\" />\n</li>\n<li>\n<p>其他样例</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 思考题:查询参加了考试的同学信息(学号,学生姓名,科目名,分数)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> sub.subjectno <span class=\"operator\">=</span> r.subjectno;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询学员及所属的年级(学号,学生姓名,年级名)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno <span class=\"keyword\">AS</span> 学 号,</span><br><span class=\"line\">  studentname <span class=\"keyword\">AS</span> 学 生 姓 名,</span><br><span class=\"line\">  gradename <span class=\"keyword\">AS</span> 年 级 名 称</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> grade g <span class=\"keyword\">ON</span> s.`GradeId` <span class=\"operator\">=</span> g.`GradeID`;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询科目及所属的年级(科目名称,年级名称)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  subjectname <span class=\"keyword\">AS</span> 科 目 名 称,</span><br><span class=\"line\">  gradename <span class=\"keyword\">AS</span> 年 级 名 称</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  SUBJECT sub</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> grade g <span class=\"keyword\">ON</span> sub.gradeid <span class=\"operator\">=</span> g.gradeid;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询 数据库结构-1 的所有考试结果(学号 学生姓名 科目名称 成绩)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> r.subjectno <span class=\"operator\">=</span> sub.subjectno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;数据库结构-1&#x27;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"排序\">排序</h3>\n<blockquote>\n<p>ORDER BY 列名 ASC/DESC(升序/降)</p>\n</blockquote>\n<ul>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 按成绩降序排序</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> r.subjectno <span class=\"operator\">=</span> sub.subjectno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;数据库结构-1&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  StudentResult <span class=\"keyword\">DESC</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"分页\">分页</h3>\n<blockquote>\n<p>LIMIT n,m</p>\n</blockquote>\n<ul>\n<li>\n<p>含义</p>\n<ul>\n<li>\n<p>从第 n 条开始显示</p>\n</li>\n<li>\n<p>每页显示 m 条数</p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>比如需要每页显示 10 条数据,当前要看第一页</p>\n<ul>\n<li>\n<p><code>LIMIT 0,10</code></p>\n</li>\n<li>\n<p>第 n 页数据就是 <code>LIMIT 10(n-1),10</code></p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 每页显示5条数据</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> r.subjectno <span class=\"operator\">=</span> sub.subjectno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;数据库结构-1&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  StudentResult <span class=\"keyword\">DESC</span>,</span><br><span class=\"line\">  studentno</span><br><span class=\"line\">LIMIT</span><br><span class=\"line\">  <span class=\"number\">0</span>, <span class=\"number\">5</span> ;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询 JAVA第一学年 课程成绩前10名并且分数大于80的学生信息(学号,姓名,课程名,分数)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  s.studentno,</span><br><span class=\"line\">  studentname,</span><br><span class=\"line\">  subjectname,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  student s</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> <span class=\"keyword\">result</span> r <span class=\"keyword\">ON</span> r.studentno <span class=\"operator\">=</span> s.studentno</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> r.subjectno <span class=\"operator\">=</span> sub.subjectno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;JAVA第一学年&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  StudentResult <span class=\"keyword\">DESC</span></span><br><span class=\"line\">LIMIT</span><br><span class=\"line\">  <span class=\"number\">0</span>, <span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"子查询\">子查询</h3>\n<p>查询语句中 where 中嵌套查询语句</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查询 数据库结构-1 的考试结果(学号,科目编号,成绩),并且成绩降序排列</span></span><br><span class=\"line\"><span class=\"comment\">-- 方法一:使用连接查询</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  r.subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span> r</span><br><span class=\"line\">  <span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> `subject` sub <span class=\"keyword\">ON</span> r.`SubjectNo` <span class=\"operator\">=</span> sub.`SubjectNo`</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;数据库结构-1&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  studentresult <span class=\"keyword\">DESC</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 方法二:使用子查询(执行顺序:由里及外)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">  studentno,</span><br><span class=\"line\">  subjectno,</span><br><span class=\"line\">  StudentResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">  <span class=\"keyword\">result</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  subjectno <span class=\"operator\">=</span>(</span><br><span class=\"line\">    <span class=\"keyword\">SELECT</span></span><br><span class=\"line\">      subjectno</span><br><span class=\"line\">    <span class=\"keyword\">FROM</span></span><br><span class=\"line\">      `subject`</span><br><span class=\"line\">    <span class=\"keyword\">WHERE</span></span><br><span class=\"line\">      subjectname <span class=\"operator\">=</span> <span class=\"string\">&#x27;数据库结构-1&#x27;</span></span><br><span class=\"line\">  )</span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">  studentresult <span class=\"keyword\">DESC</span>;</span><br></pre></td></tr></table></figure>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记",
                "Java",
                "MySQL"
            ]
        },
        {
            "id": "https://weidows.github.io/post/lang/Java/SQL/1/",
            "url": "https://weidows.github.io/post/lang/Java/SQL/1/",
            "title": "🚀进修MySQL~(壹)",
            "date_published": "2021-03-03T15:58:07.000Z",
            "content_html": "<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2023-04-20 18:16:25\n * @FilePath: \\Blog-private\\source\\_posts\\Java\\SQL\\1.md\n * @Description:\n * @!: *********************************************************************\n-->\n<ul>\n<li><a href=\"#%E5%80%9F%E7%89%A9%E8%A1%A8\">借物表</a></li>\n<li><a href=\"#%E7%AE%80%E4%BB%8B\">简介</a></li>\n<li><a href=\"#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE\">安装&amp;配置</a>\n<ul>\n<li><a href=\"#%E5%AE%89%E8%A3%85\">安装</a></li>\n<li><a href=\"#%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81\">设置密码</a></li>\n<li><a href=\"#%E9%85%8D%E7%BD%AE\">配置</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%BF%9E%E6%8E%A5-mysql\">连接 MySQL</a>\n<ul>\n<li><a href=\"#vscode\">VScode</a></li>\n<li><a href=\"#sqlyog\">SQLyog</a></li>\n<li><a href=\"#dbeaver\">DBeaver</a></li>\n<li><a href=\"#%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C\">常用操作</a></li>\n</ul>\n</li>\n<li><a href=\"#ddl-%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89\">DDL-数据定义</a>\n<ul>\n<li><a href=\"#%E5%88%97%E7%B1%BB%E5%9E%8B\">列类型</a>\n<ul>\n<li><a href=\"#%E6%95%B0%E5%80%BC\">数值</a></li>\n<li><a href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2\">字符串</a></li>\n<li><a href=\"#%E6%97%A5%E6%9C%9F\">日期</a></li>\n<li><a href=\"#null-%E5%80%BC\">NULL 值</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7\">字段属性</a>\n<ul>\n<li><a href=\"#%E9%98%BF%E9%87%8C%E8%A7%84%E8%8C%83\">阿里规范</a></li>\n<li><a href=\"#%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83\">命名规范</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%95%B0%E6%8D%AE%E8%A1%A8\">数据表</a>\n<ul>\n<li><a href=\"#%E8%A1%A8%E7%B1%BB%E5%9E%8B\">表类型</a></li>\n<li><a href=\"#%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE\">存放位置</a></li>\n<li><a href=\"#%E7%BC%96%E7%A0%81\">编码</a></li>\n<li><a href=\"#%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E8%A1%A8\">操作数据表</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%96%B0%E5%BB%BA%E8%A1%A8-%E4%BE%8B%E5%AD%90\">新建表-例子</a></li>\n</ul>\n</li>\n<li><a href=\"#dml-%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C\">DML-数据操作</a>\n<ul>\n<li><a href=\"#%E5%A4%96%E9%94%AE\">外键</a></li>\n<li><a href=\"#%E6%B7%BB%E5%8A%A0-insert\">添加 INSERT</a></li>\n<li><a href=\"#%E4%BF%AE%E6%94%B9-update\">修改 UPDATE</a></li>\n<li><a href=\"#%E5%88%A0%E9%99%A4-deletetruncate\">删除 DELETE/TRUNCATE</a></li>\n</ul>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"借物表\">借物表</h2>\n<blockquote>\n<p><a href=\"https://csp1999.blog.csdn.net/article/details/109526825?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-6.control&amp;dist_request_id=&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-6.control\">狂神说 MySQL 学习笔记</a></p>\n</blockquote>\n<h2 id=\"简介\">简介</h2>\n<ul>\n<li>\n<p><code>DB</code> 数据库 ( DataBase )</p>\n<ul>\n<li>\n<p>关系型数据库 ( SQL ),比如 MySQL , Oracle , SQL Server , SQLite</p>\n</li>\n<li>\n<p>非关系型数据库 ( NOSQL ),比如 Redis , MongoDB</p>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"https://hellogithub.com/report/db-engines/\">数据库排行榜</a></p>\n</blockquote>\n</li>\n<li>\n<p><code>DBA</code> 数据库管理员（Database Administrator)</p>\n</li>\n<li>\n<p><code>DBMS</code> 数据库管理系统 ( DataBase Management System )</p>\n</li>\n<li>\n<p>操作分类,对应下文的大标题</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVmYDR.png\" alt=\"20210305104453\" />\n</li>\n</ul>\n<hr>\n<h2 id=\"安装-配置\">安装&amp;配置</h2>\n<h3 id=\"安装\">安装</h3>\n<ul>\n<li>\n<p>使用 scoop 安装</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">scoop install mysql</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>然后注册系统服务</p>\n<ul>\n<li>(这条信息在安装后会提示,需要<code>在管理员模式</code>的命令行下执行)</li>\n</ul>\n<figure class=\"highlight cmake\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysqld --<span class=\"keyword\">install</span> MySQL --defaults-<span class=\"keyword\">file</span>=<span class=\"string\">&quot;D:\\Game\\Scoop\\apps\\mysql\\current\\my.ini&quot;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>然后<code>重启电脑</code>,MySQL 服务会自己跑起来.</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"设置密码\">设置密码</h3>\n<ul>\n<li>\n<p>(也可以不设置密码,跳过.)</p>\n</li>\n<li>\n<p>在 <code>MySQL/bin/</code>下打开终端</p>\n</li>\n<li>\n<p>进入 MySQL 管理</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql –u root –<span class=\"selector-tag\">p</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>更新密码</p>\n<figure class=\"highlight n1ql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> mysql.<span class=\"keyword\">user</span> <span class=\"keyword\">set</span> authentication_string=<span class=\"keyword\">password</span>(<span class=\"string\">&#x27;2333&#x27;</span>) <span class=\"keyword\">where</span> <span class=\"keyword\">user</span>=<span class=\"string\">&#x27;root&#x27;</span><span class=\"keyword\">and</span> Host = <span class=\"string\">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>刷新权限</p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"code\"><pre><span class=\"line\">flush privileges<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>重启 MySQL 服务</p>\n<figure class=\"highlight dos\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">net</span> stop mysql</span><br><span class=\"line\"><span class=\"built_in\">net</span> <span class=\"built_in\">start</span> mysql</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"配置\">配置</h3>\n<blockquote>\n<p>找到 <code>MySQL/my.ini</code> ,这是 MySQL 配置文件</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/ray-xujianguo/p/3322455.html\">MySQL 配置文件-my.ini</a></p>\n</blockquote>\n<ul>\n<li>\n<p>我的配置</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#[client]和[mysql]都是客户端,[mysqld]是服务端</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[mysqld]</span></span><br><span class=\"line\"><span class=\"attr\">datadir</span>=D:/Game/Scoop/persist/mysql/data</span><br><span class=\"line\"><span class=\"attr\">character-set-server</span>=utf8</span><br><span class=\"line\"><span class=\"comment\">#port=3306</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[client]</span></span><br><span class=\"line\"><span class=\"attr\">user</span>=root</span><br><span class=\"line\"><span class=\"comment\">#port=3306</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[mysql]</span></span><br><span class=\"line\"><span class=\"attr\">default-character-set</span>=utf8</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n</blockquote>\n<h2 id=\"连接-MySQL\">连接 MySQL</h2>\n<h3 id=\"VScode\">VScode</h3>\n<ul>\n<li>\n<p>VScode 连接,需要安装 SQL 扩展(随便选一个)</p>\n</li>\n<li>\n<p>安装插件后只需要填写需要的信息,就可以连接上了.</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVm6hX.png\" alt=\"20210304094732\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"SQLyog\">SQLyog</h3>\n<ul>\n<li>\n<p>跟上面一样</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVmVHn.png\" alt=\"20210304233850\" />\n</li>\n</ul>\n<hr>\n<h3 id=\"DBeaver\">DBeaver</h3>\n<ul>\n<li>\n<p>个人在后续学习中发现的数据库管理工具,比我用过的(包括 MYSQL workbench,IDEA,VScode,SQLYog) 都要好用,优点:</p>\n<ul>\n<li>\n<p>社区版免费,没广告 (SQLYog 略带广告)</p>\n</li>\n<li>\n<p>中文界面,很友好,操作手感好</p>\n</li>\n<li>\n<p>有方便的 ER 图工具,这个<code>非常非常非常赞!!!</code></p>\n</li>\n<li>\n<p>…不再赘述,建议用这个,如下图:</p>\n</li>\n</ul>\n</li>\n</ul>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVt43h.png\" alt=\"20210405144227\" />\n<hr>\n<h3 id=\"常用操作\">常用操作</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> <span class=\"keyword\">user</span> <span class=\"keyword\">set</span> password<span class=\"operator\">=</span>password(<span class=\"string\">&#x27;123456&#x27;</span>)<span class=\"keyword\">where</span> <span class=\"keyword\">user</span><span class=\"operator\">=</span><span class=\"string\">&#x27;root&#x27;</span>; <span class=\"comment\">--修改密码</span></span><br><span class=\"line\">flush privileges; <span class=\"comment\">--刷新数据库权限</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">show</span> databases; <span class=\"comment\">--显示所有数据库</span></span><br><span class=\"line\">use dbname; <span class=\"comment\">--打开某个数据库</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> database [if <span class=\"keyword\">not</span> <span class=\"keyword\">exists</span>] 数据库名; <span class=\"comment\">--创建数据库</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> database [if <span class=\"keyword\">exists</span>] 数据库名; <span class=\"comment\">--删除数据库</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">show</span> tables; <span class=\"comment\">--显示数据库 mysql 中所有的表</span></span><br><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>; <span class=\"comment\">--显示表user 表的信息</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> database name; <span class=\"comment\">--创建数据库</span></span><br><span class=\"line\">use databasename; <span class=\"comment\">--选择数据库</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 单行注释</span></span><br><span class=\"line\"><span class=\"comment\">/* 多行注释 */</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>使用 SQLyog</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVmj4A.png\" alt=\"20210305111225\" />\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVmhCz.png\" alt=\"20210305111244\" />\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"DDL-数据定义\">DDL-数据定义</h2>\n<h3 id=\"列类型\">列类型</h3>\n<ul>\n<li>标红的为常用的.</li>\n</ul>\n<h4 id=\"数值\">数值</h4>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVmu05.png\" alt=\"20210305115939\" />\n<h4 id=\"字符串\">字符串</h4>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVmyh0.png\" alt=\"20210305115957\" />\n<h4 id=\"日期\">日期</h4>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVsoHr.png\" alt=\"20210305120011\" />\n<h4 id=\"NULL-值\">NULL 值</h4>\n<ul>\n<li>不要用 NULL 进行算术运算 , 结果仍为 NULL</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"字段属性\">字段属性</h3>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVsGgc.png\" alt=\"20210305155250\" />\n<ul>\n<li>\n<p>UnSigned</p>\n<ul>\n<li>无符号的</li>\n<li>声明该数据列不允许负数 .</li>\n</ul>\n</li>\n<li>\n<p>ZEROFILL</p>\n<ul>\n<li>0 填充的</li>\n<li>不足位数的用 0 来填充 , 如 int(3),5 则为 005</li>\n</ul>\n</li>\n<li>\n<p>Auto_InCrement</p>\n<ul>\n<li>自动增长的 , 每添加一条数据 , 自动在上一个记录数上加 1(默认)</li>\n<li>通常用于设置主键 , 且为整数类型</li>\n<li>可定义起始值和步长,当前表设置步长(AUTO_INCREMENT=100) : 只影响当前表</li>\n<li>SET @@auto_increment_increment=5 ; 影响所有使用自增的表(全局)</li>\n</ul>\n</li>\n<li>\n<p>NOT NULL</p>\n<ul>\n<li>默认为 NULL , 即没有插入该列的数值</li>\n<li>如果设置为 NOT NULL , 则该列必须有值</li>\n</ul>\n</li>\n<li>\n<p>DEFAULT</p>\n<ul>\n<li>默认的,用于设置默认值</li>\n<li>例如,性别字段,默认为&quot;男&quot; , 否则为 “女” ; 若无指定该列的值 , 则默认值为&quot;男&quot;的值</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"阿里规范\">阿里规范</h4>\n<ul>\n<li>\n<p>每个表必须有的五个字段属性</p>\n<ul>\n<li>id 主键</li>\n<li>version 乐观锁</li>\n<li>is_delete 伪删除</li>\n<li>gmt_create 创建时间</li>\n<li>gmt_update 修改时间</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"命名规范\">命名规范</h4>\n<ul>\n<li>\n<p>为什么使用<code>下划线命名法</code>而非<code>驼峰命名法</code>?</p>\n<p>早期的 Oracle 会把所有字段属性名变为大写: lastName -&gt; LASTNAME</p>\n<p>这样就看不出来了,所以用下划线命名法: last_name -&gt; LAST_NAME</p>\n<p>这个惯性一直延续至今,一些数据库/框架也发展处相应的使用规则,就成了一种规范</p>\n</li>\n</ul>\n<hr>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h3 id=\"数据表\">数据表</h3>\n<h4 id=\"表类型\">表类型</h4>\n<blockquote>\n<p><a href=\"https://www.cnblogs.com/EasonJim/p/7741164.html\">MySQL 常用的七种表类型（转）</a></p>\n</blockquote>\n<ul>\n<li>\n<p>有十多种类型了,但常用的就两种:<code>MyISAM</code> 与 <code>InnoDB</code>,对比:</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th>MyISAM</th>\n<th>InnoDB</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">事务处理</td>\n<td>不支持</td>\n<td>支持</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">数据行锁定</td>\n<td>不支持</td>\n<td>支持</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">外键约束</td>\n<td>不支持</td>\n<td>支持</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">全文索引</td>\n<td>支持</td>\n<td>不支持</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">空间占用</td>\n<td>较小</td>\n<td>较大(约两倍)</td>\n</tr>\n</tbody>\n</table>\n<hr>\n</li>\n<li>\n<p>适用场景:</p>\n<ul>\n<li>MyISAM : 节约空间及相应速度</li>\n<li>InnoDB : 安全性 , 事务处理及多用户操作数据表</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"存放位置\">存放位置</h4>\n<blockquote>\n<p>Mysql 安装目录/data/对应表名/</p>\n</blockquote>\n<hr>\n<h4 id=\"编码\">编码</h4>\n<ul>\n<li>\n<p>默认是 Latin1 编码,不支持中文</p>\n<ul>\n<li>可以在 MySQL 配置文件中修改默认编码</li>\n</ul>\n</li>\n<li>\n<p>也可以在创建表时指定编码为 <code>utf8</code></p>\n</li>\n</ul>\n<hr>\n<h4 id=\"操作数据表\">操作数据表</h4>\n<ul>\n<li>\n<p>修改表名</p>\n<ul>\n<li>ALTER TABLE 旧表名 RENAME AS 新表名</li>\n</ul>\n</li>\n<li>\n<p>删除数据表</p>\n<ul>\n<li>DROP TABLE [IF EXISTS] 表名</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>添加字段</p>\n<ul>\n<li>ALTER TABLE 表名 ADD 字段名 列属性[属性值]</li>\n</ul>\n</li>\n<li>\n<p>修改字段</p>\n<ul>\n<li>\n<p>ALTER TABLE 表名 MODIFY 字段名 列类型[属性值]</p>\n</li>\n<li>\n<p>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 列属性[属性值]</p>\n</li>\n</ul>\n</li>\n<li>\n<p>删除字段</p>\n<ul>\n<li>ALTER TABLE 表名 DROP 字段名</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"新建表-例子\">新建表-例子</h3>\n<ul>\n<li>\n<p>板栗</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">NOT</span> <span class=\"keyword\">EXISTS</span> `student`(</span><br><span class=\"line\">  <span class=\"comment\">-- CREATE TABLE [IF NOT EXISTS] `表名`(</span></span><br><span class=\"line\">  id <span class=\"type\">int</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">primary</span> key AUTO_INCREMENT comment <span class=\"string\">&#x27;primary key&#x27;</span>,</span><br><span class=\"line\">  create_time DATETIME COMMENT <span class=\"string\">&#x27;create time&#x27;</span>,</span><br><span class=\"line\">  update_time DATETIME COMMENT <span class=\"string\">&#x27;update time&#x27;</span>,</span><br><span class=\"line\">  <span class=\"comment\">-- `字段名` 列类型 [字段属性] [索引] [注释],</span></span><br><span class=\"line\">  <span class=\"comment\">-- `字段名` 列类型 [字段属性] [索引] [注释],</span></span><br><span class=\"line\">  <span class=\"comment\">-- `字段名` 列类型 [字段属性] [索引] [注释],</span></span><br><span class=\"line\">) <span class=\"keyword\">default</span> charset utf8 comment <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">-- ) [表类型] [字符集] [注释];</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>举例</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  创建一个school数据库-&gt;创建学生表(列,字段)</span></span><br><span class=\"line\"><span class=\"comment\">  学号int 登录密码varchar(20) 姓名,性别varchar(2),出生日期(datatime),家庭住址,email</span></span><br><span class=\"line\"><span class=\"comment\">  创建表之前 , 一定要先选择数据库</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">USE `school`;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">NOT</span> <span class=\"keyword\">EXISTS</span> `stu_data` (</span><br><span class=\"line\">  `id` <span class=\"type\">int</span>(<span class=\"number\">4</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT COMMENT <span class=\"string\">&#x27;学号&#x27;</span>,</span><br><span class=\"line\">  `name` <span class=\"type\">varchar</span>(<span class=\"number\">30</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;匿名&#x27;</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">  `pwd` <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;123456&#x27;</span> COMMENT <span class=\"string\">&#x27;密码&#x27;</span>,</span><br><span class=\"line\">  `sex` <span class=\"type\">varchar</span>(<span class=\"number\">2</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;男&#x27;</span> COMMENT <span class=\"string\">&#x27;性别&#x27;</span>,</span><br><span class=\"line\">  `birthday` datetime <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;生日&#x27;</span>,</span><br><span class=\"line\">  `address` <span class=\"type\">varchar</span>(<span class=\"number\">100</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;地址&#x27;</span>,</span><br><span class=\"line\">  `email` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;邮箱&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> InnoDB <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"分割线\"></a></p>\n<h2 id=\"DML-数据操作\">DML-数据操作</h2>\n<h3 id=\"外键\">外键</h3>\n<ul>\n<li>\n<p>一个表内的某<code>列</code>引用另外一个表中的一<code>列</code>,被引用的表是<code>主表</code>,引用的表是<code>从表</code>,从表通过建立列的索引来引用另一个表的索引,这个关系叫做外键.</p>\n<ul>\n<li>\n<p>主表中被引用的列必须有索引(比如 PRIMARY,KEY 类型)<br>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVsXjo.png\" alt=\"20210307123305\" /></p>\n</li>\n<li>\n<p>在外键存在的情况下,主表无法被删除,主从表的关联索引也无法被删除,但可以修改(类型).<br>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVsx9S.png\" alt=\"20210307124315\" /></p>\n</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>建立方法</p>\n<ol>\n<li>创建两张表</li>\n<li>主从表各创建一个索引(PRIMARY 或者 KEY 都可以)</li>\n<li>把从表的索引约束到主表的索引上</li>\n<li>外键建立成功!</li>\n</ol>\n<hr>\n</li>\n<li>\n<p>代码形式</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 年级表 (id,年级名称)</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `grade` (</span><br><span class=\"line\">  `gradeid` <span class=\"type\">INT</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT COMMENT <span class=\"string\">&#x27;年级ID&#x27;</span>,</span><br><span class=\"line\">  `gradename` <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;年级名称&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`gradeid`)</span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> INNODB <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 学生信息表 (学号,姓名,性别,年级,手机,地址,出生日期,邮箱,身份证号)</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `student` (</span><br><span class=\"line\">  `studentid` <span class=\"type\">INT</span>(<span class=\"number\">4</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;学号&#x27;</span>,</span><br><span class=\"line\">  `studentname` <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;匿名&#x27;</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">  `sex` TINYINT(<span class=\"number\">1</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;1&#x27;</span> COMMENT <span class=\"string\">&#x27;性别&#x27;</span>,</span><br><span class=\"line\">  `gradeid` <span class=\"type\">INT</span>(<span class=\"number\">10</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;年级&#x27;</span>,</span><br><span class=\"line\">  `phoneNum` <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;手机&#x27;</span>,</span><br><span class=\"line\">  `address` <span class=\"type\">VARCHAR</span>(<span class=\"number\">255</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;地址&#x27;</span>,</span><br><span class=\"line\">  `borndate` DATETIME <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;生日&#x27;</span>,</span><br><span class=\"line\">  `email` <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;邮箱&#x27;</span>,</span><br><span class=\"line\">  `idCard` <span class=\"type\">VARCHAR</span>(<span class=\"number\">18</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;身份证号&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`studentid`),</span><br><span class=\"line\">  <span class=\"comment\">-- 创 建 外 键 的 方 式 一: 创 建 子 表 同 时 创 建 外 键</span></span><br><span class=\"line\">  KEY `FK_gradeid` (`gradeid`), <span class=\"comment\">-- 创建一个KEY类型的索引</span></span><br><span class=\"line\">  <span class=\"keyword\">CONSTRAINT</span> `FK_gradeid` <span class=\"keyword\">FOREIGN</span> KEY (`gradeid`) <span class=\"keyword\">REFERENCES</span> `grade` (`gradeid`) <span class=\"comment\">-- 把索引约束到主表索引</span></span><br><span class=\"line\">) ENGINE <span class=\"operator\">=</span> INNODB <span class=\"keyword\">DEFAULT</span> CHARSET <span class=\"operator\">=</span> utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 创建外键方式二 : 创建子表完毕后,修改子表添加外键</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span></span><br><span class=\"line\">  `student`</span><br><span class=\"line\"><span class=\"keyword\">ADD</span></span><br><span class=\"line\">  <span class=\"keyword\">CONSTRAINT</span> `FK_gradeid` <span class=\"keyword\">FOREIGN</span> KEY (`gradeid`) <span class=\"keyword\">REFERENCES</span> `grade` (`gradeid`);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>以上是表的外键,不建议使用数据库级别的外键</p>\n<ul>\n<li>\n<p>以后如需引用多表数据,常用程序实现</p>\n</li>\n<li>\n<p>阿里规范:<code>不能使用外键和级联</code>,在 delete 或 update 时需要考虑外键因素,增加负担</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"添加-INSERT\">添加 INSERT</h3>\n<blockquote>\n<p>语法 : INSERT INTO 表名[(字段 1,字段 2,字段 3,…)] VALUES (‘值 1’,‘值 2’,‘值 3’)</p>\n</blockquote>\n<ul>\n<li>\n<p>字段与值位置对应</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  grade(gradename, gradeid)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span></span><br><span class=\"line\">  (<span class=\"string\">&#x27;大一&#x27;</span>, <span class=\"string\">&#x27;2&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>省略字段的话,值得顺序必须与数据表中的字段顺序一致</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  grade</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span></span><br><span class=\"line\">  (<span class=\"string\">&#x27;1&#x27;</span>, <span class=\"string\">&#x27;大二&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>一次插入多条数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span></span><br><span class=\"line\">  grade(gradename)</span><br><span class=\"line\"><span class=\"keyword\">VALUES</span></span><br><span class=\"line\">  (<span class=\"string\">&#x27;大三&#x27;</span>),(<span class=\"string\">&#x27;大四&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"修改-UPDATE\">修改 UPDATE</h3>\n<blockquote>\n<p>UPDATE <code>表名</code> SET <code>列名 1</code>=value <code>列名 2</code>=value [WHERE 条件];</p>\n</blockquote>\n<ul>\n<li>\n<p>value 为修改后的数据 , 可以为变量 , 具体值 , 表达式或者嵌套的 SELECT 结果</p>\n</li>\n<li>\n<p>不指定 where 的话,会修改表内所有数据</p>\n</li>\n<li>\n<p>注意 value 用单引号’引起来,不是飘`</p>\n</li>\n<li>\n<p>例子(随机生成 20 条数据后多条件筛选)</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">UPDATE</span></span><br><span class=\"line\">  `grade`</span><br><span class=\"line\"><span class=\"keyword\">SET</span></span><br><span class=\"line\">  `gradename` <span class=\"operator\">=</span> <span class=\"string\">&#x27;大一&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  gradeid <span class=\"operator\">&gt;</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">AND</span> gradeid <span class=\"operator\">&lt;</span> <span class=\"number\">10</span></span><br><span class=\"line\">  <span class=\"keyword\">OR</span> gradeid <span class=\"operator\">=</span> <span class=\"number\">15</span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>结果(json)</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">[</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;lonrd&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;2&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;3&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;4&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;5&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;6&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;7&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;9&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;10&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fmtdq&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;11&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;tvyoh&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;12&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ovhvu&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;13&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hipnh&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;14&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;kjdxr&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;15&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;大一&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;16&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;xvlbp&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;17&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bgphq&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;18&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;jcpmc&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;19&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;gjuof&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradeid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;20&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;gradename&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;owxri&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"删除-DELETE-TRUNCATE\">删除 DELETE/TRUNCATE</h3>\n<blockquote>\n<p>DELETE FROM 表名 [WHERE condition];</p>\n</blockquote>\n<ul>\n<li>\n<p>如不指定 where,会删除表中所有数据</p>\n</li>\n<li>\n<p>例子</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span></span><br><span class=\"line\">  grade</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">  gradeid <span class=\"operator\">=</span> <span class=\"number\">5</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<blockquote>\n<p>TRUNCATE [TABLE] 表名;</p>\n</blockquote>\n<ul>\n<li>\n<p>清空表,表的结构和索引不变</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">TRUNCATE</span> `student`</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>二者都能删除数据,不影响表结构</p>\n<ul>\n<li>DELETE 删除数据后不影响<code>自动增量</code>,会记录日志.</li>\n<li>TRUNCATE 清空表之后会把<code>自动增量</code>归零,不会记录日志.</li>\n</ul>\n<hr>\n</li>\n<li>\n<p>使用 DELETE 清空不同引擎的数据库表数据.重启数据库服务后</p>\n<ul>\n<li>\n<p>InnoDB : 自增列从初始值重新开始 (因为是存储在内存中,断电即失)</p>\n</li>\n<li>\n<p>MyISAM : 自增列依然从上一个自增数据基础上开始 (存在文件中,不会丢失)</p>\n</li>\n</ul>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "笔记",
                "Java",
                "MySQL"
            ]
        }
    ]
}