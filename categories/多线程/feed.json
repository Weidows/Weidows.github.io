{
    "version": "https://jsonfeed.org/version/1",
    "title": "â­ï¸é½ä¸‹æ— è´°â­ï¸ â€¢ All posts by \"å¤šçº¿ç¨‹\" category",
    "description": "May all the beauty be bless.âœ¨",
    "home_page_url": "https://weidows.github.io",
    "items": [
        {
            "id": "https://weidows.github.io/post/lang/Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/2/",
            "url": "https://weidows.github.io/post/lang/Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/2/",
            "title": "ğŸŒ­å›é¡¾ä¸€ä¸‹å¤šçº¿ç¨‹-è´°",
            "date_published": "2021-02-20T17:06:22.000Z",
            "content_html": "<h1>å›é¡¾ä¸€ä¸‹å¤šçº¿ç¨‹-è´°</h1>\n<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @LastEditors: Weidows\n * @LastEditTime: 2022-04-20 23:41:35\n * @FilePath: \\Blog-private\\source\\_posts\\Java\\å¤šçº¿ç¨‹\\2.md\n * @Description:\n * @!: *********************************************************************\n-->\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li><a href=\"#%E5%9B%9E%E9%A1%BE%E4%B8%80%E4%B8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E8%B4%B0\">å›é¡¾ä¸€ä¸‹å¤šçº¿ç¨‹-è´°</a>\n<ul>\n<li><a href=\"#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5-synchronized\">çº¿ç¨‹åŒæ­¥-synchronized</a>\n<ul>\n<li><a href=\"#%E4%B9%B0%E7%A5%A8\">ä¹°ç¥¨</a></li>\n<li><a href=\"#%E9%93%B6%E8%A1%8C%E5%8F%96%E6%AC%BE\">é“¶è¡Œå–æ¬¾</a></li>\n<li><a href=\"#%E5%85%B3%E4%BA%8E%E8%AF%95%E9%94%99%E6%8A%80%E5%B7%A7\">å…³äºè¯•é”™æŠ€å·§</a></li>\n</ul>\n</li>\n<li><a href=\"#%E9%9B%86%E5%90%88%E4%B8%8E%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8\">é›†åˆä¸çº¿ç¨‹å®‰å…¨</a>\n<ul>\n<li><a href=\"#%E9%9D%9E%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5\">éçº¿ç¨‹åŒæ­¥</a></li>\n<li><a href=\"#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5\">çº¿ç¨‹åŒæ­¥</a></li>\n<li><a href=\"#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%9B%86%E5%90%88\">çº¿ç¨‹å®‰å…¨é›†åˆ</a></li>\n</ul>\n</li>\n<li><a href=\"#%E6%AD%BB%E9%94%81\">æ­»é”</a>\n<ul>\n<li><a href=\"#%E4%BA%A7%E7%94%9F%E6%9D%A1%E4%BB%B6\">äº§ç”Ÿæ¡ä»¶</a></li>\n<li><a href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\">è§£å†³æ–¹æ¡ˆ</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%8F%AF%E9%87%8D%E5%85%A5%E9%94%81-reentrantlock\">å¯é‡å…¥é”-ReentrantLock</a></li>\n<li><a href=\"#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6\">å¤šçº¿ç¨‹ä¸å¾ªç¯æ§åˆ¶</a></li>\n<li><a href=\"#%E5%BB%B6%E8%BF%9F%E5%AF%B9%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%BD%B1%E5%93%8D\">å»¶è¿Ÿå¯¹å¤šçº¿ç¨‹çš„å½±å“</a>\n<ul>\n<li><a href=\"#%E4%B8%80\">ä¸€</a></li>\n<li><a href=\"#%E4%BA%8C\">äºŒ</a></li>\n<li><a href=\"#%E4%B8%89\">ä¸‰</a></li>\n</ul>\n</li>\n<li><a href=\"#%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1-wait-notify\">çº¿ç¨‹é€šä¿¡-wait-notify</a></li>\n<li><a href=\"#%E7%BA%BF%E7%A8%8B%E6%B1%A0\">çº¿ç¨‹æ± </a></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"çº¿ç¨‹åŒæ­¥-synchronized\">çº¿ç¨‹åŒæ­¥-synchronized</h2>\n<ul>\n<li>\n<p>å¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€èµ„æºæ—¶ä¼šæœ‰é—®é¢˜å‡ºç°,ç”¨ <code>synchronized</code> åŒæ­¥.</p>\n<p>çº¿ç¨‹åŒæ­¥çš„å½¢æˆæ¡ä»¶: <code>é˜Ÿåˆ—+é”</code></p>\n<p>å®ç°å½¢å¼æœ‰ åŒæ­¥æ–¹æ³• å’Œ åŒæ­¥ä»£ç å—</p>\n<hr>\n</li>\n</ul>\n<ol>\n<li>\n<p>åŒæ­¥æ–¹æ³•, é”çš„æ˜¯æ–¹æ³•æ‰€å±å¯¹è±¡ this</p>\n<p>å¦‚ä¸‹ä¹°ç¥¨ä¾‹å­ä¸­ buy æ–¹æ³•é”çš„æ˜¯ <code>Ticket ticket</code> è¿™ä¸ªå¯¹è±¡</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"type\">void</span> <span class=\"title\">buy</span><span class=\"params\">()</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n</li>\n<li>\n<p>åŒæ­¥ä»£ç å—, é” obj</p>\n<figure class=\"highlight wren\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">synchronized</span> (<span class=\"variable\">obj</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// æ“ä½œ</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<hr>\n<h3 id=\"ä¹°ç¥¨\">ä¹°ç¥¨</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Ticket</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> <span class=\"variable\">ticketNums</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>; <span class=\"comment\">//ç¥¨æ•°</span></span><br><span class=\"line\">  <span class=\"type\">boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> <span class=\"literal\">true</span>; <span class=\"comment\">//å¤–éƒ¨åœæ­¢æ–¹æ³•</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (flag) &#123;</span><br><span class=\"line\">      buy();</span><br><span class=\"line\">      <span class=\"comment\">//æ¨¡æ‹Ÿå»¶æ—¶</span></span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">200</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title function_\">buy</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//åˆ¤æ–­æ˜¯å¦æœ‰ç¥¨</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ticketNums &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot;--&gt;å¾—åˆ°å€’æ•°ç¬¬&quot;</span> + ticketNums-- + <span class=\"string\">&quot;ç¥¨&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Ticket</span> <span class=\"variable\">ticket</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Ticket</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(ticket, <span class=\"string\">&quot;å°æ˜&quot;</span>).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(ticket, <span class=\"string\">&quot;è€å¸ˆ&quot;</span>).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(ticket, <span class=\"string\">&quot;é»„ç‰›&quot;</span>).start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>ç»“æœ</p>\n<p>ä¸åŠ é”: æœ‰é”™è¯¯</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"code\"><pre><span class=\"line\">å°æ˜<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬10ç¥¨</span></span><br><span class=\"line\">è€å¸ˆ<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬9ç¥¨</span></span><br><span class=\"line\">é»„ç‰›<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬8ç¥¨</span></span><br><span class=\"line\">è€å¸ˆ<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬7ç¥¨</span></span><br><span class=\"line\">å°æ˜<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬6ç¥¨</span></span><br><span class=\"line\">é»„ç‰›<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬5ç¥¨</span></span><br><span class=\"line\">è€å¸ˆ<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬4ç¥¨</span></span><br><span class=\"line\">å°æ˜<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬3ç¥¨</span></span><br><span class=\"line\">é»„ç‰›<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬3ç¥¨</span></span><br><span class=\"line\">è€å¸ˆ<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬2ç¥¨</span></span><br><span class=\"line\">å°æ˜<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬1ç¥¨</span></span><br><span class=\"line\">é»„ç‰›<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬1ç¥¨</span></span><br></pre></td></tr></table></figure>\n<p>åŠ é”: æ— è¯¯</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"code\"><pre><span class=\"line\">å°æ˜<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬10ç¥¨</span></span><br><span class=\"line\">é»„ç‰›<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬9ç¥¨</span></span><br><span class=\"line\">è€å¸ˆ<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬8ç¥¨</span></span><br><span class=\"line\">å°æ˜<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬7ç¥¨</span></span><br><span class=\"line\">é»„ç‰›<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬6ç¥¨</span></span><br><span class=\"line\">è€å¸ˆ<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬5ç¥¨</span></span><br><span class=\"line\">é»„ç‰›<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬4ç¥¨</span></span><br><span class=\"line\">å°æ˜<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬3ç¥¨</span></span><br><span class=\"line\">è€å¸ˆ<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬2ç¥¨</span></span><br><span class=\"line\">é»„ç‰›<span class=\"comment\">--&gt;å¾—åˆ°å€’æ•°ç¬¬1ç¥¨</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h3 id=\"é“¶è¡Œå–æ¬¾\">é“¶è¡Œå–æ¬¾</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.math.BigDecimal;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Bank</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Account</span> <span class=\"variable\">account</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Account</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">100</span>), <span class=\"string\">&quot;æˆ‘çš„è´¦æˆ·&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">DrawingChannel</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DrawingChannel</span>(account, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">50</span>), <span class=\"string\">&quot;A&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">DrawingChannel</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DrawingChannel</span>(account, <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">100</span>), <span class=\"string\">&quot;B&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    a.start();</span><br><span class=\"line\">    b.start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//è´¦æˆ·</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Account</span> &#123;</span><br><span class=\"line\">  BigDecimal balance;<span class=\"comment\">//ä½™é¢</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> String name; <span class=\"comment\">//å¡å</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Account</span><span class=\"params\">(BigDecimal balance, String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.balance = balance;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é“¶è¡Œï¼šæ¨¡æ‹Ÿå–æ¬¾</span></span><br><span class=\"line\"><span class=\"comment\"> * * è¿™é‡Œä¹‹æ‰€ä»¥æ²¡ç”¨å®ç°Runnableæ¥å£çš„æ–¹å¼æ˜¯ä¸ºäº†è°ƒç”¨Threadç±»ä¸­ä¸€äº›æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">DrawingChannel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Thread</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Account account; <span class=\"comment\">//è´¦æˆ·</span></span><br><span class=\"line\">  BigDecimal drawingMoney; <span class=\"comment\">//å–äº†å¤šå°‘é’±</span></span><br><span class=\"line\">  BigDecimal nowMoney; <span class=\"comment\">//ç°åœ¨æ‰‹é‡Œæœ‰å¤šå°‘é’±</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">DrawingChannel</span><span class=\"params\">(Account account, BigDecimal drawingMoney, String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.account = account;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.drawingMoney = drawingMoney;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.nowMoney = <span class=\"keyword\">new</span> <span class=\"title class_\">BigDecimal</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (account) &#123;</span><br><span class=\"line\">      <span class=\"comment\">//åˆ¤æ–­æœ‰æ²¡æœ‰é’±</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (account.balance.compareTo(drawingMoney) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        System.out.println(account.name + <span class=\"string\">&quot;é’±ä¸å¤Ÿ&quot;</span> + drawingMoney + <span class=\"string\">&quot;,&quot;</span> + <span class=\"built_in\">this</span>.getName() + <span class=\"string\">&quot;æ— æ³•å–èµ°&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// æ”¾å¤§é”™è¯¯</span></span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      draw();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">draw</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//å¡å†…ä½™é¢ = ä½™é¢ - å–çš„é’±</span></span><br><span class=\"line\">    account.balance = account.balance.subtract(drawingMoney);</span><br><span class=\"line\">    System.out.println(<span class=\"built_in\">this</span>.getName() + <span class=\"string\">&quot;å–èµ°&quot;</span> + drawingMoney);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//æ‰‹é‡Œçš„é’±</span></span><br><span class=\"line\">    nowMoney = nowMoney.add(drawingMoney);</span><br><span class=\"line\"></span><br><span class=\"line\">    System.out.println(account.name + <span class=\"string\">&quot;ä½™é¢ä¸ºï¼š&quot;</span> + account.balance);</span><br><span class=\"line\">    System.out.println(<span class=\"built_in\">this</span>.getName() + <span class=\"string\">&quot;æ‰‹é‡Œçš„é’±ï¼š&quot;</span> + nowMoney);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>é¢„æœŸç»“æœ</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">A</span>å–èµ°<span class=\"number\">50</span></span><br><span class=\"line\">æˆ‘çš„è´¦æˆ·ä½™é¢ä¸ºï¼š<span class=\"number\">50</span></span><br><span class=\"line\"><span class=\"selector-tag\">A</span>æ‰‹é‡Œçš„é’±ï¼š<span class=\"number\">50</span></span><br><span class=\"line\">æˆ‘çš„è´¦æˆ·é’±ä¸å¤Ÿ<span class=\"number\">100</span>,<span class=\"selector-tag\">B</span>æ— æ³•å–èµ°</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"å…³äºè¯•é”™æŠ€å·§\">å…³äºè¯•é”™æŠ€å·§</h3>\n<ul>\n<li>\n<p>ç†Ÿç»ƒä½¿ç”¨.sleep()è¯•é”™</p>\n<ul>\n<li>\n<p>è¯•é”™å‰</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">æˆ‘çš„è´¦æˆ·é’±ä¸å¤Ÿ<span class=\"number\">100</span>,<span class=\"selector-tag\">B</span>æ— æ³•å–èµ°</span><br><span class=\"line\">æˆ‘çš„è´¦æˆ·ä½™é¢ä¸ºï¼š<span class=\"number\">50</span></span><br><span class=\"line\"><span class=\"selector-tag\">A</span>æ‰‹é‡Œçš„é’±ï¼š<span class=\"number\">50</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<ul>\n<li>\n<p>è¯•é”™å</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">B</span> å–èµ° <span class=\"number\">100</span></span><br><span class=\"line\"><span class=\"selector-tag\">A</span> å–èµ° <span class=\"number\">50</span></span><br><span class=\"line\">æˆ‘çš„è´¦æˆ·ä½™é¢ä¸ºï¼š<span class=\"number\">50</span></span><br><span class=\"line\">æˆ‘çš„è´¦æˆ·ä½™é¢ä¸ºï¼š<span class=\"number\">50</span></span><br><span class=\"line\"><span class=\"selector-tag\">A</span> æ‰‹é‡Œçš„é’±ï¼š<span class=\"number\">50</span></span><br><span class=\"line\"><span class=\"selector-tag\">B</span> æ‰‹é‡Œçš„é’±ï¼š<span class=\"number\">100</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"é›†åˆä¸çº¿ç¨‹å®‰å…¨\">é›†åˆä¸çº¿ç¨‹å®‰å…¨</h2>\n<p>å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œé›†åˆå¯¹è±¡æ—¶å¯èƒ½ä¼šå­˜åœ¨è¦†å†™(çº¿ç¨‹ä¸å®‰å…¨)</p>\n<h3 id=\"éçº¿ç¨‹åŒæ­¥\">éçº¿ç¨‹åŒæ­¥</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestList</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">    List&lt;String&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;String&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10000</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">        list.add(Thread.currentThread().getName());</span><br><span class=\"line\">      &#125;).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    Thread.sleep(<span class=\"number\">3000</span>); <span class=\"comment\">// å»¶æ—¶,ä¸ºäº†ç­‰ä¸Šé¢æ‰§è¡Œå®Œæ¯•</span></span><br><span class=\"line\">    System.out.println(list.size());<span class=\"comment\">//è¾“å‡ºï¼š9992</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"çº¿ç¨‹åŒæ­¥\">çº¿ç¨‹åŒæ­¥</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestList</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">    List&lt;String&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;String&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10000</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (list) &#123;</span><br><span class=\"line\">          list.add(Thread.currentThread().getName());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    Thread.sleep(<span class=\"number\">3000</span>); <span class=\"comment\">// å»¶æ—¶,ä¸ºäº†ç­‰ä¸Šé¢æ‰§è¡Œå®Œæ¯•</span></span><br><span class=\"line\">    System.out.println(list.size());<span class=\"comment\">//è¾“å‡ºï¼š10000</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"çº¿ç¨‹å®‰å…¨é›†åˆ\">çº¿ç¨‹å®‰å…¨é›†åˆ</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">JUC</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">    List&lt;String&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">CopyOnWriteArrayList</span>&lt;String&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10000</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">        list.add(Thread.currentThread().getName());</span><br><span class=\"line\">      &#125;).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    Thread.sleep(<span class=\"number\">3000</span>);</span><br><span class=\"line\">    System.out.println(list.size());<span class=\"comment\">//è¾“å‡ºï¼š10000</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"æ­»é”\">æ­»é”</h2>\n<p>ä¸¤çº¿ç¨‹åœ¨å„è‡ªæ‹¥æœ‰ä¸€ä¸ªå¯¹è±¡çš„é”æ—¶éƒ½ç­‰å¾…å¯¹æ–¹çº¿ç¨‹é‡Šæ”¾å¯¹è±¡çš„é” ; ä¹Ÿæœ‰å¯èƒ½å¾ˆå¤šçº¿ç¨‹äº§ç”Ÿç¯å½¢/ç½‘çŠ¶æ­»é”.</p>\n<ul>\n<li>\n<p>å¦‚ä¸‹ä¾‹å­å°±ä¼šäº§ç”Ÿæ­»é”</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//æ­»é”ï¼šå¤šä¸ªçº¿ç¨‹äº’ç›¸æŠ±ç€å¯¹æ–¹éœ€è¦çš„èµ„æº</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DeadLock</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Makeup</span> <span class=\"variable\">m1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Makeup</span>(<span class=\"number\">0</span>, <span class=\"string\">&quot;å°é»‘&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">Makeup</span> <span class=\"variable\">m2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Makeup</span>(<span class=\"number\">1</span>, <span class=\"string\">&quot;å°ç™½&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    m1.start();</span><br><span class=\"line\">    m2.start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//å£çº¢</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Lipstick</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//é•œå­</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Mirror</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//åŒ–å¦†</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Makeup</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Thread</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//éœ€è¦çš„èµ„æºåªæœ‰ä¸€ä»½ï¼Œç”¨staticæ¥ä¿è¯åªæœ‰ä¸€ä»½</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Lipstick</span> <span class=\"variable\">lipstick</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Lipstick</span>();</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Mirror</span> <span class=\"variable\">mirror</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Mirror</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"type\">int</span> choice; <span class=\"comment\">//é€‰æ‹©</span></span><br><span class=\"line\">  String name; <span class=\"comment\">//ä½¿ç”¨åŒ–å¦†å“çš„äºº</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Makeup</span><span class=\"params\">(<span class=\"type\">int</span> choice, String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.choice = choice;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//åŒ–å¦†</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      makeup();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//åŒ–å¦†ï¼Œäº’ç›¸æŒæœ‰å¯¹æ–¹çš„é”ï¼Œå°±æ˜¯éœ€è¦æ‹¿åˆ°å¯¹æ–¹çš„èµ„æº</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">makeup</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (choice == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">synchronized</span> (lipstick) &#123; <span class=\"comment\">//è·å¾—å£çº¢çš„é”</span></span><br><span class=\"line\">        System.out.println(<span class=\"built_in\">this</span>.name + <span class=\"string\">&quot;è·å¾—å£çº¢çš„é”&quot;</span>);</span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (mirror) &#123; <span class=\"comment\">//ä¸€ç§’é’Ÿåæƒ³è·å¾—é•œå­çš„é”</span></span><br><span class=\"line\">          System.out.println(<span class=\"built_in\">this</span>.name + <span class=\"string\">&quot;è·å¾—é•œå­çš„é”&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">synchronized</span> (mirror) &#123; <span class=\"comment\">//è·å¾—é•œå­çš„é”</span></span><br><span class=\"line\">        System.out.println(<span class=\"built_in\">this</span>.name + <span class=\"string\">&quot;è·å¾—é•œå­çš„é”&quot;</span>);</span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">2000</span>);</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (lipstick) &#123; <span class=\"comment\">//ä¸¤ç§’é’Ÿåæƒ³è·å¾—å£çº¢çš„é”</span></span><br><span class=\"line\">          System.out.println(<span class=\"built_in\">this</span>.name + <span class=\"string\">&quot;è·å¾—å£çº¢çš„é”&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"äº§ç”Ÿæ¡ä»¶\">äº§ç”Ÿæ¡ä»¶</h3>\n<ul>\n<li>\n<p>å››ä¸ªå¿…è¦æ¡ä»¶:</p>\n<ol>\n<li>äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ã€‚</li>\n<li>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li>\n<li>ä¸å‰¥å¤ºæ¡ä»¶ï¼šè¿›ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚</li>\n<li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li>\n</ol>\n</li>\n</ul>\n<hr>\n<h3 id=\"è§£å†³æ–¹æ¡ˆ\">è§£å†³æ–¹æ¡ˆ</h3>\n<ul>\n<li>\n<p>ä½¿ç”¨å®ŒåŒæ­¥å¯¹è±¡åç«‹å³é‡Šæ”¾</p>\n<ul>\n<li>æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ä½¿ç”¨å®Œ<code>å£çº¢</code>æˆ–è€…<code>é•œå­</code>åæœªé‡Šæ”¾,å†å»è·å–å¦ä¸€ä¸ªå¯¹è±¡çš„é”,å°±ä¼šäº§ç”Ÿæ­»é”äº†</li>\n<li>ä¿®æ”¹: æŠŠ makeup æ”¹ä¸ºå¦‚ä¸‹</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">makeup</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (choice == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lipstick) &#123; <span class=\"comment\">// è·å¾—å£çº¢çš„é”</span></span><br><span class=\"line\">      System.out.println(<span class=\"built_in\">this</span>.name + <span class=\"string\">&quot;è·å¾—å£çº¢çš„é”&quot;</span>);</span><br><span class=\"line\">      Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (mirror) &#123; <span class=\"comment\">// ä¸€ç§’é’Ÿåæƒ³è·å¾—é•œå­çš„é”</span></span><br><span class=\"line\">      System.out.println(<span class=\"built_in\">this</span>.name + <span class=\"string\">&quot;è·å¾—é•œå­çš„é”&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (mirror) &#123; <span class=\"comment\">// è·å¾—é•œå­çš„é”</span></span><br><span class=\"line\">      System.out.println(<span class=\"built_in\">this</span>.name + <span class=\"string\">&quot;è·å¾—é•œå­çš„é”&quot;</span>);</span><br><span class=\"line\">      Thread.sleep(<span class=\"number\">2000</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lipstick) &#123; <span class=\"comment\">// ä¸¤ç§’é’Ÿåæƒ³è·å¾—å£çº¢çš„é”</span></span><br><span class=\"line\">      System.out.println(<span class=\"built_in\">this</span>.name + <span class=\"string\">&quot;è·å¾—å£çº¢çš„é”&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"å¯é‡å…¥é”-ReentrantLock\">å¯é‡å…¥é”-ReentrantLock</h2>\n<ul>\n<li>\n<p>ReentrantLock (ä¹Ÿå« RT-Lock) ç±»å®ç°äº† java.util.concurrent.locks.Lock æ¥å£</p>\n<p>ä¸ synchronized åŒºåˆ«:</p>\n<ol>\n<li>\n<p>ReentrantLock æ˜¯æ˜¾å¼åŠ è§£é”,å®ƒåªèƒ½é”ä»£ç å—</p>\n</li>\n<li>\n<p>æ€§èƒ½æ¯” synchronized å¥½</p>\n</li>\n</ol>\n</li>\n<li>\n<p>ä½¿ç”¨ä¼˜å…ˆåº¦: ReentrantLock &gt; åŒæ­¥ä»£ç å—(å·²ç»è¿›å…¥äº†æ–¹æ³•ä½“ï¼Œåˆ†é…äº†ç›¸åº”èµ„æº) &gt; åŒæ­¥æ–¹æ³•(åœ¨æ–¹æ³•ä½“ä¹‹å¤–)</p>\n</li>\n<li>\n<p>æ³¨æ„ç‚¹: åŠ è§£é”æœ€å¥½è¦åœ¨ try-finally é‡Œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">  lock.lock();</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ( ) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (InterruptedException ignored) &#123;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">    lock.unlock();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>ä¾‹å­</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestLock</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\">  <span class=\"type\">int</span> <span class=\"variable\">ticketNums</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">ReentrantLock</span> <span class=\"variable\">lock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ReentrantLock</span>(); <span class=\"comment\">// å®šä¹‰Locké”</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        lock.lock(); <span class=\"comment\">// åŠ é”</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ticketNums &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot;--&gt;æ‹¿åˆ°äº†ç¬¬&quot;</span> + ticketNums-- + <span class=\"string\">&quot;ç¥¨&quot;</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        lock.unlock(); <span class=\"comment\">// è§£é”</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          Thread.sleep(<span class=\"number\">500</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">          e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">TestLock</span> <span class=\"variable\">testLock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TestLock</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(testLock, <span class=\"string\">&quot;a&quot;</span>).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(testLock, <span class=\"string\">&quot;b&quot;</span>).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(testLock, <span class=\"string\">&quot;c&quot;</span>).start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>ç»“æœ</p>\n<figure class=\"highlight xl\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">a</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">10</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">9</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">b</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">8</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">b</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">7</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">6</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">a</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">5</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">b</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">4</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">a</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">3</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">2</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">1</span>ç¥¨</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"å¤šçº¿ç¨‹ä¸å¾ªç¯æ§åˆ¶\">å¤šçº¿ç¨‹ä¸å¾ªç¯æ§åˆ¶</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestLock</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\">  <span class=\"type\">int</span> <span class=\"variable\">ticketNums</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">ReentrantLock</span> <span class=\"variable\">lock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ReentrantLock</span>(); <span class=\"comment\">// å®šä¹‰Locké”</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (ticketNums &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        lock.lock(); <span class=\"comment\">// åŠ é”</span></span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">500</span>);</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot;--&gt;æ‹¿åˆ°äº†ç¬¬&quot;</span> + ticketNums-- + <span class=\"string\">&quot;ç¥¨&quot;</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        lock.unlock(); <span class=\"comment\">// è§£é”</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">TestLock</span> <span class=\"variable\">testLock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TestLock</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(testLock, <span class=\"string\">&quot;a&quot;</span>).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(testLock, <span class=\"string\">&quot;b&quot;</span>).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(testLock, <span class=\"string\">&quot;c&quot;</span>).start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>ä¸Šé¢ä»£ç  while å¾ªç¯ä¼šå­˜åœ¨åˆ¤æ–­å¤±è¯¯</p>\n<figure class=\"highlight xl\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">10</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">9</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">8</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">7</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">6</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">5</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">4</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">3</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">2</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">1</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">b</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">0</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">a</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬-<span class=\"number\">1</span>ç¥¨</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>ticketNums åœ¨åˆ¤æ–­ä¹‹åè¢«å¤šæ¬¡ä¿®æ”¹</p>\n<p>ä¸Šé¢ 10~1 æ¬¡éƒ½æ˜¯ c çº¿ç¨‹æ‰§è¡Œçš„,å®ƒæ‰§è¡Œåè½®åˆ° b å’Œ a</p>\n<p>ä½†æ˜¯ b ä¸ a çº¿ç¨‹å®é™…ä¸Šæ˜¯åœ¨<code>ticketNums=10</code>æ—¶è¿›å…¥çš„å¾ªç¯,æ‰€ä»¥ä¼šå¯¼è‡´<code>-1</code>å‡ºç°</p>\n<p>æ‰€ä»¥å»ºè®®é‡åˆ°å¤šçº¿ç¨‹å¾ªç¯æ§åˆ¶æ—¶,ç›´æ¥<code>while(true)</code>,ç„¶ååœ¨å†…éƒ¨ç”¨<code>if</code></p>\n<p>(åè¿‡æ¥æƒ³: æ˜¯å› ä¸º lock ä¸èƒ½åœ¨å¾ªç¯ä¹‹å¤–åŠ )</p>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"å»¶è¿Ÿå¯¹å¤šçº¿ç¨‹çš„å½±å“\">å»¶è¿Ÿå¯¹å¤šçº¿ç¨‹çš„å½±å“</h2>\n<blockquote>\n<p>ä¸‹é¢ä¸‰ä¸ªä¾‹å­æ•°æ®éƒ½æ²¡é”™,å…³é”®çœ‹å¹¶å‘æ•°é‡å’Œæ‰§è¡Œæ—¶é—´</p>\n</blockquote>\n<h3 id=\"ä¸€\">ä¸€</h3>\n<ul>\n<li>\n<p>ç¬é—´æ‰§è¡Œå®Œ,èµ„æºè¢«å•ä¸€çº¿ç¨‹å…¨éƒ¨æŠ¢å  (å¹¶éä¸åˆç†,åªä¸è¿‡æ˜¯å¤„ç†å™¨æ²¡åˆ†é…åˆ° B,C)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestLock</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\">  <span class=\"type\">int</span> <span class=\"variable\">ticketNums</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">ReentrantLock</span> <span class=\"variable\">lock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ReentrantLock</span>(); <span class=\"comment\">// å®šä¹‰Locké”</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        lock.lock(); <span class=\"comment\">// åŠ é”</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ticketNums &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot;--&gt;æ‹¿åˆ°äº†ç¬¬&quot;</span> + ticketNums-- + <span class=\"string\">&quot;ç¥¨&quot;</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        lock.unlock(); <span class=\"comment\">// è§£é”</span></span><br><span class=\"line\">        <span class=\"comment\">// try &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">//   Thread.sleep(500);</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125; catch (InterruptedException e) &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">//   e.printStackTrace();</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">TestLock</span> <span class=\"variable\">testLock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TestLock</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(testLock, <span class=\"string\">&quot;a&quot;</span>).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(testLock, <span class=\"string\">&quot;b&quot;</span>).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(testLock, <span class=\"string\">&quot;c&quot;</span>).start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xl\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">9</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">8</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">7</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">6</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">5</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">4</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">3</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">2</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">1</span>ç¥¨</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"äºŒ\">äºŒ</h3>\n<ul>\n<li>\n<p>ç»™ä»–åŠ ä¸ªå»¶è¿Ÿè¯•è¯•: ä¸‰çº¿ç¨‹å¹¶è¡Œ,èµ„æºåˆ†é…åˆç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      lock.lock(); <span class=\"comment\">// åŠ é”</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (ticketNums &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot;--&gt;æ‹¿åˆ°äº†ç¬¬&quot;</span> + ticketNums-- + <span class=\"string\">&quot;ç¥¨&quot;</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">      lock.unlock(); <span class=\"comment\">// è§£é”</span></span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">500</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xl\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">b</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">10</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">a</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">9</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">8</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">b</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">7</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">a</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">6</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">5</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">4</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">a</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">3</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">b</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">2</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">b</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">1</span>ç¥¨</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"ä¸‰\">ä¸‰</h3>\n<ul>\n<li>\n<p>å†è¯•è¯•å»¶è¿Ÿä¹‹åè§£å¼€åŒæ­¥é”: å•çº¿æ‰§è¡Œ,èµ„æºåˆ†é…ä¸å¹³è¡¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      lock.lock(); <span class=\"comment\">// åŠ é”</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (ticketNums &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot;--&gt;æ‹¿åˆ°äº†ç¬¬&quot;</span> + ticketNums-- + <span class=\"string\">&quot;ç¥¨&quot;</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">500</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      lock.unlock(); <span class=\"comment\">// è§£é”</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xl\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">a</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">10</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">a</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">9</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">8</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">7</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">6</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">5</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">4</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">3</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">c</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">2</span>ç¥¨</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">b</span>--&gt;</span>æ‹¿åˆ°äº†ç¬¬<span class=\"number\">1</span>ç¥¨</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"çº¿ç¨‹é€šä¿¡-wait-notify\">çº¿ç¨‹é€šä¿¡-wait-notify</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Clerk</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"type\">int</span> productNumber; <span class=\"comment\">// å”®è´§å‘˜æ‰‹ä¸­çš„å•†å“æ•°</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ProducterAndCustomer</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Clerk</span> <span class=\"variable\">clerk</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Clerk</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123; <span class=\"comment\">//ä¸€ç›´ç”Ÿäº§</span></span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (clerk) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (clerk.productNumber == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">              System.out.println(<span class=\"string\">&quot;äº§å“ä¸º0, å¼€å§‹ç”Ÿäº§&quot;</span>);</span><br><span class=\"line\">              <span class=\"keyword\">while</span> (clerk.productNumber &lt; <span class=\"number\">5</span>) &#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">&quot;åº“å­˜: &quot;</span> + clerk.productNumber++);</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">500</span>);</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">              clerk.notifyAll();</span><br><span class=\"line\">              <span class=\"comment\">//å•†å“æ•°ä¸ä¸º0æ—¶è®©clerkç­‰å¾…</span></span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">              <span class=\"comment\">// clerk.wait();</span></span><br><span class=\"line\">              clerk.wait();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;, <span class=\"string\">&quot;ç”Ÿäº§è€…&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123; <span class=\"comment\">//ä¸€ç›´æ¶ˆè´¹</span></span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (clerk) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (clerk.productNumber == <span class=\"number\">5</span>) &#123;</span><br><span class=\"line\">              System.out.println(<span class=\"string\">&quot;äº§å“ä¸º5,å¼€å§‹æ¶ˆè´¹&quot;</span>);</span><br><span class=\"line\">              <span class=\"keyword\">while</span> (clerk.productNumber &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">&quot;åº“å­˜: &quot;</span> + clerk.productNumber--);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                  Thread.sleep(<span class=\"number\">500</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                  e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">              clerk.notifyAll();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">              <span class=\"comment\">// clerk.wait();</span></span><br><span class=\"line\">              clerk.wait();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;, <span class=\"string\">&quot;æ¶ˆè´¹è€…&quot;</span>).start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>ç»“æœ</p>\n<figure class=\"highlight makefile\"><table><tr><td class=\"code\"><pre><span class=\"line\">äº§å“ä¸º0, å¼€å§‹ç”Ÿäº§</span><br><span class=\"line\"><span class=\"section\">åº“å­˜: 0</span></span><br><span class=\"line\"><span class=\"section\">åº“å­˜: 1</span></span><br><span class=\"line\"><span class=\"section\">åº“å­˜: 2</span></span><br><span class=\"line\"><span class=\"section\">åº“å­˜: 3</span></span><br><span class=\"line\"><span class=\"section\">åº“å­˜: 4</span></span><br><span class=\"line\">äº§å“ä¸º5,å¼€å§‹æ¶ˆè´¹</span><br><span class=\"line\"><span class=\"section\">åº“å­˜: 5</span></span><br><span class=\"line\"><span class=\"section\">åº“å­˜: 4</span></span><br><span class=\"line\"><span class=\"section\">åº“å­˜: 3</span></span><br><span class=\"line\"><span class=\"section\">åº“å­˜: 2</span></span><br><span class=\"line\"><span class=\"section\">åº“å­˜: 1</span></span><br><span class=\"line\">äº§å“ä¸º0, å¼€å§‹ç”Ÿäº§</span><br><span class=\"line\"><span class=\"section\">åº“å­˜: 0</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"çº¿ç¨‹æ± \">çº¿ç¨‹æ± </h2>\n<ul>\n<li>\n<p>çº¿ç¨‹æ± çš„å‡ºç°æ˜¯ä¸ºäº†æ–¹ä¾¿å¤§é‡çš„çº¿ç¨‹åˆ›å»º,å›æ”¶å’Œç®¡ç†</p>\n</li>\n<li>\n<p>éœ€è¦äº†è§£ <code>ExecutorService</code> çº¿ç¨‹æ± æ¥å£;ä»¥åŠ <code>Executors</code> çº¿ç¨‹æ± å·¥å…·ç±».</p>\n<ul>\n<li>\n<p>corePoolSize: æ ¸å¿ƒæ± çš„å¤§å°</p>\n</li>\n<li>\n<p>maximumPoolSize:æœ€å¤§çº¿ç¨‹æ•°</p>\n</li>\n<li>\n<p>keepAliveTime: çº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ—¶æœ€å¤šä¿æŒå¤šé•¿æ—¶é—´åä¼šç»ˆæ­¢</p>\n</li>\n<li>\n<p>void execute(Runnable command) :æ‰§è¡Œä»»åŠ¡/å‘½ä»¤,æ²¡æœ‰è¿”å›å€¼ï¼Œä¸€èˆ¬ç”¨æ¥æ‰§ Runnable</p>\n</li>\n<li>\n<p><T> Future<T> submit(Callable<T> task) :æ‰§è¡Œä»»åŠ¡,æœ‰è¿”å›å€¼ï¼Œä¸€èˆ¬ç”¨æ¥æ‰§è¡Œ Callable</p>\n</li>\n</ul>\n</li>\n<li>\n<p>ä¾‹å­</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestThreadPool</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.åˆ›å»ºæœåŠ¡ï¼Œåˆ›å»ºçº¿ç¨‹æ± </span></span><br><span class=\"line\">    <span class=\"type\">ExecutorService</span> <span class=\"variable\">service</span> <span class=\"operator\">=</span> Executors.newFixedThreadPool(<span class=\"number\">10</span>);</span><br><span class=\"line\">    <span class=\"type\">Runnable</span> <span class=\"variable\">runnable</span> <span class=\"operator\">=</span> () -&gt; &#123;</span><br><span class=\"line\">      System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; runnable&quot;</span>);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    Callable&lt;String&gt; callable = () -&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> Thread.currentThread().getName() + <span class=\"string\">&quot; callable&quot;</span>;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2. æ‰§è¡Œ</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">      service.execute(runnable);</span><br><span class=\"line\">      System.out.println(service.submit(callable).get());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3.å…³é—­è¿æ¥</span></span><br><span class=\"line\">    service.shutdown();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  pool-1-thread-1 runnable</span></span><br><span class=\"line\"><span class=\"comment\">  pool-1-thread-2 callable</span></span><br><span class=\"line\"><span class=\"comment\">  pool-1-thread-3 runnable</span></span><br><span class=\"line\"><span class=\"comment\">  pool-1-thread-4 callable</span></span><br><span class=\"line\"><span class=\"comment\">  pool-1-thread-5 runnable</span></span><br><span class=\"line\"><span class=\"comment\">  pool-1-thread-6 callable</span></span><br><span class=\"line\"><span class=\"comment\">  pool-1-thread-7 runnable</span></span><br><span class=\"line\"><span class=\"comment\">  pool-1-thread-8 callable</span></span><br><span class=\"line\"><span class=\"comment\">  pool-1-thread-9 runnable</span></span><br><span class=\"line\"><span class=\"comment\">  pool-1-thread-10 callable</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "ç¬”è®°",
                "Java",
                "å¤šçº¿ç¨‹"
            ]
        },
        {
            "id": "https://weidows.github.io/post/lang/Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/1/",
            "url": "https://weidows.github.io/post/lang/Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/1/",
            "title": "ğŸŒ­å›é¡¾ä¸€ä¸‹å¤šçº¿ç¨‹-å£¹",
            "date_published": "2021-02-08T10:59:13.000Z",
            "content_html": "<h1>å›é¡¾ä¸€ä¸‹å¤šçº¿ç¨‹-å£¹</h1>\n<!--\n * @?: *********************************************************************\n * @Author: Weidows\n * @Date: 2021-02-08 18:59:13\n * @LastEditors: Weidows\n * @LastEditTime: 2023-04-20 18:14:39\n * @FilePath: \\Blog-private\\source\\_posts\\Java\\å¤šçº¿ç¨‹\\1.md\n * @Description:\n * @!: *********************************************************************\n-->\n<blockquote class=\"pullquote mindmap mindmap-md\"><ul>\n<li><a href=\"#%E5%9B%9E%E9%A1%BE%E4%B8%80%E4%B8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E5%A3%B9\">å›é¡¾ä¸€ä¸‹å¤šçº¿ç¨‹-å£¹</a>\n<ul>\n<li><a href=\"#maven-%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5-jar-%E5%8C%85\">Maven è‡ªåŠ¨å¯¼å…¥ jar åŒ…</a></li>\n<li><a href=\"#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0-%E5%B9%B6%E8%A1%8C%E4%B8%8B%E8%BD%BD\">å¤šçº¿ç¨‹å®ç°-å¹¶è¡Œä¸‹è½½</a>\n<ul>\n<li><a href=\"#extends-thread\">extends-Thread</a></li>\n<li><a href=\"#implements-runnable-%E6%9C%80%E5%B8%B8%E7%94%A8\">implements-Runnable-æœ€å¸¸ç”¨</a></li>\n<li><a href=\"#implements-callable\">implements-Callable</a></li>\n</ul>\n</li>\n<li><a href=\"#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86\">é™æ€ä»£ç†</a></li>\n<li><a href=\"#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81\">ç”Ÿå‘½å‘¨æœŸ-çº¿ç¨‹çŠ¶æ€</a></li>\n<li><a href=\"#thread-%E6%93%8D%E4%BD%9C\">Thread-æ“ä½œ</a>\n<ul>\n<li><a href=\"#%E5%A6%82%E4%BD%95%E5%81%9C%E6%AD%A2%E7%BA%BF%E7%A8%8B\">å¦‚ä½•åœæ­¢çº¿ç¨‹</a></li>\n<li><a href=\"#%E7%BA%BF%E7%A8%8B%E4%BC%91%E7%9C%A0-sleep\">çº¿ç¨‹ä¼‘çœ -sleep</a></li>\n<li><a href=\"#%E7%BA%BF%E7%A8%8B%E8%AE%A9%E6%AD%A5-yield\">çº¿ç¨‹è®©æ­¥-yield</a></li>\n<li><a href=\"#%E7%BA%BF%E7%A8%8B%E6%8F%92%E9%98%9F-join\">çº¿ç¨‹æ’é˜Ÿ-Join</a></li>\n<li><a href=\"#%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7-priority\">çº¿ç¨‹ä¼˜å…ˆçº§-Priority</a></li>\n<li><a href=\"#%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B-daemon\">å®ˆæŠ¤çº¿ç¨‹-daemon</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>main()ä¸ºä¸»çº¿ç¨‹ï¼Œç³»ç»Ÿçš„å…¥å£</p>\n</li>\n<li>\n<p>ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå¦‚æœå¼€è¾Ÿäº†å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹çš„è¿è¡Œç”±è°ƒåº¦å™¨å®‰æ’ï¼Œè°ƒåº¦å™¨æ˜¯ä¸æ“ä½œç³»ç»Ÿç´§å¯†ç›¸å…³çš„ï¼Œå…ˆåé¡ºåºæ˜¯ä¸èƒ½è®¤ä¸ºå¹²é¢„çš„(æ— æ³•é¢„æµ‹çº¿ç¨‹è¿è¡Œé¡ºåº)</p>\n</li>\n<li>\n<p>ç¨‹åºè¿è¡Œæ—¶,é»˜è®¤ä¼šæœ‰å¤šä¸ªçº¿ç¨‹,æ¯”å¦‚ main å’Œ gc(åƒåœ¾å›æ”¶å™¨) ç­‰ç­‰</p>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"Maven-è‡ªåŠ¨å¯¼å…¥-jar-åŒ…\">Maven è‡ªåŠ¨å¯¼å…¥ jar åŒ…</h2>\n<ul>\n<li>\n<p>æ¯”å¦‚æˆ‘ä»¬è¦ç”¨ Maven å¯¼å…¥ <a href=\"https://mvnrepository.com/artifact/commons-io/commons-io\">Apache çš„ commons-io</a></p>\n<p>ç„¶åé€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬ç‚¹è¿›å»</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVP0Qc.png\" alt=\"20210211010341\" />\n<p>å¤åˆ¶æ¡†é‡Œçš„å†…å®¹,æ‰¾åˆ° Java é¡¹ç›®<code>pom.xml</code>æ–‡ä»¶,ç²˜è´´åˆ°å¦‚ä¸‹åœ°æ–¹</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GV4ttE.png\" alt=\"20210211010614\" />\n<p>ç„¶åå³é”®<code>pom.xml</code>-&gt;Maven-&gt;é‡æ–°åŠ è½½é¡¹ç›®.</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVSRz6.png\" alt=\"20210211010920\" />\n<p>åœ¨ VScode å†…çš„è¯ä¹Ÿæœ‰è¿™ç§æ“ä½œ:</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVS7C6.png\" alt=\"20210211011109\" />\n<p>å½“ç„¶å…³é—­ç„¶åé‡æ–°æ‰“å¼€ IDE ä¹Ÿæ˜¯å¯ä»¥çš„,Maven ä¼šè‡ªåŠ¨æ›´æ–°,æ›´æ–°åå¦‚ä¸‹,åŒ…å°±å¯¼è¿›æ¥äº†:</p>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVAD6P.png\" alt=\"20210211011240\" />\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"å¤šçº¿ç¨‹å®ç°-å¹¶è¡Œä¸‹è½½\">å¤šçº¿ç¨‹å®ç°-å¹¶è¡Œä¸‹è½½</h2>\n<h3 id=\"extends-Thread\">extends-Thread</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Downloader1</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Thread</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String url;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String fileName;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Downloader1</span><span class=\"params\">(String url, String fileName)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.url = url;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.fileName = fileName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      FileUtils.copyURLToFile(<span class=\"keyword\">new</span> <span class=\"title class_\">URL</span>(url), <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(fileName));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Downloader1 is running&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Downloader1</span>(<span class=\"string\">&quot;https://pan.weidows.tech/d/local/img/divider.png&quot;</span>, <span class=\"string\">&quot;divider.png&quot;</span>).start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"implements-Runnable-æœ€å¸¸ç”¨\">implements-Runnable-æœ€å¸¸ç”¨</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> twenty.november.thread.downloader;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.MalformedURLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.io.FileUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Downloader</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String url;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String fileName;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Downloader</span><span class=\"params\">(String url, String fileName)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.url = url;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.fileName = fileName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      FileUtils.copyURLToFile(<span class=\"keyword\">new</span> <span class=\"title class_\">URL</span>(url), <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(fileName));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Download finished.&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (MalformedURLException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Downloader</span>(<span class=\"string\">&quot;https://pan.weidows.tech/d/local/img/divider.png&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;./1.png&quot;</span>)).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Downloader</span>(<span class=\"string\">&quot;https://pan.weidows.tech/d/local/img/divider.png&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;./2.png&quot;</span>)).start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"implements-Callable\">implements-Callable</h3>\n<p>Callable ä¸ Runnable åŒºåˆ«ä¸ºå®ƒå¯ä»¥å¸¦æœ‰è¿”å›å€¼ç±»å‹,å¯ä»¥æŠ›å‡ºå¼‚å¸¸</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> twenty.november.thread.downloader;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.MalformedURLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URL;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.Callable;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.ExecutionException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.ExecutorService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.Executors;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.Future;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.io.FileUtils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Downloader2</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Callable</span>&lt;Object&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String url;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String fileName;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> Object <span class=\"title function_\">call</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> MalformedURLException, IOException &#123;</span><br><span class=\"line\">    FileUtils.copyURLToFile(<span class=\"keyword\">new</span> <span class=\"title class_\">URL</span>(url), <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(fileName));</span><br><span class=\"line\">    System.out.println(fileName + <span class=\"string\">&quot;ä¸‹è½½å®Œæˆ&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Downloader2</span><span class=\"params\">(String url, String fileName)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.url = url;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.fileName = fileName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºçº¿ç¨‹æ± </span></span><br><span class=\"line\">    <span class=\"type\">ExecutorService</span> <span class=\"variable\">ser</span> <span class=\"operator\">=</span> Executors.newFixedThreadPool(<span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// æäº¤æ‰§è¡Œ</span></span><br><span class=\"line\">    Future&lt;Object&gt; submit1 = ser</span><br><span class=\"line\">        .submit(<span class=\"keyword\">new</span> <span class=\"title class_\">Downloader2</span>(<span class=\"string\">&quot;https://pan.weidows.tech/d/local/img/divider.png&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;./1.png&quot;</span>));</span><br><span class=\"line\">    Future&lt;Object&gt; submit2 = ser</span><br><span class=\"line\">        .submit(<span class=\"keyword\">new</span> <span class=\"title class_\">Downloader2</span>(<span class=\"string\">&quot;https://pan.weidows.tech/d/local/img/divider.png&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;./2.png&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è·å–ç»“æœ</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"type\">Object</span> <span class=\"variable\">result1</span> <span class=\"operator\">=</span> submit1.get();</span><br><span class=\"line\">      <span class=\"type\">Object</span> <span class=\"variable\">result2</span> <span class=\"operator\">=</span> submit2.get();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (InterruptedException | ExecutionException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// å…³é—­æœåŠ¡</span></span><br><span class=\"line\">    ser.shutdown();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"é™æ€ä»£ç†\">é™æ€ä»£ç†</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> twenty.november.proxy.static_proxy;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StaticProxy</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">MarryProxy</span> <span class=\"variable\">proxy</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MarryProxy</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Me</span>(<span class=\"string\">&quot;Weidows&quot;</span>));</span><br><span class=\"line\">    proxy.Marry();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ! ä»£ç†å’Œè¢«ä»£ç†ç±»éƒ½å®ç°Marryæ¥å£</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">Marry</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">void</span> <span class=\"title function_\">Marry</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ! è¢«ä»£ç†è€…</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Me</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Marry</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">Marry</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    System.out.println(name + <span class=\"string\">&quot;ç»“å©šäº†&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">Me</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ! ä»£ç†</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MarryProxy</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Marry</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> Me target;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">Marry</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    before();</span><br><span class=\"line\">    target.Marry();</span><br><span class=\"line\">    after();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">after</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    System.out.println(target.name + <span class=\"string\">&quot;ç»“å©šå&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">before</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    System.out.println(target.name + <span class=\"string\">&quot;ç»“å©šå‰&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">MarryProxy</span><span class=\"params\">(Me target)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.target = target;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"ç”Ÿå‘½å‘¨æœŸ-çº¿ç¨‹çŠ¶æ€\">ç”Ÿå‘½å‘¨æœŸ-çº¿ç¨‹çŠ¶æ€</h2>\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVmsBA.png\" alt=\"20210219173514\" />\n<img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/blog/GVmJzz.png\" alt=\"20210221232406\" />\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestState</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">    <span class=\"type\">Thread</span> <span class=\"variable\">thread</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">          e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;///&quot;</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//è§‚å¯ŸçŠ¶æ€</span></span><br><span class=\"line\">    Thread.<span class=\"type\">State</span> <span class=\"variable\">state</span> <span class=\"operator\">=</span> thread.getState();</span><br><span class=\"line\">    System.out.println(state); <span class=\"comment\">//NEW</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//è§‚å¯Ÿåå¯åŠ¨</span></span><br><span class=\"line\">    thread.start(); <span class=\"comment\">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class=\"line\">    state = thread.getState();</span><br><span class=\"line\">    System.out.println(); <span class=\"comment\">//Run</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (state != Thread.State.TERMINATED) &#123; <span class=\"comment\">//åªè¦çº¿ç¨‹ä¸åœæ­¢ï¼Œå°±ä¸€ç›´è¾“å‡ºçŠ¶æ€</span></span><br><span class=\"line\">      Thread.sleep(<span class=\"number\">100</span>);</span><br><span class=\"line\">      state = thread.getState(); <span class=\"comment\">//æ›´æ–°çº¿ç¨‹çŠ¶æ€</span></span><br><span class=\"line\">      System.out.println(state); <span class=\"comment\">//è¾“å‡ºçŠ¶æ€</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//thread.start();   æŠ¥é”™ï¼Œå› ä¸ºå·²ç»æ­»äº¡çš„çº¿ç¨‹ä¸èƒ½å†å¯åŠ¨</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h2 id=\"Thread-æ“ä½œ\">Thread-æ“ä½œ</h2>\n<h3 id=\"å¦‚ä½•åœæ­¢çº¿ç¨‹\">å¦‚ä½•åœæ­¢çº¿ç¨‹</h3>\n<ol>\n<li>åˆ©ç”¨å¾ªç¯è®¡æ•°ï¼Œä¸å»ºè®®æ­»å¾ªç¯</li>\n<li>ä½¿ç”¨æ ‡å¿—ä½â€”â€”&gt;è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½</li>\n<li><code>ä¸è¦ç”¨</code> stop æˆ–è€… destroy ç­‰ JDK-deprecated çš„æ–¹æ³•</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestStop</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//1.è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; <span class=\"comment\">// è¿è¡Œæ¬¡æ•°</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (flag) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Thread.run()è¿è¡Œæ¬¡æ•°: &quot;</span> + i++);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//2.è®¾ç½®ä¸€ä¸ªå…¬å¼€çš„æ–¹æ³•åœæ­¢çº¿ç¨‹ï¼Œè½¬æ¢æ ‡å¿—ä½</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">stop</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">TestStop</span> <span class=\"variable\">testStop</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TestStop</span>();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(testStop).start();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;main: &quot;</span> + i);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i == <span class=\"number\">90</span>) &#123;</span><br><span class=\"line\">        testStop.stop();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;testStopçº¿ç¨‹åœæ­¢äº†,mainçº¿ç¨‹è¿˜åœ¨è¿è¡Œ&quot;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h3 id=\"çº¿ç¨‹ä¼‘çœ -sleep\">çº¿ç¨‹ä¼‘çœ -sleep</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestSleep</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// åç§’å€’è®¡æ—¶</span></span><br><span class=\"line\">      tenSecondsDown();</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// æ¯ç§’è¾“å‡ºç³»ç»Ÿå½“å‰æ—¶é—´</span></span><br><span class=\"line\">      countTime();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">tenSecondsDown</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">num</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">      Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">      System.out.println(num--);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (num == <span class=\"number\">0</span>)</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">countTime</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Date</span> <span class=\"variable\">startTime</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(System.currentTimeMillis()); <span class=\"comment\">//è·å–ç³»ç»Ÿå½“å‰æ—¶é—´</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;HH:mm:ss&quot;</span>).format(startTime));</span><br><span class=\"line\">        startTime = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(System.currentTimeMillis()); <span class=\"comment\">//æ›´æ–°å½“å‰æ—¶é—´</span></span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æµ‹è¯•æ•°æ®æ—¶å¯ä»¥é€šè¿‡å»¶æ—¶æ¥æ”¾å¤§çº¿ç¨‹é—®é¢˜çš„å‘ç”Ÿæ€§.</li>\n</ul>\n<hr>\n<h3 id=\"çº¿ç¨‹è®©æ­¥-yield\">çº¿ç¨‹è®©æ­¥-yield</h3>\n<ul>\n<li>ä»¤å½“å‰çº¿ç¨‹<code>æš‚åœä½†å¹¶ä¸é˜»å¡</code>,æœ‰å¯èƒ½è®©æ­¥å¹¶ä¸æˆåŠŸ.</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestYield</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// MyYield myYield = new MyYield();</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// * åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼</span></span><br><span class=\"line\">    <span class=\"comment\">// Runnable myYield = new Runnable() &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   @Override</span></span><br><span class=\"line\">    <span class=\"comment\">//   public void run() &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     System.out.println(Thread.currentThread().getName() + &quot;çº¿ç¨‹å¼€å§‹æ‰§è¡Œ&quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">//     Thread.yield(); //ç¤¼è®©</span></span><br><span class=\"line\">    <span class=\"comment\">//     System.out.println(Thread.currentThread().getName() + &quot;çº¿ç¨‹åœæ­¢æ‰§è¡Œ&quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">//   &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// * Lambdaè¡¨è¾¾å¼æ–¹å¼</span></span><br><span class=\"line\">    <span class=\"type\">Runnable</span> <span class=\"variable\">myYield</span> <span class=\"operator\">=</span> () -&gt; &#123;</span><br><span class=\"line\">      System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot;çº¿ç¨‹å¼€å§‹æ‰§è¡Œ&quot;</span>);</span><br><span class=\"line\">      Thread.<span class=\"keyword\">yield</span>(); <span class=\"comment\">//ç¤¼è®©</span></span><br><span class=\"line\">      System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot;çº¿ç¨‹åœæ­¢æ‰§è¡Œ&quot;</span>);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(myYield, <span class=\"string\">&quot;a&quot;</span>).start();</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(myYield, <span class=\"string\">&quot;b&quot;</span>).start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// * æ–°å»ºç±»çš„æ–¹å¼å®ç°æ¥å£</span></span><br><span class=\"line\"><span class=\"comment\">// class MyYield implements Runnable &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   @Override</span></span><br><span class=\"line\"><span class=\"comment\">//   public void run() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//     System.out.println(Thread.currentThread().getName() + &quot;çº¿ç¨‹å¼€å§‹æ‰§è¡Œ&quot;);</span></span><br><span class=\"line\"><span class=\"comment\">//     Thread.yield(); //ç¤¼è®©</span></span><br><span class=\"line\"><span class=\"comment\">//     System.out.println(Thread.currentThread().getName() + &quot;çº¿ç¨‹åœæ­¢æ‰§è¡Œ&quot;);</span></span><br><span class=\"line\"><span class=\"comment\">//   &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>ç»“æœ</p>\n<ul>\n<li>é¢„æœŸç»“æœ,è®©æ­¥æˆåŠŸ</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span>çº¿ç¨‹å¼€å§‹æ‰§è¡Œ</span><br><span class=\"line\"><span class=\"selector-tag\">b</span>çº¿ç¨‹å¼€å§‹æ‰§è¡Œ</span><br><span class=\"line\"><span class=\"selector-tag\">a</span>çº¿ç¨‹åœæ­¢æ‰§è¡Œ</span><br><span class=\"line\"><span class=\"selector-tag\">b</span>çº¿ç¨‹åœæ­¢æ‰§è¡Œ</span><br></pre></td></tr></table></figure>\n<ul>\n<li>è®©æ­¥æœªæˆåŠŸ(ä½†ä¹Ÿå¹¶ä¸èƒ½è®¤ä¸ºæ˜¯å¤±è´¥,ç¡®ç¡®å®å®è®©äº†ä¸€ä¸‹)</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span>çº¿ç¨‹å¼€å§‹æ‰§è¡Œ</span><br><span class=\"line\"><span class=\"selector-tag\">a</span>çº¿ç¨‹åœæ­¢æ‰§è¡Œ</span><br><span class=\"line\"><span class=\"selector-tag\">b</span>çº¿ç¨‹å¼€å§‹æ‰§è¡Œ</span><br><span class=\"line\"><span class=\"selector-tag\">b</span>çº¿ç¨‹åœæ­¢æ‰§è¡Œ</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h3 id=\"çº¿ç¨‹æ’é˜Ÿ-Join\">çº¿ç¨‹æ’é˜Ÿ-Join</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestJoin</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">    <span class=\"type\">Runnable</span> <span class=\"variable\">testJoin</span> <span class=\"operator\">=</span> () -&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;vipThread&quot;</span> + i);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"type\">Thread</span> <span class=\"variable\">vipThread</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(testJoin);</span><br><span class=\"line\">    vipThread.start();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//ä¸»çº¿ç¨‹</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i == <span class=\"number\">50</span>) &#123;</span><br><span class=\"line\">        vipThread.join(); <span class=\"comment\">//æ’é˜Ÿ</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;main&quot;</span> + i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ç»“æœ<figure class=\"highlight gcode\"><table><tr><td class=\"code\"><pre><span class=\"line\">mai<span class=\"symbol\">n0</span></span><br><span class=\"line\">vipThread<span class=\"number\">0</span></span><br><span class=\"line\">mai<span class=\"symbol\">n1</span></span><br><span class=\"line\">vipThread<span class=\"number\">1</span></span><br><span class=\"line\">vipThread<span class=\"number\">2</span></span><br><span class=\"line\">mai<span class=\"symbol\">n2</span></span><br><span class=\"line\">mai<span class=\"symbol\">n3</span></span><br><span class=\"line\">vipThread<span class=\"number\">3</span></span><br><span class=\"line\">mai<span class=\"symbol\">n4</span></span><br><span class=\"line\">vipThread<span class=\"number\">4</span></span><br><span class=\"line\">mai<span class=\"symbol\">n5</span></span><br><span class=\"line\">vipThread<span class=\"number\">5</span></span><br><span class=\"line\">mai<span class=\"symbol\">n6</span></span><br><span class=\"line\">vipThread<span class=\"number\">6</span></span><br><span class=\"line\">mai<span class=\"symbol\">n7</span></span><br><span class=\"line\">vipThread<span class=\"number\">7</span></span><br><span class=\"line\">mai<span class=\"symbol\">n8</span></span><br><span class=\"line\">vipThread<span class=\"number\">8</span></span><br><span class=\"line\">mai<span class=\"symbol\">n9</span></span><br><span class=\"line\">vipThread<span class=\"number\">9</span></span><br><span class=\"line\">mai<span class=\"symbol\">n10</span></span><br><span class=\"line\">vipThread<span class=\"number\">10</span></span><br><span class=\"line\">mai<span class=\"symbol\">n11</span></span><br><span class=\"line\">vipThread<span class=\"number\">11</span></span><br><span class=\"line\">mai<span class=\"symbol\">n12</span></span><br><span class=\"line\">vipThread<span class=\"number\">12</span></span><br><span class=\"line\">mai<span class=\"symbol\">n13</span></span><br><span class=\"line\">vipThread<span class=\"number\">13</span></span><br><span class=\"line\">mai<span class=\"symbol\">n14</span></span><br><span class=\"line\">vipThread<span class=\"number\">14</span></span><br><span class=\"line\">mai<span class=\"symbol\">n15</span></span><br><span class=\"line\">vipThread<span class=\"number\">15</span></span><br><span class=\"line\">mai<span class=\"symbol\">n16</span></span><br><span class=\"line\">vipThread<span class=\"number\">16</span></span><br><span class=\"line\">mai<span class=\"symbol\">n17</span></span><br><span class=\"line\">vipThread<span class=\"number\">17</span></span><br><span class=\"line\">mai<span class=\"symbol\">n18</span></span><br><span class=\"line\">vipThread<span class=\"number\">18</span></span><br><span class=\"line\">mai<span class=\"symbol\">n19</span></span><br><span class=\"line\">mai<span class=\"symbol\">n20</span></span><br><span class=\"line\">vipThread<span class=\"number\">19</span></span><br><span class=\"line\">mai<span class=\"symbol\">n21</span></span><br><span class=\"line\">vipThread<span class=\"number\">20</span></span><br><span class=\"line\">vipThread<span class=\"number\">21</span></span><br><span class=\"line\">mai<span class=\"symbol\">n22</span></span><br><span class=\"line\">vipThread<span class=\"number\">22</span></span><br><span class=\"line\">mai<span class=\"symbol\">n23</span></span><br><span class=\"line\">vipThread<span class=\"number\">23</span></span><br><span class=\"line\">mai<span class=\"symbol\">n24</span></span><br><span class=\"line\">mai<span class=\"symbol\">n25</span></span><br><span class=\"line\">vipThread<span class=\"number\">24</span></span><br><span class=\"line\">mai<span class=\"symbol\">n26</span></span><br><span class=\"line\">mai<span class=\"symbol\">n27</span></span><br><span class=\"line\">vipThread<span class=\"number\">25</span></span><br><span class=\"line\">vipThread<span class=\"number\">26</span></span><br><span class=\"line\">mai<span class=\"symbol\">n28</span></span><br><span class=\"line\">mai<span class=\"symbol\">n29</span></span><br><span class=\"line\">vipThread<span class=\"number\">27</span></span><br><span class=\"line\">mai<span class=\"symbol\">n30</span></span><br><span class=\"line\">vipThread<span class=\"number\">28</span></span><br><span class=\"line\">mai<span class=\"symbol\">n31</span></span><br><span class=\"line\">mai<span class=\"symbol\">n32</span></span><br><span class=\"line\">vipThread<span class=\"number\">29</span></span><br><span class=\"line\">vipThread<span class=\"number\">30</span></span><br><span class=\"line\">mai<span class=\"symbol\">n33</span></span><br><span class=\"line\">vipThread<span class=\"number\">31</span></span><br><span class=\"line\">vipThread<span class=\"number\">32</span></span><br><span class=\"line\">vipThread<span class=\"number\">33</span></span><br><span class=\"line\">mai<span class=\"symbol\">n34</span></span><br><span class=\"line\">vipThread<span class=\"number\">34</span></span><br><span class=\"line\">mai<span class=\"symbol\">n35</span></span><br><span class=\"line\">mai<span class=\"symbol\">n36</span></span><br><span class=\"line\">vipThread<span class=\"number\">35</span></span><br><span class=\"line\">vipThread<span class=\"number\">36</span></span><br><span class=\"line\">mai<span class=\"symbol\">n37</span></span><br><span class=\"line\">vipThread<span class=\"number\">37</span></span><br><span class=\"line\">mai<span class=\"symbol\">n38</span></span><br><span class=\"line\">vipThread<span class=\"number\">38</span></span><br><span class=\"line\">mai<span class=\"symbol\">n39</span></span><br><span class=\"line\">vipThread<span class=\"number\">39</span></span><br><span class=\"line\">vipThread<span class=\"number\">40</span></span><br><span class=\"line\">mai<span class=\"symbol\">n40</span></span><br><span class=\"line\">vipThread<span class=\"number\">41</span></span><br><span class=\"line\">mai<span class=\"symbol\">n41</span></span><br><span class=\"line\">vipThread<span class=\"number\">42</span></span><br><span class=\"line\">mai<span class=\"symbol\">n42</span></span><br><span class=\"line\">vipThread<span class=\"number\">43</span></span><br><span class=\"line\">mai<span class=\"symbol\">n43</span></span><br><span class=\"line\">vipThread<span class=\"number\">44</span></span><br><span class=\"line\">mai<span class=\"symbol\">n44</span></span><br><span class=\"line\">vipThread<span class=\"number\">45</span></span><br><span class=\"line\">mai<span class=\"symbol\">n45</span></span><br><span class=\"line\">vipThread<span class=\"number\">46</span></span><br><span class=\"line\">mai<span class=\"symbol\">n46</span></span><br><span class=\"line\">vipThread<span class=\"number\">47</span></span><br><span class=\"line\">mai<span class=\"symbol\">n47</span></span><br><span class=\"line\">vipThread<span class=\"number\">48</span></span><br><span class=\"line\">mai<span class=\"symbol\">n48</span></span><br><span class=\"line\">vipThread<span class=\"number\">49</span></span><br><span class=\"line\">mai<span class=\"symbol\">n49</span></span><br><span class=\"line\">vipThread<span class=\"number\">50</span></span><br><span class=\"line\">vipThread<span class=\"number\">51</span></span><br><span class=\"line\">vipThread<span class=\"number\">52</span></span><br><span class=\"line\">vipThread<span class=\"number\">53</span></span><br><span class=\"line\">vipThread<span class=\"number\">54</span></span><br><span class=\"line\">vipThread<span class=\"number\">55</span></span><br><span class=\"line\">vipThread<span class=\"number\">56</span></span><br><span class=\"line\">vipThread<span class=\"number\">57</span></span><br><span class=\"line\">vipThread<span class=\"number\">58</span></span><br><span class=\"line\">vipThread<span class=\"number\">59</span></span><br><span class=\"line\">vipThread<span class=\"number\">60</span></span><br><span class=\"line\">vipThread<span class=\"number\">61</span></span><br><span class=\"line\">vipThread<span class=\"number\">62</span></span><br><span class=\"line\">vipThread<span class=\"number\">63</span></span><br><span class=\"line\">vipThread<span class=\"number\">64</span></span><br><span class=\"line\">vipThread<span class=\"number\">65</span></span><br><span class=\"line\">vipThread<span class=\"number\">66</span></span><br><span class=\"line\">vipThread<span class=\"number\">67</span></span><br><span class=\"line\">vipThread<span class=\"number\">68</span></span><br><span class=\"line\">vipThread<span class=\"number\">69</span></span><br><span class=\"line\">vipThread<span class=\"number\">70</span></span><br><span class=\"line\">vipThread<span class=\"number\">71</span></span><br><span class=\"line\">vipThread<span class=\"number\">72</span></span><br><span class=\"line\">vipThread<span class=\"number\">73</span></span><br><span class=\"line\">vipThread<span class=\"number\">74</span></span><br><span class=\"line\">vipThread<span class=\"number\">75</span></span><br><span class=\"line\">vipThread<span class=\"number\">76</span></span><br><span class=\"line\">vipThread<span class=\"number\">77</span></span><br><span class=\"line\">vipThread<span class=\"number\">78</span></span><br><span class=\"line\">vipThread<span class=\"number\">79</span></span><br><span class=\"line\">vipThread<span class=\"number\">80</span></span><br><span class=\"line\">vipThread<span class=\"number\">81</span></span><br><span class=\"line\">vipThread<span class=\"number\">82</span></span><br><span class=\"line\">vipThread<span class=\"number\">83</span></span><br><span class=\"line\">vipThread<span class=\"number\">84</span></span><br><span class=\"line\">vipThread<span class=\"number\">85</span></span><br><span class=\"line\">vipThread<span class=\"number\">86</span></span><br><span class=\"line\">vipThread<span class=\"number\">87</span></span><br><span class=\"line\">vipThread<span class=\"number\">88</span></span><br><span class=\"line\">vipThread<span class=\"number\">89</span></span><br><span class=\"line\">vipThread<span class=\"number\">90</span></span><br><span class=\"line\">vipThread<span class=\"number\">91</span></span><br><span class=\"line\">vipThread<span class=\"number\">92</span></span><br><span class=\"line\">vipThread<span class=\"number\">93</span></span><br><span class=\"line\">vipThread<span class=\"number\">94</span></span><br><span class=\"line\">vipThread<span class=\"number\">95</span></span><br><span class=\"line\">vipThread<span class=\"number\">96</span></span><br><span class=\"line\">vipThread<span class=\"number\">97</span></span><br><span class=\"line\">vipThread<span class=\"number\">98</span></span><br><span class=\"line\">vipThread<span class=\"number\">99</span></span><br><span class=\"line\">mai<span class=\"symbol\">n50</span></span><br><span class=\"line\">mai<span class=\"symbol\">n51</span></span><br><span class=\"line\">mai<span class=\"symbol\">n52</span></span><br><span class=\"line\">mai<span class=\"symbol\">n53</span></span><br><span class=\"line\">mai<span class=\"symbol\">n54</span></span><br><span class=\"line\">mai<span class=\"symbol\">n55</span></span><br><span class=\"line\">mai<span class=\"symbol\">n56</span></span><br><span class=\"line\">mai<span class=\"symbol\">n57</span></span><br><span class=\"line\">mai<span class=\"symbol\">n58</span></span><br><span class=\"line\">mai<span class=\"symbol\">n59</span></span><br><span class=\"line\">mai<span class=\"symbol\">n60</span></span><br><span class=\"line\">mai<span class=\"symbol\">n61</span></span><br><span class=\"line\">mai<span class=\"symbol\">n62</span></span><br><span class=\"line\">mai<span class=\"symbol\">n63</span></span><br><span class=\"line\">mai<span class=\"symbol\">n64</span></span><br><span class=\"line\">mai<span class=\"symbol\">n65</span></span><br><span class=\"line\">mai<span class=\"symbol\">n66</span></span><br><span class=\"line\">mai<span class=\"symbol\">n67</span></span><br><span class=\"line\">mai<span class=\"symbol\">n68</span></span><br><span class=\"line\">mai<span class=\"symbol\">n69</span></span><br><span class=\"line\">mai<span class=\"symbol\">n70</span></span><br><span class=\"line\">mai<span class=\"symbol\">n71</span></span><br><span class=\"line\">mai<span class=\"symbol\">n72</span></span><br><span class=\"line\">mai<span class=\"symbol\">n73</span></span><br><span class=\"line\">mai<span class=\"symbol\">n74</span></span><br><span class=\"line\">mai<span class=\"symbol\">n75</span></span><br><span class=\"line\">mai<span class=\"symbol\">n76</span></span><br><span class=\"line\">mai<span class=\"symbol\">n77</span></span><br><span class=\"line\">mai<span class=\"symbol\">n78</span></span><br><span class=\"line\">mai<span class=\"symbol\">n79</span></span><br><span class=\"line\">mai<span class=\"symbol\">n80</span></span><br><span class=\"line\">mai<span class=\"symbol\">n81</span></span><br><span class=\"line\">mai<span class=\"symbol\">n82</span></span><br><span class=\"line\">mai<span class=\"symbol\">n83</span></span><br><span class=\"line\">mai<span class=\"symbol\">n84</span></span><br><span class=\"line\">mai<span class=\"symbol\">n85</span></span><br><span class=\"line\">mai<span class=\"symbol\">n86</span></span><br><span class=\"line\">mai<span class=\"symbol\">n87</span></span><br><span class=\"line\">mai<span class=\"symbol\">n88</span></span><br><span class=\"line\">mai<span class=\"symbol\">n89</span></span><br><span class=\"line\">mai<span class=\"symbol\">n90</span></span><br><span class=\"line\">mai<span class=\"symbol\">n91</span></span><br><span class=\"line\">mai<span class=\"symbol\">n92</span></span><br><span class=\"line\">mai<span class=\"symbol\">n93</span></span><br><span class=\"line\">mai<span class=\"symbol\">n94</span></span><br><span class=\"line\">mai<span class=\"symbol\">n95</span></span><br><span class=\"line\">mai<span class=\"symbol\">n96</span></span><br><span class=\"line\">mai<span class=\"symbol\">n97</span></span><br><span class=\"line\">mai<span class=\"symbol\">n98</span></span><br><span class=\"line\">mai<span class=\"symbol\">n99</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>å¯ä»¥è§åˆ° main å’Œ vipThread ä¸¤ä¸ªçº¿ç¨‹å‡ ä¹åŒæ­¥æ‰§è¡Œ,åˆ°äº† main49 æ—¶,vipThread ä¼šä¸»åŠ¨æ’é˜Ÿ,è¿™æ—¶ vipThread ä¹‹å¤–çš„çº¿ç¨‹é˜»å¡.</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h3 id=\"çº¿ç¨‹ä¼˜å…ˆçº§-Priority\">çº¿ç¨‹ä¼˜å…ˆçº§-Priority</h3>\n<ul>\n<li>\n<p>çº¿ç¨‹çš„ä¼˜å…ˆçº§ç”¨æ•°å­—è¡¨ç¤ºï¼ŒèŒƒå›´ä» 1~10.</p>\n<ul>\n<li>Thread.MIN_PRIORITY = 1;</li>\n<li>Thread.MAX_PRIORITY = 10;</li>\n<li>Thread.NORM_PRIORITY = 5;</li>\n</ul>\n</li>\n<li>\n<p>ä½¿ç”¨ä¸€ä¸‹æ–¹æ³•æ”¹å˜æˆ–è·å–ä¼˜å…ˆçº§</p>\n<ul>\n<li>â€‹.getPriority()</li>\n<li>.setPriority(int xxx)</li>\n</ul>\n<p>ä¸åšä¸¾ä¾‹äº†.</p>\n</li>\n</ul>\n<p><a><img src= \"https://pan.weidows.tech/d/local/img/loading.svg\" data-lazy-src=\"https://pan.weidows.tech/d/local/img/divider.png\" alt=\"åˆ†å‰²çº¿\"></a></p>\n<h3 id=\"å®ˆæŠ¤çº¿ç¨‹-daemon\">å®ˆæŠ¤çº¿ç¨‹-daemon</h3>\n<ul>\n<li>\n<p>çº¿ç¨‹åˆ†ä¸º<code>ç”¨æˆ·çº¿ç¨‹</code>å’Œ<code>å®ˆæŠ¤çº¿ç¨‹</code>,ç”¨æˆ·çº¿ç¨‹å¿…é¡»æ‰§è¡Œå®Œæ¯•ç¨‹åºæ‰ç»ˆæ­¢,è€Œå®ˆæŠ¤çº¿ç¨‹ä¸åšè¦æ±‚.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TestDaemon</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ! ä¸Šå¸</span></span><br><span class=\"line\">    <span class=\"type\">Thread</span> <span class=\"variable\">godThread</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä¸Šå¸ä¿ä½‘ä½ &quot;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"comment\">//é»˜è®¤falseè¡¨ç¤ºæ˜¯ç”¨æˆ·çº¿ç¨‹ï¼Œæ­£å¸¸çš„çº¿ç¨‹éƒ½æ˜¯ç”¨æˆ·çº¿ç¨‹</span></span><br><span class=\"line\">    godThread.setDaemon(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    godThread.start();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ! ä½ </span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä½ ä¸€ç”Ÿéƒ½å¼€å¿ƒçš„æ´»ç€&quot;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;GoodBye World&quot;</span>);</span><br><span class=\"line\">    &#125;).start();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>ç»“æœ: &quot;you&quot;çº¿ç¨‹ç»ˆæ­¢å daemon çº¿ç¨‹ä»æ‰§è¡Œäº†ä¸€æ®µæ—¶é—´</p>\n<figure class=\"highlight node-repl\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">...</span></span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä½ ä¸€ç”Ÿéƒ½å¼€å¿ƒçš„æ´»ç€</span><br><span class=\"line\">ä½ ä¸€ç”Ÿéƒ½å¼€å¿ƒçš„æ´»ç€</span><br><span class=\"line\">ä½ ä¸€ç”Ÿéƒ½å¼€å¿ƒçš„æ´»ç€</span><br><span class=\"line\">ä½ ä¸€ç”Ÿéƒ½å¼€å¿ƒçš„æ´»ç€</span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">GoodBye World</span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br><span class=\"line\">ä¸Šå¸ä¿ä½‘ä½ </span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">",
            "tags": [
                "ç¬”è®°",
                "Java",
                "å¤šçº¿ç¨‹"
            ]
        }
    ]
}